<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r595 - in branches/1.0/data/levels: enigma_cross	enigma_experimental enigma_iii enigma_v enigma_vi lib
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r595%20-%20in%20branches/1.0/data/levels%3A%20enigma_cross%0A%09enigma_experimental%20enigma_iii%20enigma_v%20enigma_vi%20lib&In-Reply-To=%3C200702102214.l1AMEUKJ016592%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000034.html">
   <LINK REL="Next"  HREF="000036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r595 - in branches/1.0/data/levels: enigma_cross	enigma_experimental enigma_iii enigma_v enigma_vi lib</H1>
    <B>raoul at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r595%20-%20in%20branches/1.0/data/levels%3A%20enigma_cross%0A%09enigma_experimental%20enigma_iii%20enigma_v%20enigma_vi%20lib&In-Reply-To=%3C200702102214.l1AMEUKJ016592%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r595 - in branches/1.0/data/levels: enigma_cross	enigma_experimental enigma_iii enigma_v enigma_vi lib">raoul at mail.berlios.de
       </A><BR>
    <I>Sat Feb 10 23:14:30 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000034.html">[Enigma-game-svn] r594 - branches/1.0/po
</A></li>
        <LI>Next message: <A HREF="000036.html">[Enigma-game-svn] r596 - branches/1.0/po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35">[ date ]</a>
              <a href="thread.html#35">[ thread ]</a>
              <a href="subject.html#35">[ subject ]</a>
              <a href="author.html#35">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: raoul
Date: 2007-02-10 23:14:28 +0100 (Sat, 10 Feb 2007)
New Revision: 595

Added:
   branches/1.0/data/levels/enigma_vi/ral11_2.xml
   branches/1.0/data/levels/enigma_vi/ulf04_1.xml
   branches/1.0/data/levels/enigma_vi/ulf05_1.xml
Removed:
   branches/1.0/data/levels/enigma_vi/ral11_1.xml
Modified:
   branches/1.0/data/levels/enigma_cross/newlevels.xml
   branches/1.0/data/levels/enigma_cross/newlevels_1.0.1.xml
   branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml
   branches/1.0/data/levels/enigma_iii/index.xml
   branches/1.0/data/levels/enigma_iii/just07_1.xml
   branches/1.0/data/levels/enigma_v/index.xml
   branches/1.0/data/levels/enigma_v/just06_1.xml
   branches/1.0/data/levels/enigma_v/raoul23_1.xml
   branches/1.0/data/levels/enigma_vi/index.xml
   branches/1.0/data/levels/enigma_vi/raoul26_1.xml
   branches/1.0/data/levels/lib/libpuzzle_2.xml
Log:
-&gt; New features in libpuzzle_v2.
-&gt; Some levels adjusted to libpuzzle_v2.
-&gt; Bugfix in &quot;Houdini&quot;.
-&gt; 2 new Levels from Ulf Stegemann.



Modified: branches/1.0/data/levels/enigma_cross/newlevels.xml
===================================================================
--- branches/1.0/data/levels/enigma_cross/newlevels.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_cross/newlevels.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -64,7 +64,7 @@
     &lt;level _seq=&quot;56&quot; _title=&quot;Set Me Free&quot; _xpath=&quot;enigma_iii/illmind06_1&quot; author=&quot;illmind&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;illmind06&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;57&quot; _title=&quot;Danger Slide&quot; _xpath=&quot;enigma_iii/luc15_1&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;luc15&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;58&quot; _title=&quot;White Contrast&quot; _xpath=&quot;enigma_iii/illmind07_1&quot; author=&quot;illmind&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;illmind07&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;59&quot; _title=&quot;Manamana&quot; _xpath=&quot;enigma_iii/just07_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just07&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;59&quot; _title=&quot;Manamana&quot; _xpath=&quot;enigma_iii/just07_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just07&quot; rel=&quot;1&quot; rev=&quot;2&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;60&quot; _title=&quot;Bad Flowers&quot; _xpath=&quot;enigma_iii/nat30_1&quot; author=&quot;Nat Pryce&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;nat30&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;61&quot; _title=&quot;Don't Touch&quot; _xpath=&quot;enigma_iii/raoul07_2&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul07&quot; rel=&quot;2&quot; rev=&quot;1&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;62&quot; _title=&quot;Laser Castle&quot; _xpath=&quot;enigma_iii/andreas04_1&quot; author=&quot;Andreas Lochmann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;andreas04&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -105,7 +105,7 @@
     &lt;level _seq=&quot;97&quot; _title=&quot;Jesusbond&quot; _xpath=&quot;enigma_v/richi02_1&quot; author=&quot;Richi B&#252;tzer&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;richi02&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;98&quot; _title=&quot;Sentry Duty&quot; _xpath=&quot;enigma_v/nat25_1&quot; author=&quot;Nat Pryce&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;nat25&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;99&quot; _title=&quot;Thievish Alleys&quot; _xpath=&quot;enigma_v/andreas33_1&quot; author=&quot;Andreas Lochmann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;andreas33&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;100&quot; _title=&quot;Double play&quot; _xpath=&quot;enigma_v/just06_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just06&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;100&quot; _title=&quot;Double play&quot; _xpath=&quot;enigma_v/just06_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just06&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;101&quot; _title=&quot;Oxyd-Puzzle&quot; _xpath=&quot;enigma_v/raoul05_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul05&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;102&quot; _title=&quot;Keystone&quot; _xpath=&quot;enigma_v/raoul12_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul12&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;103&quot; _title=&quot;Print 23&quot; _xpath=&quot;enigma_v/richi07_1&quot; author=&quot;Richi B&#252;tzer&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;richi07&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -147,7 +147,7 @@
     &lt;level _seq=&quot;139&quot; _title=&quot;You need them&quot; _xpath=&quot;enigma_v/raoul11_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul11&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;140&quot; _title=&quot;Pipes and Plumbing&quot; _xpath=&quot;enigma_v/andreas27_1&quot; author=&quot;Andreas Lochmann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;andreas27&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;141&quot; _title=&quot;The Chamber&quot; _xpath=&quot;enigma_v/luc31_2&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;luc31&quot; rel=&quot;2&quot; rev=&quot;1&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;142&quot; _title=&quot;Spacestation&quot; _xpath=&quot;enigma_v/raoul23_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul23&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;142&quot; _title=&quot;Spacestation&quot; _xpath=&quot;enigma_v/raoul23_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul23&quot; rel=&quot;1&quot; rev=&quot;2&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;143&quot; _title=&quot;A-way&quot; _xpath=&quot;enigma_vi/richi06_1&quot; author=&quot;Richi B&#252;tzer&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;richi06&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;144&quot; _title=&quot;Toreador&quot; _xpath=&quot;enigma_vi/ral02_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060213ral004&quot; rel=&quot;1&quot; rev=&quot;43&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;145&quot; _title=&quot;Laser Splitting&quot; _xpath=&quot;enigma_vi/luc29_1&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;luc29&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -177,7 +177,7 @@
     &lt;level _seq=&quot;169&quot; _title=&quot;Jump into Meditation&quot; _xpath=&quot;enigma_vi/ral07_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060525ral009&quot; rel=&quot;1&quot; rev=&quot;42&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;170&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;enigma_vi/raoul18_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul18&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;171&quot; _title=&quot;Step gently!&quot; _xpath=&quot;enigma_vi/malla03_1&quot; author=&quot;Manuel K&#246;nig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;malla03&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;172&quot; _title=&quot;Houdini&quot; _xpath=&quot;enigma_vi/ral11_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060816ral719&quot; rel=&quot;1&quot; rev=&quot;52&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;172&quot; _title=&quot;Houdini&quot; _xpath=&quot;enigma_vi/ral11_2&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060816ral719&quot; rel=&quot;2&quot; rev=&quot;55&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;173&quot; _title=&quot;Persecution Mania&quot; _xpath=&quot;enigma_vi/ral12_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060911ral294&quot; rel=&quot;1&quot; rev=&quot;34&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;174&quot; _title=&quot;The Aztec Temple&quot; _xpath=&quot;enigma_vi/zogga01_1&quot; author=&quot;Dominik Lehmann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;zogga01&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;175&quot; _title=&quot;No Memory&quot; _xpath=&quot;enigma_vi/edward01_1&quot; author=&quot;Edward&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;edward01&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -201,7 +201,7 @@
     &lt;level _seq=&quot;193&quot; _title=&quot;Ariadne&quot; _xpath=&quot;enigma_vi/andreas40_1&quot; author=&quot;Andreas Lochmann&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;andreas40&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;194&quot; _title=&quot;Oiltrace&quot; _xpath=&quot;enigma_vi/raoul25_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul25&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;195&quot; _title=&quot;The Cube&quot; _xpath=&quot;enigma_vi/malaire01_1&quot; author=&quot;Markus Laire&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20061120malaire901&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;196&quot; _title=&quot;Puzzle Puzzles&quot; _xpath=&quot;enigma_vi/raoul26_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul26&quot; rel=&quot;1&quot; rev=&quot;22&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;196&quot; _title=&quot;Puzzle Puzzles&quot; _xpath=&quot;enigma_vi/raoul26_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul26&quot; rel=&quot;1&quot; rev=&quot;24&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;197&quot; _title=&quot;Checkmate II&quot; _xpath=&quot;enigma_vi/andreas35_1&quot; author=&quot;Andreas Lochmann&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;andreas35&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;198&quot; _title=&quot;be quick or be dead&quot; _xpath=&quot;enigma_vi/illmind12_1&quot; author=&quot;illmind&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;illmind12&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;199&quot; _title=&quot;Tarzan&quot; _xpath=&quot;enigma_vi/ulf03_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060629ulf003&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: branches/1.0/data/levels/enigma_cross/newlevels_1.0.1.xml
===================================================================
--- branches/1.0/data/levels/enigma_cross/newlevels_1.0.1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_cross/newlevels_1.0.1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -13,6 +13,8 @@
     &lt;level _seq=&quot;5&quot; _title=&quot;River of Challenges&quot; _xpath=&quot;enigma_vi/luc33_1&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;luc332006&quot; rel=&quot;1&quot; rev=&quot;3&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;6&quot; _title=&quot;Red Herrings&quot; _xpath=&quot;enigma_vi/andy01_2&quot; author=&quot;Andy Geldmacher&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;20070116money001&quot; rel=&quot;3&quot; rev=&quot;0&quot; score=&quot;3&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;7&quot; _title=&quot;Playing with lasers&quot; _xpath=&quot;enigma_vi/just09_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just09_1&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;8&quot; _title=&quot;Hot Hurdle Race&quot; _xpath=&quot;enigma_vi/ulf04_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070124ulf019&quot; rel=&quot;1&quot; rev=&quot;93&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;9&quot; _title=&quot;Counterclockwise&quot; _xpath=&quot;enigma_vi/ulf05_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070126ulf020&quot; rel=&quot;1&quot; rev=&quot;93&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
   &lt;/levels&gt;
 
 &lt;/index&gt;

Modified: branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -122,7 +122,7 @@
   puzzle({&quot;  # &quot;,
           &quot; ## &quot;,
           &quot; #  &quot;,
-          &quot; ###&quot;,
+          &quot; #*#&quot;,
           &quot;   #&quot;,
           &quot;####&quot;},{5,4},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
@@ -177,10 +177,10 @@
 
   puzzle({&quot;##+#&quot;,&quot;#  #&quot;,&quot;#+##&quot;},{26,20},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
-  puzzle({&quot;###&quot;,&quot;#+#&quot;,&quot;###&quot;},{27,14},&quot;redpuzzle&quot;,&quot;none&quot;)
+  puzzle({&quot;#*#&quot;,&quot;#+#&quot;,&quot;#*#&quot;},{27,14},&quot;redpuzzle&quot;,&quot;none&quot;)
 
-  puzzle({&quot;####&quot;,
-          &quot;+  #&quot;,
+  puzzle({&quot;##*#&quot;,
+          &quot;+  *&quot;,
           &quot; + #&quot;,
           &quot;####&quot;,
           &quot; #  &quot;,
@@ -198,7 +198,7 @@
 
   puzzle({&quot;### #&quot;,
           &quot;#   #&quot;,
-          &quot;# ###&quot;},{3,32},&quot;bigbrick&quot;,&quot;none&quot;)
+          &quot;#*###&quot;},{3,32},&quot;bigbrick&quot;,&quot;none&quot;)
 
   puzzle({&quot;###&quot;,&quot;# #&quot;},{9,33},&quot;bigbrick&quot;,&quot;random&quot;)
 
@@ -238,7 +238,7 @@
           &quot;## ##&quot;},{29,30},&quot;bigbluesand&quot;,&quot;none&quot;)
 
   puzzle({&quot;  ##+&quot;,
-          &quot; ##  &quot;,
+          &quot; *#  &quot;,
           &quot;##   &quot;,
           &quot;#    &quot;,
           &quot;+    &quot;},{34,32},&quot;bigbluesand&quot;,&quot;none&quot;)

Modified: branches/1.0/data/levels/enigma_iii/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_iii/index.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_iii/index.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -62,7 +62,7 @@
     &lt;level _seq=&quot;54&quot; _title=&quot;White Contrast&quot; _xpath=&quot;./illmind07_1&quot; author=&quot;illmind&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;illmind07&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;55&quot; _title=&quot;Laser Tricks&quot; _xpath=&quot;./duffy84_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy84&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;56&quot; _title=&quot;Space Fishing&quot; _xpath=&quot;./martin73_1&quot; author=&quot;Martin Hawlisch&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;martin73&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;57&quot; _title=&quot;Manamana&quot; _xpath=&quot;./just07_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just07&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;57&quot; _title=&quot;Manamana&quot; _xpath=&quot;./just07_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just07&quot; rel=&quot;1&quot; rev=&quot;2&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;58&quot; _title=&quot;Sacrifice&quot; _xpath=&quot;./duffy49_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy49&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;59&quot; _title=&quot;Double-Maze&quot; _xpath=&quot;./duffy09_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy9&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;60&quot; _title=&quot;Bad Flowers&quot; _xpath=&quot;./nat30_1&quot; author=&quot;Nat Pryce&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;nat30&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: branches/1.0/data/levels/enigma_iii/just07_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_iii/just07_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_iii/just07_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -3,11 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Manamana&quot; el:subtitle=&quot;&quot; el:id=&quot;just07&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;2&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;JuSt&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005 JuSt&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -16,8 +17,6 @@
       &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
     &lt;/el:info&gt;
     &lt;el:luamain&gt;&lt;![CDATA[
--- Level had been automatically created with Star.LUA Editor v0.32 beta
-
 create_world(39, 13)
 oxyd_default_flavor=&quot;b&quot;
 
@@ -54,8 +53,6 @@
 draw_stones(&quot;st-stone1&quot;, {14, 1}, {0, 1}, 3)
 draw_stones(&quot;st-stone1&quot;, {32, 1}, {0, 1}, 2)
 draw_stones(&quot;st-stone1&quot;, {38, 1}, {0, 1}, 3)
-draw_stones(&quot;st-puzzle&quot;, {7, 3}, {0, 1}, 3, {connections=PUZ_1010})
-draw_stones(&quot;st-puzzle&quot;, {11, 3}, {1, 0}, 2, {connections=PUZ_1010, oxyd=&quot;1&quot;})
 draw_stones(&quot;st-stone1&quot;, {32, 4}, {0, 1}, 5)
 draw_stones(&quot;st-stone1&quot;, {4, 5}, {0, 1}, 3)
 draw_stones(&quot;st-stone1&quot;, {14, 5}, {0, 1}, 3)
@@ -67,8 +64,6 @@
 draw_stones(&quot;st-stone1&quot;, {19, 6}, {1, 0}, 4)
 draw_stones(&quot;st-stone1&quot;, {26, 6}, {1, 0}, 6)
 draw_stones(&quot;st-stone1&quot;, {33, 6}, {1, 0}, 5)
-draw_stones(&quot;st-puzzle&quot;, {7, 7}, {0, 1}, 4, {connections=PUZ_1010})
-draw_stones(&quot;st-puzzle&quot;, {12, 8}, {-1, 1}, 2, {connections=PUZ_0001, oxyd=&quot;1&quot;})
 draw_stones(&quot;st-stone1&quot;, {4, 9}, {0, 1}, 4)
 draw_stones(&quot;st-stone1&quot;, {14, 9}, {0, 1}, 4)
 draw_stones(&quot;st-stone1&quot;, {38, 9}, {0, 1}, 4)
@@ -78,32 +73,40 @@
 draw_stones(&quot;st-stone1&quot;, {15, 12}, {1, 0}, 17)
 draw_stones(&quot;st-stone1&quot;, {33, 12}, {1, 0}, 5)
 set_stones(&quot;st-pmirror&quot;, {{17, 1}, {23, 1}}, {movable=FALSE, transparent=FALSE, orientation=&quot;2&quot;})
-set_stones(&quot;st-puzzle&quot;, {{6, 2}, {6, 11}}, {connections=PUZ_0100})
-set_stone(&quot;st-puzzle&quot;, 7, 2, {connections=PUZ_0011})
 set_stone(&quot;st-laser&quot;, 18, 2, {name=&quot;laser1&quot;, dir=EAST, on=&quot;0&quot;})
 set_stones(&quot;st-3mirror&quot;, {{25, 2}, {23, 10}}, {movable=FALSE, transparent=FALSE, orientation=&quot;2&quot;})
-set_stone(&quot;st-puzzle&quot;, 10, 3, {connections=PUZ_1100, oxyd=&quot;1&quot;})
-set_stones(&quot;st-puzzle&quot;, {{10, 4}, {12, 5}, {11, 8}, {14, 8}, {11, 10}}, {connections=PUZ_0101, oxyd=&quot;1&quot;})
-set_stones(&quot;st-puzzle&quot;, {{12, 4}, {12, 9}}, {connections=PUZ_0110, oxyd=&quot;1&quot;})
 set_stones(&quot;st-pmirror&quot;, {{17, 4}, {17, 9}}, {movable=TRUE, transparent=TRUE, orientation=&quot;2&quot;})
 set_stone(&quot;st-break_bolder&quot;, 6, 5)
-set_stone(&quot;st-puzzle&quot;, 10, 5, {connections=PUZ_0011, oxyd=&quot;1&quot;})
-set_stone(&quot;st-puzzle&quot;, 11, 5, {connections=PUZ_1001, oxyd=&quot;1&quot;})
-set_stone(&quot;st-puzzle&quot;, 7, 6, {connections=PUZ_0000})
 set_stone(&quot;st-switch_black&quot;, 17, 6, {action=&quot;onoff&quot;, target=&quot;laser2&quot;, on=&quot;1&quot;, name=&quot;switch5&quot;})
 set_stone(&quot;st-switch_white&quot;, 18, 6, {action=&quot;onoff&quot;, target=&quot;laser1&quot;, on=&quot;1&quot;, name=&quot;switch6&quot;})
 set_stones(&quot;st-glass&quot;, {{23, 6}, {25, 6}}, {type=&quot;0&quot;})
 set_stone(&quot;st-stone1&quot;, 24, 6)
-set_stone(&quot;st-puzzle&quot;, 13, 8, {connections=PUZ_1110, oxyd=&quot;1&quot;})
-set_stone(&quot;st-puzzle&quot;, 13, 9, {connections=PUZ_1000, oxyd=&quot;1&quot;})
 set_stone(&quot;st-laser&quot;, 18, 10, {name=&quot;laser2&quot;, dir=EAST, on=&quot;0&quot;})
-set_stone(&quot;st-puzzle&quot;, 7, 11, {connections=PUZ_1001})
 set_stones(&quot;st-pmirror&quot;, {{17, 11}, {25, 11}}, {movable=FALSE, transparent=FALSE, orientation=&quot;4&quot;})
 
 -- Actor Layer
 set_actor(&quot;ac-blackball&quot;, 2.5, 3.5, {player=&quot;0&quot;, mouseforce=&quot;1&quot;})
 set_actor(&quot;ac-whiteball&quot;, 2.5, 9.5, {player=&quot;1&quot;, mouseforce=&quot;1&quot;})
 
+puzzle ({&quot;###&quot;,
+         &quot;# #&quot;,
+         &quot;###&quot;},{10,3},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+puzzle ({&quot;####&quot;,
+         &quot;### &quot;,
+         &quot;#   &quot;},{11,8},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+puzzle ({&quot;##&quot;,
+         &quot; #&quot;,
+         &quot; #&quot;,
+         &quot; #&quot;,
+         &quot; *&quot;,
+         &quot; #&quot;,
+         &quot; #&quot;,
+         &quot; #&quot;,
+         &quot; #&quot;,
+         &quot;##&quot;},{6,2},&quot;bluepuzzle&quot;,&quot;none&quot;)
+
 oxyd_shuffle()
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;

Modified: branches/1.0/data/levels/enigma_v/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/index.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_v/index.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -23,7 +23,7 @@
     &lt;level _seq=&quot;15&quot; _title=&quot;Solvable?&quot; _xpath=&quot;./barry01_2&quot; author=&quot;Barry &amp; Lori Mead&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;barry01&quot; rel=&quot;2&quot; rev=&quot;0&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;16&quot; _title=&quot;Draggers&quot; _xpath=&quot;./ant21_1&quot; author=&quot;Petr Machata&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;ant21&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;17&quot; _title=&quot;Break and Enter&quot; _xpath=&quot;./siegfried16_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level5b&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;18&quot; _title=&quot;Double play&quot; _xpath=&quot;./just06_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just06&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;18&quot; _title=&quot;Double play&quot; _xpath=&quot;./just06_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just06&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;19&quot; _title=&quot;Oxyd-Puzzle&quot; _xpath=&quot;./raoul05_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul05&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;20&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./ralf12_1&quot; author=&quot;Ralf Westram&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;ralf12&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;21&quot; _title=&quot;Plan Ahead&quot; _xpath=&quot;./duffy114_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy114&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -104,7 +104,7 @@
     &lt;level _seq=&quot;96&quot; _title=&quot;The Chamber&quot; _xpath=&quot;./luc31_2&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;luc31&quot; rel=&quot;2&quot; rev=&quot;1&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;97&quot; _title=&quot;Automaton&quot; _xpath=&quot;./duffy95_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy95&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;98&quot; _title=&quot;Caterpillar&quot; _xpath=&quot;./nat15_1&quot; author=&quot;Nat Pryce&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;nat15&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;99&quot; _title=&quot;Spacestation&quot; _xpath=&quot;./raoul23_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul23&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;99&quot; _title=&quot;Spacestation&quot; _xpath=&quot;./raoul23_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul23&quot; rel=&quot;1&quot; rev=&quot;2&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;100&quot; _title=&quot;Island Labyrinth&quot; _xpath=&quot;./duffy129_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy129&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
   &lt;/levels&gt;
 

Modified: branches/1.0/data/levels/enigma_v/just06_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/just06_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_v/just06_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -3,12 +3,13 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Double play&quot; el:subtitle=&quot;&quot; el:id=&quot;just06&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;JuSt&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005 JuSt&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
       &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
        &lt;el:dependency el:path=&quot;lib/ant&quot; el:id=&quot;lib/ant&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -17,37 +18,39 @@
       &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
     &lt;/el:info&gt;
     &lt;el:luamain&gt;&lt;![CDATA[
-
---debug_mode ()
 multiplayer_mode()
+
 function file_oxyd(x,y,f)
     oxyd_default_flavor=f
     oxyd(x,y)
 end
+
 function func1()
   SendMessage(&quot;door1&quot;,&quot;openclose&quot;)
   SendMessage(&quot;door2&quot;,&quot;openclose&quot;)
 end
+
 levelh=13
 levelw=58
 enigma.FlatForce=30
 enigma.SlopeForce=30
 enigma.ElectricForce=30
+
 cells={}
 items={}
 actors={}
 stones={}
-puzzles2={}
-puzzles1={}
 actors[&quot; &quot;]=cell{}
 stones[&quot; &quot;]=cell{}
 cells[&quot; &quot;]=cell{}
 items[&quot; &quot;]=cell{}
+
 cells[&quot;!&quot;]=cell{floor=&quot;fl-bluegray&quot;}
 cells[&quot;#&quot;]=cell{floor=&quot;fl-normal&quot;}
 cells[&quot;$&quot;]=cell{floor=&quot;fl-abyss&quot;}
 cells[&quot;~&quot;]=cell{floor=&quot;fl-water&quot;}
 cells[&quot;=&quot;]=cell{floor={&quot;fl-bridge&quot;, {name=&quot;bridge&quot;}}}
+
 stones[&quot;!&quot;]=cell{stone=&quot;st-blue-sand&quot;}
 stones[&quot;-&quot;]=cell{stone=&quot;st-oneway_white-e&quot;}
 stones[&quot;.&quot;]=cell{stone=&quot;st-oneway_black-e&quot;}
@@ -74,8 +77,8 @@
 stones[&quot;@&quot;]=cell{stone=&quot;st-mail-s&quot;}
 stones[&quot;A&quot;]=cell{stone={&quot;st-key_b&quot;, {action=&quot;openclose&quot;, target=&quot;door4&quot;}}}
 stones[&quot;B&quot;]=cell{stone={&quot;st-key_a&quot;, {action=&quot;openclose&quot;, target=&quot;door3&quot;}}}
-stones[&quot;?&quot;]=cell{parent={{add_multicell, puzzles2}}}
 stones[&quot;*&quot;]=cell{stone={&quot;st-coinslot&quot;, {action=&quot;openclose&quot;, target=&quot;bridge&quot;}}}
+
 items[&quot;!&quot;]=cell{item=&quot;it-key_a&quot;}
 items[&quot;#&quot;]=cell{item=&quot;it-key_b&quot;}
 items[&quot;$&quot;]=cell{item={&quot;it-burnable&quot;, {name=&quot;feuer&quot;}}}
@@ -96,6 +99,7 @@
          &quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!~~~~~~~!!!!!!!!!&quot;,
          &quot;!!!!!!!!!!!!!!!!!!!=!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;,
          &quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;}
+
 acmap = {&quot;                                                          &quot;,
          &quot; 1                                                        &quot;,
          &quot;                                                          &quot;,
@@ -109,6 +113,7 @@
          &quot;                                                          &quot;,
          &quot; 2                                                        &quot;,
          &quot;                                                          &quot;}
+
 itmap = {&quot;                                                          &quot;,
          &quot;                                       ++++++++++         &quot;,
          &quot; *                                     +++++++$%+         &quot;,
@@ -122,6 +127,7 @@
          &quot;                                                          &quot;,
          &quot;                                                          &quot;,
          &quot;                                                          &quot;}
+
 stmap = {&quot;!!!!!!!!!!!!!!!!!!!!*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&gt;&gt;&gt;&gt;!&quot;,
          &quot;!         -     !!            a3333333   0 0 0 0 !  e    !&quot;,
          &quot;!         !     !! !          !3333333! 0 0 0 0 0!  !!!!A!&quot;,
@@ -136,51 +142,20 @@
          &quot;!         .                   b3333333           !  f    !&quot;,
          &quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&gt;&gt;&gt;&gt;!&quot;}
 
-function scrambling (map, char)
-  numstones = 0
-  xpos = {}
-  ypos = {}
-  nam  = {}
-  typ  = {}
-  con  = {}
-  -- First, lets collect the puzzelstones named &lt;char&gt; in the map &lt;map&gt;
-  for i = 1, levelh do
-    local line = map[i]
-    for j = 1, strlen(line) do
-      local c = strsub(line,j,j)
-      if c == char then
-        if enigma.GetStone(j - 1, i - 1) ~= nil then
-          numstones = numstones + 1
-          xpos[numstones] = j - 1
-          ypos[numstones] = i - 1
-          nam[numstones] = enigma.GetKind(enigma.GetStone(xpos[numstones], ypos[numstones]))
-          con[numstones] = enigma.GetAttrib(enigma.GetStone(xpos[numstones], ypos[numstones]),&quot;connections&quot;)
-          typ[numstones] = enigma.GetAttrib(enigma.GetStone(xpos[numstones], ypos[numstones]),&quot;oxyd&quot;)
-        end
-      end
-    end
-  end
-  -- and now, lets shuffle them
-  for i = 1, numstones do
-    ok = 0
-    repeat
-      xx = random(numstones)
-      if nam[xx] ~= &quot;&quot; then
-        kill_stone(xpos[i], ypos[i])
-        set_stone(nam[xx], xpos[i], ypos[i], {connections=con[xx], oxyd=typ[xx]})
-        nam[xx] = &quot;&quot;
-        ok = 1
-      end
-    until ok == 1
-  end
-end
 create_world_by_map(level)
+
 draw_map(0,0,stmap,stones)
 draw_map(0,0,itmap,items)
 draw_map(0,0,acmap,actors)
-render_puzzles(puzzles2, puzzle2)
-scrambling (stmap, &quot;?&quot;)
+
+puzzle ({&quot;###&quot;,
+         &quot;###&quot;,
+         &quot; # &quot;,
+         &quot;###&quot;,
+         &quot;###&quot;},{4,4},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
 oxyd_shuffle()
+
 SendMessage(&quot;laser&quot;,&quot;on&quot;)
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;

Modified: branches/1.0/data/levels/enigma_v/raoul23_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/raoul23_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_v/raoul23_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -3,7 +3,7 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Spacestation&quot; el:subtitle=&quot;&quot; el:id=&quot;raoul23&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;2&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">raoul at users.berlios.de</A>&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
@@ -19,10 +19,12 @@
     oxyd_default_flavor=f
     oxyd(x,y)
 end
+
 levelh=37
 levelw=39
 cells={}
 stones={}
+
 stones[&quot; &quot;]=cell{}
 cells[&quot; &quot;]=cell{}
 cells[&quot; &quot;]=cell{floor=&quot;fl-abyss&quot;}
@@ -239,25 +241,21 @@
 -- &quot;Things&quot;:
 function set_thing(x,y,init)
     if init==1 then
-        puzzle({&quot;#+#&quot;,
+        puzzle({&quot;#*#&quot;,
                 &quot;# #&quot;,
                 &quot;###&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
-        set_stone(&quot;st-puzzle-hollow&quot;,x+1,y)
     elseif init==2 then
         puzzle({&quot;###&quot;,
-                &quot;# +&quot;,
+                &quot;# *&quot;,
                 &quot;###&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
-        set_stone(&quot;st-puzzle-hollow&quot;,x+2,y+1)
     elseif init==3 then
         puzzle({&quot;###&quot;,
                 &quot;# #&quot;,
-                &quot;#+#&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
-        set_stone(&quot;st-puzzle-hollow&quot;,x+1,y+2)
+                &quot;#*#&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
     elseif init==4 then    
         puzzle({&quot;###&quot;,
-                &quot;+ #&quot;,
+                &quot;* #&quot;,
                 &quot;###&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
-        set_stone(&quot;st-puzzle-hollow&quot;,x,y+1)
     end
 end
 -- set all of these &quot;things&quot;
@@ -412,9 +410,8 @@
     set_trigger_o()
     set_trigger_u()
 end
---function generate_further_level()
-    prepare_room_3()
---end
+
+prepare_room_3()
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
       &lt;el:string el:key=&quot;title&quot;&gt;

Modified: branches/1.0/data/levels/enigma_vi/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/index.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_vi/index.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -66,9 +66,9 @@
     &lt;level _seq=&quot;58&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./raoul18_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul18&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;59&quot; _title=&quot;Pool with a pole&quot; _xpath=&quot;./alain28_1&quot; author=&quot;Alain Busser&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;alain28&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;60&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./edward30_1&quot; author=&quot;Edward&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;edward30&quot; rel=&quot;1&quot; rev=&quot;2&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;61&quot; _title=&quot;Puzzle Puzzles&quot; _xpath=&quot;./raoul26_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul26&quot; rel=&quot;1&quot; rev=&quot;23&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;61&quot; _title=&quot;Puzzle Puzzles&quot; _xpath=&quot;./raoul26_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul26&quot; rel=&quot;1&quot; rev=&quot;24&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;62&quot; _title=&quot;Tarzan&quot; _xpath=&quot;./ulf03_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060629ulf003&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;63&quot; _title=&quot;Houdini&quot; _xpath=&quot;./ral11_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060816ral719&quot; rel=&quot;1&quot; rev=&quot;52&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;63&quot; _title=&quot;Houdini&quot; _xpath=&quot;./ral11_2&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060816ral719&quot; rel=&quot;2&quot; rev=&quot;52&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;64&quot; _title=&quot;Walk the line&quot; _xpath=&quot;./erich02_1&quot; author=&quot;Erich Schubert&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;erich02&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;65&quot; _title=&quot;Knights &amp; Boxes&quot; _xpath=&quot;./johannes01_1&quot; author=&quot;Johannes Laire&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;20061201johannes313&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;66&quot; _title=&quot;Knight's Journey&quot; _xpath=&quot;./johannes02_1&quot; author=&quot;Johannes Laire&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;20061210johannes313&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -76,6 +76,8 @@
     &lt;level _seq=&quot;68&quot; _title=&quot;River of Challenges&quot; _xpath=&quot;./luc33_1&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;luc332006&quot; rel=&quot;1&quot; rev=&quot;3&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;69&quot; _title=&quot;Red Herrings&quot; _xpath=&quot;./andy01_2&quot; author=&quot;Andy Geldmacher&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;20070116money001&quot; rel=&quot;3&quot; rev=&quot;0&quot; score=&quot;3&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;70&quot; _title=&quot;Playing with lasers&quot; _xpath=&quot;./just09_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just09_1&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;71&quot; _title=&quot;Hot Hurdle Race&quot; _xpath=&quot;./ulf04_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070124ulf019&quot; rel=&quot;1&quot; rev=&quot;93&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;72&quot; _title=&quot;Counterclockwise&quot; _xpath=&quot;./ulf05_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070126ulf020&quot; rel=&quot;1&quot; rev=&quot;93&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
   &lt;/levels&gt;
 
 &lt;/index&gt;

Deleted: branches/1.0/data/levels/enigma_vi/ral11_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/ral11_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_vi/ral11_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -1,220 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
-&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
-  &lt;el:protected &gt;
-    &lt;el:info el:type=&quot;level&quot;&gt;
-      &lt;el:identity el:title=&quot;Houdini&quot; el:subtitle=&quot;Escape by Chaining Thieves&quot; el:id=&quot;20060816ral719&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;$Revision: 52 $&quot; el:status=&quot;released&quot;/&gt;
-      &lt;el:author  el:name=&quot;Ronald Lamprecht&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">ral at users.berlios.de</A>&quot;/&gt;
-      &lt;el:copyright&gt;Copyright &#169; 2006 Ronald Lamprecht&lt;/el:copyright&gt;
-      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
-      &lt;/el:compatibility&gt;
-      &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
-      &lt;el:comments&gt;
-        &lt;el:code&gt;network playable if the yinyang items are removed&lt;/el:code&gt;
-      &lt;/el:comments&gt;
-      &lt;el:score el:easy=&quot;20:17&quot; el:difficult=&quot;26:38&quot;/&gt;
-    &lt;/el:info&gt;
-    &lt;el:luamain&gt;&lt;![CDATA[
-
-set_oxyd = oxyd
-math_floor = floor
-
-function oxyd( x, y, tiles )
-    return set_oxyd( x, y )
-end
-
-function nothing(x, y, tiles)
-    -- create nothing
-end
-
-function floor( floor_type, attribs )
-    return function( x, y, tiles )
-        return set_floor( floor_type, x, y, attribs or {} )
-    end
-end
-
-function stone( stone_type, attribs )
-    return function( x, y, tiles )
-        return set_stone( stone_type, x, y, attribs or {} )
-    end
-end
-
-function item( item_type, attribs )
-    return function( x, y, tiles )
-        return set_item( item_type, x, y, attribs or {} )
-    end
-end
-
-function actor( actor_type, attribs )
-    return function( x, y, tiles )
-        return set_actor( actor_type, x+0.5, y+0.5, attribs or {} )
-    end
-end
-
-function inherit(tile_type)
-    return function( x, y, tiles )
-        return create_tile( tiles, x, y, tile_type )
-    end
-end
-
-function create_world_from_map( tiles, map )
-    create_world( strlen(map[1]), getn(map) )
-    
-    for y = 1,getn(map) do
-        local line = map[y]
-        for x = 1,strlen(line) do
-            local tile = strchar(strbyte(line,x))
-            create_tile( tiles, x-1, y-1, tile )
-        end
-    end
-end
-
-function create_tile( tiles, x, y, tile_type )
-    local constructors = tiles[tile_type]
-
-    if constructors then
-	for i = 1,getn(constructors) do
-	    constructors[i](x,y,tiles)
-	end
-    else
-	error(&quot;invalid tile identifier &quot; .. tile_type )
-    end
-end
-
-oxyd_default_flavor = &quot;a&quot;
-
-tiles = {}
-tiles[&quot; &quot;] = {floor(&quot;fl-wood&quot;)}
-tiles[&quot;-&quot;] = {floor(&quot;fl-abyss&quot;)}
-tiles[&quot;_&quot;] = {floor(&quot;fl-water&quot;)}
-tiles[&quot;*&quot;] = {floor(&quot;fl-swamp&quot;)}
-tiles[&quot;b&quot;] = {inherit(&quot; &quot;), item(&quot;it-brake&quot;)}
-tiles[&quot;h&quot;] = {inherit(&quot; &quot;), item(&quot;it-sword&quot;)}
-tiles[&quot;s&quot;] = {inherit(&quot; &quot;), item(&quot;it-spring2&quot;)}
-tiles[&quot;j&quot;] = {inherit(&quot; &quot;), item(&quot;it-springboard&quot;)}
-tiles[&quot;w&quot;] = {inherit(&quot; &quot;), item(&quot;it-magicwand&quot;)}
-tiles[&quot;l&quot;] = {inherit(&quot; &quot;), item(&quot;it-extralife&quot;)}
-tiles[&quot;z&quot;] = {inherit(&quot; &quot;), stone(&quot;st-plain_cracked&quot;)}
-tiles[&quot;o&quot;] = {inherit(&quot;z&quot;), item(&quot;it-vortex-open&quot;,{name=&quot;vortex1&quot;})}
-tiles[&quot;O&quot;] = {inherit(&quot;z&quot;), item(&quot;it-vortex-open&quot;,{name=&quot;vortex2&quot;})}
-tiles[&quot;x&quot;] = {inherit(&quot; &quot;), oxyd}
-tiles[&quot;#&quot;] = {inherit(&quot; &quot;), stone(&quot;st-plain&quot;)}
-tiles[&quot;-D&quot;] = {inherit(&quot;-&quot;), item(&quot;it-death&quot;)}
-tiles[&quot;=&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-plain&quot;)}
-tiles[&quot;+&quot;] = {inherit(&quot; &quot;), stone(&quot;st-bluegray&quot;)}
-tiles[&quot;.&quot;] = {inherit(&quot; &quot;), stone(&quot;st-bluegray_hole&quot;)}
-tiles[&quot;,&quot;] = {inherit(&quot;l&quot;), stone(&quot;st-bluegray_hole&quot;)}
-tiles[&quot;T&quot;] = {inherit(&quot; &quot;), stone(&quot;st-thief&quot;)}
-tiles[&quot;t&quot;] = {inherit(&quot;l&quot;), stone(&quot;st-thief&quot;)}
-tiles[&quot;U&quot;] = {inherit(&quot;T&quot;), item(&quot;it-document&quot;,{text=&quot;Innocent&quot;})}
-tiles[&quot;V&quot;] = {inherit(&quot;T&quot;), item(&quot;it-document&quot;,{text=&quot;Pirates&quot;})}
-tiles[&quot;Y&quot;] = {inherit(&quot;T&quot;), item(&quot;it-document&quot;,{text=&quot;Treasure&quot;})}
-tiles[&quot;P&quot;] = {inherit(&quot;l&quot;), stone(&quot;st-pull&quot;)}
-tiles[&quot;R&quot;] = {inherit(&quot; &quot;), stone(&quot;st-rubberband&quot;, {name=&quot;rubber&quot;})}
-tiles[&quot;S&quot;] = {inherit(&quot; &quot;), stone(&quot;st-scissors&quot;, {action=&quot;open&quot;, target=&quot;doorA&quot;})}
-tiles[&quot;A0&quot;] = {inherit(&quot;*&quot;), item(&quot;it-document&quot;,{text=&quot;Atreyu&quot;})}
-tiles[&quot;A&quot;] = {inherit(&quot;A0&quot;), stone(&quot;st-door-h&quot;, {name=&quot;doorA&quot;})}
-tiles[&quot;E&quot;] = {inherit(&quot; &quot;), stone(&quot;st-swap&quot;)}
-tiles[&quot;G&quot;] = {inherit(&quot;s&quot;), stone(&quot;st-glass1&quot;)}
-tiles[&quot;g&quot;] = {inherit(&quot; &quot;), stone(&quot;st-grate1&quot;)}
-tiles[&quot;H&quot;] = {inherit(&quot; &quot;), stone(&quot;st-wood1&quot;)}
-tiles[&quot;M&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-mail-n&quot;)}
-tiles[&quot;m&quot;] = {inherit(&quot;-&quot;), stone(&quot;st-coinslot&quot;, {action=&quot;onoff&quot;, target=&quot;laser&quot;})}
-tiles[&quot;L&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-laser-s&quot;, {name=&quot;laser&quot;,on=0})}
-tiles[&quot;D0&quot;] = {inherit(&quot; &quot;), item(&quot;it-document&quot;,{text=&quot;CloseDoor&quot;})}
-tiles[&quot;D&quot;] = {inherit(&quot;D0&quot;), stone(&quot;st-door_b&quot;, {name=&quot;doorB&quot;})}
-tiles[&quot;K&quot;] = {inherit(&quot;-&quot;), stone(&quot;st-key_a&quot;,{action=&quot;openclose&quot;, target=&quot;doorB&quot;})}
-tiles[&quot;C&quot;] = {inherit(&quot; &quot;), stone(&quot;st-door_b&quot;, {name=&quot;doorC&quot;})}
-tiles[&quot;F&quot;] = {inherit(&quot;-&quot;), stone(&quot;st-key_b&quot;,{action=&quot;openclose&quot;, target=&quot;doorC&quot;})}
-tiles[&quot;c&quot;] = {inherit(&quot;.&quot;), item(&quot;it-coin1&quot;)}
-tiles[&quot;W&quot;] = {inherit(&quot;w&quot;), stone(&quot;st-chess_white&quot;)}
-tiles[&quot;B&quot;] = {inherit(&quot;h&quot;), stone(&quot;st-chess_black&quot;)}
-tiles[&quot;k&quot;] = {inherit(&quot;G&quot;), item(&quot;it-key_a&quot;)}
-tiles[&quot;f&quot;] = {inherit(&quot;G&quot;), item(&quot;it-key_b&quot;)}
-
-tiles[&quot;y&quot;] = {inherit(&quot; &quot;), item(&quot;it-yinyang&quot;)}
-tiles[&quot;1&quot;] = {inherit(&quot;y&quot;), actor(&quot;ac-blackball&quot;, {player=0, name=&quot;acBlack&quot;})}
-tiles[&quot;2&quot;] = {inherit(&quot;y&quot;), actor(&quot;ac-whiteball&quot;, {player=1, controllers=2})}
-
-if difficult then
-    tiles[&quot;I&quot;] = {inherit(&quot; &quot;), item(&quot;it-trigger&quot;,{action=&quot;callback&quot;, target=&quot;swamp&quot;})}
-else
-    tiles[&quot;I&quot;] = tiles[&quot; &quot;]
-end
-
-function swamp()
-     set_floor(&quot;fl-swamp&quot;, 2,8)
-end
-
-create_world_from_map( tiles, {
-&quot;####################&quot;,
-&quot;# x=w.t.+.U...+=##x#&quot;,
-&quot;##_= ++.T.+.T..=  _#&quot;,
-&quot;#g =-..V++++..T= g #&quot;,
-&quot;# I=-c+..+U.+.+=   #&quot;,
-&quot;#  =j+++T,+.+Y+=   #&quot;,
-&quot;#  =2+.U.++T+..=   #&quot;,
-&quot;#  = T.+.T..+.Tm   #&quot;,
-&quot;#FC=M==========L=DK#&quot;,
-&quot;#                  #&quot;,
-&quot;#      f   k       #&quot;,
-&quot;#                  #&quot;,
-&quot;###############*####&quot;,
-&quot;#         ---##A####&quot;,
-&quot;#         ---      #&quot;,
-&quot;#       B ---j     #&quot;,
-&quot;#        ####      #&quot;,
-&quot;#  ETt   ###O  tTt #&quot;,
-&quot;#  TRT 1G  P b TST #&quot;,
-&quot;#  ETt   o###  tTt #&quot;,
-&quot;#        ####      #&quot;,
-&quot;#       W ---j     #&quot;,
-&quot;#         ---      #&quot;,
-&quot;#         ---#######&quot;,
-&quot;####################&quot;,
-})
-
-AddRubberBand (enigma.GetNamedObject(&quot;acBlack&quot;), enigma.GetNamedObject(&quot;rubber&quot;), 5, 1, 0)
-vortex1 = enigma.GetNamedObject(&quot;vortex1&quot;)
-vortex2 = enigma.GetNamedObject(&quot;vortex2&quot;)
-v_x,v_y = enigma.GetPos(vortex2)
-enigma.SetAttrib(vortex1, &quot;targetx&quot;, v_x)
-enigma.SetAttrib(vortex1, &quot;targety&quot;, v_y)
-v_x,v_y = enigma.GetPos(vortex1)
-enigma.SetAttrib(vortex2, &quot;targetx&quot;, v_x)
-enigma.SetAttrib(vortex2, &quot;targety&quot;, v_y)
-
-oxyd_shuffle()
-    ]]&gt;&lt;/el:luamain&gt;
-    &lt;el:i18n&gt;
-      &lt;el:string el:key=&quot;title&quot;&gt;
-        &lt;el:english el:translate=&quot;false&quot;/&gt;
-      &lt;/el:string&gt;
-      &lt;el:string el:key=&quot;subtitle&quot;&gt;
-        &lt;el:english el:translate=&quot;true&quot; el:comment=&quot;Escape as unchaining&quot;/&gt;
-        &lt;el:translation el:lang=&quot;de&quot;&gt;Entfesselung durch Gefangennahme von Dieben&lt;/el:translation&gt;
-      &lt;/el:string&gt;
-      &lt;el:string el:key=&quot;Atreyu&quot;&gt;
-        &lt;el:english el:translate=&quot;true&quot; el:comment=&quot;Characters of Michael Ende's fantasy novel 'The Neverending Story'&quot;&gt;Remember Atreyu's horse Atrax!&lt;/el:english&gt;
-        &lt;el:translation el:lang=&quot;de&quot;&gt;Denke an Atrax, das Pferd von Atr&#233;ju!&lt;/el:translation&gt;
-      &lt;/el:string&gt;
-      &lt;el:string el:key=&quot;Innocent&quot;&gt;
-        &lt;el:english el:translate=&quot;true&quot; &gt;I am innocent! I've never stolen anything!&lt;/el:english&gt;
-        &lt;el:translation el:lang=&quot;de&quot;&gt;Ich bin unschuldig! Ich habe nie etwas gestohlen!&lt;/el:translation&gt;
-      &lt;/el:string&gt;
-      &lt;el:string el:key=&quot;Pirates&quot;&gt;
-        &lt;el:english el:translate=&quot;true&quot; &gt;It is said that pirates have taken the treasure.&lt;/el:english&gt;
-        &lt;el:translation el:lang=&quot;de&quot;&gt;Man sagt Piraten h&#228;tten den Schatz genommen.&lt;/el:translation&gt;
-      &lt;/el:string&gt;
-      &lt;el:string el:key=&quot;Treasure&quot;&gt;
-        &lt;el:english el:translate=&quot;true&quot; &gt;Pirates usually hide their treasure!&lt;/el:english&gt;
-        &lt;el:translation el:lang=&quot;de&quot;&gt;Piraten verstecken ihren Schatz f&#252;r gew&#246;hnlich!&lt;/el:translation&gt;
-      &lt;/el:string&gt;
-      &lt;el:string el:key=&quot;CloseDoor&quot;&gt;
-        &lt;el:english el:translate=&quot;true&quot; &gt;A closed door gives a better overview!&lt;/el:english&gt;
-        &lt;el:translation el:lang=&quot;de&quot;&gt;Eine geschlossene T&#252;r verschafft einen besseren &#220;berblick!&lt;/el:translation&gt;
-      &lt;/el:string&gt;
-    &lt;/el:i18n&gt;
-  &lt;/el:protected&gt;
-&lt;/el:level&gt;

Added: branches/1.0/data/levels/enigma_vi/ral11_2.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/ral11_2.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_vi/ral11_2.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -0,0 +1,226 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected &gt;
+    &lt;el:info el:type=&quot;level&quot;&gt;
+      &lt;el:identity el:title=&quot;Houdini&quot; el:subtitle=&quot;Escape by Chaining Thieves&quot; el:id=&quot;20060816ral719&quot;/&gt;
+      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;$Revision: 55 $&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:author  el:name=&quot;Ronald Lamprecht&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">ral at users.berlios.de</A>&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2006 Ronald Lamprecht&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
+      &lt;el:comments&gt;
+        &lt;el:credits el:showinfo=&quot;true&quot; el:showstart=&quot;false&quot;&gt;John, JuSt, Ale for testing and feedback&lt;/el:credits&gt;
+        &lt;el:code&gt;network playable if the yinyang items are removed&lt;/el:code&gt;
+      &lt;/el:comments&gt;
+      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+
+set_oxyd = oxyd
+math_floor = floor
+
+function oxyd( x, y, tiles )
+    return set_oxyd( x, y )
+end
+
+function nothing(x, y, tiles)
+    -- create nothing
+end
+
+function floor( floor_type, attribs )
+    return function( x, y, tiles )
+        return set_floor( floor_type, x, y, attribs or {} )
+    end
+end
+
+function stone( stone_type, attribs )
+    return function( x, y, tiles )
+        return set_stone( stone_type, x, y, attribs or {} )
+    end
+end
+
+function item( item_type, attribs )
+    return function( x, y, tiles )
+        return set_item( item_type, x, y, attribs or {} )
+    end
+end
+
+function actor( actor_type, attribs )
+    return function( x, y, tiles )
+        return set_actor( actor_type, x+0.5, y+0.5, attribs or {} )
+    end
+end
+
+function inherit(tile_type)
+    return function( x, y, tiles )
+        return create_tile( tiles, x, y, tile_type )
+    end
+end
+
+function create_world_from_map( tiles, map )
+    create_world( strlen(map[1]), getn(map) )
+    
+    for y = 1,getn(map) do
+        local line = map[y]
+        for x = 1,strlen(line) do
+            local tile = strchar(strbyte(line,x))
+            create_tile( tiles, x-1, y-1, tile )
+        end
+    end
+end
+
+function create_tile( tiles, x, y, tile_type )
+    local constructors = tiles[tile_type]
+
+    if constructors then
+	for i = 1,getn(constructors) do
+	    constructors[i](x,y,tiles)
+	end
+    else
+	error(&quot;invalid tile identifier &quot; .. tile_type )
+    end
+end
+
+oxyd_default_flavor = &quot;a&quot;
+
+tiles = {}
+tiles[&quot; &quot;] = {floor(&quot;fl-wood&quot;)}
+tiles[&quot;-&quot;] = {floor(&quot;fl-abyss&quot;)}
+tiles[&quot;_&quot;] = {floor(&quot;fl-water&quot;)}
+tiles[&quot;*&quot;] = {floor(&quot;fl-swamp&quot;)}
+tiles[&quot;SS&quot;] = {inherit(&quot;*&quot;), item(&quot;it-seed&quot;)}
+tiles[&quot;b&quot;] = {inherit(&quot; &quot;), item(&quot;it-brake&quot;)}
+tiles[&quot;h&quot;] = {inherit(&quot; &quot;), item(&quot;it-sword&quot;)}
+tiles[&quot;s&quot;] = {inherit(&quot; &quot;), item(&quot;it-spring2&quot;)}
+tiles[&quot;j&quot;] = {inherit(&quot; &quot;), item(&quot;it-springboard&quot;)}
+tiles[&quot;w&quot;] = {inherit(&quot; &quot;), item(&quot;it-magicwand&quot;)}
+tiles[&quot;l&quot;] = {inherit(&quot; &quot;), item(&quot;it-extralife&quot;)}
+tiles[&quot;z&quot;] = {inherit(&quot; &quot;), stone(&quot;st-plain_cracked&quot;)}
+tiles[&quot;o&quot;] = {inherit(&quot;z&quot;), item(&quot;it-vortex-open&quot;,{name=&quot;vortex1&quot;})}
+tiles[&quot;O&quot;] = {inherit(&quot;z&quot;), item(&quot;it-vortex-open&quot;,{name=&quot;vortex2&quot;})}
+tiles[&quot;x&quot;] = {inherit(&quot; &quot;), oxyd}
+tiles[&quot;#&quot;] = {inherit(&quot; &quot;), stone(&quot;st-plain&quot;)}
+tiles[&quot;-D&quot;] = {inherit(&quot;-&quot;), item(&quot;it-death&quot;)}
+tiles[&quot;=&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-plain&quot;)}
+tiles[&quot;+&quot;] = {inherit(&quot; &quot;), stone(&quot;st-bluegray&quot;)}
+tiles[&quot;.&quot;] = {inherit(&quot; &quot;), stone(&quot;st-bluegray_hole&quot;)}
+tiles[&quot;,&quot;] = {inherit(&quot;l&quot;), stone(&quot;st-bluegray_hole&quot;)}
+tiles[&quot;T&quot;] = {inherit(&quot; &quot;), stone(&quot;st-thief&quot;)}
+tiles[&quot;t&quot;] = {inherit(&quot;l&quot;), stone(&quot;st-thief&quot;)}
+tiles[&quot;U&quot;] = {inherit(&quot;T&quot;), item(&quot;it-document&quot;,{text=&quot;Innocent&quot;})}
+tiles[&quot;V&quot;] = {inherit(&quot;T&quot;), item(&quot;it-document&quot;,{text=&quot;Pirates&quot;})}
+tiles[&quot;Y&quot;] = {inherit(&quot;T&quot;), item(&quot;it-document&quot;,{text=&quot;Treasure&quot;})}
+tiles[&quot;P&quot;] = {inherit(&quot;l&quot;), stone(&quot;st-pull&quot;)}
+tiles[&quot;R&quot;] = {inherit(&quot; &quot;), stone(&quot;st-rubberband&quot;, {name=&quot;rubber&quot;})}
+tiles[&quot;S&quot;] = {inherit(&quot; &quot;), stone(&quot;st-scissors&quot;, {action=&quot;open&quot;, target=&quot;doorA&quot;})}
+tiles[&quot;A0&quot;] = {inherit(&quot;*&quot;), item(&quot;it-document&quot;,{text=&quot;Atreyu&quot;})}
+tiles[&quot;A&quot;] = {inherit(&quot;A0&quot;), stone(&quot;st-door-h&quot;, {name=&quot;doorA&quot;})}
+tiles[&quot;E&quot;] = {inherit(&quot; &quot;), stone(&quot;st-swap&quot;)}
+tiles[&quot;G&quot;] = {inherit(&quot;s&quot;), stone(&quot;st-glass1&quot;)}
+tiles[&quot;g&quot;] = {inherit(&quot; &quot;), stone(&quot;st-grate1&quot;)}
+tiles[&quot;H&quot;] = {inherit(&quot; &quot;), stone(&quot;st-wood1&quot;)}
+tiles[&quot;M&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-mail-n&quot;)}
+tiles[&quot;m&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-coinslot&quot;, {action=&quot;onoff&quot;, target=&quot;laser&quot;})}
+tiles[&quot;L&quot;] = {inherit(&quot;-D&quot;), stone(&quot;st-laser-s&quot;, {name=&quot;laser&quot;,on=0})}
+tiles[&quot;D0&quot;] = {inherit(&quot; &quot;), item(&quot;it-document&quot;,{text=&quot;CloseDoor&quot;})}
+tiles[&quot;D&quot;] = {inherit(&quot;D0&quot;), stone(&quot;st-door_b&quot;, {name=&quot;doorB&quot;})}
+tiles[&quot;K&quot;] = {inherit(&quot;-&quot;), stone(&quot;st-key_a&quot;,{action=&quot;openclose&quot;, target=&quot;doorB&quot;})}
+tiles[&quot;C&quot;] = {inherit(&quot; &quot;), stone(&quot;st-door_b&quot;, {name=&quot;doorC&quot;})}
+tiles[&quot;F&quot;] = {inherit(&quot;-&quot;), stone(&quot;st-key_b&quot;,{action=&quot;openclose&quot;, target=&quot;doorC&quot;})}
+tiles[&quot;c&quot;] = {inherit(&quot;.&quot;), item(&quot;it-coin1&quot;)}
+tiles[&quot;W&quot;] = {inherit(&quot;w&quot;), stone(&quot;st-chess_white&quot;)}
+tiles[&quot;B&quot;] = {inherit(&quot;h&quot;), stone(&quot;st-chess_black&quot;)}
+tiles[&quot;k&quot;] = {inherit(&quot;G&quot;), item(&quot;it-key_a&quot;)}
+tiles[&quot;f&quot;] = {inherit(&quot;G&quot;), item(&quot;it-key_b&quot;)}
+
+tiles[&quot;y&quot;] = {inherit(&quot; &quot;), item(&quot;it-yinyang&quot;)}
+tiles[&quot;1&quot;] = {inherit(&quot;y&quot;), actor(&quot;ac-blackball&quot;, {player=0, name=&quot;acBlack&quot;})}
+tiles[&quot;2&quot;] = {inherit(&quot;y&quot;), actor(&quot;ac-whiteball&quot;, {player=1, controllers=2})}
+
+if difficult then
+    tiles[&quot;I&quot;] = {inherit(&quot; &quot;), item(&quot;it-trigger&quot;,{action=&quot;callback&quot;, target=&quot;swamp&quot;})}
+    tiles[&quot;J&quot;] = tiles[&quot; &quot;]
+    tiles[&quot;Q&quot;] = {inherit(&quot;SS&quot;), stone(&quot;st-thief&quot;)}
+else
+    tiles[&quot;I&quot;] = tiles[&quot; &quot;]
+    tiles[&quot;J&quot;] = tiles[&quot;j&quot;]
+    tiles[&quot;Q&quot;] = tiles[&quot;U&quot;]
+end
+
+function swamp()
+     set_floor(&quot;fl-swamp&quot;, 2,8)
+end
+
+create_world_from_map( tiles, {
+&quot;####################&quot;,
+&quot;# x=w.t.+.U...+=##x#&quot;,
+&quot;##_=s++.T.+.T..=  _#&quot;,
+&quot;#g =-..V++++..T= g #&quot;,
+&quot;# I=-c+..+Q.+.+=   #&quot;,
+&quot;#  =J+++T,+.+Y+=   #&quot;,
+&quot;#  =2+.U.++T+..=   #&quot;,
+&quot;#  = T.+.T..+.Tm   #&quot;,
+&quot;#FC=M==========L=DK#&quot;,
+&quot;#                  #&quot;,
+&quot;#      f   k       #&quot;,
+&quot;#                  #&quot;,
+&quot;###############*####&quot;,
+&quot;#         ---##A####&quot;,
+&quot;#         ---      #&quot;,
+&quot;#       B ---j     #&quot;,
+&quot;#        ####      #&quot;,
+&quot;#  ETt   ###O  tTt #&quot;,
+&quot;#  TRT 1G  P b TST #&quot;,
+&quot;#  ETt   o###  tTt #&quot;,
+&quot;#        ####      #&quot;,
+&quot;#       W ---j     #&quot;,
+&quot;#         ---      #&quot;,
+&quot;#         ---#######&quot;,
+&quot;####################&quot;,
+})
+
+AddRubberBand (enigma.GetNamedObject(&quot;acBlack&quot;), enigma.GetNamedObject(&quot;rubber&quot;), 5, 1, 0)
+vortex1 = enigma.GetNamedObject(&quot;vortex1&quot;)
+vortex2 = enigma.GetNamedObject(&quot;vortex2&quot;)
+v_x,v_y = enigma.GetPos(vortex2)
+enigma.SetAttrib(vortex1, &quot;targetx&quot;, v_x)
+enigma.SetAttrib(vortex1, &quot;targety&quot;, v_y)
+v_x,v_y = enigma.GetPos(vortex1)
+enigma.SetAttrib(vortex2, &quot;targetx&quot;, v_x)
+enigma.SetAttrib(vortex2, &quot;targety&quot;, v_y)
+
+oxyd_shuffle()
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+      &lt;el:string el:key=&quot;title&quot;&gt;
+        &lt;el:english el:translate=&quot;false&quot;/&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;subtitle&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot; el:comment=&quot;Escape as unchaining&quot;/&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Entfesselung durch Gefangennahme von Dieben&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;Atreyu&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot; el:comment=&quot;Characters of Michael Ende's fantasy novel 'The Neverending Story'&quot;&gt;Remember Atreyu's horse Atrax!&lt;/el:english&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Denke an Atrax, das Pferd von Atr&#233;ju!&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;Innocent&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot; &gt;I am innocent! I've never stolen anything!&lt;/el:english&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Ich bin unschuldig! Ich habe nie etwas gestohlen!&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;Pirates&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot; &gt;It is said that pirates have taken the treasure.&lt;/el:english&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Man sagt Piraten h&#228;tten den Schatz genommen.&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;Treasure&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot; &gt;Pirates usually hide their treasure!&lt;/el:english&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Piraten verstecken ihren Schatz f&#252;r gew&#246;hnlich!&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;CloseDoor&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot; &gt;A closed door gives a better overview!&lt;/el:english&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Eine geschlossene T&#252;r verschafft einen besseren &#220;berblick!&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+    &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/enigma_vi/ral11_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: branches/1.0/data/levels/enigma_vi/raoul26_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/raoul26_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_vi/raoul26_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -3,7 +3,7 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Puzzle Puzzles&quot; el:subtitle=&quot;look forward!&quot; el:id=&quot;raoul26&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;23&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;24&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
@@ -279,6 +279,7 @@
 
     enigma.KillItem(33,24)
 end
+
 ---- PUZZLES ----
   -- W
   puzzle({&quot; ##&quot;,
@@ -286,9 +287,8 @@
           &quot;#  &quot;},{23,6},&quot;bluepuzzle&quot;,&quot;none&quot;)
   -- Z
   puzzle({&quot; ##&quot;,
-          &quot; + &quot;,
+          &quot; * &quot;,
           &quot;## &quot;},{32,18},&quot;bluepuzzle&quot;,&quot;none&quot;)
-  set_stone(&quot;st-puzzle-hollow&quot;,33,19)
   -- shell_lower_part
   puzzle({&quot;## ##&quot;,
           &quot; ### &quot;,
@@ -297,18 +297,15 @@
   puzzle({&quot; # &quot;,
           &quot;###&quot;},{32,29},&quot;bluepuzzle&quot;,&quot;permutation&quot;)
   -- -
-  puzzle({&quot;#+#&quot;},{34,3},&quot;bluepuzzle&quot;,&quot;none&quot;)
-  set_stone(&quot;st-puzzle-hollow&quot;,35,3)
+  puzzle({&quot;#*#&quot;},{34,3},&quot;bluepuzzle&quot;,&quot;none&quot;)
   -- |
   puzzle({&quot;#&quot;,
-          &quot;+&quot;,
+          &quot;*&quot;,
           &quot;#&quot;},{33,2},&quot;bluepuzzle&quot;,&quot;none&quot;)
-  set_stone(&quot;st-puzzle-hollow&quot;,33,3)
   -- T
   puzzle({&quot;  #&quot;,
-          &quot;#+#&quot;,
+          &quot;#*#&quot;,
           &quot;  #&quot;},{33,7},&quot;bluepuzzle&quot;,&quot;none&quot;)
-  set_stone(&quot;st-puzzle-hollow&quot;,34,8)
 
 ---- ITEMS ----
 set_item(&quot;it-magicwand&quot;,33,28)

Added: branches/1.0/data/levels/enigma_vi/ulf04_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/ulf04_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_vi/ulf04_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -0,0 +1,107 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;
+  xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot;
+  xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected &gt;
+    &lt;el:info el:type=&quot;level&quot;&gt;
+      &lt;el:identity el:title=&quot;Hot Hurdle Race&quot;
+        el:subtitle=&quot;Run for your life!&quot;
+        el:id=&quot;20070124ulf019&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;$Revision: 93 $&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:author  el:name=&quot;Ulf Stegemann&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">ulf-enigma at zeitform.de</A>&quot;
+        el:homepage=&quot;<A HREF="http://ulf.zeitform.de">http://ulf.zeitform.de</A>&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2007 Ulf Stegemann&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
+        &lt;el:dependency el:path=&quot;lib/ant&quot; el:id=&quot;lib/ant&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;false&quot; el:control=&quot;force&quot;
+        el:scoreunit=&quot;duration&quot; el:scoretarget=&quot;time&quot;/&gt;
+      &lt;el:score el:easy=&quot;00:12&quot; el:difficult=&quot;00:12&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+-- CELLS --
+cells={}
+cells[&quot; &quot;]=cell{floor={&quot;fl-bumps&quot;,{fastfire=TRUE,noash=TRUE}}}
+cells[&quot;x&quot;]=cell{floor=&quot;fl-space&quot;}
+cells[&quot;b&quot;]=cell{floor=&quot;fl-black&quot;}
+cells[&quot;w&quot;]=cell{floor=&quot;fl-white&quot;}
+cells[&quot;D&quot;]=cell{floor=&quot;fl-abyss&quot;,stone=&quot;st-death&quot;}
+cells[&quot;F&quot;]=cell{stone=&quot;st-likeoxydb&quot;}
+cells[&quot;N&quot;]=cell{stone={&quot;st-laser-n&quot;,{on=TRUE}}}
+cells[&quot;S&quot;]=cell{stone={&quot;st-laser-s&quot;,{on=TRUE}}}
+cells[&quot;.&quot;]=cell{item=&quot;it-spring1&quot;}
+cells[&quot;s&quot;]=cell{floor=&quot;fl-white&quot;,item={&quot;it-sensor&quot;,{action=&quot;callback&quot;,target=&quot;settimer&quot;}}}
+
+-- LANDSCAPE MAP --
+level = {
+   &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
+   &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
+   &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
+   &quot;xxDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDxx&quot;,
+   &quot;xxD        s          S        S        S        S        S        S        S        S        S        S          bw   0Dxx&quot;,
+   &quot;xxD        s                                                                                                      wb   DDxx&quot;,
+   &quot;xxD O.     s                                                                                                      bw   DDxx&quot;,
+   &quot;xxD        s                                                                                                      wb   DDxx&quot;,
+   &quot;xxD        s          N        N        N        N        N        N        N        N        N        N          bw   0Dxx&quot;,
+   &quot;xxDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDxx&quot;,
+   &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
+   &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
+   &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;
+}
+
+-- FUNCTIONS --
+function settimer()
+  if (not difficult) then
+    myint = 0.12
+  else
+    myint = 0.07
+  end
+  set_stone(&quot;st-timer&quot;,0,0,{action=&quot;callback&quot;,target=&quot;timer_handler&quot;,interval=myint,invisible=1})
+end
+
+function timer_handler()
+  if ( mytimer &lt;= 113 ) then
+    draw_items(&quot;it-death&quot;,{mytimer,4},{0,1},5)
+    mytimer = mytimer + 1
+  end
+end
+
+--
+-- Firy version
+-- 
+--   if ( mytimer &lt;= 118 ) then
+--     draw_items(&quot;it-burnable_fireproof&quot;,{mytimer-5,4},{0,1},5)
+--     count=4
+--     while count&lt;9 do
+--       enigma.KillItem(mytimer-5,count)
+--       count=count+1
+--     end
+--     if ( mytimer &lt;= 113 ) then
+--       draw_items(&quot;it-burnable_ignited&quot;,{mytimer,4},{0,1},5)
+--     end
+--     mytimer = mytimer+1
+--   end
+-- end
+
+-- GENERAL --
+mytimer=2
+enigma.ConserveLevel=FALSE
+oxyd_default_flavor = &quot;b&quot;
+set_default_parent(cells[&quot; &quot;])
+create_world_by_map(level)
+oxyd_shuffle()
+display.SetFollowMode(display.FOLLOW_SMOOTH)
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+      &lt;el:string el:key=&quot;title&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot;/&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Hei&#223;er H&#252;rdenlauf&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;subtitle&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot;/&gt;
+        &lt;el:translation el:lang=&quot;de&quot;&gt;Lauf um Dein Leben!&lt;/el:translation&gt;
+      &lt;/el:string&gt;
+     &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/enigma_vi/ulf04_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: branches/1.0/data/levels/enigma_vi/ulf05_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/ulf05_1.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/enigma_vi/ulf05_1.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -0,0 +1,83 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;
+  xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot;
+  xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected &gt;
+    &lt;el:info el:type=&quot;level&quot;&gt;
+      &lt;el:identity el:title=&quot;Counterclockwise&quot;
+        el:id=&quot;20070126ulf020&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;$Revision: 93 $&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:author  el:name=&quot;Ulf Stegemann&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">ulf-enigma at zeitform.de</A>&quot;
+        el:homepage=&quot;<A HREF="http://ulf.zeitform.de">http://ulf.zeitform.de</A>&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2007 Ulf Stegemann&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
+        &lt;el:dependency el:path=&quot;lib/ant&quot; el:id=&quot;lib/ant&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;false&quot; el:control=&quot;force&quot;
+        el:scoreunit=&quot;duration&quot; el:scoretarget=&quot;time&quot;/&gt;
+      &lt;el:score el:easy=&quot;00:59&quot; el:difficult=&quot;01:08&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+-- DIFFICULTY --
+if difficult then
+  dstone = &quot;st-likeoxydc&quot;
+  dint = 0.20
+else
+  dstone = &quot;st-bluegray&quot;
+  dint = 0.30
+end
+
+-- CELLS --
+lasers={}
+cells={}
+cells[&quot; &quot;]=cell{floor=&quot;fl-rough_medium&quot;}
+cells[&quot;#&quot;]=cell{stone=dstone}
+cells[&quot;X&quot;]=cell{stone=&quot;st-glass2&quot;}
+cells[&quot;1&quot;]=cell{{{add_multistone,&quot;st-laser-e&quot;,lasers,{on=FALSE}}}}
+cells[&quot;2&quot;]=cell{{{add_multistone,&quot;st-laser-n&quot;,lasers,{on=FALSE}}}}
+cells[&quot;3&quot;]=cell{{{add_multistone,&quot;st-laser-w&quot;,lasers,{on=FALSE}}}}
+cells[&quot;4&quot;]=cell{{{add_multistone,&quot;st-laser-s&quot;,lasers,{on=FALSE}}}}
+cells[&quot;T&quot;]=cell{item={&quot;it-sensor&quot;,{action=&quot;callback&quot;,target=&quot;light_on&quot;}}}
+cells[&quot;M&quot;]=cell{item={&quot;it-magnet&quot;,{on=TRUE,strength=100}}}
+
+-- LANDSCAPE MAP --
+level = {
+   &quot;#######00######0####&quot;,
+   &quot;#M      T  T      M#&quot;,
+   &quot;# #4##0########### #&quot;,
+   &quot;# #              3 #&quot;,
+   &quot;# # XXXXXXXXXXXX 0 #&quot;,
+   &quot;0 # XXXXXXXXXXXX # #&quot;,
+   &quot;# # XXXXXXXXXXXX # 0&quot;,
+   &quot;# 0 XXXXXXXXXXXX 0 #&quot;,
+   &quot;# 0 XXXXXXXXXXXX 0 #&quot;,
+   &quot;0 1              # #&quot;,
+   &quot;# #####0########2# #&quot;, 
+   &quot;#M                M#&quot;,
+   &quot;#0###0###0##########&quot;
+}
+
+-- FUNCTIONS --
+function light_on()
+  send_group_message(lasers,&quot;on&quot;)
+end
+
+-- GENERAL --
+enigma.ConserveLevel=TRUE
+oxyd_default_flavor = &quot;c&quot;
+set_default_parent(cells[&quot; &quot;])
+create_world_by_map(level)
+oxyd_shuffle()
+set_actor(&quot;ac-blackball&quot;,10,1.5,{player=0})
+mytop=set_actor(&quot;ac-top&quot;,9.5,11.5,{gohome=0})
+lightpass=set_stone(&quot;st-lightpassenger&quot;,9,9,{interval=dint})
+AddRubberBand(mytop,lightpass,50,0)
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+      &lt;el:string el:key=&quot;title&quot;&gt;
+        &lt;el:english el:translate=&quot;false&quot;/&gt;
+      &lt;/el:string&gt;
+     &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/enigma_vi/ulf05_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: branches/1.0/data/levels/lib/libpuzzle_2.xml
===================================================================
--- branches/1.0/data/levels/lib/libpuzzle_2.xml	2007-02-10 21:33:29 UTC (rev 594)
+++ branches/1.0/data/levels/lib/libpuzzle_2.xml	2007-02-10 22:14:28 UTC (rev 595)
@@ -3,7 +3,7 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;library&quot;&gt;
       &lt;el:identity el:title=&quot;&quot; el:id=&quot;lib/libpuzzle&quot;/&gt;
-      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;3&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;4&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005, 2006, 2007 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
@@ -29,8 +29,8 @@
 --
 -- Globals:
 -- puzzle_map: the arraymap with the puzzle layout.
+-- part_map: map with the parts stored in it.
 -- parttable: the array with the parts.
--- part_map: map with the parts stored in it.
 -- permutations: struct with all permutationdata.
 --
 -- DEFAULT VALUES:
@@ -89,21 +89,34 @@
     -- If there is no error until here, all parameters are ok
     -- Beginn with the work.
 
+    -- DEBUG:
+    --plot_charmap(map)
+
     -- Parse the charmap to a table:
     parse_map(map)
 
+    -- DEBUG:
+    --plot_arraymap(puzzle_map)
+
     -- Get the parts:
-    get_parts(puzzle_map)
+    local num_pieces = 0
+    num_pieces = get_parts(puzzle_map)
 
+    -- DEBUG:
+    --plot_arraymap(part_map)
+
     -- Determine the shuffle method to use.
     if method == 1 then
         shuffle_parts_with_noshuffle()
     elseif method == 2 then
         shuffle_parts_with_random(num_shuffles)
     elseif method == 3 then
-        shuffle_parts_with_permutation(num_shuffles)
+        shuffle_parts_with_permutation(num_shuffles, num_pieces)
     end
 
+    -- DEBUG:
+    --plot_arraymap(part_map)
+
     plot_puzzle(corner,stone_type)
     return 0
 end
@@ -137,6 +150,27 @@
     end
     return 0
 end
+
+function translate_type(type)
+    local translate_table =
+    {hollow = 1,     --&quot;0000&quot;
+     w =      2,     --&quot;0001&quot;
+     s =      3,     --&quot;0010&quot;
+     sw=      4,     --&quot;0011&quot;
+     e =      5,     --&quot;0100&quot;
+     ew =     6,     --&quot;0101&quot;
+     es =     7,     --&quot;0110&quot;
+     esw =    8,     --&quot;0111&quot;
+     n =      9,     --&quot;1000&quot;
+     nw =    10,     --&quot;1001&quot;
+     ns =    11,     --&quot;1010&quot;
+     nsw =   12,     --&quot;1011&quot;
+     ne =    13,     --&quot;1100&quot;
+     new =   14,     --&quot;1101&quot;
+     nes =   15,     --&quot;1110&quot;
+     nesw =  16}     --&quot;1111&quot;
+    return translate_table[type]
+end
 --------------------------------------------------------------------------------
 --------------------------------------------------------------------------------
 -- Security functions --
@@ -185,6 +219,7 @@
 end
 --------------------------------------------------------------------------------
 --------------------------------------------------------------------------------
+-- Parsing Functions --
 -- Create new, empty map for the puzzle layout:
 function new_puzzlemap(x_size, y_size)
     -- new global:
@@ -222,8 +257,11 @@
     elseif akt_char == &quot;+&quot; then
         -- this is a pseudo piece
         return 2
+    elseif akt_char == &quot;*&quot; then
+        -- this is the hole puzzzlepiece and the onconnected bigbrick
+        return 3
     else
-        error(&quot;puzzle(map, corner, type, shuffle): Illegal char \&quot;&quot;..akt_char..&quot;\&quot; in the map! Char must be one of these: \&quot; \&quot; = no piece, \&quot;#\&quot;= piece or \&quot;+\&quot;= pseudo-piece.&quot;)
+        error(&quot;puzzle(map, corner, type, shuffle): Illegal char \&quot;&quot;..akt_char..&quot;\&quot; in the map! Char must be one of these: \&quot; \&quot; = no piece, \&quot;#\&quot;= piece, \&quot;+\&quot;= pseudo-piece or \&quot;*\&quot;= hole puzzle piece.&quot;)
     end
 end
 
@@ -244,6 +282,7 @@
 end
 --------------------------------------------------------------------------------
 --------------------------------------------------------------------------------
+-- Function for examining the puzzle --
 function is_on_border(x,y)
     -- Test, if x and y are on the flood_map border.
     local x_size, y_size = get_arraymap_size(puzzle_map)
@@ -269,21 +308,45 @@
     return on_left, on_right, on_top, on_bottom
 end
 --------------------------------------------------------------------------------
--- Create a new, empty table with the parts needed.
-function new_parttable()
-    -- new Global:
-    parttable = {}
+-- New map with the kind of all parts at their location in the puzzle
+function new_partmap()
+    -- New Global:
+    part_map = {}
+
+    local x_size, y_size = get_arraymap_size(puzzle_map)
+    local i,j = 0,0
+    for i=1, y_size do
+        -- each element of partmap is an array:
+        part_map[i] = {}
+        for j=1, x_size do
+            part_map[i][j]=&quot;-&quot;
+        end
+    end
     return 0
 end
 
-function add_to_parttable(part)
-    table.insert(parttable, part)
+function add_to_partmap(x,y,part)
+    part_map[y][x]=part
     return 0
 end
 
+function get_piece_from_partmap(x,y)
+    return part_map[y][x]
+end
+
+-- Used for shuffle with permutation
+function shift_cell(cell,dir)
+-- Move the value of part_map[cell] into direction vector dir.
+    local cell_value = get_piece_from_partmap(cell[1],cell[2])
+    add_to_partmap(cell[1]+dir[1], cell[2]+dir[2], cell_value)
+    return 0
+end
+--------------------------------------------------------------------------------
 function has_piece(x,y)
     -- There is a piece @ x,y
-    if puzzle_map[y][x] == 1 then
+    -- To be open for fututre map extension, test if there is NOT a gap or pseudopiece.
+    local temp = get_piece_from_puzzlemap(x,y)
+    if temp ~= 0 and temp ~= 2  then
         return true
     end
     return false -- no piece found
@@ -291,35 +354,50 @@
 
 function has_piece_or_pseudopiece(x,y)
     -- There is a piece OR pseude piece @ x,y
-    if puzzle_map[y][x] == 1 or puzzle_map[y][x] == 2 then
+    -- The hole puzzlepiece is included as piece!
+    if puzzle_map[y][x] == 1 or puzzle_map[y][x] == 2 or puzzle_map[y][x] == 3 then
         return true
     end
     return false -- no piece found
 end
 
-function examine_pos(x,y)
+function has_hole_piece(x,y)
+    -- Is there the hole puzzle piece @ x,y?
+    if puzzle_map[y][x] == 3 then
+        return true
+    end
+    return false
+end
+
+function get_piece_from_puzzlemap(x,y)
+    return puzzle_map[y][x]
+end
+--------------------------------------------------------------------------------
+-- Determine the puzzles' connections from its position and neighbours in the puzzle_map
+function determine_puzzle_from_pos(x,y)
     local north = &quot;&quot;
     local east = &quot;&quot;
     local south = &quot;&quot;
     local west = &quot;&quot;
-    local part_buffer = &quot;&quot;
+    local part_buffer = &quot;-&quot;
+    local part_code = nil
 
     local left, right, top, bottom = is_on_border(x,y)
     -- NORTH
     if top ~= 1 then
-        if has_piece_or_pseudopiece(x,y-1) then north = &quot;n&quot; end
+        if has_piece_or_pseudopiece(x,y-1) or has_hole_piece(x,y) then north = &quot;n&quot; end
     end
     -- EAST
     if right ~= 1 then
-        if has_piece_or_pseudopiece(x+1,y) then east = &quot;e&quot; end
+        if has_piece_or_pseudopiece(x+1,y) or has_hole_piece(x,y) then east = &quot;e&quot; end
     end
     -- SOUTH
     if bottom ~= 1 then
-        if has_piece_or_pseudopiece(x,y+1) then south = &quot;s&quot; end
+        if has_piece_or_pseudopiece(x,y+1) or has_hole_piece(x,y) then south = &quot;s&quot; end
     end
     -- WEST
     if left ~= 1 then 
-        if has_piece_or_pseudopiece(x-1,y) then west = &quot;w&quot; end
+        if has_piece_or_pseudopiece(x-1,y) or has_hole_piece(x,y) then west = &quot;w&quot; end
     end
 
     -- To get a valid Stone if no neighbours were present, we define it as the
@@ -332,80 +410,105 @@
     end
     
     part_buffer = north..east..south..west
-    return part_buffer
+    part_code = translate_type(part_buffer)
+    return part_code
 end
 
+-- Determine the puzzles' connections from its value in the puzzle_map
+function determine_puzzle_from_value(x,y)
+    local part_buffer = &quot;-&quot; -- the type for an inexistent puzzle
+    if get_piece_from_puzzlemap(x,y) == 3 then
+        -- hole puzzle!
+        part_buffer = &quot;hollow&quot;
+    -- Add other type here ...
+    end        
+    part_code = translate_type(part_buffer)
+    return part_code
+end
+--------------------------------------------------------------------------------
 -- Get the parts needed
 function get_parts(map)
-    new_parttable()
+    new_partmap()
 
     local x_size, y_size = get_arraymap_size(map)
     local i, j = 0, 0
     local part = &quot;&quot;
+    local num_pieces = 0
     -- Examine where the piece @ x,y has to have connections
     for i=1, y_size do
         for j=1, x_size do
             -- Examine the position only, if there is a part on it!
             if has_piece(j,i) then
-                part = examine_pos(j,i)
-                add_to_parttable(part)
+                -- We have found a piece!
+                num_pieces = num_pieces+1
+                -- Which method gives us the puzzle-info?
+                if get_piece_from_puzzlemap(j,i) == 1 then
+                    -- We must examine the piece:
+                    part = determine_puzzle_from_pos(j,i)
+                else --if get_piece_from_puzzlemap(j,i) == 3 then we can predict the piece from its value in the puzzle_map
+                    part = determine_puzzle_from_value(j,i)
+                end
+            add_to_partmap(j,i,part)
             end
         end
     end
+    return num_pieces
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Shuffle with the noshuffle method
+function shuffle_parts_with_noshuffle()
+    -- Create the part_map with the unshuffled parts.
+    -- Do nothing. Just leave the part_map unchanged for an unshuffled puzzle.
     return 0
 end
 --------------------------------------------------------------------------------
--- New map with the kind of all parts at their location in the puzzle
-function new_partmap()
-    -- New Global:
-    part_map = {}
-
-    local x_size, y_size = get_arraymap_size(puzzle_map)
+--------------------------------------------------------------------------------
+-- Shuffle with the random method
+function new_parttable()
+    local part_array = {}
+    local x_size, y_size = get_arraymap_size(part_map)
     local part_counter = 1
-    local i,j = 0,0
+    local part = nil
     for i=1, y_size do
-        -- each element of partmap is an array:
-        part_map[i] = {}
         for j=1, x_size do
             if has_piece(j,i) then
-                part_map[i][j] = parttable[part_counter]               
+                part = get_piece_from_partmap(j,i)
+                part_array[part_counter] = part
                 part_counter = part_counter+1
-            else 
-                part_map[i][j] = &quot;-&quot;
             end
         end
-    end
-    return 0
+    end  
+    return part_array
 end
 
-function add_to_partmap(x,y,part)
-    part_map[y][x]=part
+-- Write shuffled parts back to the part_map
+function write_shuffled_map(part_array)
+    local x_size, y_size = get_arraymap_size(part_map)
+    local part_counter = 1
+    local part = nil
+    for i=1, y_size do
+        for j=1, x_size do
+            if has_piece(j,i) then
+                part = part_array[part_counter]
+                add_to_partmap(j,i,part)
+                part_counter = part_counter+1
+            end
+        end
+    end  
     return 0
 end
 
-function shift_cell(cell,dir)
--- Move the value of parttable[cell] into direction vector dir.
-    local cell_value = part_map[cell[2]][cell[1]]
-    add_to_partmap(cell[1]+dir[1], cell[2]+dir[2],cell_value)
-    return 0
-end
---------------------------------------------------------------------------------
---------------------------------------------------------------------------------
 -- Shuffle with the random method
-function shuffle_parts_with_noshuffle()
-    -- Create the part_map with the unshuffled parts.
-    new_partmap()
+function swap_parts(part_array,k,l)
+    part_array[l], part_array[k] = part_array[k], part_array[l]
     return 0
 end
---------------------------------------------------------------------------------
---------------------------------------------------------------------------------
--- Shuffle with the random method
-function swap_parts(k,l)
-    parttable[l], parttable[k] = parttable[k], parttable[l]
-    return 0
-end
 
 function shuffle_parts_with_random(num_swaps)
+    -- Create a linear table with all puzzlepieces in it:
+    local parttable = new_parttable()
+
     -- How many swaps we will do?
     local number_swaps = 0
 
@@ -422,11 +525,10 @@
     for i=1, number_swaps do
         local r = math.random(1, number_parts)
         local s = math.random(1, number_parts)
-        swap_parts(r,s)
+        swap_parts(parttable,r,s)
     end
 
-    -- Create the part_map with the shuffled parts.
-    new_partmap()
+    write_shuffled_map(parttable)
     return 0
 end
 --------------------------------------------------------------------------------
@@ -447,7 +549,7 @@
 function get_permutation_size(array,start)
     local size_counter = 1
     -- As long as there are pieces in the line to scan, go on
-    while array[start+size_counter]==1 do
+    while array[start+size_counter]==1 or array[start+size_counter]==3 do
         size_counter = size_counter+1
     end
     return size_counter
@@ -562,7 +664,7 @@
     -- The permutation we use is a horizontal one.
         last_element_buffer = part_map[akt_permutation_stop[2]][akt_permutation_stop[1]]
         permutation_size = akt_permutation_stop[1]-akt_permutation_start[1]+1
-        
+
         local i = akt_permutation_stop[1]-1
         while i &gt;= akt_permutation_start[1] do
             shift_cell({i,akt_permutation_start[2]},{1,0})
@@ -574,7 +676,7 @@
     -- The permutation we use is a vertical one.
         last_element_buffer = part_map[akt_permutation_stop[2]][akt_permutation_stop[1]]
         permutation_size = akt_permutation_stop[2]-akt_permutation_start[2]+1
-        
+
         local i = akt_permutation_stop[2]-1
         while i &gt;= akt_permutation_start[2] do
             shift_cell({akt_permutation_start[1],i},{0,1})
@@ -586,15 +688,12 @@
     return 0
 end
 --------------------------------------------------------------------------------
-function shuffle_parts_with_permutation(num_permutations)
-    -- New map with the parts in their proper location.
-    new_partmap()
-
+function shuffle_parts_with_permutation(num_permutations, pieces)
     -- Scan the puzzle for all possible permutations.
     scan_puzzle_for_permutations()
 
     -- How many puzzlestones are in the current cluster?
-    local num_pieces = table.getn(parttable)
+    local num_pieces = pieces
 
     -- How many possible permutation we have?
     local anz_permutations = table.getn(permutations)
@@ -620,26 +719,7 @@
 end
 --------------------------------------------------------------------------------
 --------------------------------------------------------------------------------
---[[function translate_type(type)
-    local translate_table =
-    {w =    &quot;0001&quot;,
-     s =    &quot;0010&quot;,
-     sw=    &quot;0011&quot;,
-     e =    &quot;0100&quot;,
-     ew =   &quot;0101&quot;,
-     es =   &quot;0110&quot;,
-     esw =  &quot;0111&quot;,
-     n =    &quot;1000&quot;,
-     nw =   &quot;1001&quot;,
-     ns =   &quot;1010&quot;,
-     nsw =  &quot;1011&quot;,
-     ne =   &quot;1100&quot;,
-     new =  &quot;1101&quot;,
-     nes =  &quot;1110&quot;,
-     nesw = &quot;1111&quot;}
-    return translate_table[type]
-end]]
-
+-- Plotting Functions --
 function plot_puzzle(corner,stone_type)
     local x_size, y_size = get_arraymap_size(puzzle_map)
     local i = 0
@@ -649,15 +729,71 @@
             if has_piece(j,i) then
                 -- Do not use this, because not all stones support this until now.
                 --local sockets = translate_type(part_map[i][j])
-                set_stone(stone_type..&quot;-&quot;..part_map[i][j],corner[1]+j-1,corner[2]+i-1,{})
+                set_stone(stone_type..&quot;-n&quot;,corner[1]+j-1,corner[2]+i-1,{connections = part_map[i][j]})
             end
         end
     end
     return 0
 end
+
 --------------------------------------------------------------------------------
----E--N--D------O--F------L--I--B--P--U--Z--Z--L--E------------------------------
 --------------------------------------------------------------------------------
+-- Debugging Functions --
+function plot_charmap(map)
+    local x_size, y_size = get_charmap_size(map)
+    local i
+    for i=1, y_size do
+        print(map[i])
+    end
+    return 0
+end
+
+function plot_arraymap(map)
+    local x_size, y_size = get_arraymap_size(map)
+    local i,j = 0,0
+    for i=1, y_size do
+        local temp = &quot;&quot;
+        for j=1, x_size do
+            temp = temp..&quot;|&quot;..tostring(map[i][j])
+        end
+        print(temp)
+    end
+    return 0
+end
+
+function print_stringarray(array)
+    local temp = &quot;&quot;
+    local size = get_array_size(array)
+    local i=0
+    for i=1, size do
+        temp = temp..&quot;|&quot;..array[i]
+    end
+    print(temp)
+    return 0
+end
+
+function print_array(array)
+    local temp = &quot;&quot;
+    local size = get_array_size(array)
+    local i=0
+    for i=1, size do
+        temp = temp..&quot;|&quot;..array[i]
+    end
+    print(temp)
+    return 0
+end
+
+function print_permutations()
+    local i = 0
+    for i=1, table.getn(permutations) do
+        local temp = &quot;&quot;
+        temp = &quot;[&quot;..tostring(permutations[i][1][1])..&quot;,&quot;..tostring(permutations[i][1][2])..&quot;;&quot;..tostring(permutations[i][2][1])..&quot;,&quot;..tostring(permutations[i][2][2])..&quot;]&quot;
+        print(temp)
+    end
+end
+--------------------------------------------------------------------------------
+---E--N--D------O--F------L--I--B--P--U--Z--Z--L--E-----------------------------
+--------------------------------------------------------------------------------
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
     &lt;/el:i18n&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000034.html">[Enigma-game-svn] r594 - branches/1.0/po
</A></li>
	<LI>Next message: <A HREF="000036.html">[Enigma-game-svn] r596 - branches/1.0/po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35">[ date ]</a>
              <a href="thread.html#35">[ thread ]</a>
              <a href="subject.html#35">[ subject ]</a>
              <a href="author.html#35">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
