<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r827 - in homepage: . input input/lotm
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r827%20-%20in%20homepage%3A%20.%20input%20input/lotm&In-Reply-To=%3C200708100019.l7A0Jv4A032712%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000261.html">
   <LINK REL="Next"  HREF="000263.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r827 - in homepage: . input input/lotm</H1>
    <B>andreasl at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r827%20-%20in%20homepage%3A%20.%20input%20input/lotm&In-Reply-To=%3C200708100019.l7A0Jv4A032712%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r827 - in homepage: . input input/lotm">andreasl at mail.berlios.de
       </A><BR>
    <I>Fri Aug 10 02:19:57 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000261.html">[Enigma-game-svn] r826 - in homepage/input: . lotm
</A></li>
        <LI>Next message: <A HREF="000263.html">[Enigma-game-svn] r828 - in homepage: . input input/lotm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#262">[ date ]</a>
              <a href="thread.html#262">[ thread ]</a>
              <a href="subject.html#262">[ subject ]</a>
              <a href="author.html#262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: andreasl
Date: 2007-08-10 02:19:55 +0200 (Fri, 10 Aug 2007)
New Revision: 827

Modified:
   homepage/input/lotm/lotm_archive_data.lua
   homepage/input/lotm/read_lotm.lua
   homepage/input/navbar.html
   homepage/input/navbar_de.html
   homepage/input/output-files.lua
   homepage/input/stat-help.html
   homepage/input/stat-help_de.html
   homepage/input/stat-other.html
   homepage/input/table-hcp.html
   homepage/input/table-rat.html
   homepage/input/table-solved.html
   homepage/input/table-wr.html
   homepage/input/userlist.html
   homepage/main.lua
Log:
Homepage:
 - Changes to include Russian translation.
 - Added $$-macros to translate idioms and titles in table-* etc. and
   translated to German. Adapted stat-help_de to this translation.
   These macros are locally defined in &quot;html.statistics&quot;, not &quot;general&quot;.
 - $$month_1$$ to $$month_12$$ for &quot;January&quot; etc. in &quot;general&quot;
 - Corrected evil, half year old &quot;Engima&quot;-typo in download section.
 - $$lotm_expansion$$ to centralise &quot;Level of the Month&quot; translation.
 - LotM-generation now uses a centralised month-translation function,
   i.e. no language-dependend entries in lotm_archive_data anymore
   (except maybe level title). As a side effect, lotm_archive_data
   now has no more &lt;a href&gt;'s to the output-files.
 - Autogeneration of LotM-entries from lotm_archive_data: No need
   to change output-files.lua anymore.
 - main.lua: Decrease verbosity by omitting double output lines.   
Todo:
 - Support translated level titles.
 - Simplify LotM files by outsourcing the first paragraph and
   using $$lotm_expansion$$.
 - Deactivate Russian translation button in navbar before next LotM
   (navbar.html, navbar_de.html). It's currently only activated for
   testing purposes.


Modified: homepage/input/lotm/lotm_archive_data.lua
===================================================================
--- homepage/input/lotm/lotm_archive_data.lua	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/lotm/lotm_archive_data.lua	2007-08-10 00:19:55 UTC (rev 827)
@@ -4,10 +4,9 @@
 lotm_archive_data[1] = {
   current_rating = 9.29,
   current_votes  = 7,
-  month          = &quot;March '07&quot;,
-  month_de       = &quot;M&auml;rz '07&quot;,
+  date           = { month = 3, year = 2007 },
   chronological  = 1,
-  name           = &quot;&lt;a href=\&quot;$$lotm_200703$$\&quot;&gt;Island Labyrinth&lt;/a&gt;&quot;,
+  name           = &quot;Island Labyrinth&quot;,
   addition       = &quot;&quot;,
   author         = &quot;Jacob Scott&quot;,
   position       = &quot;V/100&quot;,
@@ -17,10 +16,9 @@
 lotm_archive_data[2] = {
   current_rating = 7.70,
   current_votes  = 18,
-  month          = &quot;April '07&quot;,
-  month_de       = &quot;April '07&quot;,
+  date           = { month = 4, year = 2007 },
   chronological  = 2,
-  name           = &quot;&lt;a href=\&quot;$$lotm_200704$$\&quot;&gt;Pneumatic Delivery&lt;/a&gt;&quot;,
+  name           = &quot;Pneumatic Delivery&quot;,
   addition       = &quot;&quot;,
   author         = &quot;Manuel K&ouml;nig&quot;,
   position       = &quot;V/59&quot;,
@@ -30,10 +28,9 @@
 lotm_archive_data[3] = {
   current_rating = 9.17,
   current_votes  = 6,
-  month          = &quot;May '07&quot;,
-  month_de       = &quot;Mai '07&quot;,
+  date           = { month = 5, year = 2007 },
   chronological  = 3,
-  name           = &quot;&lt;a href=\&quot;$$lotm_200705$$\&quot;&gt;The Aztec Temple&lt;/a&gt;&quot;,
+  name           = &quot;The Aztec Temple&quot;,
   addition       = &quot;&quot;,
   author         = &quot;Dominik Lehmann&quot;,
   position       = &quot;VI/100&quot;,
@@ -43,10 +40,9 @@
 lotm_archive_data[4] = {
   current_rating = 8.60,
   current_votes  = 10,
-  month          = &quot;June '07&quot;,
-  month_de       = &quot;Juni '07&quot;,
+  date           = { month = 6, year = 2007 },
   chronological  = 4,
-  name           = &quot;&lt;a href=\&quot;$$lotm_200706$$\&quot;&gt;Labyrinth of Puzzles&lt;/a&gt;&quot;,
+  name           = &quot;Labyrinth of Puzzles&quot;,
   addition       = &quot;(1 up)&quot;,
   author         = &quot;Jacob Scott&quot;,
   position       = &quot;IV/19&quot;,
@@ -56,10 +52,9 @@
 lotm_archive_data[5] = {
   current_rating = 8.57,
   current_votes  = 7,
-  month          = &quot;July '07&quot;,
-  month_de       = &quot;Juli '07&quot;,
+  date           = { month = 7, year = 2007 },
   chronological  = 5,
-  name           = &quot;&lt;a href=\&quot;$$lotm_200707$$\&quot;&gt;Elaborate&lt;/a&gt;&quot;,
+  name           = &quot;Elaborate&quot;,
   addition       = &quot;(1 down)&quot;,
   author         = &quot;Jacob Scott&quot;,
   position       = &quot;V/65&quot;,
@@ -69,10 +64,9 @@
 lotm_archive_data[6] = {
   current_rating = 8.67,
   current_votes  = 9,
-  month          = &quot;August '07&quot;,
-  month_de       = &quot;August '07&quot;,
+  date           = { month = 8, year = 2007 },
   chronological  = 6,
-  name           = &quot;&lt;a href=\&quot;$$lotm_200708$$\&quot;&gt;Houdini&lt;/a&gt;&quot;,
+  name           = &quot;Houdini&quot;,
   addition       = &quot;&lt;b&gt;(newcomer)&lt;/b&gt;&quot;,
   author         = &quot;Ronald Lamprecht&quot;,
   position       = &quot;VI/74&quot;,
@@ -81,7 +75,5 @@
 
 -- Don't forget to adjust the archive dates:
 
-lotm_archive_data_from = {    [&quot;&quot;] = &quot;June 2007&quot;,
-                           [&quot;_de&quot;] = &quot;Juni 2007&quot; }
+lotm_archive_data_from = { month = 6, year = 2007 }
 
-

Modified: homepage/input/lotm/read_lotm.lua
===================================================================
--- homepage/input/lotm/read_lotm.lua	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/lotm/read_lotm.lua	2007-08-10 00:19:55 UTC (rev 827)
@@ -23,24 +23,57 @@
 function lotm_to_html(lotm_data, lang)
   local html_text = &quot;&quot;
   for k, v in pairs(lotm_data) do
-    local level_name = v.name
+    local level_name = &quot;&lt;a href=\&quot;$$&quot;..lotm_macro_name(v)..&quot;$$\&quot;&gt;&quot;
+      ..v.name..&quot;&lt;/a&gt; &quot;
     if v.addition ~= &quot;&quot; then
-      level_name = v.name..&quot; &quot;..v.addition
+      level_name = level_name..v.addition
     end
     local level_rating = string.format(&quot;%.2f&quot;, v.current_rating)
+    local level_date = translate_month(lang, v.date)
     html_text = html_text
-      ..&quot;    &lt;tr&gt;&lt;td class=\&quot;right\&quot;&gt;&quot; .. level_rating     .. &quot;&lt;/td&gt;\n&quot;
-      ..&quot;        &lt;td class=\&quot;right\&quot;&gt;(&quot;.. v.current_votes  ..&quot;)&lt;/td&gt;\n&quot;
-      ..&quot;        &lt;td class=\&quot;right\&quot;&gt;&quot; .. v[&quot;month&quot;..lang] .. &quot;&lt;/td&gt;\n&quot;
-      ..&quot;        &lt;td class=\&quot;left\&quot;&gt;&quot;  .. level_name       .. &quot;&lt;/td&gt;\n&quot;
-      ..&quot;        &lt;td class=\&quot;left\&quot;&gt;&quot;  .. v.author         .. &quot;&lt;/td&gt;\n&quot;
-      ..&quot;        &lt;td class=\&quot;num\&quot;&gt;&quot;   .. v.position       .. &quot;&lt;/td&gt;\n&quot;
+      ..&quot;    &lt;tr&gt;&lt;td class=\&quot;right\&quot;&gt;&quot; .. level_rating    .. &quot;&lt;/td&gt;\n&quot;
+      ..&quot;        &lt;td class=\&quot;right\&quot;&gt;(&quot;.. v.current_votes ..&quot;)&lt;/td&gt;\n&quot;
+      ..&quot;        &lt;td class=\&quot;right\&quot;&gt;&quot; .. level_date      .. &quot;&lt;/td&gt;\n&quot;
+      ..&quot;        &lt;td class=\&quot;left\&quot;&gt;&quot;  .. level_name      .. &quot;&lt;/td&gt;\n&quot;
+      ..&quot;        &lt;td class=\&quot;left\&quot;&gt;&quot;  .. v.author        .. &quot;&lt;/td&gt;\n&quot;
+      ..&quot;        &lt;td class=\&quot;num\&quot;&gt;&quot;   .. v.position      .. &quot;&lt;/td&gt;\n&quot;
       ..&quot;    &lt;/tr&gt;\n&quot;
   end
   return html_text
 end
       
 function lotm_archive_date(lang)
-  return lotm_archive_data_from[lang]
+  return translate_month(lang, lotm_archive_data_from)
 end
 
+-- lotm_macro_name returns a string of the kind &quot;lotm_200708&quot;
+-- out of the archive data table of an LotM-entry
+-- (cf. lotm_archive_data.lua)
+function lotm_macro_name(v)
+  if (type(v) ~= &quot;table&quot;) or (type(v.date) ~= &quot;table&quot;) then
+    error (&quot;Tried to create a macro name for an LotM, but the type is not table!&quot;)
+  end
+  if (v.date.year == nil) or (v.date.month == nil) then
+    error (&quot;Tried to create a macro name for an LotM, but the dates are empty!&quot;)
+  end
+  return &quot;lotm_&quot;..v.date.year..string.format(&quot;%02d&quot;, v.date.month)
+end
+
+-- Add LotM-entries to the html-field (cf. output-files.lua)
+function generate_lotm_entries(html)
+  for k, v in pairs(lotm_archive_data) do
+    local macroname = lotm_macro_name(v)
+    if html[macroname] ~= nil then
+      error (&quot;Tried to create LotM-entry for &quot;..v.name..&quot;, but entry already exists!&quot;)
+    end
+    html[macroname] = {}
+    html[macroname].outfile = macroname..&quot;.html&quot;
+    html[macroname].rightcolumn = {}
+    html[macroname].body = {&quot;lotm/&quot;..macroname}    
+    for j, l0 in pairs(language_list) do
+      html[macroname][&quot;title&quot;..l0] = &quot;$$lotm_expansion$$: &quot;
+        ..translate_month(l0, v.date)
+    end
+  end
+end
+

Modified: homepage/input/navbar.html
===================================================================
--- homepage/input/navbar.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/navbar.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -14,8 +14,18 @@
       &lt;/div&gt;
       &lt;table  class=&quot;navlang&quot; border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;5&quot;&gt;
         &lt;tr&gt;
-          &lt;td&gt;&lt;a href=&quot;$$same_en$$&quot;&gt;&lt;img src=&quot;$$imagedir$$/flags25x15/gb.png&quot; border=&quot;0&quot; width=&quot;25&quot; height=&quot;15&quot; alt=&quot;English&quot; title=&quot;This page in English&quot;&gt;&lt;/a&gt;&lt;/td&gt;
-          &lt;td&gt;&lt;a href=&quot;$$same_de$$&quot;&gt;&lt;img src=&quot;$$imagedir$$/flags25x15/de.png&quot; border=&quot;0&quot; width=&quot;25&quot; height=&quot;15&quot; alt=&quot;German&quot; title=&quot;Diese Seite in deutscher Sprache&quot;&gt;&lt;/a&gt;&lt;/td&gt;
+          &lt;td&gt;&lt;a href=&quot;$$same_en$$&quot;&gt;
+                &lt;img src=&quot;$$imagedir$$/flags25x15/gb.png&quot; border=&quot;0&quot; width=&quot;25&quot;
+                  height=&quot;15&quot; alt=&quot;English&quot; title=&quot;This page in English&quot;&gt;
+          &lt;/a&gt;&lt;/td&gt;  
+          &lt;td&gt;&lt;a href=&quot;$$same_de$$&quot;&gt;
+                &lt;img src=&quot;$$imagedir$$/flags25x15/de.png&quot; border=&quot;0&quot; width=&quot;25&quot;
+                  height=&quot;15&quot; alt=&quot;German&quot; title=&quot;Diese Seite in deutscher Sprache&quot;&gt;
+          &lt;/a&gt;&lt;/td&gt;
+          &lt;td&gt;&lt;a href=&quot;$$same_ru$$&quot;&gt;
+                &lt;img src=&quot;$$imagedir$$/flags25x15/ru.png&quot; border=&quot;0&quot; width=&quot;25&quot;
+                  height=&quot;15&quot; alt=&quot;Russian&quot; title=&quot;This page in Russian&quot;&gt;
+          &lt;/a&gt;&lt;/td&gt;
           &lt;!-- &lt;td&gt;&lt;a href=&quot;$$same_fr$$&quot;&gt;&lt;img src=&quot;$$imagedir$$/flags25x15/fr.png&quot; border=&quot;0&quot; width=&quot;25&quot; height=&quot;15&quot; alt=&quot;French&quot; title=&quot;Cette page en fran&ccedil;ais&quot;&gt;&lt;/a&gt;&lt;/td&gt; --&gt;
         &lt;/tr&gt;
       &lt;/table&gt;

Modified: homepage/input/navbar_de.html
===================================================================
--- homepage/input/navbar_de.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/navbar_de.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -14,8 +14,18 @@
       &lt;/div&gt;
       &lt;table  class=&quot;navlang&quot; border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;5&quot;&gt;
         &lt;tr&gt;
-          &lt;td&gt;&lt;a href=&quot;$$same_en$$&quot;&gt;&lt;img src=&quot;$$imagedir$$/flags25x15/gb.png&quot; border=&quot;0&quot; width=&quot;25&quot; height=&quot;15&quot; alt=&quot;English&quot; title=&quot;This page in English&quot;&gt;&lt;/a&gt;&lt;/td&gt;
-          &lt;td&gt;&lt;a href=&quot;$$same_de$$&quot;&gt;&lt;img src=&quot;$$imagedir$$/flags25x15/de.png&quot; border=&quot;0&quot; width=&quot;25&quot; height=&quot;15&quot; alt=&quot;German&quot; title=&quot;Diese Seite in deutscher Sprache&quot;&gt;&lt;/a&gt;&lt;/td&gt;
+          &lt;td&gt;&lt;a href=&quot;$$same_en$$&quot;&gt;
+                &lt;img src=&quot;$$imagedir$$/flags25x15/gb.png&quot; border=&quot;0&quot; width=&quot;25&quot;
+                  height=&quot;15&quot; alt=&quot;English&quot; title=&quot;This page in English&quot;&gt;
+          &lt;/a&gt;&lt;/td&gt;  
+          &lt;td&gt;&lt;a href=&quot;$$same_de$$&quot;&gt;
+                &lt;img src=&quot;$$imagedir$$/flags25x15/de.png&quot; border=&quot;0&quot; width=&quot;25&quot;
+                  height=&quot;15&quot; alt=&quot;German&quot; title=&quot;Diese Seite in deutscher Sprache&quot;&gt;
+          &lt;/a&gt;&lt;/td&gt;
+          &lt;td&gt;&lt;a href=&quot;$$same_ru$$&quot;&gt;
+                &lt;img src=&quot;$$imagedir$$/flags25x15/ru.png&quot; border=&quot;0&quot; width=&quot;25&quot;
+                  height=&quot;15&quot; alt=&quot;Russian&quot; title=&quot;This page in Russian&quot;&gt;
+          &lt;/a&gt;&lt;/td&gt;
           &lt;!-- &lt;td&gt;&lt;a href=&quot;$$same_fr$$&quot;&gt;&lt;img src=&quot;$$imagedir$$/flags25x15/fr.png&quot; border=&quot;0&quot; width=&quot;25&quot; height=&quot;15&quot; alt=&quot;French&quot; title=&quot;Cette page en fran&ccedil;ais&quot;&gt;&lt;/a&gt;&lt;/td&gt; --&gt;
         &lt;/tr&gt;
       &lt;/table&gt;

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/output-files.lua	2007-08-10 00:19:55 UTC (rev 827)
@@ -6,7 +6,7 @@
 newsdir = &quot;input/news/&quot;
 suffix = &quot;.html&quot;
 
-language_list = {&quot;&quot;, &quot;_de&quot;} -- &quot;_fr&quot;
+language_list = {&quot;&quot;, &quot;_de&quot;, &quot;_ru&quot;} -- &quot;_fr&quot;
 
 -- The newsfield declares the news (by number) to be shown on the main page.
 
@@ -25,14 +25,16 @@
     lang = &quot;&quot;,
     lang_de = &quot;_de&quot;,
     lang_fr = &quot;_fr&quot;,
+    lang_ru = &quot;_ru&quot;,
     title = &quot;Enigma Homepage&quot;,
     title_de = &quot;Enigma Hauptseite&quot;,
-    title_fr = &quot;Enigma Homepage&quot;,
-    --refman = &quot;<A HREF="http://www.nongnu.org/enigma/manual/enigma-ref.html">http://www.nongnu.org/enigma/manual/enigma-ref.html</A>&quot;,
+    --fr-- title_fr = &quot;Enigma Homepage&quot;,
+    --ru-- title_ru = &quot;Enigma Homepage&quot;,
     refman = &quot;manual/enigma-ref.html&quot;,
     manual = &quot;manual/enigma.html&quot;,
     manual_de = &quot;manual/enigma_de.html&quot;,
     manual_fr = &quot;manual/enigma_fr.html&quot;,
+    manual_ru = &quot;manual/enigma_ru.html&quot;, -- existing?
     wiki = &quot;<A HREF="http://enigma.mal2.ch/index.php?title=Main_Page">http://enigma.mal2.ch/index.php?title=Main_Page</A>&quot;,
     wiki_de = &quot;<A HREF="http://enigma.mal2.ch/index.php?title=Hauptseite">http://enigma.mal2.ch/index.php?title=Hauptseite</A>&quot;,
     disclaimer = &quot;<A HREF="http://www.disclaimer.de/disclaimer.htm#2">http://www.disclaimer.de/disclaimer.htm#2</A>&quot;,
@@ -41,6 +43,7 @@
     same_en = function(v,s,l0)  return add_lang_to_filename(v.outfile, &quot;&quot;)     end,
     same_de = function(v,s,l0)  return add_lang_to_filename(v.outfile, &quot;_de&quot;)  end,
     same_fr = function(v,s,l0)  return add_lang_to_filename(v.outfile, &quot;_fr&quot;)  end,
+    same_ru = function(v,s,l0)  return add_lang_to_filename(v.outfile, &quot;_ru&quot;)  end,
     navbar = {&quot;navbar&quot;},
     leftcolumn = {&quot;menu&quot;,&quot;validation&quot;},
     rightcolumn = {},
@@ -67,15 +70,43 @@
     lotm_archive_data_from = function(v,s,l0)
         return lotm_archive_date(l0)
       end,
+    lotm_expansion = &quot;Level of the Month&quot;,
+    lotm_expansion_de = &quot;Level des Monats&quot;,
+    --ru-- lotm_expansion_ru = &quot;Level of the Month&quot;,
+    month_1 = function(v,s,l0)  return  translate_month(l0, {month=1})  end,
+    month_2 = function(v,s,l0)  return  translate_month(l0, {month=2})  end,
+    month_3 = function(v,s,l0)  return  translate_month(l0, {month=3})  end,
+    month_4 = function(v,s,l0)  return  translate_month(l0, {month=4})  end,
+    month_5 = function(v,s,l0)  return  translate_month(l0, {month=5})  end,
+    month_6 = function(v,s,l0)  return  translate_month(l0, {month=6})  end,
+    month_7 = function(v,s,l0)  return  translate_month(l0, {month=7})  end,
+    month_8 = function(v,s,l0)  return  translate_month(l0, {month=8})  end,
+    month_9 = function(v,s,l0)  return  translate_month(l0, {month=9})  end,
+    month_10 = function(v,s,l0)  return  translate_month(l0, {month=10})  end,
+    month_11 = function(v,s,l0)  return  translate_month(l0, {month=11})  end,
+    month_12 = function(v,s,l0)  return  translate_month(l0, {month=12})  end,
     imagedir = &quot;images&quot;,
     imagedir_de = &quot;images&quot;,
     imagedir_fr = &quot;images&quot;,
+    imagedir_ru = &quot;images&quot;,
     lastupdate = &quot;$Date$&quot;,
     lastauthor = &quot;$Author$&quot;,
     lastrev = &quot;$Rev$&quot;
 }
 
+----------------------------------------------------------------------
+-- Date translation
+----------------------------------------------------------------------
+
+date_translation_field = {
+  months = {&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;,
+    &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;},
+  months_de = {&quot;Januar&quot;, &quot;Februar&quot;, &quot;M&auml;rz&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;,
+    &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot;}
+}
+
 --------------------------------------------------------------------------------
+
 ----------------------------------------------------------------------
 -- index.html
 ----------------------------------------------------------------------
@@ -83,6 +114,7 @@
     outfile = &quot;index.html&quot;,
     title = &quot;Enigma Homepage&quot;,
     title_de = &quot;Enigma Hauptseite&quot;,
+    --ru-- title_ru = &quot;Enigma Homepage&quot;,
     rightcolumn = {&quot;infobox&quot;},
     body = {&quot;introduction&quot;, &quot;intro-links&quot;, &quot;news1&quot;, &quot;powered-by&quot;}
 }
@@ -94,6 +126,7 @@
     outfile = &quot;about.html&quot;,
     title = &quot;About Enigma&quot;,
     title_de = &quot;&Uuml;ber Enigma&quot;,
+    --ru-- title_ru = &quot;About Enigma&quot;,
     body = {&quot;about&quot;, &quot;features&quot;, &quot;testimonials&quot;, &quot;press&quot;}
 }
 
@@ -104,6 +137,7 @@
     outfile = &quot;news.html&quot;,
     title = &quot;News and Olds&quot;,
     title_de = &quot;Neues und Altes&quot;,
+    --ru-- title_ru = &quot;News and Olds&quot;,
     rightcolumn = {},
     body = {&quot;news2&quot;}
 }
@@ -115,6 +149,7 @@
     outfile = &quot;screenshots.html&quot;,
     title = &quot;Screenshots of Enigma&quot;,
     title_de = &quot;Screenshots von Enigma&quot;,
+    --ru-- title_ru = &quot;Screenshots of Enigma&quot;,
     body = {&quot;screenshots&quot;}
 }
 
@@ -125,6 +160,7 @@
     outfile = &quot;credits.html&quot;,
     title = &quot;Credits&quot;,
     title_de = &quot;Credits&quot;,
+    --ru-- title_ru = &quot;Credits&quot;,
     body = {&quot;credits&quot;}
 }
 
@@ -134,8 +170,9 @@
 ----------------------------------------------------------------------
 html.download = {
     outfile = &quot;download.html&quot;,
-    title = &quot;Download Engima&quot;,
+    title = &quot;Download Enigma&quot;,
     title_de = &quot;Enigma herunterladen&quot;,
+    --ru-- title_ru = &quot;Download Enigma&quot;,
     body = {&quot;download&quot;}
 }
 
@@ -147,6 +184,7 @@
     outfile = &quot;support.html&quot;,
     title = &quot;User-Support&quot;,
     title_de = &quot;Spieler-Support&quot;,
+    --ru-- title_ru = &quot;User-Support&quot;,
     body = {&quot;support&quot;} --{&quot;scores&quot;, &quot;documentation&quot;}
 }
 
@@ -158,6 +196,7 @@
     outfile = &quot;faq.html&quot;,
     title = &quot;Frequently Asked Questions&quot;,
     title_de = &quot;H&auml;ufig gestellte Fragen&quot;,
+    --ru-- title_ru = &quot;Frequently Asked Questions&quot;,
     body = {&quot;faq_core&quot;, &quot;faq_questions&quot;}
 }
 
@@ -168,9 +207,71 @@
     outfile = &quot;statistics.html&quot;,
     title = &quot;User Statistics&quot;,
     title_de = &quot;Spieler-Statistiken&quot;,
+    --ru-- title_ru = &quot;User Statistics&quot;,
+    average = &quot;average&quot;,
+    average_de = &quot;Durchschnitt&quot;,
+    --ru-- average_ru = &quot;average&quot;,
+    count = &quot;count&quot;,
+    count_de = &quot;Anzahl&quot;,
+    --ru-- count_ru = &quot;count&quot;,
+    user = &quot;user&quot;,
+    user_de = &quot;Spieler&quot;,
+    --ru-- user_ru = &quot;user&quot;,
+    solved_hcp = &quot;solved hcp&quot;,
+    solved_hcp_de = &quot;gel&ouml;stes hcp&quot;,
+    --ru-- solved_hcp_ru = &quot;solved hcp&quot;,
+    difficult = &quot;difficult&quot;,
+    difficult_de = &quot;schwer&quot;,
+    --ru-- difficult_ru = &quot;difficult&quot;,
+    easy = &quot;easy&quot;,
+    easy_de = &quot;leicht&quot;,
+    --ru-- easy_ru = &quot;easy&quot;,
+    total = &quot;total&quot;,
+    total_de = &quot;gesamt&quot;,
+    --ru-- total_ru = &quot;total&quot;,
+    shared = &quot;shared&quot;,
+    shared_de = &quot;geteilt&quot;,
+    --ru-- shared_ru = &quot;shared&quot;,
+    rating = &quot;rating&quot;,
+    rating_de = &quot;Bewertung&quot;,
+    --ru-- rating_ru = &quot;rating&quot;,
+    Handicap_Statistics = &quot;Handicap Statistics of&quot;,
+    Handicap_Statistics_de = &quot;Handicap-Statistiken vom&quot;,
+    --ru-- Handicap_Statistics_ru = &quot;Handicap Statistics of&quot;, -- (month)
+    Rating_Statistics = &quot;Rating Statistics of&quot;,
+    Rating_Statistics_de = &quot;Bewertungs-Statistiken vom&quot;,
+    --ru-- Rating_Statistics = &quot;Rating Statistics of&quot;, -- (month)
+    Solved_Level_Statistics = &quot;Solved Level Statistics of&quot;,
+    Solved_Level_Statistics_de = &quot;Statistik der gel&ouml;sten Levels vom&quot;,
+    --ru-- Solved_Level_Statistics_ru = &quot;Solved Level Statistics of&quot;, -- (month)
+    Worldrecord_Statistics = &quot;Worldrecord Statistics of&quot;,
+    Worldrecord_Statistics_de = &quot;Weltrekord-Statistik vom&quot;,
+    --ru-- Worldrecord_Statistics_ru = &quot;Worldrecord Statistics of&quot;, -- (month)
+    Other_Statistics = &quot;Other Statistics&quot;,
+    Other_Statistics_de = &quot;Weitere Statistiken&quot;,
+    --ru-- Other_Statistics_ru = &quot;Other Statistics&quot;,
+    Scores = &quot;Scores&quot;,
+    Scores_de = &quot;Ergebnisse&quot;,
+    --ru-- Scores_ru = &quot;Scores&quot;,
+    Ratings = &quot;Ratings&quot;,
+    Ratings_de = &quot;Bewertungen&quot;,
+    --ru-- Ratings_ru = &quot;Ratings&quot;,
+    single_level_scores = &quot;single level scores have been registered.&quot;,
+    single_level_scores_de = &quot;einzelne Levelscores wurden registriert.&quot;,
+    --ru-- single_level_scores_ru = &quot;single level scores have been registered.&quot;,
+    single_level_ratings = &quot;single level ratings have been registered with an average of&quot;,
+    single_level_ratings_de = &quot;einzelne Levelbewertungen wurden registriert, mit einem Durchschnitt von&quot;,
+    --ru-- single_level_ratings_ru = &quot;single level ratings have been registered with an average of&quot;,
+    and_distribution = &quot;and the following distribution:&quot;,
+    and_distribution_de = &quot;und der folgenden Verteilung:&quot;,
+    --ru-- and_distribution_ru = &quot;and the following distribution:&quot;,
+    names_in_use = &quot;Names in use:&quot;,
+    names_in_use_de = &quot;Vergebene Namen:&quot;,
+    --ru-- names_in_use_ru = &quot;Names in use:&quot;,
     leftcolumn = {&quot;menu&quot;, &quot;validation&quot;, &quot;userlist&quot;},
     rightcolumn = {},
-    body = {&quot;stat-head&quot;, &quot;table-wr&quot;, &quot;table-solved&quot;, &quot;stat-help&quot;, &quot;table-hcp&quot;, &quot;stat-other&quot;, &quot;table-rat&quot;, &quot;stat-tail&quot;}
+    body = {&quot;stat-head&quot;, &quot;table-wr&quot;, &quot;table-solved&quot;, &quot;stat-help&quot;,
+            &quot;table-hcp&quot;, &quot;stat-other&quot;, &quot;table-rat&quot;, &quot;stat-tail&quot;}
 }
 
 --------------------------------------------------------------------------------
@@ -181,6 +282,7 @@
     outfile = &quot;devel.html&quot;,
     title = &quot;Development&quot;,
     title_de = &quot;Entwicklung&quot;,
+    --ru-- title_ru = &quot;Development&quot;,
     body = {&quot;development&quot;}
 }
 
@@ -192,6 +294,7 @@
     outfile = &quot;links.html&quot;,
     title = &quot;Links&quot;,
     title_de = &quot;Links&quot;,
+    --ru-- title_ru = &quot;Links&quot;,
     body = {&quot;links&quot;}
 }
 
@@ -202,6 +305,7 @@
     outfile = &quot;impressum.html&quot;,
     title = &quot;Impressum&quot;,
     title_de = &quot;Impressum&quot;,
+    --ru-- title_ru = &quot;Impressum&quot;,
     body = {&quot;impressum&quot;, &quot;longline&quot;}
 }
 
@@ -213,78 +317,26 @@
 
 html.lotm = {
     outfile = &quot;lotm.html&quot;,
-    title = &quot;Level of the Month&quot;,
-    title_de = &quot;Level des Monats&quot;,
+    title = &quot;$$lotm_expansion$$&quot;,
     rightcolumn = {},
     body = {&quot;lotm/lotm_core&quot;}
 }
 
 html.lotm_chronological = {
     outfile = &quot;lotm_chronological.html&quot;,
-    title = &quot;Level of the Month (chronological)&quot;,
-    title_de = &quot;Level des Monats (chronologisch)&quot;,
+    title = &quot;$$lotm_expansion$$ (chronological)&quot;,
+    title_de = &quot;$$lotm_expansion$$ (chronologisch)&quot;,
+    --ru-- title_ru = &quot;$$lotm_expansion$$ (chronological)&quot;,
     rightcolumn = {},
     body = {&quot;lotm/lotm_chronological&quot;}
 }
 
 html.lotm_by_position = {
     outfile = &quot;lotm_by_position.html&quot;,
-    title = &quot;Level of the Month (by position)&quot;,
-    title_de = &quot;Level des Monats (nach Position)&quot;,
+    title = &quot;$$lotm_expansion$$ (by position)&quot;,
+    title_de = &quot;$$lotm_expansion$$ (nach Position)&quot;,
+    --ru-- title_ru = &quot;Level of the Month (by position)&quot;,
     rightcolumn = {},
     body = {&quot;lotm/lotm_by_position&quot;}
 }
 
-----------------------------------------------------------------------
--- LotM - Articles
-----------------------------------------------------------------------
- 
-html.lotm_200703 = {
-    outfile = &quot;lotm_200703.html&quot;,
-    title = &quot;Level of the Month: March 2007&quot;,
-    title_de = &quot;Level des Monats: M&auml;rz 2007&quot;,
-    rightcolumn = {},
-    body = {&quot;lotm/lotm_200703&quot;}
-}
-
-html.lotm_200704 = {
-    outfile = &quot;lotm_200704.html&quot;,
-    title = &quot;Level of the Month: April 2007&quot;,
-    title_de = &quot;Level des Monats: April 2007&quot;,
-    rightcolumn = {},
-    body = {&quot;lotm/lotm_200704&quot;}
-}
-
-html.lotm_200705 = {
-    outfile = &quot;lotm_200705.html&quot;,
-    title = &quot;Level of the Month: May 2007&quot;,
-    title_de = &quot;Level des Monats: Mai 2007&quot;,
-    rightcolumn = {},
-    body = {&quot;lotm/lotm_200705&quot;}
-}
-
-html.lotm_200706 = {
-    outfile = &quot;lotm_200706.html&quot;,
-    title = &quot;Level of the Month: June 2007&quot;,
-    title_de = &quot;Level des Monats: Juni 2007&quot;,
-    rightcolumn = {},
-    body = {&quot;lotm/lotm_200706&quot;}
-}
-
-html.lotm_200707 = {
-    outfile = &quot;lotm_200707.html&quot;,
-    title = &quot;Level of the Month: July 2007&quot;,
-    title_de =  &quot;Level des Monats: Juli 2007&quot;,
-    rightcolumn = {},
-    body = {&quot;lotm/lotm_200707&quot;}
-}
-
-html.lotm_200708 = {
-    outfile = &quot;lotm_200708.html&quot;,
-    title = &quot;Level of the Month: August 2007&quot;,
-    title_de =  &quot;Level des Monats: August 2007&quot;,
-    rightcolumn = {},
-    body = {&quot;lotm/lotm_200708&quot;}
-}
-
-----------------------------------------------------------------------

Modified: homepage/input/stat-help.html
===================================================================
--- homepage/input/stat-help.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/stat-help.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -9,7 +9,7 @@
       finish a level within the same second they will both have the same score
       and they share the world record. The world record is taken into account for
       the total world record count for both competitors.
-    &lt;h4&gt;handicap&lt;/h4&gt;
+    &lt;h4&gt;handicap (hcp)&lt;/h4&gt;
       For players who are not keen on world records but still have ambitions to
       find straight and fast solutions for levels, we introduced another measure.
       We call it handicap as it is similar to the golfer's handicap. In general

Modified: homepage/input/stat-help_de.html
===================================================================
--- homepage/input/stat-help_de.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/stat-help_de.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,17 +1,17 @@
   &lt;div class=&quot;stat-help&quot;&gt;
     &lt;h3&gt;Legende&lt;/h3&gt;
-    &lt;h4&gt;total&lt;/h4&gt;
-      Alle ver&ouml;ffentlichten Level werden unter &quot;total&quot;
+    &lt;h4&gt;$$total$$&lt;/h4&gt;
+      Alle ver&ouml;ffentlichten Level werden unter &quot;$$total$$&quot;
       ber&uuml;cksichtigt. Falls ein Level einen Easy-Mode besitzt, werden
       beide Versionen gez&auml;hlt. Level, die in mehreren Level-Packs
       zugleich erscheinen, werden nur einfach gez&auml;hlt.
-    &lt;h4&gt;shared (geteilt)&lt;/h4&gt;
+    &lt;h4&gt;$$shared$$&lt;/h4&gt;
       Spielergebnisse werden mit einer Aufl&ouml;sung von 1 Sekunde
       gemessen. Falls zwei oder mehr Spieler innerhalb derselben Sekunde das
       Level l&ouml;sen, erhalten Sie die gleiche Wertung und teilen sich den
       Weltrekord. Solche geteilten Weltrekorde gehen auch in die totale
       Z&auml;hlung beider Spieler ein.
-    &lt;h4&gt;handicap&lt;/h4&gt;
+    &lt;h4&gt;Handicap (hcp)&lt;/h4&gt;
       F&uuml;r Spieler, die weniger Interesse am Erringen von Weltrekorden
       haben, aber noch immer mit Ehrgeiz gerade und schnelle L&ouml;sungen
       im Spiel suchen, haben wir ein weiteres Ma&szlig; eingef&uuml;hrt. Wir
@@ -24,7 +24,7 @@
       Professional Average Score (PAR), der zu jedem Level angegeben wird. Um
       Handicaps vergleichbar zu machen, werden sie stets auf 100 Level normiert,
       die Standardgr&ouml;&szlig;e eines Levelpacks.
-    &lt;h4&gt;solved hcp (gel&ouml;stes hcp)&lt;/h4&gt;
+    &lt;h4&gt;$$solved_hcp$$&lt;/h4&gt;
       Das gel&ouml;ste Handicap ist ein Handicap, das lediglich &uuml;ber die
       gel&ouml;sten Level eines Spielers summiert. Zus&auml;tzlich werden 10%
       der ungel&ouml;sten Level hinzugenommen, um erfolglose

Modified: homepage/input/stat-other.html
===================================================================
--- homepage/input/stat-other.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/stat-other.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,12 +1,12 @@
   &lt;div class=&quot;stat-help&quot;&gt;
-    &lt;h3&gt;Other Statistics&lt;/h3&gt;
-    &lt;h4&gt;Scores&lt;/h4&gt;
-      47843 single level scores have been registered.
-    &lt;h4&gt;Ratings&lt;/h4&gt;
-      8141 single level ratings have been registered with an average of 4.93 and the following distribution: 
+    &lt;h3&gt;$$Other_Statistics$$&lt;/h3&gt;
+    &lt;h4&gt;$$Scores$$&lt;/h4&gt;
+      47843 $$single_level_scores$$
+    &lt;h4&gt;$$Ratings$$&lt;/h4&gt;
+      8141 $$single_level_ratings$$ 4.93 $$and_distribution$$
       &lt;table&gt;
         &lt;colgroup&gt;&lt;col width=&quot;80&quot;&gt;&lt;col width=&quot;80&quot;&gt;&lt;/colgroup&gt;
-        &lt;tr&gt;&lt;th&gt;rating&lt;/th&gt;&lt;th&gt;count&lt;/th&gt;&lt;/tr&gt;
+        &lt;tr&gt;&lt;th&gt;$$rating$$&lt;/th&gt;&lt;th&gt;$$count$$&lt;/th&gt;&lt;/tr&gt;
         &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;0&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;34&lt;/td&gt;&lt;/tr&gt;
         &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;1&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;167&lt;/td&gt;&lt;/tr&gt;
         &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;2&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;381&lt;/td&gt;&lt;/tr&gt;

Modified: homepage/input/table-hcp.html
===================================================================
--- homepage/input/table-hcp.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/table-hcp.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,7 +1,7 @@
   &lt;table&gt;
-    &lt;caption&gt;Handicap Statistics of July 2007&lt;/caption&gt;
+    &lt;caption&gt;$$Handicap_Statistics$$ $$month_7$$ 2007&lt;/caption&gt;
     &lt;colgroup&gt;&lt;col width=&quot;130&quot;&gt;&lt;col width=&quot;220&quot;&gt;&lt;/colgroup&gt;
-    &lt;tr&gt;&lt;th&gt;solved hcp&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;user&lt;/th&gt;&lt;/tr&gt;
+    &lt;tr&gt;&lt;th&gt;$$solved_hcp$$&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;$$user$$&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;-130.1&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Moneymaker'&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td class=&quot;num&quot;&gt; -86.6&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Stupid'&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td class=&quot;num&quot;&gt; -85.5&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Johannes'&lt;/td&gt;&lt;/tr&gt;

Modified: homepage/input/table-rat.html
===================================================================
--- homepage/input/table-rat.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/table-rat.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,7 +1,7 @@
   &lt;table&gt;
-    &lt;caption&gt;Rating Statistics of July 2007&lt;/caption&gt;
+    &lt;caption&gt;$$Rating_Statistics$$ $$month_7$$ 2007&lt;/caption&gt;
     &lt;colgroup&gt;&lt;col width=&quot;80&quot;&gt;&lt;col width=&quot;80&quot;&gt;&lt;col width=&quot;220&quot;&gt;&lt;/colgroup&gt;
-    &lt;tr&gt;&lt;th&gt;count&lt;/th&gt;&lt;th&gt;average&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;user&lt;/th&gt;&lt;/tr&gt;    &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;871&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 5.09&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Stupid'&lt;/td&gt;&lt;/tr&gt;
+    &lt;tr&gt;&lt;th&gt;$$count$$&lt;/th&gt;&lt;th&gt;$$average$$&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;$$user$$&lt;/th&gt;&lt;/tr&gt;    &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;871&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 5.09&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Stupid'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;794&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 4.87&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'ryujun'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;791&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 4.70&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'daydreamer'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;642&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 5.00&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Duffy'&lt;/td&gt;&lt;/tr&gt;

Modified: homepage/input/table-solved.html
===================================================================
--- homepage/input/table-solved.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/table-solved.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,7 +1,7 @@
   &lt;table&gt;
-    &lt;caption&gt;Solved Level Statistics of July 2007&lt;/caption&gt;
+    &lt;caption&gt;$$Solved_Level_Statistics$$ $$month_7$$ 2007&lt;/caption&gt;
     &lt;colgroup&gt;&lt;col width=&quot;130&quot;&gt;&lt;col width=&quot;130&quot;&gt;&lt;col width=&quot;130&quot;&gt;&lt;col width=&quot;240&quot;&gt;&lt;/colgroup&gt;
-    &lt;tr&gt;&lt;th&gt;difficult&lt;/th&gt;&lt;th&gt;easy&lt;/th&gt;&lt;th&gt;total&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;user&lt;/th&gt;&lt;/tr&gt;
+    &lt;tr&gt;&lt;th&gt;$$difficult$$&lt;/th&gt;&lt;th&gt;$$easy$$&lt;/th&gt;&lt;th&gt;$$total$$&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;$$user$$&lt;/th&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;1038/1045&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;188/189&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 99.35%&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Taztunes'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;1023/1045&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;176/189&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 97.16%&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Moneymaker'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;1014/1045&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;175/189&lt;/td&gt;&lt;td class=&quot;num&quot;&gt; 96.35%&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Stupid'&lt;/td&gt;&lt;/tr&gt;

Modified: homepage/input/table-wr.html
===================================================================
--- homepage/input/table-wr.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/table-wr.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,7 +1,7 @@
   &lt;table&gt;
-    &lt;caption&gt;Worldrecord Statistics of July 2007&lt;/caption&gt;
+    &lt;caption&gt;$$Worldrecord_Statistics$$ $$month_7$$ 2007&lt;/caption&gt;
     &lt;colgroup&gt;&lt;col width=&quot;80&quot;&gt;&lt;col width=&quot;80&quot;&gt;&lt;col width=&quot;470&quot;&gt;&lt;/colgroup&gt;
-    &lt;tr&gt;&lt;th&gt;total&lt;/th&gt;&lt;th&gt;shared&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;users&lt;/th&gt;&lt;/tr&gt;
+    &lt;tr&gt;&lt;th&gt;$$total$$&lt;/th&gt;&lt;th&gt;$$shared$$&lt;/th&gt;&lt;th class=&quot;left&quot;&gt;$$user$$&lt;/th&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;786&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;234&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Moneymaker'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;257&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;118&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Stupid'&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;&lt;td class=&quot;num&quot;&gt;181&lt;/td&gt;&lt;td class=&quot;num&quot;&gt;135&lt;/td&gt;&lt;td class=&quot;left&quot;&gt;'Johannes'&lt;/td&gt;&lt;/tr&gt;

Modified: homepage/input/userlist.html
===================================================================
--- homepage/input/userlist.html	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/input/userlist.html	2007-08-10 00:19:55 UTC (rev 827)
@@ -1,5 +1,5 @@
 &lt;div class=&quot;usernames&quot;&gt;
-Names in use:
+$$names_in_use$$
   &lt;ul&gt;
     &lt;li&gt;Adonica&lt;/li&gt;
     &lt;li&gt;Agnieszka&lt;/li&gt;

Modified: homepage/main.lua
===================================================================
--- homepage/main.lua	2007-08-09 14:46:17 UTC (rev 826)
+++ homepage/main.lua	2007-08-10 00:19:55 UTC (rev 827)
@@ -37,7 +37,7 @@
 --
 
 ----------------------------------------------------------------------
--- Output
+-- Tools
 ----------------------------------------------------------------------
 
 function mydebug(st)
@@ -52,6 +52,53 @@
     end
 end
 
+-- translate_month returns a translated string of the month number
+-- MONTH in the year YEAR. If year is nil, no year is appended.
+-- Data for translation is provided in output-files.lua.
+function translate_month(lang, date_table)
+  if type(date_table) ~= &quot;table&quot; then
+    error(&quot;Trying to translate month, but argument is &quot;..type(date_table)..&quot;!&quot;)
+  end
+  local month = date_table.month
+  if month == nil then
+    error(&quot;Trying to translate month, but month is NIL!&quot;)
+  end
+  local translation_table = date_translation_field[&quot;months&quot;..lang]
+  if translation_table == nil then
+    translation_table = date_translation_field.months
+  end
+  month = translation_table[month]
+  local year = date_table.year
+  if year == nil then
+    return month
+  else
+    year = math.fmod(year, 100)
+    year = string.format(&quot;%02d&quot;, year)
+    return month..&quot; '&quot;..year
+  end
+end
+
+-- scribble writes string s to output if and only if it wasn't
+-- written there before. Hence, double infos are omitted.
+scribbleblock = {}
+function scribble(s)
+  if type(s) ~= &quot;string&quot; then
+    error(&quot;Can't scribble that, it's type is &quot;..type(s)..&quot;!&quot;)
+  end
+  for k, t in pairs(scribbleblock) do
+    if t == s then
+      mydebug(&quot;  repeat: [&quot;..s..&quot;]&quot;)
+      return
+    end
+  end
+  io.write(s)
+  table.insert(scribbleblock, s)
+end
+
+----------------------------------------------------------------------
+-- Parsing and Macro-Replacing - The Program's Recursive Heartbeat
+----------------------------------------------------------------------
+ 
 function parse_text(v, text, lang, context)
     return string.gsub(text, &quot;%$%$(.-)%$%$&quot;, function (s)
         local process = v[s] or general[s]
@@ -63,16 +110,17 @@
             if type(html[s]) == &quot;table&quot; and type(html[s].outfile) == &quot;string&quot; then
                 return add_lang_to_filename(html[s].outfile, lang)
             else
-                error(&quot;Error during evaluation of &quot;..context..&quot;: Entry &quot;..s..&quot; not defined.&quot;)
+                error(&quot;Error during evaluation of &quot;..context
+                      ..&quot;: Entry &quot;..s..&quot; not defined.&quot;)
             end
         end
         if stype == &quot;string&quot; then
             if type(process_with_lang) == &quot;string&quot; then
-                return process_with_lang
+                return parse_text(v, process_with_lang, lang, context)
             else
-                io.write(&quot;  Missing entry &quot;..s..lang..&quot; for &quot;
+                scribble(&quot;  Missing entry &quot;..s..lang..&quot; for &quot;
                          ..context..&quot;, using fallback.\n&quot;)
-                return process
+                return parse_text(v, process, lang, context)
             end
         end
         if stype == &quot;function&quot; then
@@ -84,7 +132,7 @@
                 -- remove slash for name- and id-tags
                 fn = string.gsub(f, &quot;/&quot;, &quot;_&quot;)
                 if f ~= fn then
-                    io.write(&quot;  Note: changed anchors for &quot;..f..&quot; to &quot;..fn..
+                    scribble(&quot;  Note: changed anchors for &quot;..f..&quot; to &quot;..fn..
                              &quot;. Please correct href's.\n&quot;)
                 end
                 addstring = addstring..&quot;&lt;a name=\&quot;&quot;..fn..&quot;\&quot; id=\&quot;&quot;..fn..&quot;\&quot;&gt;&lt;/a&gt;\n&quot;
@@ -110,11 +158,11 @@
         if infile == nil then
             error(&quot;Error: Neither &quot;..infilename..&quot; nor &quot;..infilename0..&quot; exist.&quot;)
         else        
-            io.write (&quot;No file &quot;..infilename..&quot;, using fallback &quot;..infilename0..&quot;...\n&quot;)
+            scribble (&quot;No file &quot;..infilename..&quot;, using fallback &quot;..infilename0..&quot;...\n&quot;)
             infilename = infilename0
         end
     else
-        io.write (&quot;Reading input from &quot;..infilename..&quot; ...\n&quot;)
+        scribble (&quot;Reading input from &quot;..infilename..&quot; ...\n&quot;)
     end
 
     -- Read and process infile
@@ -124,6 +172,10 @@
     return parse_text(v, body, lang, infilename)
 end
 
+----------------------------------------------------------------------
+-- Main Routine
+----------------------------------------------------------------------
+
 -- Get general data and LotM archive data
 
 dofile(&quot;input/output-files.lua&quot;)
@@ -134,6 +186,10 @@
 dofile(&quot;input/news/read_news.lua&quot;)
 dofile(&quot;input/lotm/read_lotm.lua&quot;)
 
+-- Autogenerate LotM-entries into the html-field (see read_lotm.lua)
+
+generate_lotm_entries(html)
+
 -- Now glue everything together
 
 for lang_nr, lang in pairs(language_list) do


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000261.html">[Enigma-game-svn] r826 - in homepage/input: . lotm
</A></li>
	<LI>Next message: <A HREF="000263.html">[Enigma-game-svn] r828 - in homepage: . input input/lotm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#262">[ date ]</a>
              <a href="thread.html#262">[ thread ]</a>
              <a href="subject.html#262">[ subject ]</a>
              <a href="author.html#262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
