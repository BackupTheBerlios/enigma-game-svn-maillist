From raoul at mail.berlios.de  Thu Sep  2 00:31:44 2010
From: raoul at mail.berlios.de (raoul at mail.berlios.de)
Date: Thu,  2 Sep 2010 00:31:44 +0200
Subject: [Enigma-game-svn] r2115 - trunk/data
Message-ID: <20100901223144.282A3480FC6@sheep.berlios.de>

Author: raoul
Date: 2010-09-02 00:31:43 +0200 (Thu, 02 Sep 2010)
New Revision: 2115

Modified:
   trunk/data/models-2d.lua
Log:
-> Fix for missing subkind models of seed item. (Used for barrier stone images.)



Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2010-08-15 17:38:27 UTC (rev 2114)
+++ trunk/data/models-2d.lua	2010-09-01 22:31:43 UTC (rev 2115)
@@ -787,6 +787,11 @@
         "it_seed4", "it_seed5",
     }
     DefAnim("it_seed_growing", BuildFrames(frames, 120))
+    -- Other subkinds
+    DefAlias("it_seed_wood", "it_seed1")
+    DefAlias("it_seed_greenbrown", "it_seed1")
+    DefAlias("it_seed_hay", "it_seed1")
+    DefAlias("it_seed_volcano", "it_seed1")
 end
 
 -- it_sensor --



From a_abraham at mail.berlios.de  Sat Sep  4 13:13:50 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Sat,  4 Sep 2010 13:13:50 +0200
Subject: [Enigma-game-svn] r2116 - trunk/doc/reference
Message-ID: <20100904111350.961DB48100F@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-04 13:13:49 +0200 (Sat, 04 Sep 2010)
New Revision: 2116

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Fixed missing quotes

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2010-09-01 22:31:43 UTC (rev 2115)
+++ trunk/doc/reference/enigma-ref.texi	2010-09-04 11:13:49 UTC (rev 2116)
@@ -3272,8 +3272,8 @@
 the reference will not get finalized on initialization but remains dynamic.
 
 @example
-ti["c"] = @{it_coin_s", "magic#"@}
-ti["v"] = @{it_vortex", destination="@@@@magic#*"@}
+ti["c"] = @{"it_coin_s", "magic#"@}
+ti["v"] = @{"it_vortex", destination="@@@@magic#*"@}
 @end example
 
 Setting three magic coins and one vortex in your map will teleport the marble



From ral at mail.berlios.de  Sun Sep  5 23:27:29 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun,  5 Sep 2010 23:27:29 +0200
Subject: [Enigma-game-svn] r2117 - homepage/input
Message-ID: <20100905212729.D0D7248104F@sheep.berlios.de>

Author: ral
Date: 2010-09-05 23:27:29 +0200 (Sun, 05 Sep 2010)
New Revision: 2117

Modified:
   homepage/input/stat-other.html
   homepage/input/table-hcp.html
   homepage/input/table-rat.html
   homepage/input/table-solved.html
   homepage/input/table-wr.html
   homepage/input/userlist.html
Log:
homepage statistics August 2010

Modified: homepage/input/stat-other.html
===================================================================
--- homepage/input/stat-other.html	2010-09-04 11:13:49 UTC (rev 2116)
+++ homepage/input/stat-other.html	2010-09-05 21:27:29 UTC (rev 2117)
@@ -1,21 +1,21 @@
   <div class="stat-help">
     <h3>$$Other_Statistics$$</h3>
     <h4>$$Scores$$</h4>
-      102758 $$single_level_scores$$.
+      103483 $$single_level_scores$$.
     <h4>$$Ratings$$</h4>
-      20569 $$single_level_ratings$$ 4.97 $$and_distribution$$: 
+      20603 $$single_level_ratings$$ 4.97 $$and_distribution$$: 
       <table>
         <colgroup><col width="80"><col width="80"></colgroup>
         <tr><th>$$rating$$</th><th>$$count$$</th></tr>
-        <tr><td class="num">0</td><td class="num">122</td></tr>
-        <tr><td class="num">1</td><td class="num">357</td></tr>
-        <tr><td class="num">2</td><td class="num">1077</td></tr>
-        <tr><td class="num">3</td><td class="num">2687</td></tr>
-        <tr><td class="num">4</td><td class="num">3869</td></tr>
-        <tr><td class="num">5</td><td class="num">4894</td></tr>
-        <tr><td class="num">6</td><td class="num">3498</td></tr>
-        <tr><td class="num">7</td><td class="num">2501</td></tr>
-        <tr><td class="num">8</td><td class="num">1003</td></tr>
+        <tr><td class="num">0</td><td class="num">124</td></tr>
+        <tr><td class="num">1</td><td class="num">359</td></tr>
+        <tr><td class="num">2</td><td class="num">1080</td></tr>
+        <tr><td class="num">3</td><td class="num">2689</td></tr>
+        <tr><td class="num">4</td><td class="num">3871</td></tr>
+        <tr><td class="num">5</td><td class="num">4907</td></tr>
+        <tr><td class="num">6</td><td class="num">3501</td></tr>
+        <tr><td class="num">7</td><td class="num">2506</td></tr>
+        <tr><td class="num">8</td><td class="num">1005</td></tr>
         <tr><td class="num">9</td><td class="num">387</td></tr>
         <tr><td class="num">10</td><td class="num">174</td></tr>
       </table>

Modified: homepage/input/table-hcp.html
===================================================================
--- homepage/input/table-hcp.html	2010-09-04 11:13:49 UTC (rev 2116)
+++ homepage/input/table-hcp.html	2010-09-05 21:27:29 UTC (rev 2117)
@@ -1,200 +1,202 @@
   <table>
-    <caption>$$Handicap_Statistics$$ $$July$$ 2010</caption>
+    <caption>$$Handicap_Statistics$$ $$August$$ 2010</caption>
     <colgroup><col width="130"><col width="220"></colgroup>
     <tr><th>$$solved_hcp$$</th><th class="left">$$user$$</th></tr>
-     <tr><td class="num">-168.6</td><td class="left">'Medimaster'</td></tr>
-     <tr><td class="num">-154.0</td><td class="left">'Moneymaker'</td></tr>
+     <tr><td class="num">-169.2</td><td class="left">'Medimaster'</td></tr>
+     <tr><td class="num">-153.9</td><td class="left">'Moneymaker'</td></tr>
      <tr><td class="num"> -98.9</td><td class="left">'daydreamer'</td></tr>
-     <tr><td class="num"> -93.4</td><td class="left">'l'ane'</td></tr>
+     <tr><td class="num"> -98.6</td><td class="left">'l'ane'</td></tr>
      <tr><td class="num"> -67.6</td><td class="left">'Mentist'</td></tr>
      <tr><td class="num"> -66.6</td><td class="left">'Stupid'</td></tr>
      <tr><td class="num"> -65.1</td><td class="left">'Johannes'</td></tr>
-     <tr><td class="num"> -62.0</td><td class="left">'Daisy'</td></tr>
+     <tr><td class="num"> -62.4</td><td class="left">'Daisy'</td></tr>
      <tr><td class="num"> -57.2</td><td class="left">'dev0'</td></tr>
-     <tr><td class="num"> -54.1</td><td class="left">'Great Scott'</td></tr>
+     <tr><td class="num"> -54.3</td><td class="left">'Great Scott'</td></tr>
+     <tr><td class="num"> -50.4</td><td class="left">'Angolino'</td></tr>
      <tr><td class="num"> -47.9</td><td class="left">'Crystalicum'</td></tr>
      <tr><td class="num"> -46.6</td><td class="left">'Duffy'</td></tr>
-     <tr><td class="num"> -44.9</td><td class="left">'Angolino'</td></tr>
+     <tr><td class="num"> -46.4</td><td class="left">'Skywolf'</td></tr>
      <tr><td class="num"> -44.5</td><td class="left">'Malla'</td></tr>
-     <tr><td class="num"> -43.1</td><td class="left">'Skywolf'</td></tr>
-     <tr><td class="num"> -42.6</td><td class="left">'ryujun'</td></tr>
-     <tr><td class="num"> -42.4</td><td class="left">'Alexandros'</td></tr>
-     <tr><td class="num"> -42.2</td><td class="left">'Emmanuel'</td></tr>
-     <tr><td class="num"> -35.1</td><td class="left">'Another'</td></tr>
-     <tr><td class="num"> -33.6</td><td class="left">'Django'</td></tr>
+     <tr><td class="num"> -42.5</td><td class="left">'ryujun'</td></tr>
+     <tr><td class="num"> -42.5</td><td class="left">'Alexandros'</td></tr>
+     <tr><td class="num"> -42.4</td><td class="left">'Emmanuel'</td></tr>
+     <tr><td class="num"> -37.1</td><td class="left">'Another'</td></tr>
+     <tr><td class="num"> -33.8</td><td class="left">'Django'</td></tr>
      <tr><td class="num"> -30.5</td><td class="left">'Gloop'</td></tr>
      <tr><td class="num"> -24.4</td><td class="left">'Taztunes'</td></tr>
-     <tr><td class="num"> -22.8</td><td class="left">'Safalra'</td></tr>
-     <tr><td class="num"> -22.3</td><td class="left">'Zekobah'</td></tr>
-     <tr><td class="num"> -19.7</td><td class="left">'Ludmian'</td></tr>
+     <tr><td class="num"> -23.0</td><td class="left">'Safalra'</td></tr>
+     <tr><td class="num"> -22.4</td><td class="left">'Zekobah'</td></tr>
+     <tr><td class="num"> -19.8</td><td class="left">'Ludmian'</td></tr>
+     <tr><td class="num"> -17.7</td><td class="left">'Zephyr'</td></tr>
      <tr><td class="num"> -17.6</td><td class="left">'H-J.Epting'</td></tr>
-     <tr><td class="num"> -17.6</td><td class="left">'Zephyr'</td></tr>
-     <tr><td class="num"> -16.5</td><td class="left">'dpl'</td></tr>
-     <tr><td class="num"> -16.4</td><td class="left">'B-Huff'</td></tr>
-     <tr><td class="num"> -14.8</td><td class="left">'bojster'</td></tr>
-     <tr><td class="num"> -13.8</td><td class="left">'Ghatotkacha'</td></tr>
-     <tr><td class="num"> -10.4</td><td class="left">'ged'</td></tr>
-     <tr><td class="num"> -10.1</td><td class="left">'Raoul'</td></tr>
-     <tr><td class="num">  -8.7</td><td class="left">'ABS'</td></tr>
-     <tr><td class="num">  -8.5</td><td class="left">'hendrik'</td></tr>
-     <tr><td class="num">  -8.2</td><td class="left">'Freshman'</td></tr>
-     <tr><td class="num">  -7.6</td><td class="left">'Alex'</td></tr>
+     <tr><td class="num"> -16.6</td><td class="left">'dpl'</td></tr>
+     <tr><td class="num"> -16.5</td><td class="left">'B-Huff'</td></tr>
+     <tr><td class="num"> -15.0</td><td class="left">'bojster'</td></tr>
+     <tr><td class="num"> -14.0</td><td class="left">'Ghatotkacha'</td></tr>
+     <tr><td class="num"> -10.5</td><td class="left">'ged'</td></tr>
+     <tr><td class="num"> -10.2</td><td class="left">'Raoul'</td></tr>
+     <tr><td class="num">  -8.8</td><td class="left">'ABS'</td></tr>
+     <tr><td class="num">  -8.6</td><td class="left">'hendrik'</td></tr>
+     <tr><td class="num">  -8.3</td><td class="left">'Freshman'</td></tr>
+     <tr><td class="num">  -7.7</td><td class="left">'Alex'</td></tr>
      <tr><td class="num">  -7.1</td><td class="left">'Ronald'</td></tr>
      <tr><td class="num">  -6.6</td><td class="left">'Dime'</td></tr>
-     <tr><td class="num">  -4.9</td><td class="left">'cuoha'</td></tr>
-     <tr><td class="num">  -1.7</td><td class="left">'Lukas'</td></tr>
-     <tr><td class="num">  -0.8</td><td class="left">'HuB34'</td></tr>
-     <tr><td class="num">   1.8</td><td class="left">'Timo'</td></tr>
-     <tr><td class="num">   2.3</td><td class="left">'Iceshark7'</td></tr>
+     <tr><td class="num">  -5.0</td><td class="left">'cuoha'</td></tr>
+     <tr><td class="num">  -1.8</td><td class="left">'Lukas'</td></tr>
+     <tr><td class="num">  -1.0</td><td class="left">'HuB34'</td></tr>
+     <tr><td class="num">   1.7</td><td class="left">'Timo'</td></tr>
+     <tr><td class="num">   2.2</td><td class="left">'Iceshark7'</td></tr>
      <tr><td class="num">   3.7</td><td class="left">'joseba'</td></tr>
      <tr><td class="num">   3.7</td><td class="left">'Kevin'</td></tr>
-     <tr><td class="num">   5.4</td><td class="left">'mecke'</td></tr>
-     <tr><td class="num">   6.3</td><td class="left">'U-Punkt'</td></tr>
-     <tr><td class="num">   6.4</td><td class="left">'fabian'</td></tr>
-     <tr><td class="num">   6.4</td><td class="left">'Daniel'</td></tr>
-     <tr><td class="num">   7.0</td><td class="left">'Craven'</td></tr>
+     <tr><td class="num">   5.3</td><td class="left">'mecke'</td></tr>
+     <tr><td class="num">   6.2</td><td class="left">'fabian'</td></tr>
+     <tr><td class="num">   6.2</td><td class="left">'U-Punkt'</td></tr>
+     <tr><td class="num">   6.3</td><td class="left">'Daniel'</td></tr>
+     <tr><td class="num">   7.1</td><td class="left">'Craven'</td></tr>
      <tr><td class="num">   7.3</td><td class="left">'JuSt'</td></tr>
-     <tr><td class="num">   7.9</td><td class="left">'Hairball'</td></tr>
-     <tr><td class="num">   8.3</td><td class="left">'Tiza'</td></tr>
-     <tr><td class="num">   8.5</td><td class="left">'Wuzzy'</td></tr>
-     <tr><td class="num">   9.2</td><td class="left">'mrduke'</td></tr>
+     <tr><td class="num">   7.8</td><td class="left">'Hairball'</td></tr>
+     <tr><td class="num">   8.2</td><td class="left">'Tiza'</td></tr>
+     <tr><td class="num">   8.4</td><td class="left">'Wuzzy'</td></tr>
+     <tr><td class="num">   9.1</td><td class="left">'mrduke'</td></tr>
      <tr><td class="num">   9.9</td><td class="left">'para_doks'</td></tr>
      <tr><td class="num">  10.3</td><td class="left">'Tobias'</td></tr>
-     <tr><td class="num">  11.6</td><td class="left">'alfred69'</td></tr>
-     <tr><td class="num">  12.1</td><td class="left">'Guglielmo'</td></tr>
-     <tr><td class="num">  12.7</td><td class="left">'serpent'</td></tr>
+     <tr><td class="num">  11.5</td><td class="left">'alfred69'</td></tr>
+     <tr><td class="num">  12.0</td><td class="left">'Guglielmo'</td></tr>
+     <tr><td class="num">  12.6</td><td class="left">'serpent'</td></tr>
      <tr><td class="num">  12.9</td><td class="left">'Andy'</td></tr>
-     <tr><td class="num">  13.3</td><td class="left">'Sigma'</td></tr>
-     <tr><td class="num">  14.5</td><td class="left">'oxyd4ever'</td></tr>
-     <tr><td class="num">  15.2</td><td class="left">'Austin'</td></tr>
-     <tr><td class="num">  16.0</td><td class="left">'shoki'</td></tr>
-     <tr><td class="num">  18.6</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-     <tr><td class="num">  19.1</td><td class="left">'ais523'</td></tr>
-     <tr><td class="num">  20.3</td><td class="left">'Mark P.'</td></tr>
+     <tr><td class="num">  13.1</td><td class="left">'Sigma'</td></tr>
+     <tr><td class="num">  14.4</td><td class="left">'oxyd4ever'</td></tr>
+     <tr><td class="num">  15.1</td><td class="left">'Austin'</td></tr>
+     <tr><td class="num">  15.9</td><td class="left">'shoki'</td></tr>
+     <tr><td class="num">  18.5</td><td class="left">'ShadowPhrogg32642342'</td></tr>
+     <tr><td class="num">  19.0</td><td class="left">'ais523'</td></tr>
+     <tr><td class="num">  20.1</td><td class="left">'alfix'</td></tr>
+     <tr><td class="num">  20.2</td><td class="left">'Mark P.'</td></tr>
+     <tr><td class="num">  20.7</td><td class="left">'Andreas'</td></tr>
      <tr><td class="num">  20.8</td><td class="left">'AlephD'</td></tr>
-     <tr><td class="num">  20.9</td><td class="left">'Andreas'</td></tr>
-     <tr><td class="num">  21.2</td><td class="left">'Sim_Ed'</td></tr>
-     <tr><td class="num">  22.3</td><td class="left">'Agnieszka'</td></tr>
+     <tr><td class="num">  21.1</td><td class="left">'Sim_Ed'</td></tr>
+     <tr><td class="num">  22.2</td><td class="left">'Agnieszka'</td></tr>
      <tr><td class="num">  22.6</td><td class="left">'Chocolate Zero'</td></tr>
-     <tr><td class="num">  23.4</td><td class="left">'casmith_789'</td></tr>
+     <tr><td class="num">  23.3</td><td class="left">'casmith_789'</td></tr>
      <tr><td class="num">  25.1</td><td class="left">'Ale'</td></tr>
      <tr><td class="num">  27.1</td><td class="left">'Klaus'</td></tr>
-     <tr><td class="num">  28.0</td><td class="left">'Antonio EE'</td></tr>
-     <tr><td class="num">  28.6</td><td class="left">'Marc-Hendrik'</td></tr>
-     <tr><td class="num">  29.5</td><td class="left">'Thomas'</td></tr>
+     <tr><td class="num">  27.9</td><td class="left">'Antonio EE'</td></tr>
+     <tr><td class="num">  28.5</td><td class="left">'Marc-Hendrik'</td></tr>
+     <tr><td class="num">  29.3</td><td class="left">'Thomas'</td></tr>
      <tr><td class="num">  29.6</td><td class="left">'Feynman'</td></tr>
-     <tr><td class="num">  30.0</td><td class="left">'Chris'</td></tr>
+     <tr><td class="num">  29.7</td><td class="left">'Chris'</td></tr>
      <tr><td class="num">  30.1</td><td class="left">'Gottseinsohn'</td></tr>
      <tr><td class="num">  30.2</td><td class="left">'hdwow'</td></tr>
-     <tr><td class="num">  31.3</td><td class="left">'Hans-HD'</td></tr>
+     <tr><td class="num">  31.2</td><td class="left">'Hans-HD'</td></tr>
      <tr><td class="num">  31.7</td><td class="left">'Bent'</td></tr>
-     <tr><td class="num">  31.9</td><td class="left">'un_guru'</td></tr>
-     <tr><td class="num">  32.6</td><td class="left">'Little_Mole'</td></tr>
+     <tr><td class="num">  31.8</td><td class="left">'un_guru'</td></tr>
+     <tr><td class="num">  32.5</td><td class="left">'Little_Mole'</td></tr>
      <tr><td class="num">  32.9</td><td class="left">'DINA'</td></tr>
-     <tr><td class="num">  33.2</td><td class="left">'J3FF'</td></tr>
-     <tr><td class="num">  33.4</td><td class="left">'Jinajon'</td></tr>
+     <tr><td class="num">  33.1</td><td class="left">'J3FF'</td></tr>
+     <tr><td class="num">  33.2</td><td class="left">'Jinajon'</td></tr>
      <tr><td class="num">  33.5</td><td class="left">'Vinksu'</td></tr>
      <tr><td class="num">  33.6</td><td class="left">'biotopa'</td></tr>
      <tr><td class="num">  33.8</td><td class="left">'evane'</td></tr>
-     <tr><td class="num">  34.0</td><td class="left">'oblo'</td></tr>
-     <tr><td class="num">  34.4</td><td class="left">'GiannuzzITA'</td></tr>
-     <tr><td class="num">  34.5</td><td class="left">'redsantz'</td></tr>
-     <tr><td class="num">  34.5</td><td class="left">'alfix'</td></tr>
+     <tr><td class="num">  33.9</td><td class="left">'oblo'</td></tr>
+     <tr><td class="num">  34.2</td><td class="left">'GiannuzzITA'</td></tr>
+     <tr><td class="num">  34.4</td><td class="left">'redsantz'</td></tr>
+     <tr><td class="num">  35.9</td><td class="left">'NorthForty'</td></tr>
      <tr><td class="num">  35.9</td><td class="left">'Edgar_Flesk'</td></tr>
+     <tr><td class="num">  35.9</td><td class="left">'geembo_90'</td></tr>
      <tr><td class="num">  35.9</td><td class="left">'Melanie'</td></tr>
-     <tr><td class="num">  36.0</td><td class="left">'NorthForty'</td></tr>
-     <tr><td class="num">  36.2</td><td class="left">'geembo_90'</td></tr>
      <tr><td class="num">  36.3</td><td class="left">'Gorn'</td></tr>
+     <tr><td class="num">  36.8</td><td class="left">'IChrisI'</td></tr>
      <tr><td class="num">  36.9</td><td class="left">'erich'</td></tr>
-     <tr><td class="num">  36.9</td><td class="left">'IChrisI'</td></tr>
-     <tr><td class="num">  39.5</td><td class="left">'niebie'</td></tr>
+     <tr><td class="num">  39.4</td><td class="left">'niebie'</td></tr>
      <tr><td class="num">  39.6</td><td class="left">'MicWa'</td></tr>
      <tr><td class="num">  39.7</td><td class="left">'WP319'</td></tr>
-     <tr><td class="num">  40.1</td><td class="left">'Kosby'</td></tr>
-     <tr><td class="num">  40.6</td><td class="left">'alain'</td></tr>
+     <tr><td class="num">  40.0</td><td class="left">'Kosby'</td></tr>
+     <tr><td class="num">  40.5</td><td class="left">'alain'</td></tr>
      <tr><td class="num">  41.7</td><td class="left">'Liam Sheehan'</td></tr>
-     <tr><td class="num">  42.4</td><td class="left">'Rugby4ever'</td></tr>
+     <tr><td class="num">  42.3</td><td class="left">'Rugby4ever'</td></tr>
      <tr><td class="num">  42.9</td><td class="left">'Drotten'</td></tr>
+     <tr><td class="num">  43.0</td><td class="left">'WesleyCrusher'</td></tr>
      <tr><td class="num">  43.1</td><td class="left">'purplerainbow'</td></tr>
-     <tr><td class="num">  43.1</td><td class="left">'WesleyCrusher'</td></tr>
-     <tr><td class="num">  43.2</td><td class="left">'Archcorenth'</td></tr>
+     <tr><td class="num">  43.1</td><td class="left">'Archcorenth'</td></tr>
      <tr><td class="num">  43.3</td><td class="left">'Nanor22'</td></tr>
      <tr><td class="num">  43.4</td><td class="left">'Harry Lim'</td></tr>
-     <tr><td class="num">  44.2</td><td class="left">'B-man'</td></tr>
+     <tr><td class="num">  44.1</td><td class="left">'B-man'</td></tr>
      <tr><td class="num">  44.4</td><td class="left">'Nfol'</td></tr>
-     <tr><td class="num">  45.0</td><td class="left">'Jonyzz'</td></tr>
-     <tr><td class="num">  45.1</td><td class="left">'gringer'</td></tr>
-     <tr><td class="num">  45.2</td><td class="left">'Tiger'</td></tr>
+     <tr><td class="num">  44.9</td><td class="left">'Jonyzz'</td></tr>
+     <tr><td class="num">  45.0</td><td class="left">'gringer'</td></tr>
+     <tr><td class="num">  45.1</td><td class="left">'Tiger'</td></tr>
      <tr><td class="num">  45.5</td><td class="left">'Alexander J'</td></tr>
-     <tr><td class="num">  45.8</td><td class="left">'Snaily'</td></tr>
-     <tr><td class="num">  46.0</td><td class="left">'Vlad'</td></tr>
-     <tr><td class="num">  46.7</td><td class="left">'Momcat'</td></tr>
+     <tr><td class="num">  45.7</td><td class="left">'Snaily'</td></tr>
+     <tr><td class="num">  45.9</td><td class="left">'Vlad'</td></tr>
+     <tr><td class="num">  46.0</td><td class="left">'B.3'</td></tr>
+     <tr><td class="num">  46.6</td><td class="left">'Momcat'</td></tr>
      <tr><td class="num">  47.2</td><td class="left">'ThingFish'</td></tr>
-     <tr><td class="num">  47.4</td><td class="left">'Breezy'</td></tr>
-     <tr><td class="num">  47.6</td><td class="left">'Mecki'</td></tr>
-     <tr><td class="num">  48.0</td><td class="left">'Uli'</td></tr>
+     <tr><td class="num">  47.3</td><td class="left">'Breezy'</td></tr>
+     <tr><td class="num">  47.5</td><td class="left">'Mecki'</td></tr>
+     <tr><td class="num">  47.9</td><td class="left">'Uli'</td></tr>
      <tr><td class="num">  48.0</td><td class="left">'Paulus'</td></tr>
      <tr><td class="num">  48.7</td><td class="left">'Tarim'</td></tr>
      <tr><td class="num">  49.8</td><td class="left">'IntKecsk'</td></tr>
-     <tr><td class="num">  50.3</td><td class="left">'tjRaven'</td></tr>
+     <tr><td class="num">  50.2</td><td class="left">'tjRaven'</td></tr>
      <tr><td class="num">  50.5</td><td class="left">'Valkyrie2'</td></tr>
-     <tr><td class="num">  50.8</td><td class="left">'mhatta'</td></tr>
-     <tr><td class="num">  51.1</td><td class="left">'ntaeijr'</td></tr>
-     <tr><td class="num">  52.5</td><td class="left">'aranelv'</td></tr>
-     <tr><td class="num">  53.0</td><td class="left">'Zak'</td></tr>
-     <tr><td class="num">  53.1</td><td class="left">'Jeffrey S'</td></tr>
+     <tr><td class="num">  50.7</td><td class="left">'mhatta'</td></tr>
+     <tr><td class="num">  51.0</td><td class="left">'ntaeijr'</td></tr>
+     <tr><td class="num">  52.4</td><td class="left">'aranelv'</td></tr>
+     <tr><td class="num">  52.9</td><td class="left">'Zak'</td></tr>
+     <tr><td class="num">  53.0</td><td class="left">'Jeffrey S'</td></tr>
+     <tr><td class="num">  53.0</td><td class="left">'rima'</td></tr>
      <tr><td class="num">  53.1</td><td class="left">'Tomson'</td></tr>
-     <tr><td class="num">  53.1</td><td class="left">'rima'</td></tr>
      <tr><td class="num">  53.2</td><td class="left">'brynn'</td></tr>
-     <tr><td class="num">  53.5</td><td class="left">'Sandra'</td></tr>
+     <tr><td class="num">  53.4</td><td class="left">'Sandra'</td></tr>
      <tr><td class="num">  54.1</td><td class="left">'jdcampo'</td></tr>
+     <tr><td class="num">  54.8</td><td class="left">'ReasonAnce'</td></tr>
      <tr><td class="num">  54.8</td><td class="left">'AkRa'</td></tr>
-     <tr><td class="num">  54.9</td><td class="left">'ReasonAnce'</td></tr>
-     <tr><td class="num">  56.0</td><td class="left">'Vaily'</td></tr>
-     <tr><td class="num">  56.2</td><td class="left">'Slav'</td></tr>
-     <tr><td class="num">  56.2</td><td class="left">'Pascal'</td></tr>
+     <tr><td class="num">  55.8</td><td class="left">'Vaily'</td></tr>
+     <tr><td class="num">  56.0</td><td class="left">'Slav'</td></tr>
+     <tr><td class="num">  56.1</td><td class="left">'Pascal'</td></tr>
      <tr><td class="num">  56.3</td><td class="left">'Cyphase'</td></tr>
-     <tr><td class="num">  57.1</td><td class="left">'Neophilus'</td></tr>
+     <tr><td class="num">  57.0</td><td class="left">'Neophilus'</td></tr>
      <tr><td class="num">  57.5</td><td class="left">'Turbogurk'</td></tr>
-     <tr><td class="num">  58.6</td><td class="left">'krazy62'</td></tr>
-     <tr><td class="num">  59.9</td><td class="left">'Adonica'</td></tr>
-     <tr><td class="num">  60.2</td><td class="left">'Kadu'</td></tr>
+     <tr><td class="num">  58.5</td><td class="left">'krazy62'</td></tr>
+     <tr><td class="num">  59.8</td><td class="left">'Adonica'</td></tr>
+     <tr><td class="num">  60.1</td><td class="left">'Kadu'</td></tr>
      <tr><td class="num">  61.7</td><td class="left">'Enrymather'</td></tr>
      <tr><td class="num">  62.9</td><td class="left">'Sopoforic'</td></tr>
-     <tr><td class="num">  63.5</td><td class="left">'jumbo'</td></tr>
-     <tr><td class="num">  64.2</td><td class="left">'Jan'</td></tr>
-     <tr><td class="num">  64.3</td><td class="left">'jdrexler'</td></tr>
+     <tr><td class="num">  63.4</td><td class="left">'jumbo'</td></tr>
+     <tr><td class="num">  64.1</td><td class="left">'Jan'</td></tr>
+     <tr><td class="num">  64.2</td><td class="left">'jdrexler'</td></tr>
      <tr><td class="num">  64.7</td><td class="left">'Asbel'</td></tr>
-     <tr><td class="num">  65.7</td><td class="left">'fjp'</td></tr>
+     <tr><td class="num">  65.6</td><td class="left">'fjp'</td></tr>
      <tr><td class="num">  66.1</td><td class="left">'tasker'</td></tr>
-     <tr><td class="num">  66.9</td><td class="left">'Meeve'</td></tr>
+     <tr><td class="num">  66.8</td><td class="left">'Meeve'</td></tr>
      <tr><td class="num">  67.8</td><td class="left">'Zdzislav'</td></tr>
-     <tr><td class="num">  68.5</td><td class="left">'ael'</td></tr>
-     <tr><td class="num">  69.2</td><td class="left">'Samuel'</td></tr>
+     <tr><td class="num">  68.4</td><td class="left">'ael'</td></tr>
+     <tr><td class="num">  69.0</td><td class="left">'Samuel'</td></tr>
      <tr><td class="num">  69.3</td><td class="left">'schmusi20'</td></tr>
-     <tr><td class="num">  69.4</td><td class="left">'Sparkey'</td></tr>
-     <tr><td class="num">  69.5</td><td class="left">'Alf'</td></tr>
+     <tr><td class="num">  69.3</td><td class="left">'Sparkey'</td></tr>
+     <tr><td class="num">  69.4</td><td class="left">'Alf'</td></tr>
      <tr><td class="num">  69.5</td><td class="left">'Fred_the_wise'</td></tr>
+     <tr><td class="num">  69.6</td><td class="left">'TerryOneill'</td></tr>
      <tr><td class="num">  70.2</td><td class="left">'GPCollin'</td></tr>
      <tr><td class="num">  70.9</td><td class="left">'Shaez'</td></tr>
-     <tr><td class="num">  71.4</td><td class="left">'Magnus and Susi'</td></tr>
+     <tr><td class="num">  71.3</td><td class="left">'Magnus and Susi'</td></tr>
      <tr><td class="num">  71.9</td><td class="left">'Zhura'</td></tr>
-     <tr><td class="num">  73.0</td><td class="left">'xmouse'</td></tr>
+     <tr><td class="num">  72.9</td><td class="left">'xmouse'</td></tr>
+     <tr><td class="num">  73.9</td><td class="left">'AQZ'</td></tr>
      <tr><td class="num">  74.0</td><td class="left">'Joona'</td></tr>
-     <tr><td class="num">  74.0</td><td class="left">'AQZ'</td></tr>
      <tr><td class="num">  75.6</td><td class="left">'tony'</td></tr>
+     <tr><td class="num">  75.7</td><td class="left">'Dvorhagen'</td></tr>
      <tr><td class="num">  75.7</td><td class="left">'crypto_rsa'</td></tr>
-     <tr><td class="num">  75.8</td><td class="left">'Dvorhagen'</td></tr>
      <tr><td class="num">  76.6</td><td class="left">'Eselchen'</td></tr>
      <tr><td class="num">  76.9</td><td class="left">'jojo'</td></tr>
      <tr><td class="num">  76.9</td><td class="left">'Nicol?s'</td></tr>
      <tr><td class="num">  76.9</td><td class="left">'AsuCaga'</td></tr>
      <tr><td class="num">  79.9</td><td class="left">'colonel crayon'</td></tr>
      <tr><td class="num">  80.7</td><td class="left">'Kroetchen'</td></tr>
-     <tr><td class="num">  81.4</td><td class="left">'Agares'</td></tr>
+     <tr><td class="num">  81.3</td><td class="left">'Agares'</td></tr>
      <tr><td class="num">  82.4</td><td class="left">'IIkka'</td></tr>
      <tr><td class="num">  86.2</td><td class="left">'Miel56'</td></tr>
      <tr><td class="num">  90.5</td><td class="left">'The red O'</td></tr>
-     <tr><td class="num">  91.0</td><td class="left">'Sequoyah'</td></tr>
+     <tr><td class="num">  90.9</td><td class="left">'Sequoyah'</td></tr>
      <tr><td class="num">  93.1</td><td class="left">'Michael'</td></tr>
   </table>

Modified: homepage/input/table-rat.html
===================================================================
--- homepage/input/table-rat.html	2010-09-04 11:13:49 UTC (rev 2116)
+++ homepage/input/table-rat.html	2010-09-05 21:27:29 UTC (rev 2117)
@@ -1,5 +1,5 @@
   <table>
-    <caption>$$Rating_Statistics$$ $$July$$ 2010</caption>
+    <caption>$$Rating_Statistics$$ $$August$$ 2010</caption>
     <colgroup><col width="80"><col width="80"><col width="220"></colgroup>
     <tr><th>$$count$$</th><th>$$average$$</th><th class="left">$$user$$</th></tr>    <tr><td class="num">1062</td><td class="num"> 5.06</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num">1056</td><td class="num"> 4.83</td><td class="left">'Taztunes'</td></tr>
@@ -8,7 +8,7 @@
     <tr><td class="num">900</td><td class="num"> 4.80</td><td class="left">'daydreamer'</td></tr>
     <tr><td class="num">876</td><td class="num"> 5.16</td><td class="left">'Another'</td></tr>
     <tr><td class="num">871</td><td class="num"> 5.09</td><td class="left">'Stupid'</td></tr>
-    <tr><td class="num">836</td><td class="num"> 5.93</td><td class="left">'Skywolf'</td></tr>
+    <tr><td class="num">862</td><td class="num"> 5.90</td><td class="left">'Skywolf'</td></tr>
     <tr><td class="num">722</td><td class="num"> 5.24</td><td class="left">'Mentist'</td></tr>
     <tr><td class="num">661</td><td class="num"> 4.79</td><td class="left">'U-Punkt'</td></tr>
     <tr><td class="num">656</td><td class="num"> 4.59</td><td class="left">'Zephyr'</td></tr>
@@ -32,9 +32,9 @@
     <tr><td class="num">200</td><td class="num"> 5.74</td><td class="left">'Malla'</td></tr>
     <tr><td class="num">187</td><td class="num"> 5.05</td><td class="left">'WP319'</td></tr>
     <tr><td class="num">178</td><td class="num"> 4.41</td><td class="left">'Jonyzz'</td></tr>
-    <tr><td class="num">156</td><td class="num"> 4.59</td><td class="left">'Medimaster'</td></tr>
+    <tr><td class="num">159</td><td class="num"> 4.58</td><td class="left">'Medimaster'</td></tr>
     <tr><td class="num">149</td><td class="num"> 5.48</td><td class="left">'Raoul'</td></tr>
-    <tr><td class="num">142</td><td class="num"> 4.94</td><td class="left">'Angolino'</td></tr>
+    <tr><td class="num">143</td><td class="num"> 4.95</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num">135</td><td class="num"> 4.13</td><td class="left">'Edgar_Flesk'</td></tr>
     <tr><td class="num">126</td><td class="num"> 5.79</td><td class="left">'Ghatotkacha'</td></tr>
     <tr><td class="num">124</td><td class="num"> 4.44</td><td class="left">'Sigma'</td></tr>
@@ -82,6 +82,7 @@
     <tr><td class="num">  4</td><td class="num"> 6.75</td><td class="left">'Agares'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 2.00</td><td class="left">'casmith_789'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 5.75</td><td class="left">'joseba'</td></tr>
+    <tr><td class="num">  4</td><td class="num"> 1.50</td><td class="left">'B.3'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 7.00</td><td class="left">'redsantz'</td></tr>
     <tr><td class="num">  4</td><td class="num">10.00</td><td class="left">'Kevin'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 1.00</td><td class="left">'Hans-HD'</td></tr>

Modified: homepage/input/table-solved.html
===================================================================
--- homepage/input/table-solved.html	2010-09-04 11:13:49 UTC (rev 2116)
+++ homepage/input/table-solved.html	2010-09-05 21:27:29 UTC (rev 2117)
@@ -1,5 +1,5 @@
   <table>
-    <caption>$$Solved_Level_Statistics$$ $$July$$ 2010</caption>
+    <caption>$$Solved_Level_Statistics$$ $$August$$ 2010</caption>
     <colgroup><col width="130"><col width="130"><col width="130"><col width="240"></colgroup>
     <tr><th>$$difficult$$</th><th>$$easy$$</th><th>$$total$$</th><th class="left">$$user$$</th></tr>
     <tr><td class="num">1045/1045</td><td class="num">189/189</td><td class="num">100.00%</td><td class="left">'ryujun'</td></tr>
@@ -30,9 +30,9 @@
     <tr><td class="num"> 917/1045</td><td class="num">106/189</td><td class="num"> 82.90%</td><td class="left">'Django'</td></tr>
     <tr><td class="num"> 866/1045</td><td class="num">151/189</td><td class="num"> 82.41%</td><td class="left">'Gloop'</td></tr>
     <tr><td class="num"> 867/1045</td><td class="num">145/189</td><td class="num"> 82.01%</td><td class="left">'Gorn'</td></tr>
+    <tr><td class="num"> 868/1045</td><td class="num">139/189</td><td class="num"> 81.60%</td><td class="left">'Skywolf'</td></tr>
     <tr><td class="num"> 849/1045</td><td class="num">151/189</td><td class="num"> 81.04%</td><td class="left">'WP319'</td></tr>
     <tr><td class="num"> 867/1045</td><td class="num">124/189</td><td class="num"> 80.31%</td><td class="left">'Lukas'</td></tr>
-    <tr><td class="num"> 851/1045</td><td class="num">137/189</td><td class="num"> 80.06%</td><td class="left">'Skywolf'</td></tr>
     <tr><td class="num"> 854/1045</td><td class="num">131/189</td><td class="num"> 79.82%</td><td class="left">'shoki'</td></tr>
     <tr><td class="num"> 874/1045</td><td class="num">103/189</td><td class="num"> 79.17%</td><td class="left">'Melanie'</td></tr>
     <tr><td class="num"> 898/1045</td><td class="num"> 54/189</td><td class="num"> 77.15%</td><td class="left">'evane'</td></tr>
@@ -43,7 +43,7 @@
     <tr><td class="num"> 812/1045</td><td class="num">114/189</td><td class="num"> 75.04%</td><td class="left">'brynn'</td></tr>
     <tr><td class="num"> 794/1045</td><td class="num">126/189</td><td class="num"> 74.55%</td><td class="left">'U-Punkt'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num">132/189</td><td class="num"> 74.07%</td><td class="left">'AlephD'</td></tr>
-    <tr><td class="num"> 764/1045</td><td class="num">128/189</td><td class="num"> 72.29%</td><td class="left">'Medimaster'</td></tr>
+    <tr><td class="num"> 775/1045</td><td class="num">133/189</td><td class="num"> 73.58%</td><td class="left">'Medimaster'</td></tr>
     <tr><td class="num"> 739/1045</td><td class="num">131/189</td><td class="num"> 70.50%</td><td class="left">'ABS'</td></tr>
     <tr><td class="num"> 761/1045</td><td class="num">103/189</td><td class="num"> 70.02%</td><td class="left">'Klaus'</td></tr>
     <tr><td class="num"> 719/1045</td><td class="num">138/189</td><td class="num"> 69.45%</td><td class="left">'Alexandros'</td></tr>
@@ -65,9 +65,9 @@
     <tr><td class="num"> 665/1045</td><td class="num"> 64/189</td><td class="num"> 59.08%</td><td class="left">'alain'</td></tr>
     <tr><td class="num"> 643/1045</td><td class="num"> 83/189</td><td class="num"> 58.83%</td><td class="left">'Great Scott'</td></tr>
     <tr><td class="num"> 714/1045</td><td class="num">  0/189</td><td class="num"> 57.86%</td><td class="left">'Gottseinsohn'</td></tr>
+    <tr><td class="num"> 605/1045</td><td class="num"> 91/189</td><td class="num"> 56.40%</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num"> 620/1045</td><td class="num"> 72/189</td><td class="num"> 56.08%</td><td class="left">'Breezy'</td></tr>
     <tr><td class="num"> 636/1045</td><td class="num"> 55/189</td><td class="num"> 56.00%</td><td class="left">'fabian'</td></tr>
-    <tr><td class="num"> 599/1045</td><td class="num"> 91/189</td><td class="num"> 55.92%</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num"> 575/1045</td><td class="num">115/189</td><td class="num"> 55.92%</td><td class="left">'Mark P.'</td></tr>
     <tr><td class="num"> 647/1045</td><td class="num"> 38/189</td><td class="num"> 55.51%</td><td class="left">'Valkyrie2'</td></tr>
     <tr><td class="num"> 599/1045</td><td class="num"> 80/189</td><td class="num"> 55.02%</td><td class="left">'serpent'</td></tr>
@@ -78,9 +78,9 @@
     <tr><td class="num"> 533/1045</td><td class="num"> 82/189</td><td class="num"> 49.84%</td><td class="left">'Wuzzy'</td></tr>
     <tr><td class="num"> 506/1045</td><td class="num">108/189</td><td class="num"> 49.76%</td><td class="left">'Agnieszka'</td></tr>
     <tr><td class="num"> 613/1045</td><td class="num">  0/189</td><td class="num"> 49.68%</td><td class="left">'Little_Mole'</td></tr>
+    <tr><td class="num"> 507/1045</td><td class="num"> 90/189</td><td class="num"> 48.38%</td><td class="left">'l'ane'</td></tr>
     <tr><td class="num"> 500/1045</td><td class="num"> 92/189</td><td class="num"> 47.97%</td><td class="left">'Kosby'</td></tr>
     <tr><td class="num"> 522/1045</td><td class="num"> 66/189</td><td class="num"> 47.65%</td><td class="left">'Timo'</td></tr>
-    <tr><td class="num"> 496/1045</td><td class="num"> 89/189</td><td class="num"> 47.41%</td><td class="left">'l'ane'</td></tr>
     <tr><td class="num"> 478/1045</td><td class="num">101/189</td><td class="num"> 46.92%</td><td class="left">'Austin'</td></tr>
     <tr><td class="num"> 513/1045</td><td class="num"> 56/189</td><td class="num"> 46.11%</td><td class="left">'Mecki'</td></tr>
     <tr><td class="num"> 504/1045</td><td class="num"> 62/189</td><td class="num"> 45.87%</td><td class="left">'Hans-HD'</td></tr>
@@ -97,6 +97,7 @@
     <tr><td class="num"> 503/1045</td><td class="num">  7/189</td><td class="num"> 41.33%</td><td class="left">'Edgar_Flesk'</td></tr>
     <tr><td class="num"> 440/1045</td><td class="num"> 50/189</td><td class="num"> 39.71%</td><td class="left">'ged'</td></tr>
     <tr><td class="num"> 397/1045</td><td class="num"> 93/189</td><td class="num"> 39.71%</td><td class="left">'Hairball'</td></tr>
+    <tr><td class="num"> 415/1045</td><td class="num"> 71/189</td><td class="num"> 39.38%</td><td class="left">'B.3'</td></tr>
     <tr><td class="num"> 438/1045</td><td class="num">  3/189</td><td class="num"> 35.74%</td><td class="left">'oblo'</td></tr>
     <tr><td class="num"> 396/1045</td><td class="num"> 43/189</td><td class="num"> 35.58%</td><td class="left">'Jeffrey S'</td></tr>
     <tr><td class="num"> 359/1045</td><td class="num"> 74/189</td><td class="num"> 35.09%</td><td class="left">'Crystalicum'</td></tr>
@@ -128,6 +129,7 @@
     <tr><td class="num"> 276/1045</td><td class="num"> 15/189</td><td class="num"> 23.58%</td><td class="left">'Thomas'</td></tr>
     <tr><td class="num"> 250/1045</td><td class="num"> 40/189</td><td class="num"> 23.50%</td><td class="left">'Tomson'</td></tr>
     <tr><td class="num"> 258/1045</td><td class="num"> 27/189</td><td class="num"> 23.10%</td><td class="left">'un_guru'</td></tr>
+    <tr><td class="num"> 264/1045</td><td class="num"> 20/189</td><td class="num"> 23.01%</td><td class="left">'alfix'</td></tr>
     <tr><td class="num"> 245/1045</td><td class="num"> 36/189</td><td class="num"> 22.77%</td><td class="left">'B-man'</td></tr>
     <tr><td class="num"> 215/1045</td><td class="num"> 54/189</td><td class="num"> 21.80%</td><td class="left">'aranelv'</td></tr>
     <tr><td class="num"> 259/1045</td><td class="num">  7/189</td><td class="num"> 21.56%</td><td class="left">'geembo_90'</td></tr>
@@ -137,7 +139,6 @@
     <tr><td class="num"> 208/1045</td><td class="num"> 33/189</td><td class="num"> 19.53%</td><td class="left">'Uli'</td></tr>
     <tr><td class="num"> 203/1045</td><td class="num"> 34/189</td><td class="num"> 19.21%</td><td class="left">'ntaeijr'</td></tr>
     <tr><td class="num"> 214/1045</td><td class="num"> 19/189</td><td class="num"> 18.88%</td><td class="left">'Adonica'</td></tr>
-    <tr><td class="num"> 206/1045</td><td class="num"> 20/189</td><td class="num"> 18.31%</td><td class="left">'alfix'</td></tr>
     <tr><td class="num"> 188/1045</td><td class="num"> 33/189</td><td class="num"> 17.91%</td><td class="left">'Pascal'</td></tr>
     <tr><td class="num"> 215/1045</td><td class="num">  6/189</td><td class="num"> 17.91%</td><td class="left">'Paulus'</td></tr>
     <tr><td class="num"> 209/1045</td><td class="num"> 11/189</td><td class="num"> 17.83%</td><td class="left">'GiannuzzITA'</td></tr>
@@ -164,6 +165,7 @@
     <tr><td class="num"> 124/1045</td><td class="num"> 15/189</td><td class="num"> 11.26%</td><td class="left">'Magnus and Susi'</td></tr>
     <tr><td class="num"> 123/1045</td><td class="num"> 13/189</td><td class="num"> 11.02%</td><td class="left">'tasker'</td></tr>
     <tr><td class="num"> 131/1045</td><td class="num">  1/189</td><td class="num"> 10.70%</td><td class="left">'Asbel'</td></tr>
+    <tr><td class="num"> 116/1045</td><td class="num"> 12/189</td><td class="num"> 10.37%</td><td class="left">'TerryOneill'</td></tr>
     <tr><td class="num"> 105/1045</td><td class="num"> 22/189</td><td class="num"> 10.29%</td><td class="left">'Neophilus'</td></tr>
     <tr><td class="num"> 106/1045</td><td class="num"> 14/189</td><td class="num">  9.72%</td><td class="left">'Shaez'</td></tr>
     <tr><td class="num">  98/1045</td><td class="num"> 19/189</td><td class="num">  9.48%</td><td class="left">'tony'</td></tr>

Modified: homepage/input/table-wr.html
===================================================================
--- homepage/input/table-wr.html	2010-09-04 11:13:49 UTC (rev 2116)
+++ homepage/input/table-wr.html	2010-09-05 21:27:29 UTC (rev 2117)
@@ -1,25 +1,26 @@
   <table>
-    <caption>$$Worldrecord_Statistics$$ $$July$$ 2010</caption>
+    <caption>$$Worldrecord_Statistics$$ $$August$$ 2010</caption>
     <colgroup><col width="80"><col width="80"><col width="470"></colgroup>
     <tr><th>$$total$$</th><th>$$shared$$</th><th class="left">$$user$$</th></tr>
-    <tr><td class="num">736</td><td class="num">309</td><td class="left">'Medimaster'</td></tr>
-    <tr><td class="num">621</td><td class="num">260</td><td class="left">'Moneymaker'</td></tr>
-    <tr><td class="num">149</td><td class="num">139</td><td class="left">'l'ane'</td></tr>
-    <tr><td class="num"> 77</td><td class="num"> 60</td><td class="left">'daydreamer'</td></tr>
-    <tr><td class="num"> 70</td><td class="num"> 40</td><td class="left">'Stupid'</td></tr>
-    <tr><td class="num"> 69</td><td class="num"> 69</td><td class="left">'Crystalicum'</td></tr>
+    <tr><td class="num">765</td><td class="num">323</td><td class="left">'Medimaster'</td></tr>
+    <tr><td class="num">595</td><td class="num">260</td><td class="left">'Moneymaker'</td></tr>
+    <tr><td class="num">162</td><td class="num">151</td><td class="left">'l'ane'</td></tr>
+    <tr><td class="num"> 76</td><td class="num"> 60</td><td class="left">'daydreamer'</td></tr>
+    <tr><td class="num"> 69</td><td class="num"> 39</td><td class="left">'Stupid'</td></tr>
+    <tr><td class="num"> 68</td><td class="num"> 68</td><td class="left">'Crystalicum'</td></tr>
     <tr><td class="num"> 55</td><td class="num"> 50</td><td class="left">'dev0'</td></tr>
-    <tr><td class="num"> 53</td><td class="num"> 48</td><td class="left">'Mentist'</td></tr>
-    <tr><td class="num"> 44</td><td class="num"> 38</td><td class="left">'Angolino'</td></tr>
+    <tr><td class="num"> 52</td><td class="num"> 47</td><td class="left">'Mentist'</td></tr>
+    <tr><td class="num"> 51</td><td class="num"> 46</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num"> 38</td><td class="num"> 36</td><td class="left">'Johannes'</td></tr>
-    <tr><td class="num"> 36</td><td class="num"> 33</td><td class="left">'Daisy'</td></tr>
-    <tr><td class="num"> 30</td><td class="num"> 23</td><td class="left">'Emmanuel'</td></tr>
+    <tr><td class="num"> 37</td><td class="num"> 33</td><td class="left">'Daisy'</td></tr>
+    <tr><td class="num"> 27</td><td class="num"> 23</td><td class="left">'Emmanuel'</td></tr>
     <tr><td class="num"> 27</td><td class="num"> 27</td><td class="left">'H-J.Epting'</td></tr>
-    <tr><td class="num"> 24</td><td class="num"> 24</td><td class="left">'Alexandros' + 'Another'</td></tr>
+    <tr><td class="num"> 25</td><td class="num"> 25</td><td class="left">'Another'</td></tr>
+    <tr><td class="num"> 24</td><td class="num"> 24</td><td class="left">'Alexandros'</td></tr>
+    <tr><td class="num"> 23</td><td class="num"> 21</td><td class="left">'Skywolf'</td></tr>
     <tr><td class="num"> 22</td><td class="num"> 22</td><td class="left">'Ghatotkacha'</td></tr>
     <tr><td class="num"> 21</td><td class="num"> 14</td><td class="left">'Malla'</td></tr>
     <tr><td class="num"> 19</td><td class="num"> 17</td><td class="left">'Zekobah'</td></tr>
-    <tr><td class="num"> 19</td><td class="num"> 19</td><td class="left">'Skywolf'</td></tr>
     <tr><td class="num"> 16</td><td class="num"> 16</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num"> 15</td><td class="num"> 14</td><td class="left">'Django'</td></tr>
     <tr><td class="num"> 15</td><td class="num"> 15</td><td class="left">'joseba' + 'Great Scott'</td></tr>
@@ -30,13 +31,13 @@
     <tr><td class="num"> 11</td><td class="num"> 10</td><td class="left">'Duffy'</td></tr>
     <tr><td class="num"> 11</td><td class="num"> 11</td><td class="left">'Ludmian'</td></tr>
     <tr><td class="num"> 10</td><td class="num">  7</td><td class="left">'Ronald'</td></tr>
-    <tr><td class="num">  8</td><td class="num">  8</td><td class="left">'HuB34'</td></tr>
+    <tr><td class="num">  8</td><td class="num">  8</td><td class="left">'alfix' + 'HuB34'</td></tr>
     <tr><td class="num">  7</td><td class="num">  1</td><td class="left">'DINA'</td></tr>
     <tr><td class="num">  7</td><td class="num">  7</td><td class="left">'casmith_789'</td></tr>
     <tr><td class="num">  6</td><td class="num">  5</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-    <tr><td class="num">  6</td><td class="num">  6</td><td class="left">'Chocolate Zero' + 'alfix' + 'Dime'</td></tr>
-    <tr><td class="num">  5</td><td class="num">  3</td><td class="left">'Breezy'</td></tr>
+    <tr><td class="num">  6</td><td class="num">  6</td><td class="left">'Chocolate Zero' + 'Dime'</td></tr>
     <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Gloop' + 'fabian' + 'dpl' + 'Edgar_Flesk'</td></tr>
+    <tr><td class="num">  4</td><td class="num">  2</td><td class="left">'Breezy'</td></tr>
     <tr><td class="num">  4</td><td class="num">  4</td><td class="left">'J3FF' + 'mecke' + 'Guglielmo' + 'U-Punkt' + 'Freshman' + 'Thomas'</td></tr>
     <tr><td class="num">  3</td><td class="num">  2</td><td class="left">'Hairball'</td></tr>
     <tr><td class="num">  3</td><td class="num">  3</td><td class="left">'ABS' + 'Chris' + 'Taztunes' + 'bojster' + 'Raoul' + 'Tobias' + 'Ralf' + 'Lukas'</td></tr>
@@ -44,5 +45,5 @@
     <tr><td class="num">  2</td><td class="num">  2</td><td class="left">'ReasonAnce' + 'Cyphase' + 'hendrik' + 'GiannuzzITA' + 'Sopoforic' + 'alfred69' + 'GPCollin' + 'Sigma' + 'Tiza' + 'Sim_Ed' + 'Nicol?s' + 'Andy' + 'para_doks' + 'Austin' + 'Snaily' + 'Wuzzy' + 'serpent'</td></tr>
     <tr><td class="num">  1</td><td class="num">  0</td><td class="left">'Feynman' + 'alain' + 'colonel crayon' + 'Gorn' + 'Nat'</td></tr>
     <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'Agares' + 'mrduke' + 'Slav' + 'Andreas' + 'Drotten' + 'Samuel' + 'hdwow' + 'Asbel' + 'B-man' + 'cuoha' + 'Vaily' + 'Antonio EE' + 'Tiger' + 'geembo_90' + 'Zak' + 'niebie' + 'AlephD' + 'tjRaven' + 'Mark P.' + 'Neophilus' + 'oblo' + 'Bent' + 'Craven' + 'Jinajon' + 'Ingo' + 'JuSt' + 'Timo'</td></tr>
-    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'tasker' + 'Miel56' + 'Alf' + 'Klaus' + 'Turbogurk' + 'Gottseinsohn' + 'Eselchen' + 'Ale' + 'IntKecsk' + 'brynn' + 'purplerainbow' + 'Alexander J' + 'Adonica' + 'Joona' + 'Kosby' + 'schmusi20' + 'WP319' + 'Shaez' + 'erich' + 'Uli' + 'Alex' + 'Pascal' + 'jdcampo' + 'Kroetchen' + 'Harry Lim' + 'Sequoyah' + 'AkRa' + 'tony' + 'NorthForty' + 'Nanor22' + 'Jeffrey S' + 'Marc-Hendrik' + 'Kadu' + 'jojo' + 'WesleyCrusher' + 'fjp' + 'oxyd4ever' + 'Archcorenth' + 'mhatta' + 'Paulus' + 'Dvorhagen' + 'redsantz' + 'ThingFish' + 'Liam Sheehan' + 'Agnieszka' + 'AQZ' + 'aranelv' + 'jumbo' + 'Zhura' + 'ntaeijr' + 'ael' + 'biotopa' + 'Daniel' + 'Sandra' + 'Magnus and Susi' + 'Kevin' + 'jdrexler' + 'xmouse' + 'Vinksu' + 'Valkyrie2' + 'Fred_the_wise' + 'Jan' + 'Little_Mole' + 'crypto_rsa' + 'Vlad' + 'Momcat' + 'Tomson' + 'Mecki' + 'The red O' + 'gringer' + 'IIkka' + 'Nfol' + 'shoki' + 'Zdzislav' + 'Enrymather' + 'evane' + 'r
 ima' + 'MicWa' + 'AsuCaga' + 'Jonyzz' + 'Rugby4ever' + 'Meeve' + 'Hans-HD' + 'un_guru' + 'krazy62' + 'Sparkey' + 'Holger' + 'ais523' + 'Ingo_K' + 'Ant' + 'Melanie' + 'IChrisI' + 'Markus' + 'Michael' + 'Tarim'</td></tr>
+    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'tasker' + 'Miel56' + 'Alf' + 'Klaus' + 'Turbogurk' + 'Gottseinsohn' + 'Eselchen' + 'Ale' + 'IntKecsk' + 'brynn' + 'purplerainbow' + 'Alexander J' + 'Adonica' + 'Joona' + 'Kosby' + 'schmusi20' + 'WP319' + 'Shaez' + 'erich' + 'Uli' + 'Alex' + 'Pascal' + 'jdcampo' + 'Kroetchen' + 'Harry Lim' + 'Sequoyah' + 'AkRa' + 'tony' + 'NorthForty' + 'Nanor22' + 'Jeffrey S' + 'Marc-Hendrik' + 'Kadu' + 'B.3' + 'jojo' + 'WesleyCrusher' + 'fjp' + 'oxyd4ever' + 'Archcorenth' + 'mhatta' + 'Paulus' + 'Dvorhagen' + 'redsantz' + 'ThingFish' + 'Liam Sheehan' + 'Agnieszka' + 'AQZ' + 'aranelv' + 'jumbo' + 'Zhura' + 'ntaeijr' + 'ael' + 'biotopa' + 'Daniel' + 'Sandra' + 'Magnus and Susi' + 'Kevin' + 'jdrexler' + 'xmouse' + 'Vinksu' + 'Valkyrie2' + 'Fred_the_wise' + 'Jan' + 'Little_Mole' + 'crypto_rsa' + 'Vlad' + 'Momcat' + 'Tomson' + 'Mecki' + 'The red O' + 'gringer' + 'IIkka' + 'Nfol' + 'shoki' + 'TerryOneill' + 'Zdzislav' + 'En
 rymather' + 'evane' + 'rima' + 'MicWa' + 'AsuCaga' + 'Jonyzz' + 'Rugby4ever' + 'Meeve' + 'Hans-HD' + 'un_guru' + 'krazy62' + 'Sparkey' + 'Holger' + 'ais523' + 'Ingo_K' + 'Ant' + 'Melanie' + 'IChrisI' + 'Markus' + 'Michael' + 'Tarim'</td></tr>
   </table>

Modified: homepage/input/userlist.html
===================================================================
--- homepage/input/userlist.html	2010-09-04 11:13:49 UTC (rev 2116)
+++ homepage/input/userlist.html	2010-09-05 21:27:29 UTC (rev 2117)
@@ -29,6 +29,7 @@
     <li>Asbel</li>
     <li>AsuCaga</li>
     <li>Austin</li>
+    <li>B.3</li>
     <li>Bent</li>
     <li>B-Huff</li>
     <li>biotopa</li>
@@ -177,6 +178,7 @@
     <li>Tarim</li>
     <li>tasker</li>
     <li>Taztunes</li>
+    <li>TerryOneill</li>
     <li>The red O</li>
     <li>ThingFish</li>
     <li>Thomas</li>



From ral at mail.berlios.de  Tue Sep  7 13:36:35 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Tue,  7 Sep 2010 13:36:35 +0200
Subject: [Enigma-game-svn] r2118 - trunk/src
Message-ID: <20100907113635.33354480E7F@sheep.berlios.de>

Author: ral
Date: 2010-09-07 13:36:34 +0200 (Tue, 07 Sep 2010)
New Revision: 2118

Modified:
   trunk/src/player.cc
Log:
let subsequent actors drop item when first actor is dead

Modified: trunk/src/player.cc
===================================================================
--- trunk/src/player.cc	2010-09-05 21:27:29 UTC (rev 2117)
+++ trunk/src/player.cc	2010-09-07 11:36:34 UTC (rev 2118)
@@ -607,13 +607,17 @@
 
     if (inv.size() > 0) {
         Item *it = inv.get_item (0);
-        Actor *ac = 0;
+        Actor *ac = NULL;
         GridPos p;
         bool can_drop_item = false;
-        if (!players[icurrent_player].actors.empty()) {
-            ac = players[icurrent_player].actors[0];
-            p = GridPos(ac->get_pos());
-            can_drop_item = ac->can_drop_items();
+        std::vector<Actor *>::iterator itr;
+        for (itr = players[icurrent_player].actors.begin();
+                itr != players[icurrent_player].actors.end() && ac == NULL ; itr++) {
+            if (!(*itr)->is_dead()) {
+                ac = *itr;
+                p = GridPos(ac->get_pos());
+                can_drop_item = ac->can_drop_items();
+            }
         }
 
         switch (it->activate(ac, p)) {



From a_abraham at mail.berlios.de  Tue Sep  7 13:38:02 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Tue,  7 Sep 2010 13:38:02 +0200
Subject: [Enigma-game-svn] r2119 - trunk/doc/reference
Message-ID: <20100907113802.DA2F4480E7F@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-07 13:38:02 +0200 (Tue, 07 Sep 2010)
New Revision: 2119

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Fixed references.


Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2010-09-07 11:36:34 UTC (rev 2118)
+++ trunk/doc/reference/enigma-ref.texi	2010-09-07 11:38:02 UTC (rev 2119)
@@ -1872,7 +1872,7 @@
 @item @b{title}, @i{required}
 The English title of the level. The string can contain arbitrary characters
 that are displayable by Enigma's font and XML conformant. Just in case of
- at ref{Multilevel files} a trailing hash sign has a special meaning. Anyway please
+ at ref{Multilevel Files} a trailing hash sign has a special meaning. Anyway please
 make sure that the title is not too long, since Enigma will use it on the level
 selection menu. Translations of the title can be provided in the
 @ref{Internationalization (i18n)} sections.
@@ -23445,7 +23445,7 @@
 @end example
 A more elaborate example can be found in @ref{Orthogonal Autotiling}.
 
- at item @b{Caveats:}
+ at item @b{Caveats:}@anchor{Caveats}
 Do not use the hash sign @samp{#} as suffix character for key length 2 and
 above autotiled keys. A key @code{"A#"} could result in an unexpected @samp{%%}
 substitution in the name attribute. A name @code{"sample%%"} would be



From a_abraham at mail.berlios.de  Tue Sep  7 21:15:21 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Tue,  7 Sep 2010 21:15:21 +0200
Subject: [Enigma-game-svn] r2120 - trunk/data/levels/enigma_sokoban
Message-ID: <20100907191521.D3B06480E89@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-07 21:15:21 +0200 (Tue, 07 Sep 2010)
New Revision: 2120

Modified:
   trunk/data/levels/enigma_sokoban/xsok_intro.xml
Log:
Removed unmatched quote.


Modified: trunk/data/levels/enigma_sokoban/xsok_intro.xml
===================================================================
--- trunk/data/levels/enigma_sokoban/xsok_intro.xml	2010-09-07 11:38:02 UTC (rev 2119)
+++ trunk/data/levels/enigma_sokoban/xsok_intro.xml	2010-09-07 19:15:21 UTC (rev 2120)
@@ -40,7 +40,7 @@
         <el:english el:translate="false"/>
       </el:string>
       <el:string el:key="text1">
-        <el:english el:translate="false">Welcome to the world of Sokoban. The following levels were converted from various sokoban level packages with the friendly permission of their authors. All have been play-tested, so - whether you believe or not - they are always solvable."</el:english>
+        <el:english el:translate="false">Welcome to the world of Sokoban. The following levels were converted from various sokoban level packages with the friendly permission of their authors. All have been play-tested, so - whether you believe or not - they are always solvable.</el:english>
       </el:string> 
     </el:i18n>
   </el:protected>



From ral at mail.berlios.de  Tue Sep  7 23:41:42 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Tue,  7 Sep 2010 23:41:42 +0200
Subject: [Enigma-game-svn] r2121 - in trunk: data/schemas src/stones
Message-ID: <20100907214142.E6C69480FD4@sheep.berlios.de>

Author: ral
Date: 2010-09-07 23:41:42 +0200 (Tue, 07 Sep 2010)
New Revision: 2121

Modified:
   trunk/data/schemas/objects.xml
   trunk/src/stones/OxydStone.cc
Log:
add opal feature to oxyd stones

- usage of selection attribute similar to st_surprise
- refman doc still missing

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2010-09-07 19:15:21 UTC (rev 2120)
+++ trunk/data/schemas/objects.xml	2010-09-07 21:41:42 UTC (rev 2121)
@@ -1939,11 +1939,25 @@
       <msg name="on"/>
       <msg name="signal"/>
     </object>
+    <object name="st_oneway" states="4">
+      <attr name="color"/>
+      <attr name="orientation"/>
+      <msg name="flip"/>
+      <msg name="orientate"/>
+      <msg name="signal"/>
+    </object>
+    <object name="st_oneway_black">
+      <attr name="color" value="0"/>
+    </object>
+    <object name="st_oneway_white">
+      <attr name="color" value="1"/>
+    </object>
     <object name="st_oxyd">
       <attr name="flavor"/>
       <attr name="noshuffle"/>
       <attr name="oxydcolor"/>
       <attr name="static"/>
+      <attr name="selection"/>
       <msg name="closeall"/>
       <msg name="peepall"/>
       <msg name="shuffle"/>
@@ -1954,19 +1968,6 @@
       <msg name="close"/>
       <msg name="signal"/>
     </object>
-    <object name="st_oneway" states="4">
-      <attr name="color"/>
-      <attr name="orientation"/>
-      <msg name="flip"/>
-      <msg name="orientate"/>
-      <msg name="signal"/>
-    </object>
-    <object name="st_oneway_black">
-      <attr name="color" value="0"/>
-    </object>
-    <object name="st_oneway_white">
-      <attr name="color" value="1"/>
-    </object>
     <object name="st_oxyd_a">
       <attr name="flavor" value="a"/>
     </object>
@@ -1979,6 +1980,9 @@
     <object name="st_oxyd_d">
       <attr name="flavor" value="d"/>
     </object>
+    <object name="st_oxyd_e">
+      <attr name="flavor" value="e"/>
+    </object>
     <object name="st_panel" super="st_clusterstone"/>
     <object name="st_panel_w">
       <attr name="connections" value="w"/>

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2010-09-07 19:15:21 UTC (rev 2120)
+++ trunk/src/stones/OxydStone.cc	2010-09-07 21:41:42 UTC (rev 2121)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2007,2008 Ronald Lamprecht
+ * Copyright (C) 2007,2008,2009,2010 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -20,6 +20,7 @@
 
 #include "stones/OxydStone.hh"
 #include "errors.hh"
+#include "lua.hh"
 #include "main.hh"
 #include "server.hh"
 #include "world.hh"
@@ -972,12 +973,12 @@
         else if (state == OPENING)
             set_iState(OPEN_SINGLE);
         else if (state == OPEN_PAIR)     // end of opening anim for second oxyd in a pair
-            set_iState(OPEN_PAIR);       // set the right model
+            set_iState(OPEN_PAIR);        // set the right model
         else if (state == OPEN_SINGLE)   // pseudo animation
             set_iState(CLOSING);
     }
     
-    void OxydStone::on_creation (GridPos p) {
+    void OxydStone::on_creation(GridPos p) {
         setClosedModel(true);
         activatePhoto();
         Stone::on_creation(p);
@@ -1059,6 +1060,7 @@
                 if (can_open) {
                     pairCandidate->set_iState(OPEN_PAIR);
                     set_iState(OPEN_PAIR);
+                    setAttr("$pairid", pairCandidate->getId());
                 } else {
                     pairCandidate->set_iState(CLOSING);
                     set_iState(OPENING);
@@ -1115,7 +1117,6 @@
                     didShuffle = true;
                 }
                 setClosedModel();
-//                set_model(string("st_oxyd")+flavor);
                 break;
         
             case OPEN_SINGLE:
@@ -1170,10 +1171,35 @@
                 }
                 break;
         }
-        // perform action
-        if (((int)getAttr("oxydcolor") > AUTO && oldExtState != externalState() && (oldExtState != 1 || externalState() != 2)) // avoid second action of paired oxyd that changes from single to pair open state
-                || didShuffle || didQuake)
+        // perform action and transformations
+        if (((int)getAttr("oxydcolor") > AUTO && oldExtState != externalState() && oldExtState == 0) // just one action on pair opening
+                || didShuffle || didQuake) {
             performAction(externalState() != 0);
+        } else if ((int)getAttr("oxydcolor") > AUTO && oldExtState == 2 && oldExtState == externalState()) {
+            // transformations after pair opening finished
+            if (Value v = getAttr("selection")) {
+                TokenList tl = v;
+                ASSERT(tl.size() > 0 && tl.size() <= 2 , XLevelRuntime,"Oxyd stone with illegal 'selection' attribute");
+                sound_event("stonetransform");
+                std::string firstname = tl.front().to_string();
+                std::string lastname = tl.back().to_string();
+                GridObject *pairedoxyd = dynamic_cast<GridObject *>(getObject(getAttr("$pairid")));
+                if (firstname.find('=') == 0) {
+                    if (lua::CallFunc(lua::LevelState(), "enigma.settile", firstname.substr(1), pairedoxyd)) {
+                        throw XLevelRuntime(std::string("oxyd stone set tile failed:\n")+lua::LastError(lua::LevelState()));
+                    }
+                } else {
+                    ReplaceStone(pairedoxyd->get_pos(), MakeStone(firstname.c_str()));
+                }
+                if (lastname.find('=') == 0) {
+                    if (lua::CallFunc(lua::LevelState(), "enigma.settile", lastname.substr(1), this)) {
+                        throw XLevelRuntime(std::string("oxyd stone set tile failed:\n")+lua::LastError(lua::LevelState()));
+                    }
+                } else {
+                    ReplaceStone(get_pos(), MakeStone(lastname.c_str()));
+                }
+            }
+        }
     }
     
 



From ral at mail.berlios.de  Wed Sep  8 22:55:22 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Wed,  8 Sep 2010 22:55:22 +0200
Subject: [Enigma-game-svn] r2122 - trunk/doc/reference
Message-ID: <20100908205523.4C0AE481062@sheep.berlios.de>

Author: ral
Date: 2010-09-08 22:55:22 +0200 (Wed, 08 Sep 2010)
New Revision: 2122

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
refman oxyd opal feature, empty polist

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2010-09-07 21:41:42 UTC (rev 2121)
+++ trunk/doc/reference/enigma-ref.texi	2010-09-08 20:55:22 UTC (rev 2122)
@@ -6729,10 +6729,12 @@
 created will never change or get invalid. They are true values themselves. Thus
 they are the containers of choice for longterm storage.
 
-You can easily transform a group into a position list by the @ref{Positions Repository}
-singleton by the simple expression @samp{po(group)}. And you can retrieve all
- at ref{Object}s of a basic kind located along a position list path by
- at ref{Functions} like @samp{st(polist)}, @samp{it(polist)} and @samp{fl(polist)}.
+You can easily create a position list by @ref{PositionList Conversion}, which
+is featured by the @ref{Positions Repository} singleton and allows you to 
+transform a group into a position list by  by the simple expression 
+ at samp{po(group)}. On the other hand you can retrieve all @ref{Object}s of a 
+basic kind located along a position list path by @ref{Functions} like 
+ at samp{st(polist)}, @samp{it(polist)} and @samp{fl(polist)}.
 
 As a unique floor object is guaranteed to be on every grid position, you can
 convert a given list of unique grid positions to a group of floors without
@@ -7025,6 +7027,7 @@
 @example
 @var{polist} = @i{po}(@var{group})
 @var{polist} = @i{po}(@{@i{po}(@var{3}, @var{7}), @i{po}(@var{2}, @var{6})@})
+ at var{polist} = @i{po}(@{@})  -- an empty position list
 @end example
 @end table
 
@@ -17732,6 +17735,40 @@
 An oxyd that is swapped in or out of a laser beam will act on the light change
 with proper actions.
 
+Every opened oxyd causes an action call. The action call for an opened oxyd pair
+occurs just once when the second oxyd starts opening, whereas the bold and quake
+oxyd will perform the action after completion of their task and animation. Thus
+you are allowed to kill quake and bold oxyds within their action as long as you
+properly set @ref{safeaction} to @code{true}.
+
+For a replacement of an opened pair of oxyd stones, what can be seen in the
+"opal" levels, the action call is not directly suitable, because the second
+oxyd did not yet show its matching color. Furtheron you would have to keep track
+of the oxyds to find the matching partner for the second oxyd. For this reason
+you can directly declare replacements that should be set when an oxyd pair
+is opened. The replacement takes place as soon as the second oxyd finishes the
+opening animation. Like the @ref{st_surprise} the oxyd allows you to set
+the @samp{selection} attribute with tokens of strings. Every string needs either
+to be an @ref{Object Kind} or a tile key prefixed by an equal sign @samp{=}.
+
+ at example
+ti["n"] = @{"st_nil"@}
+ti["g"] = @{"st_granite"@}
+ti["s"] = @{"st_oxyd_e", selection=@{"=n", "=g"@}@}
+ at end example
+
+The first token defines the replacement for the oxyd stone that has been opened
+first, the last token defines the replacement for the matching oxyd stone that
+has been opened afterwards. In case of a single token both oxyd stones are being
+replaced by equivalent stones.
+
+The tile declarations referenced by a key may even contain objects besides
+stone. But you should make rare and proper usage of this feature.
+
+The oxyd stone is killed by any replacement stone set to the grid position.
+If your selection does not resolve to a stone you may need to add @code{"st_nil"}
+to the replacement tile declaration.
+
 @table @asis
 @item @b{Attributes:}
 
@@ -17762,12 +17799,13 @@
 @tab @image{images/st_oxyd_colordots_c2, 10mm}@tab @code{OXYD_ORANGE}
 @tab @image{images/st_oxyd_colordots_c3, 10mm}@tab @code{OXYD_PINE}
 @tab @image{images/st_oxyd_colordots_c4, 10mm}@tab @code{OXYD_BROWN}
- at item @image{images/st_oxyd_colordots_d3, 10mm}@tab @code{OXYD_QUAKE}
- at tab @image{images/st_oxyd_colordots_d4, 10mm}@tab @code{OXYD_BOLD}
+ at item @image{images/st_oxyd_colordots_d3, 10mm}@tab @code{OXYD_BOLD}
+ at tab @image{images/st_oxyd_colordots_d4, 10mm}@tab @code{OXYD_QUAKE}
 @end multitable
 @item @b{noshuffle} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 @item @b{static} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 Static oxyds are neither swappable nor pullable.
+ at item @b{selection}, @ @ @i{values}: tokens of stone kinds and tile keys; @ @ @i{default}: no replacement
 @end table
 
 @item @b{Messages:}
@@ -19851,8 +19889,8 @@
 @item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{1.0}; @ @ @xref{adhesion}
 @item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
 @item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{1.0}; @ @ @i{access}: read only
 @end table
- at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{1.0}; @ @ @i{access}: read only
 
 @item @b{Messages:} none
 
@@ -19893,8 +19931,8 @@
 @item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{1.0}; @ @ @xref{adhesion}
 @item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
 @item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.7}; @ @ @i{access}: read only
 @end table
- at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.7}; @ @ @i{access}: read only
 
 @item @b{Messages:} none
 



From ral at mail.berlios.de  Sun Sep 12 12:53:09 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 12 Sep 2010 12:53:09 +0200
Subject: [Enigma-game-svn] r2123 - trunk/src/stones
Message-ID: <20100912105309.9831F480FEB@sheep.berlios.de>

Author: ral
Date: 2010-09-12 12:53:09 +0200 (Sun, 12 Sep 2010)
New Revision: 2123

Modified:
   trunk/src/stones/OxydStone.cc
Log:
additional oxyd stone opal feature security check

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2010-09-08 20:55:22 UTC (rev 2122)
+++ trunk/src/stones/OxydStone.cc	2010-09-12 10:53:09 UTC (rev 2123)
@@ -1184,12 +1184,14 @@
                 std::string firstname = tl.front().to_string();
                 std::string lastname = tl.back().to_string();
                 GridObject *pairedoxyd = dynamic_cast<GridObject *>(getObject(getAttr("$pairid")));
-                if (firstname.find('=') == 0) {
-                    if (lua::CallFunc(lua::LevelState(), "enigma.settile", firstname.substr(1), pairedoxyd)) {
-                        throw XLevelRuntime(std::string("oxyd stone set tile failed:\n")+lua::LastError(lua::LevelState()));
+                if (pairedoxyd != NULL) {
+                    if (firstname.find('=') == 0) {
+                        if (lua::CallFunc(lua::LevelState(), "enigma.settile", firstname.substr(1), pairedoxyd)) {
+                            throw XLevelRuntime(std::string("oxyd stone set tile failed:\n")+lua::LastError(lua::LevelState()));
+                        }
+                    } else {
+                        ReplaceStone(pairedoxyd->get_pos(), MakeStone(firstname.c_str()));
                     }
-                } else {
-                    ReplaceStone(pairedoxyd->get_pos(), MakeStone(firstname.c_str()));
                 }
                 if (lastname.find('=') == 0) {
                     if (lua::CallFunc(lua::LevelState(), "enigma.settile", lastname.substr(1), this)) {



From a_abraham at mail.berlios.de  Tue Sep 14 15:25:46 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Tue, 14 Sep 2010 15:25:46 +0200
Subject: [Enigma-game-svn] r2124 - trunk/po
Message-ID: <20100914132546.DB2AA481029@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-14 15:25:46 +0200 (Tue, 14 Sep 2010)
New Revision: 2124

Modified:
   trunk/po/de.po
Log:
- Added german translations for levels (some marked as fuzzy).
- Fixed some c-strings.



Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2010-09-12 10:53:09 UTC (rev 2123)
+++ trunk/po/de.po	2010-09-14 13:25:46 UTC (rev 2124)
@@ -1,18 +1,21 @@
 # German translation for Enigma.
 # Copyright (C) 2004 Daniel Heck
+#
 # Daniel Heck <dheck at gmx.de>, 2004.
-# 
+# Andreas Abraham, 2010.
 msgid ""
 msgstr ""
 "Project-Id-Version: Enigma 1.00\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2010-02-21 21:47+0100\n"
-"PO-Revision-Date: 2006-12-11 17:05+0100\n"
-"Last-Translator: Daniel Heck <dheck at gmx.de>\n"
-"Language-Team: Enigma developers <enigma-devel at nongnu.org>\n"
+"PO-Revision-Date: 2010-09-12 20:06+0200\n"
+"Last-Translator: Andreas Abraham\n"
+"Language-Team: American English <kde-i18n-doc at kde.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
+"X-Generator: Lokalize 1.0\n"
+"Plural-Forms: nplurals=2; plural=(n != 1);\n"
 
 #: src/server.cc:184 src/server.cc:198 src/gui/LevelInspector.cc:201
 msgid "Server Error: could not load level '"
@@ -637,33 +640,30 @@
 msgstr "%d%% gel?st"
 
 #: src/gui/LevelMenu.cc:371
-#, fuzzy
 msgid "Your time: "
-msgstr "Ihre Zeit: %d:%02d"
+msgstr "Ihre Zeit: "
 
 #: src/gui/LevelMenu.cc:376
 msgid "That's world record."
 msgstr "Weltrekord!"
 
 #: src/gui/LevelMenu.cc:378
-#, fuzzy, c-format
+#, c-format
 msgid "That's %s below world record."
-msgstr "%d:%02d unter Rekord."
+msgstr "Das ist %s unter dem Weltrekord."
 
 #: src/gui/LevelMenu.cc:387 src/gui/LevelMenu.cc:390
-#, fuzzy
 msgid "World record: "
-msgstr "Ihr Rekord: "
+msgstr "Weltrekord: "
 
 #: src/gui/LevelMenu.cc:389 src/gui/LevelMenu.cc:406
-#, fuzzy
 msgid "Par: "
-msgstr "Ziel: "
+msgstr "Par: "
 
 #: src/gui/LevelMenu.cc:403 src/gui/LevelMenu.cc:407
-#, fuzzy, c-format
+#, c-format
 msgid "World record by %s: "
-msgstr "Rekord von %s: %d:%02d"
+msgstr "Rekord von %s: "
 
 #: src/gui/LevelMenu.cc:439
 msgid "No further unsolved level available!"
@@ -806,21 +806,18 @@
 msgstr "Aktualisiere"
 
 #: src/gui/LevelPackConfig.cc:419
-msgid ""
-"Error: empty title not allowed - press \"Undo\" to exit without modifications"
+msgid "Error: empty title not allowed - press \"Undo\" to exit without modifications"
 msgstr ""
 "Fehler: ein leerer Titel ist nicht erlaubt - klicken Sie \"Undo\" zum "
 "Verlassen ohne ?nderungen"
 
 #: src/gui/LevelPackConfig.cc:432
 msgid "Error: use only \"a-zA-Z0-9 _-#\" for levelpack title"
-msgstr ""
-"Fehler: benutzen Sie nur \"a-zA-Z0-9 _-#\" f?r den Titel des Levelpakets"
+msgstr "Fehler: benutzen Sie nur \"a-zA-Z0-9 _-#\" f?r den Titel des Levelpakets"
 
 #: src/gui/LevelPackConfig.cc:443
 msgid "Error: title already in use - choose another title"
-msgstr ""
-"Fehler: dieser Titel ist schon vergeben - bitte w?hlen Sie einen anderen"
+msgstr "Fehler: dieser Titel ist schon vergeben - bitte w?hlen Sie einen anderen"
 
 #: src/gui/LevelPackMenu.cc:46
 msgid "Left column:"
@@ -831,9 +828,8 @@
 msgstr "Levelpaket Gruppen"
 
 #: src/gui/LevelPackMenu.cc:47
-#, fuzzy
 msgid "Right columns:"
-msgstr "Rechte Spalte:"
+msgstr "Rechte Spalten:"
 
 #: src/gui/LevelPackMenu.cc:47
 msgid "Levelpacks of selected group"
@@ -918,8 +914,7 @@
 #. TRANSLATORS: the translation can have double size of the english text
 #: src/gui/SearchMenu.cc:43
 msgid "case independent search in title, author, filename"
-msgstr ""
-"Suche in Titel, Autorname, Dateiname unabh?ngig von Gross-/Kleinschreibung."
+msgstr "Suche in Titel, Autorname, Dateiname unabh?ngig von Gross-/Kleinschreibung."
 
 #: src/gui/LevelInspector.cc:179
 msgid "Screenshot"
@@ -1512,19 +1507,17 @@
 #  level: "Advanced Tutorial"
 #  author: "Jacob Scott" email ""
 #: po/level_i18n.cc:45
-#, fuzzy
 msgid ""
 "That was a rotor (similar to a top).  Some levels have many rotors and tops "
 "to make them difficult.                            However, maybe this rotor "
 "has a purpose; maybe you could get it on that trigger near where the spoon "
 "was.                      It might be convenient to close the gate."
 msgstr ""
-"Das war ein Rotor (?hnlich zu einem Kreisel). Einige Level haben viele "
+"Das war ein Rotor (?hnlich einem Kreisel). Einige Level haben viele "
 "Rotoren oder Kreisel, um sie interessanter zu "
 "machen.                            Wie auch immer, vielleicht hat dieser "
-"Rotor einen Zweck; Vielleicht kannst Du ihn auf den Bodenschalter locken, "
-"dort wo der L?ffel lag.                      So k?nnte es m?glich sein, eine "
-"T?re zu ?ffnen."
+"Rotor einen Zweck; vielleicht kannst Du ihn auf den Bodenschalter locken, "
+"dort wo der L?ffel lag.                      Es k?nnte praktisch sein die T?re zu schliessen."
 
 #  level: "Blocks and Slopes"
 #  author: "Andreas Lochmann" email ""
@@ -1537,10 +1530,8 @@
 "der anderen Seite herunterzudr?cken.    Versuche sie dort zu benutzen!"
 
 #: po/level_i18n.cc:50
-msgid ""
-"Remember?  There are different kinds of floors.  And these are steep ..."
-msgstr ""
-"Erinnerst Du Dich?  Es gibt verschiedene B?den.  Diese hier haben Gef?lle ..."
+msgid "Remember?  There are different kinds of floors.  And these are steep ..."
+msgstr "Erinnerst Du Dich?  Es gibt verschiedene B?den.  Diese hier haben Gef?lle ..."
 
 #  level: "Blocks and Slopes"
 #  author: "Andreas Lochmann" email ""
@@ -1555,8 +1546,7 @@
 #  level: "Meditation 1"
 #  author: "Martin Hawlisch" email ""
 #: po/level_i18n.cc:55 po/level_i18n.cc:117
-msgid ""
-"Move all small marbles into the holes. Only one marble per hole is allowed."
+msgid "Move all small marbles into the holes. Only one marble per hole is allowed."
 msgstr ""
 "Lege alle kleinen Kugeln in die Mulden. Nur eine Kugel pro Mulde ist "
 "gewinnbringend."
@@ -1865,8 +1855,7 @@
 msgid ""
 "Maintenance code: metal-stone-stone-stone-red-yellow-yellow-red-red-stone-"
 "stone."
-msgstr ""
-"Wartungscode: Metall-Stein-Stein-Stein-Rot-Gelb-Gelb-Rot-Rot-Stein-Stein."
+msgstr "Wartungscode: Metall-Stein-Stein-Stein-Rot-Gelb-Gelb-Rot-Rot-Stein-Stein."
 
 #  level: "Welcome"
 #  author: "Daniel Heck" email ""
@@ -1916,8 +1905,7 @@
 #  author: "Alain Busser" email ""
 #: po/level_i18n.cc:690
 msgid "Warning: If one warrior's walls are empty, this awesome warrior wins."
-msgstr ""
-"Warnung: Wenn die Felder des einen Kriegers leer sind, gewinnt der andere."
+msgstr "Warnung: Wenn die Felder des einen Kriegers leer sind, gewinnt der andere."
 
 #  level: "Enigmawale"
 #  author: "Alain Busser" email ""
@@ -2070,32 +2058,36 @@
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:827
+#, fuzzy
 msgid ""
 "I your dear friend am in myself undone, by reason of a Burden that lieth "
 "hard upon me."
 msgstr ""
+"Ich, dein guter Freund, bin durch die B?rde, die schwer auf mir lastet, "
+"selbst ruiniert."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:829
+#, fuzzy
 msgid "Do you see yonder Wicket Gate?"
-msgstr ""
+msgstr "Siehst Du dort dr?ben das gef?hrliche Tor?"
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:831
-msgid ""
-"They drew nigh to a very miry Slough. The name of the Slough was Despond."
-msgstr ""
+#, fuzzy
+msgid "They drew nigh to a very miry Slough. The name of the Slough was Despond."
+msgstr "Sie zogen in die N?he eines Sumpfes. Der Name des Sumpfs war Verzagen."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:833
 msgid "Knock, and it shall be opened unto you."
-msgstr ""
+msgstr "Klopfe und es soll Dir ge?ffnet werden."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2106,21 +2098,24 @@
 "to tumble, and so continued to do, till it came to the mouth of the "
 "Sepulchre, where it fell in, and I saw it no more."
 msgstr ""
+"Seine B?rde l?ste sich von seiner Schulter und fiel von seinem R?cken und begann "
+"zu taumeln und h?rte nicht auf bis sie an den Rand des "
+"Grabes kam, wo sie hinabfiel und ich sie nicht mehr sah."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:837
 msgid "They came to the foot of the hill Difficulty."
-msgstr ""
+msgstr "Sie kamen an den Fu?e des schwierigen Berges."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:839
-msgid ""
-"There was a very stately palace before him, the name of which was Beautiful."
-msgstr ""
+#, fuzzy
+msgid "There was a very stately palace before him, the name of which was Beautiful."
+msgstr "Es lag ein stattlicher Palast vor ihm, sein Name war Sch?nheit."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2130,6 +2125,8 @@
 "He had gone but a little way, before he espied a foul Fiend coming over the "
 "field to meet him."
 msgstr ""
+"Er war nicht weit gegangen, da ersp?hte er schon einen b?sen Geist der ?ber das "
+"Feld kam um ihn zu treffen."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2139,13 +2136,15 @@
 "At the end of this Valley was another, called, The Valley of the Shadow Of "
 "Death."
 msgstr ""
+"Am Ende diesen Tales kam ein weiteres, genannt das Tal "
+"des Schatten des Todes."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:845
 msgid "He saw Faithful before him on his Journey."
-msgstr ""
+msgstr "Er sah die Gl?ubigen vor ihm auf seiner Reise."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2155,63 +2154,72 @@
 "As they went on, Faithful, as he chanced to look to one side, saw a man "
 "whose name was Talkative."
 msgstr ""
+"Wie sie weitergingen, Gl?ubig, traute er sich auf eine Seite zu sehen und sah einen Mann "
+"dessen Name Redselig war."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:849
-msgid ""
-"They presently saw a Town before them, and the name of that Town is Vanity."
-msgstr ""
+msgid "They presently saw a Town before them, and the name of that Town is Vanity."
+msgstr "Sie sahen sogleich einen Ort vor sich und der Name des Ortes war Einbildung."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:851
+#, fuzzy
 msgid ""
 "Christian went not forth alone; for there was one whose name was Hopeful who "
 "joined himself unto him."
-msgstr ""
+msgstr "Christian ging nicht alleine voran; es gab einen, sein Name war Erwartungsvoll, der sich mit ihm verband."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:853
+#, fuzzy
 msgid ""
 "There was on the Left Hand of the road a Meadow, and a Stile to go over into "
 "it, and that meadow is called By-Path-Meadow."
 msgstr ""
+"Auf der Linken Seite der Strasse war eine Wiese, und ein Zauntritt der dar?ber in "
+"sie f?hrte, und diese Wiese wird genannt Am-Weg-Wiese."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:855
+#, fuzzy
 msgid ""
 "Now there was, not far from the place where they lay, a castle, called "
 "Doubting-Castle, the owner of which was Giant Despair."
 msgstr ""
+"Nunmehr war dort, nicht weit von dem Platz wo sie lagen, eine Burg, genannt "
+"Zweifel-Schloss, dessen Besitzer war Gewaltige Verzweiflung."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:857
+#, fuzzy
 msgid "They went then till they came to the Delectable Mountains."
-msgstr ""
+msgstr "Sie schritten voran bis sie zu den Reizenden Bergen kamen."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:859
+#, fuzzy
 msgid "Beware of the Flatterer."
-msgstr ""
+msgstr "H?te Dich vor dem Schmeichler."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan - exact quote is 'Follow me, said the man, it is thither that I am going' - a couple of words have been changed to make sense out of context."
 #: po/level_i18n.cc:861
-msgid ""
-"Follow me, said the Flatterer, it is to the Coelestial City that I am going."
-msgstr ""
+msgid "Follow me, said the Flatterer, it is to the Coelestial City that I am going."
+msgstr "Folge mir, sagte der Schmeichler, ich gehe in die Himmlische Stadt."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2220,7 +2228,7 @@
 msgid ""
 "They came into a certain Country, whose air naturally tended to make one "
 "drowzy."
-msgstr ""
+msgstr "Sie kamen in ein gewisses Land, dessen Luft dazu neigte einen schlaftrunken zu machen."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2229,16 +2237,19 @@
 msgid ""
 "The Pilgrims were got over the Enchanted ground, and entering into the "
 "Country of Beulah."
-msgstr ""
+msgstr "Die Pilger kamen ?ber das verzauberte Reich und zogen in das Land von Beluah."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:867
+#, fuzzy
 msgid ""
 "There was then in that place one Vain-Hope, a ferryman, that with his boat "
 "helped him over."
 msgstr ""
+"An diesem Ort gab es eine vergebliche Hoffnung, ein F?hrmann, der ihm mit seinem Boot "
+"hin?ber half."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
@@ -2249,22 +2260,29 @@
 "the men that went with them, said, You must go through, or you cannot come "
 "at the Gate."
 msgstr ""
+"Beim Anblick des Flusses waren die Pilger daher sehr best?rzt, aber "
+"die M?nner die mit Ihnen gingen sagten, Ihr m?sst hindurch gehen, oder "
+"Ihr k?nnt das Tor nicht erreichen."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
 #: po/level_i18n.cc:871
+#, fuzzy
 msgid "I looked in after them; and behold the City shone like the Sun."
-msgstr ""
+msgstr "Ich schaute nach ihnen; und erblickte die Stadt wie die Sonne erstrahlen."
 
 #  level: "The Pilgrim's Progress"
 #  author: "Mark Pulley" email ""
 #  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan - quote taken from the section of the Shepherds in the Delectable Mountains"
 #: po/level_i18n.cc:873
+#, fuzzy
 msgid ""
 "They also thought they heard there a rumbling noise, as of fire, and a Cry "
 "of some tormented, and that they smelt the scent of Brimstone."
 msgstr ""
+"Sie dachten auch dass sie ein polterndes Ger?usch h?rten, wie von Feuer, und ein Schrei "
+"wie von einem Gequ?lten, und dass sie den Duft von Schwefel rochen."
 
 #  level: "Odyssey in Space"
 #  author: "Jacob Scott" email ""
@@ -2277,8 +2295,7 @@
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
 #: po/level_i18n.cc:903
 msgid "Place 9 different items in each row, column, and 3x3 box."
-msgstr ""
-"Platziere 9 unterschiedliche Werkzeuge in jede Reihe, Spalte und Quadrat"
+msgstr "Platziere 9 unterschiedliche Werkzeuge in jede Reihe, Spalte und Quadrat"
 
 #  level: "Su Dyxo"
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
@@ -2363,8 +2380,7 @@
 #  level: "Sunrise Sunset"
 #  author: "Mark Pulley" email ""
 #: po/level_i18n.cc:940
-msgid ""
-"Choose your hemisphere: left switch for northern, right switch for southern."
+msgid "Choose your hemisphere: left switch for northern, right switch for southern."
 msgstr ""
 "W?hle Deine Hemisph?re: Linker Schalter f?r Norden, rechter Schalter f?r "
 "S?den"
@@ -2381,8 +2397,7 @@
 #  use: "Sorry, aber im schwierigen Modus bedarf es ein wenig mehr ... Neustart."
 #: po/level_i18n.cc:949
 msgid "Sorry, but in difficult mode you need more ... Restart."
-msgstr ""
-"Sorry, aber im schwierigen Modus bedarf es ein wenig mehr ... Neustart."
+msgstr "Sorry, aber im schwierigen Modus bedarf es ein wenig mehr ... Neustart."
 
 #  level: "Nabokos"
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
@@ -2434,10 +2449,8 @@
 #  level: "Nabokos"
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
 #: po/level_i18n.cc:964
-msgid ""
-"That puzzle was too easy! Use the spoon, and give me a harder one next time!"
-msgstr ""
-"Das Puzzle war zu einfach! Benutze den L?ffel und mache es f?r mich schwerer!"
+msgid "That puzzle was too easy! Use the spoon, and give me a harder one next time!"
+msgstr "Das Puzzle war zu einfach! Benutze den L?ffel und mache es f?r mich schwerer!"
 
 #  level: "Nabokos"
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
@@ -2559,7 +2572,6 @@
 #  author: "Jacob Scott" email ""
 #  use: "Du darfst hier nicht sein! Ich, Minos, Richter ?ber die Toten werde es nicht gestatten! Begib dich umgehend auf den Weg zur?ck, oder sei bereit, die Konsequenzen f?r deinen Ungehorsam zu tragen - bis in alle Ewigkeit."
 #: po/level_i18n.cc:995
-#, fuzzy
 msgid ""
 "You cannot be here!  I, Minos, judger of the dead, will not allow it.  Go "
 "back now, or forever face the consequences!"
@@ -2686,8 +2698,7 @@
 #  comment: "Dante 'Devine Comedy': Canto X / Terzine 13"
 #  use: "Mein F?hrer, der mich schnell an mut?ger Hand / durch Gr?berreih?n bis zu ihm mitgenommen, / sprach: ?Was er fragt, das mach? ihm klar bekannt.?"
 #: po/level_i18n.cc:1024
-msgid ""
-"...his hands, ready, encouraging, / thrust me towards him among the tombs."
+msgid "...his hands, ready, encouraging, / thrust me towards him among the tombs."
 msgstr ""
 "Mein F?hrer, der mich schnell an mut?ger Hand / durch Gr?berreih?n bis zu "
 "ihm mitgenommen, / sprach: ?Was er fragt, das mach? ihm klar bekannt.?"
@@ -2917,7 +2928,6 @@
 #  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
 #  use: "Du befindest Dich in einem dunklen, feuchten Raum. Im Nordosten ist ein Lichtschalter und westlich von Dir ein Gang."
 #: po/level_i18n.cc:1087
-#, fuzzy
 msgid ""
 "You find yourself in a dark, damp chamber. There's a light switch to the "
 "northeast and a passage to the west."
@@ -3005,8 +3015,7 @@
 #  use: "Oh-oh, die Stufen, die herunterf?hren, sehen extrem schmal und glitschig aus."
 #: po/level_i18n.cc:1103
 msgid "Uh-oh, the steps leading down are small and extremely slippery."
-msgstr ""
-"Oh-oh, die Stufen, die herunterf?hren, sehen extrem schmal und glitschig aus."
+msgstr "Oh-oh, die Stufen, die herunterf?hren, sehen extrem schmal und glitschig aus."
 
 #  level: "Poe's Nightmare"
 #  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
@@ -3176,15 +3185,14 @@
 #  use: "Willkommen in L?Alpe d?Huez. Schade, es ist noch kein Etappenziel der Tour"
 #: po/level_i18n.cc:1188
 msgid "Welcome in L?Alpe d?Huez. Sorry, it is not yet stage of the Tour"
-msgstr ""
-"Willkommen in L?Alpe d?Huez. Schade, es ist noch kein Etappenziel der Tour"
+msgstr "Willkommen in L?Alpe d?Huez. Schade, es ist noch kein Etappenziel der Tour"
 
 #  level: "Suckerfish I"
 #  author: "/dev/null" email ""
 #  use: "Kein Durchblick? Wie w?r's mit einem Besuch beim Optiker?"
 #: po/level_i18n.cc:1193
 msgid "No clear view? How about visiting an opitician?"
-msgstr ""
+msgstr "Kein Durchblick? Wie w?r's mit einem Besuch beim Optiker?"
 
 #  level: "Choices, choices ..."
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
@@ -3238,9 +3246,8 @@
 #  author: "Ronald Lamprecht" email "ral at users.berlios.de"
 #  use: "Verloren ... 'SHIFT+F3'!!!"
 #: po/level_i18n.cc:1269
-#, fuzzy
 msgid "Doomed ... 'SHIFT+F3'!!!"
-msgstr "Arme kleine schwarze Murmel ... 'UmschalT+F3'!!!"
+msgstr "Arme kleine schwarze Murmel ... 'Umschalt+F3'!!!"
 
 #  level: "Buridan"
 #  author: "Alain Busser" email ""
@@ -3298,16 +3305,14 @@
 #  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
 #: po/level_i18n.cc:1310
 msgid "There are different kinds of seeds ... Try to use them!"
-msgstr ""
-"Es gibt verschiedene Sorten von Samen ... Versuche sie richtig zu benutzen!"
+msgstr "Es gibt verschiedene Sorten von Samen ... Versuche sie richtig zu benutzen!"
 
 #  level: "Growing Boxes"
 #  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
 #  comment: "read from the right"
 #: po/level_i18n.cc:1312
 msgid "Noitcerid etisoppo eht yrt! Tuo syaw owt? Rorrim, rorrim ..."
-msgstr ""
-"Gnuthcir eredna eid Ehcusrev! Nessuard hcan Egew Iewz? legeisP legeisP ..."
+msgstr "Gnuthcir eredna eid Ehcusrev! Nessuard hcan Egew Iewz? legeisP legeisP ..."
 
 #  level: "Road to Eden"
 #  author: "Alain Busser" email ""
@@ -3390,8 +3395,7 @@
 #  author: "Ralf Westram" email "amgine at reallysoft.de"
 #: po/level_i18n.cc:1480
 msgid "This level is quite straightforward, isn't it? Just continue ... ;-)"
-msgstr ""
-"Dieser Level ist recht geradlinig, nicht wahr? Mache einfach weiter ... ;-)"
+msgstr "Dieser Level ist recht geradlinig, nicht wahr? Mache einfach weiter ... ;-)"
 
 #  level: "Pharaoh's Tomb"
 #  author: "Siegfried Fennig" email ""
@@ -3428,8 +3432,7 @@
 #  use: "Das erste Ziel unseres Denkens werde:           Luft und Feuer, Wasser, Erde."
 #: po/level_i18n.cc:1513
 msgid "Our full attention this is worth:           Air and Fire, Water, Earth."
-msgstr ""
-"Das erste Ziel unseres Denkens werde:           Luft und Feuer, Wasser, Erde."
+msgstr "Das erste Ziel unseres Denkens werde:           Luft und Feuer, Wasser, Erde."
 
 #  level: "Moure-Switches"
 #  author: "Andreas Lochmann" email ""
@@ -4175,10 +4178,8 @@
 #  author: "Manuel K?nig" email ""
 #  use: "Das ist mein erstes Level; ich habe es meinem Vater gewidmet. Ich hoffe, dass es euch Spa? macht!"
 #: po/level_i18n.cc:3556
-msgid ""
-"This is my first landscape, dedicated to my father. I hope you'll enjoy it!"
-msgstr ""
-"Dies ist mein erstes Level, gewidmet meinem Vater. Ich hoffe es gef?llt Dir!"
+msgid "This is my first landscape, dedicated to my father. I hope you'll enjoy it!"
+msgstr "Dies ist mein erstes Level, gewidmet meinem Vater. Ich hoffe es gef?llt Dir!"
 
 #  level: "Catwalk Meditation"
 #  author: "Ronald Lamprecht" email "ral at users.berlios.de"
@@ -4252,8 +4253,7 @@
 #  author: "Sven Siggelkow" email ""
 #: po/level_i18n.cc:3617
 msgid "This is a meditation landscape: put a small marble into every hole ..."
-msgstr ""
-"Dies ist eine Meditationslandschaft: lege eine kleine Kugel in jedes Loch ..."
+msgstr "Dies ist eine Meditationslandschaft: lege eine kleine Kugel in jedes Loch ..."
 
 #  level: "Laser Path"
 #  author: "Andreas Lochmann" email ""
@@ -4389,14 +4389,13 @@
 #  author: "Alain Busser" email ""
 #: po/level_i18n.cc:3753
 msgid "The pirates have lost several hidden things on this island ..."
-msgstr ""
-"Die Piraten haben auf dieser Insel einige versteckte Dinge dagelassen ..."
+msgstr "Die Piraten haben auf dieser Insel einige versteckte Dinge dagelassen ..."
 
 #  level: "Island of Safety"
 #  author: "Jacob Scott" email ""
 #: po/level_i18n.cc:3772
 msgid "Keypad Corners"
-msgstr ""
+msgstr "Ziffernblock Ecken"
 
 #  level: "A bayou by you"
 #  author: "Alain Busser" email ""
@@ -4603,6 +4602,7 @@
 #  author: "Alain Busser" email ""
 #  comment: "an attempt has been made to imitate the language Aragorn uses in Tolkien's 'the 2 towers', which itself is an imitation of the ancient english Shakespeare wrote; the most faithful way to translate this is then to use a medieval-looking language."
 #: po/level_i18n.cc:3928
+#, fuzzy
 msgid ""
 "Mightie art the Knightes of The Olde Ages who keepe the Elfic Oxyde Stones, "
 "and numerous art the Ghostes who lye in the waye to them; many art the "
@@ -4610,6 +4610,11 @@
 "back. Hazy is the swampe where the Magick of the Ancients is buryed; the "
 "lair of WhiteHorse the dragon thu shalt avoyd in feare of awaken him ..."
 msgstr ""
+"M?chtig sind die Ritter der hohen Alter, die die elbischen Oxid-Steine bewahren, "
+"und zahlreich sind die Geister die auf dem Weg zu ihnen liegen; viele Abenteurer "
+"haben versucht das Schwerte Aylendil zu stehlen, aber keiner kam je zur?ck. "
+"Dunst liegt ?ber dem Sumpfe in dem der Zauber der Alten begraben ist; das Lager "
+"des wei?en Pferds das der Drache f?rchte ihn zu wecken ?"
 
 #  level: "Firefox"
 #  author: "Ronald Lamprecht" email "ral at users.berlios.de"
@@ -4648,8 +4653,7 @@
 #  author: "Ronald Lamprecht" email "ral at users.berlios.de"
 #  use: "Oh! Das Labyrinth ist unvollst?ndig! Unternimm etwas um das Labyrinth zu reparieren bevor Du es zerst?rst."
 #: po/level_i18n.cc:3941
-msgid ""
-"OOPS! The maze is broken! Prepare to repair the maze before you destroy it."
+msgid "OOPS! The maze is broken! Prepare to repair the maze before you destroy it."
 msgstr ""
 "Oh! Das Labyrinth ist unvollst?ndig! Unternimm etwas um das Labyrinth zu "
 "reparieren bevor Du es zerst?rst."
@@ -4888,7 +4892,7 @@
 #  use: "repariere das Uhrwerk"
 #: po/level_i18n.cc:4065
 msgid "Mend the clockwork"
-msgstr "repariere das Uhrwerk"
+msgstr "Repariere das Uhrwerk"
 
 #  level: "Watchmaker"
 #  author: "Johannes H?sing" email "hannes at ruhrau.de"
@@ -5125,10 +5129,8 @@
 #  level: "Enigmines"
 #  author: "Brian Huffman" email ""
 #: po/level_i18n.cc:4187
-msgid ""
-"Hit the switch to uncover one tile, but you will have to wait 10 seconds."
-msgstr ""
-"Benutze den Schalter, um aufzudecken, aber auch um 10 Sekunden zu verlieren."
+msgid "Hit the switch to uncover one tile, but you will have to wait 10 seconds."
+msgstr "Benutze den Schalter, um aufzudecken, aber auch um 10 Sekunden zu verlieren."
 
 #  level: "Ghost Driver"
 #  author: "Jacob Scott" email ""
@@ -5452,7 +5454,7 @@
 #  use: "Zur Zeit sind keine Tips verf?gbar."
 #: po/level_i18n.cc:4480
 msgid "No hints available at the moment."
-msgstr "Zur Zeit sind keine Tips verf?gbar."
+msgstr "Zur Zeit sind keine Tipps verf?gbar."
 
 #  level: "The Passage"
 #  author: "JuSt" email ""
@@ -5523,7 +5525,7 @@
 #  use: "Ob Schachfiguren laserresistent sind?"
 #: po/level_i18n.cc:4534
 msgid "Are chess knights resistent to laser beams?"
-msgstr ""
+msgstr "Ob Schachfiguren laserresistent sind?"
 
 #  level: "Hot Hurdle Race"
 #  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
@@ -5623,8 +5625,7 @@
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4673
-msgid ""
-"This lake was obviously made by Goshers. I think the correct way is south."
+msgid "This lake was obviously made by Goshers. I think the correct way is south."
 msgstr ""
 "Dieser See wurde offensichtlich von Goshers angelegt. Ich denke der Weg nach "
 "S?den ist der Richtige."
@@ -5744,8 +5745,7 @@
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4685
 msgid "You were lucky to find this hole. It prevents you from drowning."
-msgstr ""
-"Du Gl?cklicher hast dieses Loch gefunden. Es rettet Dich vor dem Ertrinken."
+msgstr "Du Gl?cklicher hast dieses Loch gefunden. Es rettet Dich vor dem Ertrinken."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5783,8 +5783,7 @@
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4690
 msgid "\"Congratulations. You just managed to enter this old Aztec Temple.\""
-msgstr ""
-"\"Gratulation. Du bist in diesen alten Aztekentempel hinein gekommen.\""
+msgstr "\"Gratulation. Du bist in diesen alten Aztekentempel hinein gekommen.\""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5921,6 +5920,8 @@
 "Quickly ...                                                                             "
 "or trickily!"
 msgstr ""
+"Schnell ...                                                                             "
+"oder trickreich!"
 
 #  level: "Correspondence Chess"
 #  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
@@ -5985,7 +5986,7 @@
 #  use: "Der wahre Wert von Kaffee"
 #: po/level_i18n.cc:4820
 msgid "The real value of coffee"
-msgstr ""
+msgstr "Der wahre Wert von Kaffee"
 
 #  level: "Oxyd Drilling"
 #  author: "Jacob Scott" email ""
@@ -6283,8 +6284,7 @@
 #  use: "Beseitige alle Teile der Grabplatte, bevor Tutoxyd heraufbeschw?rt wird."
 #: po/level_i18n.cc:4914
 msgid "Remove all parts of the memorial plate before conjuring up Tutoxyd."
-msgstr ""
-"Beseitige alle Teile der Grabplatte, bevor Tutoxyd heraufbeschw?rt wird."
+msgstr "Beseitige alle Teile der Grabplatte, bevor Tutoxyd heraufbeschw?rt wird."
 
 #  level: "Tutoxyd's Pyramid"
 #  author: "Ronald Lamprecht" email "ral at users.berlios.de"
@@ -6327,6 +6327,8 @@
 "Counting the first pearl as 1, you must save every pearl that's a multiple "
 "of 3 or of 5 (or both)."
 msgstr ""
+"Z?hlt man die erste Perle mit 1, so muss man jede Perle bewahren die ein Vielfaches "
+"von 3 oder 5 ist (oder beiden)."
 
 #  level: "Danger Flag"
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
@@ -6353,7 +6355,7 @@
 #  use: "Hintenrum IV"
 #: po/level_i18n.cc:4945
 msgid "Crabwise IV"
-msgstr ""
+msgstr "Hintenrum IV"
 
 #  level: "Number Crunching"
 #  author: "Alex Smith" email "ais523 at bham.ac.uk"
@@ -6411,7 +6413,7 @@
 #  use: "Hintenrum III"
 #: po/level_i18n.cc:5043
 msgid "Crabwise III"
-msgstr ""
+msgstr "Hintenrum III"
 
 #  level: "Crabwise I"
 #  author: "/dev/null" email ""
@@ -6678,8 +6680,7 @@
 #  author: "mecke" email ""
 #  use: "Lustig: Eine Font?ne steuert den Verkehr"
 #: po/level_i18n.cc:5303
-msgid ""
-"It's funny that a fountain in Central Park should control the traffic flow."
+msgid "It's funny that a fountain in Central Park should control the traffic flow."
 msgstr "Lustig: Eine Font?ne steuert den Verkehr"
 
 #  level: "New York Jungle"
@@ -6693,8 +6694,7 @@
 #  author: "Ralf Westram" email "amgine at reallysoft.de"
 #: po/level_i18n.cc:5363
 msgid "Drop the hammer on side of a pentomino and use the switch!"
-msgstr ""
-"Legen Sie den Hammer neben ein Pentomino und bet?tigen Sie den Schalter!"
+msgstr "Legen Sie den Hammer neben ein Pentomino und bet?tigen Sie den Schalter!"
 
 #  level: ""
 #  author: "Ralf Westram" email "amgine at reallysoft.de"



From ral at mail.berlios.de  Thu Sep 16 23:46:33 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 16 Sep 2010 23:46:33 +0200
Subject: [Enigma-game-svn] r2125 - in trunk/src: . items
Message-ID: <20100916214633.85EE848106B@sheep.berlios.de>

Author: ral
Date: 2010-09-16 23:46:33 +0200 (Thu, 16 Sep 2010)
New Revision: 2125

Modified:
   trunk/src/actors.cc
   trunk/src/items/Drop.cc
Log:
fix it_drop actor convertion mass, charge, spikes status

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2010-09-14 13:25:46 UTC (rev 2124)
+++ trunk/src/actors.cc	2010-09-16 21:46:33 UTC (rev 2125)
@@ -278,7 +278,7 @@
         SendMessage(*itr, "_recheck");
 }
 
-void Actor::move () 
+void Actor::move()
 {
     if (m_actorinfo.field) {
         if (m_actorinfo.gridpos != last_gridpos) {
@@ -317,7 +317,7 @@
     last_gridpos = m_actorinfo.gridpos;
 }
 
-void Actor::move_screen () {
+void Actor::move_screen() {
     m_sprite.move (m_actorinfo.pos);
 }
 
@@ -325,7 +325,7 @@
     m_sprite.replace_model (display::MakeModel(name));
 }
 
-void Actor::animcb () {
+void Actor::animcb() {
 }
 
 

Modified: trunk/src/items/Drop.cc
===================================================================
--- trunk/src/items/Drop.cc	2010-09-14 13:25:46 UTC (rev 2124)
+++ trunk/src/items/Drop.cc	2010-09-16 21:46:33 UTC (rev 2125)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2009 Ronald Lamprecht
+ * Copyright (C) 2009,2010 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -29,8 +29,10 @@
     Actor *replace_actor(Actor *olda, Actor *newa) {
         ActorInfo *info = newa->get_actorinfo();
         info->vel = olda->get_vel();
+        info->charge = olda->get_actorinfo()->charge;
 
-        if (Value v = olda->getAttr("owner")) {
+        Value v = olda->getAttr("owner");
+        if (v) {
             player::ReplaceActor((int)v, olda, newa);
         }
 
@@ -38,6 +40,8 @@
         if (!YieldActor (olda)) {
             enigma::Log << "Strange: could not remove old actor\n";
         }
+        SendMessage(newa, "_update_mass", v);
+        SendMessage(newa, "_update_pin", v);
         olda->hide();
         newa->show();
         return olda;
@@ -94,7 +98,7 @@
             }
             rotor->setAttr("essential_id", Value(essId));
 
-            replace_actor (a, rotor);
+            replace_actor(a, rotor);
 
             GameTimer.set_alarm (new DropCallback (rotor, a),
                                         ROTOR_LIFETIME,



From raoul at mail.berlios.de  Fri Sep 17 01:06:29 2010
From: raoul at mail.berlios.de (raoul at mail.berlios.de)
Date: Fri, 17 Sep 2010 01:06:29 +0200
Subject: [Enigma-game-svn] r2126 - team_levelpacks/team_test_new_api
Message-ID: <20100916230629.968F948106B@sheep.berlios.de>

Author: raoul
Date: 2010-09-17 01:06:29 +0200 (Fri, 17 Sep 2010)
New Revision: 2126

Added:
   team_levelpacks/team_test_new_api/ralT092_1.xml
   team_levelpacks/team_test_new_api/raoulT15_1.xml
Log:
-> Testlevels for drop transformation and some fire issues


Added: team_levelpacks/team_test_new_api/ralT092_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT092_1.xml	                        (rev 0)
+++ team_levelpacks/team_test_new_api/ralT092_1.xml	2010-09-16 23:06:29 UTC (rev 2126)
@@ -0,0 +1,95 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test Fire new API" el:subtitle="" el:id="20090812ral619"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1738 $" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+s = "otto"
+print(s..#s)
+t=s[2]
+--print("char 2 "..s[2])
+--s[4] = t
+print(s)
+
+ti[" "] = {"fl_sahara"}
+ti["i"] = {"fl_ice", "f#", noash=true}
+ti["b"] = {"fl_bluegreen", "f#", burnable=false, noash=true}
+
+ti["S"] = {"st_switch", target="fire"}
+ti["N"] = {"st_switch", target="noash"}
+ti["T"] = {"st_switch", target="stop"}
+ti["p"] = {"it_pencil"}
+ti["P"] = ti["p"] .. {"st_passage_black", flavor="slash"}
+ti["C"] = ti["p"] .. {"st_passage_black", flavor="cross"}
+ti["G"] = ti["p"] .. {"st_grate"}
+
+ti["I"] = {"fl_ice"}
+ti["_"] = {"fl_swamp"}
+ti["o"] = {"it_burnable_oil"} .. ti["I"] 
+ti["="] = {"it_burnable_oil"} .. ti["_"] 
+ti["d"] = {"it_dynamite"}
+ti["D"] = ti["d"] .. ti["I"] 
+ti["O"] = {"it_burnable_oil"} .. ti{"st_ice"}
+
+ti["@"] = {"#ac_marble_black", "me"}
+
+w, h = wo(ti, " ", {
+"                    ",
+"    i   iii   b     ",
+"                    ",
+"         @       p  ",
+"                 P  ",
+"       S N T     C  ",
+"                 G  ",
+"                    ",
+" ___  III           ",
+" _=_  DoD    dOd    ",
+" ___  III      d    ",
+"                    ",
+})
+
+print("Floor kind "..fl(po{0,0}):kind())
+print("Floor is sahara "..cond(fl(po{0,0}):is("fl_sahara"), "true", "false"))
+
+floors = no["f#*"]
+
+function fire()
+    floors["burnable"] = true
+    floors["eternal"] = true
+    floors:setfire()
+    print ("me at "..po["me"].x .. ", "..po["me"].y)
+end
+
+function noash()
+    floors["noash"] = true
+end
+
+function stop()
+    floors:stopfire()
+end
+
+list = {po(2,2), po(3,3), po(3,4), po(4,4)}
+polist = po(list)
+wo[polist] = {"fl_space"}
+
+  ]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT092_1.xml
___________________________________________________________________
Added: svn:eol-style
   + native

Added: team_levelpacks/team_test_new_api/raoulT15_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT15_1.xml	                        (rev 0)
+++ team_levelpacks/team_test_new_api/raoulT15_1.xml	2010-09-16 23:06:29 UTC (rev 2126)
@@ -0,0 +1,58 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Drop item transformation test" el:subtitle="" el:id="raoult15"/>
+      <el:version el:score="1" el:release="1" el:revision="1" el:status="experimental"/>
+      <el:author  el:name="Raoul Bourquin" el:email=""/>
+      <el:copyright>Copyright ? 2010 Raoul Bourquin</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+ti[" "] = {"fl_sahara"}
+ti["#"] = {"st_rawglass"}
+
+ti["d"] = {"it_drop"}
+ti["w"] = {"it_weight"}
+ti["p"] = {"it_pin"}
+
+ti["S"] = {"fl_scales", target="light"}
+ti[">"] = {"st_laser", name="light"}
+
+ti["T"] = {"fl_thief"}
+
+ti["+"] = {"st_charge_plus"}
+ti["-"] = {"st_charge_minus"}
+ti["z"] = {"st_charge_zero"}
+
+ti["O"] = {"st_oxyd"}
+ti["@"] = {"#ac_marble"}
+ti["A"] = {"#ac_marble_white"}
+
+wo(ti, " ", {
+    "####################",
+    ">                  O",
+    "# wwwwwwwwwwwwwwww #",
+    "#                  #",
+    "# S              T #",
+    "#                  #",
+    "# z      @      A  #",
+    "# -             A  #",
+    "# +      ppp    A  #",
+    "#                  #",
+    "# dddddddddddddddd #",
+    "#                  O",
+    "####################"})
+
+wo:shuffleOxyd()
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: team_levelpacks/team_test_new_api/raoulT15_1.xml
___________________________________________________________________
Added: svn:eol-style
   + native



From ral at mail.berlios.de  Fri Sep 17 14:31:30 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Fri, 17 Sep 2010 14:31:30 +0200
Subject: [Enigma-game-svn] r2127 - in trunk/src: . items
Message-ID: <20100917123130.A495048104C@sheep.berlios.de>

Author: ral
Date: 2010-09-17 14:31:30 +0200 (Fri, 17 Sep 2010)
New Revision: 2127

Modified:
   trunk/src/actors.cc
   trunk/src/actors.hh
   trunk/src/items/Drop.cc
Log:
fix it_drop usage on fl_thief

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2010-09-16 23:06:29 UTC (rev 2126)
+++ trunk/src/actors.cc	2010-09-17 12:31:30 UTC (rev 2127)
@@ -281,12 +281,12 @@
 void Actor::move()
 {
     if (m_actorinfo.field) {
-        if (m_actorinfo.gridpos != last_gridpos) {
+        if (m_actorinfo.gridpos != m_actorinfo.last_gridpos) {
             // Actor entered a new field -> notify floor and item objects
             // first leave old - avoid the possibility that an actor presses
             // two triggers at once.
             firstGridStep = true;
-            if (const Field *of = GetField(last_gridpos)) {
+            if (const Field *of = GetField(m_actorinfo.last_gridpos)) {
                 if (Floor *fl = of->floor)
                     fl->actor_leave(this);
                 if (Item *it = of->item)
@@ -314,7 +314,7 @@
                 respawnpos = m_actorinfo.pos;
         }
     }
-    last_gridpos = m_actorinfo.gridpos;
+    m_actorinfo.last_gridpos = m_actorinfo.gridpos;
 }
 
 void Actor::move_screen() {

Modified: trunk/src/actors.hh
===================================================================
--- trunk/src/actors.hh	2010-09-16 23:06:29 UTC (rev 2126)
+++ trunk/src/actors.hh	2010-09-17 12:31:30 UTC (rev 2127)
@@ -79,6 +79,7 @@
 
         ecl::V2 pos;            // Absolute position
         GridPos gridpos;        // Grid position for pos
+        GridPos last_gridpos;   // last pos handled by actor move
         const Field *field;     // Field of pos
         ecl::V2 vel;            // Velocity
         ecl::V2 frozen_vel;     // Velocity backup for forzen actors
@@ -221,7 +222,6 @@
         bool         spikes; // set by "it-pin"
         int          controllers;
         double       adhesion;
-        GridPos      last_gridpos;   // last pos handled by actor move
     };
 
     inline ActorID get_id (Actor *a) {

Modified: trunk/src/items/Drop.cc
===================================================================
--- trunk/src/items/Drop.cc	2010-09-16 23:06:29 UTC (rev 2126)
+++ trunk/src/items/Drop.cc	2010-09-17 12:31:30 UTC (rev 2127)
@@ -30,6 +30,7 @@
         ActorInfo *info = newa->get_actorinfo();
         info->vel = olda->get_vel();
         info->charge = olda->get_actorinfo()->charge;
+        info->last_gridpos = olda->get_actorinfo()->gridpos;
 
         Value v = olda->getAttr("owner");
         if (v) {



From ral at mail.berlios.de  Fri Sep 17 21:53:34 2010
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Fri, 17 Sep 2010 21:53:34 +0200
Subject: [Enigma-game-svn] r2128 - team_levelpacks/team_test_new_api
Message-ID: <20100917195335.119E148105A@sheep.berlios.de>

Author: ral
Date: 2010-09-17 21:53:34 +0200 (Fri, 17 Sep 2010)
New Revision: 2128

Modified:
   team_levelpacks/team_test_new_api/ralT024_1.xml
   team_levelpacks/team_test_new_api/ralT036_1.xml
   team_levelpacks/team_test_new_api/ralT053_1.xml
   team_levelpacks/team_test_new_api/ralT057_1.xml
   team_levelpacks/team_test_new_api/ralT079_1.xml
   team_levelpacks/team_test_new_api/ralT092_1.xml
   team_levelpacks/team_test_new_api/raoulT14_1.xml
   team_levelpacks/team_test_new_api/raoulT15_1.xml
Log:
testlevel updates, drop on further items

Modified: team_levelpacks/team_test_new_api/ralT024_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT024_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/ralT024_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -45,7 +45,7 @@
 ti["4"] = ti["y"] .. {"#ac_pearl_white"}
 
 w, h = wo(ti, " ", {
-"                    ",
+"                     ",
 "            D  L    ",
 "                    ",
 "E              M    ",

Modified: team_levelpacks/team_test_new_api/ralT036_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT036_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/ralT036_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -16,13 +16,12 @@
     </el:info>
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = true
-
+wo["FollowThreshold"] = po(0, 0)
 ti[" "] = {"fl_sahara"}
 ti["1"] = ti[" "] .. {"#ac_marble"}
 
 w, h = wo(ti, " ", {
-"  ",
-" 1"
+"1"
 })
 
   ]]></el:luamain>

Modified: team_levelpacks/team_test_new_api/ralT053_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT053_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/ralT053_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -23,16 +23,16 @@
 ti["#"] = {"st_granite"}
 ti["y"] = {"it_yinyang"}
 ti["."] = {"st_box"}
-ti["w"] = {"st_box", "w"}
+ti["w"] = {"st_box", "w#"}
 ti["s"] = {"st_scissors"}
 ti["S"] = {"st_swap"}
 ti["r"] = {"st_rubberband"}
 ti["R"] = {"it_rubberband", anchor2="a3", length=3, strength=50, threshold=1.5}
 ti["p"] = {"it_rubberband", anchor2="a2", length=3, strength=10, threshold=2.5, max=4, min=4}
 ti["P"] = {"it_rubberband", anchor2="a2", length=3, strength=10, threshold=2.5, max=5, min=2}
-ti["Q"] = {"it_rubberband", anchor2="w", length=3, strength=10, threshold=2.5, max=5, min=2}
+ti["Q"] = {"it_rubberband", anchor2="@w#*", length=3, strength=10, threshold=2.5, max=5, min=2}
 ti["q"] = {"it_rubberband", anchor2="@@s#*", length=3, strength=10, threshold=2.5}
-ti["U"] = {"it_rubberband", anchor2="w", length=3, strength=10, threshold=2.5, max=9, min=3, target="cutme"}
+ti["U"] = {"it_rubberband", anchor2="@w#*", length=3, strength=10, threshold=2.5, max=9, min=3, target="cutme"}
 ti["u"] = {"it_rubberband", anchor2="a2", length=4, strength=10, threshold=2.5, max=6, min=3, target="shatter"}
 
 ti["a"] = {"it_wormhole", "wa", range=0.5, scissor=false}
@@ -46,7 +46,7 @@
 w, h = wo(ti, " ", {
 "*   #  r  r  r  a  *",
 "   ##               ",
-"qq  1               ",
+"qq  1             w ",
 "                    ",
 "             2      ",
 "R                  U",
@@ -63,7 +63,7 @@
 --wo:add({"ot_rubberband", anchor1="a1", anchor2="a2", length=4, strength=10, threshold=2})
 --wo:add({"ot_rubberband", anchor1="a1", anchor2="a2", length=3, strength=10, threshold=2, max=5, min=5})
 --wo:add({"ot_rubberband", anchor1="a3", anchor2="w", length=3, strength=20})
-wo:add({"ot_rubberband", anchor1="a1", anchor2="w", length=3, strength=10, threshold=2, max=4, min=4})
+--wo:add({"ot_rubberband", anchor1="a1", anchor2="w", length=3, strength=10, threshold=2, max=4, min=4})
 
 function cutme(value, sender)
     if not value then

Modified: team_levelpacks/team_test_new_api/ralT057_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT057_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/ralT057_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -66,6 +66,7 @@
 ti["1"] = ti["y"] .. {"#ac_marble_black"}
 ti["2"] = ti["y"] .. {"#ac_marble_white"}
 ti["3"] = {"#ac_pearl_white", controllers=0}
+ti["4"] = {"#ac_bug"}
 
 w, h = wo(ti, " ", {
 "                    ",
@@ -74,9 +75,9 @@
 "          r       O ",
 "     R    S   G     ",
 "                  I ",
-"  b  E    B         ",
-"          m    333  ",
-"       1   2        ",
+"  b  E    B     4   ",
+"          m 12 333  ",
+"                    ",
 "   a           n    ",
 "   Re    A    wTe t ",
 "   s    wGe         ",

Modified: team_levelpacks/team_test_new_api/ralT079_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT079_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/ralT079_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -34,6 +34,7 @@
 ti["C"] = {"it_crack"}
 ti["x"] = {"it_cross"}
 ti["+"] = {"it_extralife"}
+ti["#"] = {"st_brake"}
 
 ti["y"] = {"st_yinyang"}
 ti["Y"] = {"st_yinyang_active"}
@@ -72,7 +73,7 @@
 ti["p"] = {"st_puzzle", cluster=1}
 
 w, h = wo(ti, " ", {
-"L   &   ddd  448   C",
+"L   & # ddd  448   C",
 "P   b   ddd         ",
 "   b    ddd     w  x",
 "          e         ",

Modified: team_levelpacks/team_test_new_api/ralT092_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT092_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/ralT092_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -36,9 +36,7 @@
 ti["G"] = ti["p"] .. {"st_grate"}
 
 ti["I"] = {"fl_ice"}
-ti["_"] = {"fl_swamp"}
 ti["o"] = {"it_burnable_oil"} .. ti["I"] 
-ti["="] = {"it_burnable_oil"} .. ti["_"] 
 ti["d"] = {"it_dynamite"}
 ti["D"] = ti["d"] .. ti["I"] 
 ti["O"] = {"it_burnable_oil"} .. ti{"st_ice"}
@@ -54,9 +52,9 @@
 "       S N T     C  ",
 "                 G  ",
 "                    ",
-" ___  III           ",
-" _=_  DoD    dOd    ",
-" ___  III      d    ",
+"      III           ",
+"      DoD    dOd    ",
+"      III      d    ",
 "                    ",
 })
 

Modified: team_levelpacks/team_test_new_api/raoulT14_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT14_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/raoulT14_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -64,6 +64,7 @@
       <el:string el:key="title">
         <el:english el:translate="false"/>
       </el:string>
-    </el:i18n>
+   </el:i18n>
   </el:protected>
 </el:level>
+

Modified: team_levelpacks/team_test_new_api/raoulT15_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT15_1.xml	2010-09-17 12:31:30 UTC (rev 2127)
+++ team_levelpacks/team_test_new_api/raoulT15_1.xml	2010-09-17 19:53:34 UTC (rev 2128)
@@ -18,11 +18,16 @@
 ti["d"] = {"it_drop"}
 ti["w"] = {"it_weight"}
 ti["p"] = {"it_pin"}
+ti["j"] = {"it_spring_drop"}
+ti["e"] = {"it_sensor_exit"}
+ti["t"] = {"it_sensor"}
 
-ti["S"] = {"fl_scales", target="light"}
+ti["S"] = {"fl_scales", target="light", min=11}
 ti[">"] = {"st_laser", name="light"}
 
 ti["T"] = {"fl_thief"}
+ti["V"] = {"it_vortex", "v1", destination="v2"}
+ti["W"] = {"it_vortex", "v2", destination="v1"}
 
 ti["+"] = {"st_charge_plus"}
 ti["-"] = {"st_charge_minus"}
@@ -41,10 +46,10 @@
     "#                  #",
     "# z      @      A  #",
     "# -             A  #",
-    "# +      ppp    A  #",
+    "# +      pppj   A  #",
     "#                  #",
     "# dddddddddddddddd #",
-    "#                  O",
+    "#   V   t  e   W   O",
     "####################"})
 
 wo:shuffleOxyd()



From a_abraham at mail.berlios.de  Tue Sep 21 18:30:46 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Tue, 21 Sep 2010 18:30:46 +0200
Subject: [Enigma-game-svn] r2129 - trunk
Message-ID: <20100921163046.AE6AF480134@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-21 18:30:46 +0200 (Tue, 21 Sep 2010)
New Revision: 2129

Modified:
   trunk/README
Log:
Added autogen.sh, increased level count.


Modified: trunk/README
===================================================================
--- trunk/README	2010-09-17 19:53:34 UTC (rev 2128)
+++ trunk/README	2010-09-21 16:30:46 UTC (rev 2129)
@@ -8,7 +8,7 @@
 be, if it weren't for hidden traps, vast mazes, insurmountable
 obstacles and innumerable puzzles blocking your direct way to the Oxyd
 stones... If you like puzzle games and have a steady hand, Enigma's
-more than 500 levels will probably keep you busy for hours on end.
+more than 1500 levels will probably keep you busy for hours on end.
 
 Enigma is developed by a small group of volunteers, and help is always
 appreciated.  If you like Enigma and want to contribute to its future,
@@ -77,7 +77,7 @@
 
 Once you have everything installed, building Enigma is as easy as typing
 
-    ./configure && make && make install
+    ./autogen.sh && ./configure && make && make install
 
 in the enigma directory.
 



From a_abraham at mail.berlios.de  Tue Sep 21 21:10:25 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Tue, 21 Sep 2010 21:10:25 +0200
Subject: [Enigma-game-svn] r2130 - trunk/doc/reference
Message-ID: <20100921191026.6C8E5480053@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-21 21:10:25 +0200 (Tue, 21 Sep 2010)
New Revision: 2130

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Fixed duplicate words and spacing.
Added @findex


Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2010-09-21 16:30:46 UTC (rev 2129)
+++ trunk/doc/reference/enigma-ref.texi	2010-09-21 19:10:25 UTC (rev 2130)
@@ -183,7 +183,7 @@
 named @samp{dirname.zip}. The path of the file within the zip can be either
 @samp{dirname/filename} or @samp{./filename}. In case a resource is provided
 in zipped and unzipped form, the plain file stored in a directory wins, since Enigma
-assumes it to to be an update to the zip.
+assumes it to be an update to the zip.
 
 @node Startup Switches
 @section Startup Switches
@@ -1741,7 +1741,7 @@
 @item @b{/level/public/i18n}, @i{optional, single occurrence}
 
 This public i18n section contains further translations supplied for the level. They
-may derive from the author or other sources. The translators  will
+may derive from the author or other sources. The translators will
 validate these translations, and they continue in use if the translators do not
 supply corrected versions. See @ref{Internationalization (i18n)}.
 
@@ -1827,7 +1827,7 @@
 from libraries, external data and the editor program that generated the level.
 
 @item @b{modes}, @i{required}
-The @ref{<modes>} that the level supports, such as difficulty, network  and control.
+The @ref{<modes>} that the level supports, such as difficulty, network and control.
 
 @item @b{comments}, @i{optional}
 Optional comments, such as credits, dedication and code comments. See @ref{<comments>}.
@@ -1968,11 +1968,11 @@
 
 If Enigma finds two levelfiles in its data search paths with identical filenames,
 id, score and release version, it will load the one with the higher revision number.
-This feature guarantees that  an older level revision stored on the user's
+This feature guarantees that an older level revision stored on the user's
 home level directory cannot supersede a new revision of a level distributed with a new
 Enigma release. Online updates will check the level revision numbers, too.
 
-Although  the revision evaluates to a number, the attribute can take a second
+Although the revision evaluates to a number, the attribute can take a second
 string format as the literal keyword @samp{$Revision$}. This
 @url{http://subversion.tigris.org/, Subversion} format allows level authors to
 let their Subversion repository automatically insert the level revision number. They must simply
@@ -2179,7 +2179,7 @@
 @item @b{path}, @i{required}
 The resource path of the external data file without its suffix @samp{.txt}. The
 path has to be either of the format @code{"./name"} for an external data file
-that is locally  stored in the same folder as the level file, or will be saved
+that is locally stored in the same folder as the level file, or will be saved
 at this position when it gets downloaded. Or the path can be of the format
 @code{"externaldata/name"} for shared external data files, that are referenced
 by multiple level files stored at different folders. The external data file will
@@ -2591,7 +2591,7 @@
 --xml--     <el:info el:type="level">
 --xml--       <el:identity el:title="Demo Simple" el:id="20060210ral001"/>
 --xml--       <el:version el:score="1" el:release="1" el:revision="0" el:status="stable"/>
---xml--       <el:author  el:name="Ronald Lamprecht"/>
+--xml--       <el:author el:name="Ronald Lamprecht"/>
 --xml--       <el:copyright>Copyright @copyright{} 2006 Ronald Lamprecht</el:copyright>
 --xml--       <el:license el:type="GPL2" el:open="true">GPL v2.0 or above</el:license>
 --xml--       <el:compatibility el:enigma="0.92"/>
@@ -2669,7 +2669,7 @@
 If Enigma loads a new level version, which differs just in the @samp{@b{revision}}, we speak of
 an @samp{@b{update}}. You can perform updates automatically and replace old versions with
 the updates, since the author guarantees them to be compatible in scoring and
-dependencies. The  author should provide a download address for automatic updates in the
+dependencies. The author should provide a download address for automatic updates in the
 protected info element:
 
 @example
@@ -2779,7 +2779,7 @@
 @node Maintaining a Library
 @subsection Maintaining a Library
 
-Libraries may exist in different releases and revisions. Library versions that differ simply  in the
+Libraries may exist in different releases and revisions. Library versions that differ simply in the
 revision, denote compatible versions. Library versions that introduce incompatibilities must
 differ in the release number. However, since existing levels may depend on the legacy behavior
 of the older release, you must maintain both library release versions and distribute them with
@@ -2935,7 +2935,7 @@
 @cindex grid position
 But most objects like stones can only be placed on the fixed integral grid
 positions. Even if you try to put a stone on @{1.5,@ 2.5@} it will be put on
-on the grid position @{1,@ 2@}. Thus we speak of a @dfn{grid position} if just the
+the grid position @{1,@ 2@}. Thus we speak of a @dfn{grid position} if just the
 integral part is taken into account. You may note that a tile is positioned
 according to its upper left corner. Actually the upper and the left edge are
 part of a tile, whereas the right and lower edge belong to the neighbour tiles.
@@ -3254,7 +3254,7 @@
 will brake, too. For the sake of the level authors the identity of the object
 will be transferred even if the reference gets invalid. And like the user
 attributes the name is part of the object identity. Thus if you name an
- at ref{st_blocker} and it it shrinks to an @ref{it_blocker} you will retrieve this
+ at ref{st_blocker} and it shrinks to an @ref{it_blocker} you will retrieve this
 item if you ask the name object repository for the named object.
 
 When an object like a door is completely killed, e.g. by an @ref{it_seed},
@@ -3348,7 +3348,7 @@
 
 A group is an ordered set of @ref{Object Reference}s. As all contained objects
 must exist this value is seldom used for attributes in object declarations.
-But is is very useful for postprocessing of objects and for usage within
+But it is very useful for postprocessing of objects and for usage within
 @ref{Callback Function}s.
 
 The most complex attribute value type are the tokens. Their purpose is the
@@ -3563,6 +3563,7 @@
 @node Callback Function
 @subsection Callback Function
 
+ at findex Callback Function
 @cindex callback function
 The most powerful extension to the @ref{Target - Action} paradigm that you can
 think of are callback functions. Instead of a target object as receiver of an
@@ -4033,7 +4034,7 @@
  4       <el:info el:type="level">
  5         <el:identity el:title="Basic Level" el:subtitle="" el:id="20080721ral513"/>
  6         <el:version el:score="1" el:release="1" el:revision="$Revision: 1170 $" el:status="experimental"/>
- 7         <el:author  el:name="Ronald Lamprecht" el:email="ral@@users.berlios.de"/>
+ 7         <el:author el:name="Ronald Lamprecht" el:email="ral@@users.berlios.de"/>
  8         <el:copyright>Copyright @copyright{} 2008 Ronald Lamprecht</el:copyright>
  9         <el:license el:type="GPL v2.0 or above" el:open="true"/>
 10         <el:compatibility el:enigma="@var{1.10}"/>
@@ -4457,7 +4458,7 @@
 @item @b{default:} @i{preset variable:} @code{@b{DEFAULT}}; @ @ @xref{Object Attributes}
 The singleton type of default values that can be used instead of Lua's @samp{nil}
 in anonymous table tile definitions.
- at item @b{tile:}@ @ @xref{Tile and Object Declaration	}
+ at item @b{tile:}@ @ @xref{Tile and Object Declaration}
 A description of one or several objects for a common grid position (floor, item,
 stone, actor)
 @item @b{tiles:} @i{preset variable:} @code{@b{ti}}; @ @ @xref{Tiles Repository}
@@ -5928,7 +5929,7 @@
 like existence differ on both datatypes. Of course all objects placed in the
 world are limited to positions within the world. But be aware that portable
 @ref{Item Objects} can well be part of a player's inventory and thus report a
-position  outside of the world. Actors will always report positions rounded to
+position outside of the world. Actors will always report positions rounded to
 the containing grid. This feature is legacy. As Lua code is anyway inappropriate
 to handle actor movements we maintained this rounding feature.
 
@@ -6058,7 +6059,7 @@
 @item @b{Details:}
 Kills the object at once. Note that you should never kill a sender object
 within a callback action. If you have need of killing the sender then add
-the attribute @ref{safeaction} as explained in @ref{Target - Action }.
+the attribute @ref{safeaction} as explained in @ref{Target - Action}.
 
 @item @b{Syntax Samples:}
 @example
@@ -6731,7 +6732,7 @@
 
 You can easily create a position list by @ref{PositionList Conversion}, which
 is featured by the @ref{Positions Repository} singleton and allows you to 
-transform a group into a position list by  by the simple expression 
+transform a group into a position list by the simple expression 
 @samp{po(group)}. On the other hand you can retrieve all @ref{Object}s of a 
 basic kind located along a position list path by @ref{Functions} like 
 @samp{st(polist)}, @samp{it(polist)} and @samp{fl(polist)}.
@@ -7891,6 +7892,7 @@
 
 @node assert_bool
 @subsection assert_bool
+ at findex assert_bool
 
 The function @samp{assert_bool} throws an error if a given condition doesn't hold.
 
@@ -7944,6 +7946,7 @@
 
 @node assert_type
 @subsection assert_type
+ at findex assert_type
 
 The function @samp{assert_type} throws an error if the first argument is not of one of the
 specified types.
@@ -8117,6 +8120,7 @@
 @c ----------------- etype --------------------
 @node etype
 @subsection etype
+ at findex etype
 
 The function @samp{etype()} returns the advanced type of its argument.
 
@@ -8163,6 +8167,7 @@
 @c ----------------- fl --------------------
 @node fl
 @subsection fl
+ at findex fl
 
 The function @samp{fl()} retrieves the floor objects for the given position or
 positions.
@@ -8199,6 +8204,7 @@
 @c ----------------- grp --------------------
 @node grp
 @subsection grp
+ at findex grp
 
 The function @samp{grp()} builds a @ref{Group} out of its argument @ref{Object}s.
 
@@ -8229,6 +8235,7 @@
 @c ----------------- it --------------------
 @node it
 @subsection it
+ at findex it
 
 The function @samp{it()} retrieves the item objects for the given position or
 positions.
@@ -8288,6 +8295,7 @@
 @c ----------------- random --------------------
 @node random
 @subsection random
+ at findex random
 
 The function @samp{random()} is a syntax compatible replacement for the standard
 Lua function @samp{math.random()}. Both names refer to the same Enigma random
@@ -8320,6 +8328,7 @@
 @c ----------------- st --------------------
 @node st
 @subsection st
+ at findex st
 
 The function @samp{st()} retrieves the stone objects for the given position or
 positions.
@@ -8357,6 +8366,7 @@
 @c ----------------- usertype --------------------
 @node usertype
 @subsection usertype
+ at findex usertype
 
 The function @samp{usertype()} returns type info for Enigma data types.
 
@@ -8708,7 +8718,7 @@
 @subsection fellows
 
 An attribute that gives you access to the group of all objects that are currently
-connected either by an @ref{ot_rubberband} or an  @ref{ot_wire}.
+connected either by an @ref{ot_rubberband} or an @ref{ot_wire}.
 
 Note that this attribute is read only. It is just for evaluation of the current
 level state. But to add new rubberbands or wires you need to use the
@@ -9112,7 +9122,7 @@
 @subsection meditation types
 
 Number constants for @ref{it_meditation} attribute @ref{state}. Please choose
-the  constant that is appropriate for an object and do avoid using numbers.
+the constant that is appropriate for an object and do avoid using numbers.
 
 @itemize @bullet
 @item @samp{MEDITATION_CALDERA} = @code{-3}, by @ref{it_meditation}
@@ -12631,7 +12641,7 @@
 @samp{SPOT_HOLLOW}, @samp{SPOT_LIGHTPASSENGER}, @samp{SPOT_SENSOR},
 @samp{SPOT_TRAP} and @samp{SPOT_ACTORIMPULSE}. You can set the @samp{state}
 attribute to a sum of these constants that should apply to given glasses. The
-default is for  backward compatibility
+default is for backward compatibility
 @samp{SPOT_DEATH + SPOT_HOLLOW + SPOT_LIGHTPASSENGER}. When a player wears
 several glasses he spots everything that any of the glasses could spot.
 
@@ -20470,6 +20480,7 @@
 
 @node lib.lua.combine_tables
 @subsection lib.lua.combine_tables
+ at findex lib.lua.combine_tables
 
 @samp{combine_tables} combines all entries of a set or table of tables into one
 common table (i.e., it joins the subtables). As some of the subtables can have
@@ -20511,6 +20522,7 @@
 
 @node lib.lua.deep_copy
 @subsection lib.lua.deep_copy
+ at findex lib.lua.deep_copy
 
 @samp{deep_copy} returns a copy of its argument, where table entries are
 not copied as memory references (like Lua typically does), but complete
@@ -20549,6 +20561,7 @@
 
 @node lib.lua.mod
 @subsection lib.lua.mod
+ at findex lib.lua.mod
 
 A wrapper for the modulo operation.
 
@@ -20594,6 +20607,7 @@
 
 @node lib.lua.print_table
 @subsection lib.lua.print_table
+ at findex lib.lua.print_table
 
 @samp{print_table} is a debug command, which uses the API's @samp{print}
 command to recursively print its argument to the standard output.
@@ -20640,6 +20654,7 @@
 
 @node lib.lua.shuffle
 @subsection lib.lua.shuffle
+ at findex lib.lua.shuffle
 
 @samp{shuffle} randomly resorts its argument, a numerical table.
 
@@ -20693,6 +20708,7 @@
 
 @node lib.lua.to_string
 @subsection lib.lua.to_string
+ at findex lib.lua.to_string
 
 @samp{to_string} is a debug function. It may take anything as argument, and
 tries to return a sensible string describing the type and, if possible, the
@@ -20760,6 +20776,7 @@
 
 @node lib.math.combinations
 @subsection lib.math.combinations
+ at findex lib.math.combinations
 
 @samp{lib.math.combinations} returns a table of all combinations of
 @samp{depth} entries, each of which is chosen from @samp{digits}.
@@ -20800,6 +20817,7 @@
 
 @node lib.math.cubic_polynomial
 @subsection lib.math.cubic_polynomial
+ at findex lib.math.cubic_polynomial
 
 @samp{cubic_polynomial} returns the result of the following polynomial with
 coefficients in @samp{a}:
@@ -20861,6 +20879,7 @@
 
 @node lib.math.cyclic_permutation
 @subsection lib.math.cyclic_permutation
+ at findex lib.math.cyclic_permutation
 
 @samp{cyclic_permutation} returns a random permutation (i.e. a random shuffling)
 of the numbers 1 to @samp{n}, which is cyclic: There exists a closed path from
@@ -20937,6 +20956,7 @@
 
 @node lib.math.digits
 @subsection lib.math.digits
+ at findex lib.math.digits
 
 @samp{lib.math.digits} returns a table whose elements are the digits of
 @samp{number} in base @samp{base}. @samp{base} can be a positive integer (e.g.
@@ -20984,6 +21004,7 @@
 
 @node lib.math.manhattan_distance
 @subsection lib.math.manhattan_distance
+ at findex lib.math.manhattan_distance
 
 @samp{manhattan_distance} calculates the Manhattan distance between two
 positions @samp{pos1} and @samp{pos2}, which is
@@ -21026,6 +21047,7 @@
 
 @node lib.math.mark_components
 @subsection lib.math.mark_components
+ at findex lib.math.mark_components
 
 @samp{mark_components} calculates the connected components of a group of
 floors. Two floors are directly connected if their difference is within a given
@@ -21093,6 +21115,7 @@
 
 @node lib.math.permutation
 @subsection lib.math.permutation
+ at findex lib.math.permutation
 
 @samp{permutation} returns a random permutation (i.e. a random shuffling) of the
 numbers 1 to @samp{n}.
@@ -21124,6 +21147,7 @@
 
 @node lib.math.random_vector
 @subsection lib.math.random_vector
+ at findex lib.math.random_vector
 
 @samp{random_vector} returns a table of @samp{n} random entries.
 
@@ -21168,6 +21192,7 @@
 
 @node lib.math.steps
 @subsection lib.math.steps
+ at findex lib.math.steps
 
 @samp{steps} takes a number @samp{d} and a table of numbers as arguments and
 returns the index of the first number larger or equal @samp{d}, minus one.
@@ -21671,6 +21696,7 @@
 
 @node newMap
 @subsection newMap
+ at findex lib.map.newMap
 
 @samp{wo:newMap} takes a default key, and a premap or width and height as
 arguments, and returns a libmap-map.
@@ -21734,6 +21760,8 @@
 
 @node Map Entry Request
 @subsection Map Entry Request
+ at findex lib.map.get
+ at findex lib.map.set
 
 You may request and set single entries within a libmap-map, using the
 index-operator @samp{[]}.
@@ -21799,6 +21827,7 @@
 
 @node Map Transformation
 @subsection Map Transformation
+ at findex lib.map.transform
 
 You may transform any libmap-map according to the eight map transformation
 constants given in @ref{Rotating and Mirroring Maps}.
@@ -21838,6 +21867,7 @@
 
 @node Map Horizontal Concatenation
 @subsection Map Horizontal Concatenation
+ at findex lib.map.concat_horizontally
 
 You may glue libmap-maps one after another in horizontal direction using
 @samp{..}. Note the similarity to the meaning of @samp{..} in the context of
@@ -21875,6 +21905,7 @@
 
 @node Map Vertical Concatenation
 @subsection Map Vertical Concatenation
+ at findex lib.map.concat_vertically
 
 You may glue libmap-maps on top of each other in vertical direction using
 @samp{+}. Compare with the meaning of @samp{..} (see
@@ -21911,6 +21942,7 @@
 
 @node Map Fusing
 @subsection Map Fusing
+ at findex lib.map.fuse
 
 You may fuse libmap-maps in the way described in @ref{Connecting Two Maps}, by
 interpreting the two keys of the two maps at a position as parts of a combined
@@ -21947,6 +21979,7 @@
 
 @node Map Default Keys
 @subsection Map Default Keys
+ at findex lib.map.set_default_key
 
 A libmap-map always includes a default key, which is used in various places
 throughout the library. It is the placeholder whenever a key out of scope of
@@ -22028,6 +22061,8 @@
 
 @node Map Width and Height
 @subsection Map Width and Height
+ at c @findex lib.map.width
+ at c @findex lib.map.height
 
 A libmap-map always includes its width and height. These determine for example
 the exact position of the second map during a concatenation (see
@@ -22071,6 +22106,7 @@
 
 @node lib.map.covers
 @subsection lib.map.covers
+ at findex lib.map.covers
 
 @code{covers} checks whether a position is within the scope of a map.
 
@@ -22113,6 +22149,7 @@
 
 @node lib.map.defuse
 @subsection lib.map.defuse
+ at findex lib.map.defuse
 
 @code{defuse} returns a table of maps of keylength one, which correspond to the
 first, second, n-th character of each key at each position, respectively.
@@ -22170,6 +22207,7 @@
 
 @node lib.map.extend
 @subsection lib.map.extend
+ at findex lib.map.extend
 
 @code{extend} changes a map in-place such that it covers a given position. If
 the position already is within the scope of the map, nothing happens.
@@ -22206,6 +22244,7 @@
 
 @node lib.map.match
 @subsection lib.map.match
+ at findex lib.map.match
 
 You may use @code{match} to search for patterns or keys within a map.
 @code{match} then returns a position list of grid positions.
@@ -22310,6 +22349,7 @@
 
 @node lib.map.paste
 @subsection lib.map.paste
+ at findex lib.map.paste
 
 @code{paste} copies a map into another map at a given position. This command
 works in-place, i.e. the receiving map is changed, instead of returning a new map.
@@ -22396,6 +22436,7 @@
 
 @node lib.map.print
 @subsection lib.map.print
+ at findex lib.map.print
 
 @code{print} prints a map to standard output. You may use this command for
 debugging purposes, or to support development or translation of a level, but it
@@ -22455,6 +22496,7 @@
 
 @node lib.map.replace
 @subsection lib.map.replace
+ at findex lib.map.replace
 
 @code{replace} replaces all occurrences of a single tile key in a map in-place
 with another tile key.
@@ -22501,6 +22543,7 @@
 
 @node lib.map.replace_outside
 @subsection lib.map.replace_outside
+ at findex lib.map.replace_outside
 
 @code{replace_outside} is a very specialized command, which is used to replace
 all occurrences of a tile key which are connected to the border of the map by a
@@ -22543,6 +22586,7 @@
 
 @node lib.map.sub
 @subsection lib.map.sub
+ at findex lib.map.sub
 
 @code{sub} returns a copy of a rectangular section of a map as a new map.
 
@@ -22594,6 +22638,7 @@
 
 @node lib.map.trim
 @subsection lib.map.trim
+ at findex lib.map.trim
 
 @code{trim} returns the smallest rectangular section of a map as new map such
 that its border consists of a given tile key only, i.e. it trims the original
@@ -22696,6 +22741,8 @@
 
 @node Map Transformation Composition and Powers
 @subsection Map Transformation Composition and Powers
+ at findex lib.map.transformation_compose
+ at findex lib.map.transformation_power
 
 The transformation constants (see @ref{map read directions},
 @ref{Rotating and Mirroring Maps}, @ref{Map Transformation}) can be composed
@@ -22811,6 +22858,7 @@
 
 @node Random Map Transformations
 @subsection Random Map Transformations
+ at findex lib.map.random_transformation
 
 libmap provides the function @code{lib.map.random_transformation()} to pick one
 of the eight transformations by random.
@@ -22838,6 +22886,7 @@
 @c ----------------- libimport --------------------
 @node libimport
 @section libimport
+ at findex lib.import
 
 libimport is dedicated to parse level files of other games or formats and
 typically returns @ref{libmap}-maps. In this context, the word "level" refers to
@@ -22875,6 +22924,7 @@
 
 @node lib.import.unpack_multilevel
 @subsection lib.import.unpack_multilevel
+ at findex lib.import.unpack_multilevel
 
 @samp{unpack_multilevel} extracts a level from a multilevel string. For this,
 it needs a regexp describing a single level line.
@@ -22914,6 +22964,7 @@
 
 @node lib.import.uncompress_rle
 @subsection lib.import.uncompress_rle
+ at findex lib.import.uncompress_rle
 
 @samp{uncompress_rle} takes a string as argument and returns a decoded version
 without run-length encoding.
@@ -22955,6 +23006,7 @@
 
 @node lib.import.level_to_map
 @subsection lib.import.level_to_map
+ at findex lib.import.level_to_map
 
 @samp{level_to_map} breaks a level string down into a table of strings, which
 is then converted into a @ref{libmap}-map.
@@ -22991,6 +23043,7 @@
 
 @node lib.import.map_sokoban
 @subsection lib.import.map_sokoban
+ at findex lib.import.map_sokoban
 
 @samp{map_sokoban} takes a Sokoban multilevel as argument, and returns a
 beautified @ref{libmap}-map.
@@ -23051,6 +23104,7 @@
 @c ----------------- map_wanderer --------------------
 @node lib.import.map_wanderer
 @subsection lib.import.map_wanderer
+ at findex lib.import.map_wanderer
 
 @samp{map_wanderer} takes a Wanderer monolevel as argument, and returns a
 @ref{libmap}-map. Note that Enigma does not yet have the necessary game objects
@@ -23096,6 +23150,7 @@
 @c ----------------- libsoko --------------------
 @node libsoko
 @section libsoko
+ at findex lib.soko.create_sokoball
 
 This library is described as of release 1.
 
@@ -23224,8 +23279,8 @@
 
 The last resolver in the chain will either use the @ref{Tiles Repository}
 @samp{ti} as its subresolver or a @ref{Custom Resolver} function, which will be
- at samp{ti} based, too
-.
+ at samp{ti} based, too.
+
 A typical resolver chain will look like:
 
 
@@ -23287,6 +23342,7 @@
 
 @node Custom Resolver
 @subsection Custom Resolver
+ at findex custom resolver
 
 A customer resolver is a function in the level that allows a dynamic remapping
 of tiles. When this function is registered in the resolver chain it is called
@@ -23315,7 +23371,7 @@
 This can be done by statement @samp{return ti["k"]}, which references the tile
 already declared in the tiles map.
 
-If no suited tile is already declared you can alternatively return a new tile
+If no suitable tile was declared you can alternatively return a new tile
 like @samp{return ti(@{"st_switch", state=ON@})}.
 
 If you decide not to draw any tile at all, you must return an empty tile
@@ -23368,6 +23424,7 @@
 
 @node res.autotile
 @subsection res.autotile
+ at findex res.autotile
 
 Autotiling reduces the number of required tile declarations by generating them
 according to given simple rules. The most common application are a bunch of
@@ -23496,6 +23553,7 @@
 
 @node res.composer
 @subsection res.composer
+ at findex res.composer
 
 The composer resolver reduces the number of required tile declarations by
 generating them by composition of base tiles. Even small levels and nearly
@@ -23553,7 +23611,7 @@
 The search sequence is given by the optional second argument and defaults to
 @code{"123456789"}. In the first step all character positions marked by a
 @samp{1} in the sequence string are maintained in the key string and all others
-are replaced by whitespace. In the second step all  character positions marked
+are replaced by whitespace. In the second step all character positions marked
 by a @samp{2} in the sequence string are maintained in the key string and all
 others are replaced by whitespace. This procedure continues until the number
 equals the key length. All generated subkeys are resolved by the subresolver
@@ -23643,6 +23701,7 @@
 @c ----------------- Maze Resolver --------------------
 @node res.maze
 @subsection res.maze
+ at findex res.maze
 
 The maze resolver supports you in the creation of quite arbitrary mazes. The
 shape is no longer limited to boring rectangular areas of one grid thick walls
@@ -23708,7 +23767,7 @@
 Values for given keys that may occur in any sequence in the anonymous table.
 @item @i{area_value} = @{<@i{rectangular_area} | @i{marked_area}>@}
 The maze area specification, that is either defined as an rectangular area
-or an area marked in the the world's map.
+or an area marked in the world's map.
 @item @i{rectangular_area} = @i{anchor}, @i{width}, @i{height}
 An rectangular area that is given by an anchor position within the world and
 two numbers for the width and height measured in maze cells.
@@ -23754,12 +23813,15 @@
 complete cell. The map can provide arbitrary tiles for cell kernels larger than
 a single grid. The walls can differ on the south and east side, too.
 @item @i{other_renderer} = @i{renderer}  [, @i{other_renderer_args}]
-Enlisting of a a renderer function followed by its specific arguments.
+Enlisting of a renderer function followed by its specific arguments.
 @item @i{renderer}
 The function that does the rendering. By default it is
 @samp{lib.maze.renderer_standard} with the above given arguments. Other supplied
 renderers are @samp{lib.maze.renderer_window} and
 @samp{lib.maze.renderer_strip}
+ at findex lib.maze.renderer_standard
+ at findex lib.maze.renderer_window
+ at findex lib.maze.renderer_strip
 
 @item @i{persistence}
 A boolean flag that defaults to @samp{false}. You need to set it to @samp{true}
@@ -23792,6 +23854,7 @@
 
 @node res.puzzle
 @subsection res.puzzle
+ at findex res.puzzle
 
 The puzzle resolver helps you to reduce the number of required tile declarations
 for clusters of @ref{st_puzzle} stones. By usage of the @samp{cluster} attribute
@@ -23960,6 +24023,7 @@
 
 @node res.random
 @subsection res.random
+ at findex res.random
 
 With map based level description you have explicit control about the objects
 being set on every single grid. But sometimes you may want to introduce some
@@ -24063,6 +24127,7 @@
 @c ----------------- Train Resolver --------------------
 @node res.train
 @subsection res.train
+ at findex res.train
 
 The train resolver supports you in the set up of train like wandering floor
 chains. Usually short passages of solid standard floors wander on a closed
@@ -24457,7 +24522,7 @@
 Fire that burns under a stone is not allowed to spread; the only exceptions are
 floating stones like @ref{st_grate}, and those stones that are destroyed by fire
 anyway (@ref{st_box}_wood, @ref{st_box}_hay, @ref{st_flat}_burnable,
- at ref{st_flat}_moveburnable). In contrast to this, fire might also  spread to
+ at ref{st_flat}_moveburnable). In contrast to this, fire might also spread to
 under a movable stone, but not further.
 
 You can stop fire with @code{it_extinguisher}, which creates the fireproof
@@ -24798,6 +24863,7 @@
 
 @node Resolver Configurator
 @subsection Resolver Configurator
+ at findex res.resolvername
 
 The configurator is the function that is being called, when the author
 supplies the resolver specific parameters.
@@ -24879,6 +24945,7 @@
 
 @node Resolver Implementation
 @subsection Resolver Implementation
+ at findex res.composer_implementation
 
 When the map gets evaluated on the world creation the top resolver is asked
 for every key to return the valid tile declaration. This is done with the
@@ -24966,6 +25033,7 @@
 
 @node Resolver Finalizer
 @subsection Resolver Finalizer
+ at findex res.resolver_finalization
 
 If the @ref{Resolver Configurator} provides a finalizer function in its context
 this function will be called once when all tiles from the map have been set.
@@ -25062,7 +25130,7 @@
 (see @ref{Fire Spreading}).
 @item @ref{it_squashed} and @ref{it_cross} can't be removed with
 @ref{it_brush}.
- at item Only function of @ref{it_pencil} is to turn
+ at item The only function of @ref{it_pencil} is to turn
 @ref{st_flat} and its movable variant into the burnable variants.
 @item @ref{it_bottle} doesn't break when a stone is pushed over it.
 @item @ref{st_swap} and @ref{st_pull} may not swap/pull into the level



From a_abraham at mail.berlios.de  Sat Sep 25 15:18:00 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Sat, 25 Sep 2010 15:18:00 +0200
Subject: [Enigma-game-svn] r2131 - trunk/src/gui
Message-ID: <20100925131800.8A2DB480FCF@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-25 15:18:00 +0200 (Sat, 25 Sep 2010)
New Revision: 2131

Modified:
   trunk/src/gui/widgets.cc
Log:
Symetric behaviour of ValuButton, i.e. left click on minimum and 
right click on maximum value have no effect. So far the button
switched from maximum to minimum but not vice versa.


Modified: trunk/src/gui/widgets.cc
===================================================================
--- trunk/src/gui/widgets.cc	2010-09-21 19:10:25 UTC (rev 2130)
+++ trunk/src/gui/widgets.cc	2010-09-25 13:18:00 UTC (rev 2131)
@@ -889,13 +889,16 @@
 void ValueButton::on_action(Widget *) {
     int incr = 1;
     bool stop = false;
-    if (getLastUpSym() == SDLK_PAGEDOWN || getLastUpButton() == SDL_BUTTON_RIGHT ||
-            getLastUpButton() == 5) {  // wheel down
+    if (getLastUpSym() == SDLK_PAGEDOWN || 
+        getLastUpButton() == SDL_BUTTON_RIGHT ||
+        getLastUpButton() == 5) {  // wheel down
         incr = -1;
     }
-    if (getLastUpSym() == SDLK_PAGEDOWN || getLastUpSym() == SDLK_PAGEUP ||
-            getLastUpButton() == SDL_BUTTON_RIGHT ||
-            getLastUpButton() ==  4 || getLastUpButton() == 5) {
+    if (getLastUpSym() == SDLK_PAGEDOWN || 
+        getLastUpSym() == SDLK_PAGEUP ||
+        getLastUpButton() == SDL_BUTTON_RIGHT ||
+        getLastUpButton() == SDL_BUTTON_LEFT  ||
+        getLastUpButton() ==  4 || getLastUpButton() == 5) {
         stop = true;
     }
     if (inc_value(incr)) {



From a_abraham at mail.berlios.de  Sat Sep 25 15:51:43 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Sat, 25 Sep 2010 15:51:43 +0200
Subject: [Enigma-game-svn] r2132 - trunk/src/lev
Message-ID: <20100925135143.34093480FCF@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-25 15:51:43 +0200 (Sat, 25 Sep 2010)
New Revision: 2132

Modified:
   trunk/src/lev/Index.cc
Log:
Fixed erroneous jump to start of levelpack (i.e. level 1) on 
advance when no next level exists.


Modified: trunk/src/lev/Index.cc
===================================================================
--- trunk/src/lev/Index.cc	2010-09-25 13:18:00 UTC (rev 2131)
+++ trunk/src/lev/Index.cc	2010-09-25 13:51:43 UTC (rev 2132)
@@ -636,6 +636,7 @@
             nextMode = NEXT_LEVEL_UNSOLVED;
             break;
         default:
+            // raise error
             break;
         };
 
@@ -644,7 +645,7 @@
         int newPos = currentPosition;
         lev::ScoreManager *scm = lev::ScoreManager::instance();
         lev::RatingManager *ratingMgr = lev::RatingManager::instance();
-        int    difficulty     = app.state->getInt("Difficulty");
+        int difficulty = app.state->getInt("Difficulty");
         
         while (newPos < max - 1 && !found) {
             ++newPos;
@@ -671,8 +672,6 @@
             else
                 found = true;
         }
-        if (!found)
-            newPos = 0; // ?
             
         currentPosition = newPos;
         return found;        



From a_abraham at mail.berlios.de  Sat Sep 25 22:53:37 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Sat, 25 Sep 2010 22:53:37 +0200
Subject: [Enigma-game-svn] r2133 - trunk/data/levels/lib
Message-ID: <20100925205337.2989D480FCF@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-25 22:53:36 +0200 (Sat, 25 Sep 2010)
New Revision: 2133

Modified:
   trunk/data/levels/lib/libimport.xml
Log:
Added support for CR line terminated Sokoban files


Modified: trunk/data/levels/lib/libimport.xml
===================================================================
--- trunk/data/levels/lib/libimport.xml	2010-09-25 13:51:43 UTC (rev 2132)
+++ trunk/data/levels/lib/libimport.xml	2010-09-25 20:53:36 UTC (rev 2133)
@@ -43,7 +43,7 @@
     local level = ""
     -- search the correct sublevel by pattern matching, line for line
     local in_level = false
-    for line in string.gmatch(multilevel, "([^\n\|]*)[\n\|]") do
+    for line in string.gmatch(multilevel, "([^\r\n\|]*)[\r\n\|]") do
         local start_match, end_match = string.find(line, lib.import.line_regexp[format])
         if (start_match == 1) and (end_match == string.len(line)) then
             if not in_level then



From a_abraham at mail.berlios.de  Sun Sep 26 19:25:10 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Sun, 26 Sep 2010 19:25:10 +0200
Subject: [Enigma-game-svn] r2134 - trunk/data/levels/lib
Message-ID: <20100926172510.4BBC9481006@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-26 19:25:10 +0200 (Sun, 26 Sep 2010)
New Revision: 2134

Modified:
   trunk/data/levels/lib/libimport.xml
Log:
Added support for all line endings, i.e. CR, LF or CR+LF.


Modified: trunk/data/levels/lib/libimport.xml
===================================================================
--- trunk/data/levels/lib/libimport.xml	2010-09-25 20:53:36 UTC (rev 2133)
+++ trunk/data/levels/lib/libimport.xml	2010-09-26 17:25:10 UTC (rev 2134)
@@ -43,7 +43,7 @@
     local level = ""
     -- search the correct sublevel by pattern matching, line for line
     local in_level = false
-    for line in string.gmatch(multilevel, "([^\r\n\|]*)[\r\n\|]") do
+    for line in string.gmatch(multilevel, "([^\r\n\|]*)[\r\n\|]+") do
         local start_match, end_match = string.find(line, lib.import.line_regexp[format])
         if (start_match == 1) and (end_match == string.len(line)) then
             if not in_level then



From a_abraham at mail.berlios.de  Sun Sep 26 20:18:37 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Sun, 26 Sep 2010 20:18:37 +0200
Subject: [Enigma-game-svn] r2135 - in trunk/doc/reference: . images
Message-ID: <20100926181837.E14D3481006@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-26 20:18:37 +0200 (Sun, 26 Sep 2010)
New Revision: 2135

Modified:
   trunk/doc/reference/Makefile.am
   trunk/doc/reference/images/Makefile.am
Log:
Added (local) include directory and fixed path to allow out of source builds.



Modified: trunk/doc/reference/Makefile.am
===================================================================
--- trunk/doc/reference/Makefile.am	2010-09-26 17:25:10 UTC (rev 2134)
+++ trunk/doc/reference/Makefile.am	2010-09-26 18:18:37 UTC (rev 2135)
@@ -19,14 +19,14 @@
 	@if [ "${TEXI2HTML}" ]; then \
 	  echo "Creating reference manual"; \
 	  echo "... texi2html ..."; \
-	  ${TEXI2HTML} -Verbose -init_file $(srcdir)/enigma-t2h.init $(srcdir)/enigma-ref.texi; \
+	  ${TEXI2HTML} -I . -Verbose -init_file $(srcdir)/enigma-t2h.init $(srcdir)/enigma-ref.texi; \
 	else \
 	  echo "Warning: texi2html not found"; \
 	fi
 
 .PHONY: splitman
 splitman:
-	${TEXI2HTML} -split chapter -Verbose -init_file $(srcdir)/enigma-t2h.init $(srcdir)/enigma-ref.texi
+	${TEXI2HTML} -split chapter -I . -Verbose -init_file $(srcdir)/enigma-t2h.init $(srcdir)/enigma-ref.texi
 
 .PHONY: pdf
 pdf:

Modified: trunk/doc/reference/images/Makefile.am
===================================================================
--- trunk/doc/reference/images/Makefile.am	2010-09-26 17:25:10 UTC (rev 2134)
+++ trunk/doc/reference/images/Makefile.am	2010-09-26 18:18:37 UTC (rev 2135)
@@ -1,8 +1,11 @@
 
 PNG = first_level.png construction.png ralD006_1.png
 
-GFXDIR = ../../../data/gfx48
+CONVERTOPT = -density 112x112 -units PixelsPerCentimeter
 
+# Enable out of source build
+GFXDIR = $(abs_srcdir)/../../../data/gfx48
+
 # List of files to copy from GFXDIR
 SIMPLEPNG = \
 	ac_bug.png \
@@ -341,142 +344,140 @@
 all: $(PNGLIST)
 
 %_framed.png: $(GFXDIR)/%.png $(GFXDIR)/floor_frame.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 -composite $< $(GFXDIR)/floor_frame.png $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 -composite $< $(GFXDIR)/floor_frame.png $@
 
 fl_scales_%.png: $(GFXDIR)/fl_%.png $(GFXDIR)/fl_scales.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 -composite $< $(GFXDIR)/fl_scales.png  $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 -composite $< $(GFXDIR)/fl_scales.png  $@
 
 %_thief.png: $(GFXDIR)/%_bluegray.png $(GFXDIR)/thief_template.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+288 $(GFXDIR)/thief_template.png template_$@
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 $< base_$@
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -composite base_$@ template_$@ $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+288 $(GFXDIR)/thief_template.png template_$@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 $< base_$@
+	$(CONVERT) $(CONVERTOPT) -composite base_$@ template_$@ $@
 	rm base_$@ template_$@
 
 %_thief_capture.png: $(GFXDIR)/%_bluegray.png $(GFXDIR)/thief_capture_template.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+288 $(GFXDIR)/thief_capture_template.png template_$@
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 $< base_$@
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -composite base_$@ template_$@ $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+288 $(GFXDIR)/thief_capture_template.png template_$@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 $< base_$@
+	$(CONVERT) $(CONVERTOPT) -composite base_$@ template_$@ $@
 	rm base_$@ template_$@
 
 %_thief_drunken.png: $(GFXDIR)/%_bluegray.png $(GFXDIR)/thief_drunken_template.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 $(GFXDIR)/thief_drunken_template.png template_$@
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 $< base_$@
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -composite base_$@ template_$@ $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 $(GFXDIR)/thief_drunken_template.png template_$@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 $< base_$@
+	$(CONVERT) $(CONVERTOPT) -composite base_$@ template_$@ $@
 	rm base_$@ template_$@
 
 ac_%.png: $(GFXDIR)/ac_%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 60x60+0+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 60x60+0+0 $< $@
 
 %_2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+48 $< $@
 
 %_3.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+96 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+96 $< $@
 
 %_4.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+144 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+144 $< $@
 
 %_5.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+192 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+192 $< $@
 
 %_6.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+240 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+240 $< $@
 
 %_7.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+288 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+288 $< $@
 
 %_b.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+48+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+48+0 $< $@
 
 %_b2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+48+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+48+48 $< $@
 
 %_b3.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+48+96 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+48+96 $< $@
 
 %_b4.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+48+144 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+48+144 $< $@
 
 %_b6.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+48+240 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+48+240 $< $@
 
 %_c.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+96+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+96+0 $< $@
 
 %_c2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+96+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+96+48 $< $@
 
 %_c3.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+96+96 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+96+96 $< $@
 
 %_c4.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+96+144 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+96+144 $< $@
 
 %_c6.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+96+240 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+96+240 $< $@
 
 %_d.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+144+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+144+0 $< $@
 
 %_d2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+144+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+144+48 $< $@
 
 %_d3.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+144+96 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+144+96 $< $@
 
 %_d4.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+144+144 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+144+144 $< $@
 
 %_d6.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+144+240 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+144+240 $< $@
 
 %_e.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+192+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+192+0 $< $@
 
 %_e2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+192+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+192+48 $< $@
 
 %_e3.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+192+96 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+192+96 $< $@
 
 %_e4.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+191+144 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+191+144 $< $@
 
 %_f.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+240+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+240+0 $< $@
 
 %_f2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+240+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+240+48 $< $@
 
 %_g.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+288+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+288+0 $< $@
 
 %_g2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+288+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+288+48 $< $@
 
 %_h.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+336+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+336+0 $< $@
 
 %_h2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+336+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+336+48 $< $@
 
 %_i.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+384+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+384+0 $< $@
 
 %_i2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+384+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+384+48 $< $@
 
 %_j.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+432+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+432+0 $< $@
 
 %_j2.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+432+48 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+432+48 $< $@
 
 %.png: $(GFXDIR)/%.png
-	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 $< $@
+	$(CONVERT) $(CONVERTOPT) -crop 48x48+0+0 $< $@
 
 CLEANFILES = $(PNGLIST)
 
 EXTRA_DIST = $(PNG)
-
-



From raoul at mail.berlios.de  Mon Sep 27 11:32:07 2010
From: raoul at mail.berlios.de (raoul at mail.berlios.de)
Date: Mon, 27 Sep 2010 11:32:07 +0200
Subject: [Enigma-game-svn] r2136 - team_levelpacks/team_test_new_api
Message-ID: <20100927093207.8A37748103A@sheep.berlios.de>

Author: raoul
Date: 2010-09-27 11:32:07 +0200 (Mon, 27 Sep 2010)
New Revision: 2136

Added:
   team_levelpacks/team_test_new_api/raoulT16_1.xml
Modified:
   team_levelpacks/team_test_new_api/raoulT10_1.xml
Log:
-> Testlevels for the autolength rubberbands



Modified: team_levelpacks/team_test_new_api/raoulT10_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT10_1.xml	2010-09-26 18:18:37 UTC (rev 2135)
+++ team_levelpacks/team_test_new_api/raoulT10_1.xml	2010-09-27 09:32:07 UTC (rev 2136)
@@ -41,43 +41,33 @@
 local number = 10
 local radius = cond(wo["IsDifficult"], 1.5, 2.5)
 local theta = 2.0*math.pi/number
-local segment = 2.0*radius*math.sin(theta/2.0)
 
 
 for i=0, number-1 do
     wo[no["blackball1"] + po(0.0, 0.5) + po(radius*math.cos(i*theta), radius*math.sin(i*theta))] = ti["a"]
 end
-print(no["killer1#*"])
 actors = no["killer1#*"]:sort()
-print(#actors)
 for i=0, #actors-1 do
-    wo:add({"ot_rubberband", anchor1=actors[i+1], anchor2=actors[(i+1)%number+1], length=segment})
+    wo:add({"ot_rubberband", anchor1=actors[i+1], anchor2=actors[(i+1)%number+1], length=AUTOLENGTH})
 end
 
 
-
 for i=0, number-1 do
     wo[no["blackball2"] + po(0.0, 0.5) + po(radius*math.cos(i*theta), radius*math.sin(i*theta))] = ti["b"]
 end
-print(no["killer2#*"])
 actors = no["killer2#*"]:sort("linear")
-print(#actors)
 for i=0, #actors-1 do
-    wo:add({"ot_rubberband", anchor1=actors[i+1], anchor2=actors[(i+1)%number+1], length=segment})
+    wo:add({"ot_rubberband", anchor1=actors[i+1], anchor2=actors[(i+1)%number+1], length=AUTOLENGTH})
 end
 
 
-
 for i=0, number-1 do
     wo[no["blackball3"] + po(0.0, 0.5) + po(radius*math.cos(i*theta), radius*math.sin(i*theta))] = ti["c"]
 end
-print(no["killer3#*"])
 actors = no["killer3#*"]:sort("circular")
-print(#actors)
 for i=0, #actors-1 do
-    wo:add({"ot_rubberband", anchor1=actors[i+1], anchor2=actors[(i+1)%number+1], length=segment})
+    wo:add({"ot_rubberband", anchor1=actors[i+1], anchor2=actors[(i+1)%number+1], length=AUTOLENGTH})
 end
-
  ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">

Added: team_levelpacks/team_test_new_api/raoulT16_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT16_1.xml	                        (rev 0)
+++ team_levelpacks/team_test_new_api/raoulT16_1.xml	2010-09-27 09:32:07 UTC (rev 2136)
@@ -0,0 +1,69 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Autolength rubberbands" el:subtitle="" el:id="raoult16"/>
+      <el:version el:score="1" el:release="1" el:revision="1" el:status="experimental"/>
+      <el:author  el:name="Raoul Bourquin" el:email=""/>
+      <el:copyright>Copyright ? 2010 Raoul Bourquin</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+ti[" "] = {"fl_dark"}
+ti["#"] = {"st_panel"}
+
+ti["a"] = {"#ac_pearl_black", name="pearl1", owner=YANG, controllers=CTRL_NONE}
+ti["b"] = {"#ac_pearl_black", name="pearl2", owner=YANG, controllers=CTRL_NONE}
+ti["@"] = {"#ac_marble_black"}
+
+ti["c"] = {"ac_pearl", name="pearl#"}
+ti["A"] = {"#ac_marble_white", name="whiteball"}
+
+ti["k"] = {"it_rubberband", strength=300, length=AUTOLENGTH, anchor2="pearl1"}
+ti["l"] = {"it_rubberband", strength=300, length=2.0, anchor2="pearl2"}
+
+ti["R"] = {"st_rubberband", strength=300, length=AUTOLENGTH}
+ti["S"] = {"st_scissors"}
+
+wo(ti, " ", {
+    "####################",
+    "#                 S#",
+    "#                 R#",
+    "#    a#            #",
+    "#    #  k          #",
+    "#                  #",
+    "#       @    A     #",
+    "#                  #",
+    "#       l          #",
+    "#    b             #",
+    "#                  #",
+    "#                  #",
+    "####################"})
+
+
+local number = 10
+local radius = 3
+local theta = 2.0*math.pi/number
+
+for i=0, number-1 do
+    wo[no["whiteball"] + po(0.5,0.5) + po(radius*math.cos(i*theta), radius*math.sin(i*theta))] = ti["c"]
+end
+actors = no["pearl#*"]:sort("circular")
+for i=0, #actors-1 do
+    for j=0, #actors-1 do
+        if i ~= j then
+            wo:add({"ot_rubberband", anchor1=actors[(j+1)%number+1], anchor2=actors[(i+1)%number+1], length=AUTOLENGTH, strength=500})
+        end
+    end
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: team_levelpacks/team_test_new_api/raoulT16_1.xml
___________________________________________________________________
Added: svn:eol-style
   + native



From a_abraham at mail.berlios.de  Mon Sep 27 17:34:05 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Mon, 27 Sep 2010 17:34:05 +0200
Subject: [Enigma-game-svn] r2137 - trunk/src/lev
Message-ID: <20100927153405.E84A1481073@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-27 17:34:05 +0200 (Mon, 27 Sep 2010)
New Revision: 2137

Modified:
   trunk/src/lev/ScoreManager.cc
Log:
Fixed memory leak.


Modified: trunk/src/lev/ScoreManager.cc
===================================================================
--- trunk/src/lev/ScoreManager.cc	2010-09-27 09:32:07 UTC (rev 2136)
+++ trunk/src/lev/ScoreManager.cc	2010-09-27 15:34:05 UTC (rev 2137)
@@ -138,7 +138,7 @@
                 hasValidStateUserId = true;
                 Log << "User id '" << stateUserId << "'\n";
             } else 
-                Log << "Bad user id '" << ecl::strf("%.4lX %.4lX %.4lX %.4lX",i1, i2,i3, i4) << "'\n";
+                Log << "Bad user id '" << ecl::strf("%.4X %.4X %.4X %.4X", i1, i2, i3, i4) << "'\n";
                 
         }
         
@@ -240,7 +240,7 @@
                         hasValidUserId = true;
                     } else {
                         // create first part of user id based on time stamp
-                        userId = ecl::strf("%.8lX", Rand(false));
+                        userId = ecl::strf("%.8X", Rand(false));
                         // we need a second random part as 2 users may start Enigma
                         // within the same second - we postpone this part till we save
                     }
@@ -325,7 +325,7 @@
         s2 >> std::hex >> i2;
         i3 = id3 & 0xFFFF;
         i4 = (i1 ^ i2 ^ i3);
-        userId += ecl::strf("%.4lX%.4lX",i3, i4);
+        userId += ecl::strf("%.4X%.4X",i3, i4);
         app.state->setProperty("UserId", userId);
         setProperty("UserId", userId);
         hasValidUserId = true;
@@ -338,7 +338,7 @@
         
         while (len--)
             r = (r<<8 & 0xFFFF) ^ ctab[(r >> 8) ^ *p++];
-        return ecl::strf("%.4lX", r); 
+        return ecl::strf("%.4X", r); 
     }
 
     bool ScoreManager::save() {
@@ -362,14 +362,14 @@
             setProperty("UserId1.00", userId);
             app.state->setProperty("UserId1.00", userId);
             unsigned id1 = Rand(false) & 0xFFFF;
-            userId.replace(0, 4, ecl::strf("%.4lX",id1));
+            userId.replace(0, 4, ecl::strf("%.4X",id1));
             unsigned id2, id3, id4;
             std::istringstream s2(userId.substr(4, 4));
             std::istringstream s3(userId.substr(8, 4));
             s2 >> std::hex >> id2;
             s3 >> std::hex >> id3;
             id4 = (id1 ^ id2 ^ id3);
-            userId.replace(12, 4, ecl::strf("%.4lX",id4));
+            userId.replace(12, 4, ecl::strf("%.4X",id4));
             app.state->setProperty("UserId", userId);
             setProperty("UserId", userId);
             Log << "new id: " << userId << "\n";
@@ -433,7 +433,9 @@
 //            result = app.domSer->writeToURI(doc, LocalToXML(& path).x_str());
                 if (j==1)
                     (app.domSer)->setFilter(&serialFilter);
-                std::string contents(XMLtoUtf8(app.domSer->writeToString(doc)).c_str());
+                XMLCh* XMLString = app.domSer->writeToString(doc);
+                std::string contents(XMLtoUtf8(XMLString).c_str());
+                XMLString::release(&XMLString); 
                 if (j==1)
                     (app.domSer)->setFilter(NULL);
                 contents.replace(contents.find("UTF-16"), 6, "UTF-8"); // adapt encoding info



From a_abraham at mail.berlios.de  Thu Sep 30 17:12:25 2010
From: a_abraham at mail.berlios.de (a_abraham at mail.berlios.de)
Date: Thu, 30 Sep 2010 17:12:25 +0200
Subject: [Enigma-game-svn] r2138 - trunk/data/levels/enigma_ii
Message-ID: <20100930151225.DB945481013@sheep.berlios.de>

Author: a_abraham
Date: 2010-09-30 17:12:25 +0200 (Thu, 30 Sep 2010)
New Revision: 2138

Modified:
   trunk/data/levels/enigma_ii/duffy96_2.xml
Log:
Removed debug output


Modified: trunk/data/levels/enigma_ii/duffy96_2.xml
===================================================================
--- trunk/data/levels/enigma_ii/duffy96_2.xml	2010-09-27 15:34:05 UTC (rev 2137)
+++ trunk/data/levels/enigma_ii/duffy96_2.xml	2010-09-30 15:12:25 UTC (rev 2138)
@@ -288,9 +288,9 @@
     ff10=0
 
     if fff1+fff2+fff3+fff4+fff5+fff6+fff7+fff8+fff9+fff10==10 then
-        print ("Ok")
+--        print ("Ok")
         if dooropen==0 then
-            print ("OkOk")
+--            print ("OkOk")
             SendMessage("door1","open")
             dooropen=1
         end



