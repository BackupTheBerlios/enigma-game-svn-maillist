<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1789 - in trunk: data/levels/enigma_cross	data/levels/enigma_viii data/levels/lib doc/reference
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1789%20-%20in%20trunk%3A%20data/levels/enigma_cross%0A%09data/levels/enigma_viii%20data/levels/lib%20doc/reference&In-Reply-To=%3C200908291918.n7TJIk8s011351%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001217.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1789 - in trunk: data/levels/enigma_cross	data/levels/enigma_viii data/levels/lib doc/reference</H1>
    <B>ral at mail.berlios.de</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1789%20-%20in%20trunk%3A%20data/levels/enigma_cross%0A%09data/levels/enigma_viii%20data/levels/lib%20doc/reference&In-Reply-To=%3C200908291918.n7TJIk8s011351%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1789 - in trunk: data/levels/enigma_cross	data/levels/enigma_viii data/levels/lib doc/reference">ral at mail.berlios.de
       </A><BR>
    <I>Sat Aug 29 21:18:46 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001217.html">[Enigma-game-svn] r1788 - trunk/src
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1218">[ date ]</a>
              <a href="thread.html#1218">[ thread ]</a>
              <a href="subject.html#1218">[ subject ]</a>
              <a href="author.html#1218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-08-29 21:18:36 +0200 (Sat, 29 Aug 2009)
New Revision: 1789

Modified:
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_viii/cel2_1.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/ral21_2.xml
   trunk/data/levels/lib/libpento_1.xml
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1:
- libpento: report false sized target areas by assertions
- fix levels Tutoxyd, Pentachomos on false floor attribute usage
- refman: updates on
  - vortex autoopen
  - polist initialization by position tables

Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-08-28 23:18:52 UTC (rev 1788)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-08-29 19:18:36 UTC (rev 1789)
@@ -119,7 +119,7 @@
     &lt;level _seq=&quot;111&quot; _title=&quot; - Meditation - &quot; _xpath=&quot;enigma_viii/devnull07_1&quot; author=&quot;/dev/null&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;devnull07&quot; rel=&quot;1&quot; rev=&quot;8&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;112&quot; _title=&quot;Relaxing at the sea&quot; _xpath=&quot;enigma_viii/devnull08_1&quot; author=&quot;/dev/null&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;devnull08&quot; rel=&quot;1&quot; rev=&quot;23&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;113&quot; _title=&quot;Helios II&quot; _xpath=&quot;enigma_viii/mecke08_1&quot; author=&quot;mecke&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;mecke08&quot; rel=&quot;1&quot; rev=&quot;26&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;114&quot; _title=&quot;Tutoxyd's Pyramid&quot; _xpath=&quot;enigma_viii/ral21_2&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070822ral291&quot; rel=&quot;2&quot; rev=&quot;173&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;114&quot; _title=&quot;Tutoxyd's Pyramid&quot; _xpath=&quot;enigma_viii/ral21_2&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070822ral291&quot; rel=&quot;2&quot; rev=&quot;180&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;115&quot; _title=&quot;Alternation I&quot; _xpath=&quot;enigma_viii/mecke17_1&quot; author=&quot;mecke&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;mecke17&quot; rel=&quot;1&quot; rev=&quot;14&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;116&quot; _title=&quot;Enigmaparcour II&quot; _xpath=&quot;enigma_viii/mecke29_1&quot; author=&quot;mecke&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;mecke29&quot; rel=&quot;1&quot; rev=&quot;17&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;117&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;enigma_viii/devnull04_1&quot; author=&quot;/dev/null&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;devnull04&quot; rel=&quot;1&quot; rev=&quot;10&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: trunk/data/levels/enigma_viii/cel2_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/cel2_1.xml	2009-08-28 23:18:52 UTC (rev 1788)
+++ trunk/data/levels/enigma_viii/cel2_1.xml	2009-08-29 19:18:36 UTC (rev 1789)
@@ -71,8 +71,8 @@
 ti[&quot;rf&quot;] = {&quot;fl_lawn&quot;} .. ti({&quot;it_floppy&quot;})
 ti[&quot;rF&quot;] = {&quot;fl_lawn&quot;} .. ti({&quot;st_floppy&quot;, target=&quot;ral_fdoor&quot;, action=&quot;toggle&quot;})
 ti[&quot;rG&quot;] = ti[&quot;r &quot;] .. {&quot;st_door_d_ew&quot;, name=&quot;ral_fdoor&quot;}
-ti[&quot;rj&quot;] = {&quot;fl_lawn&quot;, friction=6.0, type=&quot;x&quot;} .. ti({&quot;it_key&quot;, code=1})
-ti[&quot;rK&quot;] = {&quot;fl_lawn&quot;, friction=6.0, type=&quot;x&quot;} .. ti({&quot;it_key&quot;, code=4})
+ti[&quot;rj&quot;] = {&quot;fl_lawn&quot;, friction=6.0} .. ti({&quot;it_key&quot;, code=1})
+ti[&quot;rK&quot;] = {&quot;fl_lawn&quot;, friction=6.0} .. ti({&quot;it_key&quot;, code=4})
 ti[&quot;r-&quot;] = ti[&quot;r &quot;] .. {&quot;st_switch&quot;, target=&quot;vortexRale&quot;}
 
 -- Dominik Lehmann

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-08-28 23:18:52 UTC (rev 1788)
+++ trunk/data/levels/enigma_viii/index.xml	2009-08-29 19:18:36 UTC (rev 1789)
@@ -43,7 +43,7 @@
     &lt;level _seq=&quot;35&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./raoul31_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul31&quot; rel=&quot;1&quot; rev=&quot;8&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;36&quot; _title=&quot;Relaxing at the sea&quot; _xpath=&quot;./devnull08_1&quot; author=&quot;/dev/null&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;devnull08&quot; rel=&quot;1&quot; rev=&quot;23&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;37&quot; _title=&quot;Helios II&quot; _xpath=&quot;./mecke08_1&quot; author=&quot;mecke&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;mecke08&quot; rel=&quot;1&quot; rev=&quot;26&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;38&quot; _title=&quot;Tutoxyd's Pyramid&quot; _xpath=&quot;./ral21_2&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070822ral291&quot; rel=&quot;2&quot; rev=&quot;173&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;38&quot; _title=&quot;Tutoxyd's Pyramid&quot; _xpath=&quot;./ral21_2&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20070822ral291&quot; rel=&quot;2&quot; rev=&quot;180&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;39&quot; _title=&quot;Alternation I&quot; _xpath=&quot;./mecke17_1&quot; author=&quot;mecke&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;mecke17&quot; rel=&quot;1&quot; rev=&quot;14&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;40&quot; _title=&quot;Enigmaparcour II&quot; _xpath=&quot;./mecke29_1&quot; author=&quot;mecke&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;mecke29&quot; rel=&quot;1&quot; rev=&quot;17&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;41&quot; _title=&quot; - Meditation - &quot; _xpath=&quot;./devnull07_1&quot; author=&quot;/dev/null&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;devnull07&quot; rel=&quot;1&quot; rev=&quot;8&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: trunk/data/levels/enigma_viii/ral21_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/ral21_2.xml	2009-08-28 23:18:52 UTC (rev 1788)
+++ trunk/data/levels/enigma_viii/ral21_2.xml	2009-08-29 19:18:36 UTC (rev 1789)
@@ -3,7 +3,7 @@
   &lt;el:protected &gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Tutoxyd's Pyramid&quot; el:subtitle=&quot;Marble Jones I&quot; el:id=&quot;20070822ral291&quot;/&gt;
-      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;$Revision: 173 $&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;$Revision: 180 $&quot; el:status=&quot;stable&quot;/&gt;
       &lt;el:author  el:name=&quot;Ronald Lamprecht&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">ral at users.berlios.de</A>&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2007,2008,2009 Ronald Lamprecht&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
@@ -35,7 +35,7 @@
 ti[&quot;LZ&quot;] = {&quot;fl_gravel&quot;, &quot;sunlight1&quot;}
 ti[&quot;LY&quot;] = {&quot;fl_gravel&quot;, &quot;sunlight2&quot;}
 ti[&quot;RZ&quot;] = {&quot;fl_gravel&quot;, &quot;ringroom&quot;}
-ti[&quot;;;&quot;] = {&quot;fl_dunes&quot;, friction=6, mousefactor=2}
+ti[&quot;;;&quot;] = {&quot;fl_dunes&quot;, friction=6, adhesion=2}
 ti[&quot;''&quot;] = {&quot;fl_sahara&quot;}
 ti[&quot;%%&quot;] = {&quot;fl_samba&quot;}
 ti[&quot;%.&quot;] = {&quot;fl_samba&quot;, &quot;volcan#&quot;, secure=true}

Modified: trunk/data/levels/lib/libpento_1.xml
===================================================================
--- trunk/data/levels/lib/libpento_1.xml	2009-08-28 23:18:52 UTC (rev 1788)
+++ trunk/data/levels/lib/libpento_1.xml	2009-08-29 19:18:36 UTC (rev 1789)
@@ -40,7 +40,7 @@
         end
     end
     context.target_area = no[&quot;target#*&quot;]
-    assert_bool(#context.target_area == 60, &quot;Pentomino target area not 60 grids.&quot;, 2)
+    local dummy = (assert_bool)(#context.target_area == 60, &quot;Pentomino target area not 60 grids.&quot;, 2)
 
     context.last_shape = 12
     

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-08-28 23:18:52 UTC (rev 1788)
+++ trunk/doc/reference/enigma-ref.texi	2009-08-29 19:18:36 UTC (rev 1789)
@@ -6654,6 +6654,23 @@
 @example
 @var{newpolist} = @i{po}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) .. @i{po}(@var{4}, @var{4}) -- = (2,3),(5,7),(4,4)
 @end example
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Caveats:}
+Note that due to the value nature of position lists the concatenation creates
+a new value. This is an expensive operation. When you are collecting potentially
+large number of positions in a loop, you should not concat each new candidate
+to an existing position list. Avoid the creation of numerous position list 
+values and collect the positions in a standard Lua table. Convert this table
+at the end to a position list (@xref{PositionList Conversion}).
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at example</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{result} = @{@}
+for @var{x} = 1, 200 do
+    table.insert(@var{result}, @i{po}(@var{x}, 17))
+end
+return @i{po}(@var{result})
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> example
+
 @end table
 
 @c ----------------- PositionList Translation --------------------
@@ -6809,15 +6826,17 @@
 
 @table @asis
 @item @b{Syntax:}
-result = po(@i{group})
+result = po(@i{group} | @{@i{pos1}, @i{pos2}, @i{pos3}@})
 
 @item @b{Details:}
-Converts the given group to a new @ref{PositionList} value, that contains
-the positions of all valid group @ref{Object}s in the same sequence.
+Converts the given group or table of positions to a new @ref{PositionList}
+value, that contains the positions of all valid group @ref{Object}s or table
+members in the same sequence.
 
 @item @b{Syntax Samples:}
 @example
 @var{polist} = @i{po}(@var{group})
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{polist} = @i{po}(@{@i{po}(@var{3}, @var{7}), @i{po}(@var{2}, @var{6})@})
 @end example
 @end table
 
@@ -13909,7 +13928,13 @@
 Vortices can be @samp{OPEN} or @samp{CLOSED}. Of course an actor can enter just
 an open vortex. Closed vortices at the destination are opened automatically.
 By default such vortices remain open. By usage of the attribute @samp{autoclose}
-you can configure a vortex to close after an actor has been emitted.
+you can configure a vortex to close after an actor has been emitted. This helps
+the user to leave the vortex by keeping the marble from being reinserted into 
+the vortex. Of course an autoclose disables the user to return, too. If this
+is not your intention you set additionally the attribute @samp{autoopen} to
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at code</A>{true}. The vortex will reopen again when the marble leaves the closed
+vortex. If the user did directly jump out of the vortex, it will reopen when
+the user enters the vortex grid again.
 
 Actors are emitted by vortices in a jumping fashion. The user can accelerate
 the actor for a short period and the actor may jump out of a vortex into the
@@ -13944,6 +13969,10 @@
 @item @b{autoclose}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 Flag that indicates whether the vortex should be closed after a teleport.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{autoopen}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
+Flag that indicates whether the vortex should open when an actor enters the grid
+or leaves the vortex.
+
 @item @b{scissor}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
 Rubberband cutting behaviour on teleporting.
 @item @b{freezable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}; @ @ @i{access}: @code{read only} @ @ @xref{freezable}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001217.html">[Enigma-game-svn] r1788 - trunk/src
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1218">[ date ]</a>
              <a href="thread.html#1218">[ thread ]</a>
              <a href="subject.html#1218">[ subject ]</a>
              <a href="author.html#1218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
