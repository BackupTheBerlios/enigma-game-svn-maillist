<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1783 - in trunk: data data/schemas src src/floors
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1783%20-%20in%20trunk%3A%20data%20data/schemas%20src%20src/floors&In-Reply-To=%3C200908262255.n7QMtUmu030429%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001211.html">
   <LINK REL="Next"  HREF="001213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1783 - in trunk: data data/schemas src src/floors</H1>
    <B>ral at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1783%20-%20in%20trunk%3A%20data%20data/schemas%20src%20src/floors&In-Reply-To=%3C200908262255.n7QMtUmu030429%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1783 - in trunk: data data/schemas src src/floors">ral at mail.berlios.de
       </A><BR>
    <I>Thu Aug 27 00:55:30 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001211.html">[Enigma-game-svn] r1782 - homepage/input
</A></li>
        <LI>Next message: <A HREF="001213.html">[Enigma-game-svn] r1784 - trunk/data/levels/pentomino_i
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1212">[ date ]</a>
              <a href="thread.html#1212">[ thread ]</a>
              <a href="subject.html#1212">[ subject ]</a>
              <a href="author.html#1212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-08-27 00:55:24 +0200 (Thu, 27 Aug 2009)
New Revision: 1783

Added:
   trunk/src/floors/StandardFloors.cc
   trunk/src/floors/StandardFloors.hh
Modified:
   trunk/data/schemas/objects.xml
   trunk/data/startup.lua
   trunk/src/Makefile.am
   trunk/src/floors.cc
   trunk/src/floors/SimpleFloors.cc
   trunk/src/floors/SimpleFloors.hh
Log:
Trunk 1.1:
- StandardFloor object with full new API support:
  - complete objects.xml declaration of all floors
  - support of methods like isKind and Lua API &quot;is&quot; for standard floors
- fl_fake and fl_inverse as separated simple floor objects:
  - support of attribute &quot;flavor&quot;


Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/data/schemas/objects.xml	2009-08-26 22:55:24 UTC (rev 1783)
@@ -294,6 +294,7 @@
       &lt;msg name=&quot;setfire&quot;/&gt;
       &lt;msg name=&quot;stopfire&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_standard&quot; abstract=&quot;true&quot;/&gt;
     &lt;object name=&quot;fl_floodstream&quot; abstract=&quot;true&quot;&gt;
       &lt;attr name=&quot;faces&quot;/&gt;
       &lt;attr name=&quot;interval&quot; default=&quot;0.2&quot;/&gt;
@@ -305,6 +306,65 @@
       &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
       &lt;attr name=&quot;noash&quot; default=&quot;true&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_adhesionless&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;2.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;0.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_aquamarine&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;0.4&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_aquamarine_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bast&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;1.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.5&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+      &lt;attr name=&quot;$firetransform&quot; default=&quot;fl_abyss&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bast_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bluegray&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;4.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bluegray_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bluegreen&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bluegreen_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_blueslab&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;7.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_blueslab_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_brick&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_brick_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_bridge&quot;&gt;
       &lt;attr name=&quot;flavor&quot; default=&quot;gc&quot;/&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;5.0&quot;/&gt;
@@ -331,6 +391,73 @@
     &lt;object name=&quot;fl_bridge_bn&quot;&gt;
       &lt;attr name=&quot;flavor&quot; value=&quot;bn&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_bright&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_bright_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_concrete&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;4.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.3&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_concrete_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_dark&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_dark_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_darkgray&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.6&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_darkgray_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_dunes&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;1.3&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_dunes_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_fake&quot;&gt;
+      &lt;attr name=&quot;flavor&quot; default=&quot;abyss&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_fake_abyss&quot;&gt;
+      &lt;attr name=&quot;flavor&quot; value=&quot;abyss&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_fake_trigger&quot;&gt;
+      &lt;attr name=&quot;flavor&quot; value=&quot;trigger&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_gravel&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.2&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_gravel_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_gray&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;5.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;3.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_gray_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_hay&quot; super=&quot;fl_floodstream&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;5.0&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
@@ -339,11 +466,153 @@
     &lt;object name=&quot;fl_hay_framed&quot;&gt;
       &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_himalaya&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;5.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_himalaya_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_ice&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;0.1&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;0.1&quot;/&gt;
       &lt;attr name=&quot;$heattransform&quot; default=&quot;fl_water&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_inverse&quot;&gt;
+      &lt;attr name=&quot;flavor&quot; default=&quot;white&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;-2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_inverse_white&quot;&gt;
+      &lt;attr name=&quot;flavor&quot; value=&quot;white&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_inverse_gray&quot;&gt;
+      &lt;attr name=&quot;flavor&quot; value=&quot;gray&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_ivory&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;2.2&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.6&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_ivory_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_lawn&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;4.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+      &lt;attr name=&quot;$firetransform&quot; default=&quot;fl_dunes&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_lawn_a&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_b&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_c1&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_c2&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_c3&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_c4&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_d1&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_d2&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_d3&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_d4&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_e1&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_e2&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_e3&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_lawn_e4&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_marble&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.4&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_marble_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_metal&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_metal_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_metal_1&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_1_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_2&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_2_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_3&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_3_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_4&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_4_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_5&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_5_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_6&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_6_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_7&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_7_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_metal_7n&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_mortar&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;7.2&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.8&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_mortar_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_pinkbumps&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;5.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.2&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_pinkbumps_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_plank&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;5.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+      &lt;attr name=&quot;$firetransform&quot; default=&quot;fl_abyss&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_plank_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_platinum&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.6&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_platinum_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_red&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;0.9&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_red_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_redslab&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;7.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_redslab_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_rough&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;7.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_rough_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_rock&quot; super=&quot;fl_floodstream&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;6.5&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;2.2&quot;/&gt;
@@ -351,6 +620,28 @@
     &lt;object name=&quot;fl_rock_framed&quot;&gt;
       &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_sahara&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.4&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_sahara_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_samba&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+      &lt;attr name=&quot;$firetransform&quot; default=&quot;fl_abyss&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_samba_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_samba_h&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_samba_h_framed&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_samba_v&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_samba_v_framed&quot; init=&quot;true&quot;/&gt;
     &lt;object name=&quot;fl_slope&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;4.0&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
@@ -358,6 +649,14 @@
       &lt;attr name=&quot;strength&quot;/&gt;
       &lt;attr name=&quot;shape&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_sand&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_sand_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_slope_pw&quot;&gt;
       &lt;attr name=&quot;shape&quot; value=&quot;pw&quot;/&gt;
     &lt;/object&gt;
@@ -434,6 +733,14 @@
       &lt;attr name=&quot;friction&quot; default=&quot;0.0&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;0.0&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_stone&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;1.4&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_stone_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_swamp&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;13.0&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
@@ -444,11 +751,28 @@
       &lt;attr name=&quot;adhesion&quot; default=&quot;1.5&quot;/&gt;
       &lt;msg name=&quot;_capture&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_tigris&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_tigris_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_water&quot; super=&quot;fl_floodstream&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;5.0&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;1.0&quot;/&gt;
       &lt;attr name=&quot;$heattransform&quot; default=&quot;fl_swamp&quot;/&gt;
     &lt;/object&gt;
+    &lt;object name=&quot;fl_white&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;4.0&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_white_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_wood&quot; super=&quot;fl_floodstream&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;6.4&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;
@@ -462,6 +786,15 @@
     &lt;/object&gt;
     &lt;object name=&quot;fl_wood_framed_h&quot; init=&quot;true&quot;/&gt;
     &lt;object name=&quot;fl_wood_framed_v&quot; init=&quot;true&quot;/&gt;
+    &lt;object name=&quot;fl_woven&quot; super=&quot;fl_standard&quot;&gt;
+      &lt;attr name=&quot;faces&quot;/&gt;
+      &lt;attr name=&quot;friction&quot; default=&quot;6.5&quot;/&gt;
+      &lt;attr name=&quot;adhesion&quot; default=&quot;3.0&quot;/&gt;
+      &lt;attr name=&quot;burnable&quot; default=&quot;true&quot;/&gt;
+    &lt;/object&gt;
+    &lt;object name=&quot;fl_woven_framed&quot;&gt;
+      &lt;attr name=&quot;faces&quot; value=&quot;nesw&quot;/&gt;
+    &lt;/object&gt;
     &lt;object name=&quot;fl_yinyang&quot;&gt;
       &lt;attr name=&quot;friction&quot; default=&quot;5.2&quot;/&gt;
       &lt;attr name=&quot;adhesion&quot; default=&quot;2.0&quot;/&gt;

Modified: trunk/data/startup.lua
===================================================================
--- trunk/data/startup.lua	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/data/startup.lua	2009-08-26 22:55:24 UTC (rev 1783)
@@ -118,66 +118,4 @@
 end
 
 -- Floor(kind, friction, adhesion, burnable, firetransform, frames)
-def_floor(&quot;fl_bluegray&quot;,     4.5,   1.5,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_bluegreen&quot;,    6.0,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_aquamarine&quot;,   0.4,   1.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_brick&quot;,        3.5,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_pinkbumps&quot;,    5.0,   1.2,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_concrete&quot;,     4.5,   1.3,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_dunes&quot;,        1.3,   1.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_bast&quot;,         1.5,   2.5,    true,   &quot;fl_abyss&quot;, true)
-def_floor(&quot;fl_gravel&quot;,       3.2,   1.5,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_gray&quot;,         5.0,   3.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_himalaya&quot;,     5.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_inverse&quot;,      3.0,  -2.0,   false,   &quot;&quot;,         false)
-def_floor(&quot;fl_inverse_white&quot;,3.0,  -2.0,   false,   &quot;&quot;,         false)
-def_floor(&quot;fl_inverse_gray&quot;, 3.0,  -2.0,   false,   &quot;&quot;,         false)
-def_floor(&quot;fl_lawn&quot;,         4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_a&quot;,       4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_b&quot;,       4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_c1&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_c2&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_c3&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_c4&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_d1&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_d2&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_d3&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_d4&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_e1&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_e2&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_e3&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_lawn_e4&quot;,      4.0,   1.5,    true,   &quot;fl_dunes&quot;, false)
-def_floor(&quot;fl_ivory&quot;,        2.2,   1.6,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_platinum&quot;,     3.0,   1.6,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_darkgray&quot;,     3.0,   1.6,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_marble&quot;,       6.4,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal&quot;,        3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_1&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_2&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_3&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_4&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_5&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_6&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_7&quot;,      3.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_metal_7n&quot;,     4.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_mortar&quot;,       7.2,   1.8,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_plank&quot;,        5.5,   2.0,    true,   &quot;fl_abyss&quot;, true)
-def_floor(&quot;fl_red&quot;,          0.9,   1.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_rough&quot;,        7.0,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_blueslab&quot;,     7.0,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_redslab&quot;,      7.0,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_sahara&quot;,       6.4,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_samba&quot;,        6.0,   2.0,    true,   &quot;fl_abyss&quot;, true)
-def_floor(&quot;fl_samba_h&quot;,      6.0,   2.0,    true,   &quot;fl_abyss&quot;, true)
-def_floor(&quot;fl_samba_v&quot;,      6.0,   2.0,    true,   &quot;fl_abyss&quot;, true)
-def_floor(&quot;fl_sand&quot;,         6.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_white&quot;,        4.0,   2.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_stone&quot;,        1.4,   1.0,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_tigris&quot;,       6.0,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_woven&quot;,        6.5,   3.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_adhesionless&quot;, 2.5,   0.0,    true,   &quot;&quot;,         false)
-def_floor(&quot;fl_dark&quot;,         3.0,   1.5,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_bright&quot;,       3.0,   1.5,   false,   &quot;&quot;,         true)
-def_floor(&quot;fl_fake_trigger&quot;, 3.0,   2.0,    true,   &quot;&quot;,         true)
-def_floor(&quot;fl_fake_abyss&quot;,   3.0,   2.0,   false,   &quot;&quot;,         false)
 

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/src/Makefile.am	2009-08-26 22:55:24 UTC (rev 1783)
@@ -162,6 +162,8 @@
 	floors/SimpleFloors.hh	\
 	floors/SlopeFloor.cc	\
 	floors/SlopeFloor.hh	\
+	floors/StandardFloors.cc	\
+	floors/StandardFloors.hh	\
 	floors/ThiefFloor.cc	\
 	floors/ThiefFloor.hh	\
 	gui/ErrorMenu.cc	\

Modified: trunk/src/floors/SimpleFloors.cc
===================================================================
--- trunk/src/floors/SimpleFloors.cc	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/src/floors/SimpleFloors.cc	2009-08-26 22:55:24 UTC (rev 1783)
@@ -59,9 +59,22 @@
         Log &lt;&lt; ecl::strf(&quot;Entering floor 0x%x\n&quot;, code);
     }
 
+/* -------------------- FakeFloor -------------------- */
+
+    FakeFloor::FakeFloor(std::string flavor) : Floor (&quot;fl_fake&quot;) {
+        setAttr(&quot;flavor&quot;, flavor);
+    }
+    
+    std::string FakeFloor::getClass() const {
+        return &quot;fl_fake&quot;;
+    }
+    
+    void FakeFloor::init_model()  {
+        set_model(&quot;fl_fake_&quot; + getAttr(&quot;flavor&quot;).to_string());
+    }
+
 /* -------------------- Ice -------------------- */
 
-
     IceFloor::IceFloor() : Floor (&quot;fl_ice&quot;) {
     }
     
@@ -69,6 +82,20 @@
         return &quot;fl_ice&quot;;
     }
     
+/* -------------------- InverseFloor -------------------- */
+
+    InverseFloor::InverseFloor(std::string flavor) : Floor (&quot;fl_inverse&quot;) {
+        setAttr(&quot;flavor&quot;, flavor);
+    }
+    
+    std::string InverseFloor::getClass() const {
+        return &quot;fl_inverse&quot;;
+    }
+    
+    void InverseFloor::init_model()  {
+        set_model(&quot;fl_inverse_&quot; + getAttr(&quot;flavor&quot;).to_string());
+    }
+
 /* -------------------- Space -------------------- */
 
     
@@ -156,7 +183,13 @@
     BOOT_REGISTER_START
         BootRegister(new Abyss(),     &quot;fl_abyss&quot;);
         BootRegister(new DummyFloor(),&quot;fl_dummy&quot;);
+        BootRegister(new FakeFloor(),  &quot;fl_fake&quot;);
+        BootRegister(new FakeFloor(),  &quot;fl_fake_abyss&quot;);
+        BootRegister(new FakeFloor(&quot;trigger&quot;),  &quot;fl_fake_trigger&quot;);
         BootRegister(new IceFloor(),  &quot;fl_ice&quot;);
+        BootRegister(new InverseFloor(),  &quot;fl_inverse&quot;);
+        BootRegister(new InverseFloor(),  &quot;fl_inverse_white&quot;);
+        BootRegister(new InverseFloor(&quot;gray&quot;),  &quot;fl_inverse_gray&quot;);
         BootRegister(new Space(),     &quot;fl_space&quot;);
         BootRegister(new Space(true), &quot;fl_space_force&quot;);
         BootRegister(new Swamp(),     &quot;fl_swamp&quot;);

Modified: trunk/src/floors/SimpleFloors.hh
===================================================================
--- trunk/src/floors/SimpleFloors.hh	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/src/floors/SimpleFloors.hh	2009-08-26 22:55:24 UTC (rev 1783)
@@ -58,6 +58,22 @@
     };
 
     /** 
+     * Fake
+     */
+    class FakeFloor : public Floor {
+        CLONEOBJ(FakeFloor);
+        
+    public:
+        FakeFloor(std::string flavor =&quot;abyss&quot;);
+
+        // Object interface
+        virtual std::string getClass() const;
+        
+        // GridObject interface
+        virtual void init_model();
+    };
+
+    /** 
      * IceFloor
      */
     class IceFloor : public Floor {
@@ -71,6 +87,22 @@
     };
 
     /** 
+     * InverseFloor
+     */
+    class InverseFloor : public Floor {
+        CLONEOBJ(InverseFloor);
+        
+    public:
+        InverseFloor(std::string flavor =&quot;white&quot;);
+
+        // Object interface
+        virtual std::string getClass() const;
+        
+        // GridObject interface
+        virtual void init_model();
+    };
+
+    /** 
      * Space
      */
     class Space : public Floor {

Added: trunk/src/floors/StandardFloors.cc
===================================================================
--- trunk/src/floors/StandardFloors.cc	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/src/floors/StandardFloors.cc	2009-08-26 22:55:24 UTC (rev 1783)
@@ -0,0 +1,214 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include &quot;floors/StandardFloors.hh&quot;
+
+//#include &quot;errors.hh&quot;
+#include &quot;main.hh&quot;
+#include &quot;world.hh&quot;
+
+namespace enigma {
+    /**
+     * This is a temporary workaround that allows standard floors to support objects.xml
+     * and methods like isKind(). This mapping should vanish when floors and all other objects
+     * do support a common flexible traits concept.
+     */
+    static struct StandardFloorNames {
+        std::string classname;
+        std::string submodel;
+    } StandardFloorNames[] = {
+        {&quot;fl_adhesionless&quot;},
+        {&quot;fl_aquamarine&quot;},
+        {&quot;fl_bast&quot;},
+        {&quot;fl_bluegray&quot;},
+        {&quot;fl_bluegreen&quot;},
+        {&quot;fl_blueslab&quot;},
+        {&quot;fl_brick&quot;},
+        {&quot;fl_bright&quot;},
+        {&quot;fl_concrete&quot;},
+        {&quot;fl_dark&quot;},
+        {&quot;fl_darkgray&quot;},
+        {&quot;fl_dunes&quot;},
+        {&quot;fl_gravel&quot;},
+        {&quot;fl_gray&quot;},
+        {&quot;fl_himalaya&quot;},
+        {&quot;fl_ivory&quot;},
+        {&quot;fl_lawn&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_a&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_b&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_c1&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_c2&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_c3&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_c4&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_d1&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_d2&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_d3&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_d4&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_e1&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_e2&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_e3&quot;},
+        {&quot;fl_lawn&quot;, &quot;fl_lawn_e4&quot;},
+        {&quot;fl_marble&quot;},
+        {&quot;fl_metal&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_1&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_2&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_3&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_4&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_5&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_6&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_7&quot;},
+        {&quot;fl_metal&quot;, &quot;fl_metal_7&quot;},  // fl_metal_7n
+        {&quot;fl_mortar&quot;},
+        {&quot;fl_pinkbumps&quot;},
+        {&quot;fl_plank&quot;},
+        {&quot;fl_platinum&quot;},
+        {&quot;fl_red&quot;},
+        {&quot;fl_redslab&quot;},
+        {&quot;fl_rough&quot;},
+        {&quot;fl_sahara&quot;},
+        {&quot;fl_samba&quot;},
+        {&quot;fl_samba&quot;, &quot;fl_samba_h&quot;},
+        {&quot;fl_samba&quot;, &quot;fl_samba_v&quot;},
+        {&quot;fl_sand&quot;},
+        {&quot;fl_stone&quot;},
+        {&quot;fl_tigris&quot;},
+        {&quot;fl_white&quot;},
+        {&quot;fl_woven&quot;}
+    };
+    
+    StandardFloor::StandardFloor(int type, bool framed) : Floor(StandardFloorNames[type].classname.c_str()) {
+        state = type;
+        Floor::setAttr(&quot;faces&quot;, framed ? &quot;nesw&quot; : &quot;&quot;);
+        if  (type = 40) { // fl_metal_7n -- legacy normal floor with special values
+            setAttr(&quot;friction&quot;, 4.0);
+            setAttr(&quot;adhesion&quot;, 2.0);
+        }
+    }
+    
+    std::string StandardFloor::getClass() const {
+        return StandardFloorNames[state].classname;
+    }
+    
+    void StandardFloor::init_model()  {
+        bool isFramed = (getAttr(&quot;faces&quot;).to_string() == &quot;nesw&quot;);
+        set_model((StandardFloorNames[state].submodel.length() &gt; 0 ? StandardFloorNames[state].submodel :
+                StandardFloorNames[state].classname) +  (isFramed ? &quot;_framed&quot; : &quot;&quot;));
+    }
+    
+    BOOT_REGISTER_START
+        BootRegister(new StandardFloor( 0), &quot;fl_adhesionless&quot;);
+        BootRegister(new StandardFloor( 1), &quot;fl_aquamarine&quot;);
+        BootRegister(new StandardFloor( 1, true), &quot;fl_aquamarine_framed&quot;);
+        BootRegister(new StandardFloor( 2), &quot;fl_bast&quot;);
+        BootRegister(new StandardFloor( 2, true), &quot;fl_bast_framed&quot;);
+        BootRegister(new StandardFloor( 3), &quot;fl_bluegray&quot;);
+        BootRegister(new StandardFloor( 3, true), &quot;fl_bluegray_framed&quot;);
+        BootRegister(new StandardFloor( 4), &quot;fl_bluegreen&quot;);
+        BootRegister(new StandardFloor( 4, true), &quot;fl_bluegreen_framed&quot;);
+        BootRegister(new StandardFloor( 5), &quot;fl_blueslab&quot;);
+        BootRegister(new StandardFloor( 5, true), &quot;fl_blueslab_framed&quot;);
+        BootRegister(new StandardFloor( 6), &quot;fl_brick&quot;);
+        BootRegister(new StandardFloor( 6, true), &quot;fl_brick_framed&quot;);
+        BootRegister(new StandardFloor( 7), &quot;fl_bright&quot;);
+        BootRegister(new StandardFloor( 7, true), &quot;fl_bright_framed&quot;);
+        BootRegister(new StandardFloor( 8), &quot;fl_concrete&quot;);
+        BootRegister(new StandardFloor( 8, true), &quot;fl_concrete_framed&quot;);
+        BootRegister(new StandardFloor( 9), &quot;fl_dark&quot;);
+        BootRegister(new StandardFloor( 9, true), &quot;fl_dark_framed&quot;);
+        BootRegister(new StandardFloor(10), &quot;fl_darkgray&quot;);
+        BootRegister(new StandardFloor(10, true), &quot;fl_darkgray_framed&quot;);
+        BootRegister(new StandardFloor(11), &quot;fl_dunes&quot;);
+        BootRegister(new StandardFloor(11, true), &quot;fl_dunes_framed&quot;);
+        BootRegister(new StandardFloor(12), &quot;fl_gravel&quot;);
+        BootRegister(new StandardFloor(12, true), &quot;fl_gravel_framed&quot;);
+        BootRegister(new StandardFloor(13), &quot;fl_gray&quot;);
+        BootRegister(new StandardFloor(13, true), &quot;fl_gray_framed&quot;);
+        BootRegister(new StandardFloor(14), &quot;fl_himalaya&quot;);
+        BootRegister(new StandardFloor(14, true), &quot;fl_himalaya_framed&quot;);
+        BootRegister(new StandardFloor(15), &quot;fl_ivory&quot;);
+        BootRegister(new StandardFloor(15, true), &quot;fl_ivory_framed&quot;);
+        BootRegister(new StandardFloor(16), &quot;fl_lawn&quot;);
+        BootRegister(new StandardFloor(17), &quot;fl_lawn_a&quot;);
+        BootRegister(new StandardFloor(18), &quot;fl_lawn_b&quot;);
+        BootRegister(new StandardFloor(19), &quot;fl_lawn_c1&quot;);
+        BootRegister(new StandardFloor(20), &quot;fl_lawn_c2&quot;);
+        BootRegister(new StandardFloor(21), &quot;fl_lawn_c3&quot;);
+        BootRegister(new StandardFloor(22), &quot;fl_lawn_c4&quot;);
+        BootRegister(new StandardFloor(23), &quot;fl_lawn_d1&quot;);
+        BootRegister(new StandardFloor(24), &quot;fl_lawn_d2&quot;);
+        BootRegister(new StandardFloor(25), &quot;fl_lawn_d3&quot;);
+        BootRegister(new StandardFloor(26), &quot;fl_lawn_d4&quot;);
+        BootRegister(new StandardFloor(27), &quot;fl_lawn_e1&quot;);
+        BootRegister(new StandardFloor(28), &quot;fl_lawn_e2&quot;);
+        BootRegister(new StandardFloor(29), &quot;fl_lawn_e3&quot;);
+        BootRegister(new StandardFloor(30), &quot;fl_lawn_e4&quot;);
+        BootRegister(new StandardFloor(31), &quot;fl_marble&quot;);
+        BootRegister(new StandardFloor(31, true), &quot;fl_marble_framed&quot;);
+        BootRegister(new StandardFloor(32), &quot;fl_metal&quot;);
+        BootRegister(new StandardFloor(32, true), &quot;fl_metal_framed&quot;);
+        BootRegister(new StandardFloor(33), &quot;fl_metal_1&quot;);
+        BootRegister(new StandardFloor(33, true), &quot;fl_metal_1_framed&quot;);
+        BootRegister(new StandardFloor(34), &quot;fl_metal_2&quot;);
+        BootRegister(new StandardFloor(34, true), &quot;fl_metal_2_framed&quot;);
+        BootRegister(new StandardFloor(35), &quot;fl_metal_3&quot;);
+        BootRegister(new StandardFloor(35, true), &quot;fl_metal_3_framed&quot;);
+        BootRegister(new StandardFloor(36), &quot;fl_metal_4&quot;);
+        BootRegister(new StandardFloor(36, true), &quot;fl_metal_4_framed&quot;);
+        BootRegister(new StandardFloor(37), &quot;fl_metal_5&quot;);
+        BootRegister(new StandardFloor(37, true), &quot;fl_metal_5_framed&quot;);
+        BootRegister(new StandardFloor(38), &quot;fl_metal_6&quot;);
+        BootRegister(new StandardFloor(38, true), &quot;fl_metal_6_framed&quot;);
+        BootRegister(new StandardFloor(39), &quot;fl_metal_7&quot;);
+        BootRegister(new StandardFloor(39, true), &quot;fl_metal_7_framed&quot;);
+        BootRegister(new StandardFloor(40), &quot;fl_metal_7n&quot;);
+        BootRegister(new StandardFloor(41), &quot;fl_mortar&quot;);
+        BootRegister(new StandardFloor(41, true), &quot;fl_mortar_framed&quot;);
+        BootRegister(new StandardFloor(42), &quot;fl_pinkbumps&quot;);
+        BootRegister(new StandardFloor(42, true), &quot;fl_pinkbumps_framed&quot;);
+        BootRegister(new StandardFloor(43), &quot;fl_plank&quot;);
+        BootRegister(new StandardFloor(43, true), &quot;fl_plank_framed&quot;);
+        BootRegister(new StandardFloor(44), &quot;fl_platinum&quot;);
+        BootRegister(new StandardFloor(44, true), &quot;fl_platinum_framed&quot;);
+        BootRegister(new StandardFloor(45), &quot;fl_red&quot;);
+        BootRegister(new StandardFloor(45, true), &quot;fl_red_framed&quot;);
+        BootRegister(new StandardFloor(46), &quot;fl_redslab&quot;);
+        BootRegister(new StandardFloor(46, true), &quot;fl_redslab_framed&quot;);
+        BootRegister(new StandardFloor(47), &quot;fl_rough&quot;);
+        BootRegister(new StandardFloor(47, true), &quot;fl_rough_framed&quot;);
+        BootRegister(new StandardFloor(48), &quot;fl_sahara&quot;);
+        BootRegister(new StandardFloor(48, true), &quot;fl_sahara_framed&quot;);
+        BootRegister(new StandardFloor(49), &quot;fl_samba&quot;);
+        BootRegister(new StandardFloor(49, true), &quot;fl_samba_framed&quot;);
+        BootRegister(new StandardFloor(50), &quot;fl_samba_h&quot;);
+        BootRegister(new StandardFloor(50, true), &quot;fl_samba_h_framed&quot;);
+        BootRegister(new StandardFloor(51), &quot;fl_samba_v&quot;);
+        BootRegister(new StandardFloor(51, true), &quot;fl_samba_v_framed&quot;);
+        BootRegister(new StandardFloor(52), &quot;fl_sand&quot;);
+        BootRegister(new StandardFloor(52, true), &quot;fl_sand_framed&quot;);
+        BootRegister(new StandardFloor(53), &quot;fl_stone&quot;);
+        BootRegister(new StandardFloor(53, true), &quot;fl_stone_framed&quot;);
+        BootRegister(new StandardFloor(54), &quot;fl_tigris&quot;);
+        BootRegister(new StandardFloor(54, true), &quot;fl_tigris_framed&quot;);
+        BootRegister(new StandardFloor(55), &quot;fl_white&quot;);
+        BootRegister(new StandardFloor(55, true), &quot;fl_white_framed&quot;);
+        BootRegister(new StandardFloor(56), &quot;fl_woven&quot;);
+        BootRegister(new StandardFloor(56, true), &quot;fl_woven_framed&quot;);
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/floors/StandardFloors.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/floors/StandardFloors.hh
===================================================================
--- trunk/src/floors/StandardFloors.hh	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/src/floors/StandardFloors.hh	2009-08-26 22:55:24 UTC (rev 1783)
@@ -0,0 +1,40 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef STANDARDLOORS_HH
+#define STANDARDLOORS_HH
+
+#include &quot;floors.hh&quot;
+
+namespace enigma {
+
+    class StandardFloor : public Floor {
+        CLONEOBJ(StandardFloor);
+        
+    public:
+        StandardFloor(int type, bool framed =false);
+
+        // Object interface
+        virtual std::string getClass() const;
+
+        // GridObject interface
+        virtual void init_model();
+    };
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/floors/StandardFloors.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/floors.cc
===================================================================
--- trunk/src/floors.cc	2009-08-16 22:25:51 UTC (rev 1782)
+++ trunk/src/floors.cc	2009-08-26 22:55:24 UTC (rev 1783)
@@ -105,6 +105,8 @@
         else if (key == &quot;force_y&quot;)
             var_floorforce[1] = val;
         GridObject::setAttr(key, val);
+        if (key == &quot;faces&quot; &amp;&amp; isDisplayable())
+            init_model();
     }
 
     Value Floor::getAttr(const std::string &amp;key) const {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001211.html">[Enigma-game-svn] r1782 - homepage/input
</A></li>
	<LI>Next message: <A HREF="001213.html">[Enigma-game-svn] r1784 - trunk/data/levels/pentomino_i
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1212">[ date ]</a>
              <a href="thread.html#1212">[ thread ]</a>
              <a href="subject.html#1212">[ subject ]</a>
              <a href="author.html#1212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
