<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1556 - in homepage: . input
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1556%20-%20in%20homepage%3A%20.%20input&In-Reply-To=%3C200902260055.n1Q0t4MB011345%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000985.html">
   <LINK REL="Next"  HREF="000987.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1556 - in homepage: . input</H1>
    <B>andreasl at mail.berlios.de</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1556%20-%20in%20homepage%3A%20.%20input&In-Reply-To=%3C200902260055.n1Q0t4MB011345%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1556 - in homepage: . input">andreasl at mail.berlios.de
       </A><BR>
    <I>Thu Feb 26 01:55:04 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000985.html">[Enigma-game-svn] r1555 - in trunk: data doc/reference src/items
</A></li>
        <LI>Next message: <A HREF="000987.html">[Enigma-game-svn] r1557 - in trunk/data/levels: enigma_cross	enigma_viii
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#986">[ date ]</a>
              <a href="thread.html#986">[ thread ]</a>
              <a href="subject.html#986">[ subject ]</a>
              <a href="author.html#986">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: andreasl
Date: 2009-02-26 01:55:00 +0100 (Thu, 26 Feb 2009)
New Revision: 1556

Modified:
   homepage/input/download.html
   homepage/input/download_de.html
   homepage/input/download_ru.html
   homepage/input/output-files.lua
   homepage/main.lua
Log:
Homepage:
 - Corrected download links to Debian (points to &quot;lenny&quot;),
   Gentoo, and Ubuntu (points to &quot;intrepid&quot;)
 - Automatic replacing of quotation marks now includes
   news and other, automatically build sites.


Modified: homepage/input/download.html
===================================================================
--- homepage/input/download.html	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/download.html	2009-02-26 00:55:00 UTC (rev 1556)
@@ -88,13 +88,13 @@
   third parties:&lt;/p&gt;
 
   &lt;ul&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.debian.org/unstable/games/enigma.html">http://packages.debian.org/unstable/games/enigma.html</A>&quot;&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.debian.org/lenny/enigma">http://packages.debian.org/lenny/enigma</A>&quot;&gt;
 	Debian&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;<A HREF="http://www.freshports.org/games/enigma/">http://www.freshports.org/games/enigma/</A>&quot;&gt;
 	FreeBSD&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">http://packages.gentoo.org/ebuilds/?enigma-1.00-r1</A>&quot;&gt;
-    Gentoo Linux&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;amp;version=all&amp;amp;exact=1&amp;amp;keywords=enigma">http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma</A>&quot;&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.gentoo.org/package/games-puzzle/enigma">http://packages.gentoo.org/package/games-puzzle/enigma</A>&quot;&gt;
+        Gentoo Linux&lt;/a&gt;&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.ubuntu.com/intrepid/enigma">http://packages.ubuntu.com/intrepid/enigma</A>&quot;&gt;
 	Ubuntu&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;<A HREF="http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729">http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729</A>&quot;&gt;
 	GP2X&lt;/a&gt;&nbsp;&nbsp;(version 0.92)&lt;/li&gt;

Modified: homepage/input/download_de.html
===================================================================
--- homepage/input/download_de.html	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/download_de.html	2009-02-26 00:55:00 UTC (rev 1556)
@@ -96,13 +96,13 @@
   Verf&uuml;gung gestellt:&lt;/p&gt;
 
   &lt;ul&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.debian.org/unstable/games/enigma.html">http://packages.debian.org/unstable/games/enigma.html</A>&quot;&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.debian.org/lenny/enigma">http://packages.debian.org/lenny/enigma</A>&quot;&gt;
 	Debian&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;<A HREF="http://www.freshports.org/games/enigma/">http://www.freshports.org/games/enigma/</A>&quot;&gt;
 	FreeBSD&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">http://packages.gentoo.org/ebuilds/?enigma-1.00-r1</A>&quot;&gt;
-    Gentoo Linux&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;amp;version=all&amp;amp;exact=1&amp;amp;keywords=enigma">http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma</A>&quot;&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.gentoo.org/package/games-puzzle/enigma">http://packages.gentoo.org/package/games-puzzle/enigma</A>&quot;&gt;
+        Gentoo Linux&lt;/a&gt;&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.ubuntu.com/intrepid/enigma">http://packages.ubuntu.com/intrepid/enigma</A>&quot;&gt;
 	Ubuntu&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;<A HREF="http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729">http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729</A>&quot;&gt;
 	GP2X&lt;/a&gt;&nbsp;&nbsp;(version 0.92)&lt;/li&gt;

Modified: homepage/input/download_ru.html
===================================================================
--- homepage/input/download_ru.html	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/download_ru.html	2009-02-26 00:55:00 UTC (rev 1556)
@@ -86,13 +86,13 @@
   &lt;p&gt;&#240;&#193;&#203;&#197;&#212;&#217; &#196;&#204;&#209; &#206;&#197;&#203;&#207;&#212;&#207;&#210;&#217;&#200; &#196;&#210;&#213;&#199;&#201;&#200; &#207;&#208;&#197;&#210;&#193;&#195;&#201;&#207;&#206;&#206;&#217;&#200; &#211;&#201;&#211;&#212;&#197;&#205; &#208;&#210;&#197;&#196;&#207;&#211;&#212;&#193;&#215;&#204;&#209;&#192;&#212;&#211;&#209; &#212;&#210;&#197;&#212;&#216;&#201;&#205;&#201; &#204;&#201;&#195;&#193;&#205;&#201;:&lt;/p&gt;
 
   &lt;ul&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.debian.org/unstable/games/enigma.html">http://packages.debian.org/unstable/games/enigma.html</A>&quot;&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.debian.org/lenny/enigma">http://packages.debian.org/lenny/enigma</A>&quot;&gt;
 	Debian&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;<A HREF="http://www.freshports.org/games/enigma/">http://www.freshports.org/games/enigma/</A>&quot;&gt;
 	FreeBSD&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">http://packages.gentoo.org/ebuilds/?enigma-1.00-r1</A>&quot;&gt;
-    Gentoo Linux&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;amp;version=all&amp;amp;exact=1&amp;amp;keywords=enigma">http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma</A>&quot;&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.gentoo.org/package/games-puzzle/enigma">http://packages.gentoo.org/package/games-puzzle/enigma</A>&quot;&gt;
+        Gentoo Linux&lt;/a&gt;&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;<A HREF="http://packages.ubuntu.com/intrepid/enigma">http://packages.ubuntu.com/intrepid/enigma</A>&quot;&gt;
 	Ubuntu&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;<A HREF="http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729">http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729</A>&quot;&gt;
 	GP2X&lt;/a&gt;&nbsp;&nbsp;(&#215;&#197;&#210;&#211;&#201;&#209; 0.92)&lt;/li&gt;

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/output-files.lua	2009-02-26 00:55:00 UTC (rev 1556)
@@ -56,24 +56,24 @@
     body = {},
     bottombar = {&quot;bottombar&quot;},
     parse_news_1 = function(v,s,l0)
-        return parse_text(v, parse_news(newsdir,l0,newsfield), l0, &quot;news1&quot;)
+        return parse_text_quots(v, parse_news(newsdir,l0,newsfield), l0, &quot;news1&quot;)
       end,
     parse_news_2 = function(v,s,l0)
-        return parse_text(v, parse_news(newsdir,l0), l0, &quot;news2&quot;)
+        return parse_text_quots(v, parse_news(newsdir,l0), l0, &quot;news2&quot;)
       end,
     parse_level_archive = function(v,s,l0)
-        return parse_text(v, parse_level_archive(l0), l0, &quot;level_archive&quot;)
+        return parse_text_quots(v, parse_level_archive(l0), l0, &quot;level_archive&quot;)
       end,
     parse_lotm_by_rating = function(v,s,l0)
-        return parse_text(v, parse_lotm(&quot;current_rating&quot;, true, l0), l0,
+        return parse_text_quots(v, parse_lotm(&quot;current_rating&quot;, true, l0), l0,
           add_lang_to_filename(v.outfile, l0))
       end,
     parse_lotm_chronological = function(v,s,l0)
-        return parse_text(v, parse_lotm(&quot;chronological&quot;, false, l0), l0,
+        return parse_text_quots(v, parse_lotm(&quot;chronological&quot;, false, l0), l0,
           add_lang_to_filename(v.outfile, l0))
       end,
     parse_lotm_by_position = function(v,s,l0)
-        return parse_text(v, parse_lotm(&quot;position_num&quot;, false, l0), l0,
+        return parse_text_quots(v, parse_lotm(&quot;position_num&quot;, false, l0), l0,
           add_lang_to_filename(v.outfile, l0))
     end,
     lotm_archive_data_from = function(v,s,l0)
@@ -116,15 +116,15 @@
     lotm_history_es = &quot;Historia de LotM&quot;,
 
     lotm_current = function(v,s,l0)
-        return parse_text(v, &quot;$$&quot;..lotm_macro_name(lotm_current)..&quot;$$&quot;, l0,
+        return parse_text_quots(v, &quot;$$&quot;..lotm_macro_name(lotm_current)..&quot;$$&quot;, l0,
           &quot;lotm_current&quot;)
       end,
     lotm_current_image = function(v,s,l0)
-        return parse_text(v, &quot;$$imagedir$$/lotm/&quot;
+        return parse_text_quots(v, &quot;$$imagedir$$/lotm/&quot;
           ..lotm_macro_name(lotm_current)..&quot;.png&quot;, l0, &quot;lotm_current_image&quot;)
       end,
     lotm_current_name = function(v,s,l0)
-        return parse_text(v, lotm_current.name, l0, &quot;lotm_current_name&quot;)
+        return parse_text_quots(v, lotm_current.name, l0, &quot;lotm_current_name&quot;)
       end,
 
     January   = function(v,s,l0)  return  translate_month(l0, {month=1})  end,

Modified: homepage/main.lua
===================================================================
--- homepage/main.lua	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/main.lua	2009-02-26 00:55:00 UTC (rev 1556)
@@ -177,6 +177,10 @@
     return result
 end
 
+function parse_text_quots(v, text, lang, context)
+    return parse_text(v, replace_quots(v, text, lang, context), lang, context)
+end
+
 function parse_html(v, infilename0, lang)
     if not infilename0 then
         error(&quot;Error during creation of &quot;..v.title..&quot;: Expected filename, got nil.&quot;)
@@ -206,7 +210,7 @@
 
     local body = infile:read(&quot;*a&quot;)
     infile:close()
-    return parse_text(v, replace_quots(v, body, lang, infilename), lang, infilename)
+    return parse_text_quots(v, body, lang, infilename)
 end
 
 ----------------------------------------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000985.html">[Enigma-game-svn] r1555 - in trunk: data doc/reference src/items
</A></li>
	<LI>Next message: <A HREF="000987.html">[Enigma-game-svn] r1557 - in trunk/data/levels: enigma_cross	enigma_viii
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#986">[ date ]</a>
              <a href="thread.html#986">[ thread ]</a>
              <a href="subject.html#986">[ subject ]</a>
              <a href="author.html#986">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
