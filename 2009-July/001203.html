<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1774 - in trunk: doc/reference	doc/reference/images lib-src/enigma-core src/gui
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1774%20-%20in%20trunk%3A%20doc/reference%0A%09doc/reference/images%20lib-src/enigma-core%20src/gui&In-Reply-To=%3C200907262016.n6QKGe0H002550%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001202.html">
   <LINK REL="Next"  HREF="001204.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1774 - in trunk: doc/reference	doc/reference/images lib-src/enigma-core src/gui</H1>
    <B>ral at mail.berlios.de</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1774%20-%20in%20trunk%3A%20doc/reference%0A%09doc/reference/images%20lib-src/enigma-core%20src/gui&In-Reply-To=%3C200907262016.n6QKGe0H002550%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1774 - in trunk: doc/reference	doc/reference/images lib-src/enigma-core src/gui">ral at mail.berlios.de
       </A><BR>
    <I>Sun Jul 26 22:16:40 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001202.html">[Enigma-game-svn] r1773 - in trunk: data/schemas src/gui src/lev
</A></li>
        <LI>Next message: <A HREF="001204.html">[Enigma-game-svn] r1775 - trunk/data/levels/enigma_pentomino_i
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1203">[ date ]</a>
              <a href="thread.html#1203">[ thread ]</a>
              <a href="subject.html#1203">[ subject ]</a>
              <a href="author.html#1203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-07-26 22:16:27 +0200 (Sun, 26 Jul 2009)
New Revision: 1774

Added:
   trunk/doc/reference/images/ralD006_1.png
Modified:
   trunk/doc/reference/enigma-ref.texi
   trunk/doc/reference/images/Makefile.am
   trunk/lib-src/enigma-core/ecl_system.cc
   trunk/lib-src/enigma-core/ecl_system.hh
   trunk/src/gui/LevelInspector.cc
   trunk/src/gui/MainMenu.cc
Log:
Trunk 1.1:
- Windows path beautifier to correct separator mixture slashes and backslashes
- refman add missing demo level images 
- refman some fixes and minor additions

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-07-26 11:45:01 UTC (rev 1773)
+++ trunk/doc/reference/enigma-ref.texi	2009-07-26 20:16:27 UTC (rev 1774)
@@ -1363,11 +1363,11 @@
  2    @i{ti}[&quot;@var{#}&quot;] = @{&quot;@b{st_box}&quot;@}
  3    @i{ti}[&quot;@var{O}&quot;] = @{&quot;@b{st_oxyd}&quot;@}
  4    if @i{wo}[&quot;@b{IsDifficult}&quot;] then
- 5	@i{ti}[&quot;@var{Q}&quot;] = @{&quot;@b{st_quake}&quot;, @b{name}=&quot;@var{quake}&quot;@}
- 6	@i{ti}[&quot;@var{T}&quot;] = @{&quot;@b{st_timer}&quot;, @b{interval}=@var{10.0}, @b{target}=&quot;@var{quake}&quot;@}
+ 5        @i{ti}[&quot;@var{Q}&quot;] = @{&quot;@b{st_quake}&quot;, @b{name}=&quot;@var{quake}&quot;@}
+ 6        @i{ti}[&quot;@var{T}&quot;] = @{&quot;@b{st_timer}&quot;, @b{interval}=@var{10.0}, @b{target}=&quot;@var{quake}&quot;@}
  7    else
- 8	@i{ti}[&quot;@var{Q}&quot;] = @i{ti}[&quot; &quot;]
- 9	@i{ti}[&quot;@var{T}&quot;] = @i{ti}[&quot; &quot;]
+ 8        @i{ti}[&quot;@var{Q}&quot;] = @i{ti}[&quot; &quot;]
+ 9        @i{ti}[&quot;@var{T}&quot;] = @i{ti}[&quot; &quot;]
 10    end
 11    @i{ti}[&quot;@var{@@}&quot;] = @{&quot;@b{ac_marble_black}&quot;, @var{0.0}, @var{0.5}@}
 11
@@ -1410,11 +1410,11 @@
 
 @example
  4    if @i{wo}[&quot;@b{IsDifficult}&quot;] then
- 5	@i{ti}[&quot;@var{Q}&quot;] = @{&quot;@b{st_quake}&quot;, @b{name}=&quot;@var{quake}&quot;@}
- 6	@i{ti}[&quot;@var{T}&quot;] = @{&quot;@b{st_timer}&quot;, @b{interval}=@var{10.0}, @b{target}=&quot;@var{quake}&quot;@}
+ 5        @i{ti}[&quot;@var{Q}&quot;] = @{&quot;@b{st_quake}&quot;, @b{name}=&quot;@var{quake}&quot;@}
+ 6        @i{ti}[&quot;@var{T}&quot;] = @{&quot;@b{st_timer}&quot;, @b{interval}=@var{10.0}, @b{target}=&quot;@var{quake}&quot;@}
  7    else
- 8	@i{ti}[&quot;@var{Q}&quot;] = @i{ti}[&quot; &quot;]
- 9	@i{ti}[&quot;@var{T}&quot;] = @i{ti}[&quot; &quot;]
+ 8        @i{ti}[&quot;@var{Q}&quot;] = @i{ti}[&quot; &quot;]
+ 9        @i{ti}[&quot;@var{T}&quot;] = @i{ti}[&quot; &quot;]
 10    end
 @end example
 
@@ -1442,19 +1442,19 @@
 
 @example
 12    @i{wo}(@i{ti}, &quot; &quot;, @{
-13	&quot;@var{####################}&quot;,
-14	&quot;@var{#                  #}&quot;,
-15	&quot;@var{#                  #}&quot;,
-16	&quot;@var{#  O            O  #}&quot;,
-17	&quot;@var{#         @@        #}&quot;,
-18	&quot;@var{#                  #}&quot;,
-19	&quot;@var{#        QT        #}&quot;,
-20	&quot;@var{#                  #}&quot;,
-21	&quot;@var{#                  #}&quot;,
-22	&quot;@var{#  O            O  #}&quot;,
-23	&quot;@var{#                  #}&quot;,
-24	&quot;@var{#                  #}&quot;,
-25	&quot;@var{####################}&quot;@})
+13        &quot;@var{####################}&quot;,
+14        &quot;@var{#                  #}&quot;,
+15        &quot;@var{#                  #}&quot;,
+16        &quot;@var{#  O            O  #}&quot;,
+17        &quot;@var{#         @@        #}&quot;,
+18        &quot;@var{#                  #}&quot;,
+19        &quot;@var{#        QT        #}&quot;,
+20        &quot;@var{#                  #}&quot;,
+21        &quot;@var{#                  #}&quot;,
+22        &quot;@var{#  O            O  #}&quot;,
+23        &quot;@var{#                  #}&quot;,
+24        &quot;@var{#                  #}&quot;,
+25        &quot;@var{####################}&quot;@})
 @end example
 
 Now we can create the world simply by providing a map. We just need to call
@@ -2039,29 +2039,33 @@
 none.
 
 @item @b{externaldata}, @i{optional, multiple occurrence}
-You can use this element to specify any external data file this level
-depends on. You can specify several files by multiple occurrence of this
+You can use this element to specify any external text data file this level
+depends on. You can specify several files by multiple occurrences of this
 element. Files declared can be read via the Lua interface.
 
-This feature should support levels that simulate foreign games like Sokoban within Enigma. Due
-to copyrights and license conditions, including some data within a level may not be possible.
-However, distributing the data in the original unmodified format may be legal.
+This feature should support levels that simulate foreign games like Sokoban
+within Enigma. Due to copyrights and license conditions, the inclusion of such
+data within a level or even the distribution with Enigma may not be possible.
+However, distributing or downloading the data in the original unmodified format
+may be legal.
 
 @b{Attributes:}
 @table @asis
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{path}, @i{optional}
-The resource path of the external data file with its suffix. Since the data are usually level-
-specific, you should store them with the level in the same levelpack directory. Thus, a relative
-resource path, such as @samp{./datafile.ext}
-is preferable.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{path}, @i{required}
+The resource path of the external data file without its suffix @samp{.txt}. The
+path has to be either of the format @code{&quot;./name&quot;} for an external data file
+that is locally  stored in the same folder as the level file, or will be saved
+at this position when it gets downloaded. Or the path can be of the format
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at code</A>{&quot;externaldata/name&quot;} for shared external data files, that are referenced
+by multiple level files stored at different folders. The external data file will
+be locally stored or gets saved in the folder @{&quot;levels/externaldata&quot;}. In any
+case the local name of the external data file will have the suffix @samp{.txt}
+to mark it readable but not executable for the local operating system.
 
 @item @b{url}, @i{optional}
-This optional attribute allows you to specify an online address for the external data
-file. This method can access only well-formed xml data files.
-
-You should use the online access method only as a backup address or due to very restrictive
-license conditions that make it impossible to distribute the data file with Enigma.
-
+This optional attribute allows you to specify an internet download address for
+the external data file. On first access a missing external data file will be
+downloaded and a copy will be stored locally for further access.
 @end table
 
 @b{Contents:}
@@ -2713,7 +2717,7 @@
 sublevel, @code{&quot;[2]&quot;} for the second and so on. Thus every sublevel has an
 unique id. 
 
-Additionally you should provide base title for the levels in this metadata
+Additionally you should provide a base title for the levels in this metadata
 @ref{&lt;identity&gt;} element. If your title ends with a hash @samp{#} sign Enigma
 will autogenerate titles for the sublevels by appending the sublevel number to
 the given common title string.
@@ -2723,8 +2727,8 @@
 only be used as a default title base in case the @ref{LUA code} fails to
 provide a sublevel title. Prior execution of the Lua code the global
 attribute @ref{SublevelNumber} gets initialized. The Lua part has either way to
-load the appropriate sublevel based on this number. Now it has additionally to
-set the second special multilevel global attribute @ref{SublevelTitle}.
+load the appropriate sublevel based on this number. Now it has additionally the
+task to set the second special multilevel global attribute @ref{SublevelTitle}.
 
 
 @ref{&lt;compatibility&gt;} externaldata
@@ -3474,6 +3478,9 @@
 The @ref{Advanced Lua Examples} will show examples of real powerful callback
 functions with a line by line comment.
 
+Further usage and aspects of callbacks in the level's lifecycle are given in
+the section @ref{Callbacks and Load Balancing}.
+
 @c ----------------- Object State --------------------
 @node Object State
 @subsection Object State
@@ -3578,7 +3585,7 @@
 * Level Initialization::
 * Object Transformation::         Identity Transfer in case of Transformations
 * Named Positions::               Positions as successors of killed Floors
-* Callbacks and Timers::
+* Callbacks and Load Balancing::
 * Level Restart::
 * Ending Conditions::
 @end menu
@@ -3687,14 +3694,14 @@
 local used functions that need to be integrated to precede. Please keep such
 functions near by their usage and within the same code section.
 
-Another set of functions that you may want to add are @ref{Callbacks}. We 
-recommend to append these functions as the last section as they are not called
-within the level initialization itself.
+Another set of functions that you may want to add are @ref{Callbacks and Load 
+Balancing}. We recommend to append these functions as the last section as they
+are not called within the level initialization itself.
 
 But there is one very special exception. The @code{postinit()} callback is
 called after the level initialization code has been processed and all subsequent
 engine internal initialization has been finished. If this function is present
-in a level it gets execute directly before the first mouse movement event gets
+in a level it gets executed directly before the first mouse movement event gets
 processed. Thus you can rely within this function that all objects are set up
 in their final state. If you have need of such a postinit callback you should
 put it after all the level intialization code and in front of other callback
@@ -3743,10 +3750,18 @@
 Note that a request for a named position will include all positions of matching
 named objects as well as those named positions derived from killed floors.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at c</A> ----------------- Callbacks and Timers --------------------
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at node</A> Callbacks and Timers
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at subsection</A> Callbacks and Timers
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Callbacks and Load Balancing --------------------
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Callbacks and Load Balancing
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Callbacks and Load Balancing
 
+The most flexible feature for a level author to establish an unique behaviour
+of his level are @ref{Callback Function}s. 
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at ref</A>{Target - Action} kill warning
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at ref</A>{ot_timer}
+
+global and res.*.function
+
 @c ----------------- Level Restart --------------------
 @node Level Restart
 @subsection Level Restart
@@ -3907,6 +3922,8 @@
 
 The resulting level looks like this in the game
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at image</A>{images/ralD006_1, 150mm}
+
 Let us now analyse the code line by line.
 
 Lines 1 to 14 are the XML metadata of the level as described in
@@ -11753,15 +11770,21 @@
 
 A magic item that makes the activating actor for 8 seconds invisible. But not
 all actors become invisible. Just the ball like actors @ref{ac_marble} and
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at ref</A>{ac_pearl} do vanish. Other actors just drop the cherry on activation.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at ref</A>{ac_pearl} do vanish.
 
 An invisible actor can walk through most kinds of glass 
-(@pxref{Transparent Stones}) and as being invisible
-they do no longer attract hostile @ref{ac_rotor} and @ref{ac_top}.
+(@pxref{Transparent Stones}) and as being invisible they do no longer attract
+hostile @ref{ac_rotor} and @ref{ac_top}.
 
 When several cherries are activated in sequence each does prolong the actor's
 time of invisibility by additional 8 seconds.
 
+Other actors drop the cherry as an @ref{it_squashed} on activation. Sending a 
+cherry via an @ref{st_mail} results in an  @ref{it_squashed}, too. This
+gives you the control that a cherry added to one player's inventory can not be
+easily transfered to other actors assigned to the other player. Just 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at ref</A>{st_thief} and @ref{fl_thief} are able to steal the cherry undamaged.
+
 When a stone is pushed over a cherry an @ref{it_squashed} remains as remnants.
 
 @table @asis

Modified: trunk/doc/reference/images/Makefile.am
===================================================================
--- trunk/doc/reference/images/Makefile.am	2009-07-26 11:45:01 UTC (rev 1773)
+++ trunk/doc/reference/images/Makefile.am	2009-07-26 20:16:27 UTC (rev 1774)
@@ -1,5 +1,5 @@
 
-PNG = first_level.png construction.png
+PNG = first_level.png construction.png ralD006_1.png
 
 GFXDIR = ../../../data/gfx48
 

Added: trunk/doc/reference/images/ralD006_1.png
===================================================================
(Binary files differ)


Property changes on: trunk/doc/reference/images/ralD006_1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/lib-src/enigma-core/ecl_system.cc
===================================================================
--- trunk/lib-src/enigma-core/ecl_system.cc	2009-07-26 11:45:01 UTC (rev 1773)
+++ trunk/lib-src/enigma-core/ecl_system.cc	2009-07-26 20:16:27 UTC (rev 1774)
@@ -51,12 +51,11 @@
 #endif
 const char *ecl::PathSeparators = &quot;/\\&quot;;    // for path splits
 
-string ecl::ExpandPath (const string &amp;pth)
-{
-    string path = pth;
-    string::size_type p=path.find(&quot;~&quot;);
+std::string ecl::ExpandPath (const string &amp;pth) {
+    std::string path = pth;
+    std::string::size_type p=path.find(&quot;~&quot;);
     if (p != string::npos) {
-        string home;
+        std::string home;
         if (char *h = getenv(&quot;HOME&quot;))
             home = h;
         path.replace(p, 1, home);
@@ -64,6 +63,17 @@
     return path;
 }
 
+std::string ecl::BeautifyPath(const std::string path) {
+    std::string foreignSeparators = ecl::PathSeparators;
+    foreignSeparators.erase(foreignSeparators.find(ecl::PathSeparator));
+    std::string result = path;
+    for (std::string::size_type pos = result.find_first_of(foreignSeparators);
+            pos != std::string::npos; pos = result.find_first_of(foreignSeparators)) {
+        result.replace(pos, 1, ecl::PathSeparator);
+    }
+    return result;
+}
+
 bool ecl::FileExists (const std::string &amp;fname)
 {
     struct stat s;

Modified: trunk/lib-src/enigma-core/ecl_system.hh
===================================================================
--- trunk/lib-src/enigma-core/ecl_system.hh	2009-07-26 11:45:01 UTC (rev 1773)
+++ trunk/lib-src/enigma-core/ecl_system.hh	2009-07-26 20:16:27 UTC (rev 1774)
@@ -30,6 +30,7 @@
     extern const char *PathsSeparator;
 
     std::string ExpandPath (const std::string &amp;path);
+    std::string BeautifyPath(const std::string path);
 
     bool        FileExists (const std::string &amp;fname);
     std::time_t FileModTime (const std::string &amp;fname);

Modified: trunk/src/gui/LevelInspector.cc
===================================================================
--- trunk/src/gui/LevelInspector.cc	2009-07-26 11:45:01 UTC (rev 1773)
+++ trunk/src/gui/LevelInspector.cc	2009-07-26 20:16:27 UTC (rev 1774)
@@ -471,10 +471,12 @@
         }
         if (levelPathLines &gt;= 1) {
             add(new Label(N_(&quot;Level Path: &quot;), HALIGN_RIGHT),Rect(hmargin,vnext,vshrink?55:110,vshrink?12:25));
-            std::string workString = levelPathString;
+            bool localSeparator = (levelProxy-&gt;getNormPathType() == lev::Proxy::pt_resource) ||
+                        (levelProxy-&gt;getNormPathType() == lev::Proxy::pt_absolute);
+            std::string workString = localSeparator ? ecl::BeautifyPath(levelPathString) : levelPathString;
             for (int i = 0; i&lt; levelPathLines - 1; i++) {
                 std::string::size_type breakPos = breakString(menufont, workString, 
-                        &quot;/&quot;, textwidth);
+                        localSeparator ? ecl::PathSeparator : &quot;/&quot;, textwidth);
                 add(new Label(workString.substr(0,breakPos), HALIGN_LEFT), Rect(hmargin+(vshrink?55+5:110+10),vnext,textwidth,vshrink?12:25));
                 workString = workString.substr(breakPos);
                 vnext += ((vshrink?12:25) + vspacing);

Modified: trunk/src/gui/MainMenu.cc
===================================================================
--- trunk/src/gui/MainMenu.cc	2009-07-26 11:45:01 UTC (rev 1773)
+++ trunk/src/gui/MainMenu.cc	2009-07-26 20:16:27 UTC (rev 1774)
@@ -250,9 +250,9 @@
         } else if (w == paths) {
             showPaths();
         } else if (w == autofolder) {
-            ecl::ExploreFolder(app.userPath + &quot;/levels/auto&quot;);
+            ecl::ExploreFolder(ecl::BeautifyPath(app.userPath + &quot;/levels/auto&quot;));
         } else if (w == scorefolder) {
-            ecl::ExploreFolder(app.userPath);
+            ecl::ExploreFolder(ecl::BeautifyPath(app.userPath));
         } else if (w == credits) {
             displayInfo(credit_text, 6);
         } else if (w == back) {
@@ -280,9 +280,9 @@
         int i = 0;
         
         pathtext[i++] = N_(&quot;Preferences Path:&quot;);
-        work = app.prefPath;
+        work = ecl::BeautifyPath(app.prefPath);
         do {
-            std::string::size_type breakPos = breakString(menufont, work,&quot;/\\&quot;, width);
+            std::string::size_type breakPos = breakString(menufont, work, ecl::PathSeparators, width);
             pathstrings[i] = &quot;    &quot; + work.substr(0,breakPos);
             pathtext[i] = pathstrings[i].c_str();
             work = work.substr(breakPos);
@@ -290,9 +290,9 @@
         } while(!work.empty() );
         pathtext[i++] = &quot; &quot;;
         pathtext[i++] = N_(&quot;User Path:&quot;);
-        work = app.userPath;
+        work = ecl::BeautifyPath(app.userPath);
         do {
-            std::string::size_type breakPos = breakString(menufont, work,&quot;/\\&quot;, width);
+            std::string::size_type breakPos = breakString(menufont, work, ecl::PathSeparators, width);
             pathstrings[i] = &quot;    &quot; + work.substr(0,breakPos);
             pathtext[i] = pathstrings[i].c_str();
             work = work.substr(breakPos);
@@ -300,9 +300,9 @@
         } while(!work.empty() );
         pathtext[i++] = &quot; &quot;;
         pathtext[i++] = N_(&quot;User Image Path:&quot;);
-        work = app.userImagePath;
+        work = ecl::BeautifyPath(app.userImagePath);
         do {
-            std::string::size_type breakPos = breakString(menufont, work,&quot;/\\&quot;, width);
+            std::string::size_type breakPos = breakString(menufont, work, ecl::PathSeparators, width);
             pathstrings[i] = &quot;    &quot; + work.substr(0,breakPos);
             pathtext[i] = pathstrings[i].c_str();
             work = work.substr(breakPos);
@@ -310,9 +310,9 @@
         } while(!work.empty() );
         pathtext[i++] = &quot; &quot;;
         pathtext[i++] = N_(&quot;System Path:&quot;);
-        work = app.systemFS-&gt;getDataPath();
+        work = ecl::BeautifyPath(app.systemFS-&gt;getDataPath());
         do {
-            std::string::size_type breakPos = breakString(menufont, work,&quot;/\\&quot;, width);
+            std::string::size_type breakPos = breakString(menufont, work, ecl::PathSeparators, width);
             pathstrings[i] = &quot;    &quot; + work.substr(0,breakPos);
             pathtext[i] = pathstrings[i].c_str();
             work = work.substr(breakPos);
@@ -320,9 +320,9 @@
         } while(!work.empty() );
         pathtext[i++] = &quot; &quot;;
         pathtext[i++] = N_(&quot;Resource Paths:&quot;);
-        work = app.resourceFS-&gt;getDataPath();
+        work = ecl::BeautifyPath(app.resourceFS-&gt;getDataPath());
         do {
-            std::string::size_type breakPos = breakString(menufont, work,&quot;/\\&quot;, width);
+            std::string::size_type breakPos = breakString(menufont, work, ecl::PathSeparators, width);
             pathstrings[i] = &quot;    &quot; + work.substr(0,breakPos);
             pathtext[i] = pathstrings[i].c_str();
             work = work.substr(breakPos);
@@ -330,9 +330,9 @@
         } while(!work.empty() );
         pathtext[i++] = &quot; &quot;;
         pathtext[i++] = N_(&quot;L10n Path:&quot;);
-        work = app.l10nPath;
+        work = ecl::BeautifyPath(app.l10nPath);
         do {
-            std::string::size_type breakPos = breakString(menufont, work,&quot;/\\&quot;, width);
+            std::string::size_type breakPos = breakString(menufont, work, ecl::PathSeparators, width);
             pathstrings[i] = &quot;    &quot; + work.substr(0,breakPos);
             pathtext[i] = pathstrings[i].c_str();
             work = work.substr(breakPos);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001202.html">[Enigma-game-svn] r1773 - in trunk: data/schemas src/gui src/lev
</A></li>
	<LI>Next message: <A HREF="001204.html">[Enigma-game-svn] r1775 - trunk/data/levels/enigma_pentomino_i
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1203">[ date ]</a>
              <a href="thread.html#1203">[ thread ]</a>
              <a href="subject.html#1203">[ subject ]</a>
              <a href="author.html#1203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
