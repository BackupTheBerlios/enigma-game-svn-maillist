<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1910 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64 src/stones
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1910%20-%20in%20trunk%3A%20attic/images-stones%20data%0A%09data/gfx16%20data/gfx32%20data/gfx40%20data/gfx48%20data/gfx64%20src/stones&In-Reply-To=%3C200912122114.nBCLEkWo016240%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001338.html">
   <LINK REL="Next"  HREF="001340.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1910 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64 src/stones</H1>
    <B>raoul at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1910%20-%20in%20trunk%3A%20attic/images-stones%20data%0A%09data/gfx16%20data/gfx32%20data/gfx40%20data/gfx48%20data/gfx64%20src/stones&In-Reply-To=%3C200912122114.nBCLEkWo016240%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1910 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64 src/stones">raoul at mail.berlios.de
       </A><BR>
    <I>Sat Dec 12 22:14:46 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001338.html">[Enigma-game-svn] r1909 - in trunk: attic/images-items	attic/images-stones data data/gfx16 data/gfx32 data/gfx40	data/gfx48 data/gfx64
</A></li>
        <LI>Next message: <A HREF="001340.html">[Enigma-game-svn] r1911 - branches/1.01/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1339">[ date ]</a>
              <a href="thread.html#1339">[ thread ]</a>
              <a href="subject.html#1339">[ subject ]</a>
              <a href="author.html#1339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: raoul
Date: 2009-12-12 22:14:40 +0100 (Sat, 12 Dec 2009)
New Revision: 1910

Added:
   trunk/attic/images-stones/Flash.svg
   trunk/attic/images-stones/st_flash-gfx16.xcf
   trunk/attic/images-stones/st_flash-gfx32.xcf
   trunk/attic/images-stones/st_flash-gfx40.xcf
   trunk/attic/images-stones/st_flash-gfx48.xcf
   trunk/attic/images-stones/st_flash-gfx64.xcf
   trunk/data/gfx16/st_flash.png
   trunk/data/gfx64/st_flash.png
Modified:
   trunk/data/gfx32/st_flash.png
   trunk/data/gfx40/st_flash.png
   trunk/data/gfx48/st_flash.png
   trunk/data/models-2d.lua
   trunk/src/stones/SimpleStones.cc
   trunk/src/stones/SimpleStones.hh
Log:
-&gt; Updates from Zeus
--&gt; New flash stones for all resolutions
--&gt; Based on new blue sand stones
--&gt; Flash stone is now animated :-)



Added: trunk/attic/images-stones/Flash.svg
===================================================================
--- trunk/attic/images-stones/Flash.svg	2009-12-12 13:20:31 UTC (rev 1909)
+++ trunk/attic/images-stones/Flash.svg	2009-12-12 21:14:40 UTC (rev 1910)
@@ -0,0 +1,93 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
+&lt;!-- Created with Inkscape (<A HREF="http://www.inkscape.org/">http://www.inkscape.org/</A>) --&gt;
+
+&lt;svg
+   xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;
+   xmlns:cc=&quot;<A HREF="http://creativecommons.org/ns#">http://creativecommons.org/ns#</A>&quot;
+   xmlns:rdf=&quot;<A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>&quot;
+   xmlns:svg=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot;
+   xmlns=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot;
+   xmlns:sodipodi=&quot;<A HREF="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd">http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd</A>&quot;
+   xmlns:inkscape=&quot;<A HREF="http://www.inkscape.org/namespaces/inkscape">http://www.inkscape.org/namespaces/inkscape</A>&quot;
+   width=&quot;50&quot;
+   height=&quot;100&quot;
+   id=&quot;svg2&quot;
+   version=&quot;1.1&quot;
+   inkscape:version=&quot;0.47pre4 r22446&quot;
+   sodipodi:docname=&quot;Flash.svg&quot;&gt;
+  &lt;defs
+     id=&quot;defs4&quot; /&gt;
+  &lt;sodipodi:namedview
+     id=&quot;base&quot;
+     pagecolor=&quot;#ffffff&quot;
+     bordercolor=&quot;#666666&quot;
+     borderopacity=&quot;1.0&quot;
+     inkscape:pageopacity=&quot;0.0&quot;
+     inkscape:pageshadow=&quot;2&quot;
+     inkscape:zoom=&quot;1.979899&quot;
+     inkscape:cx=&quot;-59.167931&quot;
+     inkscape:cy=&quot;16.830026&quot;
+     inkscape:document-units=&quot;px&quot;
+     inkscape:current-layer=&quot;layer1&quot;
+     showgrid=&quot;true&quot;
+     inkscape:snap-bbox=&quot;true&quot;
+     inkscape:bbox-paths=&quot;true&quot;
+     inkscape:bbox-nodes=&quot;true&quot;
+     inkscape:snap-bbox-edge-midpoints=&quot;true&quot;
+     inkscape:snap-bbox-midpoints=&quot;true&quot;
+     inkscape:window-width=&quot;1429&quot;
+     inkscape:window-height=&quot;816&quot;
+     inkscape:window-x=&quot;0&quot;
+     inkscape:window-y=&quot;26&quot;
+     inkscape:window-maximized=&quot;1&quot;
+     inkscape:snap-global=&quot;false&quot;&gt;
+    &lt;inkscape:grid
+       type=&quot;xygrid&quot;
+       id=&quot;grid2816&quot;
+       empspacing=&quot;5&quot;
+       visible=&quot;true&quot;
+       enabled=&quot;true&quot;
+       snapvisiblegridlinesonly=&quot;true&quot; /&gt;
+  &lt;/sodipodi:namedview&gt;
+  &lt;metadata
+     id=&quot;metadata7&quot;&gt;
+    &lt;rdf:RDF&gt;
+      &lt;cc:Work
+         rdf:about=&quot;&quot;&gt;
+        &lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;
+        &lt;dc:type
+           rdf:resource=&quot;<A HREF="http://purl.org/dc/dcmitype/StillImage">http://purl.org/dc/dcmitype/StillImage</A>&quot; /&gt;
+        &lt;dc:title&gt;&lt;/dc:title&gt;
+        &lt;cc:license
+           rdf:resource=&quot;<A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>&quot; /&gt;
+      &lt;/cc:Work&gt;
+      &lt;cc:License
+         rdf:about=&quot;<A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>&quot;&gt;
+        &lt;cc:permits
+           rdf:resource=&quot;<A HREF="http://creativecommons.org/ns#Reproduction">http://creativecommons.org/ns#Reproduction</A>&quot; /&gt;
+        &lt;cc:permits
+           rdf:resource=&quot;<A HREF="http://creativecommons.org/ns#Distribution">http://creativecommons.org/ns#Distribution</A>&quot; /&gt;
+        &lt;cc:permits
+           rdf:resource=&quot;<A HREF="http://creativecommons.org/ns#DerivativeWorks">http://creativecommons.org/ns#DerivativeWorks</A>&quot; /&gt;
+      &lt;/cc:License&gt;
+    &lt;/rdf:RDF&gt;
+  &lt;/metadata&gt;
+  &lt;g
+     inkscape:label=&quot;Layer 1&quot;
+     inkscape:groupmode=&quot;layer&quot;
+     id=&quot;layer1&quot;
+     transform=&quot;translate(0,-952.36218)&quot;&gt;
+    &lt;path
+       style=&quot;fill:none;stroke:none&quot;
+       d=&quot;m 435,802.36218 9,-15 -6,4 6.87373,-18.89404 -8.75761,6.15673 4.88388,-11.26269 -5.11612,4.61104 -2.52538,-5.24238 -0.61104,16.86358 5.75762,-3.24239 -4.50508,11.01015 -3,-3 4,14 z&quot;
+       id=&quot;path3598&quot;
+       sodipodi:nodetypes=&quot;ccccccccccccc&quot; /&gt;
+    &lt;path
+       style=&quot;fill:#ffbb3d;fill-opacity:1;stroke:#ff6600;stroke-width:2.21124434;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-dasharray:none&quot;
+       d=&quot;m 17.39458,1046.2566 23.24763,-32.5752 -16.18099,9.0425 20.41793,-38.78807 -24.73062,10.7955 14.18464,-36.26349 -17.49838,20.75538 -8.0494598,-20.75541 0.8106701,28.42578 -0.50677,21.30651 14.9553297,-6.3165 -5.67204,20.8922 -13.2516697,-8.2553 12.2737297,31.7361 z&quot;
+       id=&quot;path3598-3&quot;
+       sodipodi:nodetypes=&quot;cccccccccccccc&quot;
+       inkscape:export-xdpi=&quot;138.6767&quot;
+       inkscape:export-ydpi=&quot;138.6767&quot; /&gt;
+  &lt;/g&gt;
+&lt;/svg&gt;

Added: trunk/attic/images-stones/st_flash-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_flash-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_flash-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_flash-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_flash-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_flash-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_flash-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_flash-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_flash-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_flash-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/st_flash.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_flash.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/st_flash.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_flash.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_flash.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/st_flash.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_flash.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-12-12 13:20:31 UTC (rev 1909)
+++ trunk/data/models-2d.lua	2009-12-12 21:14:40 UTC (rev 1910)
@@ -1040,8 +1040,12 @@
 
 -- st-flash --
 do
-    local images = DefSubimages(&quot;st_flash&quot;, {h=1})
+    local images = DefSubimages(&quot;st_flash&quot;, {h=6})
     DefSolidStone(&quot;st_flash&quot;, &quot;st_flash1&quot;)
+    table.remove(images,1)
+    local frames = BuildFrames(images,50)
+    DefAnim(&quot;st_flash_anim&quot;, frames)
+    DefSolidStone(&quot;st_flash-anim&quot;, &quot;st_flash_anim&quot;)
 end
 
 -- st_fourswitch --

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-12-12 13:20:31 UTC (rev 1909)
+++ trunk/src/stones/SimpleStones.cc	2009-12-12 21:14:40 UTC (rev 1910)
@@ -156,10 +156,19 @@
         return &quot;st_flash&quot;;
     }
         
+    void FlashStone::init_model() {
+        set_model(&quot;st_flash&quot;);
+    }
+    
+    void FlashStone::animcb() {
+        init_model();
+    }
+
     void FlashStone::actor_hit(const StoneContact &amp;sc) {
         if (Actor *other = FindOtherMarble(sc.actor)) {
             other-&gt;add_force (distortedVelocity(sc.actor-&gt;get_vel(), 20));
         }
+        set_anim(&quot;st_flash-anim&quot;);
     }
 
 /* -------------------- Grate stone -------------------- */

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-12-12 13:20:31 UTC (rev 1909)
+++ trunk/src/stones/SimpleStones.hh	2009-12-12 21:14:40 UTC (rev 1910)
@@ -105,6 +105,12 @@
         // Object interface
         virtual std::string getClass() const;
 
+        // GridObject interface
+        virtual void init_model();
+        
+        // ModelCallback interface  - Animation callback
+        virtual void animcb();
+
         // Stone interface
         virtual void actor_hit(const StoneContact &amp;sc);
     };


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001338.html">[Enigma-game-svn] r1909 - in trunk: attic/images-items	attic/images-stones data data/gfx16 data/gfx32 data/gfx40	data/gfx48 data/gfx64
</A></li>
	<LI>Next message: <A HREF="001340.html">[Enigma-game-svn] r1911 - branches/1.01/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1339">[ date ]</a>
              <a href="thread.html#1339">[ thread ]</a>
              <a href="subject.html#1339">[ subject ]</a>
              <a href="author.html#1339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
