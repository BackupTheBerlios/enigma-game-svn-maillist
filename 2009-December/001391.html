<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1965 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1965%20-%20in%20trunk%3A%20attic/images-stones%20data%0A%09data/gfx16%20data/gfx32%20data/gfx40%20data/gfx48%20data/gfx64&In-Reply-To=%3C200912300035.nBU0ZGkc017360%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001390.html">
   <LINK REL="Next"  HREF="001392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1965 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64</H1>
    <B>raoul at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1965%20-%20in%20trunk%3A%20attic/images-stones%20data%0A%09data/gfx16%20data/gfx32%20data/gfx40%20data/gfx48%20data/gfx64&In-Reply-To=%3C200912300035.nBU0ZGkc017360%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1965 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64">raoul at mail.berlios.de
       </A><BR>
    <I>Wed Dec 30 01:35:16 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001390.html">[Enigma-game-svn] r1964 - in trunk: attic/images-items data/gfx16	data/gfx32 data/gfx40 data/gfx48 data/gfx64
</A></li>
        <LI>Next message: <A HREF="001392.html">[Enigma-game-svn] r1966 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1391">[ date ]</a>
              <a href="thread.html#1391">[ thread ]</a>
              <a href="subject.html#1391">[ subject ]</a>
              <a href="author.html#1391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: raoul
Date: 2009-12-30 01:35:14 +0100 (Wed, 30 Dec 2009)
New Revision: 1965

Added:
   trunk/attic/images-stones/sh_actorimpulse-gfx16.xcf
   trunk/attic/images-stones/sh_actorimpulse-gfx32.xcf
   trunk/attic/images-stones/sh_actorimpulse-gfx40.xcf
   trunk/attic/images-stones/sh_actorimpulse-gfx48.xcf
   trunk/attic/images-stones/sh_actorimpulse-gfx64.xcf
   trunk/attic/images-stones/st_actorimpulse-gfx16.xcf
   trunk/attic/images-stones/st_actorimpulse-gfx32.xcf
   trunk/attic/images-stones/st_actorimpulse-gfx40.xcf
   trunk/attic/images-stones/st_actorimpulse-gfx48.xcf
   trunk/attic/images-stones/st_actorimpulse-gfx64.xcf
   trunk/data/gfx16/sh_actorimpulse.png
   trunk/data/gfx16/st_actorimpulse.png
   trunk/data/gfx64/sh_actorimpulse.png
   trunk/data/gfx64/st_actorimpulse.png
Modified:
   trunk/data/gfx32/sh_actorimpulse.png
   trunk/data/gfx32/st_actorimpulse.png
   trunk/data/gfx40/sh_actorimpulse.png
   trunk/data/gfx40/st_actorimpulse.png
   trunk/data/gfx48/sh_actorimpulse.png
   trunk/data/gfx48/st_actorimpulse.png
   trunk/data/models-2d.lua
Log:
-&gt; New actorimpulse stone models for all resolutions
-&gt; Corrected indent. in lua to 4 spaces



Added: trunk/attic/images-stones/sh_actorimpulse-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_actorimpulse-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_actorimpulse-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_actorimpulse-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_actorimpulse-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_actorimpulse-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_actorimpulse-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_actorimpulse-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_actorimpulse-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_actorimpulse-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_actorimpulse-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_actorimpulse-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_actorimpulse-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_actorimpulse-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_actorimpulse-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_actorimpulse-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_actorimpulse-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_actorimpulse-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_actorimpulse-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_actorimpulse-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/sh_actorimpulse.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_actorimpulse.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_actorimpulse.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_actorimpulse.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/sh_actorimpulse.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_actorimpulse.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_actorimpulse.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_actorimpulse.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_actorimpulse.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_actorimpulse.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/sh_actorimpulse.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_actorimpulse.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_actorimpulse.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_actorimpulse.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-12-28 21:02:57 UTC (rev 1964)
+++ trunk/data/models-2d.lua	2009-12-30 00:35:14 UTC (rev 1965)
@@ -35,30 +35,30 @@
 -- ac_marble --
 do
     local images,frames,shadows
-
+    
     -- Normal black marble
     images = SpriteImages(&quot;ac_marble_black&quot;, 2, 0.5, 0.31)
     shadows = SpriteImage(&quot;sh_marble&quot;, 0.4, 0.29)
     DefShModel(&quot;ac_marble_black&quot;, &quot;ac_marble_black1&quot;, &quot;sh_marble&quot;)
     DefShModel(&quot;ac_marble_black-shine&quot;, &quot;ac_marble_black2&quot;, &quot;sh_marble&quot;)
-
+    
     -- Normal white marble
     -- Use shadow from black marble
     images = SpriteImages(&quot;ac_marble_white&quot;, 2, 0.5, 0.31)
     DefShModel(&quot;ac_marble_white&quot;, &quot;ac_marble_white1&quot;, &quot;sh_marble&quot;)
     DefShModel(&quot;ac_marble_white-shine&quot;, &quot;ac_marble_white2&quot;, &quot;sh_marble&quot;)
-
+    
     -- Falling black marble
     images = SpriteImages(&quot;ac_marble_black_fall&quot;, 10)
     shadows = SpriteImages(&quot;sh_marble_fall&quot;, 10, 0.4)
     frames = {}
     for i=1,table.getn(images) do
-       DefShModel(&quot;ac_marble_black-sink&quot;..(i-1), images[i], shadows[i])
-       frames[i] = &quot;ac_marble_black-sink&quot;..(i-1)
+        DefShModel(&quot;ac_marble_black-sink&quot;..(i-1), images[i], shadows[i])
+        frames[i] = &quot;ac_marble_black-sink&quot;..(i-1)
     end
     DefAnim(&quot;ac_marble_black-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,50,50,50,50,50,50}))
     DefAlias(&quot;ac_marble_black-fallen&quot;, &quot;invisible&quot;)
-
+    
     -- Appearing / disappearing black marble
     -- use the images from falling black marble
     DefAnim(&quot;ac_marble_black-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
@@ -69,12 +69,12 @@
     images = SpriteImages(&quot;ac_marble_white_fall&quot;, 10)
     frames = {}
     for i=1,table.getn(images) do
-       DefShModel(&quot;ac_marble_white-sink&quot;..(i-1), images[i], shadows[i])
-       frames[i] = &quot;ac_marble_white-sink&quot;..(i-1)
+        DefShModel(&quot;ac_marble_white-sink&quot;..(i-1), images[i], shadows[i])
+        frames[i] = &quot;ac_marble_white-sink&quot;..(i-1)
     end
     DefAnim(&quot;ac_marble_white-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,50,50,50,50,50,50}))
     DefAlias(&quot;ac_marble_white-fallen&quot;, &quot;invisible&quot;)
-
+    
     -- Appearing / disappearing white marble
     -- use the images from falling white marble
     DefAnim(&quot;ac_marble_white-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
@@ -107,7 +107,7 @@
         DefShModel(&quot;ac_marble_black-sink&quot;..(i-1), images[i], shadows[i])
     end
     DefAlias(&quot;ac_marble_black-sunk&quot;, &quot;invisible&quot;)
-
+    
     -- Sinking white marble
     -- Use shadow from black marble
     images = SpriteImages(&quot;ac_marble_white_sink&quot;, 7)
@@ -130,19 +130,19 @@
 -- ac_pearl --
 do
     local images, frames, shadows
-
+    
     -- Normal black pearl
     SpriteImage(&quot;ac_pearl_black&quot;, 0.5, 0.43)
     SpriteImage(&quot;sh_pearl&quot;, 0.4, 0.41)
     DefShModel(&quot;ac_pearl_black&quot;, &quot;ac_pearl_black&quot;, &quot;sh_pearl&quot;)
     DefAlias(&quot;ac_pearl_black-shine&quot;, &quot;ac_pearl_black&quot;)
-
+    
     -- Normal white pearl
     -- Use shadow from black pearl
     SpriteImage(&quot;ac_pearl_white&quot;, 0.5, 0.43)
     DefShModel(&quot;ac_pearl_white&quot;, &quot;ac_pearl_white&quot;, &quot;sh_pearl&quot;)
     DefAlias(&quot;ac_pearl_white-shine&quot;, &quot;ac_pearl_white&quot;)
-
+    
     -- Falling black pearl
     images = SpriteImages(&quot;ac_pearl_black_fall&quot;, 5, 0.5, 0.43)
     shadows = SpriteImages(&quot;sh_pearl_fall&quot;, 5, 0.4, 0.43)
@@ -150,34 +150,34 @@
     table.insert(shadows, &quot;invisible&quot;)
     frames = {}
     for i=1,table.getn(images) do
-       DefShModel(&quot;ac_pearl_black-fall&quot;..(i-1), images[i], shadows[i])
-       frames[i] = &quot;ac_pearl_black-fall&quot;..(i-1)
+        DefShModel(&quot;ac_pearl_black-fall&quot;..(i-1), images[i], shadows[i])
+        frames[i] = &quot;ac_pearl_black-fall&quot;..(i-1)
     end
     DefAnim(&quot;ac_pearl_black-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,30}))
     DefAlias(&quot;ac_pearl_black-fallen&quot;, &quot;invisible&quot;)
-
+    
     -- Appearing / disappearing black pearl
     -- use the images from falling black pearl
     DefAnim(&quot;ac_pearl_black-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
     DefAnim(&quot;ac_pearl_black-disappear&quot;, BuildFrames(frames, 25))
-
+    
     -- Falling white pearl
     -- Use shadows from falling black pearl
     images = SpriteImages(&quot;ac_pearl_white_fall&quot;, 5, 0.5, 0.43)
     table.insert(images, &quot;invisible&quot;)
     frames = {}
     for i=1,table.getn(images) do
-       DefShModel(&quot;ac_pearl_white-fall&quot;..(i-1), images[i], shadows[i])
-       frames[i] = &quot;ac_pearl_white-fall&quot;..(i-1)
+        DefShModel(&quot;ac_pearl_white-fall&quot;..(i-1), images[i], shadows[i])
+        frames[i] = &quot;ac_pearl_white-fall&quot;..(i-1)
     end
     DefAnim(&quot;ac_pearl_white-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,30}))
     DefAlias(&quot;ac_pearl_white-fallen&quot;, &quot;invisible&quot;)
-
+    
     -- Appearing / disappearing white pearl
     -- use the images from falling white pearl
     DefAnim(&quot;ac_pearl_white-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
     DefAnim(&quot;ac_pearl_white-disappear&quot;, BuildFrames(frames, 25))
-
+    
     -- Jumping black pearl
     images  = SpriteImages(&quot;ac_pearl_black_jump&quot;, 4)
     shadows = SpriteImages(&quot;sh_pearl_jump&quot;, 4, 0.4)
@@ -227,7 +227,7 @@
     -- Shattering white pearl
     Sprite({name=&quot;ac_pearl_white_shatter&quot;, nimages=5, framelen=60})
     DefAlias(&quot;ac_pearl_white-shatter&quot;, &quot;ac_pearl_white_shatter&quot;)
-    DefAlias(&quot;ac_pearl_white-shattered&quot;, &quot;ac_pearl_white_shatter5&quot;)
+    DefAlias(&quot;ac_pearl_white-shattered&quot;, &quot;ac_pearl_white_shatter5&quot;)     
 end
 
 -- ac-killerball --
@@ -275,7 +275,7 @@
 do
     local fg = SpriteImages(&quot;ac_top&quot;, 9, 0.5, 0.3)
     local bg = SpriteImage(&quot;sh_top&quot;, 0.4, 0.3)
-
+    
     frames = {}
     for i=1,9 do
         DefShModel(&quot;ac-top&quot;..i, fg[i], bg)
@@ -375,7 +375,6 @@
     end
 end
 
-
 -----------------------------------------
 -- Special Floors
 -----------------------------------------
@@ -497,8 +496,8 @@
         DefAlias(&quot;fl_bridge_&quot;..suff..&quot;_closed&quot;, &quot;fl_bridge_bw_closed&quot;)
 
         local namelist=DefSubimages(&quot;fl_bridge_&quot;..suff, {h=7})
-	table.insert(namelist, 1, bridge_c)
-	table.insert(namelist, bridge_o)
+        table.insert(namelist, 1, bridge_c)
+        table.insert(namelist, bridge_o)
         local frames = BuildFrames(namelist,70)
         DefAnim(&quot;fl_bridge_&quot;..suff..&quot;_opening&quot;, frames)
         DefAnim(&quot;fl_bridge_&quot;..suff..&quot;_closing&quot;, ReverseFrames(frames))
@@ -509,7 +508,7 @@
 -- scales
 do
     local scales = DefSubimages(&quot;fl_scales&quot;, {h=2})
-
+    
     display.DefineComposite(&quot;fl_scales_brick_released&quot;, &quot;fl_brick&quot;, scales[1])
     display.DefineComposite(&quot;fl_scales_brick_pressed&quot;, &quot;fl_brick&quot;, scales[2])
 
@@ -538,7 +537,7 @@
         local frames = BuildFrames(images, 240)
         DefAnim(basemodel..&quot;_heating&quot;, frames);
     end
-
+    
     heating_animation(&quot;fl_ice&quot;)
     heating_animation(&quot;fl_water&quot;)
     heating_animation(&quot;fl_swamp&quot;)
@@ -595,7 +594,7 @@
         &quot;it_weight&quot;,
         &quot;it_wrench&quot;
     }
-
+    
     DefImages(itemlist)
 
     DefImage(&quot;it_brake&quot;, {filename=&quot;st_brake&quot;})
@@ -643,7 +642,7 @@
 -- it_pipe --
 do
     DefTiles(&quot;it_pipe&quot;, {&quot;it_pipe_e&quot;, &quot;it_pipe_s&quot;, &quot;it_pipe_es&quot;, &quot;it_pipe_sw&quot;, &quot;it_pipe_ew&quot;,
-                            &quot;it_pipe_w&quot;, &quot;it_pipe_n&quot;, &quot;it_pipe_ne&quot;, &quot;it_pipe_nw&quot;, &quot;it_pipe_ns&quot;})
+                         &quot;it_pipe_w&quot;, &quot;it_pipe_n&quot;, &quot;it_pipe_ne&quot;, &quot;it_pipe_nw&quot;, &quot;it_pipe_ns&quot;})
 end
 
 -- it-trigger --
@@ -676,8 +675,7 @@
 do
     local images = DefSubimages(&quot;it_bomb_white_burning&quot;, {h=9})
     local frames = BuildFrames(images, 100)
-    DefAnim(&quot;it_bomb_white_burning&quot;, frames
-    )
+    DefAnim(&quot;it_bomb_white_burning&quot;, frames)
     local frames = BuildFrames({&quot;it_bomb_white_burning8&quot;, &quot;it_bomb_white_burning9&quot;},120)
     DefAnim(&quot;it_bomb_white_exploding&quot;, frames)
 end
@@ -930,7 +928,7 @@
 do
     namelist = DefSubimages(&quot;st_actorimpulse&quot;, {h=3})
     shnamelist = DefSubimages(&quot;sh_actorimpulse&quot;, {h=3,imgw=ShadowSize,imgh=ShadowSize})
-
+    
     DefAnim(&quot;st-ai-fg&quot;, PingPong(BuildFrames(namelist, 30)))
     DefAnim(&quot;st-ai-sh&quot;, PingPong(BuildFrames(shnamelist, 30)))
     DefShModel(&quot;st_actorimpulse_anim&quot;, &quot;st-ai-fg&quot;, &quot;st-ai-sh&quot;)
@@ -991,7 +989,7 @@
 do
     function def_chargestone(basename)
         local images = DefSubimages(basename, {h=2})
-	DefShModel(basename, images[1], &quot;sh_rounded&quot;)
+        DefShModel(basename, images[1], &quot;sh_rounded&quot;)
         DefAnim(basename..&quot;-animfg&quot;, {{images[2], 140}})
         DefShModel(basename..&quot;_anim&quot;, basename..&quot;-animfg&quot;, &quot;sh_rounded&quot;)
     end
@@ -1104,34 +1102,34 @@
 
 -- st_laser --
 do
-   local images = DefSubimages(&quot;st_laser&quot;, {w=4,h=9})
-   local imagesn = {}
-   local imagese = {}
-   local imagess = {}
-   local imagesw = {}
-   for i=0,8 do
-      imagesn[i] = images[1+i]
-      imagese[i] = images[10+i]
-      imagess[i] = images[19+i]
-      imagesw[i] = images[28+i]
-      -- slicing like in python would be nice here :-)
-   end
+    local images = DefSubimages(&quot;st_laser&quot;, {w=4,h=9})
+    local imagesn = {}
+    local imagese = {}
+    local imagess = {}
+    local imagesw = {}
+    for i=0,8 do
+        imagesn[i] = images[1+i]
+        imagese[i] = images[10+i]
+        imagess[i] = images[19+i]
+        imagesw[i] = images[28+i]
+        -- slicing like in python would be nice here :-)
+    end
 
-   -- deactivated laser
-   DefShModel(&quot;st-laser-n&quot;, imagesn[1], &quot;sh_rounded&quot;)
-   DefShModel(&quot;st-laser-e&quot;, imagese[1], &quot;sh_rounded&quot;)
-   DefShModel(&quot;st-laser-s&quot;, imagess[1], &quot;sh_rounded&quot;)
-   DefShModel(&quot;st-laser-w&quot;, imagesw[1], &quot;sh_rounded&quot;)
-
-   -- activated laser
-   DefAnim(&quot;st-laseron-anim-n&quot;, BuildFrames(imagesn,100), true)
-   DefShModel(&quot;st-laseron-n&quot;, &quot;st-laseron-anim-n&quot;, &quot;sh_rounded&quot;)
-   DefAnim(&quot;st-laseron-anim-e&quot;, BuildFrames(imagese,100), true)                                                                                       
-   DefShModel(&quot;st-laseron-e&quot;, &quot;st-laseron-anim-e&quot;, &quot;sh_rounded&quot;)
-   DefAnim(&quot;st-laseron-anim-s&quot;, BuildFrames(imagess,100), true)                                                                                       
-   DefShModel(&quot;st-laseron-s&quot;, &quot;st-laseron-anim-s&quot;, &quot;sh_rounded&quot;)
-   DefAnim(&quot;st-laseron-anim-w&quot;, BuildFrames(imagesw,100), true)                                                                                       
-   DefShModel(&quot;st-laseron-w&quot;, &quot;st-laseron-anim-w&quot;, &quot;sh_rounded&quot;)
+    -- deactivated laser
+    DefShModel(&quot;st-laser-n&quot;, imagesn[1], &quot;sh_rounded&quot;)
+    DefShModel(&quot;st-laser-e&quot;, imagese[1], &quot;sh_rounded&quot;)
+    DefShModel(&quot;st-laser-s&quot;, imagess[1], &quot;sh_rounded&quot;)
+    DefShModel(&quot;st-laser-w&quot;, imagesw[1], &quot;sh_rounded&quot;)
+    
+    -- activated laser
+    DefAnim(&quot;st-laseron-anim-n&quot;, BuildFrames(imagesn,100), true)
+    DefShModel(&quot;st-laseron-n&quot;, &quot;st-laseron-anim-n&quot;, &quot;sh_rounded&quot;)
+    DefAnim(&quot;st-laseron-anim-e&quot;, BuildFrames(imagese,100), true)                                                                                       
+    DefShModel(&quot;st-laseron-e&quot;, &quot;st-laseron-anim-e&quot;, &quot;sh_rounded&quot;)
+    DefAnim(&quot;st-laseron-anim-s&quot;, BuildFrames(imagess,100), true)                                                                                       
+    DefShModel(&quot;st-laseron-s&quot;, &quot;st-laseron-anim-s&quot;, &quot;sh_rounded&quot;)
+    DefAnim(&quot;st-laseron-anim-w&quot;, BuildFrames(imagesw,100), true)                                                                                       
+    DefShModel(&quot;st-laseron-w&quot;, &quot;st-laseron-anim-w&quot;, &quot;sh_rounded&quot;)
 end
 
 -- st_lightpassenger --
@@ -1149,12 +1147,12 @@
     img = DefSubimages(&quot;st_lightpassenger_break&quot;, {h=7})
     local anim_v, anim_h, anim_hv = {}, {}, {}
     for j = 1, 7 do
-      anim_v[j] = &quot;st_lightpassenger_break_v&quot;..j
-      display.DefineComposite(anim_v[j], &quot;it_laser_v&quot;, img[j])
-      anim_h[j] = &quot;st_lightpassenger_break_h&quot;..j
-      display.DefineComposite(anim_h[j], &quot;it_laser_h&quot;, img[j])
-      anim_hv[j] = &quot;st_lightpassenger_break_hv&quot;..j
-      display.DefineComposite(anim_hv[j], &quot;it_laser_hv&quot;, img[j])
+        anim_v[j] = &quot;st_lightpassenger_break_v&quot;..j
+        display.DefineComposite(anim_v[j], &quot;it_laser_v&quot;, img[j])
+        anim_h[j] = &quot;st_lightpassenger_break_h&quot;..j
+        display.DefineComposite(anim_h[j], &quot;it_laser_h&quot;, img[j])
+        anim_hv[j] = &quot;st_lightpassenger_break_hv&quot;..j
+        display.DefineComposite(anim_hv[j], &quot;it_laser_hv&quot;, img[j])
     end
     DefAnim(&quot;st_lightpassenger_break_v&quot;, BuildFrames(anim_v, 50), false)
     DefAnim(&quot;st_lightpassenger_break_h&quot;, BuildFrames(anim_h, 50), false)
@@ -1194,21 +1192,21 @@
 
 -- st_pull, st_swap --
 do
-   DefSubimages(&quot;st_pull&quot;,{modelname=&quot;st-pull-fg&quot;,h=5})
-   DefSubimages(&quot;st_swap&quot;,{modelname=&quot;st-swap-fg&quot;,h=5})
-   DefSubimages(&quot;sh_pull&quot;,{h=4, imgw=ShadowSize, imgh=ShadowSize})
+    DefSubimages(&quot;st_pull&quot;,{modelname=&quot;st-pull-fg&quot;,h=5})
+    DefSubimages(&quot;st_swap&quot;,{modelname=&quot;st-swap-fg&quot;,h=5})
+    DefSubimages(&quot;sh_pull&quot;,{h=4, imgw=ShadowSize, imgh=ShadowSize})
 
-   DefShModel(&quot;st_pull&quot;,   &quot;st-pull-fg1&quot;, &quot;sh_rawglass&quot;)
-   DefShModel(&quot;st_pull_n&quot;, &quot;st-pull-fg2&quot;, &quot;sh_pull1&quot;)
-   DefShModel(&quot;st_pull_s&quot;, &quot;st-pull-fg3&quot;, &quot;sh_pull2&quot;)
-   DefShModel(&quot;st_pull_e&quot;, &quot;st-pull-fg4&quot;, &quot;sh_pull3&quot;)
-   DefShModel(&quot;st_pull_w&quot;, &quot;st-pull-fg5&quot;, &quot;sh_pull4&quot;)
+    DefShModel(&quot;st_pull&quot;,   &quot;st-pull-fg1&quot;, &quot;sh_rawglass&quot;)
+    DefShModel(&quot;st_pull_n&quot;, &quot;st-pull-fg2&quot;, &quot;sh_pull1&quot;)
+    DefShModel(&quot;st_pull_s&quot;, &quot;st-pull-fg3&quot;, &quot;sh_pull2&quot;)
+    DefShModel(&quot;st_pull_e&quot;, &quot;st-pull-fg4&quot;, &quot;sh_pull3&quot;)
+    DefShModel(&quot;st_pull_w&quot;, &quot;st-pull-fg5&quot;, &quot;sh_pull4&quot;)
 
-   DefShModel(&quot;st_swap&quot;,   &quot;st-swap-fg1&quot;, &quot;sh_round&quot;)
-   DefShModel(&quot;st_swap_n&quot;, &quot;st-swap-fg2&quot;, &quot;sh_pull1&quot;)
-   DefShModel(&quot;st_swap_s&quot;, &quot;st-swap-fg3&quot;, &quot;sh_pull2&quot;)
-   DefShModel(&quot;st_swap_e&quot;, &quot;st-swap-fg4&quot;, &quot;sh_pull3&quot;)
-   DefShModel(&quot;st_swap_w&quot;, &quot;st-swap-fg5&quot;, &quot;sh_pull4&quot;)
+    DefShModel(&quot;st_swap&quot;,   &quot;st-swap-fg1&quot;, &quot;sh_round&quot;)
+    DefShModel(&quot;st_swap_n&quot;, &quot;st-swap-fg2&quot;, &quot;sh_pull1&quot;)
+    DefShModel(&quot;st_swap_s&quot;, &quot;st-swap-fg3&quot;, &quot;sh_pull2&quot;)
+    DefShModel(&quot;st_swap_e&quot;, &quot;st-swap-fg4&quot;, &quot;sh_pull3&quot;)
+    DefShModel(&quot;st_swap_w&quot;, &quot;st-swap-fg5&quot;, &quot;sh_pull4&quot;)
 end
 
 -- st-puzzle* --
@@ -1275,16 +1273,16 @@
 -- (anim2) is longer than the opening animation (anim1). Otherwise
 -- impulse stones do not work properly!
 do
-   local images = DefSubimages(&quot;st_stoneimpulse&quot;, {h=6})
-   DefRoundStone(&quot;st_stoneimpulse&quot;, images[1])
-   DefRoundStone(&quot;st_stoneimpulse_steady&quot;, images[6])
-   local frames = {}
-   for i=1,4 do table.insert(frames, images[i]) end
-   DefAnim(&quot;stoneimpulse_anim1&quot;, BuildFrames(frames, 55))
-   DefRoundStone(&quot;st_stoneimpulse_anim1&quot;, &quot;stoneimpulse_anim1&quot;)
-   table.insert(frames, images[4]) -- add 1 frame to make closing anim longer!
-   DefAnim(&quot;stoneimpulse_anim2&quot;, ReverseFrames(BuildFrames(frames, 55)))
-   DefRoundStone(&quot;st_stoneimpulse_anim2&quot;, &quot;stoneimpulse_anim2&quot;)
+    local images = DefSubimages(&quot;st_stoneimpulse&quot;, {h=6})
+    DefRoundStone(&quot;st_stoneimpulse&quot;, images[1])
+    DefRoundStone(&quot;st_stoneimpulse_steady&quot;, images[6])
+    local frames = {}
+    for i=1,4 do table.insert(frames, images[i]) end
+    DefAnim(&quot;stoneimpulse_anim1&quot;, BuildFrames(frames, 55))
+    DefRoundStone(&quot;st_stoneimpulse_anim1&quot;, &quot;stoneimpulse_anim1&quot;)
+    table.insert(frames, images[4]) -- add 1 frame to make closing anim longer!
+    DefAnim(&quot;stoneimpulse_anim2&quot;, ReverseFrames(BuildFrames(frames, 55)))
+    DefRoundStone(&quot;st_stoneimpulse_anim2&quot;, &quot;stoneimpulse_anim2&quot;)
 end
 
 -- st_stoneimpulse_hollow --
@@ -1350,7 +1348,7 @@
     DefRoundStone(&quot;st_monoflop&quot;, &quot;st_monoflop1&quot;)
     DefAnim(&quot;st_monoflop_anim&quot;, BuildFrames (images, 180), 1)
     DefShModel(&quot;st_monoflop_anim&quot;, &quot;st_monoflop_anim&quot;, &quot;sh_round&quot;)
- end
+end
 
 -- laserswitch --
 do
@@ -1385,61 +1383,61 @@
 
 -- growing stones, st_box, st_flhay, greenbrown seed, st-volcano, st-blocker --
 do
-   local shadows=DefSubimages(&quot;sh_round_growing&quot;, {h=3,imgw=ShadowSize,imgh=ShadowSize})
+    local shadows=DefSubimages(&quot;sh_round_growing&quot;, {h=3,imgw=ShadowSize,imgh=ShadowSize})
 
-   -- Wooden (box) stones --
-   do
-      DefSubimages(&quot;st_box_wood&quot;, {modelname=&quot;st_box_wood_fg&quot;,h=2})
-      DefShModel(&quot;st_box_wood1&quot;, &quot;st_box_wood_fg1&quot;, &quot;sh_round&quot;)
-      DefShModel(&quot;st_box_wood2&quot;, &quot;st_box_wood_fg2&quot;, &quot;sh_round&quot;)
+    -- Wooden (box) stones --
+    do
+        DefSubimages(&quot;st_box_wood&quot;, {modelname=&quot;st_box_wood_fg&quot;,h=2})
+        DefShModel(&quot;st_box_wood1&quot;, &quot;st_box_wood_fg1&quot;, &quot;sh_round&quot;)
+        DefShModel(&quot;st_box_wood2&quot;, &quot;st_box_wood_fg2&quot;, &quot;sh_round&quot;)
 
-      local images=DefSubimages(&quot;st_box_wood_growing&quot;, {h=3})
-      DefAnim(&quot;st_box_wood_growing_fg&quot;, BuildFrames(images, 130))
-      DefAnim(&quot;st_box_wood_growing_bg&quot;, BuildFrames(shadows, 130))
-      DefShModel(&quot;st_box_wood_growing&quot;, &quot;st_box_wood_growing_fg&quot;, &quot;st_box_wood_growing_bg&quot;)
-   end
+        local images=DefSubimages(&quot;st_box_wood_growing&quot;, {h=3})
+        DefAnim(&quot;st_box_wood_growing_fg&quot;, BuildFrames(images, 130))
+        DefAnim(&quot;st_box_wood_growing_bg&quot;, BuildFrames(shadows, 130))
+        DefShModel(&quot;st_box_wood_growing&quot;, &quot;st_box_wood_growing_fg&quot;, &quot;st_box_wood_growing_bg&quot;)
+    end
 
-   -- Greenbrown seed growing --
-   do
-      local images=DefSubimages(&quot;st_greenbrown_growing&quot;, {h=3})
-      DefAnim(&quot;st_greenbrown_growing_fg&quot;, BuildFrames(images, 130))
-      DefAnim(&quot;st_greenbrown_growing_bg&quot;, BuildFrames(shadows, 130))
-      DefShModel(&quot;st_greenbrown_growing&quot;, &quot;st_greenbrown_growing_fg&quot;, &quot;st_greenbrown_growing_bg&quot;)
-   end
+    -- Greenbrown seed growing --
+    do
+        local images=DefSubimages(&quot;st_greenbrown_growing&quot;, {h=3})
+        DefAnim(&quot;st_greenbrown_growing_fg&quot;, BuildFrames(images, 130))
+        DefAnim(&quot;st_greenbrown_growing_bg&quot;, BuildFrames(shadows, 130))
+        DefShModel(&quot;st_greenbrown_growing&quot;, &quot;st_greenbrown_growing_fg&quot;, &quot;st_greenbrown_growing_bg&quot;)
+    end
 
-   -- st_box_hay, hay seed growing --
-   do
-      DefStone(&quot;st_box_hay&quot;, &quot;sh_round&quot;)
+    -- st_box_hay, hay seed growing --
+    do
+        DefStone(&quot;st_box_hay&quot;, &quot;sh_round&quot;)
 
-      local images=DefSubimages(&quot;st_box_hay_growing&quot;, {h=3})
-      DefAnim(&quot;st_box_hay_growing_fg&quot;, BuildFrames(images, 130))
-      DefAnim(&quot;st_box_hay_growing_bg&quot;, BuildFrames(shadows, 130))
-      DefShModel(&quot;st_box_hay_growing&quot;, &quot;st_box_hay_growing_fg&quot;, &quot;st_box_hay_growing_bg&quot;)
-   end
+        local images=DefSubimages(&quot;st_box_hay_growing&quot;, {h=3})
+        DefAnim(&quot;st_box_hay_growing_fg&quot;, BuildFrames(images, 130))
+        DefAnim(&quot;st_box_hay_growing_bg&quot;, BuildFrames(shadows, 130))
+        DefShModel(&quot;st_box_hay_growing&quot;, &quot;st_box_hay_growing_fg&quot;, &quot;st_box_hay_growing_bg&quot;)
+    end
 
-   -- volcano growing --
-   do
-      local images=DefSubimages(&quot;st_volcano_growing&quot;, {h=3})
-      DefAnim(&quot;volcano-growing-fg&quot;, BuildFrames(images, 80))
-      DefAnim(&quot;volcano-growing-bg&quot;, BuildFrames(shadows, 80))
-      DefShModel(&quot;st_volcano_growing&quot;, &quot;volcano-growing-fg&quot;, &quot;volcano-growing-bg&quot;)
-   end
+    -- volcano growing --
+    do
+        local images=DefSubimages(&quot;st_volcano_growing&quot;, {h=3})
+        DefAnim(&quot;volcano-growing-fg&quot;, BuildFrames(images, 80))
+        DefAnim(&quot;volcano-growing-bg&quot;, BuildFrames(shadows, 80))
+        DefShModel(&quot;st_volcano_growing&quot;, &quot;volcano-growing-fg&quot;, &quot;volcano-growing-bg&quot;)
+    end
 
-   -- Blocker stone --
-   do
-      local n=DefSubimages(&quot;st_blocker&quot;, {h=4})
-      DefShModel(&quot;st_blocker&quot;, n[1], &quot;sh_round&quot;)
-      frames={}
-      for i=4,2,-1 do
-         table.insert(frames, &quot;st_blocker&quot;..i)
-      end
-      DefAnim(&quot;blocker_growing_fg&quot;, BuildFrames(frames, 60))
-      DefAnim(&quot;blocker_growing_bg&quot;, BuildFrames(shadows, 60))
-      DefAnim(&quot;blocker_shrinking_fg&quot;, ReverseFrames(BuildFrames(frames, 60)))
-      DefAnim(&quot;blocker_shrinking_bg&quot;, ReverseFrames(BuildFrames(shadows, 60)))
-      DefShModel(&quot;st_blocker_shrinking&quot;, &quot;blocker_shrinking_fg&quot;, &quot;blocker_shrinking_bg&quot;);
-      DefShModel(&quot;st_blocker_growing&quot;, &quot;blocker_growing_fg&quot;, &quot;blocker_growing_bg&quot;);
-   end
+    -- Blocker stone --
+    do
+        local n=DefSubimages(&quot;st_blocker&quot;, {h=4})
+        DefShModel(&quot;st_blocker&quot;, n[1], &quot;sh_round&quot;)
+        frames={}
+        for i=4,2,-1 do
+            table.insert(frames, &quot;st_blocker&quot;..i)
+        end
+        DefAnim(&quot;blocker_growing_fg&quot;, BuildFrames(frames, 60))
+        DefAnim(&quot;blocker_growing_bg&quot;, BuildFrames(shadows, 60))
+        DefAnim(&quot;blocker_shrinking_fg&quot;, ReverseFrames(BuildFrames(frames, 60)))
+        DefAnim(&quot;blocker_shrinking_bg&quot;, ReverseFrames(BuildFrames(shadows, 60)))
+        DefShModel(&quot;st_blocker_shrinking&quot;, &quot;blocker_shrinking_fg&quot;, &quot;blocker_shrinking_bg&quot;);
+        DefShModel(&quot;st_blocker_growing&quot;, &quot;blocker_growing_fg&quot;, &quot;blocker_growing_bg&quot;);
+    end
 end
 
 -- st-window --
@@ -1451,7 +1449,7 @@
                              green = DefSubimages(&quot;st_window_green_break&quot;, {h=4})}
 
     local function name(combination, separator)
-      return combination.normal_faces..separator..combination.scratched_faces
+        return combination.normal_faces..separator..combination.scratched_faces
     end
 
     -- The window images are constructed in two steps.
@@ -1497,16 +1495,16 @@
                     -- First, increase the &quot;number&quot; of faces.
                     if new_digit == 1 then
                         new_combination.normal_faces = new_combination.normal_faces
-                                + ({1,2,4,8})[direction]
+                            + ({1,2,4,8})[direction]
                     elseif new_digit == 2 then
                         new_combination.scratched_faces = new_combination.scratched_faces
-                                + ({1,2,4,8})[direction]
+                            + ({1,2,4,8})[direction]
                     end
                     -- Now compose the shadow image.
                     display.DefineComposite(
-                            &quot;sh_window&quot;..name(new_combination, &quot;-&quot;),
-                            &quot;sh_window&quot;..name(old_combination, &quot;-&quot;),
-                            &quot;sh_window&quot;..(direction + ({0,4})[new_digit]))
+                        &quot;sh_window&quot;..name(new_combination, &quot;-&quot;),
+                        &quot;sh_window&quot;..name(old_combination, &quot;-&quot;),
+                        &quot;sh_window&quot;..(direction + ({0,4})[new_digit]))
                 end
             end
         end
@@ -1528,10 +1526,10 @@
             local breaking_window_names = {}
             for j = 1, table.getn(breaking_images[color]) do
                 breaking_window_names[j] =
-                          &quot;st-window_&quot;..color..&quot;_breaking&quot;..name1..&quot;-&quot;..j
+                    &quot;st-window_&quot;..color..&quot;_breaking&quot;..name1..&quot;-&quot;..j
                 display.DefineComposite(breaking_window_names[j],
-                          fg_window[color][total_faces + 1],
-                          breaking_images[color][j])
+                                        fg_window[color][total_faces + 1],
+                                        breaking_images[color][j])
             end
             local frames = BuildFrames(breaking_window_names, 130)
             DefAnim(&quot;st-window_&quot;..color..name2..&quot;_anim_fg&quot;, frames)
@@ -1559,164 +1557,165 @@
 -- them automatically.
 
 do
-   local num_colors = 12
+    local num_colors = 12
 
-   -- Some images we will need later on
-   local colordots = DefSubimages(&quot;st_oxyd_colordots&quot;, {w=4,h=4})
-   local questmark = DefImage(&quot;st_oxyd_questmark&quot;)
-   local blink_ovals = DefSubimages(&quot;st_oxyd_blink&quot;, {w=1,h=5})
-   local quake_spot = DefSubimages(&quot;st_oxyd_quake&quot;, {w=1,h=4})
-   local shuffle_spot = DefSubimages(&quot;st_oxyd_shuffle&quot;, {w=1,h=8})
-   local oxyde = DefImage(&quot;st_oxyde&quot;)
+    -- Some images we will need later on
+    local colordots = DefSubimages(&quot;st_oxyd_colordots&quot;, {w=4,h=4})
+    local questmark = DefImage(&quot;st_oxyd_questmark&quot;)
+    local blink_ovals = DefSubimages(&quot;st_oxyd_blink&quot;, {w=1,h=5})
+    local quake_spot = DefSubimages(&quot;st_oxyd_quake&quot;, {w=1,h=4})
+    local shuffle_spot = DefSubimages(&quot;st_oxyd_shuffle&quot;, {w=1,h=8})
+    local oxyde = DefImage(&quot;st_oxyde&quot;)
 
-   -- Define &quot;fading in&quot; and &quot;fading out&quot; animations for oxyd stones.
-   -- These two animations are combined with the stone images to
-   -- produce the opening and closing animations for oxyd stones.
-   local baseimg = {
-      a=&quot;st_oxyda_open&quot;,
-      b=&quot;st_oxydb_open&quot;,
-      c=&quot;st_oxydc_open&quot;,
-      d=&quot;st_oxydd_open&quot;,
-   }
-   local shadow = {
-      a=&quot;sh_round&quot;,
-      b=&quot;sh_round&quot;,
-      c=&quot;sh_solid&quot;,
-      d=&quot;sh_solid&quot;,
-   }
-   local shadow_open = {
-      a=&quot;sh_round&quot;,
-      b=&quot;sh_round&quot;,
-      c=&quot;sh_solid&quot;,
-      d=&quot;sh_round&quot;,
-   }
-   local fopening = {
-      a = BuildFrames(DefSubimages(&quot;st_oxyda_opening&quot;, {h=10}), 35),
-      b = BuildFrames(DefSubimages(&quot;st_oxydb_opening&quot;, {h=14}), 25),
-      c = BuildFrames(DefSubimages(&quot;st_oxydc_opening&quot;, {h=5}), 70),
-      d = BuildFrames(DefSubimages(&quot;st_oxydd_opening&quot;, {h=10}), 35),
-   }
-   local fclosing = {
-      a = ReverseFrames(fopening[&quot;a&quot;]),
-      b = ReverseFrames(fopening[&quot;b&quot;]),
-      c = ReverseFrames(fopening[&quot;c&quot;]),
-      d = ReverseFrames(fopening[&quot;d&quot;]),
-   }
-   
-   -- The open/close animation of oxyd stones
-   function mkopenclose(flavor, color)
-      local name = &quot;st_oxyd&quot; .. flavor .. color
-      local fadein = &quot;oxyd&quot;..flavor..&quot;_fadein&quot;
-      local fadeout= &quot;oxyd&quot;..flavor..&quot;_fadeout&quot;
-      -- Magic numbers for pseudo oxyds which need model number &quot;-3&quot; and &quot;-4&quot;
-      -- but are subimage #15 and #16
-      if color &lt; 0 then
-	 color = color +18
-      end
-      DefMultipleComposite(name..&quot;_base&quot;, {baseimg[flavor], colordots[color+1]})
-      DefMultipleComposite(name..&quot;_opening_fg&quot;, {name..&quot;_base&quot;, fadein})
-      DefMultipleComposite(name..&quot;_closing_fg&quot;, {name..&quot;_base&quot;, fadeout})
-      DefShModel (name..&quot;_opening&quot;, name..&quot;_opening_fg&quot;, shadow[flavor])
-      DefShModel (name..&quot;_closing&quot;, name..&quot;_closing_fg&quot;, shadow[flavor])
-   end
-   
-   -- The blinking question mark animation of single open oxyds
-   function mkblink(flavor, color)
-      local name = &quot;st_oxyd&quot;..flavor..color..&quot;_blink&quot;
-      DefMultipleComposite(name..1, {baseimg[flavor], colordots[color+1], questmark})
-      DefMultipleComposite(name..2, {baseimg[flavor], colordots[color+1]})
-      DefAnim(name..&quot;_anim&quot;, BuildFrames({name..1, name..2}, 500), true)
-      DefShModel(name, name..&quot;_anim&quot;, shadow_open[flavor])
-   end
-   
-   -- The animation of pairwise open oxyds
-   function mkopened(flavor, color)
-      local name = &quot;st_oxyd&quot; .. flavor .. color .. &quot;_open&quot;
-      local names = {}
-      for i=1,5 do
-	 names[i] = name .. i
-	 DefMultipleComposite(names[i], {baseimg[flavor], colordots[color+1], blink_ovals[i]})
-      end
-      DefAnim(name..&quot;_anim&quot;, PingPong(BuildFrames(names, 100)), true)
-      DefShModel(name, name..&quot;_anim&quot;, shadow_open[flavor])
-   end
-   
-   -- The &quot;open&quot; state animation of the pseudo oxyds &quot;quake&quot; and &quot;shuffle&quot;
-   function mkpseudo(flavor, color)
-      local name = &quot;st_oxyd&quot; .. flavor .. &quot;_pseudo&quot; .. color
-      local names = {}	
-      if (color == -3) then
-	 for i=1,4 do
-	    names[i] = name .. i
-	    DefMultipleComposite(names[i], {baseimg[flavor], quake_spot[i]})
-	 end
-	 frames = RepeatAnim(PingPong(BuildFrames(names, 50)), 2)
-      elseif (color == -4) then
-	 for i=1,8 do
-	    names[i] = name .. i
-	    DefMultipleComposite(names[i], {baseimg[flavor], shuffle_spot[i]})
-	 end	   
-	 frames = RepeatAnim(BuildFrames(names, 100),2)
-      end
-      DefAnim(name..&quot;_anim&quot;, frames, false)
-      DefShModel(name, name..&quot;_anim&quot;, shadow[flavor])
-   end
+    -- Define &quot;fading in&quot; and &quot;fading out&quot; animations for oxyd stones.
+    -- These two animations are combined with the stone images to
+    -- produce the opening and closing animations for oxyd stones.
+    local baseimg = {
+        a=&quot;st_oxyda_open&quot;,
+        b=&quot;st_oxydb_open&quot;,
+        c=&quot;st_oxydc_open&quot;,
+        d=&quot;st_oxydd_open&quot;,
+    }
+    local shadow = {
+        a=&quot;sh_round&quot;,
+        b=&quot;sh_round&quot;,
+        c=&quot;sh_solid&quot;,
+        d=&quot;sh_solid&quot;,
+    }
+    local shadow_open = {
+        a=&quot;sh_round&quot;,
+        b=&quot;sh_round&quot;,
+        c=&quot;sh_solid&quot;,
+        d=&quot;sh_round&quot;,
+    }
+    local fopening = {
+        a = BuildFrames(DefSubimages(&quot;st_oxyda_opening&quot;, {h=10}), 35),
+        b = BuildFrames(DefSubimages(&quot;st_oxydb_opening&quot;, {h=14}), 25),
+        c = BuildFrames(DefSubimages(&quot;st_oxydc_opening&quot;, {h=5}), 70),
+        d = BuildFrames(DefSubimages(&quot;st_oxydd_opening&quot;, {h=10}), 35),
+    }
+    local fclosing = {
+        a = ReverseFrames(fopening[&quot;a&quot;]),
+        b = ReverseFrames(fopening[&quot;b&quot;]),
+        c = ReverseFrames(fopening[&quot;c&quot;]),
+        d = ReverseFrames(fopening[&quot;d&quot;]),
+    }
+    
+    -- The open/close animation of oxyd stones
+    function mkopenclose(flavor, color)
+        local name = &quot;st_oxyd&quot; .. flavor .. color
+        local fadein = &quot;oxyd&quot;..flavor..&quot;_fadein&quot;
+        local fadeout= &quot;oxyd&quot;..flavor..&quot;_fadeout&quot;
+        -- Magic numbers for pseudo oxyds which need model number &quot;-3&quot; and &quot;-4&quot;
+        -- but are subimage #15 and #16
+        if color &lt; 0 then
+            color = color +18
+        end
+        DefMultipleComposite(name..&quot;_base&quot;, {baseimg[flavor], colordots[color+1]})
+        DefMultipleComposite(name..&quot;_opening_fg&quot;, {name..&quot;_base&quot;, fadein})
+        DefMultipleComposite(name..&quot;_closing_fg&quot;, {name..&quot;_base&quot;, fadeout})
+        DefShModel (name..&quot;_opening&quot;, name..&quot;_opening_fg&quot;, shadow[flavor])
+        DefShModel (name..&quot;_closing&quot;, name..&quot;_closing_fg&quot;, shadow[flavor])
+    end
+    
+    -- The blinking question mark animation of single open oxyds
+    function mkblink(flavor, color)
+        local name = &quot;st_oxyd&quot;..flavor..color..&quot;_blink&quot;
+        DefMultipleComposite(name..1, {baseimg[flavor], colordots[color+1], questmark})
+        DefMultipleComposite(name..2, {baseimg[flavor], colordots[color+1]})
+        DefAnim(name..&quot;_anim&quot;, BuildFrames({name..1, name..2}, 500), true)
+	--DefAnim(name..&quot;_anim&quot;, ComposeFrames({name..1,name..2}, {800, 1200}), true)
+        DefShModel(name, name..&quot;_anim&quot;, shadow_open[flavor])
+    end
+    
+    -- The animation of pairwise open oxyds
+    function mkopened(flavor, color)
+        local name = &quot;st_oxyd&quot; .. flavor .. color .. &quot;_open&quot;
+        local names = {}
+        for i=1,5 do
+            names[i] = name .. i
+            DefMultipleComposite(names[i], {baseimg[flavor], colordots[color+1], blink_ovals[i]})
+        end
+        DefAnim(name..&quot;_anim&quot;, PingPong(BuildFrames(names, 100)), true)
+        DefShModel(name, name..&quot;_anim&quot;, shadow_open[flavor])
+    end
+    
+    -- The &quot;open&quot; state animation of the pseudo oxyds &quot;quake&quot; and &quot;shuffle&quot;
+    function mkpseudo(flavor, color)
+        local name = &quot;st_oxyd&quot; .. flavor .. &quot;_pseudo&quot; .. color
+        local names = {}        
+        if (color == -3) then
+            for i=1,4 do
+                names[i] = name .. i
+                DefMultipleComposite(names[i], {baseimg[flavor], quake_spot[i]})
+            end
+            frames = RepeatAnim(PingPong(BuildFrames(names, 50)), 2)
+        elseif (color == -4) then
+            for i=1,8 do
+                names[i] = name .. i
+                DefMultipleComposite(names[i], {baseimg[flavor], shuffle_spot[i]})
+            end    
+            frames = RepeatAnim(BuildFrames(names, 100),2)
+        end
+        DefAnim(name..&quot;_anim&quot;, frames, false)
+        DefShModel(name, name..&quot;_anim&quot;, shadow[flavor])
+    end
 
-   -- Now really make the oxyds, calling the functions defined above
-   function mkoxyd(flavor)
-      DefStone(&quot;st_oxyd&quot;..flavor, shadow[flavor])
-      DefShModel(&quot;st_fake_oxyd&quot;..flavor, &quot;st_oxyd&quot;..flavor, shadow[flavor])
-      local img = DefImage(&quot;st_oxyd&quot;..flavor..&quot;_open&quot;)
-      DefShModel(&quot;st_fake_oxyd&quot;..flavor..&quot;_open&quot;, img, shadow[flavor])
-      local fadein = &quot;oxyd&quot;..flavor..&quot;_fadein&quot;
-      local fadeout= &quot;oxyd&quot;..flavor..&quot;_fadeout&quot;
-      DefAnim(fadein, fopening[flavor])
-      DefAnim(fadeout, fclosing[flavor])
-      -- The regular oxyds are position 1 to 12 in the
-      -- colordots image
-      for color = 0, num_colors do
-	 mkopenclose(flavor, color)
-	 mkblink(flavor, color)
-	 mkopened(flavor, color)
-      end
-      -- Position 13, 14 are currently empty
-      -- The shuffle and quake oxyds are number 15
-      -- and 16 in colordots image.
-      -- BUT they require modelnames with &quot;-3&quot; and &quot;-4&quot;
-      mkopenclose(flavor, -3)
-      mkpseudo(flavor, -3)
-      mkopenclose(flavor, -4)
-      mkpseudo(flavor, -4)
-   end
+    -- Now really make the oxyds, calling the functions defined above
+    function mkoxyd(flavor)
+        DefStone(&quot;st_oxyd&quot;..flavor, shadow[flavor])
+        DefShModel(&quot;st_fake_oxyd&quot;..flavor, &quot;st_oxyd&quot;..flavor, shadow[flavor])
+        local img = DefImage(&quot;st_oxyd&quot;..flavor..&quot;_open&quot;)
+        DefShModel(&quot;st_fake_oxyd&quot;..flavor..&quot;_open&quot;, img, shadow[flavor])
+        local fadein = &quot;oxyd&quot;..flavor..&quot;_fadein&quot;
+        local fadeout= &quot;oxyd&quot;..flavor..&quot;_fadeout&quot;
+        DefAnim(fadein, fopening[flavor])
+        DefAnim(fadeout, fclosing[flavor])
+        -- The regular oxyds are position 1 to 12 in the
+        -- colordots image
+        for color = 0, num_colors do
+            mkopenclose(flavor, color)
+            mkblink(flavor, color)
+            mkopened(flavor, color)
+        end
+        -- Position 13, 14 are currently empty
+        -- The shuffle and quake oxyds are number 15
+        -- and 16 in colordots image.
+        -- BUT they require modelnames with &quot;-3&quot; and &quot;-4&quot;
+        mkopenclose(flavor, -3)
+        mkpseudo(flavor, -3)
+        mkopenclose(flavor, -4)
+        mkpseudo(flavor, -4)
+    end
 
-   -- Make all the models and animations for the oxyd flavors a,b,c,d
-   mkoxyd(&quot;a&quot;)
-   mkoxyd(&quot;b&quot;)
-   mkoxyd(&quot;c&quot;)
-   mkoxyd(&quot;d&quot;)
-   
-   -- And now for flavor 'e'
-   for color = 0, num_colors - 1 do
-      DefMultipleComposite(&quot;st_oxyde&quot;..color..&quot;_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[color+1], oxyde})
-      DefShModel(&quot;st_oxyde&quot;..color, &quot;st_oxyde&quot;..color..&quot;_peep&quot;, &quot;sh_round&quot;)
-      DefAlias(&quot;st_oxyde&quot;..color..&quot;_opening&quot;, &quot;st_oxydb&quot;..color..&quot;_opening&quot;)
-      DefAlias(&quot;st_oxyde&quot;..color..&quot;_closing&quot;, &quot;st_oxydb&quot;..color..&quot;_closing&quot;)
-      DefAlias(&quot;st_oxyde&quot;..color..&quot;_blink&quot;, &quot;st_oxydb&quot;..color..&quot;_blink&quot;)
-      DefAlias(&quot;st_oxyde&quot;..color..&quot;_open&quot;, &quot;st_oxydb&quot;..color..&quot;_open&quot;)
-   end
-   DefMultipleComposite(&quot;st_oxyde-3_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[16], oxyde})
-   DefShModel(&quot;st_oxyde-3&quot;, &quot;st_oxyde-3_peep&quot;, &quot;sh_round&quot;)
-   DefMultipleComposite(&quot;st_oxyde-4_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[15], oxyde})
-   DefShModel(&quot;st_oxyde-4&quot;, &quot;st_oxyde-4_peep&quot;, &quot;sh_round&quot;)
-   DefAlias(&quot;st_oxyde&quot;, &quot;st_oxydb&quot;)
-   DefAlias(&quot;st_fake_oxyde&quot;, &quot;st_oxydb&quot;)
-   DefAlias(&quot;st_fake_oxyde_open&quot;, &quot;st_fake_oxydb_open&quot;)
-   DefAlias(&quot;st_oxyde-3_opening&quot;, &quot;st_oxydb-3_opening&quot;)
-   DefAlias(&quot;st_oxyde_pseudo-3&quot;, &quot;st_oxydb_pseudo-3&quot;)
-   DefAlias(&quot;st_oxyde-3_closing&quot;, &quot;st_oxydb-3_closing&quot;)
-   DefAlias(&quot;st_oxyde-4_opening&quot;, &quot;st_oxydb-4_opening&quot;)
-   DefAlias(&quot;st_oxyde_pseudo-4&quot;, &quot;st_oxydb_pseudo-4&quot;)
-   DefAlias(&quot;st_oxyde-4_closing&quot;, &quot;st_oxydb-4_closing&quot;)
+    -- Make all the models and animations for the oxyd flavors a,b,c,d
+    mkoxyd(&quot;a&quot;)
+    mkoxyd(&quot;b&quot;)
+    mkoxyd(&quot;c&quot;)
+    mkoxyd(&quot;d&quot;)
+    
+    -- And now for flavor 'e'
+    for color = 0, num_colors - 1 do
+        DefMultipleComposite(&quot;st_oxyde&quot;..color..&quot;_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[color+1], oxyde})
+        DefShModel(&quot;st_oxyde&quot;..color, &quot;st_oxyde&quot;..color..&quot;_peep&quot;, &quot;sh_round&quot;)
+        DefAlias(&quot;st_oxyde&quot;..color..&quot;_opening&quot;, &quot;st_oxydb&quot;..color..&quot;_opening&quot;)
+        DefAlias(&quot;st_oxyde&quot;..color..&quot;_closing&quot;, &quot;st_oxydb&quot;..color..&quot;_closing&quot;)
+        DefAlias(&quot;st_oxyde&quot;..color..&quot;_blink&quot;, &quot;st_oxydb&quot;..color..&quot;_blink&quot;)
+        DefAlias(&quot;st_oxyde&quot;..color..&quot;_open&quot;, &quot;st_oxydb&quot;..color..&quot;_open&quot;)
+    end
+    DefMultipleComposite(&quot;st_oxyde-3_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[16], oxyde})
+    DefShModel(&quot;st_oxyde-3&quot;, &quot;st_oxyde-3_peep&quot;, &quot;sh_round&quot;)
+    DefMultipleComposite(&quot;st_oxyde-4_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[15], oxyde})
+    DefShModel(&quot;st_oxyde-4&quot;, &quot;st_oxyde-4_peep&quot;, &quot;sh_round&quot;)
+    DefAlias(&quot;st_oxyde&quot;, &quot;st_oxydb&quot;)
+    DefAlias(&quot;st_fake_oxyde&quot;, &quot;st_oxydb&quot;)
+    DefAlias(&quot;st_fake_oxyde_open&quot;, &quot;st_fake_oxydb_open&quot;)
+    DefAlias(&quot;st_oxyde-3_opening&quot;, &quot;st_oxydb-3_opening&quot;)
+    DefAlias(&quot;st_oxyde_pseudo-3&quot;, &quot;st_oxydb_pseudo-3&quot;)
+    DefAlias(&quot;st_oxyde-3_closing&quot;, &quot;st_oxydb-3_closing&quot;)
+    DefAlias(&quot;st_oxyde-4_opening&quot;, &quot;st_oxydb-4_opening&quot;)
+    DefAlias(&quot;st_oxyde_pseudo-4&quot;, &quot;st_oxydb_pseudo-4&quot;)
+    DefAlias(&quot;st_oxyde-4_closing&quot;, &quot;st_oxydb-4_closing&quot;)
 end
 
 -- st_magic --
@@ -1795,27 +1794,27 @@
 
 -- st-spitter --
 do
-     local images = DefSubimages(&quot;st_spitter_idle&quot;, {h=6})
-     local frames = BuildFrames(images,150)
-     DefAnim(&quot;st_spitter_active&quot;, frames, true)
-     DefShModel(&quot;st_spitter_active&quot;, &quot;st_spitter_active&quot;, &quot;sh_round&quot;)
-     DefShModel(&quot;st_spitter_idle&quot;, &quot;st_spitter_idle1&quot;,  &quot;sh_round&quot;)
+    local images = DefSubimages(&quot;st_spitter_idle&quot;, {h=6})
+    local frames = BuildFrames(images,150)
+    DefAnim(&quot;st_spitter_active&quot;, frames, true)
+    DefShModel(&quot;st_spitter_active&quot;, &quot;st_spitter_active&quot;, &quot;sh_round&quot;)
+    DefShModel(&quot;st_spitter_idle&quot;, &quot;st_spitter_idle1&quot;,  &quot;sh_round&quot;)
 
-     local images = DefSubimages(&quot;st_spitter_spitting&quot;, {h=6})
-     local frames = BuildFrames(images,175)
-     DefAnim(&quot;st_spitter_spitting&quot;, frames)
-     DefShModel(&quot;st_spitter_spitting&quot;, &quot;st_spitter_spitting&quot;, &quot;sh_round&quot;)
+    local images = DefSubimages(&quot;st_spitter_spitting&quot;, {h=6})
+    local frames = BuildFrames(images,175)
+    DefAnim(&quot;st_spitter_spitting&quot;, frames)
+    DefShModel(&quot;st_spitter_spitting&quot;, &quot;st_spitter_spitting&quot;, &quot;sh_round&quot;)
 
-     local images = DefSubimages(&quot;st_spitter_loading&quot;, {h=6})
-     local frames = BuildFrames(images,100)
-     frames[6][2] = 50
-     DefAnim(&quot;st_spitter_loading&quot;, frames)
-     DefShModel(&quot;st_spitter_loading&quot;, &quot;st_spitter_loading&quot;, &quot;sh_round&quot;)
+    local images = DefSubimages(&quot;st_spitter_loading&quot;, {h=6})
+    local frames = BuildFrames(images,100)
+    frames[6][2] = 50
+    DefAnim(&quot;st_spitter_loading&quot;, frames)
+    DefShModel(&quot;st_spitter_loading&quot;, &quot;st_spitter_loading&quot;, &quot;sh_round&quot;)
 
-     local images = DefSubimages(&quot;st_spitter_breaking&quot;, {h=6})
-     local frames = BuildFrames(images,100)
-     DefAnim(&quot;st_spitter_breaking&quot;, frames)
-     DefShModel(&quot;st_spitter_breaking&quot;, &quot;st_spitter_breaking&quot;, &quot;sh_round&quot;)
+    local images = DefSubimages(&quot;st_spitter_breaking&quot;, {h=6})
+    local frames = BuildFrames(images,100)
+    DefAnim(&quot;st_spitter_breaking&quot;, frames)
+    DefShModel(&quot;st_spitter_breaking&quot;, &quot;st_spitter_breaking&quot;, &quot;sh_round&quot;)
 
 end
 
@@ -1920,22 +1919,22 @@
 -- The models are stored in the file from top to bottom as north, east, south, west
 -- in each column, therefore we need the mapping (i+1)%4+1
 do
-   local mst = DefSubimages(&quot;st_mirror_static&quot;, {w=5,h=4})
-   local mmo = DefSubimages(&quot;st_mirror_movable&quot;, {w=5,h=4})
-   local names_st = {&quot;st-3mirror-so&quot;, &quot;st-3mirror-st&quot;, &quot;st-pmirror-so&quot;, &quot;st-pmirror-st&quot;, &quot;st-pmirror-sf&quot;}
-   local names_mo = {&quot;st-3mirror-mo&quot;, &quot;st-3mirror-mt&quot;, &quot;st-pmirror-mo&quot;, &quot;st-pmirror-mt&quot;, &quot;st-pmirror-mf&quot;}
-   -- static mirrors
-   for j=0,4 do
-      for i=1,4 do
-	 DefShModel(names_st[j+1]..((i+1)%4+1), mst[j*4+i], &quot;sh_rounded&quot;)
-      end
-   end
-   -- movable mirrors
-   for j=0,4 do
-      for i=1,4 do
-	 DefShModel(names_mo[j+1]..((i+1)%4+1), mmo[j*4+i], &quot;sh_rounded&quot;)
-      end
-   end
+    local mst = DefSubimages(&quot;st_mirror_static&quot;, {w=5,h=4})
+    local mmo = DefSubimages(&quot;st_mirror_movable&quot;, {w=5,h=4})
+    local names_st = {&quot;st-3mirror-so&quot;, &quot;st-3mirror-st&quot;, &quot;st-pmirror-so&quot;, &quot;st-pmirror-st&quot;, &quot;st-pmirror-sf&quot;}
+    local names_mo = {&quot;st-3mirror-mo&quot;, &quot;st-3mirror-mt&quot;, &quot;st-pmirror-mo&quot;, &quot;st-pmirror-mt&quot;, &quot;st-pmirror-mf&quot;}
+    -- static mirrors
+    for j=0,4 do
+        for i=1,4 do
+            DefShModel(names_st[j+1]..((i+1)%4+1), mst[j*4+i], &quot;sh_rounded&quot;)
+        end
+    end
+    -- movable mirrors
+    for j=0,4 do
+        for i=1,4 do
+            DefShModel(names_mo[j+1]..((i+1)%4+1), mmo[j*4+i], &quot;sh_rounded&quot;)
+        end
+    end
 end
 
 --------------------------
@@ -1989,47 +1988,47 @@
 Progress(95, &quot;Loading Sprite Effects&quot;)
 
 Sprite({
-    name     = &quot;ring-anim&quot;,
-    nimages  = 8,
-    framelen = 50,
-    padding  = 0.3
-})
+           name     = &quot;ring-anim&quot;,
+           nimages  = 8,
+           framelen = 50,
+           padding  = 0.3
+       })
 
 Sprite({
-    name     = &quot;ac-drowned&quot;,
-    nimages  = 5,
-    framelen = 80,
-    padding  = 0.3
-})
+           name     = &quot;ac-drowned&quot;,
+           nimages  = 5,
+           framelen = 80,
+           padding  = 0.3
+       })
 
 -- Halo --
 Sprite({
-    name     = &quot;halo&quot;,
-    nimages  = 2,
-    framelen = 30,
-    loop     = true
-})
+           name     = &quot;halo&quot;,
+           nimages  = 2,
+           framelen = 30,
+           loop     = true
+       })
 
 Sprite({
-    name     = &quot;halo-blink&quot;,
-    nimages  = 2,
-    framelen = 30,
-    loop     = true
-})
+           name     = &quot;halo-blink&quot;,
+           nimages  = 2,
+           framelen = 30,
+           loop     = true
+       })
 
 -- Halo for small balls --
 Sprite({
-    name     = &quot;halo-small&quot;,
-    nimages  = 2,
-    framelen = 30,
-    loop     = true
-})
+           name     = &quot;halo-small&quot;,
+           nimages  = 2,
+           framelen = 30,
+           loop     = true
+       })
 
 Sprite({
-    name     = &quot;halo-small-blink&quot;,
-    nimages  = 2,
-    framelen = 30,
-    loop     = true
-})
+           name     = &quot;halo-small-blink&quot;,
+           nimages  = 2,
+           framelen = 30,
+           loop     = true
+       })
 
 Progress(100, &quot;Loading Enigma Levels&quot;)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001390.html">[Enigma-game-svn] r1964 - in trunk: attic/images-items data/gfx16	data/gfx32 data/gfx40 data/gfx48 data/gfx64
</A></li>
	<LI>Next message: <A HREF="001392.html">[Enigma-game-svn] r1966 - in trunk: attic/images-stones data	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1391">[ date ]</a>
              <a href="thread.html#1391">[ thread ]</a>
              <a href="subject.html#1391">[ subject ]</a>
              <a href="author.html#1391">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
