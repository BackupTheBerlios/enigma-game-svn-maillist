<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r2155 - in homepage: . input input/advent_2010
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r2155%20-%20in%20homepage%3A%20.%20input%20input/advent_2010&In-Reply-To=%3C20101201215030.91FCE480AC9%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001578.html">
   <LINK REL="Next"  HREF="001580.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r2155 - in homepage: . input input/advent_2010</H1>
    <B>ged at mail.berlios.de</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r2155%20-%20in%20homepage%3A%20.%20input%20input/advent_2010&In-Reply-To=%3C20101201215030.91FCE480AC9%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r2155 - in homepage: . input input/advent_2010">ged at mail.berlios.de
       </A><BR>
    <I>Wed Dec  1 22:50:30 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001578.html">[Enigma-game-svn] r2154 - homepage/input/advent_2010
</A></li>
        <LI>Next message: <A HREF="001580.html">[Enigma-game-svn] r2156 - in homepage: images/advent_2010 input	input/advent_2010
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1579">[ date ]</a>
              <a href="thread.html#1579">[ thread ]</a>
              <a href="subject.html#1579">[ subject ]</a>
              <a href="author.html#1579">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ged
Date: 2010-12-01 22:50:30 +0100 (Wed, 01 Dec 2010)
New Revision: 2155

Added:
   homepage/input/advent_2010/advent_day1_ru.html
Modified:
   homepage/input/advent_2010/advent_2010_ru.html
   homepage/input/output-files.lua
   homepage/main.lua
Log:
- Translated addition to main Advent article;
- Translated December 1 article to Russian;
- As in Russian there are some variants of month name depends on situation, added new function (translate_month_for_news) to main.lua and new arrays (months_news), translate_month_for_news-calls to output-files.lua. If it make something broken feel free to roll main.lua and months_news back (hope it wouldn't).

Modified: homepage/input/advent_2010/advent_2010_ru.html
===================================================================
--- homepage/input/advent_2010/advent_2010_ru.html	2010-12-01 01:39:06 UTC (rev 2154)
+++ homepage/input/advent_2010/advent_2010_ru.html	2010-12-01 21:50:30 UTC (rev 2155)
@@ -22,9 +22,9 @@
 &#215;&#207;&#202;&#196;&#201;&#212;&#197; &#215; &#196;&#201;&#210;&#197;&#203;&#212;&#207;&#210;&#201;&#192; &quot;levels&quot; &#201; &#211;&#203;&#207;&#208;&#201;&#210;&#213;&#202;&#212;&#197; &#218;&#193;&#199;&#210;&#213;&#214;&#197;&#206;&#206;&#217;&#202; &#198;&#193;&#202;&#204; &#215; &#208;&#207;&#196;&#196;&#201;&#210;&#197;&#203;&#212;&#207;&#210;&#201;&#192; &#211; &#206;&#193;&#218;&#215;&#193;&#206;&#201;&#197;&#205;
 &quot;cross&quot;. &#254;&#212;&#207;&#194;&#217; &#213;&#218;&#206;&#193;&#212;&#216; &quot;User Path&quot; (&quot;&#240;&#193;&#208;&#203;&#213; &#208;&#207;&#204;&#216;&#218;&#207;&#215;&#193;&#212;&#197;&#204;&#209;&quot;) &#206;&#193;&#214;&#205;&#201;&#212;&#197; &#215; &#199;&#204;&#193;&#215;&#206;&#207;&#205; &#205;&#197;&#206;&#192; Enigma &#203;&#204;&#193;&#215;&#201;&#219;&#213; &quot;F2&quot;.
 &lt;br&gt;
-You will find the new level pack inside the group &quot;User&quot;. Maybe you
-have to right-click on &quot;Advent 2010&quot;, and click on the button
-&quot;Update Pack&quot; to load the version of the day.
+&#238;&#207;&#215;&#217;&#202; &#208;&#193;&#203;&#197;&#212; &#213;&#210;&#207;&#215;&#206;&#197;&#202; &#247;&#217; &#206;&#193;&#202;&#196;&#163;&#212;&#197; &#215;&#206;&#213;&#212;&#210;&#201; &#199;&#210;&#213;&#208;&#208;&#217; &quot;User&quot;. &#247;&#207;&#218;&#205;&#207;&#214;&#206;&#207; &#247;&#193;&#205;
+&#208;&#210;&#201;&#196;&#163;&#212;&#211;&#209; &#221;&#163;&#204;&#203;&#206;&#213;&#212;&#216; &#208;&#210;&#193;&#215;&#207;&#202; &#203;&#206;&#207;&#208;&#203;&#207;&#202; &#205;&#217;&#219;&#201; &#208;&#207; &quot;Advent 2010&quot;, &#193; &#218;&#193;&#212;&#197;&#205;
+&#221;&#163;&#204;&#203;&#206;&#213;&#212;&#216; &#208;&#207; &#203;&#206;&#207;&#208;&#203;&#197; &quot;Update Pack&quot;, &#222;&#212;&#207;&#194;&#217; &#218;&#193;&#199;&#210;&#213;&#218;&#201;&#212;&#216; &#193;&#203;&#212;&#213;&#193;&#204;&#216;&#206;&#213;&#192; &#215;&#197;&#210;&#211;&#201;&#192; &#213;&#210;&#207;&#215;&#206;&#209;.
 &lt;br&gt;
 &#240;&#207;&#211;&#204;&#197; &#220;&#212;&#207;&#199;&#207; &#208;&#210;&#207;&#211;&#212;&#207; &#218;&#193;&#208;&#213;&#211;&#212;&#201;&#212;&#197; Enigma &#201; &#206;&#193;&#211;&#204;&#193;&#214;&#196;&#193;&#202;&#212;&#197;&#211;&#216; &#213;&#210;&#207;&#215;&#206;&#209;&#205;&#201;, &#203;&#193;&#214;&#196;&#217;&#202; &#196;&#197;&#206;&#216; &#215; &#208;&#193;&#203;&#197;&#212;&#197; &#213;&#210;&#207;&#215;&#206;&#197;&#202;
 &quot;Advent 2010&quot; &#247;&#217; &#194;&#213;&#196;&#197;&#212;&#197; &#206;&#193;&#200;&#207;&#196;&#201;&#212;&#216; &#197;&#221;&#163; &#207;&#196;&#201;&#206;. &#240;&#207;&#211;&#203;&#207;&#204;&#216;&#203;&#213; Enigma &#218;&#193;&#199;&#210;&#213;&#214;&#193;&#197;&#212; &#220;&#212;&#201; &#213;&#210;&#207;&#215;&#206;&#201; &#211; &#206;&#193;&#219;&#197;&#199;&#207; &#211;&#197;&#210;&#215;&#197;&#210;&#193;,

Added: homepage/input/advent_2010/advent_day1_ru.html
===================================================================
--- homepage/input/advent_2010/advent_day1_ru.html	                        (rev 0)
+++ homepage/input/advent_2010/advent_day1_ru.html	2010-12-01 21:50:30 UTC (rev 2155)
@@ -0,0 +1,10 @@
+&lt;h2&gt;$$Advent$$ 2010&lt;/h2&gt;
+
+&lt;p&gt;&lt;a href=&quot;$$advent_2010$$&quot;&gt;&#247;&#197;&#210;&#206;&#213;&#212;&#216;&#211;&#209; &#203; &#203;&#193;&#204;&#197;&#206;&#196;&#193;&#210;&#192;.&lt;/a&gt;&lt;/p&gt;
+
+&lt;h3&gt;1 $$DecemberN$$&lt;/h3&gt;
+&lt;p&gt;&#243;&#197;&#199;&#207;&#196;&#206;&#209; &#208;&#197;&#210;&#215;&#217;&#202; &#196;&#197;&#206;&#216; &#196;&#197;&#203;&#193;&#194;&#210;&#209;. &#243;&#197;&#210;&#201;&#209;-&#208;&#207;&#209;&#215;&#204;&#197;&#206;&#201;&#202;-&#213;&#210;&#207;&#215;&#206;&#197;&#202; &#206;&#193;&#222;&#201;&#206;&#193;&#197;&#212;&#211;&#209;.
+&#243;&#197;&#202;&#222;&#193;&#211; &#211;&#193;&#205;&#207;&#197; &#215;&#210;&#197;&#205;&#209; &#196;&#204;&#209; &#205;&#197;&#196;&#201;&#212;&#193;&#195;&#201;&#201;.
+&lt;/p&gt;
+
+&lt;img src=&quot;$$imagedir$$/advent_2010/adventlevel1.png&quot; alt=&quot;Advent level 1&quot;&gt;

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2010-12-01 01:39:06 UTC (rev 2154)
+++ homepage/input/output-files.lua	2010-12-01 21:50:30 UTC (rev 2155)
@@ -157,6 +157,19 @@
     November  = function(v,s,l0)  return  translate_month(l0, {month=11})  end,
     December  = function(v,s,l0)  return  translate_month(l0, {month=12})  end,
 
+    JanuaryN   = function(v,s,l0)  return  translate_month_for_news(l0, {month=1})  end,
+    FebruaryN  = function(v,s,l0)  return  translate_month_for_news(l0, {month=2})  end,
+    MarchN     = function(v,s,l0)  return  translate_month_for_news(l0, {month=3})  end,
+    AprilN     = function(v,s,l0)  return  translate_month_for_news(l0, {month=4})  end,
+    MayN       = function(v,s,l0)  return  translate_month_for_news(l0, {month=5})  end,
+    JuneN      = function(v,s,l0)  return  translate_month_for_news(l0, {month=6})  end,
+    JulyN      = function(v,s,l0)  return  translate_month_for_news(l0, {month=7})  end,
+    AugustN    = function(v,s,l0)  return  translate_month_for_news(l0, {month=8})  end,
+    SeptemberN = function(v,s,l0)  return  translate_month_for_news(l0, {month=9})  end,
+    OctoberN   = function(v,s,l0)  return  translate_month_for_news(l0, {month=10})  end,
+    NovemberN  = function(v,s,l0)  return  translate_month_for_news(l0, {month=11})  end,
+    DecemberN  = function(v,s,l0)  return  translate_month_for_news(l0, {month=12})  end,
+
     Advent        = &quot;Advent&quot;,
     Advent_de     = &quot;Advent&quot;,
     Advent_ru     = &quot;&#240;&#207;&#209;&#215;&#204;&#197;&#206;&#201;&#197;&quot;,
@@ -194,7 +207,11 @@
   months_ru = {&quot;&#241;&#206;&#215;&#193;&#210;&#216;&quot;, &quot;&#230;&#197;&#215;&#210;&#193;&#204;&#216;&quot;, &quot;&#237;&#193;&#210;&#212;&quot;, &quot;&#225;&#208;&#210;&#197;&#204;&#216;&quot;, &quot;&#237;&#193;&#202;&quot;, &quot;&#233;&#192;&#206;&#216;&quot;,
     &quot;&#233;&#192;&#204;&#216;&quot;, &quot;&#225;&#215;&#199;&#213;&#211;&#212;&quot;, &quot;&#243;&#197;&#206;&#212;&#209;&#194;&#210;&#216;&quot;, &quot;&#239;&#203;&#212;&#209;&#194;&#210;&#216;&quot;, &quot;&#238;&#207;&#209;&#194;&#210;&#216;&quot;, &quot;&#228;&#197;&#203;&#193;&#194;&#210;&#216;&quot;},
   months_es = {&quot;Enero&quot;, &quot;Febrero&quot;, &quot;Marzo&quot;, &quot;Abril&quot;, &quot;Mayo&quot;, &quot;Junio&quot;,
-    &quot;Julio&quot;, &quot;Agosto&quot;, &quot;Septiembre&quot;, &quot;Octubre&quot;, &quot;Noviembre&quot;, &quot;Diciembre&quot;}
+    &quot;Julio&quot;, &quot;Agosto&quot;, &quot;Septiembre&quot;, &quot;Octubre&quot;, &quot;Noviembre&quot;, &quot;Diciembre&quot;},
+  months_news = {&quot;JanuaryN&quot;, &quot;FebruaryN&quot;, &quot;MarchN&quot;, &quot;AprilN&quot;, &quot;MayN&quot;, &quot;JuneN&quot;,
+    &quot;JulyN&quot;, &quot;AugustN&quot;, &quot;SeptemberN&quot;, &quot;OctoberN&quot;, &quot;NovemberN&quot;, &quot;DecemberN&quot;},
+  months_news_ru = {&quot;&#209;&#206;&#215;&#193;&#210;&#209;&quot;, &quot;&#198;&#197;&#215;&#210;&#193;&#204;&#209;&quot;, &quot;&#205;&#193;&#210;&#212;&#193;&quot;, &quot;&#193;&#208;&#210;&#197;&#204;&#209;&quot;, &quot;&#205;&#193;&#209;&quot;, &quot;&#201;&#192;&#206;&#209;&quot;,
+    &quot;&#201;&#192;&#204;&#209;&quot;, &quot;&#193;&#215;&#199;&#213;&#211;&#212;&#193;&quot;, &quot;&#211;&#197;&#206;&#212;&#209;&#194;&#210;&#209;&quot;, &quot;&#207;&#203;&#212;&#209;&#194;&#210;&#209;&quot;, &quot;&#206;&#207;&#209;&#194;&#210;&#209;&quot;, &quot;&#196;&#197;&#203;&#193;&#194;&#210;&#209;&quot;}
 }
 
 --------------------------------------------------------------------------------

Modified: homepage/main.lua
===================================================================
--- homepage/main.lua	2010-12-01 01:39:06 UTC (rev 2154)
+++ homepage/main.lua	2010-12-01 21:50:30 UTC (rev 2155)
@@ -90,6 +90,39 @@
   end
 end
 
+function translate_month_for_news(lang, date_table)
+  if type(date_table) ~= &quot;table&quot; then
+    error(&quot;Trying to translate month, but argument is &quot;..type(date_table)..&quot;!&quot;)
+  end
+  local month = date_table.month
+  if month == nil then
+    error(&quot;Trying to translate month, but month is NIL!&quot;)
+  end
+  local translation_table = date_translation_field[&quot;months_news&quot;..lang]
+  if translation_table == nil then
+    translation_table = date_translation_field.months
+  end
+  month = translation_table[month]
+  local year = date_table.year
+  if year == nil then
+    return month
+  else
+    -- circumvent mod-&gt;fmod change in 5.1!
+    --year = math.fmod(year, 100)
+    if year &gt;= 2000 then
+      year = year - 2000
+    else
+      year = year - 1900
+    end
+    year = string.format(&quot;%02d&quot;, year)
+    if lang == &quot;_es&quot; then
+      return month..&quot; del '&quot;..year
+    else
+      return month..&quot; '&quot;..year
+    end
+  end
+end
+
 -- scribble writes string s to output if and only if it wasn't
 -- written there before. Hence, double infos are omitted.
 scribbleblock = {}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001578.html">[Enigma-game-svn] r2154 - homepage/input/advent_2010
</A></li>
	<LI>Next message: <A HREF="001580.html">[Enigma-game-svn] r2156 - in homepage: images/advent_2010 input	input/advent_2010
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1579">[ date ]</a>
              <a href="thread.html#1579">[ thread ]</a>
              <a href="subject.html#1579">[ subject ]</a>
              <a href="author.html#1579">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
