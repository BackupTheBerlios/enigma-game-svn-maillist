<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1610 - in trunk: data data/gfx32 data/gfx40	data/gfx48 data/schemas src src/floors src/items
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1610%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20data/schemas%20src%20src/floors%20src/items&In-Reply-To=%3C200904072205.n37M51Hc030065%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001039.html">
   <LINK REL="Next"  HREF="001041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1610 - in trunk: data data/gfx32 data/gfx40	data/gfx48 data/schemas src src/floors src/items</H1>
    <B>ral at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1610%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20data/schemas%20src%20src/floors%20src/items&In-Reply-To=%3C200904072205.n37M51Hc030065%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1610 - in trunk: data data/gfx32 data/gfx40	data/gfx48 data/schemas src src/floors src/items">ral at mail.berlios.de
       </A><BR>
    <I>Wed Apr  8 00:05:01 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001039.html">[Enigma-game-svn] r1609 - in trunk: data/schemas src src/floors	src/others src/stones
</A></li>
        <LI>Next message: <A HREF="001041.html">[Enigma-game-svn] r1611 - trunk/doc/reference
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1040">[ date ]</a>
              <a href="thread.html#1040">[ thread ]</a>
              <a href="subject.html#1040">[ subject ]</a>
              <a href="author.html#1040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-04-08 00:04:56 +0200 (Wed, 08 Apr 2009)
New Revision: 1610

Added:
   trunk/data/gfx32/it-coin1.png
   trunk/data/gfx32/it-coin2.png
   trunk/data/gfx32/it_banana.png
   trunk/data/gfx32/it_brush.png
   trunk/data/gfx32/it_cherry.png
   trunk/data/gfx32/it_crack_abyss.png
   trunk/data/gfx32/it_crack_water.png
   trunk/data/gfx32/it_cross.png
   trunk/data/gfx32/it_extralife.png
   trunk/data/gfx32/it_floppy.png
   trunk/data/gfx32/it_glasses.png
   trunk/data/gfx32/it_glasses_broken.png
   trunk/data/gfx32/it_hammer.png
   trunk/data/gfx32/it_key.png
   trunk/data/gfx32/it_landmine.png
   trunk/data/gfx32/it_magicwand.png
   trunk/data/gfx32/it_rubberband.png
   trunk/data/gfx32/it_squashed.png
   trunk/data/gfx32/it_sword.png
   trunk/data/gfx32/it_umbrella.png
   trunk/data/gfx32/it_wrench.png
   trunk/data/gfx40/it_banana.png
   trunk/data/gfx40/it_brush.png
   trunk/data/gfx40/it_cherry.png
   trunk/data/gfx40/it_crack_abyss.png
   trunk/data/gfx40/it_crack_water.png
   trunk/data/gfx40/it_cross.png
   trunk/data/gfx40/it_extralife.png
   trunk/data/gfx40/it_floppy.png
   trunk/data/gfx40/it_glasses.png
   trunk/data/gfx40/it_glasses_broken.png
   trunk/data/gfx40/it_hammer.png
   trunk/data/gfx40/it_key.png
   trunk/data/gfx40/it_landmine.png
   trunk/data/gfx40/it_magicwand.png
   trunk/data/gfx40/it_rubberband.png
   trunk/data/gfx40/it_squashed.png
   trunk/data/gfx40/it_sword.png
   trunk/data/gfx40/it_umbrella.png
   trunk/data/gfx40/it_wrench.png
   trunk/data/gfx48/it_banana.png
   trunk/data/gfx48/it_brush.png
   trunk/data/gfx48/it_cherry.png
   trunk/data/gfx48/it_crack_abyss.png
   trunk/data/gfx48/it_crack_water.png
   trunk/data/gfx48/it_cross.png
   trunk/data/gfx48/it_extralife.png
   trunk/data/gfx48/it_floppy.png
   trunk/data/gfx48/it_glasses.png
   trunk/data/gfx48/it_glasses_broken.png
   trunk/data/gfx48/it_hammer.png
   trunk/data/gfx48/it_key.png
   trunk/data/gfx48/it_landmine.png
   trunk/data/gfx48/it_magicwand.png
   trunk/data/gfx48/it_rubberband.png
   trunk/data/gfx48/it_squashed.png
   trunk/data/gfx48/it_sword.png
   trunk/data/gfx48/it_umbrella.png
   trunk/data/gfx48/it_wrench.png
Removed:
   trunk/data/gfx32/it-banana.png
   trunk/data/gfx32/it-brush.png
   trunk/data/gfx32/it-cherry.png
   trunk/data/gfx32/it-coin1.png
   trunk/data/gfx32/it-coin2.png
   trunk/data/gfx32/it-crack.png
   trunk/data/gfx32/it-cross.png
   trunk/data/gfx32/it-extralife.png
   trunk/data/gfx32/it-floppy.png
   trunk/data/gfx32/it-glasses-broken.png
   trunk/data/gfx32/it-glasses.png
   trunk/data/gfx32/it-hammer.png
   trunk/data/gfx32/it-key.png
   trunk/data/gfx32/it-landmine.png
   trunk/data/gfx32/it-magicwand.png
   trunk/data/gfx32/it-rubberband.png
   trunk/data/gfx32/it-squashed.png
   trunk/data/gfx32/it-sword.png
   trunk/data/gfx32/it-umbrella.png
   trunk/data/gfx32/it-wrench.png
   trunk/data/gfx40/it-banana.png
   trunk/data/gfx40/it-brush.png
   trunk/data/gfx40/it-cherry.png
   trunk/data/gfx40/it-crack.png
   trunk/data/gfx40/it-cross.png
   trunk/data/gfx40/it-extralife.png
   trunk/data/gfx40/it-floppy.png
   trunk/data/gfx40/it-glasses-broken.png
   trunk/data/gfx40/it-glasses.png
   trunk/data/gfx40/it-hammer.png
   trunk/data/gfx40/it-key.png
   trunk/data/gfx40/it-landmine.png
   trunk/data/gfx40/it-magicwand.png
   trunk/data/gfx40/it-rubberband.png
   trunk/data/gfx40/it-squashed.png
   trunk/data/gfx40/it-sword.png
   trunk/data/gfx40/it-umbrella.png
   trunk/data/gfx40/it-wrench.png
   trunk/data/gfx48/it-banana.png
   trunk/data/gfx48/it-brush.png
   trunk/data/gfx48/it-cherry.png
   trunk/data/gfx48/it-crack.png
   trunk/data/gfx48/it-cross.png
   trunk/data/gfx48/it-extralife.png
   trunk/data/gfx48/it-floppy.png
   trunk/data/gfx48/it-glasses-broken.png
   trunk/data/gfx48/it-glasses.png
   trunk/data/gfx48/it-hammer.png
   trunk/data/gfx48/it-key.png
   trunk/data/gfx48/it-landmine.png
   trunk/data/gfx48/it-magicwand.png
   trunk/data/gfx48/it-rubberband.png
   trunk/data/gfx48/it-squashed.png
   trunk/data/gfx48/it-sword.png
   trunk/data/gfx48/it-umbrella.png
   trunk/data/gfx48/it-wrench.png
Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/WorldProxy.cc
   trunk/src/floors/FloodStream.cc
   trunk/src/items/Crack.cc
   trunk/src/items/Crack.hh
Log:
Trunk 1.1:
- global attributes: assert on name mismatches
- floodstream vs. burnable_oil: keep it in all cases
- crack - add attribute flavor and cracks that dissolve to water:
  - flavor values &quot;abyss&quot; (default) and &quot;water&quot;
  - water flavor does not crack neighboring cracks
- item images: some additional file renamings
Note:
- water crack images not yet complete and finished

Deleted: trunk/data/gfx32/it-banana.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-brush.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-cherry.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-coin1.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/it-coin1.png
===================================================================
--- trunk/data/gfx32/it-coin1.png	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/data/gfx32/it-coin1.png	2009-04-07 22:04:56 UTC (rev 1610)
@@ -0,0 +1,7 @@
+&#137;PNG
+
+
+&#163;&#237;~C&#128;y:&#181;&#187;8{hK&#209;&#219;&#254;&#254;&#228;&#174;0&#218;&#216;&#249;c&#227;&#197;&#155;&#211;&#231;JB&#208;&#188;&#185;&#209;&#234;&#181;&#197;{&#130;&#148;s&#215;&#142;&#188;
+&#229;q&#250;kU
+0&#191;&#150;@&gt;2nl&#228;x&#171;&#154;&#163;&#153;&#251;&#179;7&#247;G&#139;P&#149;0&#198;!@qw@&#129;&#156;s&#219;&#185;^&#181;\&#214;&#243;&#159;&#221;8Q&#170;&quot;	&#236;&quot;
+&#254;&#174;x1&#219;&#236;}&#174;sk&#228;&#170;&#144;&#159;X&#189; &#143;FG&#203;&#168;sp&#211;30z?o,%&#207;$lK&#194;&gt;&#139;6/&#237;W&#247;&#198;^&#204;}&#254;
\ No newline at end of file

Deleted: trunk/data/gfx32/it-coin2.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/it-coin2.png
===================================================================
--- trunk/data/gfx32/it-coin2.png	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/data/gfx32/it-coin2.png	2009-04-07 22:04:56 UTC (rev 1610)
@@ -0,0 +1,8 @@
+&#137;PNG
+
+
+&#200;&#209;c&#199;&#232;&#242;&#236;|&#233;&lt;&lt;`O&#158;N&#212;&#254;N&#251;J&#172;&#179;&#247;R&#235;v(+&#251;&#135;R#p`&#224;pX'&#221;;5&#246;&#177;EP&#158;&#185;=&#131;O&lt;&#154;	zQ`&#183;&#192;&#219;)0&#131;1&#187;&#231; &#218;C7&#135;&#186;&#254;&#214;&#238;t&#253;=rm*&#198;g&#239;&#206;&#144;=&#224;&#231;FG&#194;5&#172;&#163;&#200;&#179;&#133;{&#255;V&#177;p@&#136;M&#171;&#204;
+lt&#186;&#236;&#200;&#140;(&#203;=&#155;X@ &#133;&#197;T&#144;C&#230;8&#173;&#245;&#226;U&#244;Q&#144;z&#129;8&#251;&#219;&#136;L&#198;&#163;=&#231;&#140;&#141;&#170;
+4&#196;(&#224;k&#200;&#151;P&#191;u&#250;&#159;&#224;2&#237;&#141;Pi&#181;&#156;&#173;&#144;&#151;&#189;&#218;g&#221;&#155;&#173;C&#169;|&#233;X&#142;UD&#165;j&#248;&#161;&#137;&#130;&#179;
+&quot;&#136;5&#223;&#132;(
+&#245;&#242;_&#191;&#235;c&#206;	&#172;&#188;j&#202;&#159;&#128;l&#180;&#247;&#134;&#203;M&#174;&#239;&#184;&#203;5Z&#190;&#134;u&#139;&#129;kE&#245;&#177;&#229;=&#176;&#178;&#242;:&#128;}B&#229;&#202;&#166;
\ No newline at end of file

Deleted: trunk/data/gfx32/it-crack.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-cross.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-extralife.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-floppy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-glasses-broken.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-glasses.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-hammer.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-key.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-landmine.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-magicwand.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-rubberband.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-squashed.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-sword.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-umbrella.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-wrench.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/it_banana.png (from rev 1606, trunk/data/gfx32/it-banana.png)

Copied: trunk/data/gfx32/it_brush.png (from rev 1606, trunk/data/gfx32/it-brush.png)

Copied: trunk/data/gfx32/it_cherry.png (from rev 1606, trunk/data/gfx32/it-cherry.png)

Copied: trunk/data/gfx32/it_crack_abyss.png (from rev 1606, trunk/data/gfx32/it-crack.png)

Added: trunk/data/gfx32/it_crack_water.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/it_crack_water.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx32/it_cross.png (from rev 1606, trunk/data/gfx32/it-cross.png)

Copied: trunk/data/gfx32/it_extralife.png (from rev 1606, trunk/data/gfx32/it-extralife.png)

Copied: trunk/data/gfx32/it_floppy.png (from rev 1606, trunk/data/gfx32/it-floppy.png)

Copied: trunk/data/gfx32/it_glasses.png (from rev 1606, trunk/data/gfx32/it-glasses.png)

Copied: trunk/data/gfx32/it_glasses_broken.png (from rev 1606, trunk/data/gfx32/it-glasses-broken.png)

Copied: trunk/data/gfx32/it_hammer.png (from rev 1606, trunk/data/gfx32/it-hammer.png)

Copied: trunk/data/gfx32/it_key.png (from rev 1606, trunk/data/gfx32/it-key.png)

Copied: trunk/data/gfx32/it_landmine.png (from rev 1606, trunk/data/gfx32/it-landmine.png)

Copied: trunk/data/gfx32/it_magicwand.png (from rev 1606, trunk/data/gfx32/it-magicwand.png)

Copied: trunk/data/gfx32/it_rubberband.png (from rev 1606, trunk/data/gfx32/it-rubberband.png)

Copied: trunk/data/gfx32/it_squashed.png (from rev 1606, trunk/data/gfx32/it-squashed.png)

Copied: trunk/data/gfx32/it_sword.png (from rev 1606, trunk/data/gfx32/it-sword.png)

Copied: trunk/data/gfx32/it_umbrella.png (from rev 1606, trunk/data/gfx32/it-umbrella.png)

Copied: trunk/data/gfx32/it_wrench.png (from rev 1606, trunk/data/gfx32/it-wrench.png)

Deleted: trunk/data/gfx40/it-banana.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-brush.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-cherry.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-crack.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-cross.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-extralife.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-floppy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-glasses-broken.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-glasses.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-hammer.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-key.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-landmine.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-magicwand.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-rubberband.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-squashed.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-sword.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-umbrella.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-wrench.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/it_banana.png (from rev 1606, trunk/data/gfx40/it-banana.png)

Copied: trunk/data/gfx40/it_brush.png (from rev 1606, trunk/data/gfx40/it-brush.png)

Copied: trunk/data/gfx40/it_cherry.png (from rev 1606, trunk/data/gfx40/it-cherry.png)

Copied: trunk/data/gfx40/it_crack_abyss.png (from rev 1606, trunk/data/gfx40/it-crack.png)

Added: trunk/data/gfx40/it_crack_water.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/it_crack_water.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx40/it_cross.png (from rev 1606, trunk/data/gfx40/it-cross.png)

Copied: trunk/data/gfx40/it_extralife.png (from rev 1606, trunk/data/gfx40/it-extralife.png)

Copied: trunk/data/gfx40/it_floppy.png (from rev 1606, trunk/data/gfx40/it-floppy.png)

Copied: trunk/data/gfx40/it_glasses.png (from rev 1606, trunk/data/gfx40/it-glasses.png)

Copied: trunk/data/gfx40/it_glasses_broken.png (from rev 1606, trunk/data/gfx40/it-glasses-broken.png)

Copied: trunk/data/gfx40/it_hammer.png (from rev 1606, trunk/data/gfx40/it-hammer.png)

Copied: trunk/data/gfx40/it_key.png (from rev 1606, trunk/data/gfx40/it-key.png)

Copied: trunk/data/gfx40/it_landmine.png (from rev 1606, trunk/data/gfx40/it-landmine.png)

Copied: trunk/data/gfx40/it_magicwand.png (from rev 1606, trunk/data/gfx40/it-magicwand.png)

Copied: trunk/data/gfx40/it_rubberband.png (from rev 1606, trunk/data/gfx40/it-rubberband.png)

Copied: trunk/data/gfx40/it_squashed.png (from rev 1606, trunk/data/gfx40/it-squashed.png)

Copied: trunk/data/gfx40/it_sword.png (from rev 1606, trunk/data/gfx40/it-sword.png)

Copied: trunk/data/gfx40/it_umbrella.png (from rev 1606, trunk/data/gfx40/it-umbrella.png)

Copied: trunk/data/gfx40/it_wrench.png (from rev 1606, trunk/data/gfx40/it-wrench.png)

Deleted: trunk/data/gfx48/it-banana.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-brush.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-cherry.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-crack.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-cross.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-extralife.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-floppy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-glasses-broken.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-glasses.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-hammer.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-key.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-landmine.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-magicwand.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-rubberband.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-squashed.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-sword.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-umbrella.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-wrench.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_banana.png (from rev 1606, trunk/data/gfx48/it-banana.png)

Copied: trunk/data/gfx48/it_brush.png (from rev 1606, trunk/data/gfx48/it-brush.png)

Copied: trunk/data/gfx48/it_cherry.png (from rev 1606, trunk/data/gfx48/it-cherry.png)

Copied: trunk/data/gfx48/it_crack_abyss.png (from rev 1606, trunk/data/gfx48/it-crack.png)

Added: trunk/data/gfx48/it_crack_water.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/it_crack_water.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx48/it_cross.png (from rev 1606, trunk/data/gfx48/it-cross.png)

Copied: trunk/data/gfx48/it_extralife.png (from rev 1606, trunk/data/gfx48/it-extralife.png)

Copied: trunk/data/gfx48/it_floppy.png (from rev 1606, trunk/data/gfx48/it-floppy.png)

Copied: trunk/data/gfx48/it_glasses.png (from rev 1606, trunk/data/gfx48/it-glasses.png)

Copied: trunk/data/gfx48/it_glasses_broken.png (from rev 1606, trunk/data/gfx48/it-glasses-broken.png)

Copied: trunk/data/gfx48/it_hammer.png (from rev 1606, trunk/data/gfx48/it-hammer.png)

Copied: trunk/data/gfx48/it_key.png (from rev 1606, trunk/data/gfx48/it-key.png)

Copied: trunk/data/gfx48/it_landmine.png (from rev 1606, trunk/data/gfx48/it-landmine.png)

Copied: trunk/data/gfx48/it_magicwand.png (from rev 1606, trunk/data/gfx48/it-magicwand.png)

Copied: trunk/data/gfx48/it_rubberband.png (from rev 1606, trunk/data/gfx48/it-rubberband.png)

Copied: trunk/data/gfx48/it_squashed.png (from rev 1606, trunk/data/gfx48/it-squashed.png)

Copied: trunk/data/gfx48/it_sword.png (from rev 1606, trunk/data/gfx48/it-sword.png)

Copied: trunk/data/gfx48/it_umbrella.png (from rev 1606, trunk/data/gfx48/it-umbrella.png)

Copied: trunk/data/gfx48/it_wrench.png (from rev 1606, trunk/data/gfx48/it-wrench.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/data/models-2d.lua	2009-04-07 22:04:56 UTC (rev 1610)
@@ -481,57 +481,57 @@
 do
     itemlist = {
         &quot;it_bag&quot;,
+        &quot;it_banana&quot;,
         &quot;it_bomb_black&quot;,
+        &quot;it_bomb_white&quot;,
         &quot;it-blocker&quot;,
         &quot;it_bottle_idle&quot;,
         &quot;it_bottle_broken&quot;,
+        &quot;it_brush&quot;,
+        &quot;it_cherry&quot;,
+        &quot;it_cross&quot;,
         &quot;it_document&quot;,
         &quot;it_drop&quot;,
         &quot;it_dynamite&quot;,
+        &quot;it_extralife&quot;,
         &quot;it_flag_black&quot;,
         &quot;it_flag_white&quot;,
+        &quot;it_floppy&quot;,
+        &quot;it_glasses&quot;,
+        &quot;it_glasses_broken&quot;,
+        &quot;it_hammer&quot;,
+        &quot;it_key&quot;,
+        &quot;it_landmine&quot;,
+        &quot;it_magicwand&quot;,
         &quot;it_odometer&quot;,
         &quot;it_pencil&quot;,
         &quot;it_pin&quot;,
         &quot;it_ring&quot;,
+        &quot;it_rubberband&quot;,
         &quot;it_spade&quot;,
         &quot;it_spoon&quot;,
         &quot;it_spring_keep&quot;,
         &quot;it_spring_drop&quot;,
+        &quot;it_squashed&quot;,
         &quot;it_surprise&quot;,
+        &quot;it_sword&quot;,
+        &quot;it_umbrella&quot;,
         &quot;it_weight&quot;,
-        &quot;it_bomb_white&quot;
+        &quot;it_wrench&quot;
     }
 
     DefImages(itemlist)
 
-    DefImage(&quot;it_banana&quot;, {filename=&quot;it-banana&quot;})
     DefImage(&quot;it_brake&quot;, {filename=&quot;st-brake&quot;})
-    DefImage(&quot;it_brush&quot;, {filename=&quot;it-brush&quot;})
-    DefImage(&quot;it_cherry&quot;, {filename=&quot;it-cherry&quot;})
     DefImage(&quot;it_coin_s&quot;, {filename=&quot;it-coin1&quot;})
     DefImage(&quot;it_coin_m&quot;, {filename=&quot;it-coin2&quot;})
     DefImage(&quot;it_coin_l&quot;, {filename=&quot;it-coin4&quot;})
-    DefImage(&quot;it_cross&quot;, {filename=&quot;it-cross&quot;})
-    DefImage(&quot;it_extralife&quot;, {filename=&quot;it-extralife&quot;})
-    DefImage(&quot;it_floppy&quot;, {filename=&quot;it-floppy&quot;})
-    DefImage(&quot;it_glasses&quot;, {filename=&quot;it-glasses&quot;})
-    DefImage(&quot;it_glasses_broken&quot;, {filename=&quot;it-glasses-broken&quot;})
-    DefImage(&quot;it_hammer&quot;, {filename=&quot;it-hammer&quot;})
-    DefImage(&quot;it_key&quot;, {filename=&quot;it-key&quot;})
-    DefImage(&quot;it_landmine&quot;, {filename=&quot;it-landmine&quot;})
-    DefImage(&quot;it_magicwand&quot;, {filename=&quot;it-magicwand&quot;})
     DefImage(&quot;it_meditation_hollow&quot;, {filename=&quot;it_meditation_hollow&quot;})
     DefImage(&quot;it_meditation_hill&quot;, {filename=&quot;it_meditation_hill&quot;})
     DefImage(&quot;it_meditation_dent&quot;, {filename=&quot;it_meditation_dent&quot;})
     DefImage(&quot;it_meditation_bump&quot;, {filename=&quot;it_meditation_bump&quot;})
     DefImage(&quot;it_meditation_volcano&quot;, {filename=&quot;it_meditation_volcano&quot;})
     DefImage(&quot;it_meditation_caldera&quot;, {filename=&quot;it_meditation_caldera&quot;})
-    DefImage(&quot;it_rubberband&quot;, {filename=&quot;it-rubberband&quot;})
-    DefImage(&quot;it_squashed&quot;, {filename=&quot;it-squashed&quot;})
-    DefImage(&quot;it_sword&quot;, {filename=&quot;it-sword&quot;})
-    DefImage(&quot;it_umbrella&quot;, {filename=&quot;it-umbrella&quot;})
-    DefImage(&quot;it_wrench&quot;, {filename=&quot;it-wrench&quot;})
 end
 
 -------------------------
@@ -639,12 +639,20 @@
 
 -- Cracks --
 do
-    local images = DefSubimages(&quot;it-crack&quot;, {h=8})
+    local images = DefSubimages(&quot;it_crack_abyss&quot;, {h=8})
     local frames = BuildFrames(images,50)
     DefAnim(&quot;it_debris&quot;, frames)
 
-    local frames = BuildFrames({&quot;it-crack4&quot;, &quot;it-crack5&quot;, &quot;it-crack6&quot;, &quot;it-crack7&quot;, &quot;it-crack8&quot;},120)
-    DefAnim(&quot;it-crack_anim&quot;, frames)
+    local frames = BuildFrames({&quot;it_crack_abyss4&quot;, &quot;it_crack_abyss5&quot;, &quot;it_crack_abyss6&quot;, &quot;it_crack_abyss7&quot;, &quot;it_crack_abyss8&quot;},120)
+    DefAnim(&quot;it_crack_abyss_anim&quot;, frames)
+    
+    local images = DefSubimages(&quot;it_crack_water&quot;, {h=8})
+    local frames = BuildFrames(images,50)
+    DefAnim(&quot;it_debris&quot;, frames)
+
+    local frames = BuildFrames({&quot;it_crack_water4&quot;, &quot;it_crack_water5&quot;, &quot;it_crack_water6&quot;, &quot;it_crack_water7&quot;, &quot;it_crack_water8&quot;},120)
+    DefAnim(&quot;it_crack_water_anim&quot;, frames)
+
 end
 
 -- it-death --

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/data/schemas/objects.xml	2009-04-07 22:04:56 UTC (rev 1610)
@@ -542,6 +542,7 @@
     &lt;/object&gt;
     &lt;object name=&quot;it_crack&quot;&gt;
       &lt;attr name=&quot;state&quot; min=&quot;-1&quot; max=&quot;3&quot;/&gt;
+      &lt;attr name=&quot;flavor&quot;/&gt;
       &lt;attr name=&quot;fragility&quot;/&gt;
       &lt;attr name=&quot;spreading&quot;/&gt;
       &lt;msg name=&quot;crack&quot;/&gt;

Modified: trunk/src/WorldProxy.cc
===================================================================
--- trunk/src/WorldProxy.cc	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/src/WorldProxy.cc	2009-04-07 22:04:56 UTC (rev 1610)
@@ -42,7 +42,7 @@
     WorldProxy::WorldProxy() {
     }
 
-    Value WorldProxy::getAttr(const string&amp; key) const {
+    Value WorldProxy::getAttr(const std::string &amp;key) const {
         if (key == &quot;AllowSingleOxyds&quot;) {
             return server::AllowSingleOxyds;
         } else if (key == &quot;TogglePlayerOnDeath&quot;) {
@@ -124,7 +124,7 @@
         return Value(Value::DEFAULT);
     }  
 
-    void WorldProxy::setAttr(const string&amp; key, const Value &amp;val) {
+    void WorldProxy::setAttr(const std::string &amp;key, const Value &amp;val) {
         if (key == &quot;AllowSingleOxyds&quot;) {
             server::AllowSingleOxyds = val;
         } else if (key == &quot;TogglePlayerOnDeath&quot;) {
@@ -228,7 +228,9 @@
         } else if (key == &quot;WormholeRange&quot;) {
             server::WormholeRange = val;
             BroadcastMessage(&quot;_updateglobals&quot;, &quot;it_wormhole&quot;, GRID_ITEMS_BIT);
-        }
+        } else
+            ASSERT(false, XLevelRuntime, ecl::strf(&quot;Attempt to set not existing global attribute '%s'.&quot;, key.c_str()).c_str());
+        
     }
 
 } // namespace enigma

Modified: trunk/src/floors/FloodStream.cc
===================================================================
--- trunk/src/floors/FloodStream.cc	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/src/floors/FloodStream.cc	2009-04-07 22:04:56 UTC (rev 1610)
@@ -146,7 +146,7 @@
                             newfloor-&gt;setAttr(&quot;interval&quot;, getAttr(&quot;interval&quot;));
                             SetFloor(p, newfloor);
                             Item *it = GetItem(p);
-                            if (it != NULL &amp;&amp; (it-&gt;isKind(&quot;it_crack&quot;) || it-&gt;isKind(&quot;it_burnable&quot;)))
+                            if (it != NULL &amp;&amp; (it-&gt;isKind(&quot;it_crack&quot;) || (it-&gt;isKind(&quot;it_burnable&quot;) &amp;&amp; !it-&gt;isKind(&quot;it_burnable_oil&quot;))))
                                 KillItem(p);
                         }
                     }

Modified: trunk/src/items/Crack.cc
===================================================================
--- trunk/src/items/Crack.cc	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/src/items/Crack.cc	2009-04-07 22:04:56 UTC (rev 1610)
@@ -19,7 +19,7 @@
  */
 
 #include &quot;items/Crack.hh&quot;
-//#include &quot;errors.hh&quot;
+#include &quot;errors.hh&quot;
 //#include &quot;main.hh&quot;
 #include &quot;world.hh&quot;
 
@@ -33,6 +33,29 @@
         return &quot;it_crack&quot;;
     }
     
+    void Crack::setAttr(const string&amp; key, const Value &amp;val) {
+        if (key == &quot;flavor&quot;) {
+            std::string flavor = val.to_string();
+            ASSERT(flavor == &quot;abyss&quot; || flavor == &quot;water&quot;, XLevelRuntime, &quot;Crack illegal flavor value&quot;);
+            if (flavor == &quot;water&quot;)
+                objFlags |= OBJBIT_TYP;
+            else
+                objFlags &amp;= ~OBJBIT_TYP;
+            if (isDisplayable()) {
+                init_model();    // need to redisplay after attribute set
+            }
+            return;
+        }
+        Item::setAttr(key, val);
+    }
+    
+    Value Crack::getAttr(const std::string &amp;key) const {
+        if (key == &quot;flavor&quot;) {
+            return objFlags &amp; OBJBIT_TYP ? &quot;water&quot; : &quot;abyss&quot;;
+        }
+        return Item::getAttr(key);
+    }
+
     Value Crack::message(const Message &amp;m) {
         if (m.message == &quot;crack&quot; || m.message == &quot;ignite&quot; ) {
             crack();
@@ -65,24 +88,46 @@
             case SMALL :
             case MEDIUM :
             case LARGE :
-                set_model(ecl::strf(&quot;it-crack%d&quot;, state + 1)); break;
+                set_model(ecl::strf(&quot;it_crack_%s%d&quot;, objFlags &amp; OBJBIT_TYP ? &quot;water&quot; : &quot;abyss&quot;, state + 1)); break;
             case DISSOLVING :
                 sound_event (&quot;floordestroy&quot;);
-                set_anim(&quot;it-crack_anim&quot;);
+                set_anim(ecl::strf(&quot;it_crack_%s_anim&quot;, objFlags &amp; OBJBIT_TYP ? &quot;water&quot; : &quot;abyss&quot;));
         }
     }
     
     void Crack::actor_enter(Actor *a) {
         if (a-&gt;is_on_floor()) {
             crack();
-            if (state &lt; DISSOLVING)
-                spread();
+            if (state &lt; DISSOLVING) {
+                for (Direction d = NORTH; d != NODIR; d = previous(d)) {
+                    GridPos p = move(get_pos(), d);
+                    if (Floor *fl = GetFloor(p)) {
+                        if (fl-&gt;is_destructible()) {
+                            if (Item *it = GetItem(p)) {
+                                if (!(objFlags &amp; OBJBIT_TYP))
+                                    SendMessage(it, &quot;crack&quot;);
+                            } else {
+                                double spreading = getDefaultedAttr(&quot;spreading&quot;, server::CrackSpreading); 
+                                if (DoubleRand(0, 0.9999) &lt; spreading) {
+                                    Item *it = MakeItem(&quot;it_crack_i&quot;);
+                                    it-&gt;setAttr(&quot;flavor&quot;, getAttr(&quot;flavor&quot;));
+                                    if (Value v = getAttr(&quot;fragility&quot;))
+                                        it-&gt;setAttr(&quot;fragility&quot;, v);
+                                    if (Value v = getAttr(&quot;spreading&quot;))
+                                        it-&gt;setAttr(&quot;spreading&quot;, v);
+                                    SetItem(p, it);
+                                }
+                            }
+                        }
+                    }
+                }
+            }
         }
     }
     
     void Crack::animcb() {
         GridPos p= get_pos();
-        SetFloor(p, MakeFloor(&quot;fl_abyss&quot;));
+        SetFloor(p, MakeFloor(objFlags &amp; OBJBIT_TYP ? &quot;fl_water&quot; :&quot;fl_abyss&quot;));
         KillItem(p);
     }
     
@@ -98,30 +143,7 @@
             }
         }
     }
-    
-    void Crack::spread() {
-        for (Direction d = NORTH; d != NODIR; d = previous(d)) {
-            GridPos p = move(get_pos(), d);
-            if (Floor *fl = GetFloor(p)) {
-                if (fl-&gt;is_destructible()) {
-                    if (Item *it = GetItem(p))
-                        SendMessage(it, &quot;crack&quot;);
-                    else {
-                        double spreading = getDefaultedAttr(&quot;spreading&quot;, server::CrackSpreading); 
-                        if (DoubleRand(0, 0.9999) &lt; spreading) {
-                            Item *it = MakeItem(&quot;it_crack_i&quot;);
-                            if (Value v = getAttr(&quot;fragility&quot;))
-                                it-&gt;setAttr(&quot;fragility&quot;, v);
-                            if (Value v = getAttr(&quot;spreading&quot;))
-                                it-&gt;setAttr(&quot;spreading&quot;, v);
-                            SetItem(p, it);
-                        }
-                    }
-                }
-            }
-        }
-    }
-    
+        
     int Crack::traitsIdx() const {
         return state &lt; DISSOLVING ? state + 1 : 3;
     }

Modified: trunk/src/items/Crack.hh
===================================================================
--- trunk/src/items/Crack.hh	2009-04-05 11:54:00 UTC (rev 1609)
+++ trunk/src/items/Crack.hh	2009-04-07 22:04:56 UTC (rev 1610)
@@ -40,18 +40,23 @@
             DISSOLVING =  3        ///&lt;  
         };
 
+        enum ObjectPrivatFlagsBits {
+            OBJBIT_TYP    =   1&lt;&lt;24,   ///&lt; 0 - abyss, 1 - water
+        };
+
     public:
         Crack(int type);
         
         // Object interface
         virtual std::string getClass() const;
+        virtual void setAttr(const string&amp; key, const Value &amp;val);
+        virtual Value getAttr(const std::string &amp;key) const;
         virtual Value message (const Message &amp;m);
 
         // StateObject interface
         virtual int maxState() const;
         virtual int minState() const;
         virtual void toggleState();
-//        virtual void setState(int extState);
 
         // GridObject interface
         virtual void init_model();
@@ -62,7 +67,6 @@
         
     private:
         void crack();
-        void spread();
         int traitsIdx() const;
     };
    


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001039.html">[Enigma-game-svn] r1609 - in trunk: data/schemas src src/floors	src/others src/stones
</A></li>
	<LI>Next message: <A HREF="001041.html">[Enigma-game-svn] r1611 - trunk/doc/reference
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1040">[ date ]</a>
              <a href="thread.html#1040">[ thread ]</a>
              <a href="subject.html#1040">[ subject ]</a>
              <a href="author.html#1040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
