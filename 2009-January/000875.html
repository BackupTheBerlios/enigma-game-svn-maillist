<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1446 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1446%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20src%20src/items&In-Reply-To=%3C200901112349.n0BNn9hT024532%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000874.html">
   <LINK REL="Next"  HREF="000876.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1446 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items</H1>
    <B>ral at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1446%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20src%20src/items&In-Reply-To=%3C200901112349.n0BNn9hT024532%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1446 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items">ral at mail.berlios.de
       </A><BR>
    <I>Mon Jan 12 00:49:09 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000874.html">[Enigma-game-svn] r1445 - team_levelpacks/team_test_new_api
</A></li>
        <LI>Next message: <A HREF="000876.html">[Enigma-game-svn] r1447 - in trunk/data/levels: enigma_cross	enigma_iv enigma_v enigma_vi enigma_vii enigma_viii
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#875">[ date ]</a>
              <a href="thread.html#875">[ thread ]</a>
              <a href="subject.html#875">[ subject ]</a>
              <a href="author.html#875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-01-12 00:49:02 +0100 (Mon, 12 Jan 2009)
New Revision: 1446

Added:
   trunk/data/gfx32/it_coffee.png
   trunk/data/gfx32/it_ring.png
   trunk/data/gfx32/it_spade.png
   trunk/data/gfx32/it_spoon.png
   trunk/data/gfx32/it_yinyang.png
   trunk/data/gfx40/it_coffee.png
   trunk/data/gfx40/it_ring.png
   trunk/data/gfx40/it_spade.png
   trunk/data/gfx40/it_spoon.png
   trunk/data/gfx40/it_yinyang.png
   trunk/data/gfx48/it_coffee.png
   trunk/data/gfx48/it_ring.png
   trunk/data/gfx48/it_spade.png
   trunk/data/gfx48/it_spoon.png
   trunk/data/gfx48/it_yinyang.png
Removed:
   trunk/data/gfx32/it-coffee.png
   trunk/data/gfx32/it-ring.png
   trunk/data/gfx32/it-spade.png
   trunk/data/gfx32/it-spoon.png
   trunk/data/gfx32/it-yinyang.png
   trunk/data/gfx40/it-coffee.png
   trunk/data/gfx40/it-ring.png
   trunk/data/gfx40/it-spade.png
   trunk/data/gfx40/it-spoon.png
   trunk/data/gfx40/it-yinyang.png
   trunk/data/gfx48/it-coffee.png
   trunk/data/gfx48/it-ring.png
   trunk/data/gfx48/it-spade.png
   trunk/data/gfx48/it-spoon.png
   trunk/data/gfx48/it-yinyang.png
Modified:
   trunk/data/api1init.lua
   trunk/data/models-2d.lua
   trunk/src/items.cc
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/ox_extra.cc
   trunk/src/ox_magnum.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/player.cc
Log:
Trunk 1.1: new API reengineering
- rename items:
  - it-coffee -&gt; it_coffee
  - it-ring -&gt; it_ring
  - it-spade -&gt; it_spade
  - it-spoon -&gt; it_spoon
  - it-yinyang -&gt; it_yinyang

Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/data/api1init.lua	2009-01-11 23:49:02 UTC (rev 1446)
@@ -135,6 +135,7 @@
     it_brake = &quot;it-brake&quot;,
     it_brush = &quot;it-brush&quot;,
     it_cherry = &quot;it-cherry&quot;,
+    it_coffee = &quot;it-coffee&quot;,
     it_coin_s = &quot;it-coin1&quot;,
     it_coin_m = &quot;it-coin2&quot;,
     it_coin_l = &quot;it-coin4&quot;,
@@ -168,10 +169,13 @@
     it_pipe_nw = &quot;it-pipe-wn&quot;,
     it_pipe_ns = &quot;it-pipe-v&quot;,
     it_pipe_ne = &quot;it-pipe-ne&quot;,
+    it_ring = &quot;it-ring&quot;,
     it_rubberband = &quot;it-rubberband&quot;,
     it_seed = &quot;it-seed&quot;,
     it_seed_fake = &quot;it-seed_nowood&quot;,
     it_seed_volcano = &quot;it-seed_volcano&quot;,
+    it_spade = &quot;it-spade&quot;,
+    it_spoon = &quot;it-spoon&quot;,
     it_squashed = &quot;it-squashed&quot;,
     it_shogun_s = &quot;it-shogun-s&quot;,
     it_shogun_m = &quot;it-shogun-m&quot;,
@@ -188,6 +192,7 @@
     it_wormhole_on = &quot;it-wormhole&quot;,
     it_wormhole_off = &quot;it-wormhole-off&quot;,
     it_wrench = &quot;it-wrench&quot;,
+    it_yinyang = &quot;it-yinyang&quot;,
     st_actorimpulse = &quot;st-actorimpulse&quot;,
     st_actorimpulse_invisible = &quot;st-actorimpulse_invisible&quot;,
     st_blocker = &quot;st-blocker&quot;,

Deleted: trunk/data/gfx32/it-coffee.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-ring.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-spade.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-spoon.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-yinyang.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/it_coffee.png (from rev 1443, trunk/data/gfx32/it-coffee.png)

Copied: trunk/data/gfx32/it_ring.png (from rev 1443, trunk/data/gfx32/it-ring.png)

Copied: trunk/data/gfx32/it_spade.png (from rev 1443, trunk/data/gfx32/it-spade.png)

Copied: trunk/data/gfx32/it_spoon.png (from rev 1443, trunk/data/gfx32/it-spoon.png)

Copied: trunk/data/gfx32/it_yinyang.png (from rev 1443, trunk/data/gfx32/it-yinyang.png)

Deleted: trunk/data/gfx40/it-coffee.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-ring.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-spade.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-spoon.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-yinyang.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/it_coffee.png (from rev 1443, trunk/data/gfx40/it-coffee.png)

Copied: trunk/data/gfx40/it_ring.png (from rev 1443, trunk/data/gfx40/it-ring.png)

Copied: trunk/data/gfx40/it_spade.png (from rev 1443, trunk/data/gfx40/it-spade.png)

Copied: trunk/data/gfx40/it_spoon.png (from rev 1443, trunk/data/gfx40/it-spoon.png)

Copied: trunk/data/gfx40/it_yinyang.png (from rev 1443, trunk/data/gfx40/it-yinyang.png)

Deleted: trunk/data/gfx48/it-coffee.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-ring.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-spade.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-spoon.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-yinyang.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_coffee.png (from rev 1443, trunk/data/gfx48/it-coffee.png)

Copied: trunk/data/gfx48/it_ring.png (from rev 1443, trunk/data/gfx48/it-ring.png)

Copied: trunk/data/gfx48/it_spade.png (from rev 1443, trunk/data/gfx48/it-spade.png)

Copied: trunk/data/gfx48/it_spoon.png (from rev 1443, trunk/data/gfx48/it-spoon.png)

Copied: trunk/data/gfx48/it_yinyang.png (from rev 1443, trunk/data/gfx48/it-yinyang.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/data/models-2d.lua	2009-01-11 23:49:02 UTC (rev 1446)
@@ -463,9 +463,9 @@
         &quot;it-odometer&quot;,
         &quot;it-pencil&quot;,
         &quot;it-pin&quot;,
-        &quot;it-ring&quot;,
-        &quot;it-spade&quot;,
-        &quot;it-spoon&quot;,
+        &quot;it_ring&quot;,
+        &quot;it_spade&quot;,
+        &quot;it_spoon&quot;,
         &quot;it-spring1&quot;,
         &quot;it-spring2&quot;,
         &quot;it-surprise&quot;,
@@ -554,7 +554,7 @@
 
 -- it-yinyang --
 do
-    DefTiles(&quot;it-yinyang&quot;, {&quot;it-yinyang&quot;, &quot;it-yanying&quot;})
+    DefTiles(&quot;it_yinyang&quot;, {&quot;it_yinyang&quot;, &quot;it_yangyin&quot;})
 end
 
 -- it_strip --
@@ -605,9 +605,9 @@
 
 -- it-coffee --
 do
-    local images = DefSubimages(&quot;it-coffee&quot;, {h=4})
+    local images = DefSubimages(&quot;it_coffee&quot;, {h=4})
     local frames = BuildFrames(images,150)
-    DefAnim(&quot;it-coffee&quot;, frames, true)
+    DefAnim(&quot;it_coffee&quot;, frames, true)
 end
 
 -- Cracks --

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/items/SimpleItems.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -21,7 +21,8 @@
 #include &quot;items/SimpleItems.hh&quot;
 //#include &quot;errors.hh&quot;
 //#include &quot;main.hh&quot;
-//#include &quot;player.hh&quot;
+#include &quot;player.hh&quot;
+#include &quot;SoundEffectManager.hh&quot;
 #include &quot;world.hh&quot;
 
 namespace enigma {
@@ -96,6 +97,51 @@
     
     DEF_ITEMTRAITSF(DeathItem, &quot;it_death&quot;, it_death, itf_static | itf_indestructible);
 
+/* -------------------- Ring -------------------- */
+
+    Ring::Ring() {
+    }
+    
+    ItemAction Ring::activate(Actor *a, GridPos) {
+        if (ExchangeMarbles(a)) {
+            sound_event(&quot;switchmarbles&quot;);
+        }
+        else {
+            RespawnActor(a);
+        }
+        return ITEM_DROP;
+    }
+
+    DEF_ITEMTRAITS(Ring, &quot;it_ring&quot;, it_ring);
+
+/* -------------------- Spade -------------------- */
+
+    Spade::Spade() {
+    }
+    
+    ItemAction Spade::activate(Actor *a, GridPos p) {
+        if (Item *it=GetItem(p)) {
+            sound::EmitSoundEvent(&quot;spade&quot;, p.center());
+            SendMessage(it, &quot;shovel&quot;);
+            return ITEM_KEEP;
+        }
+        return ITEM_DROP;
+    }
+
+    DEF_ITEMTRAITS(Spade, &quot;it_spade&quot;, it_spade);
+
+/* -------------------- Spoon -------------------- */
+
+    Spoon::Spoon() {
+    }
+    
+    ItemAction Spoon::activate(Actor *a, GridPos) {
+        SendMessage(a, &quot;_suicide&quot;);
+        return ITEM_DROP;
+    }
+
+    DEF_ITEMTRAITS(Spoon, &quot;it_spoon&quot;, it_spoon);
+
 /* -------------------- Squashed Cherry -------------------- */
 
     Squashed::Squashed() {
@@ -113,17 +159,42 @@
 
     DEF_ITEMTRAITSF(Squashed, &quot;it_squashed&quot;, it_squashed, itf_static);
 
+/* -------------------- YinYang item -------------------- */
+    Yinyang::Yinyang() {
+    }
+    
+    std::string Yinyang::get_inventory_model() {
+        if (player::CurrentPlayer() == 0)
+            return &quot;it_yinyang&quot;;
+        else
+            return &quot;it_yangyin&quot;;
+    }
+    
+    ItemAction Yinyang::activate(Actor *a, GridPos p) {
+        // Switch to other marble
+        player::SwapPlayers();
+        sound::EmitSoundEvent(&quot;switchplayer&quot;, p.center());
+        return ITEM_KEEP;
+    }
+    
+    DEF_ITEMTRAITS(Yinyang, &quot;it_yinyang&quot;, it_yinyang);
 
+
     BOOT_REGISTER_START
         BootRegister(new Banana(), &quot;it_banana&quot;);
         BootRegister(new Brush(), &quot;it_brush&quot;);
         BootRegister(new Cherry(), &quot;it_cherry&quot;);
+        BootRegister(new Coffee(), &quot;it_coffee&quot;);
         BootRegister(new DeathItem(), &quot;it_death&quot;);
         BootRegister(new Floppy(), &quot;it_floppy&quot;);
         BootRegister(new MagicWand(), &quot;it_magicwand&quot;);
         BootRegister(new Key(), &quot;it_key&quot;);
+        BootRegister(new Ring(), &quot;it_ring&quot;);
+        BootRegister(new Spade(), &quot;it_spade&quot;);
+        BootRegister(new Spoon(), &quot;it_spoon&quot;);
         BootRegister(new Squashed(), &quot;it_squashed&quot;);
         BootRegister(new Wrench(), &quot;it_wrench&quot;);
+        BootRegister(new Yinyang(), &quot;it_yinyang&quot;);
     BOOT_REGISTER_END
 
 } // namespace enigma

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/items/SimpleItems.hh	2009-01-11 23:49:02 UTC (rev 1446)
@@ -73,6 +73,11 @@
     };
     
     /**
+     * Coffee
+     */
+    DEF_ITEMF(Coffee, &quot;it_coffee&quot;, it_coffee, itf_inflammable);
+
+    /**
      * DeathItem
      */
     class DeathItem : public Item {
@@ -106,6 +111,49 @@
     DEF_ITEM(Key, &quot;it_key&quot;, it_key);
 
     /**
+     * Ring
+     */
+    class Ring : public Item {
+        CLONEOBJ(Ring);
+        DECL_ITEMTRAITS;
+        
+    public:
+        Ring();
+        
+        // Item interface
+        virtual ItemAction activate(Actor* a, GridPos p);
+    };
+
+    /**
+     * Spade
+     */
+    class Spade : public Item {
+        CLONEOBJ(Spade);
+        DECL_ITEMTRAITS;
+
+    public:
+        Spade();
+        
+        // Item interface
+        virtual ItemAction activate(Actor* a, GridPos p);
+    };
+    
+    /**
+     * Spoon
+     */
+    class Spoon : public Item {
+        CLONEOBJ(Spoon);
+        DECL_ITEMTRAITS;
+
+    public:
+        Spoon();
+        
+        // Item interface
+        virtual ItemAction activate(Actor* a, GridPos p);
+    };
+
+    
+    /**
      * Squashed
      */
     class Squashed : public Item {
@@ -124,6 +172,20 @@
      */
     DEF_ITEM(Wrench, &quot;it_wrench&quot;, it_wrench);
 
+    /**
+     * Yinyang
+     */
+    class Yinyang : public Item {
+        CLONEOBJ(Yinyang);
+        DECL_ITEMTRAITS;
+        
+    public:
+        Yinyang();
+
+        // Item interface
+        virtual std::string get_inventory_model();
+        virtual ItemAction activate(Actor* a, GridPos p);
+    };
 } // namespace enigma
 
 #endif

Modified: trunk/src/items.cc
===================================================================
--- trunk/src/items.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/items.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -160,7 +160,6 @@
 namespace
 {
     DEF_ITEM(Odometer,  &quot;it-odometer&quot;, it_odometer);
-    DEF_ITEMF(Coffee,   &quot;it-coffee&quot;, it_coffee, itf_inflammable);
 }
 
 /* -------------------- DummyItem -------------------- */
@@ -216,24 +215,6 @@
     };
     DEF_ITEMTRAITS(Pin, &quot;it-pin&quot;, it_pin);
 
-/* -------------------- Spoon -------------------- */
-namespace
-{
-    class Spoon : public Item {
-        CLONEOBJ(Spoon);
-        DECL_ITEMTRAITS;
-
-        ItemAction activate(Actor *a, GridPos) {
-            SendMessage(a, &quot;_suicide&quot;);
-            return ITEM_DROP;
-        }
-    public:
-        Spoon()
-        {}
-    };
-    DEF_ITEMTRAITS(Spoon, &quot;it-spoon&quot;, it_spoon);
-}
-
 /* -------------------- Booze -------------------- */
 
 namespace
@@ -696,57 +677,6 @@
                 itf_static | itf_indestructible | itf_fireproof);
 }
 
-
-/* -------------------- YinYang item -------------------- */
-namespace
-{
-    class YinYang : public Item {
-        CLONEOBJ(YinYang);
-        DECL_ITEMTRAITS;
-    public:
-        YinYang()
-        {}
-
-        string get_inventory_model() {
-            if (player::CurrentPlayer()==0)
-                return &quot;it-yinyang&quot;;
-            else
-                return &quot;it-yanying&quot;;
-        }
-
-        ItemAction activate(Actor *, GridPos p) {
-            // Switch to other marble
-            player::SwapPlayers();
-            // play_sound(&quot;switch&quot;);   // don't! wrong coordinates!
-            sound::EmitSoundEvent (&quot;switchplayer&quot;, p.center());
-            return ITEM_KEEP;
-        }
-    };
-    DEF_ITEMTRAITS(YinYang, &quot;it-yinyang&quot;, it_yinyang);
-}
-
-
-/* -------------------- Spade -------------------- */
-namespace
-{
-    class Spade : public Item {
-        CLONEOBJ(Spade);
-        DECL_ITEMTRAITS;
-
-        ItemAction activate(Actor *, GridPos p) {
-            if (Item *it=GetItem(p)) {
-                sound::EmitSoundEvent (&quot;spade&quot;, p.center());
-                SendMessage(it, &quot;shovel&quot;);
-                return ITEM_KEEP;
-            }
-            return ITEM_DROP;
-        }
-    public:
-        Spade() {}
-    };
-    DEF_ITEMTRAITS(Spade, &quot;it-spade&quot;, it_spade);
-}
-
 /* -------------------- Pullers -------------------- */
 namespace
 {
@@ -1032,28 +962,6 @@
 }
 
 
-/* -------------------- Ring -------------------- */
-namespace
-{
-    class Ring : public Item {
-        CLONEOBJ(Ring);
-        DECL_ITEMTRAITS;
-    public:
-        Ring() {}
-
-        ItemAction activate(Actor *a, GridPos) {
-            if (ExchangeMarbles(a)) {
-                sound_event (&quot;switchmarbles&quot;);
-            }
-            else {
-                RespawnActor(a);
-            }
-            return ITEM_DROP;
-        }
-    };
-    DEF_ITEMTRAITS(Ring, &quot;it-ring&quot;, it_ring);
-}
-
 //----------------------------------------
 // Bridge item (for Oxyd compatibility)
 //
@@ -1700,7 +1608,6 @@
     RegisterItem (new BrokenBooze);
     Burnable::setup();
     RegisterItem (new ChangeFloorItem);
-    RegisterItem (new Coffee);
     RegisterItem (new Cross);
     RegisterItem (new Debris);
     RegisterItem (new Document);
@@ -1724,9 +1631,6 @@
     RegisterItem (new Pencil);
     RegisterItem (new Pin);
     Puller::setup();
-    RegisterItem (new Ring);
-    RegisterItem (new Spade);
-    RegisterItem (new Spoon);
     RegisterItem (new Spring1);
     RegisterItem (new Spring2);
     RegisterItem (new Springboard);
@@ -1734,7 +1638,6 @@
     RegisterItem (new TwoPKillStone);
     RegisterItem (new Weight);
     RegisterItem (new WhiteBomb);
-    RegisterItem (new YinYang);
 }
 
 } // namespace enigma

Modified: trunk/src/ox_extra.cc
===================================================================
--- trunk/src/ox_extra.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/ox_extra.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -313,7 +313,7 @@
     IT_EXTERNAL,                // OxydExtra item 0x02
     IT_EXTERNAL,                // OxydExtra item 0x03
     &quot;it_hammer&quot;,                  // OxydExtra item 0x04
-    &quot;it-coffee&quot;,                  // OxydExtra item 0x05
+    &quot;it_coffee&quot;,                  // OxydExtra item 0x05
     &quot;it_cherry&quot;,                  // OxydExtra item 0x06
     &quot;it_umbrella&quot;,                // OxydExtra item 0x07
     IT_MISSING,                 // OxydExtra item 0x08
@@ -341,7 +341,7 @@
     UNUSED,                  // OxydExtra item 0x1e
     UNUSED,                  // OxydExtra item 0x1f
     UNUSED,                  // OxydExtra item 0x20
-    &quot;it-spade&quot;,                   // OxydExtra item 0x21
+    &quot;it_spade&quot;,                   // OxydExtra item 0x21
     &quot;it-surprise&quot;,                // OxydExtra item 0x22
     &quot;it-pin&quot;,                     // OxydExtra item 0x23
     UNUSED,                  // OxydExtra item 0x24

Modified: trunk/src/ox_magnum.cc
===================================================================
--- trunk/src/ox_magnum.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/ox_magnum.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -295,7 +295,7 @@
     IT_EXTERNAL,      // OxydMagnum item 0x02 document 1
     IT_EXTERNAL,      // OxydMagnum item 0x03 document 2
     &quot;it_hammer&quot;,        // OxydMagnum item 0x04
-    &quot;it-coffee&quot;,        // OxydMagnum item 0x05
+    &quot;it_coffee&quot;,        // OxydMagnum item 0x05
     &quot;it_cherry&quot;,        // OxydMagnum item 0x06
     &quot;it_umbrella&quot;,      // OxydMagnum item 0x07
     &quot;it_glasses&quot;,       // OxydMagnum item 0x08
@@ -317,14 +317,14 @@
     &quot;it_sword&quot;,         // OxydMagnum item 0x18
     &quot;it-flagwhite&quot;,     // OxydMagnum item 0x19
     &quot;it-flagblack&quot;,     // OxydMagnum item 0x1a
-    &quot;it-ring&quot;,          // OxydMagnum item 0x1b
+    &quot;it_ring&quot;,          // OxydMagnum item 0x1b
     &quot;it_pipe_nw&quot;,       // OxydMagnum item 0x1c
     &quot;it_pipe_sw&quot;,       // OxydMagnum item 0x1d
     &quot;it_pipe_ne&quot;,       // OxydMagnum item 0x1e
     &quot;it_pipe_es&quot;,       // OxydMagnum item 0x1f
     &quot;it_pipe_ns&quot;,        // OxydMagnum item 0x20
     &quot;it_pipe_ew&quot;,        // OxydMagnum item 0x21
-    &quot;it-spade&quot;,         // OxydMagnum item 0x22
+    &quot;it_spade&quot;,         // OxydMagnum item 0x22
     UNUSED,        // OxydMagnum item 0x23
     &quot;it-pin&quot;,           // OxydMagnum item 0x24
     &quot;it_seed&quot;,          // OxydMagnum item 0x25

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/ox_oxyd1.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -311,7 +311,7 @@
     IT_EXTERNAL,                  // 0x02 document 1
     IT_EXTERNAL,                  // 0x03 document 2
     &quot;it_hammer&quot;,                  // 0x04
-    &quot;it-coffee&quot;,                  // 0x05
+    &quot;it_coffee&quot;,                  // 0x05
     &quot;it_cherry&quot;,                  // 0x06
     &quot;it_umbrella&quot;,                // 0x07
     &quot;it_glasses&quot;,                 // 0x08
@@ -333,14 +333,14 @@
     &quot;it_sword&quot;,                   // 0x18
     &quot;it-flagwhite&quot;,               // 0x19
     &quot;it-flagblack&quot;,               // 0x1a
-    &quot;it-ring&quot;,                    // 0x1b
+    &quot;it_ring&quot;,                    // 0x1b
     &quot;it_pipe_nw&quot;,                 // 0x1c
     &quot;it_pipe_sw&quot;,                 // 0x1d
     &quot;it_pipe_ne&quot;,                 // 0x1e
     &quot;it_pipe_es&quot;,                 // 0x1f
     &quot;it_pipe_ns&quot;,                 // 0x20
     &quot;it_pipe_ew&quot;,                 // 0x21
-    &quot;it-spade&quot;,                   // 0x22
+    &quot;it_spade&quot;,                   // 0x22
     &quot;it-surprise&quot;,                // 0x23
     &quot;it-pin&quot;,                     // 0x24
     &quot;it_seed&quot;,                    // 0x25

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/ox_peroxyd.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -384,7 +384,7 @@
     IT_EXTERNAL,                  // 0x02 document 1
     IT_EXTERNAL,                  // 0x03 document 2
     &quot;it_hammer&quot;,                  // 0x04
-    &quot;it-coffee&quot;,                  // 0x05
+    &quot;it_coffee&quot;,                  // 0x05
     &quot;it_cherry&quot;,                  // 0x06
     &quot;it_umbrella&quot;,                // 0x07
     &quot;it_glasses&quot;,                 // 0x08
@@ -405,14 +405,14 @@
     &quot;it_floppy&quot;,                  // 0x17
     &quot;it-flagwhite&quot;,               // 0x18
     &quot;it-flagblack&quot;,               // 0x19
-    &quot;it-ring&quot;,                    // 0x1a
+    &quot;it_ring&quot;,                    // 0x1a
     &quot;it_pipe_nw&quot;,                 // 0x1b
     &quot;it_pipe_sw&quot;,                 // 0x1c
     &quot;it_pipe_ne&quot;,                 // 0x1d
     &quot;it_pipe_es&quot;,                 // 0x1e
     &quot;it_pipe_ns&quot;,                  // 0x1f
     &quot;it_pipe_ew&quot;,                  // 0x20
-    &quot;it-spade&quot;,                   // 0x21
+    &quot;it_spade&quot;,                   // 0x21
     &quot;it-surprise&quot;,                // 0x22
     &quot;it-pin&quot;,                     // 0x23
     &quot;it_seed&quot;,                    // 0x24
@@ -440,7 +440,7 @@
     UNUSED,                  // 0x3a
     UNUSED,                  // 0x3b
     &quot;it_cross&quot;,                   // 0x3c
-    &quot;it-spoon&quot;,                   // 0x3d
+    &quot;it_spoon&quot;,                   // 0x3d
     IT_MISSING,                   // 0x3e rubber band
     &quot;it-changefloor&quot;,             // 0x3f
     &quot;it_trigger&quot;,                 // 0x40

Modified: trunk/src/player.cc
===================================================================
--- trunk/src/player.cc	2009-01-11 00:21:43 UTC (rev 1445)
+++ trunk/src/player.cc	2009-01-11 23:49:02 UTC (rev 1446)
@@ -193,8 +193,8 @@
 {
     for (unsigned i=0; i&lt;players.size(); ++i) {
         Inventory *inv = GetInventory (i);
-        if (inv-&gt;find (&quot;it-yinyang&quot;) == -1) 
-            inv-&gt;add_item(MakeItem(&quot;it-yinyang&quot;));
+        if (inv-&gt;find(&quot;it_yinyang&quot;) == -1) 
+            inv-&gt;add_item(MakeItem(&quot;it_yinyang&quot;));
     }
 }
 
@@ -463,7 +463,7 @@
         else {
             if (pl == icurrent_player)
                 // check if player has yinyang for single gamer mode
-                if (player::GetInventory(pl)-&gt;find(&quot;it-yinyang&quot;,0) &gt;= 0)
+                if (player::GetInventory(pl)-&gt;find(&quot;it_yinyang&quot;,0) &gt;= 0)
                     toggle_player = true;
                 else
                     new_game = true;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000874.html">[Enigma-game-svn] r1445 - team_levelpacks/team_test_new_api
</A></li>
	<LI>Next message: <A HREF="000876.html">[Enigma-game-svn] r1447 - in trunk/data/levels: enigma_cross	enigma_iv enigma_v enigma_vi enigma_vii enigma_viii
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#875">[ date ]</a>
              <a href="thread.html#875">[ thread ]</a>
              <a href="subject.html#875">[ subject ]</a>
              <a href="author.html#875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
