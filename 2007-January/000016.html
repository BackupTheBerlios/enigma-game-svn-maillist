<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r576 - in branches/1.0/data/levels:	enigma_experimental enigma_oxyd enigma_peroxyd enigma_v	enigma_vi lib
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r576%20-%20in%20branches/1.0/data/levels%3A%0A%09enigma_experimental%20enigma_oxyd%20enigma_peroxyd%20enigma_v%0A%09enigma_vi%20lib&In-Reply-To=%3C200701142150.l0ELopa0011495%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000015.html">
   <LINK REL="Next"  HREF="000017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r576 - in branches/1.0/data/levels:	enigma_experimental enigma_oxyd enigma_peroxyd enigma_v	enigma_vi lib</H1>
    <B>raoul at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r576%20-%20in%20branches/1.0/data/levels%3A%0A%09enigma_experimental%20enigma_oxyd%20enigma_peroxyd%20enigma_v%0A%09enigma_vi%20lib&In-Reply-To=%3C200701142150.l0ELopa0011495%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r576 - in branches/1.0/data/levels:	enigma_experimental enigma_oxyd enigma_peroxyd enigma_v	enigma_vi lib">raoul at mail.berlios.de
       </A><BR>
    <I>Sun Jan 14 22:50:51 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000015.html">[Enigma-game-svn] r575 - in trunk/data: gfx32 gfx40 gfx48
</A></li>
        <LI>Next message: <A HREF="000017.html">[Enigma-game-svn] r577 - in branches/1.0/data/levels:	enigma_experimental enigma_v lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16">[ date ]</a>
              <a href="thread.html#16">[ thread ]</a>
              <a href="subject.html#16">[ subject ]</a>
              <a href="author.html#16">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: raoul
Date: 2007-01-14 22:50:47 +0100 (Sun, 14 Jan 2007)
New Revision: 576

Added:
   branches/1.0/data/levels/enigma_experimental/flood_demo_1.xml
   branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml
   branches/1.0/data/levels/enigma_experimental/puzzle_testarea_1.xml
   branches/1.0/data/levels/lib/libflood_1.xml
   branches/1.0/data/levels/lib/libpuzzle_2.xml
Removed:
   branches/1.0/data/levels/enigma_experimental/puzzle_demo.xml
   branches/1.0/data/levels/enigma_experimental/randompuzzles.xml
Modified:
   branches/1.0/data/levels/enigma_experimental/index.xml
   branches/1.0/data/levels/enigma_experimental/items.xml
   branches/1.0/data/levels/enigma_oxyd/index.xml
   branches/1.0/data/levels/enigma_oxyd/oxyd70_1.xml
   branches/1.0/data/levels/enigma_oxyd/oxydlink33_1.xml
   branches/1.0/data/levels/enigma_oxyd/oxydlink68_1.xml
   branches/1.0/data/levels/enigma_peroxyd/index.xml
   branches/1.0/data/levels/enigma_peroxyd/peroxyd62_1.xml
   branches/1.0/data/levels/enigma_peroxyd/peroxydlink06_1.xml
   branches/1.0/data/levels/enigma_peroxyd/peroxydlink13_1.xml
   branches/1.0/data/levels/enigma_v/index.xml
   branches/1.0/data/levels/enigma_v/raoul05_1.xml
   branches/1.0/data/levels/enigma_v/raoul23_1.xml
   branches/1.0/data/levels/enigma_v/ss10_1.xml
   branches/1.0/data/levels/enigma_vi/index.xml
   branches/1.0/data/levels/enigma_vi/raoul13_1.xml
   branches/1.0/data/levels/enigma_vi/raoul26_1.xml
Log:
-&gt; Fixed easymodebug in level ss10_1.
-&gt; New version of libpuzzle, new testlevel, switched all my levels to this new version.
-&gt; New lib: libflood and testlevel.



Added: branches/1.0/data/levels/enigma_experimental/flood_demo_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/flood_demo_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/flood_demo_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -0,0 +1,75 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected&gt;
+    &lt;el:info el:type=&quot;level&quot;&gt;
+      &lt;el:identity el:title=&quot;Flood Demo&quot; el:subtitle=&quot;Demolevel for libflood&quot; el:id=&quot;flood_demo&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;stable&quot;/&gt;
+      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2007 Raoul Bourquin&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libflood_1&quot; el:id=&quot;lib/libflood&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
+      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+-- GENERAL --
+levelh = 13
+levelw = 20
+
+create_world(levelw, levelh)
+
+function renderLine( line, pattern)
+	for i=1, strlen(pattern) do
+		local c = strsub( pattern, i, i)
+  		if c==&quot;x&quot; then
+			oxyd(i-1,line)
+        elseif c==&quot;#&quot; then
+            set_stone(&quot;st-glass&quot;,i-1,line)
+            set_floor(&quot;fl-black&quot;,i-1,line)
+        elseif c==&quot; &quot; then
+            set_floor(&quot;fl-rough&quot;,i-1,line)
+        elseif c==&quot;-&quot; then
+            set_floor(&quot;fl-black&quot;,i-1,line)
+		end
+	end
+end
+
+renderLine(00 , &quot;####################&quot;)
+renderLine(01 , &quot;#------------------#&quot;)
+renderLine(02 , &quot;#------------------#&quot;)
+renderLine(03 , &quot;#---------------- -#&quot;)
+renderLine(04 , &quot;#--      -         #&quot;)
+renderLine(05 , &quot;#-     - ----     -#&quot;)
+renderLine(06 , &quot;#-          -  ----#&quot;)
+renderLine(07 , &quot;#-   ------ -  -  -#&quot;)
+renderLine(08 , &quot;#- ---    - --    -#&quot;)
+renderLine(09 , &quot;#    -  -      -  -#&quot;)
+renderLine(10 , &quot;#- ----------------#&quot;)
+renderLine(11 , &quot;#------------------#&quot;)
+renderLine(12 , &quot;####################&quot;)
+
+oxyd_shuffle()
+set_actor(&quot;ac-blackball&quot;, 1.5,1.5, {player=0})
+
+-- PART FOR THE LIBFLOOD:
+
+init_flood({&quot;################ #&quot;,
+            &quot;##      #       ~ &quot;,
+            &quot;# ~   # ####     #&quot;,
+            &quot;#          #  ####&quot;,
+            &quot;#   ###### #  #  #&quot;,
+            &quot;# ###~   # ##   ~#&quot;,
+            &quot;    #  #      # ~#&quot;,
+            &quot;# ################&quot;},{1,3},1)
+
+set_stone(&quot;st-switch_black&quot;,2,2,{action=&quot;callback&quot;, target=&quot;do_flood&quot;})
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+      &lt;el:string el:key=&quot;title&quot;&gt;
+        &lt;el:english el:translate=&quot;false&quot;/&gt;
+      &lt;/el:string&gt;
+    &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/enigma_experimental/flood_demo_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: branches/1.0/data/levels/enigma_experimental/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/index.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/index.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;index xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:noNamespaceSchemaLocation=&quot;index.xsd&quot;&gt;
 
-  &lt;info enigma=&quot;1.00&quot; group=&quot;Development&quot; location=&quot;70300&quot; network=&quot;false&quot; owner=&quot;Enigma Team&quot; release=&quot;1&quot; revision=&quot;1&quot; title=&quot;Exp&quot;/&gt;
+  &lt;info enigma=&quot;1.00&quot; group=&quot;Development&quot; location=&quot;70300&quot; network=&quot;false&quot; owner=&quot;Enigma Team&quot; release=&quot;1&quot; revision=&quot;1&quot; title=&quot;Experimental&quot;/&gt;
 
   &lt;attributes/&gt;
 
@@ -13,10 +13,11 @@
     &lt;level _seq=&quot;5&quot; _title=&quot;Template 3&quot; _xpath=&quot;./template3&quot; author=&quot;AUTHOR&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;template3&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;6&quot; _title=&quot;Impulstest&quot; _xpath=&quot;./testimpulses&quot; author=&quot;Enigma Team&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;testimpulses&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;7&quot; _title=&quot;Wolf Among Sheep&quot; _xpath=&quot;./wolfamongsheep&quot; author=&quot;illmind&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;wolfamongsheep&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;8&quot; _title=&quot;Puzzle Labor&quot; _xpath=&quot;./randompuzzles&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;randompuzzles&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;9&quot; _title=&quot;Puzzle Demo&quot; _xpath=&quot;./puzzle_demo&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;puzzle_demo&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;8&quot; _title=&quot;Puzzle Labor&quot; _xpath=&quot;./puzzle_testarea_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;puzzle_testarea&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;9&quot; _title=&quot;Puzzle Demo&quot; _xpath=&quot;./puzzle_demo_2&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;puzzle_demo&quot; rel=&quot;2&quot; rev=&quot;2&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;10&quot; _title=&quot;All Items&quot; _xpath=&quot;./items&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;items&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;11&quot; _title=&quot;Impossible?&quot; _xpath=&quot;./wb2&quot; author=&quot;Jon 'WB' Sneyers&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;wb2_exp&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;12&quot; _title=&quot;Flood Demo&quot; _xpath=&quot;./flood_demo_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;flood_demo&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
   &lt;/levels&gt;
 
 &lt;/index&gt;

Modified: branches/1.0/data/levels/enigma_experimental/items.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/items.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/items.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -2,12 +2,12 @@
 &lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
-      &lt;el:identity el:title=&quot;All Items&quot; el:subtitle=&quot;&quot; el:id=&quot;items&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;experimental&quot;/&gt;
+      &lt;el:identity el:title=&quot;All Items&quot; el:subtitle=&quot;Testlevel with all Items&quot; el:id=&quot;items&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;stable&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
-      &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2006, 2007 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -24,7 +24,7 @@
 display.SetFollowMode(display.FOLLOW_SCROLLING)
 
 -- DESIGN --
-boden=&quot;fl-sahara&quot;
+boden=&quot;fl-black&quot;
 wand=&quot;st-glass&quot;
 
 -- FLOOR --
@@ -34,20 +34,18 @@
 draw_border(wand)
 
 -- ITEMS --
-set_item(&quot;it-document&quot;, 10, 6, {text=&quot;many many many many Tools !&quot;})
+set_item(&quot;it-document&quot;, 10, 6, {text=&quot;text1&quot;})
 
 -- ACTORS --
 actor1=set_actor(&quot;ac-blackball&quot;, 4.5,4.5, {player=0})
 
 -- Funktionen
 -- VARS
-itemlist={&quot;it-1pkillstone&quot;,&quot;it-2pkillstone&quot;,&quot;it-abyss&quot;,&quot;it-bag&quot;,&quot;it-banana&quot;,&quot;it-blackbomb&quot;,&quot;it-blackbomb_burning&quot;,&quot;it-blocker&quot;,&quot;it-blocker-new&quot;,&quot;it-booze&quot;,&quot;it-brake&quot;,&quot;it-bridge-oxyd&quot;,&quot;it-bridge-oxyd_active&quot;,&quot;it-brush&quot;,&quot;it-burnable&quot;,&quot;it-burnable_ash&quot;,&quot;it-burnable_burning&quot;,&quot;it-burnable_fireproof&quot;,&quot;it-burnable_ignited&quot;,&quot;it-changefloor&quot;,&quot;it-cherry&quot;,&quot;it-coffee&quot;,&quot;it-coin1&quot;,&quot;it-coin2&quot;,&quot;it-coin4&quot;,&quot;it-crack1&quot;,&quot;it-cross&quot;,&quot;it-debris&quot;,&quot;it-document&quot;,&quot;it-drop&quot;,&quot;it-dummy&quot;,&quot;it-dynamite&quot;,&quot;it-easykeepstone&quot;,&quot;it-easykillstone&quot;,&quot;it-explosion1&quot;,&quot;it-explosion2&quot;,&quot;it-explosion3&quot;,&quot;it-extinguisher&quot;,&quot;it-extinguisher_empty&quot;,&quot;it-extinguisher_medium&quot;,&quot;it-extralife&quot;,&quot;it-flagblack&quot;,&quot;it-flagwhite&quot;,&quot;it-floppy&quot;,&quot;it-glasses&quot;,&quot;it-glasses-broken&quot;,&quot;it-hammer&quot;,&quot;it-hill&quot;,&quot;it-hollow&quot;,&quot;it-hstrip&quot;,&quot;it-inversesensor&quot;,&quot;it-key&quot;,&quot;it-key_a&quot;,&quot;it-key_b&quot;,&quot;it-key_c&quot;,&quot;it-landmine&quot;,&quot;it-magicwand&quot;,&quot;it-magnet&quot;,&quot;it-magnet-off&quot;,&quot;it-magnet-on&quot;,&quot;it-odometer&quot;,&quot;it-oxyd5f&quot;,&quot;it-pencil&quot;,&quot;it-pin&quot;,&quot;it-pipe-e&quot;,&quot;it-pipe-es&quot;,&quot;it-pipe-h&quot;,&quot;it-pi!
 pe-n&quot;,&quot;it-pipe-ne&quot;,&quot;it-pipe-s&quot;,&quot;it-pipe-sw&quot;,&quot;it-pipe-v&quot;,&quot;it-pipe-w&quot;,&quot;it-pipe-wn&quot;,&quot;it-puller-e&quot;,&quot;it-puller-n&quot;,&quot;it-puller-s&quot;,&quot;it-puller-w&quot;,&quot;it-ring&quot;,&quot;it-rubberband&quot;,&quot;it-seed&quot;,&quot;it-seed_nowood&quot;,&quot;it-seed_volcano&quot;,&quot;it-sensor&quot;,&quot;it-shogun-l&quot;,&quot;it-shogun-m&quot;,&quot;it-shogun-s&quot;,&quot;it-signalfilter0&quot;,&quot;it-signalfilter1&quot;,&quot;it-spade&quot;,&quot;it-spoon&quot;,&quot;it-spring1&quot;,&quot;it-spring2&quot;,&quot;it-springboard&quot;,&quot;it-squashed&quot;,&quot;it-surprise&quot;,&quot;it-sword&quot;,&quot;it-tinyhill&quot;,&quot;it-tinyhollow&quot;,&quot;it-trigger&quot;,&quot;it-umbrella&quot;,&quot;it-vortex-closed&quot;,&quot;it-vortex-open&quot;,&quot;it-vstrip&quot;,&quot;it-weight&quot;,&quot;it-whitebomb&quot;,&quot;it-wormhole&quot;,&quot;it-wormhole-off&quot;,&quot;it-wrench&quot;,&quot;it-yinyang&quot;}
+itemlist={&quot;it-abyss&quot;, &quot;it-bag&quot;, &quot;it-banana&quot;, &quot;it-blackbomb&quot;, &quot;it-blocker&quot;, &quot;it-booze&quot;, &quot;it-booze-broken&quot;, &quot;it-brake&quot;, &quot;it-brush&quot;, &quot;it-burnable&quot;, &quot;it-burnable_ash&quot;, &quot;it-burnable_burning&quot;, &quot;it-burnable_fireproof&quot;, &quot;it-burnable_ignited&quot;, &quot;it-burnable_oil&quot;, &quot;it-changefloor&quot;, &quot;it-cherry&quot;, &quot;it-coffee&quot;, &quot;it-coin1&quot;, &quot;it-coin2&quot;, &quot;it-coin4&quot;, &quot;it-crack0&quot;, &quot;it-crack1&quot;, &quot;it-crack2&quot;, &quot;it-crack3&quot;, &quot;it-cross&quot;, &quot;it-death&quot;, &quot;it-document&quot;, &quot;it-drop&quot;, &quot;it-dynamite&quot;, &quot;it-extinguisher&quot;, &quot;it-extinguisher_medium&quot;, &quot;it-extinguisher_empty&quot;, &quot;it-extralife&quot;, &quot;it-flagblack&quot;, &quot;it-flagwhite&quot;, &quot;it-floppy&quot;, &quot;it-glasses&quot;, &quot;it-glasses-broken&quot;, &quot;it-hammer&quot;, &quot;it-hill&quot;, &quot;it-hollow&quot;, &quot;it-hstrip&quot;, &quot;it-inversesensor&quot;, &quot;it-key&quot;, &quot;it-landmine&quot;, &quot;it-magicwand&quot;, &quot;it-magnet&quot;, &quot;it-magnet-on&quot;, &quot;it-odometer&quot;, &quot;it-pencil&quot;, &quot;it-pin&quot;, &quot;it-pipe-e&quot;, &quot;it-pipe-es&quot;, &quot;it-pipe-h&quot;, &quot;it-pipe-n&quot;, &quot;it-pipe-ne&quot;, &quot;it-pipe-s&quot;, &quot;it-pipe-sw&quot;, &quot;it-pipe-v&quot;, &quot;it-pipe-w&quot;, &quot;it-pipe-wn&quot;, &quot;it-puller-n&quot;, &quot;it-puller-e&quot;, &quot;it-puller-s&quot;, &quot;it-puller-w&quot;,!
  &quot;it-ring&quot;, &quot;it-rubberband&quot;, &quot;it-seed&quot;, &quot;it-seed_nowood&quot;, &quot;it-seed_volcano&quot;, &quot;it-sensor&quot;, &quot;it-shogun-l&quot;, &quot;it-shogun-m&quot;, &quot;it-shogun-s&quot;, &quot;it-spade&quot;, &quot;it-spoon&quot;, &quot;it-spring1&quot;, &quot;it-spring2&quot;, &quot;it-springboard&quot;, &quot;it-squashed&quot;, &quot;it-surprise&quot;, &quot;it-sword&quot;, &quot;it-tinyhill&quot;, &quot;it-tinyhollow&quot;, &quot;it-trigger&quot;, &quot;it-umbrella&quot;, &quot;it-vortex-closed&quot;, &quot;it-vortex-open&quot;, &quot;it-vstrip&quot;, &quot;it-weight&quot;, &quot;it-whitebomb&quot;, &quot;it-wormhole&quot;, &quot;it-wormhole-off&quot;, &quot;it-wrench&quot;, &quot;it-yinyang&quot; }
 
-itemdoku={&quot;it-1pkillstone&quot;,&quot;it-2pkillstone&quot;,&quot;it-abyss&quot;,&quot;it-bag&quot;,&quot;it-banana&quot;,&quot;it-blackbomb&quot;,&quot;it-blackbomb_burning&quot;,&quot;it-blocker&quot;,&quot;it-blocker-new&quot;,&quot;it-booze&quot;,&quot;it-brake&quot;,&quot;it-bridge-oxyd&quot;,&quot;it-bridge-oxyd_active&quot;,&quot;it-brush&quot;,&quot;it-burnable&quot;,&quot;it-burnable_ash&quot;,&quot;it-burnable_burning&quot;,&quot;it-burnable_fireproof&quot;,&quot;it-burnable_ignited&quot;,&quot;it-changefloor&quot;,&quot;it-cherry&quot;,&quot;it-coffee&quot;,&quot;it-coin1( value )&quot;,&quot;it-coin2( value )&quot;,&quot;it-coin4( value )&quot;,&quot;it-crack{0..3} ( type fixed brittleness )&quot;,&quot;it-cross&quot;,&quot;it-debris&quot;,&quot;it-document( text )&quot;,&quot;it-drop&quot;,&quot;it-dummy&quot;,&quot;it-dynamite&quot;,&quot;it-easykeepstone&quot;,&quot;it-easykillstone&quot;,&quot;it-explosion1&quot;,&quot;it-explosion2&quot;,&quot;it-explosion3&quot;,&quot;it-extinguisher( load )&quot;,&quot;it-extinguisher_empty( load )&quot;,&quot;it-extinguisher_medium( load )&quot;,&quot;it-extralife&quot;,&quot;it-flagblack&quot;,&quot;it-flagwhite&quot;,&quot;it-floppy&quot;,&quot;it-glasses&quot;,&quot;it-glasses-broken&quot;,&quot;it-hammer&quot;,&quot;it-hill&quot;,&quot;it-hollow&quot;,&quot;it-hstrip&quot;,&quot;it-inversesensor&quot;,&quot;it-key( keycode )&quot;,&quot;it-key_a&quot;,&quot;it-key_b&quot;,&quot;it-key_c&quot;,&quot;it-landmine&quot;,&quot;it-magicwand&quot;,&quot;it-magnet( on strength range )!
 &quot;,&quot;it-magnet-off( on strength range )&quot;,&quot;it-magnet-on( on strength range )&quot;,&quot;it-odometer&quot;,&quot;it-oxyd5f&quot;,&quot;it-pencil&quot;,&quot;it-pin&quot;,&quot;it-pipe-e&quot;,&quot;it-pipe-es&quot;,&quot;it-pipe-h&quot;,&quot;it-pipe-n&quot;,&quot;it-pipe-ne&quot;,&quot;it-pipe-s&quot;,&quot;it-pipe-sw&quot;,&quot;it-pipe-v&quot;,&quot;it-pipe-w&quot;,&quot;it-pipe-wn&quot;,&quot;it-puller-e&quot;,&quot;it-puller-n&quot;,&quot;it-puller-s&quot;,&quot;it-puller-w&quot;,&quot;it-ring&quot;,&quot;it-rubberband( object1 object2 length strength )&quot;,&quot;it-seed&quot;,&quot;it-seed_nowood&quot;,&quot;it-seed_volcano&quot;,&quot;it-sensor&quot;,&quot;it-shogun-l&quot;,&quot;it-shogun-m&quot;,&quot;it-shogun-s&quot;,&quot;it-signalfilter0&quot;,&quot;it-signalfilter1&quot;,&quot;it-spade&quot;,&quot;it-spoon&quot;,&quot;it-spring1&quot;,&quot;it-spring2&quot;,&quot;it-springboard&quot;,&quot;it-squashed&quot;,&quot;it-surprise&quot;,&quot;it-sword&quot;,&quot;it-tinyhill&quot;,&quot;it-tinyhollow&quot;,&quot;it-trigger( invisible )&quot;,&quot;it-umbrella&quot;,&quot;it-vortex-closed( autoclose targetx targety )&quot;,&quot;it-vortex-open( autoclose targetx targety )&quot;,&quot;it-vstrip&quot;,&quot;it-weight&quot;,&quot;it-whitebomb&quot;,&quot;it-wormhole( on targetx targety strength range )&quot;,&quot;it-wormhole-off( on targetx targety strength range )&quot;,&quot;it-wrench&quot;,&quot;it-yinyang&quot;}
-
 ------
 nr=1
-for i=1,110 do
+for i=1,table.getn(itemlist) do
       nr = nr+1
       set_stone(&quot;st-switch&quot;,1+i,3, {action=&quot;callback&quot;, target=&quot;sw&quot;..nr, name=&quot;switch&quot;..nr})
       func = &quot;function sw&quot;..nr..&quot;() itnr=&quot;..i..&quot;; settem(itnr) ; end&quot;
@@ -56,7 +54,7 @@
 
 function settem(itnr)
  item= itemlist[itnr]
- itdo=itemdoku[itnr]
+ itdo=itemlist[itnr]
  set_item(item,1+itnr,5)
  set_item(&quot;it-document&quot;, 1+itnr, 1, {text=itdo})
 end
@@ -69,6 +67,9 @@
       &lt;el:string el:key=&quot;title&quot;&gt;
         &lt;el:english el:translate=&quot;false&quot;/&gt;
       &lt;/el:string&gt;
+      &lt;el:string el:key=&quot;text1&quot;&gt;
+        &lt;el:english el:translate=&quot;true&quot;&gt;Level with all items of Enigma 1.00!&lt;/el:english&gt;
+      &lt;/el:string&gt; 
     &lt;/el:i18n&gt;
   &lt;/el:protected&gt;
 &lt;/el:level&gt;

Deleted: branches/1.0/data/levels/enigma_experimental/puzzle_demo.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/puzzle_demo.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/puzzle_demo.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -1,153 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
-&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
-  &lt;el:protected&gt;
-    &lt;el:info el:type=&quot;level&quot;&gt;
-      &lt;el:identity el:title=&quot;Puzzle Demo&quot; el:subtitle=&quot;&quot; el:id=&quot;puzzle_demo&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;experimental&quot;/&gt;
-      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
-      &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
-      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
-      &lt;/el:compatibility&gt;
-      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
-      &lt;el:comments&gt;
-        &lt;el:code&gt;Lua 5.1 and XML converted by Leveladministrators&lt;/el:code&gt;
-      &lt;/el:comments&gt;
-      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
-    &lt;/el:info&gt;
-    &lt;el:luamain&gt;&lt;![CDATA[
--- GENERAL --
-levelw = 39
-levelh = 25
-
-create_world(levelw, levelh)
-
-function renderLine( line, pattern)
-    for i=1, strlen(pattern) do
-        local c = strsub( pattern, i, i)
-          if c==&quot;x&quot; then
-            --oxyd(i-1,line)
-                elseif c==&quot;#&quot; then
-                   set_stone(&quot;st-glass&quot;,i-1,line)
-                   set_floor(&quot;fl-sahara&quot;,i-1,line)
-                elseif c==&quot; &quot; then
-                   set_floor(&quot;fl-sahara&quot;,i-1,line)
-        end
-    end    
-end
-
-renderLine(00 , &quot;#######################################&quot;)
-renderLine(01 , &quot;#                  #                  #&quot;)
-renderLine(02 , &quot;#                  #                  #&quot;)
-renderLine(03 , &quot;#                  #                  #&quot;)
-renderLine(04 , &quot;#                                     #&quot;)
-renderLine(05 , &quot;#                                     #&quot;)
-renderLine(06 , &quot;#                                     #&quot;)
-renderLine(07 , &quot;#                                     #&quot;)
-renderLine(08 , &quot;#                                     #&quot;)
-renderLine(09 , &quot;#                  #                  #&quot;)
-renderLine(10 , &quot;#                  #                  #&quot;)
-renderLine(11 , &quot;#                  #                  #&quot;)
-renderLine(12 , &quot;######        ###########        ######&quot;)
-renderLine(13 , &quot;#                  #                  #&quot;)
-renderLine(14 , &quot;#                  #                  #&quot;)
-renderLine(15 , &quot;#                  #                  #&quot;)
-renderLine(16 , &quot;#                                     #&quot;)
-renderLine(17 , &quot;#                                     #&quot;)
-renderLine(18 , &quot;#                                     #&quot;)
-renderLine(19 , &quot;#                                     #&quot;)
-renderLine(20 , &quot;#                                     #&quot;)
-renderLine(21 , &quot;#                  #                  #&quot;)
-renderLine(22 , &quot;#                  #                  #&quot;)
-renderLine(23 , &quot;#                  #                  #&quot;)
-renderLine(24 , &quot;#######################################&quot;)
-
-oxyd_shuffle()
-
--- Special
-set_item(&quot;it-document&quot;, 3, 8, {text=&quot;Welcome to the demonstration of libpuzzle version 0.97&quot;})
-set_item(&quot;it-document&quot;, 3, 9, {text=&quot;Please also look at the source code of the lib and of this level.&quot;})
-set_actor(&quot;ac-blackball&quot;, 2.5,7.5, {player=0}) 
-set_item(&quot;it-magicwand&quot;, 2, 7) 
-
-set_item(&quot;it-document&quot;, 11, 7, {text=&quot;Room 1: Some general things you can do with libpuzzle&quot;})
-set_item(&quot;it-document&quot;, 8, 18, {text=&quot;The red puzzles, generated with permutations, are ALL solvable.&quot;})
-set_item(&quot;it-document&quot;, 11, 18, {text=&quot;The blue ones, generated with random, aren't!&quot;})
-set_item(&quot;it-document&quot;, 28, 8, {text=&quot;Room 2: Every figure in here, the +/T/L, all are solvable because they are generated  from the solved puzzle with permutations.&quot;})
-set_item(&quot;it-document&quot;, 23, 16, {text=&quot;Room 4: Some things, you can do with pseude pieces: open puzzle clusters...&quot;})
-
-
---first room:
---rings, treppe, figure1...
---shows some general things
---&quot;normal&quot; use of the lib, no WORLD variables or default arguments...
-
-  --ring1
-  puzzle({{1,1,1},{1,0,1},{1,1,1}},2,2,&quot;red&quot;,&quot;no&quot;)
-
-  puzzle({{1,1,1,0},{1,0,0,1},{1,0,1,1},{1,1,1,0}},10,6,&quot;red&quot;,&quot;no&quot;)
-
-  puzzle({{1,0,0},{1,1,0},{0,1,1}},10,2,&quot;red&quot;,&quot;yes&quot;)
-
-  puzzle({{1,1,1},{1,1,1},{1,1,1}},14,2,&quot;red&quot;,&quot;no&quot;)
-
-  puzzle({{0,0,1,0,0},{0,1,1,1,0},{1,1,0,1,1}},14,9,&quot;blue&quot;,&quot;no&quot;)
-
-  puzzle({{0,0,1,0},{0,1,1,0},{0,1,0,0},{0,1,1,1},{0,0,0,1},{1,1,1,1}},5, 4,&quot;blue&quot;,&quot;no&quot;)
-
---second room:
---every puzzle here is solvable, generated with permutations
---configured with the WORLD Variables:
-  art=&quot;2&quot;
-  must_shuffle=1
-  puzzle({{0,1,0},{1,1,1},{0,1,0}},21,1)
-  puzzle({{0,1,0},{1,1,1},{0,1,0}},25,1)
-  puzzle({{0,1,0},{1,1,1},{0,1,0}},30,1)
-  puzzle({{0,1,0},{1,1,1},{0,1,0}},34,1)
-
-  puzzle({{1,1,1},{0,1,0},{0,1,0}},21,5)
-  puzzle({{1,1,1},{0,1,0},{0,1,0}},25,5)
-  puzzle({{1,1,1},{0,1,0},{0,1,0}},30,5)
-  puzzle({{1,1,1},{0,1,0},{0,1,0}},34,5)
-
-  puzzle({{1,0,0},{1,0,0},{1,1,1}},21,9)
-  puzzle({{1,0,0},{1,0,0},{1,1,1}},25,9)
-  puzzle({{1,0,0},{1,0,0},{1,1,1}},30,9)
-  puzzle({{1,0,0},{1,0,0},{1,1,1}},34,9)
-
-
---third room:
---shows the difference between random and permutation shuffle.
-
-  must_shuffle=1
-  shuffle_method=&quot;random&quot;
-  puzzle({{1},{1},{1}},11,20,&quot;blue&quot;)
-  puzzle({{1},{1},{1},{1}},13,19,&quot;blue&quot;)
-  puzzle({{1},{1},{1},{1},{1}},15,18,&quot;blue&quot;)
-  puzzle({{1},{1},{1},{1},{1},{1}},17,17,&quot;blue&quot;)
-
-  shuffle_method=&quot;permutation&quot;
-  puzzle({{1},{1},{1}},8,14,&quot;red&quot;)
-  puzzle({{1},{1},{1},{1}},6,14,&quot;red&quot;)
-  puzzle({{1},{1},{1},{1},{1}},4,14,&quot;red&quot;)
-  puzzle({{1},{1},{1},{1},{1},{1}},2,14,&quot;red&quot;)
-
---4. room:
---shows the wonderfull possibilities of pseudo_pieces.
-
-  puzzle({{0,2,0,2,0},{2,1,1,1,2},{0,1,0,1,0},{2,1,1,1,2},{0,2,0,2,0}},21,14,&quot;blue&quot;,&quot;no&quot;)
-
-  puzzle({{1,1,2,1},{1,0,0,1},{1,2,1,1}},26,20,&quot;blue&quot;,&quot;no&quot;)
-
-  puzzle({{1,1,1},{1,2,1},{1,1,1}},27,14,&quot;red&quot;,&quot;no&quot;)
-
-  puzzle({{1,1,1,1},{2,0,0,1},{0,2,0,1},{1,1,1,1},{0,1,0,0},{0,1,0,2},{2,1,1,1}},32,15,&quot;blue&quot;,&quot;no&quot;)
-    ]]&gt;&lt;/el:luamain&gt;
-    &lt;el:i18n&gt;
-      &lt;el:string el:key=&quot;title&quot;&gt;
-        &lt;el:english el:translate=&quot;false&quot;/&gt;
-      &lt;/el:string&gt;
-    &lt;/el:i18n&gt;
-  &lt;/el:protected&gt;
-&lt;/el:level&gt;

Added: branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -0,0 +1,242 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected&gt;
+    &lt;el:info el:type=&quot;level&quot;&gt;
+      &lt;el:identity el:title=&quot;Puzzle Demo&quot; el:subtitle=&quot;Demolevel for libpuzzle&quot; el:id=&quot;puzzle_demo&quot;/&gt;
+      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;2&quot; el:status=&quot;stable&quot;/&gt;
+      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2006, 2007 Raoul Bourquin&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
+      &lt;el:comments&gt;
+        &lt;el:code&gt;Lua 5.1 and XML converted by Leveladministrators&lt;/el:code&gt;
+      &lt;/el:comments&gt;
+      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+-- GENERAL --
+levelw = 39
+levelh = 37
+
+create_world(levelw, levelh)
+
+function renderLine( line, pattern)
+    for i=1, strlen(pattern) do
+        local c = strsub( pattern, i, i)
+          if c==&quot;x&quot; then
+            --oxyd(i-1,line)
+                elseif c==&quot;#&quot; then
+                   set_stone(&quot;st-glass&quot;,i-1,line)
+                   set_floor(&quot;fl-black&quot;,i-1,line)
+                elseif c==&quot; &quot; then
+                   set_floor(&quot;fl-black&quot;,i-1,line)
+        end
+    end    
+end
+
+renderLine(00 , &quot;#######################################&quot;)
+renderLine(01 , &quot;#                  #                  #&quot;)
+renderLine(02 , &quot;#                  #                  #&quot;)
+renderLine(03 , &quot;#                  #                  #&quot;)
+renderLine(04 , &quot;#                                     #&quot;)
+renderLine(05 , &quot;#                                     #&quot;)
+renderLine(06 , &quot;#                                     #&quot;)
+renderLine(07 , &quot;#                                     #&quot;)
+renderLine(08 , &quot;#                                     #&quot;)
+renderLine(09 , &quot;#                  #                  #&quot;)
+renderLine(10 , &quot;#                  #                  #&quot;)
+renderLine(11 , &quot;#                  #                  #&quot;)
+renderLine(12 , &quot;######        ###########        ######&quot;)
+renderLine(13 , &quot;#                  #                  #&quot;)
+renderLine(14 , &quot;#                  #                  #&quot;)
+renderLine(15 , &quot;#                  #                  #&quot;)
+renderLine(16 , &quot;#                                     #&quot;)
+renderLine(17 , &quot;#                                     #&quot;)
+renderLine(18 , &quot;#                                     #&quot;)
+renderLine(19 , &quot;#                                     #&quot;)
+renderLine(20 , &quot;#                                     #&quot;)
+renderLine(21 , &quot;#                  #                  #&quot;)
+renderLine(22 , &quot;#                  #                  #&quot;)
+renderLine(23 , &quot;#                  #                  #&quot;)
+renderLine(24 , &quot;######        ###########        ######&quot;)
+renderLine(25 , &quot;#                  #                  #&quot;)
+renderLine(26 , &quot;#                  #                  #&quot;)
+renderLine(27 , &quot;#                  #                  #&quot;)
+renderLine(28 , &quot;#                                     #&quot;)
+renderLine(29 , &quot;#                                     #&quot;)
+renderLine(30 , &quot;#                                     #&quot;)
+renderLine(31 , &quot;#                                     #&quot;)
+renderLine(32 , &quot;#                                     #&quot;)
+renderLine(33 , &quot;#                  #                  #&quot;)
+renderLine(34 , &quot;#                  #                  #&quot;)
+renderLine(35 , &quot;#                  #                  #&quot;)
+renderLine(36 , &quot;#######################################&quot;)
+
+oxyd_shuffle()
+
+-- Special
+set_item(&quot;it-document&quot;, 3, 8, {text=&quot;Welcome to the demonstration of libpuzzle version 2&quot;})
+set_item(&quot;it-document&quot;, 3, 9, {text=&quot;Please also look at the source code of the lib and of this level.&quot;})
+set_actor(&quot;ac-blackball&quot;, 2.5,7.5, {player=0}) 
+set_item(&quot;it-magicwand&quot;, 2, 7) 
+
+set_item(&quot;it-document&quot;, 11, 7, {text=&quot;Room 1: Some general things you can do with libpuzzle&quot;})
+set_item(&quot;it-document&quot;, 8, 18, {text=&quot;The red puzzles, generated with permutations, are ALL solvable.&quot;})
+set_item(&quot;it-document&quot;, 11, 18, {text=&quot;The blue ones, generated with random, aren't!&quot;})
+set_item(&quot;it-document&quot;, 28, 8, {text=&quot;Room 2: Every figure in here, the +/T/L, all are solvable because they are generated  from the solved puzzle with permutations.&quot;})
+set_item(&quot;it-document&quot;, 23, 16, {text=&quot;Room 4: Some things, you can do with pseude pieces: open puzzle clusters ...&quot;})
+set_item(&quot;it-document&quot;, 8, 30, {text=&quot;Room 5: Some things, you can do with Bigbricks ...&quot;})
+set_item(&quot;it-document&quot;, 26, 27, {text=&quot;Room 6: Some things, you can do with Bigbluesandstones ...&quot;})
+
+
+-- First room:
+-- Shows some general figures with puzzlestones
+
+  --ring1
+  puzzle({&quot;###&quot;,
+          &quot;# #&quot;,
+          &quot;###&quot;},{2,2},&quot;redpuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;### &quot;,
+          &quot;#  #&quot;,
+          &quot;# ##&quot;,
+          &quot;### &quot;},{10,6},&quot;redpuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;#  &quot;,
+          &quot;## &quot;,
+          &quot; ##&quot;},{10,2},&quot;redpuzzle&quot;,&quot;random&quot;)
+
+  puzzle({&quot;###&quot;,
+          &quot; # &quot;,
+          &quot;###&quot;},{14,2},&quot;bluepuzzle&quot;,&quot;permutation&quot;)
+
+  puzzle({&quot;  #  &quot;,
+          &quot; ### &quot;,
+          &quot;## ##&quot;},{14,9},&quot;bluepuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;  # &quot;,
+          &quot; ## &quot;,
+          &quot; #  &quot;,
+          &quot; ###&quot;,
+          &quot;   #&quot;,
+          &quot;####&quot;},{5,4},&quot;bluepuzzle&quot;,&quot;none&quot;)
+
+-- Second room:
+-- Every puzzle here is solvable, generated with permutations
+
+  puzzle({&quot; # &quot;,&quot;###&quot;,&quot; # &quot;},{21,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot; # &quot;,&quot;###&quot;,&quot; # &quot;},{25,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot; # &quot;,&quot;###&quot;,&quot; # &quot;},{30,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot; # &quot;,&quot;###&quot;,&quot; # &quot;},{34,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+  puzzle({&quot;###&quot;,&quot; # &quot;,&quot; # &quot;},{21,5},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;###&quot;,&quot; # &quot;,&quot; # &quot;},{25,5},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;###&quot;,&quot; # &quot;,&quot; # &quot;},{30,5},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;###&quot;,&quot; # &quot;,&quot; # &quot;},{34,5},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+  puzzle({&quot;#  &quot;,&quot;#  &quot;,&quot;###&quot;},{21,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;#  &quot;,&quot;#  &quot;,&quot;###&quot;},{25,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;#  &quot;,&quot;#  &quot;,&quot;###&quot;},{30,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;#  &quot;,&quot;#  &quot;,&quot;###&quot;},{34,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+-- Third room:
+-- Shows the difference between random and permutation shuffle.
+
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{11,20},&quot;bluepuzzle&quot;,&quot;random&quot;)
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{13,19},&quot;bluepuzzle&quot;,&quot;random&quot;)
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{15,18},&quot;bluepuzzle&quot;,&quot;random&quot;)
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{17,17},&quot;bluepuzzle&quot;,&quot;random&quot;)
+
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{8,14},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{6,14},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{4,14},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+  puzzle({&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;},{2,14},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+-- Fourth room:
+-- Shows the wonderfull possibilities of pseudo_pieces.
+
+  puzzle({&quot; + + &quot;,
+          &quot;+###+&quot;,
+          &quot; # # &quot;,
+          &quot;+###+&quot;,
+          &quot; + + &quot;},{21,14},&quot;bluepuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;##+#&quot;,&quot;#  #&quot;,&quot;#+##&quot;},{26,20},&quot;bluepuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;###&quot;,&quot;#+#&quot;,&quot;###&quot;},{27,14},&quot;redpuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;####&quot;,
+          &quot;+  #&quot;,
+          &quot; + #&quot;,
+          &quot;####&quot;,
+          &quot; #  &quot;,
+          &quot; # +&quot;,
+          &quot;+###&quot;},{32,15},&quot;bluepuzzle&quot;,&quot;none&quot;)
+
+  puzzle({&quot;# #&quot;,
+          &quot; # &quot;,
+          &quot;# #&quot;},{22,20},&quot;bluepuzzle&quot;,&quot;permutation&quot;)
+
+-- 5. room:
+-- Things, you can do with bigbricks.
+
+  puzzle({&quot;###&quot;,&quot;# #&quot;,&quot;  #&quot;,&quot;###&quot;},{3,26},&quot;bigbrick&quot;,&quot;none&quot;)
+
+  puzzle({&quot;### #&quot;,
+          &quot;#   #&quot;,
+          &quot;# ###&quot;},{3,32},&quot;bigbrick&quot;,&quot;none&quot;)
+
+  puzzle({&quot;###&quot;,&quot;# #&quot;},{9,33},&quot;bigbrick&quot;,&quot;random&quot;)
+
+  puzzle({&quot;#    &quot;,
+          &quot;##   &quot;,
+          &quot; ##  &quot;,
+          &quot;  ## &quot;,
+          &quot;   ##&quot;},{9,27},&quot;bigbrick&quot;,&quot;none&quot;)
+
+  puzzle({&quot; # # &quot;,
+          &quot;#####&quot;,
+          &quot; # # &quot;},{12,26},&quot;bigbrick&quot;,&quot;none&quot;)
+
+  puzzle({&quot;###&quot;,
+          &quot;###&quot;,
+          &quot;###&quot;},{15,32},&quot;bigbrick&quot;,&quot;none&quot;)
+
+-- 6. room:
+-- Things, you can do with bigbluesandstones.
+
+  puzzle({&quot; ##&quot;,
+          &quot;# #&quot;,
+          &quot;###&quot;},{21,26},&quot;bigbluesand&quot;,&quot;none&quot;)
+
+  puzzle({&quot;  ####&quot;,
+          &quot;  #  #&quot;,
+          &quot;#### #&quot;,
+          &quot;# ####&quot;,
+          &quot;#  #  &quot;,
+          &quot;####  &quot;},{20,30},&quot;bigbluesand&quot;,&quot;none&quot;)
+
+  puzzle({&quot;## ### ##&quot;,
+          &quot; ### ### &quot;},{28,26},&quot;bigbluesand&quot;,&quot;none&quot;)
+
+  puzzle({&quot;## ##&quot;,
+          &quot; ### &quot;,
+          &quot;## ##&quot;},{29,30},&quot;bigbluesand&quot;,&quot;none&quot;)
+
+  puzzle({&quot;  ##+&quot;,
+          &quot; ##  &quot;,
+          &quot;##   &quot;,
+          &quot;#    &quot;,
+          &quot;+    &quot;},{34,32},&quot;bigbluesand&quot;,&quot;none&quot;)
+
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+      &lt;el:string el:key=&quot;title&quot;&gt;
+        &lt;el:english el:translate=&quot;false&quot;/&gt;
+      &lt;/el:string&gt;
+    &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/enigma_experimental/puzzle_demo_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: branches/1.0/data/levels/enigma_experimental/puzzle_testarea_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/puzzle_testarea_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/puzzle_testarea_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -0,0 +1,187 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected&gt;
+    &lt;el:info el:type=&quot;level&quot;&gt;
+      &lt;el:identity el:title=&quot;Puzzle Labor&quot; el:subtitle=&quot;Testlevel to examine new puzzles&quot; el:id=&quot;puzzle_testarea&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;stable&quot;/&gt;
+      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2005, 2007 Raoul Bourquin&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
+      &lt;el:comments&gt;
+        &lt;el:code&gt;Lua 5.1 and XML converted by Leveladministrators&lt;/el:code&gt;
+      &lt;/el:comments&gt;
+      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+levelw = 39
+levelh = 13
+create_world(levelw, levelh)
+enigma.ConserveLevel = FALSE
+
+-- Design --
+boden=&quot;fl-sahara&quot;
+wand=&quot;st-glass&quot;
+boden2=&quot;fl-black&quot;
+
+-- FLOOR --
+fill_floor(boden, 0,0,levelw,levelh)
+fill_floor(boden2,7,3,8,6)
+
+-- STONES --
+draw_border(wand)
+draw_stones(wand,{19,1},{0,1},11)
+
+-- ACTORS --
+local ac1=set_actor(&quot;ac-blackball&quot;, 1.5,1.5, {player=0, essential = 1})
+local ac2=set_actor(&quot;ac-whiteball&quot;, 21.5,2.5, {player=1, essential = 1})
+
+-- ITEMS
+set_item(&quot;it-yinyang&quot;,1,1)
+set_item(&quot;it-yinyang&quot;,21,2)
+
+set_item(&quot;it-document&quot;,17,11,{text=&quot;Clear&quot;})
+
+set_item(&quot;it-document&quot;,21,5,{text=&quot;With the switches at the right, you can determine the layout of the desired puzzle.&quot;})
+set_item(&quot;it-document&quot;,21,6,{text=&quot;Switch up means stone, switch down means no stone at that position.&quot;})
+set_item(&quot;it-document&quot;,21,7,{text=&quot;After you set up the layout, hit the switch at the top and return to the left screen.&quot;})
+set_item(&quot;it-document&quot;,21,1,{text=&quot;Store the figure the draw it.&quot;})
+set_item(&quot;it-document&quot;,21,11,{text=&quot;Reset all switches.&quot;})
+
+set_item(&quot;it-document&quot;,1,10,{text=&quot;Which Stonetype? Possible are: \&quot;st-puzzle\&quot;, \&quot;st-puzzle2\&quot;, \&quot;st-bigbrick\&quot; or \&quot;st-bigbluesand\&quot;.&quot;})
+set_item(&quot;it-document&quot;,17,1,{text=&quot;Draw the puzzle unshuffled. (shuffle_method = \&quot;none\&quot;).&quot;})
+set_item(&quot;it-document&quot;,17,3,{text=&quot;Draw the puzzle shuffled with the \&quot;random\&quot; method.&quot;})
+set_item(&quot;it-document&quot;,17,5,{text=&quot;Draw the puzzle shuffled with the \&quot;permutation\&quot; method.&quot;})
+
+set_item(&quot;it-magicwand&quot;,2,10)
+--------------------------------------------------------------------------------
+-- SWITCHES, left room:
+-- Switches to draw the puzzle:
+set_stone(&quot;st-switch&quot;, 18, 1, {action=&quot;callback&quot;,target=&quot;draw_none&quot;,name=&quot;draw1&quot;})
+set_stone(&quot;st-switch&quot;, 18, 3, {action=&quot;callback&quot;,target=&quot;draw_random&quot;,name=&quot;draw2&quot;})
+set_stone(&quot;st-switch&quot;, 18, 5, {action=&quot;callback&quot;,target=&quot;draw_permutation&quot;,name=&quot;draw3&quot;})
+
+-- Clear the canvas:
+set_stone(&quot;st-switch&quot;, 18, 11, {action=&quot;callback&quot;,target=&quot;remove_puzzle&quot;,name=&quot;clear&quot;})
+
+set_stone(&quot;st-switch&quot;, 1, 11, {action=&quot;callback&quot;,target=&quot;stone_kind_switch&quot;,name=&quot;kind&quot;})
+
+-- Right room:
+set_stone(&quot;st-switch&quot;, 20, 1, {action=&quot;callback&quot;,target=&quot;write_values&quot;,name=&quot;w_v&quot;})
+set_stone(&quot;st-switch&quot;, 20, 11, {action=&quot;callback&quot;,target=&quot;clear_values&quot;,name=&quot;c_v&quot;})
+
+-- Generate the switches and functions
+nr=0
+array={}
+for i=1,6 do
+    for j=1,8 do
+        nr = nr+1
+        set_stone(&quot;st-switch&quot;,21+2*j,-1+2*i, {action=&quot;callback&quot;, target=&quot;sw&quot;..nr, name=&quot;swi&quot;..nr})
+
+        func = &quot;function sw&quot;..nr..&quot;() k=&quot;..nr..&quot;; if array[k]==0 then array[k]=1 else array[k]=0 end end&quot;
+        dostring(func)
+        array[nr] = 0
+   end
+end
+--------------------------------------------------------------------------------
+---------------------
+--WORLD-VALUES:
+defaultmap = {&quot; # # &quot;,
+              &quot;#####&quot;,
+              &quot; # # &quot;}
+
+stone_kind = {&quot;redpuzzle&quot;,&quot;bluepuzzle&quot;,&quot;bigbrick&quot;,&quot;bigbluesand&quot;}
+kind_pointer = 1
+
+charmap = defaultmap
+
+-- Functions to draw the puzzle:
+function draw_none()
+    puzzle(charmap,{7,3},stone_kind[kind_pointer],&quot;none&quot;)
+end
+
+function draw_random()
+    puzzle(charmap,{7,3},stone_kind[kind_pointer],&quot;random&quot;)
+end
+
+function draw_permutation()
+    puzzle(charmap,{7,3},stone_kind[kind_pointer],&quot;permutation&quot;)
+end
+
+-- Clear:
+function remove_puzzle()
+    for i=1,8 do
+        for j=1,6 do
+            enigma.KillStone(6+i,2+j)
+        end
+    end
+end
+
+-- Chose the kind
+function stone_kind_switch()
+    kind_pointer = kind_pointer +1
+    if kind_pointer &gt; 4 then
+        kind_pointer = 1
+    end
+    set_item(&quot;it-document&quot;,2,11,{text=&quot;Stonekind set to: &quot;..stone_kind[kind_pointer]})
+end
+--------------------------------------------------------------------------------
+-- Reset the switches
+function clear_values()
+    matrix={{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}}
+    for o=1,48 do
+        enigma.SendMessage(enigma.GetNamedObject(&quot;swi&quot;..o),&quot;off&quot;,nil)
+    end
+end
+
+-- Store the switchvalues
+function write_values()
+    matrix={{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}}
+    local x = 1
+    local y = 1
+    local h = 0
+    for h=1, 48 do
+        matrix[y][x] = array[h]
+        if x == 8 then
+            x = 0
+            y = y + 1
+        end
+        x = x+1
+    end
+    gen_charmap()
+end
+
+-- Generate the charmap
+function gen_charmap()
+    charmap = {}
+    local checker = 0
+    local i, j = 0, 0
+    for i=1, 6 do
+        charmap[i]=&quot;&quot;
+        local buffer = &quot;&quot;
+        for j=1, 8 do
+            if matrix[i][j] == 1 then
+                checker = 1
+                buffer = buffer..&quot;#&quot;
+            elseif matrix[i][j] == 0 then
+                buffer = buffer..&quot; &quot;
+            end
+        end
+        charmap[i] = buffer
+    end
+    if checker == 0 then
+        -- If we leave this out, libpuzzle would raise an error!
+        charmap = defaultmap
+    end
+end
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+      &lt;el:string el:key=&quot;title&quot;&gt;
+        &lt;el:english el:translate=&quot;false&quot;/&gt;
+      &lt;/el:string&gt;
+    &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/enigma_experimental/puzzle_testarea_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: branches/1.0/data/levels/enigma_experimental/randompuzzles.xml
===================================================================
--- branches/1.0/data/levels/enigma_experimental/randompuzzles.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_experimental/randompuzzles.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -1,164 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
-&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
-  &lt;el:protected&gt;
-    &lt;el:info el:type=&quot;level&quot;&gt;
-      &lt;el:identity el:title=&quot;Puzzle Labor&quot; el:subtitle=&quot;&quot; el:id=&quot;randompuzzles&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;experimental&quot;/&gt;
-      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
-      &lt;el:copyright&gt;Copyright &#169; 2005 Raoul Bourquin&lt;/el:copyright&gt;
-      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
-      &lt;/el:compatibility&gt;
-      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
-      &lt;el:comments&gt;
-        &lt;el:code&gt;Lua 5.1 and XML converted by Leveladministrators&lt;/el:code&gt;
-      &lt;/el:comments&gt;
-      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
-    &lt;/el:info&gt;
-    &lt;el:luamain&gt;&lt;![CDATA[
-levelw = 39
-levelh = 13
-create_world(levelw, levelh)
-enigma.ConserveLevel = FALSE
-
--- Design --
-boden=&quot;fl-sahara&quot;
-wand=&quot;st-glass&quot;
-boden2=&quot;fl-black&quot;
-
--- FLOOR --
-fill_floor(boden, 0,0,levelw,levelh)
-fill_floor(boden2,7,3,8,6)
-
--- STONES --
-draw_border(wand)
-draw_stones(wand,{19,1},{0,1},11)
-
-set_stone(&quot;st-switch&quot;, 18, 1, {action=&quot;callback&quot;,target=&quot;wrap1&quot;,name=&quot;sg&quot;})
-set_stone(&quot;st-switch&quot;, 18, 2, {action=&quot;callback&quot;,target=&quot;wrap2&quot;,name=&quot;sg&quot;})
-set_stone(&quot;st-switch&quot;, 18, 11, {action=&quot;callback&quot;,target=&quot;del&quot;,name=&quot;sd&quot;})
-
-set_stone(&quot;st-switch&quot;, 20, 1, {action=&quot;callback&quot;,target=&quot;write_vals&quot;,name=&quot;sw&quot;})
-set_stone(&quot;st-switch&quot;, 20, 11, {action=&quot;callback&quot;,target=&quot;leere&quot;,name=&quot;sl&quot;})
-
-set_stone(&quot;st-switch&quot;, 1, 11, {action=&quot;callback&quot;,target=&quot;was&quot;,name=&quot;art_steine_switch&quot;})
-
-set_stone(&quot;st-switch&quot;, 3, 11, {action=&quot;callback&quot;,target=&quot;method&quot;,name=&quot;shuffle_method&quot;})
-
--- ACTORS --
-local ac1=set_actor(&quot;ac-blackball&quot;, 1.5,1.5, {player=0})
-local ac2=set_actor(&quot;ac-whiteball&quot;, 21.5,2.5, {player=1})
-
--- ITEMS
-set_item(&quot;it-yinyang&quot;,1,1)
-set_item(&quot;it-yinyang&quot;,21,2)
-
-set_item(&quot;it-document&quot;,17,1,{text=&quot;Zeichne Figur mit durchmixten Teilen&quot;})
-set_item(&quot;it-document&quot;,17,2,{text=&quot;Zeichne Figur mit nicht durchmixten Teilen&quot;})
-set_item(&quot;it-document&quot;,17,11,{text=&quot;L&#246;sche Reste auf dem Experimentierplatz&quot;})
-
-set_item(&quot;it-document&quot;,21,1,{text=&quot;Speichere Figur zum anschliessenden Zeichnen&quot;})
-set_item(&quot;it-document&quot;,21,11,{text=&quot;Reset aller Schalter&quot;})
-
-set_item(&quot;it-document&quot;,1,10,{text=&quot;Rote oder Blaue Puzzlesteine ?&quot;})
-set_item(&quot;it-document&quot;,3,10,{text=&quot;shuffle_method = permutation oder random&quot;})
-
-
-set_item(&quot;it-magicwand&quot;,2,11)
-
----------------------
--- Zeichne Schalter und Eventhandler dazu:
-nr=0
-array={}
-for i=1,6 do
-   for j=1,8 do
-      nr = nr+1
-      set_stone(&quot;st-switch&quot;,21+2*j,-1+2*i, {action=&quot;callback&quot;, target=&quot;sw&quot;..nr, name=&quot;swi&quot;..nr})
-
-      func = &quot;function sw&quot;..nr..&quot;() k=&quot;..nr..&quot;; if array[k]==0 then array[k]=1 else array[k]=0 end end&quot;
-      dostring(func)
-      array[nr] = 0
-   end
-end
----------------------
---WORLD-VALUES:
-art_steine=&quot;red&quot;
-shuffle_method=&quot;permutation&quot;
-
--- Zeichne die Figur mit durchmischten Teilen
-function wrap1()
- must_shuffle=1
- puzzle(matrix,7,3,art_steine)
-end
-
--- Zeichne die Figur geloest
-function wrap2()
- must_shuffle=0
- puzzle(matrix,7,3,art_steine)
-end
-
--- Setzte die Schalter zurueck
-function leere()
- for o=1,48 do
-  enigma.SendMessage(enigma.GetNamedObject(&quot;swi&quot;..o),&quot;off&quot;,nil)
- end
-end
-
--- loesche nicht loesbare Uebereste
-function del()
- for i=1,8 do
-  for j=1,6 do
-   enigma.KillStone(6+i,2+j)
-  end
- end
-end
-
---welche art steine ?
-function was()
- if art_steine==&quot;blue&quot; then 
-  art_steine=&quot;red&quot;
- else
-  art_steine=&quot;blue&quot;
- end
- return art_steine
-end
-
---welche shuffle_,ethod ?
-function method()
- if shuffle_method==&quot;permutation&quot; then 
-  shuffle_method=&quot;random&quot;
- else
-  shuffle_method=&quot;permutation&quot;
- end
- set_item(&quot;it-document&quot;,4,11,{text=&quot;set to &quot;..shuffle_method})
-end
-
-
--- Speichere die Schalter
-function write_vals()
-matrix={{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}}
- zz=1
- zs=1
-
- for h=1,48 do
-   matrix[zz][zs]=array[h]
-
-  if zs==8 then
-   zs=0
-   zz=zz+1
-  end
-  zs=zs+1
- end
-end
-
--- Initial Code execution:
-write_vals()
-    ]]&gt;&lt;/el:luamain&gt;
-    &lt;el:i18n&gt;
-      &lt;el:string el:key=&quot;title&quot;&gt;
-        &lt;el:english el:translate=&quot;false&quot;/&gt;
-      &lt;/el:string&gt;
-    &lt;/el:i18n&gt;
-  &lt;/el:protected&gt;
-&lt;/el:level&gt;

Modified: branches/1.0/data/levels/enigma_oxyd/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_oxyd/index.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_oxyd/index.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -36,7 +36,7 @@
     &lt;level _seq=&quot;28&quot; _title=&quot;Moonwalking&quot; _xpath=&quot;./oxyd52_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;20060629ulf006&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;29&quot; _title=&quot;Scrooge&quot; _xpath=&quot;./oxyd53_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried100&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;30&quot; _title=&quot;Soaring High&quot; _xpath=&quot;./oxyd54_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried101&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;31&quot; _title=&quot;Oxyd 70&quot; _xpath=&quot;./oxyd70_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd70&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;31&quot; _title=&quot;Oxyd 70&quot; _xpath=&quot;./oxyd70_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd70&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;32&quot; _title=&quot;Oxyd 77&quot; _xpath=&quot;./oxyd77_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd77&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;33&quot; _title=&quot;Oxyd 79&quot; _xpath=&quot;./oxyd79_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;20070103ulf015&quot; rel=&quot;1&quot; rev=&quot;68&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;34&quot; _title=&quot;Oxyd 90&quot; _xpath=&quot;./oxyd90_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd90&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -51,12 +51,12 @@
     &lt;level _seq=&quot;43&quot; _title=&quot;OxydLink 23&quot; _xpath=&quot;./oxydlink23_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried104&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;44&quot; _title=&quot;Preferences&quot; _xpath=&quot;./oxydlink28_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level10d&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;45&quot; _title=&quot;Letter Bomb&quot; _xpath=&quot;./oxydlink31_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxydlink31&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;46&quot; _title=&quot;Oxyd Link 33&quot; _xpath=&quot;./oxydlink33_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd2p33&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;46&quot; _title=&quot;Oxyd Link 33&quot; _xpath=&quot;./oxydlink33_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd2p33&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;47&quot; _title=&quot;Mirror III&quot; _xpath=&quot;./oxydlink41_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried80&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;48&quot; _title=&quot;My Way, Your Way&quot; _xpath=&quot;./oxydlink46_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level10e&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;49&quot; _title=&quot;Center Court&quot; _xpath=&quot;./oxydlink61_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level11c&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;50&quot; _title=&quot;Parcours&quot; _xpath=&quot;./oxydlink65_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level8a&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;51&quot; _title=&quot;Oxyd Link 68&quot; _xpath=&quot;./oxydlink68_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd2p68&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;51&quot; _title=&quot;Oxyd Link 68&quot; _xpath=&quot;./oxydlink68_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd2p68&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;52&quot; _title=&quot;Slide Show&quot; _xpath=&quot;./oxydlink72_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level8c&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;53&quot; _title=&quot;Oxyd Link 87&quot; _xpath=&quot;./oxydlink87_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;oxyd2p87&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;54&quot; _title=&quot;OxydLink 95&quot; _xpath=&quot;./oxydlink95_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried103&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: branches/1.0/data/levels/enigma_oxyd/oxyd70_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_oxyd/oxyd70_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_oxyd/oxyd70_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Oxyd 70&quot; el:subtitle=&quot;Oxyd 70&quot; el:id=&quot;oxyd70&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot; el:engine=&quot;oxyd1&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot; el:engine=&quot;oxyd1&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -34,7 +34,7 @@
                 elseif c==&quot;H&quot; then
                         set_stone(&quot;st-metal_hole&quot;,i-1,line)
                 elseif c==&quot; &quot; then
-            set_floor(&quot;fl-brick&quot;,i-1,line)
+                        set_floor(&quot;fl-brick&quot;,i-1,line)
 
                 elseif c==&quot;a&quot; then
                         set_stone(&quot;st-bigbrick-sw&quot;,i-1,line)
@@ -84,8 +84,17 @@
 set_actor(&quot;ac-whiteball-small&quot;, 10,14.5, {player=0})
 set_actor(&quot;ac-whiteball-small&quot;, 10,20.5, {player=0})  
 
-puzzle({{0,0,1,0,0,1,0,0},{0,0,1,0,0,1,0,0},{1,1,1,1,1,1,1,1},{0,0,1,0,0,1,0,0},{0,0,1,0,0,1,0,0}},6,5,&quot;red&quot;,&quot;yes&quot;)
-puzzle({{0,0,1,0,0,1,0,0},{0,0,1,0,0,1,0,0},{1,1,1,1,1,1,1,1},{0,0,1,0,0,1,0,0},{0,0,1,0,0,1,0,0}},6,15,&quot;red&quot;,&quot;no&quot;)
+puzzle({&quot;  #  #  &quot;,
+        &quot;  #  #  &quot;,
+        &quot;########&quot;,
+        &quot;  #  #  &quot;,
+        &quot;  #  #  &quot;},{6,5},&quot;redpuzzle&quot;,&quot;permutation&quot;)
+
+puzzle({&quot;  #  #  &quot;,
+        &quot;  #  #  &quot;,
+        &quot;########&quot;,
+        &quot;  #  #  &quot;,
+        &quot;  #  #  &quot;},{6,15},&quot;redpuzzle&quot;,&quot;none&quot;)
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
       &lt;el:string el:key=&quot;title&quot;&gt;

Modified: branches/1.0/data/levels/enigma_oxyd/oxydlink33_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_oxyd/oxydlink33_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_oxyd/oxydlink33_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Oxyd Link 33&quot; el:subtitle=&quot;Oxyd Link 33&quot; el:id=&quot;oxyd2p33&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005,2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot; el:engine=&quot;oxyd1&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot; el:engine=&quot;oxyd1&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;true&quot;/&gt;
       &lt;el:comments&gt;
@@ -83,7 +83,10 @@
 oxyd_default_flavor = &quot;a&quot;
 oxyd_shuffle()
 
-puzzle({{1,1,1,1},{1,0,0,0},{1,0,0,0},{1,0,0,0}},9,4,&quot;red&quot;)
+puzzle({&quot;####&quot;,
+        &quot;#   &quot;,
+        &quot;#   &quot;,
+        &quot;#   &quot;},{9,4},&quot;redpuzzle&quot;,&quot;permutation&quot;)
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
       &lt;el:string el:key=&quot;title&quot;&gt;

Modified: branches/1.0/data/levels/enigma_oxyd/oxydlink68_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_oxyd/oxydlink68_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_oxyd/oxydlink68_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Oxyd Link 68&quot; el:subtitle=&quot;Oxyd Link 68&quot; el:id=&quot;oxyd2p68&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot; el:engine=&quot;oxyd1&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot; el:engine=&quot;oxyd1&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;true&quot;/&gt;
       &lt;el:comments&gt;
@@ -65,7 +65,10 @@
 oxyd_shuffle()
 
 --Ring
-puzzle({{1,1,1,1},{1,0,0,1},{1,0,0,1},{1,1,1,1}},8,4,&quot;red&quot;)
+puzzle({&quot;####&quot;,
+        &quot;#  #&quot;,
+        &quot;#  #&quot;,
+        &quot;####&quot;},{8,4},&quot;redpuzzle&quot;,&quot;permutation&quot;)
 
 -- Special
 set_item(&quot;it-document&quot;,4,3,{text=&quot;text1&quot;})

Modified: branches/1.0/data/levels/enigma_peroxyd/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_peroxyd/index.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_peroxyd/index.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -36,7 +36,7 @@
     &lt;level _seq=&quot;28&quot; _title=&quot;Cliffhanger&quot; _xpath=&quot;./peroxyd54_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level10f&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;29&quot; _title=&quot;Per.Oxyd 55&quot; _xpath=&quot;./peroxyd55_2&quot; author=&quot;Sven Siggelkow&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;ss_pox55&quot; rel=&quot;2&quot; rev=&quot;0&quot; score=&quot;2&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;30&quot; _title=&quot;Roadblock&quot; _xpath=&quot;./peroxyd58_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level7b&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;31&quot; _title=&quot;Per.Oxyd 62&quot; _xpath=&quot;./peroxyd62_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;peroxyd62&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;31&quot; _title=&quot;Per.Oxyd 62&quot; _xpath=&quot;./peroxyd62_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;peroxyd62&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;32&quot; _title=&quot;Serious Patching&quot; _xpath=&quot;./peroxyd73_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level8f&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;33&quot; _title=&quot;One Single Try&quot; _xpath=&quot;./peroxyd75_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried78&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;34&quot; _title=&quot;Plumbing&quot; _xpath=&quot;./peroxyd79_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level7e&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -48,8 +48,8 @@
     &lt;level _seq=&quot;40&quot; _title=&quot;It Takes Two&quot; _xpath=&quot;./peroxydlink01_1&quot; author=&quot;Martin Hawlisch&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;martin43&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;41&quot; _title=&quot;Oops, Sorry!&quot; _xpath=&quot;./peroxydlink02_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level7f&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;42&quot; _title=&quot;Good Company&quot; _xpath=&quot;./peroxydlink03_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level10a&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;43&quot; _title=&quot;Per.Oxyd Link 6&quot; _xpath=&quot;./peroxydlink06_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;peroxyd2p6&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;44&quot; _title=&quot;Per.Oxyd Link 13&quot; _xpath=&quot;./peroxydlink13_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;peroxyd2p13&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;43&quot; _title=&quot;Per.Oxyd Link 6&quot; _xpath=&quot;./peroxydlink06_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;peroxyd2p6&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;44&quot; _title=&quot;Per.Oxyd Link 13&quot; _xpath=&quot;./peroxydlink13_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;peroxyd2p13&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;45&quot; _title=&quot;Monolith&quot; _xpath=&quot;./peroxydlink22_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level10c&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;46&quot; _title=&quot;Let Me Out!&quot; _xpath=&quot;./peroxydlink44_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;siegfried92&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;47&quot; _title=&quot;Crisscross&quot; _xpath=&quot;./peroxydlink45_1&quot; author=&quot;Martin Hawlisch&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;martin62&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: branches/1.0/data/levels/enigma_peroxyd/peroxyd62_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_peroxyd/peroxyd62_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_peroxyd/peroxyd62_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Per.Oxyd 62&quot; el:subtitle=&quot;Per.Oxyd 62&quot; el:id=&quot;peroxyd62&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot; el:engine=&quot;per.oxyd&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot; el:engine=&quot;per.oxyd&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -55,10 +55,10 @@
                 elseif c==&quot;a&quot; then
                    set_floor(&quot;fl-abyss&quot;,i-1,line)
 
-        elseif c==&quot;f&quot; then
-           set_item(&quot;it-flagblack&quot;,i-1,line)
-        elseif c==&quot;s&quot; then
-           set_item(&quot;it-spring1&quot;,i-1,line)
+                elseif c==&quot;f&quot; then
+                   set_item(&quot;it-flagblack&quot;,i-1,line)
+                elseif c==&quot;s&quot; then
+                   set_item(&quot;it-spring1&quot;,i-1,line)
         end
     end    
 end
@@ -77,7 +77,8 @@
 renderLine(11 , &quot;#######################################&quot;)
 renderLine(12 , &quot;                                       &quot;)
 
-puzzle({{1,1},{1,1}},24,8,&quot;blue&quot;,&quot;no&quot;)
+puzzle({&quot;##&quot;,
+        &quot;##&quot;},{24,8},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
 -- Special
 set_item(&quot;it-document&quot;, 17, 10, {text=&quot;text1&quot;})

Modified: branches/1.0/data/levels/enigma_peroxyd/peroxydlink06_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_peroxyd/peroxydlink06_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_peroxyd/peroxydlink06_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Per.Oxyd Link 6&quot; el:subtitle=&quot;Per.Oxyd Link 6&quot; el:id=&quot;peroxyd2p6&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot; el:engine=&quot;per.oxyd&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot; el:engine=&quot;per.oxyd&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;true&quot;/&gt;
       &lt;el:comments&gt;
@@ -32,7 +32,7 @@
           if c==&quot;x&quot; then
             oxyd(i-1,line)
                 elseif c==&quot;#&quot; then
-            set_stone(&quot;st-rock2&quot;,i-1,line)
+                    set_stone(&quot;st-rock2&quot;,i-1,line)
                    
                 elseif c==&quot; &quot; then
                    set_floor(&quot;fl-concrete&quot;,i-1,line)
@@ -41,7 +41,6 @@
                    set_stone(&quot;st-black1&quot;,i-1,line)
                 elseif c==&quot;w&quot; then
                    set_stone(&quot;st-white1&quot;,i-1,line)
-
         end
     end    
 end
@@ -81,7 +80,12 @@
 set_item(&quot;it-yinyang&quot;, 11,5)
 set_item(&quot;it-yinyang&quot;, 11,15)
 
-puzzle({{1,1,1,1,1,1,1,1,1,1},{1,0,0,0,0,0,0,0,0,1},{1,0,0,0,0,0,0,0,0,1},{1,0,0,0,0,0,0,0,0,1},{1,0,0,0,0,0,0,0,0,1},{1,1,1,1,1,1,1,1,1,1}},14,10,&quot;blue&quot;,&quot;no&quot;)
+puzzle({&quot;##########&quot;,
+        &quot;#        #&quot;,
+        &quot;#        #&quot;,
+        &quot;#        #&quot;,
+        &quot;#        #&quot;,
+        &quot;##########&quot;},{14,10},&quot;bluepuzzle&quot;,&quot;none&quot;)
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
       &lt;el:string el:key=&quot;title&quot;&gt;

Modified: branches/1.0/data/levels/enigma_peroxyd/peroxydlink13_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_peroxyd/peroxydlink13_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_peroxyd/peroxydlink13_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Per.Oxyd Link 13&quot; el:subtitle=&quot;Per.Oxyd Link 13&quot; el:id=&quot;peroxyd2p13&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
       &lt;el:compatibility el:enigma=&quot;0.92&quot; el:engine=&quot;per.oxyd&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;true&quot;/&gt;
       &lt;el:comments&gt;
@@ -64,30 +64,55 @@
 set_item(&quot;it-yinyang&quot;,3,8)
 
 --THE PUZZLES:
-must_shuffle=0
-art=&quot;&quot;
+puzzle({&quot;#&quot;,
+        &quot;#&quot;,
+        &quot;#&quot;,
+        &quot;#&quot;,
+        &quot;#&quot;},{5,4},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
-puzzle({{1},{1},{1},{1},{1}},5,4)
+puzzle({&quot;    ###########&quot;,
+        &quot;    #          &quot;,
+        &quot;    #          &quot;,
+        &quot;    #          &quot;,
+        &quot;#####          &quot;},{6,4},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
-puzzle({{0,0,0,0,1,1,1,1,1,1,1,1,1,1,1},{0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},{1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}},6,4)
+puzzle({&quot;#####&quot;},{14,8},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
-puzzle({{1,1,1,1,1}},14,8)
+puzzle({&quot;###&quot;,
+        &quot;  #&quot;,
+        &quot;  #&quot;,
+        &quot;  #&quot;,
+        &quot;  #&quot;},{23,4},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
-puzzle({{1,1,1},{0,0,1},{0,0,1},{0,0,1},{0,0,1}},23,4)
+puzzle({&quot;  #  &quot;,
+        &quot;#####&quot;,
+        &quot;  #  &quot;,
+        &quot;  #  &quot;,
+        &quot;  #  &quot;,
+        &quot;#####&quot;,
+        &quot;  #  &quot;},{30,3},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
-puzzle({{0,0,1,0,0},{1,1,1,1,1},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{1,1,1,1,1},{0,0,1,0,0}},30,3)
-
 --Oben
-puzzle({{1},{1},{1}},44,2)
-puzzle({{1,0},{1,2}},45,3)
-puzzle({{1},{1}},46,4)
-puzzle({{2,1},{0,1}},46,3)
+puzzle({&quot;#&quot;,
+        &quot;#&quot;,
+        &quot;#&quot;},{44,2},&quot;bluepuzzle&quot;,&quot;none&quot;)
+puzzle({&quot;# &quot;,
+        &quot;#+&quot;},{45,3},&quot;bluepuzzle&quot;,&quot;none&quot;)
+puzzle({&quot;#&quot;,
+        &quot;#&quot;},{46,4},&quot;bluepuzzle&quot;,&quot;none&quot;)
+puzzle({&quot;+#&quot;,
+        &quot; #&quot;},{46,3},&quot;bluepuzzle&quot;,&quot;none&quot;)
 
 --Unten
-puzzle({{1},{1},{1}},44,8)
-puzzle({{1,2},{1,0}},45,8)
-puzzle({{1},{1}},46,7)
-puzzle({{0,1},{2,1}},46,8)
+puzzle({&quot;#&quot;,
+        &quot;#&quot;,
+        &quot;#&quot;},{44,8},&quot;bluepuzzle&quot;,&quot;none&quot;)
+puzzle({&quot;#+&quot;,
+        &quot;# &quot;},{45,8},&quot;bluepuzzle&quot;,&quot;none&quot;)
+puzzle({&quot;#&quot;,
+        &quot;#&quot;},{46,7},&quot;bluepuzzle&quot;,&quot;none&quot;)
+puzzle({&quot; #&quot;,
+        &quot;+#&quot;},{46,8},&quot;bluepuzzle&quot;,&quot;none&quot;)
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
       &lt;el:string el:key=&quot;title&quot;&gt;

Modified: branches/1.0/data/levels/enigma_v/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/index.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_v/index.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -24,7 +24,7 @@
     &lt;level _seq=&quot;16&quot; _title=&quot;Draggers&quot; _xpath=&quot;./ant21_1&quot; author=&quot;Petr Machata&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;ant21&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;17&quot; _title=&quot;Break and Enter&quot; _xpath=&quot;./siegfried16_1&quot; author=&quot;Siegfried Fennig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;level5b&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;18&quot; _title=&quot;Double play&quot; _xpath=&quot;./just06_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just06&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;19&quot; _title=&quot;Oxyd-Puzzle&quot; _xpath=&quot;./raoul05_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul05&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;19&quot; _title=&quot;Oxyd-Puzzle&quot; _xpath=&quot;./raoul05_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul05&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;20&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./ralf12_1&quot; author=&quot;Ralf Westram&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;ralf12&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;21&quot; _title=&quot;Plan Ahead&quot; _xpath=&quot;./duffy114_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy114&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;22&quot; _title=&quot;Keystone&quot; _xpath=&quot;./raoul12_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul12&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -65,7 +65,7 @@
     &lt;level _seq=&quot;57&quot; _title=&quot;Too Heavy?&quot; _xpath=&quot;./martin101_1&quot; author=&quot;Martin Hawlisch&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;martin101&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;58&quot; _title=&quot;Now What?&quot; _xpath=&quot;./duffy127_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy127&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;59&quot; _title=&quot;Pneumatic Delivery&quot; _xpath=&quot;./malla01_1&quot; author=&quot;Manuel K&#246;nig&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;malla01&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;60&quot; _title=&quot;Jumpin' Jack Flash&quot; _xpath=&quot;./ss10_1&quot; author=&quot;Sven Siggelkow&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;ss10&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;60&quot; _title=&quot;Jumpin' Jack Flash&quot; _xpath=&quot;./ss10_1&quot; author=&quot;Sven Siggelkow&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;ss10&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;61&quot; _title=&quot;Venice I&quot; _xpath=&quot;./raoul16_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul16&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;62&quot; _title=&quot;No way out?&quot; _xpath=&quot;./just08_1&quot; author=&quot;JuSt&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;just08&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;63&quot; _title=&quot;Venice II&quot; _xpath=&quot;./raoul17_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul17&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -104,7 +104,7 @@
     &lt;level _seq=&quot;96&quot; _title=&quot;The Chamber&quot; _xpath=&quot;./luc31_1&quot; author=&quot;Lukas Sch&#252;ller&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;luc31&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;97&quot; _title=&quot;Automaton&quot; _xpath=&quot;./duffy95_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy95&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;98&quot; _title=&quot;Caterpillar&quot; _xpath=&quot;./nat15_1&quot; author=&quot;Nat Pryce&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;nat15&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;99&quot; _title=&quot;Spacestation&quot; _xpath=&quot;./raoul23_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul23&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;99&quot; _title=&quot;Spacestation&quot; _xpath=&quot;./raoul23_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul23&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;100&quot; _title=&quot;Island Labyrinth&quot; _xpath=&quot;./duffy129_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy129&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
   &lt;/levels&gt;
 

Modified: branches/1.0/data/levels/enigma_v/raoul05_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/raoul05_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_v/raoul05_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Oxyd-Puzzle&quot; el:subtitle=&quot;&quot; el:id=&quot;raoul05&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">raoul at users.berlios.de</A>&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2005,2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
-      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -70,7 +70,7 @@
 oxyd_default_flavor = &quot;b&quot;
 
 --RANDOM TILES FOR UPPER ROW:
-tiles={{{1,1,0},{0,1,0},{0,1,1}},{{0,1,1},{0,1,0},{1,1,0}},{{0,1,1},{1,1,0},{1,0,0}},{{1,1,0},{0,1,1},{0,0,1}},{{0,1,0},{1,1,1},{0,1,0}},{{1,1,1},{0,1,0},{0,1,0}},{{0,1,0},{0,1,0},{1,1,1}},{{1,1,1},{1,0,0},{1,0,0}},{{1,1,1},{0,0,1},{0,0,1}},{{0,1,0},{1,1,1},{1,0,0}},{{0,1,0},{1,1,1},{0,0,1}},{{1,1,0},{0,1,1},{0,1,0}},{{0,1,1},{1,1,0},{0,1,0}}}
+tiles={{&quot;## &quot;,&quot; # &quot;,&quot; ##&quot;},{&quot; ##&quot;,&quot; # &quot;,&quot;## &quot;},{&quot; ##&quot;,&quot;## &quot;,&quot;#  &quot;},{&quot;## &quot;,&quot; ##&quot;,&quot;  #&quot;},{&quot; # &quot;,&quot;###&quot;,&quot; # &quot;},{&quot;###&quot;,&quot; # &quot;,&quot; # &quot;},{&quot; # &quot;,&quot; # &quot;,&quot;###&quot;},{&quot;###&quot;,&quot;#  &quot;,&quot;#  &quot;},{&quot;###&quot;,&quot;  #&quot;,&quot;  #&quot;},{&quot; # &quot;,&quot;###&quot;,&quot;#  &quot;},{&quot; # &quot;,&quot;###&quot;,&quot;  #&quot;},{&quot;## &quot;,&quot; ##&quot;,&quot; # &quot;},{&quot; ##&quot;,&quot;## &quot;,&quot; # &quot;}}
 chosen_tiles_up={}    
 leftcorners={{4,1},{9,1},{14,1}}
 
@@ -87,15 +87,13 @@
 for fields=1,3 do
  for i=1,3 do
   for j=1,3 do
-   if chosen_tiles_up[fields][i][j]==0 then
     set_stone(&quot;st-glass2_hole&quot;,leftcorners[fields][1]+j-1,leftcorners[fields][2]+i-1)
-   end
   end
  end
 end
 
 --RANDOM TILES FOR LOWER ROW:
-tiles={{{1,1,0},{0,1,0},{0,1,1}},{{0,1,1},{0,1,0},{1,1,0}},{{1,0,0},{1,1,0},{0,1,1}},{{0,0,1},{0,1,1},{1,1,0}},{{0,1,0},{1,1,1},{0,1,0}},{{1,1,1},{0,1,0},{0,1,0}},{{0,1,0},{0,1,0},{1,1,1}},{{1,0,0},{1,0,0},{1,1,1}},{{0,0,1},{0,0,1},{1,1,1}},{{1,0,0},{1,1,1},{0,1,0}},{{0,0,1},{1,1,1},{0,1,0}},{{1,1,0},{0,1,1},{0,1,0}},{{0,1,1},{1,1,0},{0,1,0}}}
+tiles={{&quot;## &quot;,&quot; # &quot;,&quot; ##&quot;},{&quot; ##&quot;,&quot; # &quot;,&quot;## &quot;},{&quot;#  &quot;,&quot;## &quot;,&quot; ##&quot;},{&quot;  #&quot;,&quot; ##&quot;,&quot;## &quot;},{&quot; # &quot;,&quot;###&quot;,&quot; # &quot;},{&quot;###&quot;,&quot; # &quot;,&quot; # &quot;},{&quot; # &quot;,&quot; # &quot;,&quot;###&quot;},{&quot;#  &quot;,&quot;#  &quot;,&quot;###&quot;},{&quot;  #&quot;,&quot;  #&quot;,&quot;###&quot;},{&quot;#  &quot;,&quot;###&quot;,&quot; # &quot;},{&quot;  #&quot;,&quot;###&quot;,&quot; # &quot;},{&quot;## &quot;,&quot; ##&quot;,&quot; # &quot;},{&quot; ##&quot;,&quot;## &quot;,&quot; # &quot;}}
 chosen_tiles_lo={}
 leftcorners={{3,9},{8,9},{13,9}}
 
@@ -112,9 +110,7 @@
 for fields=1,3 do
  for i=1,3 do
   for j=1,3 do
-   if chosen_tiles_lo[fields][i][j]==0 then
     set_stone(&quot;st-glass2_hole&quot;,leftcorners[fields][1]+j-1,leftcorners[fields][2]+i-1)
-   end
   end
  end
 end
@@ -149,37 +145,37 @@
 
 --Wrap-Funktionen
 function wrap1()
- puzzle(chosen_tiles_up[1],4,1,&quot;red&quot;)
+ puzzle(chosen_tiles_up[1],{4,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
  da[1]=1
  do_test()
 end
 
 function wrap2()
- puzzle(chosen_tiles_up[2],9,1,&quot;red&quot;)
+ puzzle(chosen_tiles_up[2],{9,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
  da[2]=1
  do_test()
 end
 
 function wrap3()
- puzzle(chosen_tiles_up[3],14,1,&quot;red&quot;)
+ puzzle(chosen_tiles_up[3],{14,1},&quot;redpuzzle&quot;,&quot;permutation&quot;)
  da[3]=1
  do_test()
 end
 
 function wrap4()
- puzzle(chosen_tiles_lo[1],3,9,&quot;red&quot;)
+ puzzle(chosen_tiles_lo[1],{3,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
  da[4]=1
  do_test()
 end
 
 function wrap5()
- puzzle(chosen_tiles_lo[2],8,9,&quot;red&quot;)
+ puzzle(chosen_tiles_lo[2],{8,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
  da[5]=1
  do_test()
 end
 
 function wrap6()
- puzzle(chosen_tiles_lo[3],13,9,&quot;red&quot;)
+ puzzle(chosen_tiles_lo[3],{13,9},&quot;redpuzzle&quot;,&quot;permutation&quot;)
  da[6]=1
  do_test()
 end

Modified: branches/1.0/data/levels/enigma_v/raoul23_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/raoul23_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_v/raoul23_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,13 +3,13 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Spacestation&quot; el:subtitle=&quot;&quot; el:id=&quot;raoul23&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">raoul at users.berlios.de</A>&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
       &lt;el:compatibility el:enigma=&quot;1.0&quot;&gt;
        &lt;el:dependency el:path=&quot;lib/ant&quot; el:id=&quot;lib/ant&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;true&quot;/&gt;
       &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;7:29&quot;/&gt;
@@ -239,16 +239,24 @@
 -- &quot;Things&quot;:
 function set_thing(x,y,init)
     if init==1 then
-        puzzle({{1,2,1},{1,0,1},{1,1,1}},x,y,&quot;blue&quot;,&quot;no&quot;)
+        puzzle({&quot;#+#&quot;,
+                &quot;# #&quot;,
+                &quot;###&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
         set_stone(&quot;st-puzzle-hollow&quot;,x+1,y)
     elseif init==2 then
-        puzzle({{1,1,1},{1,0,2},{1,1,1}},x,y,&quot;blue&quot;,&quot;no&quot;)
+        puzzle({&quot;###&quot;,
+                &quot;# +&quot;,
+                &quot;###&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
         set_stone(&quot;st-puzzle-hollow&quot;,x+2,y+1)
     elseif init==3 then
-        puzzle({{1,1,1},{1,0,1},{1,2,1}},x,y,&quot;blue&quot;,&quot;no&quot;)
+        puzzle({&quot;###&quot;,
+                &quot;# #&quot;,
+                &quot;#+#&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
         set_stone(&quot;st-puzzle-hollow&quot;,x+1,y+2)
     elseif init==4 then    
-        puzzle({{1,1,1},{2,0,1},{1,1,1}},x,y,&quot;blue&quot;,&quot;no&quot;)
+        puzzle({&quot;###&quot;,
+                &quot;+ #&quot;,
+                &quot;###&quot;},{x,y},&quot;bluepuzzle&quot;,&quot;none&quot;)
         set_stone(&quot;st-puzzle-hollow&quot;,x,y+1)
     end
 end

Modified: branches/1.0/data/levels/enigma_v/ss10_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_v/ss10_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_v/ss10_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,7 +3,7 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Jumpin' Jack Flash&quot; el:subtitle=&quot;&quot; el:id=&quot;ss10&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Sven Siggelkow&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2003 Sven Siggelkow&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
@@ -34,7 +34,7 @@
       elseif c==&quot;h&quot; then
          set_item(&quot;it-hollow&quot;, i-1,line,{essential=1})
       elseif c==&quot;b&quot; then
-         if difficult==FALSE then
+         if not difficult then
       set_item(&quot;it-spade&quot;, i-1,line)
          end
       elseif c==&quot;G&quot; then

Modified: branches/1.0/data/levels/enigma_vi/index.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/index.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_vi/index.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -30,7 +30,7 @@
     &lt;level _seq=&quot;22&quot; _title=&quot;Edwards Second Level&quot; _xpath=&quot;./edward02_1&quot; author=&quot;Edward&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;edward02&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;23&quot; _title=&quot;Prepare Your Defense&quot; _xpath=&quot;./duffy132_1&quot; author=&quot;Jacob Scott&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;duffy132&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;24&quot; _title=&quot;The Stable&quot; _xpath=&quot;./andreas30_1&quot; author=&quot;Andreas Lochmann&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;andreas30&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;25&quot; _title=&quot;Oxydrings&quot; _xpath=&quot;./raoul13_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul13&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;25&quot; _title=&quot;Oxydrings&quot; _xpath=&quot;./raoul13_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;raoul13&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;26&quot; _title=&quot;Dialers&quot; _xpath=&quot;./edward05_1&quot; author=&quot;Edward&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;edward05&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;27&quot; _title=&quot;Persecution Mania&quot; _xpath=&quot;./ral12_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060911ral294&quot; rel=&quot;1&quot; rev=&quot;34&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;28&quot; _title=&quot;Holes!&quot; _xpath=&quot;./edward14_1&quot; author=&quot;Edward&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;edward14&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
@@ -66,7 +66,7 @@
     &lt;level _seq=&quot;58&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./raoul18_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul18&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;59&quot; _title=&quot;Pool with a pole&quot; _xpath=&quot;./alain28_1&quot; author=&quot;Alain Busser&quot; ctrl=&quot;force&quot; easy=&quot;false&quot; id=&quot;alain28&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;60&quot; _title=&quot;- Meditation -&quot; _xpath=&quot;./edward30_1&quot; author=&quot;Edward&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;edward30&quot; rel=&quot;1&quot; rev=&quot;1&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
-    &lt;level _seq=&quot;61&quot; _title=&quot;Puzzle Puzzles&quot; _xpath=&quot;./raoul26_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul26&quot; rel=&quot;1&quot; rev=&quot;22&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
+    &lt;level _seq=&quot;61&quot; _title=&quot;Puzzle Puzzles&quot; _xpath=&quot;./raoul26_1&quot; author=&quot;Raoul Bourquin&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;raoul26&quot; rel=&quot;1&quot; rev=&quot;23&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;62&quot; _title=&quot;Tarzan&quot; _xpath=&quot;./ulf03_1&quot; author=&quot;Ulf Stegemann&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060629ulf003&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;63&quot; _title=&quot;Houdini&quot; _xpath=&quot;./ral11_1&quot; author=&quot;Ronald Lamprecht&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;20060816ral719&quot; rel=&quot;1&quot; rev=&quot;45&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;
     &lt;level _seq=&quot;64&quot; _title=&quot;Walk the line&quot; _xpath=&quot;./erich02_1&quot; author=&quot;Erich Schubert&quot; ctrl=&quot;force&quot; easy=&quot;true&quot; id=&quot;erich02&quot; rel=&quot;1&quot; rev=&quot;0&quot; score=&quot;1&quot; target=&quot;time&quot; unit=&quot;duration&quot;/&gt;

Modified: branches/1.0/data/levels/enigma_vi/raoul13_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/raoul13_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_vi/raoul13_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Oxydrings&quot; el:subtitle=&quot;&quot; el:id=&quot;raoul13&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;1&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">raoul at users.berlios.de</A>&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
       &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -71,7 +71,16 @@
 oxyd_shuffle()
 
 -- RINGS --
-puzzle({{1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1},{1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1},{1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1},{1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1},{0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0},{0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0},{1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1},{1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1},{1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1},{1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1}},2,2,&quot;blue&quot;,&quot;no&quot;)
+puzzle({&quot;####         ####&quot;,
+        &quot;#  #         #  #&quot;,
+        &quot;#  ###########  #&quot;,
+        &quot;####         ####&quot;,
+        &quot;  #           #  &quot;,
+        &quot;  #           #  &quot;,
+        &quot;####         ####&quot;,
+        &quot;#  ###########  #&quot;,
+        &quot;#  #         #  #&quot;,
+        &quot;####         ####&quot;},{2,2},&quot;bluepuzzle&quot;,&quot;none&quot;)
     ]]&gt;&lt;/el:luamain&gt;
     &lt;el:i18n&gt;
       &lt;el:string el:key=&quot;title&quot;&gt;

Modified: branches/1.0/data/levels/enigma_vi/raoul26_1.xml
===================================================================
--- branches/1.0/data/levels/enigma_vi/raoul26_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/enigma_vi/raoul26_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -3,12 +3,12 @@
   &lt;el:protected&gt;
     &lt;el:info el:type=&quot;level&quot;&gt;
       &lt;el:identity el:title=&quot;Puzzle Puzzles&quot; el:subtitle=&quot;look forward!&quot; el:id=&quot;raoul26&quot;/&gt;
-      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;22&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;23&quot; el:status=&quot;released&quot;/&gt;
       &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
       &lt;el:copyright&gt;Copyright &#169; 2006 Raoul Bourquin&lt;/el:copyright&gt;
       &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
       &lt;el:compatibility el:enigma=&quot;1.0&quot;&gt;
-       &lt;el:dependency el:path=&quot;lib/libpuzzle&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
+       &lt;el:dependency el:path=&quot;lib/libpuzzle_2&quot; el:id=&quot;lib/libpuzzle&quot; el:release=&quot;2&quot; el:preload=&quot;true&quot;/&gt;
       &lt;/el:compatibility&gt;
       &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
       &lt;el:comments&gt;
@@ -281,23 +281,33 @@
 end
 ---- PUZZLES ----
   -- W
-  puzzle({{0,1,1},{1,1,0},{1,0,0}},23,6,&quot;blue&quot;,&quot;no&quot;)
+  puzzle({&quot; ##&quot;,
+          &quot;## &quot;,
+          &quot;#  &quot;},{23,6},&quot;bluepuzzle&quot;,&quot;none&quot;)
   -- Z
-  puzzle({{0,1,1},{0,2,0},{1,1,0}},32,18,&quot;blue&quot;,&quot;no&quot;)
+  puzzle({&quot; ##&quot;,
+          &quot; + &quot;,
+          &quot;## &quot;},{32,18},&quot;bluepuzzle&quot;,&quot;none&quot;)
   set_stone(&quot;st-puzzle-hollow&quot;,33,19)
   -- shell_lower_part
-  shuffle_method=&quot;permutation&quot;
-  puzzle({{1,1,0,1,1},{0,1,1,1,0},{0,0,1,0,0}},31,31,&quot;blue&quot;,&quot;yes&quot;)
+  puzzle({&quot;## ##&quot;,
+          &quot; ### &quot;,
+          &quot;  #  &quot;},{31,31},&quot;bluepuzzle&quot;,&quot;permutation&quot;)
   -- shell_upper_part
-  puzzle({{0,1,0},{1,1,1}},32,29,&quot;blue&quot;,&quot;yes&quot;)
+  puzzle({&quot; # &quot;,
+          &quot;###&quot;},{32,29},&quot;bluepuzzle&quot;,&quot;permutation&quot;)
   -- -
-  puzzle({{1,2,1}},34,3,&quot;blue&quot;,&quot;no&quot;)
+  puzzle({&quot;#+#&quot;},{34,3},&quot;bluepuzzle&quot;,&quot;none&quot;)
   set_stone(&quot;st-puzzle-hollow&quot;,35,3)
   -- |
-  puzzle({{1},{2},{1}},33,2,&quot;blue&quot;,&quot;no&quot;)
+  puzzle({&quot;#&quot;,
+          &quot;+&quot;,
+          &quot;#&quot;},{33,2},&quot;bluepuzzle&quot;,&quot;none&quot;)
   set_stone(&quot;st-puzzle-hollow&quot;,33,3)
   -- T
-  puzzle({{0,0,1},{1,2,1},{0,0,1}},33,7,&quot;blue&quot;,&quot;no&quot;)
+  puzzle({&quot;  #&quot;,
+          &quot;#+#&quot;,
+          &quot;  #&quot;},{33,7},&quot;bluepuzzle&quot;,&quot;none&quot;)
   set_stone(&quot;st-puzzle-hollow&quot;,34,8)
 
 ---- ITEMS ----

Added: branches/1.0/data/levels/lib/libflood_1.xml
===================================================================
--- branches/1.0/data/levels/lib/libflood_1.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/lib/libflood_1.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -0,0 +1,371 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected&gt;
+    &lt;el:info el:type=&quot;library&quot;&gt;
+      &lt;el:identity el:title=&quot;&quot; el:id=&quot;lib/libflood&quot;/&gt;
+      &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;5&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2007 Raoul Bourquin&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;0.92&quot;&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;false&quot; el:network=&quot;false&quot;/&gt;
+      &lt;el:comments&gt;
+        &lt;el:code&gt;Lua 5.1 and XML converted by Leveladministrators&lt;/el:code&gt;
+      &lt;/el:comments&gt;
+      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- REFERENCE --
+---------------
+-- Used Globals:
+-- land_map
+-- top_left
+-- flood_method
+-- flood_map
+-- flood_front
+-- to_flood
+
+-- Defaults:
+land_map = {&quot;~&quot;}
+top_left = {0,0}
+flood_method = 1
+
+function init_flood(new_map, corner, method)
+    land_map = new_map
+    top_left = corner
+    flood_method = method
+
+    -- Is the map bigger than 0 x 0 ?
+    local x, y = get_map_size(land_map)
+    if x &lt; 1 or y &lt; 1 then
+        error(&quot;init_flood(new_map, corner): Map &quot;..tostring(x)..&quot; x &quot;..tostring(y)..&quot; is too small!\n&quot;)
+    end
+    -- Is the map rectangular?
+    is_rectangular()
+    -- Test top_left for valid koordinates
+    if top_left[1] &lt;= 0 or top_left[2] &lt;= 0 then
+        error(&quot;init_flood(new_map, corner): Invalid value for top left map corner! &quot;..tostring(top_left[1])..&quot;;&quot;..tostring(top_left[2])..&quot;\n&quot;)
+    end
+    if flood_method ~= 1 and flood_method ~= 2 then
+        error(&quot;init_flood(new_map, corner, method): Invalid value for method: &quot;..tostring(method)..&quot;! Values are [1,2].\n&quot;)
+    end
+
+    -- Build up the flood_map table.
+    build_up_flood_map(land_map)
+    -- Build up the data for a new flood_front.
+    new_flood_front()
+    search_initial_water()
+    -- Now draw the initial waterspots.
+    flood_it(flood_front,top_left)
+    return 0
+end
+
+function do_flood()
+    -- Create a new global to_flood.
+    new_to_flood()
+    -- Iterate over all elements in flood_front to find the tiles, we have to flood.
+    local flood_front_size = table.getn(flood_front)
+    local k,v
+    for k,v in pairs(flood_front) do
+        local akt_pos = flood_front[k]
+        if flood_method == 1 then
+            examine_field_nesw(akt_pos[1], akt_pos[2])
+        elseif flood_method == 2 then
+            examine_field_all8(akt_pos[1], akt_pos[2])
+        end
+    end
+    -- Write the to_flood to flood_front.
+    clear_flood_front()
+    copy_to_flood_to_flood_front()
+    -- We don't need to update the flood_map, because we updated it in
+    -- examine_field_neighbour(x,y). This improves performance a big bit!
+    --update_flood_map()
+    -- FLOOD !
+    flood_it(to_flood,top_left)
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Get the dimensions of the land_map:
+function get_map_size(land_map)
+    local y_size=table.getn(land_map)
+    local x_size=string.len(land_map[1])
+    return x_size, y_size
+end
+
+-- Get the dimensions of the flood_map:
+function get_flood_map_size(flood_map)
+    local y_size=table.getn(flood_map)
+    local x_size=table.getn(flood_map[1])
+    return x_size, y_size
+end
+
+function is_inside_map(x,y)
+    -- Test, if x and y are inside the flood_map. If no, raise an error.
+    local x_size, y_size = get_flood_map_size(flood_map)
+    if x &gt; x_size then
+        error(&quot;is_inside_map(x,y): x is not inside the map! &quot;..tostring(x)..&quot;\n&quot;)
+    end
+    if y &gt; y_size then
+        error(&quot;is_inside_map(x,y): y is not inside the map! &quot;..tostring(y)..&quot;\n&quot;)
+    end
+end
+
+function is_on_border(x,y)
+    -- Test, if x and y are on the flood_map border.
+    local x_size, y_size = get_flood_map_size(flood_map)
+    local on_x, on_y = 0, 0
+    -- Is x on a border?
+    if x == 1 then
+        -- is on left border
+        on_y = 1
+    elseif x == x_size then
+        -- is on right border
+        on_y = 2
+    end
+    -- Is y on a border?
+    if y == 1 then
+        -- is on top border
+        on_x = 1
+    elseif y == y_size then
+        -- is on bottom border
+        on_x = 2
+    end
+    return on_x, on_y
+end
+
+function is_rectangular()
+    local x_size, y_size = get_map_size(land_map)
+    -- Length of the first line in the map:
+    local buffer = string.len(land_map[1])
+    local i, temp
+    for i=1, y_size do
+        temp = string.len(land_map[i])
+        if temp ~= buffer then
+            error(&quot;is_rectangular(): Map in not rectangular!\n&quot;)
+        end
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+function get_specific_char(x,y)
+    local akt_line = land_map[y]
+    local this_char = string.sub(akt_line,x,x)
+    return this_char
+end
+
+function parse_this_char(akt_char)
+    if akt_char == &quot;#&quot; then
+        return 0
+    elseif akt_char == &quot; &quot; then
+        return 1
+    elseif akt_char == &quot;~&quot; then
+        return 2
+    else
+        error(&quot;parse_this_char(akt_char): Illegal char \&quot;&quot;..akt_char..&quot;\&quot; in the map! Valid chars are: [#, ,~].\n&quot;)
+    end
+end
+
+function build_up_flood_map(land_map)
+    -- new global:
+    flood_map={}
+    local x_size, y_size = get_map_size(land_map)
+    -- build up the flood_map table:
+    local i,j
+    for i=1, y_size do
+        -- each line is a table:
+        flood_map[i]={}
+        for j=1, x_size do
+            local akt_char = get_specific_char(j,i)
+            flood_map[i][j] = parse_this_char(akt_char)
+        end
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+function modify_flood_map(x,y,type)
+    is_inside_map(x,y)
+    -- type valid?
+    if type ~= 0 and type ~= 1 and type ~= 2 then
+        error(&quot;modify_flood_map(x,y,type): Illegal type! &quot;..tostring(type)..&quot;\n&quot;)
+    end
+    flood_map[y][x] = type
+    return 0
+end
+--------------------------------------------------------------------------------
+function new_flood_front()
+    -- new global:
+    flood_front = {}
+    return 0
+end
+
+function add_to_flood_front(x,y)
+    local this_pos = {x,y}
+    table.insert(flood_front,this_pos)
+    return 0
+end
+--------------------------------------------------------------------------------
+function search_initial_water()
+    local x_size, y_size = get_flood_map_size(flood_map)
+    local has_any_water = 0
+    local i,j
+    for i=1, y_size do
+        for j=1, x_size do
+            if flood_map[i][j] == 2 then
+                has_any_water = has_any_water+1
+                add_to_flood_front(j,i)
+            end
+        end
+    end
+    if has_any_water == 0 then
+        error(&quot;search_initial_water(): No Water found! Please set at least 1 Water tile!\n&quot;)
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+function new_to_flood()
+    -- new global:
+    to_flood = {}
+    return 0
+end
+
+function add_to_flood(x,y)
+    local this_pos = {x,y}
+    table.insert(to_flood,this_pos)
+    return 0
+end
+--------------------------------------------------------------------------------
+---F-L-O-O-D---M-E-T-H-O-D-S----------------------------------------------------
+-- Method 1:
+function examine_field_nesw(x,y)
+    -- Check, if x or y is out of the flood_map bounds
+    is_inside_map(x,y)
+
+    local x_border, y_border = is_on_border(x,y)
+    -- NORTH
+    if x_border ~= 1 then
+        examine_field_neighbour(x,y-1)
+    end
+    -- EAST
+    if y_border ~= 2 then
+        examine_field_neighbour(x+1,y)
+    end
+    -- SOUTH
+    if x_border ~= 2 then
+        examine_field_neighbour(x,y+1)
+    end
+    -- WEST
+    if y_border ~= 1 then
+        examine_field_neighbour(x-1,y)
+    end
+    return 0
+end
+
+-- Method 2:
+function examine_field_all8(x,y)
+    -- Check, if x or y is out of the flood_map bounds
+    is_inside_map(x,y)
+
+    local x_border, y_border = is_on_border(x,y)
+    -- NORTH
+    if x_border ~= 1 then
+        examine_field_neighbour(x,y-1)
+        if y_border ~= 1 then
+            examine_field_neighbour(x-1,y-1)
+        end
+        if y_border ~= 2 then
+            examine_field_neighbour(x+1,y-1)
+        end
+    end
+    -- EAST
+    if y_border ~= 2 then
+        examine_field_neighbour(x+1,y)
+    end
+    -- SOUTH
+    if x_border ~= 2 then
+        examine_field_neighbour(x,y+1)
+        if y_border ~= 1 then
+            examine_field_neighbour(x-1,y+1)
+        end
+        if y_border ~= 2 then
+            examine_field_neighbour(x+1,y+1)
+        end
+    end
+    -- WEST
+    if y_border ~= 1 then
+        examine_field_neighbour(x-1,y)
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+function examine_field_neighbour(x,y)
+    -- What sort of floor is the examined position?
+    if flood_map[y][x] == 0 then
+        -- DEBUG:
+        --print(&quot;Stone found at: &quot;..tostring(x)..&quot;;&quot;..tostring(y)..&quot;\n&quot;)
+    elseif flood_map[y][x] == 1 then
+        -- the only case we have to do something
+        -- DEBUG:
+        --print(&quot;Floodable ground found at: &quot;..tostring(x)..&quot;;&quot;..tostring(y)..&quot;\n&quot;)
+        add_to_flood(x,y)
+        -- Mark field as flooded in flood_map here will improve performance!!
+        modify_flood_map(x, y, 2)
+    elseif flood_map[y][x] == 2 then
+        -- DEBUG:
+        --print(&quot;Water found at: &quot;..tostring(x)..&quot;;&quot;..tostring(y)..&quot;\n&quot;)
+    -- If there are more possibilities, add more elseifs here.
+    -- We need no default-error, because flood_map IS clean.
+    -- Errors were detected in parse_this_char().
+    end
+end
+--------------------------------------------------------------------------------
+function clear_flood_front()
+    -- Just recreate the var.
+    new_flood_front()
+    return 0
+end
+
+function copy_to_flood_to_flood_front()
+    local tab_size = table.getn(to_flood)
+    for i=1, tab_size do
+        local temp = to_flood[i]
+        local temp_x = temp[1]
+        local temp_y = temp[2]
+        add_to_flood_front(temp_x,temp_y)
+    end
+    return 0
+end
+
+-- Fill the flood_map with the additional flooded fields. This is obsolete since
+-- we add the fields just when they are detected.
+function update_flood_map()
+    local tab_size = table.getn(flood_front)
+    for i=1, tab_size do
+        local temp = to_flood[i]
+        local temp_x = temp[1]
+        local temp_y = temp[2]
+        modify_flood_map(temp_x, temp_y, 2)
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+function flood_it(map,top_left)
+    local k, v
+    for k,v in pairs(map) do
+        local akt_pos = map[k]
+        set_floor(&quot;fl-water&quot;, top_left[1]+akt_pos[1]-1, top_left[2]+akt_pos[2]-1)
+    end
+end
+--------------------------------------------------------------------------------
+---E--N--D------O--F------L--I--B--F--L--O--O--D--------------------------------
+--------------------------------------------------------------------------------
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+    &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/lib/libflood_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: branches/1.0/data/levels/lib/libpuzzle_2.xml
===================================================================
--- branches/1.0/data/levels/lib/libpuzzle_2.xml	2007-01-14 20:16:58 UTC (rev 575)
+++ branches/1.0/data/levels/lib/libpuzzle_2.xml	2007-01-14 21:50:47 UTC (rev 576)
@@ -0,0 +1,641 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;el:level xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xsi:schemaLocation=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A> level.xsd&quot; xmlns:el=&quot;<A HREF="http://enigma-game.org/schema/level/1">http://enigma-game.org/schema/level/1</A>&quot;&gt;
+  &lt;el:protected&gt;
+    &lt;el:info el:type=&quot;library&quot;&gt;
+      &lt;el:identity el:title=&quot;&quot; el:id=&quot;lib/libpuzzle&quot;/&gt;
+      &lt;el:version el:score=&quot;2&quot; el:release=&quot;2&quot; el:revision=&quot;2&quot; el:status=&quot;released&quot;/&gt;
+      &lt;el:author  el:name=&quot;Raoul Bourquin&quot; el:email=&quot;&quot; el:homepage=&quot;&quot;/&gt;
+      &lt;el:copyright&gt;Copyright &#169; 2005, 2006, 2007 Raoul Bourquin&lt;/el:copyright&gt;
+      &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
+      &lt;el:compatibility el:enigma=&quot;1.00&quot;&gt;
+      &lt;/el:compatibility&gt;
+      &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;false&quot; el:network=&quot;false&quot;/&gt;
+      &lt;el:comments&gt;
+        &lt;el:code&gt;Lua 5.1 and XML converted by Leveladministrators&lt;/el:code&gt;
+      &lt;/el:comments&gt;
+      &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
+    &lt;/el:info&gt;
+    &lt;el:luamain&gt;&lt;![CDATA[
+-- LIBPUZZLE, VERSION 2
+--
+-- Parameters:
+-- map: a charmap with the puzzle
+-- corner: top left corner, array {x,y}
+-- type: type of stone to use, one of these: &quot;redpuzzle&quot;,&quot;bluepuzzle&quot;,&quot;bigbrick&quot; or &quot;bigbluesand&quot;
+-- shuffle: shuffle method, one of these: &quot;none&quot;,&quot;random&quot; or &quot;permutation&quot;
+--
+-- Globals:
+-- puzzle_map: the arraymap with the puzzle layout.
+-- parttable: the array with the parts.
+-- part_map: map with the parts stored in it.
+-- permutations: struct with all permutationdata.
+--
+-- DEFAULT VALUES:
+-- map = {&quot;###&quot;,
+--        &quot;# #&quot;,
+--        &quot;###&quot;}
+--
+-- corner = {0,0}
+-- 
+-- type = &quot;redpuzzle&quot;
+-- 
+-- shuffle = &quot;none&quot;
+--
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Wrapper to set a puzzle
+function puzzle(map, corner, type, shuffle)
+    -- Are all parameters set?
+    -- If no, set the default for the missing ones.
+    if map == nil then
+        map = {&quot;###&quot;,&quot;# #&quot;,&quot;###&quot;}
+    end
+    if corner == nil then
+        corner = {0,0}
+    end
+    if type == nil then
+        type = &quot;redpuzzle&quot;
+    end
+    if shuffle == nil then
+        shuffle = &quot;none&quot;
+    end
+
+    -- IS THE map VALID?
+    -- Is the map bigger than 0 x 0 ?
+    local x, y = get_charmap_size(map)
+    if x &lt; 1 or y &lt; 1 then
+        error(&quot;puzzle(map, corner, type, shuffle): Map &quot;..tostring(x)..&quot; x &quot;..tostring(y)..&quot; is too small!\n&quot;)
+    end
+    -- Is the map rectangular?
+    is_rectangular(map)
+    -- If there is no error until here, the map is ok
+    -- IS THE corner VALID?
+    if corner[1] &lt; 0 or corner[2] &lt; 0 then
+        error(&quot;puzzle(map, corner, type, shuffle): Invalid value for top left map corner! &quot;..tostring(corner[1])..&quot;;&quot;..tostring(corner[2])..&quot;. It has to be &gt;= (0;0).\n&quot;)
+    end
+    -- IS THE type VALID?
+    local stone_type = is_valid_type(type)
+    -- IS VALID shuffle?
+    local shuffle_method = is_valid_shuffle(shuffle)
+
+    -- If there is no error until here, all parameters are ok
+    -- Beginn with the work.
+
+    -- Parse the charmap to a table:
+    parse_map(map)
+
+    -- Get the parts:
+    get_parts(puzzle_map)
+
+    -- Determine the shuffle method to use.
+    if shuffle_method == 1 then
+        shuffle_parts_with_noshuffle()
+    elseif shuffle_method == 2 then
+        shuffle_parts_with_random()
+    elseif shuffle_method == 3 then
+        shuffle_parts_with_permutation()
+    end
+
+    plot_puzzle(corner,stone_type)
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Helper functions --
+function get_array_size(array)
+    local its_size = table.getn(array)
+    return its_size
+end
+
+function get_charmap_size(map)
+    local y_size = table.getn(map)
+    local x_size = string.len(map[1])
+    return x_size, y_size
+end
+
+function get_arraymap_size(map)
+    local y_size = table.getn(map)
+    local x_size = table.getn(map[1])
+    return x_size, y_size
+end
+
+function is_inside_map(x,y)
+    local x_size, y_size = get_arraymap_size(puzzle_map)
+    if x &lt; 0 or x &gt; x_size then
+        error(&quot;is_inside_map(x,y): x is not inside of the map! &quot;..tostring(x))
+    end
+    if y &lt; 0 or y &gt; y_size then
+        error(&quot;is_inside_map(x,y): y is not inside of the map! &quot;..tostring(y))
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Security functions --
+function is_rectangular(map)
+    local x_size, y_size = get_charmap_size(map)
+    -- Length of the first line in the map:
+    local buffer = string.len(map[1])
+    local i
+    for i=1, y_size do
+        local temp = string.len(map[i])
+        if temp ~= buffer then
+            error(&quot;puzzle(map, corner, type, shuffle): Map in not rectangular!\n&quot;)
+        end
+    end
+    return 0
+end
+
+function is_valid_type(type)
+    local stone
+    if type == &quot;redpuzzle&quot; then
+        stone = &quot;st-puzzle2&quot;
+    elseif type == &quot;bluepuzzle&quot; then
+        stone = &quot;st-puzzle&quot;
+    elseif type == &quot;bigbrick&quot; then
+        stone = &quot;st-bigbrick&quot;
+    elseif type == &quot;bigbluesand&quot; then
+        stone = &quot;st-bigbluesand&quot;
+    else
+        error(&quot;puzzle(map, corner, type, shuffle): Invald type \&quot;&quot;..tostring(type)..&quot;\&quot;! It has to be one of these types: \&quot;redpuzzle\&quot;,\&quot;bluepuzzle\&quot;,\&quot;bigbrick\&quot; or \&quot;bigbluesand\&quot;.&quot;)
+    end
+    return stone
+end
+
+function is_valid_shuffle(shufflemethod)
+    local method
+    if shufflemethod == &quot;none&quot; then
+        method = 1
+    elseif shufflemethod == &quot;random&quot; then
+        method = 2
+    elseif shufflemethod == &quot;permutation&quot; then
+        method = 3
+    else
+        error(&quot;puzzle(map, corner, type, shuffle): Invald shuffle \&quot;&quot;..tostring(shufflemethod)..&quot;\&quot;! It has to be one of these methodes: \&quot;none\&quot;,\&quot;random\&quot; or \&quot;permutation\&quot;.&quot;)
+    end
+    return method
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Create new, empty map for the puzzle layout:
+function new_puzzlemap(x_size, y_size)
+    -- new global:
+    puzzle_map = {}
+    local i, j = 0,0
+    for i=1, y_size do
+        -- each element of puzzlemap is an array:
+        puzzle_map[i] = {}
+        for j=1, x_size do
+            modify_puzzle_map(j,i,0)
+        end
+    end
+    return 0
+end
+
+function modify_puzzle_map(x,y,type)
+    puzzle_map[y][x] = type
+    return 0
+end
+--------------------------------------------------------------------------------
+-- functions for parsing the original map --
+function get_specific_char(map,x,y)
+    local akt_line = map[y]
+    local this_char = string.sub(akt_line,x,x)
+    return this_char
+end
+
+function parse_this_char(akt_char)
+    if akt_char == &quot; &quot; then
+        -- this is no piece
+        return 0
+    elseif akt_char == &quot;#&quot; then
+        -- this is a piece
+        return 1
+    elseif akt_char == &quot;+&quot; then
+        -- this is a pseudo piece
+        return 2
+    else
+        error(&quot;puzzle(map, corner, type, shuffle): Illegal char \&quot;&quot;..akt_char..&quot;\&quot; in the map! Char must be one of these: \&quot; \&quot; = no piece, \&quot;#\&quot;= piece or \&quot;+\&quot;= pseudo-piece.&quot;)
+    end
+end
+
+function parse_map(charmap)
+    local x_size, y_size = get_charmap_size(charmap)
+    -- Create a new puzzle_map with the right dimensions.
+    new_puzzlemap(x_size, y_size)
+
+    local i, j
+    for i=1, y_size do
+        for j=1, x_size do
+            local akt_char = get_specific_char(charmap,j,i)
+            local puzzle_type = parse_this_char(akt_char)
+            modify_puzzle_map(j,i,puzzle_type)
+        end       
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+function is_on_border(x,y)
+    -- Test, if x and y are on the flood_map border.
+    local x_size, y_size = get_arraymap_size(puzzle_map)
+    local on_left, on_right, on_top, on_bottom = 0, 0, 0, 0
+    -- Is x on a border?
+    if x == 1 then
+        -- is on left border
+        on_left = 1
+    end
+    if x == x_size then
+        -- is on right border
+        on_right = 1
+    end
+    -- Is y on a border?
+    if y == 1 then
+        -- is on top border
+        on_top = 1
+    end
+    if y == y_size then
+        -- is on bottom border
+        on_bottom = 1
+    end
+    return on_left, on_right, on_top, on_bottom
+end
+--------------------------------------------------------------------------------
+-- Create a new, empty table with the parts needed.
+function new_parttable()
+    -- new Global:
+    parttable = {}
+    return 0
+end
+
+function add_to_parttable(part)
+    table.insert(parttable, part)
+    return 0
+end
+
+function has_piece(x,y)
+    -- There is a piece @ x,y
+    if puzzle_map[y][x] == 1 then
+        return true
+    end
+    return false -- no piece found
+end
+
+function has_piece_or_pseudopiece(x,y)
+    -- There is a piece OR pseude piece @ x,y
+    if puzzle_map[y][x] == 1 or puzzle_map[y][x] == 2 then
+        return true
+    end
+    return false -- no piece found
+end
+
+function examine_pos(x,y)
+    local north = &quot;&quot;
+    local east = &quot;&quot;
+    local south = &quot;&quot;
+    local west = &quot;&quot;
+    local part_buffer = &quot;&quot;
+
+    local left, right, top, bottom = is_on_border(x,y)
+    -- NORTH
+    if top ~= 1 then
+        if has_piece_or_pseudopiece(x,y-1) then north = &quot;n&quot; end
+    end
+    -- EAST
+    if right ~= 1 then
+        if has_piece_or_pseudopiece(x+1,y) then east = &quot;e&quot; end
+    end
+    -- SOUTH
+    if bottom ~= 1 then
+        if has_piece_or_pseudopiece(x,y+1) then south = &quot;s&quot; end
+    end
+    -- WEST
+    if left ~= 1 then 
+        if has_piece_or_pseudopiece(x-1,y) then west = &quot;w&quot; end
+    end
+
+    -- To get a valid Stone if no neighbours were present, we define it as the
+    -- (untunneled) cross (&quot;nesw&quot;)
+    if north == &quot;&quot; and east == &quot;&quot; and south == &quot;&quot; and west == &quot;&quot; then
+        north = &quot;n&quot;
+        east = &quot;e&quot;
+        south = &quot;s&quot;
+        west = &quot;w&quot;
+    end
+    
+    part_buffer = north..east..south..west
+    return part_buffer
+end
+
+-- Get the parts needed
+function get_parts(map)
+    new_parttable()
+
+    local x_size, y_size = get_arraymap_size(map)
+    local i, j = 0, 0
+    local part = &quot;&quot;
+    -- Examine where the piece @ x,y has to have connections
+    for i=1, y_size do
+        for j=1, x_size do
+            -- Examine the position only, if there is a part on it!
+            if has_piece(j,i) then
+                part = examine_pos(j,i)
+                add_to_parttable(part)
+            end
+        end
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+-- New map with the kind of all parts at their location in the puzzle
+function new_partmap()
+    -- New Global:
+    part_map = {}
+
+    local x_size, y_size = get_arraymap_size(puzzle_map)
+    local part_counter = 1
+    local i,j = 0,0
+    for i=1, y_size do
+        -- each element of partmap is an array:
+        part_map[i] = {}
+        for j=1, x_size do
+            if has_piece(j,i) then
+                part_map[i][j] = parttable[part_counter]               
+                part_counter = part_counter+1
+            else 
+                part_map[i][j] = &quot;-&quot;
+            end
+        end
+    end
+    return 0
+end
+
+function add_to_partmap(x,y,part)
+    part_map[y][x]=part
+    return 0
+end
+
+function shift_cell(cell,dir)
+-- Move the value of parttable[cell] into direction vector dir.
+    local cell_value = part_map[cell[2]][cell[1]]
+    add_to_partmap(cell[1]+dir[1], cell[2]+dir[2],cell_value)
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Shuffle with the random method
+function shuffle_parts_with_noshuffle()
+    -- Create the part_map with the unshuffled parts.
+    new_partmap()
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Shuffle with the random method
+function swap_parts(k,l)
+    parttable[l], parttable[k] = parttable[k], parttable[l]
+    return 0
+end
+
+function shuffle_parts_with_random()
+
+    local number_swaps = 0
+    local number_parts = get_array_size(parttable)
+    number_swaps = number_parts + math.random(1,number_parts)
+
+    local i = 0
+    for i=1, number_swaps do
+        local r = math.random(1, number_parts)
+        local s = math.random(1, number_parts)
+        swap_parts(r,s)
+    end
+
+    -- Create the part_map with the shuffled parts.
+    new_partmap()
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+-- Shuffle with the permutation method
+function new_permutation_table()
+    -- New Global:
+    permutations = {}
+    return 0
+end
+
+function add_permutation(start, stop)
+    local temp = {{start[1],start[2]},{stop[1],stop[2]}}
+    table.insert(permutations,temp)
+    return 0
+end
+
+function get_permutation_size(array,start)
+    local size_counter = 1
+    -- As long as there are pieces in the line to scan, go on
+    while array[start+size_counter]==1 do
+        size_counter = size_counter+1
+    end
+    return size_counter
+end
+
+-- Scan row 
+function scan_row(row)
+    -- Create a temporary array with the row to scan.
+    local akt_row = puzzle_map[row]
+    local perm_size = 0
+    local i = 1
+    
+    while i &lt;= table.getn(akt_row) do
+    -- We dont need to test the last element ... so i &lt; ...
+        -- If there as a piece at position pos, examine how many pieces will follow
+        if has_piece(i,row) then     
+            perm_size = get_permutation_size(akt_row,i)
+            
+            if perm_size &gt; 1 then
+            -- We have a real permutation (2 or more pieces in a row)
+            -- and not only one single piece.
+                add_permutation({i,row},{i+perm_size-1,row})
+                -- Go on after all the pieces found + 1 gap element.
+                -- If there would be a piece in the gap, the perm_size would be
+                -- one element bigger ...
+                -- The gap element is added below, so we can just increment i
+                -- in every loop.
+                i = i + perm_size --+1
+            end
+        end
+        i = i+1
+    end
+    return 0
+end
+
+-- Scan column
+function scan_col(col)
+    -- Create a temporary array with the column to scan.
+    local akt_col = {}
+    local k = 0
+    for k=1, table.getn(puzzle_map) do
+        akt_col[k] = puzzle_map[k][col]
+    end
+
+    local perm_size = 0
+    local i = 1
+     
+    while i &lt;= table.getn(akt_col) do
+    -- We dont need to test the last element ... so i &lt; ...
+        -- If there as a piece at position pos, examine how many pieces will follow
+        if has_piece(col,i) then     
+            perm_size = get_permutation_size(akt_col,i)
+            
+            if perm_size &gt; 1 then
+            -- We have a real permutation (2 or more pieces in a row)
+            -- and not only one single piece.
+                add_permutation({col,i},{col,i+perm_size-1})
+                -- Go on after all the pieces found + 1 gap element.
+                -- If there would be a piece in the gap, the perm_size would be
+                -- one element bigger ...
+                -- The gap element is added below, so we can just increment i
+                -- in every loop.
+                i = i + perm_size --+1
+            end
+        end
+        i = i+1
+    end
+    return 0
+end
+
+function scan_puzzle_for_permutations()
+    -- Create a new table which will contain all permutations found
+    new_permutation_table()
+
+    local x_size, y_size = get_arraymap_size(puzzle_map)
+
+    local i, j = 0, 0
+    -- Scan the puzzle row for row for permutations
+    for i=1, y_size do
+        scan_row(i)
+    end
+    -- Scan the puzzle column for column for permutations
+    for j=1, x_size do
+        scan_col(j)
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+function is_horizontal(n)
+    -- Is the permutation horizontal or not?
+    -- y_start is same as y_stop?
+    if permutations[n][1][2] == permutations[n][2][2] then
+        return true
+    else
+        return false
+    end
+end
+
+function use_permutation(n)
+-- Use a specific permutation n
+    -- The data of the permutation n
+    local akt_permutation = permutations[n]
+    local akt_permutation_start = akt_permutation[1]
+    local akt_permutation_stop = akt_permutation[2]
+
+    -- Buffer for the last element
+    local last_element_buffer
+    -- Size of the used permutation
+    local permutation_size = 0
+
+    if is_horizontal(n) then
+    -- The permutation we use is a horizontal one.
+        last_element_buffer = part_map[akt_permutation_stop[2]][akt_permutation_stop[1]]
+        permutation_size = akt_permutation_stop[1]-akt_permutation_start[1]+1
+        
+        local i = akt_permutation_stop[1]-1
+        while i &gt;= akt_permutation_start[1] do
+            shift_cell({i,akt_permutation_start[2]},{1,0})
+            i = i-1
+        end
+
+        add_to_partmap(akt_permutation_start[1],akt_permutation_start[2],last_element_buffer)
+    else
+    -- The permutation we use is a vertical one.
+        last_element_buffer = part_map[akt_permutation_stop[2]][akt_permutation_stop[1]]
+        permutation_size = akt_permutation_stop[2]-akt_permutation_start[2]+1
+        
+        local i = akt_permutation_stop[2]-1
+        while i &gt;= akt_permutation_start[2] do
+            shift_cell({akt_permutation_start[1],i},{0,1})
+            i = i-1
+        end
+
+        add_to_partmap(akt_permutation_start[1],akt_permutation_start[2],last_element_buffer)
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+function shuffle_parts_with_permutation()
+    -- New map with the parts in their proper location.
+    new_partmap()
+
+    -- Scan the puzzle for all possible permutations.
+    scan_puzzle_for_permutations()
+
+    -- How many puzzlestones are in the current cluster?
+    local anz_pieces = table.getn(parttable)
+
+    -- How many permutation we have?
+    local anz_permutations = table.getn(permutations)
+
+    if anz_permutations &gt; 0 then
+        local num_permutations_to_do = anz_permutations + math.random(1,anz_pieces)
+        local i = 0
+        for i=1, num_permutations_to_do do
+            r = math.random(1,anz_permutations)
+            use_permutation(r)
+        end
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+--------------------------------------------------------------------------------
+--[[function translate_type(type)
+    local translate_table =
+    {w =    &quot;0001&quot;,
+     s =    &quot;0010&quot;,
+     sw=    &quot;0011&quot;,
+     e =    &quot;0100&quot;,
+     ew =   &quot;0101&quot;,
+     es =   &quot;0110&quot;,
+     esw =  &quot;0111&quot;,
+     n =    &quot;1000&quot;,
+     nw =   &quot;1001&quot;,
+     ns =   &quot;1010&quot;,
+     nsw =  &quot;1011&quot;,
+     ne =   &quot;1100&quot;,
+     new =  &quot;1101&quot;,
+     nes =  &quot;1110&quot;,
+     nesw = &quot;1111&quot;}
+    return translate_table[type]
+end]]
+
+function plot_puzzle(corner,stone_type)
+    local x_size, y_size = get_arraymap_size(puzzle_map)
+    local i = 0
+
+    for i=1, y_size do
+        for j=1, x_size do
+            if has_piece(j,i) then
+                -- Do not use this, because not all stones support this until now.
+                --local sockets = translate_type(part_map[i][j])
+                set_stone(stone_type..&quot;-&quot;..part_map[i][j],corner[1]+j-1,corner[2]+i-1,{})
+            end
+        end
+    end
+    return 0
+end
+--------------------------------------------------------------------------------
+---E--N--D------O--F------L--I--B--P--U--Z--Z--L--E------------------------------
+--------------------------------------------------------------------------------
+    ]]&gt;&lt;/el:luamain&gt;
+    &lt;el:i18n&gt;
+    &lt;/el:i18n&gt;
+  &lt;/el:protected&gt;
+&lt;/el:level&gt;


Property changes on: branches/1.0/data/levels/lib/libpuzzle_2.xml
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:eol-style
   + native


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000015.html">[Enigma-game-svn] r575 - in trunk/data: gfx32 gfx40 gfx48
</A></li>
	<LI>Next message: <A HREF="000017.html">[Enigma-game-svn] r577 - in branches/1.0/data/levels:	enigma_experimental enigma_v lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16">[ date ]</a>
              <a href="thread.html#16">[ thread ]</a>
              <a href="subject.html#16">[ subject ]</a>
              <a href="author.html#16">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
