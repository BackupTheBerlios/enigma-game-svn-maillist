From ral at mail.berlios.de  Sun Feb  1 15:42:01 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 1 Feb 2009 15:42:01 +0100
Subject: [Enigma-game-svn] r1497 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 data/schemas src src/items src/stones
Message-ID: <200902011442.n11Eg1Pe003075@sheep.berlios.de>

Author: ral
Date: 2009-02-01 15:41:59 +0100 (Sun, 01 Feb 2009)
New Revision: 1497

Added:
   trunk/data/gfx32/it_surprise.png
   trunk/data/gfx32/st_surprise.png
   trunk/data/gfx40/it_surprise.png
   trunk/data/gfx40/st_surprise.png
   trunk/data/gfx48/it_surprise.png
   trunk/data/gfx48/st_surprise.png
   trunk/src/items/SurpriseItem.cc
   trunk/src/items/SurpriseItem.hh
   trunk/src/stones/SurpriseStone.cc
   trunk/src/stones/SurpriseStone.hh
Removed:
   trunk/data/gfx32/it-surprise.png
   trunk/data/gfx32/st-surprise.png
   trunk/data/gfx40/it-surprise.png
   trunk/data/gfx40/st-surprise.png
   trunk/data/gfx48/it-surprise.png
   trunk/data/gfx48/st-surprise.png
Modified:
   trunk/data/api1init.lua
   trunk/data/api2init.lua
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Makefile.am
   trunk/src/items.cc
   trunk/src/ox_extra.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/stones.cc
Log:
Trunk 1.1: new API reengineering
- reengineering surprise item and stone - renaming:
  - it-surprise -> it_surprise
  - st-surprise -> st_surprise
  - removed old st-magic from default selection list for Enigma mode
  - add attribute "selection" that takes a token determining the substitution
    objects - a lua table of strings with item/stone names or tile keys with
    an '=' prefix added to the key
  - surprise objects do perform an action to allow a callback to update the
    selection.


Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/data/api1init.lua	2009-02-01 14:41:59 UTC (rev 1497)
@@ -205,6 +205,7 @@
     it_shogun_l = "it-shogun-l",
     it_strip_ew = "it-hstrip",
     it_strip_ns = "it-vstrip",
+    it_surprise = "it-surprise",
     it_sword = "it-sword",
     it_trap = "it-abyss",
     it_trigger = "it-trigger",
@@ -489,6 +490,7 @@
     st_stoneimpulse = "st-stoneimpulse",
     st_stoneimpulse_hollow = "st-stoneimpulse-hollow",
     st_stoneimpulse_movable = "st-stoneimpulse_movable",
+    st_surprise = "st-surprise",
     st_swap = "st-swap",
     st_switch = "st-switch",
     st_switch_black = "st-switch_black",

Modified: trunk/data/api2init.lua
===================================================================
--- trunk/data/api2init.lua	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/data/api2init.lua	2009-02-01 14:41:59 UTC (rev 1497)
@@ -57,6 +57,10 @@
     enigma.LoadLib(string.sub(filename,8,string.len(filename)-4))
 end
 
+function enigma.settile(key, pos)
+    wo[pos] = en.ti[key]
+end
+
 ---------------
 -- Constants --
 ----------------

Deleted: trunk/data/gfx32/it-surprise.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/it_surprise.png (from rev 1494, trunk/data/gfx32/it-surprise.png)

Deleted: trunk/data/gfx32/st-surprise.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/st_surprise.png (from rev 1494, trunk/data/gfx32/st-surprise.png)

Deleted: trunk/data/gfx40/it-surprise.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/it_surprise.png (from rev 1494, trunk/data/gfx40/it-surprise.png)

Deleted: trunk/data/gfx40/st-surprise.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/st_surprise.png (from rev 1494, trunk/data/gfx40/st-surprise.png)

Deleted: trunk/data/gfx48/it-surprise.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_surprise.png (from rev 1494, trunk/data/gfx48/it-surprise.png)

Deleted: trunk/data/gfx48/st-surprise.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/st_surprise.png (from rev 1494, trunk/data/gfx48/st-surprise.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/data/models-2d.lua	2009-02-01 14:41:59 UTC (rev 1497)
@@ -468,7 +468,7 @@
         "it_spoon",
         "it_spring_keep",
         "it_spring_drop",
-        "it-surprise",
+        "it_surprise",
         "it_weight",
         "it-whitebomb"
     }
@@ -788,7 +788,7 @@
     DefStone("st-rubberband")
     DefStone("st_brownpyramide")
     DefStone("st_redmarble")
-    DefStone("st-surprise")
+    DefStone("st_surprise")
     DefStone("st-white1")
     DefStone("st-white2")
     DefStone("st-white3")

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/data/schemas/objects.xml	2009-02-01 14:41:59 UTC (rev 1497)
@@ -75,6 +75,7 @@
     <attr name="secure" type="bool" default="false" rw="rw"/>
     <attr name="scissor" type="bool" default="false" rw="rw"/>
     <attr name="scratches" type="string" default="" rw="rw"/>
+    <attr name="selection" type="tokens" default="nil" rw="rw"/>
     <attr name="spreading" type="double" default="nil" rw="rw"/>
     <attr name="state" type="int" default="0" min="0" max="1" rw="rw"/>
     <attr name="static" type="bool" default="false" rw="rw"/>
@@ -687,6 +688,9 @@
     <object name="it_strip_nesw">
       <attr name="connections" value="nesw"/>
     </object>
+    <object name="it_surprise">
+      <attr name="selection"/>
+    </object>
     <object name="it_sword"/>
     <object name="it_sword_new" init="true"/>
     <object name="it_trigger">
@@ -1570,6 +1574,9 @@
     </object>
     <object name="st_stoneimpulse_new" init="true">
     </object>
+    <object name="st_surprise">
+      <attr name="selection"/>
+    </object>
     <object name="st_swap">
       <attr name="state" rw="r"/>
     </object>

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/Makefile.am	2009-02-01 14:41:59 UTC (rev 1497)
@@ -250,6 +250,8 @@
 	items/SimpleItems.hh	\
 	items/StripItem.cc	\
 	items/StripItem.hh	\
+	items/SurpriseItem.cc	\
+	items/SurpriseItem.hh	\
 	items/Sword.cc		\
 	items/Sword.hh		\
 	items/TrapItem.cc	\
@@ -370,6 +372,8 @@
 	stones/StandardStones.hh	\
 	stones/StoneImpulse.cc	\
 	stones/StoneImpulse.hh	\
+	stones/SurpriseStone.cc	\
+	stones/SurpriseStone.hh	\
 	stones/SwapStone.cc	\
 	stones/SwapStone.hh	\
 	stones/Switch.cc	\

Added: trunk/src/items/SurpriseItem.cc
===================================================================
--- trunk/src/items/SurpriseItem.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/items/SurpriseItem.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -0,0 +1,86 @@
+/*
+ * Copyright (C) 2008 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "items/SurpriseItem.hh"
+#include "errors.hh"
+#include "lua.hh"
+//#include "main.hh"
+//#include "server.hh"
+#include "Value.hh"
+#include "world.hh"
+
+namespace enigma {
+
+/* -------------------- Surprise stone -------------------- */
+    SurpriseItem::SurpriseItem() : Item() {
+    }
+    
+    std::string SurpriseItem::getClass() const {
+        return "it_surprise";
+    }
+
+    Value SurpriseItem::getAttr(const std::string &key) const {
+        if (key == "selection") {
+            static const char *stonename[] = {
+                "it_umbrella",
+                "it_spring_keep",
+                "it-dynamite",
+                "it_coffee",
+                "it_hammer"
+            };
+            if (Value v = Item::getAttr(key))
+                return v; 
+            else {
+                TokenList tl;
+                for (int i = 0; i < 5; i++)
+                    tl.push_back(stonename[i]);
+               return tl;
+            }
+        } else
+            return Item::getAttr(key);
+    }
+    
+    void SurpriseItem::on_drop(Actor *a) {
+        int id = getId();
+            performAction(true);    // may kill the stone!
+        
+        if (Object::getObject(id) != NULL) {  // not killed?
+            TokenList tl = getAttr("selection");
+            int idx = enigma::IntegerRand(1, tl.size()) - 1;
+            TokenList::iterator itr = tl.begin();
+            for (int i = 0; i < idx; i++, ++itr); 
+            std::string name = (*itr).to_string();
+            if (name.find('=') == 0) {
+                if (lua::CallFunc(lua::LevelState(), "enigma.settile", name.substr(1), this)) {
+                    throw XLevelRuntime(std::string("surprise set tile failed:\n")+lua::LastError(lua::LevelState()));
+                }
+            } else {
+                replace(name.c_str());
+            }
+        }
+    }
+    
+    DEF_ITEMTRAITS(SurpriseItem, "it_surprise", it_surprise);
+
+    BOOT_REGISTER_START
+        BootRegister(new SurpriseItem(), "it_surprise");
+    BOOT_REGISTER_END
+
+} // namespace enigma
+


Property changes on: trunk/src/items/SurpriseItem.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/items/SurpriseItem.hh
===================================================================
--- trunk/src/items/SurpriseItem.hh	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/items/SurpriseItem.hh	2009-02-01 14:41:59 UTC (rev 1497)
@@ -0,0 +1,46 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef SURPRISEITEM_HH
+#define SURPRISEITEM_HH
+
+#include "items.hh"
+
+namespace enigma {
+
+    /** 
+     * SurpriseItem 
+     */
+    class SurpriseItem : public Item {
+        CLONEOBJ(SurpriseItem);
+        DECL_ITEMTRAITS;
+    public:
+        SurpriseItem();
+        
+         // Object interface
+        virtual std::string getClass() const;        
+//        virtual void setAttr(const string& key, const Value &val);
+        virtual Value getAttr(const std::string &key) const;
+        
+        // Item interface
+        virtual void on_drop(Actor *a);
+    };
+    
+} // namespace enigma
+
+#endif /*SURPRISEITEM_HH*/


Property changes on: trunk/src/items/SurpriseItem.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/items.cc
===================================================================
--- trunk/src/items.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/items.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -343,7 +343,7 @@
                 // In space, an it-dynamite explodes to an it-sherd:
                 // HOT FIX
                 //replace(it_sherd);
-                replace("it-hollow");
+                replace("it_meditation_hollow");
             } else if (model == "fl_ice") {
                 // In ice, an it-dynamite explodes to an it-crack2:
                 replace("it_crack_m");
@@ -540,31 +540,6 @@
                 itf_static | itf_animation | itf_indestructible | itf_fireproof);
 }
 
-/* -------------------- it-surprise -------------------- */
-namespace
-{
-
-    class SurpriseItem : public Item {
-        CLONEOBJ(SurpriseItem);
-        DECL_ITEMTRAITS;
-
-        void on_drop (Actor *) {
-            static char *items[] = {
-                "it_umbrella",
-                "it_spring_keep",
-                "it-dynamite",
-                "it_coffee",
-                "it_hammer"
-            };
-            replace(items[enigma::IntegerRand (0, 4)]);
-        }
-    public:
-        SurpriseItem() {
-        }
-    };
-    DEF_ITEMTRAITS(SurpriseItem, "it-surprise", it_surprise);
-}
-
 /* -------------------- Drop -------------------- */
 
 namespace
@@ -665,7 +640,6 @@
     RegisterItem (new Explosion2);
     RegisterItem (new Explosion3);
     RegisterItem (new Odometer);
-    RegisterItem (new SurpriseItem);
     RegisterItem (new WhiteBomb);
 }
 

Modified: trunk/src/ox_extra.cc
===================================================================
--- trunk/src/ox_extra.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/ox_extra.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -342,7 +342,7 @@
     UNUSED,                  // OxydExtra item 0x1f
     UNUSED,                  // OxydExtra item 0x20
     "it_spade",                   // OxydExtra item 0x21
-    "it-surprise",                // OxydExtra item 0x22
+    "it_surprise",                // OxydExtra item 0x22
     "it_pin",                     // OxydExtra item 0x23
     UNUSED,                  // OxydExtra item 0x24
     UNUSED,                  // OxydExtra item 0x25

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/ox_oxyd1.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -177,7 +177,7 @@
     "st_grate_cross",           // Oxyd1 stone 0x1a
     "st_grate_framed",          // Oxyd1 stone 0x1b
     "st_break_bug",             // Oxyd1 stone 0x1c
-    "st-surprise",              // Oxyd1 stone 0x1d
+    "st_surprise",              // Oxyd1 stone 0x1d
     "st-chameleon",             // Oxyd1 stone 0x1e
     "st_brick",                 // Oxyd1 stone 0x1f
     "st_granite",               // Oxyd1 stone 0x20
@@ -341,7 +341,7 @@
     "it_pipe_ns",                 // 0x20
     "it_pipe_ew",                 // 0x21
     "it_spade",                   // 0x22
-    "it-surprise",                // 0x23
+    "it_surprise",                // 0x23
     "it_pin",                     // 0x24
     "it_seed",                    // 0x25
     "it_spring_drop",             // 0x26

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/ox_peroxyd.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -214,7 +214,7 @@
     "st-white1",                // PerOxyd stone 0x17 (Looks a little bit different, but function should be the same.)
     "st_grate_cross",           // PerOxyd stone 0x18
     UNUSED,                     // PerOxyd stone 0x19
-    "st-surprise",              // PerOxyd stone 0x1a
+    "st_surprise",              // PerOxyd stone 0x1a
     "st-chameleon",             // PerOxyd stone 0x1b (levels: 23 142 178 183)
     "st_magic_brick",           // PerOxyd stone 0x1c
     "st_camouflage",            // PerOxyd stone 0x1d (green camouflage piece)(if st-camouflage is implemented, put it in here)
@@ -413,7 +413,7 @@
     "it_pipe_ns",                  // 0x1f
     "it_pipe_ew",                  // 0x20
     "it_spade",                   // 0x21
-    "it-surprise",                // 0x22
+    "it_surprise",                // 0x22
     "it_pin",                     // 0x23
     "it_seed",                    // 0x24
     "it_spring_board",            // 0x25

Added: trunk/src/stones/SurpriseStone.cc
===================================================================
--- trunk/src/stones/SurpriseStone.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/stones/SurpriseStone.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -0,0 +1,96 @@
+/*
+ * Copyright (C) 2008 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "stones/SurpriseStone.hh"
+#include "errors.hh"
+#include "lua.hh"
+//#include "main.hh"
+#include "server.hh"
+#include "Value.hh"
+#include "world.hh"
+
+namespace enigma {
+
+/* -------------------- Surprise stone -------------------- */
+    SurpriseStone::SurpriseStone() : Stone ("st_surprise") {
+    }
+    
+    std::string SurpriseStone::getClass() const {
+        return "st_surprise";
+    }
+
+    Value SurpriseStone::getAttr(const std::string &key) const {
+        if (key == "selection") {
+            static const char *stonename[] = {
+                "st_grate_cross",
+                "st_death",
+                "st_surprise",
+                "st_lightglass_hollow",
+                "st_knight",
+                "st_thief",
+                "st_flat_breakable",
+                "st_flat_breaking"
+            };
+            if (Value v = Stone::getAttr(key))
+                return v; 
+            else {
+                TokenList tl;
+                for (int i = 0; i < 8; i++)
+                    tl.push_back(stonename[i]);
+                if (server::GameCompatibility != GAMET_ENIGMA)
+                    tl.push_back("st_dongle");
+               return tl;
+            }
+        } else
+            return Stone::getAttr(key);
+    }
+    
+    void SurpriseStone::actor_hit(const StoneContact &sc) {
+        int id = getId();
+            performAction(true);    // may kill the stone!
+        
+        if (Object::getObject(id) != NULL) {  // not killed?
+            TokenList tl = getAttr("selection");
+            int idx = enigma::IntegerRand(1, tl.size()) - 1;
+            TokenList::iterator itr = tl.begin();
+            for (int i = 0; i < idx; i++, ++itr); 
+            sound_event("stonetransform");
+            std::string name = (*itr).to_string();
+            if (name.find('=') == 0) {
+                if (lua::CallFunc(lua::LevelState(), "enigma.settile", name.substr(1), this)) {
+                    throw XLevelRuntime(std::string("surprise set tile failed:\n")+lua::LastError(lua::LevelState()));
+                }
+            } else {
+                ReplaceStone(get_pos(), MakeStone(name.c_str()));
+            }
+        }
+    }
+    
+    FreezeStatusBits SurpriseStone::get_freeze_bits() {
+        return FREEZEBIT_IRREGULAR;
+    }
+    
+    DEF_TRAITS(SurpriseStone, "st_surprise", st_surprise);
+
+    BOOT_REGISTER_START
+        BootRegister(new SurpriseStone(), "st_surprise");
+    BOOT_REGISTER_END
+
+} // namespace enigma
+


Property changes on: trunk/src/stones/SurpriseStone.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/stones/SurpriseStone.hh
===================================================================
--- trunk/src/stones/SurpriseStone.hh	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/stones/SurpriseStone.hh	2009-02-01 14:41:59 UTC (rev 1497)
@@ -0,0 +1,49 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef SURPRISESTONE_HH
+#define SURPRISESTONE_HH
+
+#include "stones.hh"
+
+#include "stones_internal.hh"
+
+namespace enigma {
+
+    /** 
+     * SurpriseStone 
+     */
+    class SurpriseStone : public Stone {
+        CLONEOBJ(SurpriseStone);
+        DECL_TRAITS;
+    public:
+        SurpriseStone();
+        
+         // Object interface
+        virtual std::string getClass() const;        
+//        virtual void setAttr(const string& key, const Value &val);
+        virtual Value getAttr(const std::string &key) const;
+        
+        // Stone interface
+        virtual void actor_hit(const StoneContact &sc);
+        virtual FreezeStatusBits get_freeze_bits();
+    };
+    
+} // namespace enigma
+
+#endif /*SURPRISESTONE_HH*/


Property changes on: trunk/src/stones/SurpriseStone.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/stones.cc
===================================================================
--- trunk/src/stones.cc	2009-01-31 01:28:40 UTC (rev 1496)
+++ trunk/src/stones.cc	2009-02-01 14:41:59 UTC (rev 1497)
@@ -407,38 +407,6 @@
     }
 }
 
-/* -------------------- Surprise stone -------------------- */
-namespace 
-{
-    class SurpriseStone : public Stone {
-        CLONEOBJ (SurpriseStone);
-        DECL_TRAITS;
-    public:
-        SurpriseStone()
-        {}
-
-        void actor_hit (const StoneContact &) {
-            static const char *stonename[] = {
-                "st_grate_cross",
-                "st_death",
-                "st-surprise",
-                "st_lightglass_hollow",
-                "st_dongle",
-                "st_knight",
-                "st_thief",
-                "st_flat_breakable",
-                "st_flat_breaking"
-            };
-            int idx = enigma::IntegerRand (1, 9) - 1;
-            sound_event ("stonetransform");
-            ReplaceStone (get_pos(), MakeStone (stonename[idx]));
-        }
-    private:
-        FreezeStatusBits get_freeze_bits() { return FREEZEBIT_IRREGULAR; }
-    };
-    DEF_TRAITS(SurpriseStone, "st-surprise", st_surprise);
-}
-
 /* -------------------- Black- and Whiteballs Stones -------------------- */
 
 namespace
@@ -533,7 +501,6 @@
     // Register(new ...);
 
     Register (new SpitterStone);
-    Register (new SurpriseStone);
     Register (new BlackBallsStone);
     Register (new WhiteBallsStone);
 



From ral at mail.berlios.de  Sun Feb  1 16:08:07 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 1 Feb 2009 16:08:07 +0100
Subject: [Enigma-game-svn] r1498 - team_levelpacks/team_test_new_api
Message-ID: <200902011508.n11F877R005508@sheep.berlios.de>

Author: ral
Date: 2009-02-01 16:07:57 +0100 (Sun, 01 Feb 2009)
New Revision: 1498

Added:
   team_levelpacks/team_test_new_api/ralT078_1.xml
Modified:
   team_levelpacks/team_test_new_api/andreasT01_1.xml
   team_levelpacks/team_test_new_api/ralT014_1.xml
   team_levelpacks/team_test_new_api/ralT025_1.xml
   team_levelpacks/team_test_new_api/ralT049_1.xml
   team_levelpacks/team_test_new_api/ralT053_1.xml
   team_levelpacks/team_test_new_api/ralT066_1.xml
   team_levelpacks/team_test_new_api/ralT076_1.xml
Log:
Test Level new API:
- added level for surprise objects
- extended fire level for extinguisher refill



Modified: team_levelpacks/team_test_new_api/andreasT01_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/andreasT01_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/andreasT01_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -37,7 +37,8 @@
 ti["y"] = {"it-dynamite"}
 ti["w"] = ti["."] .. {"st_window", faces="e"}
 ti["r"] = {"it_wrench"}
-ti["t"] = {"it-spring1"}
+ti["t"] = {"it_spring"}
+ti["T"] = {"it_spring_drop"}
 ti["m"] = {"it_landmine"}
 ti["s"] = {"it_sensor", invisible = true} --{"it-spring2"}
 
@@ -55,7 +56,7 @@
 "   uuuu  CCCC  DDDD ",
 "g  uuuu  CCCC  DDDD ",
 "h             0     ",
-"   AAAA  BBBB  EEEE ",
+"T  AAAA  BBBB  EEEE ",
 "t  AAAA  BBBB  EEEE ",
 "s                   ",
 "   FFFF  GGGG  HHHH ",

Modified: team_levelpacks/team_test_new_api/ralT014_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT014_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT014_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -34,7 +34,7 @@
 ti["d"] = {"st_door_b", name="door#"}
 ti["h"] = {"st_chess_black", name="chess#"}
 ti["o"] = {"st_oxyd"}
-ti["B"] = {"it-bag"}
+ti["B"] = {"it_bag"}
 ti["T"] = {"st_thief"}
 ti["t"] = {"fl_thief"}
 ti["1"] = {"it_coffee", "coffee1"}

Modified: team_levelpacks/team_test_new_api/ralT025_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT025_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT025_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -51,17 +51,20 @@
 
 ti["H"] = {"st_fourswitch", counterclock=true, name="anticlock"}
 
+--ti["c"] = {"st_fourswitch", target_1="crash", action="callback", safeaction=true}
+ti["c"] = {"st_fourswitch", target_1="crash", action="callback"}
+ti["C"] = {"st_switch", target={"@", "sw*"}, action={"kill", "kill"}, safeaction=true}
 
 ti["@"] = {"#ac_marble"}
 
 w, h = wo(ti, " ", {
-"            f  s    ",
+"c    C      f  s    ",
 "            F  S    ",
 "        t   g  1    ",
 "H       t      2    ",
 "        t      3    ",
 "        t      4    ",
-"            G  R    ",
+"C           G  R    ",
 "        @           ",
 "        y           ",
 "h u                 ",
@@ -74,6 +77,15 @@
     no["fourstate"]["state"] = sender.y - 2
 end
 
+function crash(value, sender)
+    if value then
+        print("fourswitch crash if not safe - value true")
+    else
+        print("fourswitch crash if not safe - value false")
+        sender:kill()
+    end
+end
+
   ]]></el:luamain>
     <el:i18n>
 	 <el:string el:key="title">

Modified: team_levelpacks/team_test_new_api/ralT049_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT049_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT049_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -9,7 +9,7 @@
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:modes el:easy="false" el:single="true" el:network="true"/>
       <el:comments>
       </el:comments>
       <el:score el:easy="-" el:difficult="-"/>
@@ -47,10 +47,9 @@
 ti["T"] = {"st_thief"}
 ti["t"] = {"fl_thief"}
 
-ti["b"] = {"it-bag"}
-ti["y"] = {"it_yinyang"}
-ti["1"] = ti["y"] .. {"#ac_marble_black"} 
-ti["2"] = ti["y"] .. {"#ac_marble_white"} 
+ti["b"] = {"it_bag"}
+ti["1"] = {"#ac_marble_black"} 
+ti["2"] = {"#ac_marble_white"} 
 
 w, h = wo(ti, " ", {
 "!!!             HHHH",

Modified: team_levelpacks/team_test_new_api/ralT053_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT053_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT053_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -9,7 +9,7 @@
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:modes el:easy="false" el:single="true" el:network="true"/>
       <el:comments>
       </el:comments>
       <el:score el:easy="-" el:difficult="-"/>
@@ -38,8 +38,8 @@
 ti["a"] = {"it_wormhole", "wa", range=0.5, scissor=false}
 ti["b"] = {"it_wormhole", "wb", destination="wa", range=0.5,  scissor=false}
 
-ti["1"] = ti["y"] .. {"#ac_marble_black", "a1"} 
-ti["2"] = ti["y"] .. {"#ac_marble_white", "a2"} 
+ti["1"] = {"#ac_marble_black", "a1"} 
+ti["2"] = {"#ac_marble_white", "a2"} 
 ti["3"] = {"#ac_horse", "a3"} 
 ti["*"] = {"#ac_pearl_white", "s#", owner=DEFAULT, controllers=0} 
 

Modified: team_levelpacks/team_test_new_api/ralT066_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT066_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT066_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -33,8 +33,12 @@
 ti["s"] = {"st_switch", target="@door#*"}
 
 ti["e"] = {"it-dynamite"}
-ti["E"] = {"it-extinguisher"}
+ti["E"] = {"it_extinguisher"}
+ti["F"] = {"it_extinguisher_medium"}
+ti["G"] = {"it_extinguisher_empty", "refill"}
 
+ti["L"] = {"st_switch", target="refill"}
+
 ti["@"] = {"#ac_marble"} 
 
 w, h = wo(ti, " ", {
@@ -42,10 +46,10 @@
 "         V          ",
 "         s          ",
 "#sa###sH####sb######",
+"                   L",
+"                   G",
 "                    ",
-"                    ",
-"                    ",
-"##sa##    eee  EEE  ",
+"##sa##    eee  EEEF ",
 " #   #  ### @       ",
 " tttttttt       s###",
 "uv      ###     V   ",

Modified: team_levelpacks/team_test_new_api/ralT076_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT076_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT076_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -22,7 +22,7 @@
 ti["T"] = {"st_thief"}
 ti["#"] = {"st_granite"}
 ti["c"] = {"it_cherry"}
-ti["x"] = {"it-springboard"}
+ti["x"] = {"it_springboard"}
 
 
 ti["@"] = {"#ac_marble"} 

Added: team_levelpacks/team_test_new_api/ralT078_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT078_1.xml	2009-02-01 14:41:59 UTC (rev 1497)
+++ team_levelpacks/team_test_new_api/ralT078_1.xml	2009-02-01 15:07:57 UTC (rev 1498)
@@ -0,0 +1,72 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test Surprise new API" el:subtitle="" el:id="20090201ral852"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision$" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+
+wo["ConserveLevel"] = true
+
+ti[" "] = {"fl_sahara"}
+ti["1"] = {"#ac_marble"}
+ti["S"] = {"st_surprise"}
+ti["T"] = {"st_surprise", selection={"st_mail","st_mirror","st_pull"}}
+ti["u"] = {"st_chess"}
+ti["U"] = {"st_surprise", selection={"=u","st_pull"}}
+ti["v"] = {"st_nil"} .. ti{"it_magicwand"}
+ti["V"] = {"st_surprise", selection={"=v","=u"}}
+ti["W"] = {"st_surprise", target="changeselection"}
+ti["w"] = {"st_chess", color=WHITE}
+
+ti["i"] = {"it_surprise"}
+ti["j"] = {"it_surprise", selection={"it_cherry","it_banana"}}
+ti["K"] = {"it_nil"} .. ti{"fl_ice"}
+ti["k"] = {"it_surprise", selection={"=K","it_extralife"}}
+ti["l"] = {"it_surprise", target="changeitem"}
+ti["L"] = {"it_wormhole", destination=po(3,3)}
+
+
+
+w, h = wo(ti, " ", {
+"SSSSSSSSSSSSSSSSSSSS",
+"                    ",
+"U                  T",
+"U                  T",
+"U      1           T",
+"U                  T",
+"                   T",
+"V                  T",
+"V       iiiiii     T",
+"V                  T",
+"V         jjjjjj   T",
+"                    ",
+"   WWWWWW  kkk  lll "
+})
+
+function changeselection(value, sender)
+    sender["selection"] = {"st_boulder", "=w"}
+end
+function changeitem(value, sender)
+    sender["selection"] = {"it_hammer", "=L"}
+end
+  ]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT078_1.xml
___________________________________________________________________
Name: svn:keywords
   + Revision
Name: svn:eol-style
   + native



From ral at mail.berlios.de  Sun Feb  1 16:15:13 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 1 Feb 2009 16:15:13 +0100
Subject: [Enigma-game-svn] r1499 - homepage/input
Message-ID: <200902011515.n11FFDWU006299@sheep.berlios.de>

Author: ral
Date: 2009-02-01 16:14:54 +0100 (Sun, 01 Feb 2009)
New Revision: 1499

Modified:
   homepage/input/stat-other.html
   homepage/input/table-hcp.html
   homepage/input/table-rat.html
   homepage/input/table-solved.html
   homepage/input/table-wr.html
   homepage/input/userlist.html
Log:
Homepage:
- statistics January 2009



Modified: homepage/input/stat-other.html
===================================================================
--- homepage/input/stat-other.html	2009-02-01 15:07:57 UTC (rev 1498)
+++ homepage/input/stat-other.html	2009-02-01 15:14:54 UTC (rev 1499)
@@ -1,22 +1,22 @@
   <div class="stat-help">
     <h3>$$Other_Statistics$$</h3>
     <h4>$$Scores$$</h4>
-      86349 $$single_level_scores$$.
+      88846 $$single_level_scores$$.
     <h4>$$Ratings$$</h4>
-      16668 $$single_level_ratings$$ 4.93 $$and_distribution$$: 
+      17020 $$single_level_ratings$$ 4.93 $$and_distribution$$: 
       <table>
         <colgroup><col width="80"><col width="80"></colgroup>
         <tr><th>$$rating$$</th><th>$$count$$</th></tr>
-        <tr><td class="num">0</td><td class="num">105</td></tr>
-        <tr><td class="num">1</td><td class="num">304</td></tr>
-        <tr><td class="num">2</td><td class="num">864</td></tr>
-        <tr><td class="num">3</td><td class="num">2299</td></tr>
-        <tr><td class="num">4</td><td class="num">3154</td></tr>
-        <tr><td class="num">5</td><td class="num">3989</td></tr>
-        <tr><td class="num">6</td><td class="num">2825</td></tr>
-        <tr><td class="num">7</td><td class="num">1900</td></tr>
-        <tr><td class="num">8</td><td class="num">762</td></tr>
-        <tr><td class="num">9</td><td class="num">307</td></tr>
-        <tr><td class="num">10</td><td class="num">159</td></tr>
+        <tr><td class="num">0</td><td class="num">113</td></tr>
+        <tr><td class="num">1</td><td class="num">309</td></tr>
+        <tr><td class="num">2</td><td class="num">884</td></tr>
+        <tr><td class="num">3</td><td class="num">2338</td></tr>
+        <tr><td class="num">4</td><td class="num">3216</td></tr>
+        <tr><td class="num">5</td><td class="num">4079</td></tr>
+        <tr><td class="num">6</td><td class="num">2882</td></tr>
+        <tr><td class="num">7</td><td class="num">1948</td></tr>
+        <tr><td class="num">8</td><td class="num">778</td></tr>
+        <tr><td class="num">9</td><td class="num">313</td></tr>
+        <tr><td class="num">10</td><td class="num">160</td></tr>
       </table>
   </div>

Modified: homepage/input/table-hcp.html
===================================================================
--- homepage/input/table-hcp.html	2009-02-01 15:07:57 UTC (rev 1498)
+++ homepage/input/table-hcp.html	2009-02-01 15:14:54 UTC (rev 1499)
@@ -1,172 +1,174 @@
   <table>
-    <caption>$$Handicap_Statistics$$ $$December$$ 2008</caption>
+    <caption>$$Handicap_Statistics$$ $$January$$ 2009</caption>
     <colgroup><col width="130"><col width="220"></colgroup>
     <tr><th>$$solved_hcp$$</th><th class="left">$$user$$</th></tr>
-     <tr><td class="num">-142.1</td><td class="left">'Moneymaker'</td></tr>
+     <tr><td class="num">-145.9</td><td class="left">'Moneymaker'</td></tr>
      <tr><td class="num"> -89.8</td><td class="left">'daydreamer'</td></tr>
-     <tr><td class="num"> -78.4</td><td class="left">'Stupid'</td></tr>
-     <tr><td class="num"> -78.2</td><td class="left">'Johannes'</td></tr>
-     <tr><td class="num"> -66.8</td><td class="left">'Great Scott'</td></tr>
-     <tr><td class="num"> -61.2</td><td class="left">'dev0'</td></tr>
-     <tr><td class="num"> -56.9</td><td class="left">'Duffy'</td></tr>
+     <tr><td class="num"> -78.5</td><td class="left">'Stupid'</td></tr>
+     <tr><td class="num"> -78.3</td><td class="left">'Johannes'</td></tr>
+     <tr><td class="num"> -67.1</td><td class="left">'Great Scott'</td></tr>
+     <tr><td class="num"> -64.7</td><td class="left">'dev0'</td></tr>
+     <tr><td class="num"> -57.1</td><td class="left">'Mentist'</td></tr>
+     <tr><td class="num"> -57.1</td><td class="left">'Duffy'</td></tr>
      <tr><td class="num"> -55.7</td><td class="left">'Malla'</td></tr>
      <tr><td class="num"> -52.8</td><td class="left">'ryujun'</td></tr>
-     <tr><td class="num"> -47.4</td><td class="left">'Alexandros'</td></tr>
-     <tr><td class="num"> -46.1</td><td class="left">'Crystalicum'</td></tr>
+     <tr><td class="num"> -50.5</td><td class="left">'Crystalicum'</td></tr>
+     <tr><td class="num"> -48.0</td><td class="left">'Daisy'</td></tr>
+     <tr><td class="num"> -47.6</td><td class="left">'Alexandros'</td></tr>
      <tr><td class="num"> -45.1</td><td class="left">'Django'</td></tr>
-     <tr><td class="num"> -42.9</td><td class="left">'Gloop'</td></tr>
-     <tr><td class="num"> -42.2</td><td class="left">'Mentist'</td></tr>
-     <tr><td class="num"> -37.8</td><td class="left">'Daisy'</td></tr>
+     <tr><td class="num"> -43.0</td><td class="left">'Gloop'</td></tr>
      <tr><td class="num"> -36.0</td><td class="left">'Taztunes'</td></tr>
-     <tr><td class="num"> -33.3</td><td class="left">'Safalra'</td></tr>
-     <tr><td class="num"> -32.9</td><td class="left">'Emmanuel'</td></tr>
-     <tr><td class="num"> -30.4</td><td class="left">'Ludmian'</td></tr>
-     <tr><td class="num"> -27.8</td><td class="left">'B-Huff'</td></tr>
-     <tr><td class="num"> -25.8</td><td class="left">'dpl'</td></tr>
-     <tr><td class="num"> -25.0</td><td class="left">'Zekobah'</td></tr>
+     <tr><td class="num"> -33.4</td><td class="left">'Safalra'</td></tr>
+     <tr><td class="num"> -33.1</td><td class="left">'Emmanuel'</td></tr>
+     <tr><td class="num"> -30.8</td><td class="left">'Ludmian'</td></tr>
+     <tr><td class="num"> -28.0</td><td class="left">'B-Huff'</td></tr>
+     <tr><td class="num"> -26.0</td><td class="left">'dpl'</td></tr>
+     <tr><td class="num"> -25.2</td><td class="left">'Zekobah'</td></tr>
      <tr><td class="num"> -24.0</td><td class="left">'bojster'</td></tr>
-     <tr><td class="num"> -21.1</td><td class="left">'ged'</td></tr>
-     <tr><td class="num"> -19.3</td><td class="left">'hendrik'</td></tr>
-     <tr><td class="num"> -18.1</td><td class="left">'ABS'</td></tr>
-     <tr><td class="num"> -17.0</td><td class="left">'Ghatotkacha'</td></tr>
-     <tr><td class="num"> -16.6</td><td class="left">'Raoul'</td></tr>
-     <tr><td class="num"> -14.6</td><td class="left">'Ronald'</td></tr>
-     <tr><td class="num"> -13.2</td><td class="left">'Angolino'</td></tr>
-     <tr><td class="num">  -9.4</td><td class="left">'Lukas'</td></tr>
-     <tr><td class="num">  -8.7</td><td class="left">'HuB34'</td></tr>
+     <tr><td class="num"> -21.4</td><td class="left">'ged'</td></tr>
+     <tr><td class="num"> -19.6</td><td class="left">'hendrik'</td></tr>
+     <tr><td class="num"> -18.3</td><td class="left">'ABS'</td></tr>
+     <tr><td class="num"> -17.7</td><td class="left">'Raoul'</td></tr>
+     <tr><td class="num"> -17.3</td><td class="left">'Ghatotkacha'</td></tr>
+     <tr><td class="num"> -14.7</td><td class="left">'Ronald'</td></tr>
+     <tr><td class="num"> -13.4</td><td class="left">'Angolino'</td></tr>
+     <tr><td class="num">  -9.5</td><td class="left">'Lukas'</td></tr>
+     <tr><td class="num">  -8.8</td><td class="left">'HuB34'</td></tr>
      <tr><td class="num">  -5.4</td><td class="left">'Iceshark7'</td></tr>
-     <tr><td class="num">  -5.1</td><td class="left">'Timo'</td></tr>
-     <tr><td class="num">  -4.9</td><td class="left">'joseba'</td></tr>
-     <tr><td class="num">  -1.6</td><td class="left">'Daniel'</td></tr>
-     <tr><td class="num">  -0.4</td><td class="left">'fabian'</td></tr>
-     <tr><td class="num">  -0.0</td><td class="left">'U-Punkt'</td></tr>
-     <tr><td class="num">   0.2</td><td class="left">'Hairball'</td></tr>
-     <tr><td class="num">   0.9</td><td class="left">'Craven'</td></tr>
+     <tr><td class="num">  -5.2</td><td class="left">'Timo'</td></tr>
+     <tr><td class="num">  -5.1</td><td class="left">'joseba'</td></tr>
+     <tr><td class="num">  -1.7</td><td class="left">'Daniel'</td></tr>
+     <tr><td class="num">  -0.5</td><td class="left">'fabian'</td></tr>
+     <tr><td class="num">  -0.1</td><td class="left">'U-Punkt'</td></tr>
+     <tr><td class="num">   0.0</td><td class="left">'Hairball'</td></tr>
+     <tr><td class="num">   1.0</td><td class="left">'Craven'</td></tr>
      <tr><td class="num">   1.0</td><td class="left">'JuSt'</td></tr>
-     <tr><td class="num">   1.3</td><td class="left">'Wuzzy'</td></tr>
+     <tr><td class="num">   1.2</td><td class="left">'Wuzzy'</td></tr>
      <tr><td class="num">   1.7</td><td class="left">'Freshman'</td></tr>
      <tr><td class="num">   2.6</td><td class="left">'mrduke'</td></tr>
      <tr><td class="num">   3.6</td><td class="left">'para_doks'</td></tr>
      <tr><td class="num">   3.7</td><td class="left">'Kevin'</td></tr>
+     <tr><td class="num">   3.8</td><td class="left">'mecke'</td></tr>
      <tr><td class="num">   3.9</td><td class="left">'Tobias'</td></tr>
-     <tr><td class="num">   5.2</td><td class="left">'Guglielmo'</td></tr>
-     <tr><td class="num">   5.4</td><td class="left">'alfred69'</td></tr>
-     <tr><td class="num">   5.6</td><td class="left">'Tiza'</td></tr>
-     <tr><td class="num">   6.4</td><td class="left">'Andy'</td></tr>
-     <tr><td class="num">   6.4</td><td class="left">'serpent'</td></tr>
-     <tr><td class="num">   8.7</td><td class="left">'Austin'</td></tr>
-     <tr><td class="num">  10.1</td><td class="left">'shoki'</td></tr>
-     <tr><td class="num">  11.1</td><td class="left">'mecke'</td></tr>
-     <tr><td class="num">  12.8</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-     <tr><td class="num">  14.6</td><td class="left">'Andreas'</td></tr>
+     <tr><td class="num">   4.4</td><td class="left">'Dime'</td></tr>
+     <tr><td class="num">   5.1</td><td class="left">'Guglielmo'</td></tr>
+     <tr><td class="num">   5.2</td><td class="left">'Tiza'</td></tr>
+     <tr><td class="num">   5.3</td><td class="left">'alfred69'</td></tr>
+     <tr><td class="num">   5.9</td><td class="left">'Sigma'</td></tr>
+     <tr><td class="num">   6.2</td><td class="left">'serpent'</td></tr>
+     <tr><td class="num">   6.3</td><td class="left">'Andy'</td></tr>
+     <tr><td class="num">   8.6</td><td class="left">'Austin'</td></tr>
+     <tr><td class="num">  10.0</td><td class="left">'shoki'</td></tr>
+     <tr><td class="num">  12.7</td><td class="left">'ShadowPhrogg32642342'</td></tr>
+     <tr><td class="num">  14.5</td><td class="left">'Andreas'</td></tr>
      <tr><td class="num">  14.9</td><td class="left">'Mark P.'</td></tr>
-     <tr><td class="num">  15.9</td><td class="left">'AlephD'</td></tr>
-     <tr><td class="num">  16.1</td><td class="left">'Chocolate Zero'</td></tr>
-     <tr><td class="num">  16.2</td><td class="left">'Sim_Ed'</td></tr>
-     <tr><td class="num">  16.7</td><td class="left">'Agnieszka'</td></tr>
+     <tr><td class="num">  15.9</td><td class="left">'Chocolate Zero'</td></tr>
+     <tr><td class="num">  16.0</td><td class="left">'AlephD'</td></tr>
+     <tr><td class="num">  16.1</td><td class="left">'Sim_Ed'</td></tr>
+     <tr><td class="num">  16.5</td><td class="left">'Agnieszka'</td></tr>
      <tr><td class="num">  20.3</td><td class="left">'Ale'</td></tr>
      <tr><td class="num">  20.7</td><td class="left">'Alex'</td></tr>
      <tr><td class="num">  23.0</td><td class="left">'Antonio EE'</td></tr>
      <tr><td class="num">  23.3</td><td class="left">'Jinajon'</td></tr>
-     <tr><td class="num">  23.5</td><td class="left">'Klaus'</td></tr>
+     <tr><td class="num">  23.4</td><td class="left">'Klaus'</td></tr>
      <tr><td class="num">  23.9</td><td class="left">'Marc-Hendrik'</td></tr>
-     <tr><td class="num">  24.0</td><td class="left">'Chris'</td></tr>
-     <tr><td class="num">  24.9</td><td class="left">'Thomas'</td></tr>
-     <tr><td class="num">  25.2</td><td class="left">'Feynman'</td></tr>
-     <tr><td class="num">  25.7</td><td class="left">'hdwow'</td></tr>
-     <tr><td class="num">  26.1</td><td class="left">'Gottseinsohn'</td></tr>
-     <tr><td class="num">  26.2</td><td class="left">'Bent'</td></tr>
-     <tr><td class="num">  26.9</td><td class="left">'Hans-HD'</td></tr>
+     <tr><td class="num">  24.2</td><td class="left">'Chris'</td></tr>
+     <tr><td class="num">  24.8</td><td class="left">'Thomas'</td></tr>
+     <tr><td class="num">  25.3</td><td class="left">'Feynman'</td></tr>
+     <tr><td class="num">  25.6</td><td class="left">'hdwow'</td></tr>
+     <tr><td class="num">  26.0</td><td class="left">'Gottseinsohn'</td></tr>
+     <tr><td class="num">  26.3</td><td class="left">'Bent'</td></tr>
+     <tr><td class="num">  26.8</td><td class="left">'Hans-HD'</td></tr>
      <tr><td class="num">  28.2</td><td class="left">'un_guru'</td></tr>
-     <tr><td class="num">  28.5</td><td class="left">'Little_Mole'</td></tr>
-     <tr><td class="num">  28.8</td><td class="left">'J3FF'</td></tr>
-     <tr><td class="num">  29.6</td><td class="left">'biotopa'</td></tr>
+     <tr><td class="num">  28.4</td><td class="left">'Little_Mole'</td></tr>
+     <tr><td class="num">  28.7</td><td class="left">'J3FF'</td></tr>
+     <tr><td class="num">  29.7</td><td class="left">'biotopa'</td></tr>
+     <tr><td class="num">  29.7</td><td class="left">'GiannuzzITA'</td></tr>
      <tr><td class="num">  29.7</td><td class="left">'oxyd4ever'</td></tr>
      <tr><td class="num">  29.8</td><td class="left">'Vinksu'</td></tr>
-     <tr><td class="num">  29.9</td><td class="left">'GiannuzzITA'</td></tr>
-     <tr><td class="num">  30.3</td><td class="left">'oblo'</td></tr>
-     <tr><td class="num">  30.6</td><td class="left">'Sigma'</td></tr>
+     <tr><td class="num">  30.2</td><td class="left">'oblo'</td></tr>
      <tr><td class="num">  30.6</td><td class="left">'redsantz'</td></tr>
      <tr><td class="num">  31.4</td><td class="left">'geembo_90'</td></tr>
-     <tr><td class="num">  31.9</td><td class="left">'Edgar_Flesk'</td></tr>
+     <tr><td class="num">  31.7</td><td class="left">'Edgar_Flesk'</td></tr>
      <tr><td class="num">  32.0</td><td class="left">'Melanie'</td></tr>
-     <tr><td class="num">  32.5</td><td class="left">'IChrisI'</td></tr>
+     <tr><td class="num">  32.4</td><td class="left">'IChrisI'</td></tr>
      <tr><td class="num">  32.7</td><td class="left">'NorthForty'</td></tr>
      <tr><td class="num">  32.9</td><td class="left">'erich'</td></tr>
      <tr><td class="num">  32.9</td><td class="left">'Gorn'</td></tr>
-     <tr><td class="num">  35.8</td><td class="left">'niebie'</td></tr>
+     <tr><td class="num">  35.7</td><td class="left">'niebie'</td></tr>
      <tr><td class="num">  35.8</td><td class="left">'MicWa'</td></tr>
      <tr><td class="num">  36.0</td><td class="left">'WP319'</td></tr>
      <tr><td class="num">  36.3</td><td class="left">'Kosby'</td></tr>
      <tr><td class="num">  37.2</td><td class="left">'alain'</td></tr>
-     <tr><td class="num">  38.0</td><td class="left">'Liam Sheehan'</td></tr>
+     <tr><td class="num">  37.9</td><td class="left">'Liam Sheehan'</td></tr>
      <tr><td class="num">  38.1</td><td class="left">'Rugby4ever'</td></tr>
+     <tr><td class="num">  38.7</td><td class="left">'H-J.Epting'</td></tr>
      <tr><td class="num">  39.3</td><td class="left">'Drotten'</td></tr>
-     <tr><td class="num">  39.4</td><td class="left">'WesleyCrusher'</td></tr>
-     <tr><td class="num">  39.8</td><td class="left">'Archcorenth'</td></tr>
-     <tr><td class="num">  40.1</td><td class="left">'Harry Lim'</td></tr>
-     <tr><td class="num">  40.5</td><td class="left">'B-man'</td></tr>
-     <tr><td class="num">  40.7</td><td class="left">'Nfol'</td></tr>
-     <tr><td class="num">  41.7</td><td class="left">'Tiger'</td></tr>
-     <tr><td class="num">  41.7</td><td class="left">'gringer'</td></tr>
+     <tr><td class="num">  39.3</td><td class="left">'WesleyCrusher'</td></tr>
+     <tr><td class="num">  39.7</td><td class="left">'Archcorenth'</td></tr>
+     <tr><td class="num">  40.0</td><td class="left">'Harry Lim'</td></tr>
+     <tr><td class="num">  40.4</td><td class="left">'B-man'</td></tr>
+     <tr><td class="num">  40.6</td><td class="left">'Nfol'</td></tr>
+     <tr><td class="num">  41.6</td><td class="left">'Tiger'</td></tr>
+     <tr><td class="num">  41.8</td><td class="left">'gringer'</td></tr>
      <tr><td class="num">  42.2</td><td class="left">'Snaily'</td></tr>
      <tr><td class="num">  42.3</td><td class="left">'Vlad'</td></tr>
      <tr><td class="num">  43.5</td><td class="left">'Momcat'</td></tr>
-     <tr><td class="num">  44.2</td><td class="left">'Breezy'</td></tr>
-     <tr><td class="num">  44.4</td><td class="left">'Uli'</td></tr>
+     <tr><td class="num">  44.1</td><td class="left">'Breezy'</td></tr>
+     <tr><td class="num">  44.5</td><td class="left">'Uli'</td></tr>
      <tr><td class="num">  45.8</td><td class="left">'Tarim'</td></tr>
      <tr><td class="num">  46.6</td><td class="left">'IntKecsk'</td></tr>
-     <tr><td class="num">  47.0</td><td class="left">'tjRaven'</td></tr>
+     <tr><td class="num">  46.9</td><td class="left">'tjRaven'</td></tr>
      <tr><td class="num">  47.7</td><td class="left">'Valkyrie2'</td></tr>
      <tr><td class="num">  47.9</td><td class="left">'ntaeijr'</td></tr>
      <tr><td class="num">  47.9</td><td class="left">'mhatta'</td></tr>
-     <tr><td class="num">  49.6</td><td class="left">'Zak'</td></tr>
+     <tr><td class="num">  49.7</td><td class="left">'Zak'</td></tr>
      <tr><td class="num">  50.1</td><td class="left">'rima'</td></tr>
      <tr><td class="num">  50.5</td><td class="left">'Sandra'</td></tr>
+     <tr><td class="num">  50.6</td><td class="left">'brynn'</td></tr>
      <tr><td class="num">  51.1</td><td class="left">'ReasonAnce'</td></tr>
-     <tr><td class="num">  51.4</td><td class="left">'jdcampo'</td></tr>
+     <tr><td class="num">  51.5</td><td class="left">'jdcampo'</td></tr>
      <tr><td class="num">  51.7</td><td class="left">'Jeffrey S'</td></tr>
-     <tr><td class="num">  52.0</td><td class="left">'brynn'</td></tr>
-     <tr><td class="num">  52.4</td><td class="left">'Slav'</td></tr>
-     <tr><td class="num">  52.5</td><td class="left">'AkRa'</td></tr>
+     <tr><td class="num">  51.8</td><td class="left">'Tomson'</td></tr>
+     <tr><td class="num">  52.5</td><td class="left">'Slav'</td></tr>
+     <tr><td class="num">  52.6</td><td class="left">'AkRa'</td></tr>
      <tr><td class="num">  52.9</td><td class="left">'Pascal'</td></tr>
      <tr><td class="num">  52.9</td><td class="left">'Vaily'</td></tr>
-     <tr><td class="num">  53.8</td><td class="left">'Neophilus'</td></tr>
      <tr><td class="num">  53.9</td><td class="left">'Turbogurk'</td></tr>
+     <tr><td class="num">  53.9</td><td class="left">'Neophilus'</td></tr>
      <tr><td class="num">  53.9</td><td class="left">'Cyphase'</td></tr>
-     <tr><td class="num">  56.2</td><td class="left">'krazy62'</td></tr>
+     <tr><td class="num">  56.1</td><td class="left">'krazy62'</td></tr>
      <tr><td class="num">  57.2</td><td class="left">'Adonica'</td></tr>
      <tr><td class="num">  57.5</td><td class="left">'Kadu'</td></tr>
      <tr><td class="num">  59.6</td><td class="left">'Mecki'</td></tr>
      <tr><td class="num">  60.2</td><td class="left">'Sopoforic'</td></tr>
      <tr><td class="num">  61.0</td><td class="left">'jumbo'</td></tr>
-     <tr><td class="num">  61.5</td><td class="left">'jdrexler'</td></tr>
+     <tr><td class="num">  61.6</td><td class="left">'jdrexler'</td></tr>
      <tr><td class="num">  62.3</td><td class="left">'Asbel'</td></tr>
      <tr><td class="num">  64.1</td><td class="left">'tasker'</td></tr>
      <tr><td class="num">  64.4</td><td class="left">'Meeve'</td></tr>
      <tr><td class="num">  66.4</td><td class="left">'ael'</td></tr>
-     <tr><td class="num">  66.7</td><td class="left">'Tomson'</td></tr>
      <tr><td class="num">  67.0</td><td class="left">'Samuel'</td></tr>
-     <tr><td class="num">  67.2</td><td class="left">'schmusi20'</td></tr>
-     <tr><td class="num">  67.2</td><td class="left">'Fred_the_wise'</td></tr>
-     <tr><td class="num">  67.4</td><td class="left">'Sparkey'</td></tr>
+     <tr><td class="num">  67.1</td><td class="left">'Fred_the_wise'</td></tr>
+     <tr><td class="num">  67.3</td><td class="left">'schmusi20'</td></tr>
+     <tr><td class="num">  67.5</td><td class="left">'Sparkey'</td></tr>
      <tr><td class="num">  67.8</td><td class="left">'Alf'</td></tr>
-     <tr><td class="num">  69.5</td><td class="left">'Magnus and Susi'</td></tr>
-     <tr><td class="num">  70.1</td><td class="left">'Zhura'</td></tr>
+     <tr><td class="num">  69.4</td><td class="left">'Magnus and Susi'</td></tr>
+     <tr><td class="num">  70.0</td><td class="left">'Zhura'</td></tr>
      <tr><td class="num">  70.8</td><td class="left">'xmouse'</td></tr>
      <tr><td class="num">  72.2</td><td class="left">'Joona'</td></tr>
-     <tr><td class="num">  72.3</td><td class="left">'AQZ'</td></tr>
-     <tr><td class="num">  73.9</td><td class="left">'crypto_rsa'</td></tr>
-     <tr><td class="num">  74.1</td><td class="left">'Dvorhagen'</td></tr>
+     <tr><td class="num">  72.4</td><td class="left">'AQZ'</td></tr>
+     <tr><td class="num">  74.0</td><td class="left">'crypto_rsa'</td></tr>
+     <tr><td class="num">  74.2</td><td class="left">'Dvorhagen'</td></tr>
      <tr><td class="num">  75.0</td><td class="left">'Eselchen'</td></tr>
-     <tr><td class="num">  75.2</td><td class="left">'Nicol?s'</td></tr>
+     <tr><td class="num">  75.3</td><td class="left">'Nicol?s'</td></tr>
      <tr><td class="num">  75.3</td><td class="left">'jojo'</td></tr>
-     <tr><td class="num">  75.3</td><td class="left">'AsuCaga'</td></tr>
-     <tr><td class="num">  78.8</td><td class="left">'colonel crayon'</td></tr>
+     <tr><td class="num">  75.4</td><td class="left">'AsuCaga'</td></tr>
+     <tr><td class="num">  78.9</td><td class="left">'colonel crayon'</td></tr>
      <tr><td class="num">  79.5</td><td class="left">'Kroetchen'</td></tr>
-     <tr><td class="num">  80.3</td><td class="left">'Agares'</td></tr>
+     <tr><td class="num">  80.4</td><td class="left">'Agares'</td></tr>
      <tr><td class="num">  85.2</td><td class="left">'Miel56'</td></tr>
      <tr><td class="num">  90.1</td><td class="left">'The red O'</td></tr>
      <tr><td class="num">  90.3</td><td class="left">'Sequoyah'</td></tr>
-     <tr><td class="num">  92.3</td><td class="left">'Michael'</td></tr>
+     <tr><td class="num">  92.4</td><td class="left">'Michael'</td></tr>
   </table>

Modified: homepage/input/table-rat.html
===================================================================
--- homepage/input/table-rat.html	2009-02-01 15:07:57 UTC (rev 1498)
+++ homepage/input/table-rat.html	2009-02-01 15:14:54 UTC (rev 1499)
@@ -1,10 +1,10 @@
   <table>
-    <caption>$$Rating_Statistics$$ $$December$$ 2008</caption>
+    <caption>$$Rating_Statistics$$ $$January$$ 2009</caption>
     <colgroup><col width="80"><col width="80"><col width="220"></colgroup>
     <tr><th>$$count$$</th><th>$$average$$</th><th class="left">$$user$$</th></tr>    <tr><td class="num">1062</td><td class="num"> 5.06</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num">1056</td><td class="num"> 4.83</td><td class="left">'Taztunes'</td></tr>
     <tr><td class="num">1045</td><td class="num"> 4.93</td><td class="left">'Crystalicum'</td></tr>
-    <tr><td class="num">1033</td><td class="num"> 5.05</td><td class="left">'dev0'</td></tr>
+    <tr><td class="num">1035</td><td class="num"> 5.05</td><td class="left">'dev0'</td></tr>
     <tr><td class="num">896</td><td class="num"> 4.79</td><td class="left">'daydreamer'</td></tr>
     <tr><td class="num">871</td><td class="num"> 5.09</td><td class="left">'Stupid'</td></tr>
     <tr><td class="num">653</td><td class="num"> 5.01</td><td class="left">'Duffy'</td></tr>
@@ -15,21 +15,22 @@
     <tr><td class="num">562</td><td class="num"> 4.48</td><td class="left">'Alexandros'</td></tr>
     <tr><td class="num">534</td><td class="num"> 4.97</td><td class="left">'B-Huff'</td></tr>
     <tr><td class="num">511</td><td class="num"> 5.30</td><td class="left">'Lukas'</td></tr>
-    <tr><td class="num">504</td><td class="num"> 5.05</td><td class="left">'Ronald'</td></tr>
+    <tr><td class="num">505</td><td class="num"> 5.05</td><td class="left">'Ronald'</td></tr>
     <tr><td class="num">482</td><td class="num"> 4.04</td><td class="left">'Vinksu'</td></tr>
     <tr><td class="num">448</td><td class="num"> 5.08</td><td class="left">'Johannes'</td></tr>
     <tr><td class="num">433</td><td class="num"> 4.36</td><td class="left">'ged'</td></tr>
+    <tr><td class="num">401</td><td class="num"> 4.99</td><td class="left">'Tiza'</td></tr>
+    <tr><td class="num">390</td><td class="num"> 5.48</td><td class="left">'Mentist'</td></tr>
     <tr><td class="num">388</td><td class="num"> 4.86</td><td class="left">'Gloop'</td></tr>
-    <tr><td class="num">379</td><td class="num"> 5.00</td><td class="left">'Tiza'</td></tr>
     <tr><td class="num">307</td><td class="num"> 4.01</td><td class="left">'Sim_Ed'</td></tr>
     <tr><td class="num">285</td><td class="num"> 4.60</td><td class="left">'ABS'</td></tr>
     <tr><td class="num">254</td><td class="num"> 4.91</td><td class="left">'JuSt'</td></tr>
     <tr><td class="num">208</td><td class="num"> 6.15</td><td class="left">'Momcat'</td></tr>
     <tr><td class="num">200</td><td class="num"> 5.74</td><td class="left">'Malla'</td></tr>
-    <tr><td class="num">195</td><td class="num"> 5.78</td><td class="left">'Mentist'</td></tr>
     <tr><td class="num">187</td><td class="num"> 5.05</td><td class="left">'WP319'</td></tr>
     <tr><td class="num">135</td><td class="num"> 4.13</td><td class="left">'Edgar_Flesk'</td></tr>
-    <tr><td class="num">129</td><td class="num"> 5.64</td><td class="left">'Raoul'</td></tr>
+    <tr><td class="num">132</td><td class="num"> 5.65</td><td class="left">'Raoul'</td></tr>
+    <tr><td class="num">124</td><td class="num"> 4.44</td><td class="left">'Sigma'</td></tr>
     <tr><td class="num"> 97</td><td class="num"> 4.16</td><td class="left">'Safalra'</td></tr>
     <tr><td class="num"> 91</td><td class="num"> 4.41</td><td class="left">'Zhura'</td></tr>
     <tr><td class="num"> 85</td><td class="num"> 4.76</td><td class="left">'para_doks'</td></tr>
@@ -65,6 +66,7 @@
     <tr><td class="num">  8</td><td class="num"> 3.25</td><td class="left">'Vlad'</td></tr>
     <tr><td class="num">  8</td><td class="num"> 7.63</td><td class="left">'Antonio EE'</td></tr>
     <tr><td class="num">  7</td><td class="num"> 4.29</td><td class="left">'Snaily'</td></tr>
+    <tr><td class="num">  6</td><td class="num"> 5.17</td><td class="left">'Dime'</td></tr>
     <tr><td class="num">  5</td><td class="num"> 6.80</td><td class="left">'Breezy'</td></tr>
     <tr><td class="num">  5</td><td class="num"> 9.20</td><td class="left">'HuB34'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 6.75</td><td class="left">'Agares'</td></tr>
@@ -83,7 +85,6 @@
     <tr><td class="num">  2</td><td class="num"> 0.00</td><td class="left">'mhatta'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'jumbo'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'ael'</td></tr>
-    <tr><td class="num">  1</td><td class="num"> 1.00</td><td class="left">'Sigma'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 6.00</td><td class="left">'Slav'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'Uli'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 0.00</td><td class="left">'Fred_the_wise'</td></tr>

Modified: homepage/input/table-solved.html
===================================================================
--- homepage/input/table-solved.html	2009-02-01 15:07:57 UTC (rev 1498)
+++ homepage/input/table-solved.html	2009-02-01 15:14:54 UTC (rev 1499)
@@ -1,12 +1,12 @@
   <table>
-    <caption>$$Solved_Level_Statistics$$ $$December$$ 2008</caption>
+    <caption>$$Solved_Level_Statistics$$ $$January$$ 2009</caption>
     <colgroup><col width="130"><col width="130"><col width="130"><col width="240"></colgroup>
     <tr><th>$$difficult$$</th><th>$$easy$$</th><th>$$total$$</th><th class="left">$$user$$</th></tr>
     <tr><td class="num">1045/1045</td><td class="num">189/189</td><td class="num">100.00%</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num">1043/1045</td><td class="num">189/189</td><td class="num"> 99.84%</td><td class="left">'Taztunes'</td></tr>
-    <tr><td class="num">1034/1045</td><td class="num">188/189</td><td class="num"> 99.03%</td><td class="left">'dev0'</td></tr>
+    <tr><td class="num">1036/1045</td><td class="num">189/189</td><td class="num"> 99.27%</td><td class="left">'dev0'</td></tr>
     <tr><td class="num">1029/1045</td><td class="num">185/189</td><td class="num"> 98.38%</td><td class="left">'Freshman'</td></tr>
-    <tr><td class="num">1024/1045</td><td class="num">188/189</td><td class="num"> 98.22%</td><td class="left">'Ronald'</td></tr>
+    <tr><td class="num">1025/1045</td><td class="num">189/189</td><td class="num"> 98.38%</td><td class="left">'Ronald'</td></tr>
     <tr><td class="num">1029/1045</td><td class="num">183/189</td><td class="num"> 98.22%</td><td class="left">'Craven'</td></tr>
     <tr><td class="num">1026/1045</td><td class="num">185/189</td><td class="num"> 98.14%</td><td class="left">'Ale'</td></tr>
     <tr><td class="num">1026/1045</td><td class="num">184/189</td><td class="num"> 98.06%</td><td class="left">'daydreamer'</td></tr>
@@ -14,7 +14,7 @@
     <tr><td class="num">1021/1045</td><td class="num">177/189</td><td class="num"> 97.08%</td><td class="left">'Malla'</td></tr>
     <tr><td class="num">1014/1045</td><td class="num">175/189</td><td class="num"> 96.35%</td><td class="left">'Stupid'</td></tr>
     <tr><td class="num"> 999/1045</td><td class="num">177/189</td><td class="num"> 95.30%</td><td class="left">'biotopa'</td></tr>
-    <tr><td class="num"> 971/1045</td><td class="num">175/189</td><td class="num"> 92.87%</td><td class="left">'Daisy'</td></tr>
+    <tr><td class="num"> 973/1045</td><td class="num">175/189</td><td class="num"> 93.03%</td><td class="left">'Daisy'</td></tr>
     <tr><td class="num"> 970/1045</td><td class="num">166/189</td><td class="num"> 92.06%</td><td class="left">'Andy'</td></tr>
     <tr><td class="num"> 960/1045</td><td class="num">173/189</td><td class="num"> 91.82%</td><td class="left">'mecke'</td></tr>
     <tr><td class="num"> 949/1045</td><td class="num">170/189</td><td class="num"> 90.68%</td><td class="left">'para_doks'</td></tr>
@@ -24,6 +24,7 @@
     <tr><td class="num"> 894/1045</td><td class="num">140/189</td><td class="num"> 83.79%</td><td class="left">'Johannes'</td></tr>
     <tr><td class="num"> 863/1045</td><td class="num">161/189</td><td class="num"> 82.98%</td><td class="left">'Tobias'</td></tr>
     <tr><td class="num"> 917/1045</td><td class="num">106/189</td><td class="num"> 82.90%</td><td class="left">'Django'</td></tr>
+    <tr><td class="num"> 874/1045</td><td class="num">147/189</td><td class="num"> 82.74%</td><td class="left">'H-J.Epting'</td></tr>
     <tr><td class="num"> 866/1045</td><td class="num">151/189</td><td class="num"> 82.41%</td><td class="left">'Gloop'</td></tr>
     <tr><td class="num"> 849/1045</td><td class="num">151/189</td><td class="num"> 81.04%</td><td class="left">'WP319'</td></tr>
     <tr><td class="num"> 867/1045</td><td class="num">124/189</td><td class="num"> 80.31%</td><td class="left">'Lukas'</td></tr>
@@ -32,22 +33,23 @@
     <tr><td class="num"> 874/1045</td><td class="num">103/189</td><td class="num"> 79.17%</td><td class="left">'Melanie'</td></tr>
     <tr><td class="num"> 950/1045</td><td class="num">  0/189</td><td class="num"> 76.99%</td><td class="left">'Tarim'</td></tr>
     <tr><td class="num"> 804/1045</td><td class="num">142/189</td><td class="num"> 76.66%</td><td class="left">'Safalra'</td></tr>
+    <tr><td class="num"> 811/1045</td><td class="num">132/189</td><td class="num"> 76.42%</td><td class="left">'Mentist'</td></tr>
+    <tr><td class="num"> 812/1045</td><td class="num">125/189</td><td class="num"> 75.93%</td><td class="left">'Dime'</td></tr>
     <tr><td class="num"> 800/1045</td><td class="num">135/189</td><td class="num"> 75.77%</td><td class="left">'dpl'</td></tr>
+    <tr><td class="num"> 812/1045</td><td class="num">114/189</td><td class="num"> 75.04%</td><td class="left">'brynn'</td></tr>
+    <tr><td class="num"> 796/1045</td><td class="num">128/189</td><td class="num"> 74.88%</td><td class="left">'Ludmian'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num">132/189</td><td class="num"> 74.07%</td><td class="left">'AlephD'</td></tr>
-    <tr><td class="num"> 786/1045</td><td class="num">127/189</td><td class="num"> 73.99%</td><td class="left">'Ludmian'</td></tr>
     <tr><td class="num"> 779/1045</td><td class="num">121/189</td><td class="num"> 72.93%</td><td class="left">'U-Punkt'</td></tr>
     <tr><td class="num"> 739/1045</td><td class="num">131/189</td><td class="num"> 70.50%</td><td class="left">'ABS'</td></tr>
     <tr><td class="num"> 728/1045</td><td class="num">126/189</td><td class="num"> 69.21%</td><td class="left">'B-Huff'</td></tr>
-    <tr><td class="num"> 755/1045</td><td class="num"> 96/189</td><td class="num"> 68.96%</td><td class="left">'brynn'</td></tr>
     <tr><td class="num"> 762/1045</td><td class="num"> 73/189</td><td class="num"> 67.67%</td><td class="left">'redsantz'</td></tr>
-    <tr><td class="num"> 712/1045</td><td class="num">120/189</td><td class="num"> 67.42%</td><td class="left">'Mentist'</td></tr>
     <tr><td class="num"> 791/1045</td><td class="num"> 38/189</td><td class="num"> 67.18%</td><td class="left">'alfred69'</td></tr>
     <tr><td class="num"> 734/1045</td><td class="num"> 82/189</td><td class="num"> 66.13%</td><td class="left">'bojster'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num"> 33/189</td><td class="num"> 66.05%</td><td class="left">'Sim_Ed'</td></tr>
     <tr><td class="num"> 680/1045</td><td class="num">130/189</td><td class="num"> 65.64%</td><td class="left">'Alexandros'</td></tr>
     <tr><td class="num"> 681/1045</td><td class="num"> 78/189</td><td class="num"> 61.51%</td><td class="left">'HuB34'</td></tr>
     <tr><td class="num"> 659/1045</td><td class="num"> 95/189</td><td class="num"> 61.10%</td><td class="left">'Marc-Hendrik'</td></tr>
-    <tr><td class="num"> 631/1045</td><td class="num">110/189</td><td class="num"> 60.05%</td><td class="left">'Raoul'</td></tr>
+    <tr><td class="num"> 633/1045</td><td class="num">111/189</td><td class="num"> 60.29%</td><td class="left">'Raoul'</td></tr>
     <tr><td class="num"> 665/1045</td><td class="num"> 64/189</td><td class="num"> 59.08%</td><td class="left">'alain'</td></tr>
     <tr><td class="num"> 643/1045</td><td class="num"> 83/189</td><td class="num"> 58.83%</td><td class="left">'Great Scott'</td></tr>
     <tr><td class="num"> 617/1045</td><td class="num">107/189</td><td class="num"> 58.67%</td><td class="left">'Ghatotkacha'</td></tr>
@@ -60,7 +62,7 @@
     <tr><td class="num"> 577/1045</td><td class="num">100/189</td><td class="num"> 54.86%</td><td class="left">'Zekobah'</td></tr>
     <tr><td class="num"> 634/1045</td><td class="num"> 43/189</td><td class="num"> 54.86%</td><td class="left">'Klaus'</td></tr>
     <tr><td class="num"> 576/1045</td><td class="num"> 93/189</td><td class="num"> 54.21%</td><td class="left">'Guglielmo'</td></tr>
-    <tr><td class="num"> 555/1045</td><td class="num"> 82/189</td><td class="num"> 51.62%</td><td class="left">'Tiza'</td></tr>
+    <tr><td class="num"> 582/1045</td><td class="num"> 83/189</td><td class="num"> 53.89%</td><td class="left">'Tiza'</td></tr>
     <tr><td class="num"> 525/1045</td><td class="num"> 95/189</td><td class="num"> 50.24%</td><td class="left">'ShadowPhrogg32642342'</td></tr>
     <tr><td class="num"> 589/1045</td><td class="num"> 26/189</td><td class="num"> 49.84%</td><td class="left">'hdwow'</td></tr>
     <tr><td class="num"> 533/1045</td><td class="num"> 82/189</td><td class="num"> 49.84%</td><td class="left">'Wuzzy'</td></tr>
@@ -71,6 +73,7 @@
     <tr><td class="num"> 522/1045</td><td class="num"> 66/189</td><td class="num"> 47.65%</td><td class="left">'Timo'</td></tr>
     <tr><td class="num"> 478/1045</td><td class="num">101/189</td><td class="num"> 46.92%</td><td class="left">'Austin'</td></tr>
     <tr><td class="num"> 504/1045</td><td class="num"> 62/189</td><td class="num"> 45.87%</td><td class="left">'Hans-HD'</td></tr>
+    <tr><td class="num"> 467/1045</td><td class="num"> 98/189</td><td class="num"> 45.79%</td><td class="left">'Sigma'</td></tr>
     <tr><td class="num"> 492/1045</td><td class="num"> 63/189</td><td class="num"> 44.98%</td><td class="left">'Antonio EE'</td></tr>
     <tr><td class="num"> 541/1045</td><td class="num">  6/189</td><td class="num"> 44.33%</td><td class="left">'Vinksu'</td></tr>
     <tr><td class="num"> 516/1045</td><td class="num"> 24/189</td><td class="num"> 43.76%</td><td class="left">'niebie'</td></tr>
@@ -85,10 +88,9 @@
     <tr><td class="num"> 438/1045</td><td class="num">  3/189</td><td class="num"> 35.74%</td><td class="left">'oblo'</td></tr>
     <tr><td class="num"> 392/1045</td><td class="num"> 40/189</td><td class="num"> 35.01%</td><td class="left">'hendrik'</td></tr>
     <tr><td class="num"> 391/1045</td><td class="num"> 36/189</td><td class="num"> 34.60%</td><td class="left">'Iceshark7'</td></tr>
-    <tr><td class="num"> 349/1045</td><td class="num"> 77/189</td><td class="num"> 34.52%</td><td class="left">'Sigma'</td></tr>
     <tr><td class="num"> 397/1045</td><td class="num"> 24/189</td><td class="num"> 34.12%</td><td class="left">'Chocolate Zero'</td></tr>
+    <tr><td class="num"> 349/1045</td><td class="num"> 72/189</td><td class="num"> 34.12%</td><td class="left">'Crystalicum'</td></tr>
     <tr><td class="num"> 376/1045</td><td class="num"> 35/189</td><td class="num"> 33.31%</td><td class="left">'Jeffrey S'</td></tr>
-    <tr><td class="num"> 341/1045</td><td class="num"> 69/189</td><td class="num"> 33.23%</td><td class="left">'Crystalicum'</td></tr>
     <tr><td class="num"> 392/1045</td><td class="num"> 12/189</td><td class="num"> 32.74%</td><td class="left">'NorthForty'</td></tr>
     <tr><td class="num"> 344/1045</td><td class="num"> 51/189</td><td class="num"> 32.01%</td><td class="left">'Momcat'</td></tr>
     <tr><td class="num"> 382/1045</td><td class="num"> 10/189</td><td class="num"> 31.77%</td><td class="left">'J3FF'</td></tr>
@@ -112,6 +114,7 @@
     <tr><td class="num"> 276/1045</td><td class="num"> 15/189</td><td class="num"> 23.58%</td><td class="left">'Thomas'</td></tr>
     <tr><td class="num"> 258/1045</td><td class="num"> 27/189</td><td class="num"> 23.10%</td><td class="left">'un_guru'</td></tr>
     <tr><td class="num"> 245/1045</td><td class="num"> 36/189</td><td class="num"> 22.77%</td><td class="left">'B-man'</td></tr>
+    <tr><td class="num"> 231/1045</td><td class="num"> 39/189</td><td class="num"> 21.88%</td><td class="left">'Tomson'</td></tr>
     <tr><td class="num"> 259/1045</td><td class="num">  7/189</td><td class="num"> 21.56%</td><td class="left">'geembo_90'</td></tr>
     <tr><td class="num"> 243/1045</td><td class="num"> 23/189</td><td class="num"> 21.56%</td><td class="left">'Snaily'</td></tr>
     <tr><td class="num"> 201/1045</td><td class="num"> 54/189</td><td class="num"> 20.66%</td><td class="left">'mhatta'</td></tr>
@@ -140,7 +143,6 @@
     <tr><td class="num"> 124/1045</td><td class="num"> 15/189</td><td class="num"> 11.26%</td><td class="left">'Magnus and Susi'</td></tr>
     <tr><td class="num"> 123/1045</td><td class="num"> 13/189</td><td class="num"> 11.02%</td><td class="left">'tasker'</td></tr>
     <tr><td class="num"> 131/1045</td><td class="num">  1/189</td><td class="num"> 10.70%</td><td class="left">'Asbel'</td></tr>
-    <tr><td class="num"> 121/1045</td><td class="num"> 10/189</td><td class="num"> 10.62%</td><td class="left">'Tomson'</td></tr>
     <tr><td class="num"> 105/1045</td><td class="num"> 22/189</td><td class="num"> 10.29%</td><td class="left">'Neophilus'</td></tr>
     <tr><td class="num">  89/1045</td><td class="num"> 24/189</td><td class="num">  9.16%</td><td class="left">'Zhura'</td></tr>
     <tr><td class="num">  98/1045</td><td class="num"> 13/189</td><td class="num">  9.00%</td><td class="left">'ReasonAnce'</td></tr>

Modified: homepage/input/table-wr.html
===================================================================
--- homepage/input/table-wr.html	2009-02-01 15:07:57 UTC (rev 1498)
+++ homepage/input/table-wr.html	2009-02-01 15:14:54 UTC (rev 1499)
@@ -1,53 +1,52 @@
   <table>
-    <caption>$$Worldrecord_Statistics$$ $$December$$ 2008</caption>
+    <caption>$$Worldrecord_Statistics$$ $$January$$ 2009</caption>
     <colgroup><col width="80"><col width="80"><col width="470"></colgroup>
     <tr><th>$$total$$</th><th>$$shared$$</th><th class="left">$$user$$</th></tr>
-    <tr><td class="num">908</td><td class="num">243</td><td class="left">'Moneymaker'</td></tr>
-    <tr><td class="num">177</td><td class="num">128</td><td class="left">'daydreamer'</td></tr>
-    <tr><td class="num">167</td><td class="num">142</td><td class="left">'Crystalicum'</td></tr>
-    <tr><td class="num">149</td><td class="num"> 89</td><td class="left">'Stupid'</td></tr>
-    <tr><td class="num">105</td><td class="num"> 98</td><td class="left">'Johannes'</td></tr>
-    <tr><td class="num"> 83</td><td class="num"> 70</td><td class="left">'dev0'</td></tr>
-    <tr><td class="num"> 52</td><td class="num"> 39</td><td class="left">'Duffy'</td></tr>
+    <tr><td class="num">976</td><td class="num">264</td><td class="left">'Moneymaker'</td></tr>
+    <tr><td class="num">177</td><td class="num">153</td><td class="left">'Crystalicum'</td></tr>
+    <tr><td class="num">148</td><td class="num"> 89</td><td class="left">'Stupid'</td></tr>
+    <tr><td class="num">135</td><td class="num">115</td><td class="left">'daydreamer'</td></tr>
+    <tr><td class="num">102</td><td class="num"> 95</td><td class="left">'Johannes'</td></tr>
+    <tr><td class="num"> 91</td><td class="num"> 77</td><td class="left">'dev0'</td></tr>
+    <tr><td class="num"> 67</td><td class="num"> 61</td><td class="left">'Mentist'</td></tr>
+    <tr><td class="num"> 51</td><td class="num"> 39</td><td class="left">'Duffy'</td></tr>
     <tr><td class="num"> 42</td><td class="num"> 29</td><td class="left">'Malla'</td></tr>
-    <tr><td class="num"> 40</td><td class="num"> 39</td><td class="left">'Great Scott'</td></tr>
-    <tr><td class="num"> 39</td><td class="num"> 27</td><td class="left">'Alexandros'</td></tr>
-    <tr><td class="num"> 39</td><td class="num"> 35</td><td class="left">'Mentist'</td></tr>
-    <tr><td class="num"> 38</td><td class="num"> 31</td><td class="left">'ryujun'</td></tr>
-    <tr><td class="num"> 31</td><td class="num"> 27</td><td class="left">'Iceshark7'</td></tr>
+    <tr><td class="num"> 39</td><td class="num"> 39</td><td class="left">'Great Scott'</td></tr>
+    <tr><td class="num"> 38</td><td class="num"> 29</td><td class="left">'Daisy'</td></tr>
+    <tr><td class="num"> 37</td><td class="num"> 30</td><td class="left">'Alexandros'</td></tr>
+    <tr><td class="num"> 33</td><td class="num"> 30</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num"> 31</td><td class="num"> 29</td><td class="left">'Django'</td></tr>
+    <tr><td class="num"> 30</td><td class="num"> 27</td><td class="left">'Iceshark7'</td></tr>
     <tr><td class="num"> 29</td><td class="num"> 26</td><td class="left">'Zekobah'</td></tr>
-    <tr><td class="num"> 28</td><td class="num"> 17</td><td class="left">'Daisy'</td></tr>
-    <tr><td class="num"> 28</td><td class="num"> 20</td><td class="left">'Emmanuel'</td></tr>
     <tr><td class="num"> 26</td><td class="num"> 25</td><td class="left">'joseba'</td></tr>
+    <tr><td class="num"> 24</td><td class="num"> 19</td><td class="left">'Emmanuel'</td></tr>
     <tr><td class="num"> 24</td><td class="num"> 23</td><td class="left">'Ghatotkacha'</td></tr>
-    <tr><td class="num"> 21</td><td class="num"> 19</td><td class="left">'ged'</td></tr>
+    <tr><td class="num"> 21</td><td class="num"> 20</td><td class="left">'ged'</td></tr>
     <tr><td class="num"> 19</td><td class="num"> 17</td><td class="left">'Angolino'</td></tr>
-    <tr><td class="num"> 17</td><td class="num">  9</td><td class="left">'Gloop'</td></tr>
     <tr><td class="num"> 16</td><td class="num"> 14</td><td class="left">'B-Huff'</td></tr>
-    <tr><td class="num"> 16</td><td class="num"> 15</td><td class="left">'Safalra' + 'Ludmian'</td></tr>
+    <tr><td class="num"> 16</td><td class="num"> 15</td><td class="left">'Safalra'</td></tr>
     <tr><td class="num"> 15</td><td class="num"> 14</td><td class="left">'HuB34'</td></tr>
+    <tr><td class="num"> 15</td><td class="num"> 15</td><td class="left">'Ludmian'</td></tr>
+    <tr><td class="num"> 14</td><td class="num">  9</td><td class="left">'Gloop'</td></tr>
     <tr><td class="num"> 14</td><td class="num"> 14</td><td class="left">'bojster'</td></tr>
     <tr><td class="num"> 13</td><td class="num">  7</td><td class="left">'Ronald'</td></tr>
-    <tr><td class="num"> 12</td><td class="num"> 12</td><td class="left">'dpl'</td></tr>
-    <tr><td class="num"> 11</td><td class="num"> 11</td><td class="left">'ABS'</td></tr>
+    <tr><td class="num"> 11</td><td class="num"> 11</td><td class="left">'dpl' + 'ABS'</td></tr>
     <tr><td class="num">  9</td><td class="num">  5</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-    <tr><td class="num">  9</td><td class="num">  7</td><td class="left">'Chocolate Zero'</td></tr>
     <tr><td class="num">  9</td><td class="num">  9</td><td class="left">'fabian'</td></tr>
-    <tr><td class="num">  7</td><td class="num">  5</td><td class="left">'Taztunes'</td></tr>
+    <tr><td class="num">  8</td><td class="num">  7</td><td class="left">'Chocolate Zero'</td></tr>
     <tr><td class="num">  7</td><td class="num">  6</td><td class="left">'Edgar_Flesk'</td></tr>
     <tr><td class="num">  6</td><td class="num">  3</td><td class="left">'para_doks' + 'Breezy'</td></tr>
-    <tr><td class="num">  6</td><td class="num">  5</td><td class="left">'Guglielmo'</td></tr>
-    <tr><td class="num">  6</td><td class="num">  6</td><td class="left">'Tobias'</td></tr>
-    <tr><td class="num">  5</td><td class="num">  4</td><td class="left">'Lukas'</td></tr>
-    <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Raoul' + 'Thomas' + 'Chris' + 'Wuzzy' + 'Ralf'</td></tr>
+    <tr><td class="num">  6</td><td class="num">  5</td><td class="left">'Taztunes' + 'Guglielmo'</td></tr>
+    <tr><td class="num">  6</td><td class="num">  6</td><td class="left">'Raoul' + 'Tobias'</td></tr>
+    <tr><td class="num">  5</td><td class="num">  4</td><td class="left">'Sigma' + 'Lukas'</td></tr>
+    <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Thomas' + 'Chris' + 'Wuzzy' + 'Ralf'</td></tr>
     <tr><td class="num">  4</td><td class="num">  2</td><td class="left">'Hairball'</td></tr>
-    <tr><td class="num">  4</td><td class="num">  4</td><td class="left">'U-Punkt' + 'J3FF' + 'Cyphase' + 'GiannuzzITA'</td></tr>
-    <tr><td class="num">  3</td><td class="num">  2</td><td class="left">'mecke' + 'Stephanie'</td></tr>
+    <tr><td class="num">  4</td><td class="num">  3</td><td class="left">'mecke'</td></tr>
+    <tr><td class="num">  4</td><td class="num">  4</td><td class="left">'U-Punkt' + 'J3FF' + 'Cyphase' + 'GiannuzzITA' + 'Dime'</td></tr>
+    <tr><td class="num">  3</td><td class="num">  2</td><td class="left">'Stephanie'</td></tr>
     <tr><td class="num">  3</td><td class="num">  3</td><td class="left">'geembo_90' + 'Tiza' + 'Neophilus' + 'Nicol?s' + 'Andy'</td></tr>
-    <tr><td class="num">  2</td><td class="num">  1</td><td class="left">'Timo'</td></tr>
     <tr><td class="num">  2</td><td class="num">  2</td><td class="left">'alfred69' + 'ReasonAnce' + 'mrduke' + 'Drotten' + 'tjRaven' + 'Sim_Ed' + 'hendrik' + 'Bent' + 'Austin' + 'Snaily' + 'Craven' + 'Sopoforic' + 'Ingo' + 'serpent'</td></tr>
     <tr><td class="num">  1</td><td class="num">  0</td><td class="left">'Ale' + 'Feynman' + 'alain' + 'colonel crayon' + 'Gorn' + 'Nat'</td></tr>
-    <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'Agares' + 'Tiger' + 'Zak' + 'Daniel' + 'Slav' + 'niebie' + 'Andreas' + 'AlephD' + 'Samuel' + 'Mark P.' + 'oblo' + 'Pascal' + 'hdwow' + 'B-man' + 'Asbel' + 'Vlad' + 'Jinajon' + 'Vaily' + 'Antonio EE' + 'JuSt'</td></tr>
-    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'AQZ' + 'tasker' + 'jumbo' + 'Miel56' + 'Zhura' + 'Alf' + 'Turbogurk' + 'Gottseinsohn' + 'ntaeijr' + 'Eselchen' + 'ael' + 'biotopa' + 'Sigma' + 'brynn' + 'IntKecsk' + 'Adonica' + 'Joona' + 'Sandra' + 'schmusi20' + 'Kosby' + 'Magnus and Susi' + 'WP319' + 'Kevin' + 'jdrexler' + 'xmouse' + 'erich' + 'Vinksu' + 'Uli' + 'Alex' + 'Valkyrie2' + 'Fred_the_wise' + 'jdcampo' + 'Freshman' + 'Little_Mole' + 'Kroetchen' + 'crypto_rsa' + 'Harry Lim' + 'Sequoyah' + 'AkRa' + 'Momcat' + 'Tomson' + 'NorthForty' + 'Mecki' + 'The red O' + 'gringer' + 'Jeffrey S' + 'Nfol' + 'Marc-Hendrik' + 'Kadu' + 'shoki' + 'jojo' + 'WesleyCrusher' + 'rima' + 'Klaus' + 'MicWa' + 'AsuCaga' + 'oxyd4ever' + 'Rugby4ever' + 'Archcorenth' + 'Meeve' + 'mhatta' + 'Hans-HD' + 'un_guru' + 'krazy62' + 'Dvorhagen' + 'Sparkey' + 'Holger' + 'Ingo_K' + 'Ant' + 'Melanie' + 'IChrisI' + 'redsantz' + 'Markus' + 'Michael' + 'Liam Sheehan' + 'Tarim' + 'Agnie!
 szka'</td></tr>
+    <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'Agares' + 'Tiger' + 'Zak' + 'Daniel' + 'Slav' + 'niebie' + 'Andreas' + 'AlephD' + 'Samuel' + 'Mark P.' + 'oblo' + 'Pascal' + 'hdwow' + 'B-man' + 'Asbel' + 'Vlad' + 'Jinajon' + 'Vaily' + 'Antonio EE' + 'JuSt' + 'Timo'</td></tr>
+    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'AQZ' + 'tasker' + 'jumbo' + 'Miel56' + 'Zhura' + 'Alf' + 'Turbogurk' + 'Gottseinsohn' + 'ntaeijr' + 'Eselchen' + 'ael' + 'biotopa' + 'H-J.Epting' + 'brynn' + 'IntKecsk' + 'Adonica' + 'Joona' + 'Sandra' + 'schmusi20' + 'Kosby' + 'Magnus and Susi' + 'WP319' + 'Kevin' + 'jdrexler' + 'xmouse' + 'erich' + 'Vinksu' + 'Uli' + 'Alex' + 'Valkyrie2' + 'Fred_the_wise' + 'jdcampo' + 'Freshman' + 'Little_Mole' + 'Kroetchen' + 'crypto_rsa' + 'Harry Lim' + 'Sequoyah' + 'AkRa' + 'Momcat' + 'Tomson' + 'NorthForty' + 'Mecki' + 'The red O' + 'gringer' + 'Jeffrey S' + 'Nfol' + 'Marc-Hendrik' + 'Kadu' + 'shoki' + 'jojo' + 'WesleyCrusher' + 'rima' + 'Klaus' + 'MicWa' + 'AsuCaga' + 'oxyd4ever' + 'Rugby4ever' + 'Archcorenth' + 'Meeve' + 'mhatta' + 'Hans-HD' + 'un_guru' + 'krazy62' + 'Dvorhagen' + 'Sparkey' + 'Holger' + 'Ingo_K' + 'Ant' + 'Melanie' + 'IChrisI' + 'redsantz' + 'Markus' + 'Michael' + 'Liam Sheehan' + 'Tarim' + '!
 Agnieszka'</td></tr>
   </table>

Modified: homepage/input/userlist.html
===================================================================
--- homepage/input/userlist.html	2009-02-01 15:07:57 UTC (rev 1498)
+++ homepage/input/userlist.html	2009-02-01 15:14:54 UTC (rev 1499)
@@ -42,6 +42,7 @@
     <li>Daniel</li>
     <li>daydreamer</li>
     <li>dev0</li>
+    <li>Dime</li>
     <li>Django</li>
     <li>dpl</li>
     <li>Drotten</li>
@@ -70,6 +71,7 @@
     <li>Harry Lim</li>
     <li>hdwow</li>
     <li>hendrik</li>
+    <li>H-J.Epting</li>
     <li>Holger</li>
     <li>HuB34</li>
     <li>Iceshark7</li>



From ral at mail.berlios.de  Mon Feb  2 01:27:33 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 2 Feb 2009 01:27:33 +0100
Subject: [Enigma-game-svn] r1500 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 data/schemas src src/stones
Message-ID: <200902020027.n120RX2o015694@sheep.berlios.de>

Author: ral
Date: 2009-02-02 01:27:28 +0100 (Mon, 02 Feb 2009)
New Revision: 1500

Added:
   trunk/data/gfx32/sh_portal_horse.png
   trunk/data/gfx32/st_dummy.png
   trunk/data/gfx32/st_jamb_black.png
   trunk/data/gfx32/st_jamb_white.png
   trunk/data/gfx32/st_portal_horse.png
   trunk/data/gfx40/sh_portal_horse.png
   trunk/data/gfx40/st_dummy.png
   trunk/data/gfx40/st_jamb_black.png
   trunk/data/gfx40/st_jamb_white.png
   trunk/data/gfx40/st_portal_horse.png
   trunk/data/gfx48/sh_portal_horse.png
   trunk/data/gfx48/st_dummy.png
   trunk/data/gfx48/st_jamb_black.png
   trunk/data/gfx48/st_jamb_white.png
   trunk/data/gfx48/st_portal_horse.png
   trunk/src/stones/ChameleonStone.cc
   trunk/src/stones/ChameleonStone.hh
   trunk/src/stones/JambStone.cc
   trunk/src/stones/JambStone.hh
   trunk/src/stones/PortalStone.cc
   trunk/src/stones/PortalStone.hh
Removed:
   trunk/data/gfx32/sh-grate3.png
   trunk/data/gfx32/st-blackballs.png
   trunk/data/gfx32/st-dummy.png
   trunk/data/gfx32/st-grate3.png
   trunk/data/gfx32/st-whiteballs.png
   trunk/data/gfx40/sh-grate3.png
   trunk/data/gfx40/st-blackballs.png
   trunk/data/gfx40/st-dummy.png
   trunk/data/gfx40/st-grate3.png
   trunk/data/gfx40/st-whiteballs.png
   trunk/data/gfx48/sh-grate3.png
   trunk/data/gfx48/st-blackballs.png
   trunk/data/gfx48/st-dummy.png
   trunk/data/gfx48/st-grate3.png
   trunk/data/gfx48/st-whiteballs.png
Modified:
   trunk/data/api1init.lua
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Makefile.am
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/oxyd.cc
   trunk/src/stones.cc
   trunk/src/stones.hh
   trunk/src/stones/CompatibilityStones.cc
   trunk/src/stones/CompatibilityStones.hh
   trunk/src/stones/SimpleStones.hh
   trunk/src/stones_simple.cc
Log:
Trunk 1.1: new API reengineering
- reengineering grate3:
  - new class portal stone
  - st-grate3 -> st_portal_horse, st_portal
  - limit st_portal_horse to horse actors
  - st_portal_pearl lets pass only pearl actors
  - read only attribute flavor - "horse", "pearl"
- reengineering black-/whiteballs:
  - new class jamb stone
  - st-blackballs -> st_jamb_black, st_jamb
  - st-whiteballs -> st_jamb_white
  - attribute "color"
- renaming:
  - st-chameleon -> st_chameleon
  - st-dummy -> st_dummy
Note:
- chameleon features are still incomplete and need to be fixed 

Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/data/api1init.lua	2009-02-02 00:27:28 UTC (rev 1500)
@@ -286,6 +286,7 @@
     st_camouflage = "st-camouflage",
     st_camouflage_hollow = "st-camouflage_hole",
     st_camouflage_movable = "st-camouflage_move",
+    st_chameleon = "st-chameleon",
     st_charge_minus = "st-chargeminus",
     st_charge_plus = "st-chargeplus",
     st_charge_zero = "st-chargezero",
@@ -338,6 +339,8 @@
     st_invisible = "st-invisible",
     st_invisible_hollow = "st-invisible_hole",
     st_invisible_movable = "st-invisible_move",
+    st_jamb_black = "st-blackballs",
+    st_jamb_white = "st-whiteballs",
     st_knight = "st-knight",
     st_laser_w = "st-laser-w",
     st_laser_s = "st-laser-s",
@@ -427,6 +430,7 @@
     st_plaster_breakable = "st-rock3_break",
     st_plaster_movebreakable = "st-rock3_movebreak",
     st_plop = "st-block",
+    st_portal_horse = "st-grate3",
     st_pull = "st-pull",
     st_purplegray = "st-rock6",
     st_purplemarble = "st-rock4",

Deleted: trunk/data/gfx32/sh-grate3.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/sh_portal_horse.png (from rev 1494, trunk/data/gfx32/sh-grate3.png)

Deleted: trunk/data/gfx32/st-blackballs.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-grate3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-whiteballs.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/st_dummy.png (from rev 1494, trunk/data/gfx32/st-dummy.png)

Copied: trunk/data/gfx32/st_jamb_black.png (from rev 1494, trunk/data/gfx32/st-blackballs.png)

Copied: trunk/data/gfx32/st_jamb_white.png (from rev 1494, trunk/data/gfx32/st-whiteballs.png)

Copied: trunk/data/gfx32/st_portal_horse.png (from rev 1494, trunk/data/gfx32/st-grate3.png)

Deleted: trunk/data/gfx40/sh-grate3.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/sh_portal_horse.png (from rev 1494, trunk/data/gfx40/sh-grate3.png)

Deleted: trunk/data/gfx40/st-blackballs.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-grate3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-whiteballs.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/st_dummy.png (from rev 1494, trunk/data/gfx40/st-dummy.png)

Copied: trunk/data/gfx40/st_jamb_black.png (from rev 1494, trunk/data/gfx40/st-blackballs.png)

Copied: trunk/data/gfx40/st_jamb_white.png (from rev 1494, trunk/data/gfx40/st-whiteballs.png)

Copied: trunk/data/gfx40/st_portal_horse.png (from rev 1494, trunk/data/gfx40/st-grate3.png)

Deleted: trunk/data/gfx48/sh-grate3.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/sh_portal_horse.png (from rev 1494, trunk/data/gfx48/sh-grate3.png)

Deleted: trunk/data/gfx48/st-blackballs.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-grate3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-whiteballs.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/st_dummy.png (from rev 1494, trunk/data/gfx48/st-dummy.png)

Copied: trunk/data/gfx48/st_jamb_black.png (from rev 1494, trunk/data/gfx48/st-blackballs.png)

Copied: trunk/data/gfx48/st_jamb_white.png (from rev 1494, trunk/data/gfx48/st-whiteballs.png)

Copied: trunk/data/gfx48/st_portal_horse.png (from rev 1494, trunk/data/gfx48/st-grate3.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/data/models-2d.lua	2009-02-02 00:27:28 UTC (rev 1500)
@@ -727,7 +727,7 @@
     DefImage("sh-round2")
     DefImage("sh_grate_cross")
     DefImage("sh_grate_framed")
-    DefImage("sh-grate3")
+    DefImage("sh_portal_horse")
     DefImage("sh-glass")
     DefImage("sh-white4")
     DefImage("sh-puzzle1")
@@ -745,7 +745,7 @@
     DefStone("st-black2")
     DefStone("st-black3")
     DefStone("st-black4", "sh-white4")
-    DefStone("st-blackballs")
+    DefStone("st_jamb_black")
     DefStone("st_plop_slate")
     DefStone("st_bluegray", "sh-round")
     DefStone("st-brake", "sh-brake")
@@ -753,7 +753,7 @@
     DefStone("st-bug")
     DefStone("st_pinkbumps")
     DefStone("st_camouflage")
-    DefStone("st-dummy")
+    DefStone("st_dummy")
     DefImage("st-easymode")
     DefStone("st-flhay")
     DefStone("st_flat_fire")
@@ -766,7 +766,7 @@
     DefStone("st_redfiber", "sh-glass")
     DefStone("st_grate_cross", "sh_grate_cross")
     DefStone("st_grate_framed", "sh_grate_framed")
-    DefStone("st-grate3", "sh-grate3")
+    DefStone("st_portal_horse", "sh_portal_horse")
     DefStone("st_greenbrown", "sh-round")
     DefStone("st-key0", "sh-round", {filename="st-key1"})
     DefStone("st-key1", "sh-round", {filename="st-key2"})
@@ -793,7 +793,7 @@
     DefStone("st-white2")
     DefStone("st-white3")
     DefStone("st-white4", "sh-white4")
-    DefStone("st-whiteballs")
+    DefStone("st_jamb_white")
     DefStone("st_woven")
     DefStone("st_yellow")
     DefStone("st_blur_straight")

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/data/schemas/objects.xml	2009-02-02 00:27:28 UTC (rev 1500)
@@ -891,10 +891,15 @@
       <msg name="heat"/>
       <msg name="_fall"/>
     </object>
-    <object name="st_box_hay" flavor="hay"/>
-    <object name="st_box_rock" flavor="rock"/>
-    <object name="st_box_wood" flavor="wood">
+    <object name="st_box_hay">
+      <attr name="flavor" value="hay"/>
     </object>
+    <object name="st_box_rock">
+      <attr name="flavor" value="rock"/>
+    </object>
+    <object name="st_box_wood">
+      <attr name="flavor" value="wood"/>
+    </object>
     <object name="st_box_wood_growing" init="true">
     </object>
     <object name="st_box_wood_h" init="true">
@@ -990,6 +995,7 @@
     <object name="st_camouflage_movable">
       <attr name="movable" value="true"/>
     </object>
+    <object name="st_chameleon"/>
     <object name="st_charge">
       <attr name="charge"/>
       <attr name="$chargesign"/>
@@ -1201,6 +1207,17 @@
     <object name="st_invisible_movable">
       <attr name="movable" value="true"/>
     </object>
+    <object name="st_jamb">
+      <attr name="color" default="0"/>
+      <msg name="hit"/>
+      <msg name="signal"/>
+    </object>
+    <object name="st_jamb_black">
+      <attr name="color" value="0"/>
+    </object>
+    <object name="st_jamb_white">
+      <attr name="color" value="1"/>
+    </object>
     <object name="st_key">
       <attr name="code"/>
       <msg name="on"/>
@@ -1453,6 +1470,15 @@
       <msg name="off"/>
       <msg name="signal"/>
     </object>
+    <object name="st_portal">
+      <attr name="flavor" default="horse" rw="r"/>
+    </object>
+    <object name="st_portal_horse">
+      <attr name="flavor" value="horse"/>
+    </object>
+    <object name="st_portal_pearl">
+      <attr name="flavor" value="pearl"/>
+    </object>
     <object name="st_pull">
       <attr name="state" rw="r"/>
       <msg name="_freeze"/>

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/Makefile.am	2009-02-02 00:27:28 UTC (rev 1500)
@@ -294,6 +294,8 @@
 	stones/BrakeStone.hh	\
 	stones/BreakStone.cc	\
 	stones/BreakStone.hh	\
+	stones/ChameleonStone.cc	\
+	stones/ChameleonStone.hh	\
 	stones/ChessStone.cc	\
 	stones/ChessStone.hh	\
 	stones/ClusterStone.cc	\
@@ -324,6 +326,8 @@
 	stones/GlassStones.hh	\
 	stones/GreenBrownStone.cc	\
 	stones/GreenBrownSTone.hh	\
+	stones/JambStone.cc	\
+	stones/JambStone.hh	\
 	stones/KeySwitch.cc	\
 	stones/KeySwitch.hh	\
 	stones/KnightStone.cc	\
@@ -352,6 +356,8 @@
 	stones/PlasterStone.hh	\
 	stones/PolarSwitchStone.cc	\
 	stones/PolarSwitchStone.hh	\
+	stones/PortalStone.cc	\
+	stones/PortalStone.hh	\
 	stones/PullStone.cc	\
 	stones/PullStone.hh	\
 	stones/PuzzleStone.cc	\

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/ox_oxyd1.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -178,7 +178,7 @@
     "st_grate_framed",          // Oxyd1 stone 0x1b
     "st_break_bug",             // Oxyd1 stone 0x1c
     "st_surprise",              // Oxyd1 stone 0x1d
-    "st-chameleon",             // Oxyd1 stone 0x1e
+    "st_chameleon",             // Oxyd1 stone 0x1e
     "st_brick",                 // Oxyd1 stone 0x1f
     "st_granite",               // Oxyd1 stone 0x20
     "st_granite",               // Oxyd1 stone 0x21
@@ -292,8 +292,8 @@
     "st_passage_black_square",  // Oxyd1 stone 0x8d
     "st_blur_straight",         // Oxyd1 stone 0x8e
     UNUSED,                     // Oxyd1 stone 0x8f
-    "st-whiteballs",            // Oxyd1 stone 0x90
-    "st-blackballs",            // Oxyd1 stone 0x91
+    "st_jamb_white",            // Oxyd1 stone 0x90
+    "st_jamb_black",            // Oxyd1 stone 0x91
     "st_fourswitch",            // Oxyd1 stone 0x92
     "st_blur_cross",            // Oxyd1 stone 0x93
     "st_break_white",           // Oxyd1 stone 0x94

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/ox_peroxyd.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -215,7 +215,7 @@
     "st_grate_cross",           // PerOxyd stone 0x18
     UNUSED,                     // PerOxyd stone 0x19
     "st_surprise",              // PerOxyd stone 0x1a
-    "st-chameleon",             // PerOxyd stone 0x1b (levels: 23 142 178 183)
+    "st_chameleon",             // PerOxyd stone 0x1b (levels: 23 142 178 183)
     "st_magic_brick",           // PerOxyd stone 0x1c
     "st_camouflage",            // PerOxyd stone 0x1d (green camouflage piece)(if st-camouflage is implemented, put it in here)
     "st_camouflage",            // PerOxyd stone 0x1e (green camouflage piece)
@@ -340,7 +340,7 @@
     0,                          // PerOxyd stone 0x95 (dynamite holder, will implememnt it)(levels: 41 184 200)
     "st_rubberband",            // PerOxyd stone 0x96
     "st_scissors",              // PerOxyd stone 0x97
-    "st-grate3",                // PerOxyd stone 0x98
+    "st_portal_horse",          // PerOxyd stone 0x98
     "st_blocker",               // PerOxyd stone 0x99
     "st-grate1",                // PerOxyd stone 0x9a
     "st_metal_hollow",          // PerOxyd stone 0x9b

Modified: trunk/src/oxyd.cc
===================================================================
--- trunk/src/oxyd.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/oxyd.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -321,7 +321,7 @@
         const char *name = config.stonetable[type];
         if (name == 0) {
             Log << ecl::strf("Unknown stone %X\n", type);
-            st = MakeStone ("st-dummy");
+            st = MakeStone ("st_dummy");
             st->setAttr("code", type);
         }
         else if (name[0] != '\0') { // ignore if name==""

Added: trunk/src/stones/ChameleonStone.cc
===================================================================
--- trunk/src/stones/ChameleonStone.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/ChameleonStone.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -0,0 +1,63 @@
+/*
+ * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "stones/ChameleonStone.hh"
+
+#include "errors.hh"
+//#include "main.hh"
+
+namespace enigma {
+
+    ChameleonStone::ChameleonStone() : Stone() {
+    }
+    
+    std::string ChameleonStone::getClass() const {
+        return "st_chameleon";
+    }
+    
+    Value ChameleonStone::message(const Message &m) {
+        if (m.message == "_model_reanimated") {
+                init_model();
+        }
+        return Stone::message(m);
+    }
+    
+    void ChameleonStone::init_model()  {
+        if (Floor *fl = GetFloor(get_pos())) {
+            set_model(fl->get_kind());
+        } else
+            ASSERT(false, XLevelRuntime, "Chameleon Stone: Floor must be set before stone");
+    }
+    
+    bool ChameleonStone::is_floating() const {
+        return true;
+    }
+
+    StoneResponse ChameleonStone::collision_response(const StoneContact &) {
+        return STONE_PASS;
+    }
+
+    DEF_TRAITS(ChameleonStone, "st_chameleon", st_chameleon);
+
+    BOOT_REGISTER_START
+        BootRegister(new ChameleonStone(), "st_chameleon");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/stones/ChameleonStone.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/stones/ChameleonStone.hh
===================================================================
--- trunk/src/stones/ChameleonStone.hh	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/ChameleonStone.hh	2009-02-02 00:27:28 UTC (rev 1500)
@@ -0,0 +1,52 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef CHAMELEONSTONE_HH_
+#define CHAMELEONSTONE_HH_
+
+#include "stones.hh"
+#include "stones_internal.hh"
+
+namespace enigma {
+
+    /** 
+     * 
+     * 
+     */
+    class ChameleonStone : public Stone {
+         CLONEOBJ(ChameleonStone);
+         DECL_TRAITS;
+
+    public:
+        ChameleonStone();
+
+        // Object interface
+        virtual std::string getClass() const;
+        virtual Value message(const Message &m);
+        
+        // GridObject interface
+        virtual void init_model();
+        
+        // Stone interface
+        virtual bool is_floating() const;
+        virtual StoneResponse collision_response(const StoneContact &sc);
+    };
+
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/stones/ChameleonStone.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/stones/CompatibilityStones.cc
===================================================================
--- trunk/src/stones/CompatibilityStones.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/CompatibilityStones.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -20,7 +20,7 @@
 #include "stones/CompatibilityStones.hh"
 #include "errors.hh"
 #include "client.hh"
-//#include "main.hh"
+#include "main.hh"
 
 namespace enigma {
 
@@ -43,6 +43,21 @@
     DEF_TRAITSM(DongleStone, "st_dongle", st_dongle, MOVABLE_BREAKABLE);
 
 
+/* -------------------- DummyStone -------------------- */
+
+    DummyStone::DummyStone() : Stone("st_dummy"){
+    }
+    
+    StoneResponse DummyStone::collision_response(const StoneContact &/*sc*/) {
+        static int lastCode = -1;
+        int        code     = getAttr("code");
+        if (code != lastCode) {
+            Log << ecl::strf("Collision with stone 0x%02x\n", code);
+            lastCode = code;
+        }
+        return STONE_REBOUND;
+    }
+
     /**  st-easymode Easy-Mode Stone
     
     In easy game mode this stone converts the floor at its
@@ -110,6 +125,7 @@
     
     BOOT_REGISTER_START
         BootRegister(new DongleStone(), "st_dongle");
+        BootRegister(new DummyStone(), "st_dummy");
         BootRegister(new EasyModeStone(), "st-easymode");
         BootRegister(new Peroxyd_0xb8(), "st-peroxyd-0xb8");
         BootRegister(new Peroxyd_0xb9(), "st-peroxyd-0xb9");

Modified: trunk/src/stones/CompatibilityStones.hh
===================================================================
--- trunk/src/stones/CompatibilityStones.hh	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/CompatibilityStones.hh	2009-02-02 00:27:28 UTC (rev 1500)
@@ -35,6 +35,18 @@
         virtual void actor_hit (const StoneContact &sc);
     };
     
+    /** 
+     * DummyStone
+     */
+    class DummyStone : public Stone {
+        CLONEOBJ(DummyStone);
+    public:
+        DummyStone();
+    
+        // Stone interface
+        virtual StoneResponse collision_response(const StoneContact &sc);
+    };
+    
     class EasyModeStone : public Stone {
         CLONEOBJ(EasyModeStone);
         DECL_TRAITS;

Added: trunk/src/stones/JambStone.cc
===================================================================
--- trunk/src/stones/JambStone.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/JambStone.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -0,0 +1,79 @@
+/*
+ * Copyright (C) 2008 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "stones/JambStone.hh"
+#include "errors.hh"
+//#include "main.hh"
+
+namespace enigma {
+    JambStone::JambStone(int color) : Stone() {
+        Stone::setAttr("color", color);
+    }
+    
+    std::string JambStone::getClass() const {
+        return "st_jamb";
+    }
+    
+    Value JambStone::message(const Message &m) {
+        if (m.message == "signal" || m.message == "hit") {
+            if (GridObject *sender = dynamic_cast<GridObject*>(m.sender)) {
+                GridPos p = get_pos();
+                Object *o;
+                if (m.message == "hit")
+                    o = m.value;
+                else
+                    o = SendMessage(m.sender, "_hitactor");
+                
+                Actor *a = dynamic_cast<Actor *>(o);
+                int c = getAttr("color");
+                if ((c == BLACK && a && get_id(a) == ac_marble_black) || 
+                        (c == WHITE && a && get_id(a) == ac_marble_white) ||
+                        (m.sender->getObjectType() != Object::ITEM && m.message == "signal")) {
+                    if (p.y == sender->get_pos().y) {
+                        SendMessage (GetStone (move (p, EAST)),  "signal", 1.0);
+                        SendMessage (GetStone (move (p, WEST)),  "signal", 1.0);
+                        SendMessage (GetStone (move (p, NORTH)), "signal", 0.0);
+                        SendMessage (GetStone (move (p, SOUTH)), "signal", 0.0);
+                    }
+                    else {
+                        SendMessage (GetStone (move (p, EAST)),  "signal", 0.0);
+                        SendMessage (GetStone (move (p, WEST)),  "signal", 0.0);
+                        SendMessage (GetStone (move (p, NORTH)), "signal", 1.0);
+                        SendMessage (GetStone (move (p, SOUTH)), "signal", 1.0);
+                    }
+                    return Value();
+                }
+            }
+        }
+        return Stone::message(m);
+    }
+
+    void JambStone::init_model() {
+        set_model(ecl::strf("st_jamb_%s", getAttr("color") == BLACK ? "black" : "white"));
+    }
+    
+    DEF_TRAITS(JambStone, "st_jamb", st_jamb);
+    
+    BOOT_REGISTER_START
+        BootRegister(new JambStone(0), "st_jamb");
+        BootRegister(new JambStone(0), "st_jamb_black");
+        BootRegister(new JambStone(1), "st_jamb_white");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/stones/JambStone.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/stones/JambStone.hh
===================================================================
--- trunk/src/stones/JambStone.hh	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/JambStone.hh	2009-02-02 00:27:28 UTC (rev 1500)
@@ -0,0 +1,52 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef JAMBSTONE_HH
+#define JAMBSTONE_HH
+
+#include "stones.hh"
+
+#include "stones_internal.hh"
+
+namespace enigma {
+
+    /** 
+     * 
+     */
+    class JambStone : public Stone {
+         CLONEOBJ(JambStone);
+         DECL_TRAITS;
+
+    public:
+        JambStone(int color);
+        
+        // Object interface
+        virtual std::string getClass() const;
+        virtual Value message(const Message &m);
+            
+        // GridObject interface
+        virtual void init_model();
+        
+    private:
+        // Private methods.
+        int traitsIdx() const;
+    };
+
+} // namespace enigma
+
+#endif /*JAMBSTONE_HH*/


Property changes on: trunk/src/stones/JambStone.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/stones/PortalStone.cc
===================================================================
--- trunk/src/stones/PortalStone.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/PortalStone.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -0,0 +1,80 @@
+/*
+ * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "stones/PortalStone.hh"
+//#include "errors.hh"
+//#include "main.hh"
+
+namespace enigma {
+    PortalStone::PortalStone(int typ) : Stone() {
+        state = typ;
+    }
+    
+    std::string PortalStone::getClass() const {
+        return "st_portal";
+    }
+    
+    Value PortalStone::getAttr(const std::string &key) const {
+        if (key == "flavor") {
+            switch (state) {
+                case HORSE:
+                    return "horse";
+                case PEARL:
+                    return "pearl";
+            }
+        }
+        return Stone::getAttr(key);
+    }
+
+    void PortalStone::setState(int extState) {
+        // no external states
+    }
+    
+    void PortalStone::init_model() {
+        switch (state) {
+            default:
+            case HORSE:
+            case PEARL:
+                set_model("st_portal_horse");
+                break;
+        }
+    }
+    
+    bool PortalStone::is_floating() const {
+        return true;
+    }
+    
+    StoneResponse PortalStone::collision_response(const StoneContact &sc) {
+        ActorID id = get_id(sc.actor);
+        if ((state == HORSE && id == ac_horse) || (state == PEARL && id == ac_pearl_white))
+            return STONE_PASS;
+        else
+            return STONE_REBOUND;
+    }
+    
+    DEF_TRAITS(PortalStone, "st_portal", st_portal);
+
+    BOOT_REGISTER_START
+        BootRegister(new PortalStone(0), "st_portal");
+        BootRegister(new PortalStone(0), "st_portal_horse");
+        BootRegister(new PortalStone(1), "st_portal_pearl");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/stones/PortalStone.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/stones/PortalStone.hh
===================================================================
--- trunk/src/stones/PortalStone.hh	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/PortalStone.hh	2009-02-02 00:27:28 UTC (rev 1500)
@@ -0,0 +1,61 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef PORTALSTONE_HH
+#define PORTALSTONE_HH
+
+#include "stones.hh"
+
+#include "stones_internal.hh"
+
+namespace enigma {
+
+    /** 
+     * 
+     */
+    class PortalStone : public Stone {
+         CLONEOBJ(PortalStone);
+         DECL_TRAITS;
+
+    private:
+        enum iState {
+            HORSE,      ///< 
+            PEARL       ///< 
+        };
+        
+    public:
+        PortalStone(int typ);
+        
+        // Object interface
+        virtual std::string getClass() const;
+        virtual Value getAttr(const std::string &key) const;
+        
+        // StateObject interface
+        virtual void setState(int extState);
+        
+        // GridObject interface
+        virtual void init_model();
+        
+        // Stone interface
+        virtual bool is_floating() const;
+        virtual StoneResponse collision_response(const StoneContact &sc);
+    };
+
+} // namespace enigma
+
+#endif /*PORTALSTONE_HH*/


Property changes on: trunk/src/stones/PortalStone.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones/SimpleStones.hh	2009-02-02 00:27:28 UTC (rev 1500)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2008 Andreas Lochmann
- * Copyright (C) 2008 Ronald Lamprecht
+ * Copyright (C) 2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License

Modified: trunk/src/stones.cc
===================================================================
--- trunk/src/stones.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -407,93 +407,7 @@
     }
 }
 
-/* -------------------- Black- and Whiteballs Stones -------------------- */
 
-namespace
-{
-    class BlackBallsStone : public Stone {
-        CLONEOBJ(BlackBallsStone);
-
-        virtual Value message(const Message &m)
-        {
-            if (m.message == "signal" || m.message == "hit") {
-                if (GridObject *sender = dynamic_cast<GridObject*>(m.sender)) {
-                    GridPos p = get_pos();
-                    Object *o;
-                    if (m.message == "hit")
-                        o = m.value;
-                    else
-                        o = SendMessage(m.sender, "_hitactor");
-                    
-                    Actor *a = dynamic_cast<Actor *>(o);
-                    if ((a && get_id(a) == ac_marble_black) || 
-                            (m.sender->getObjectType() != Object::ITEM && m.message == "signal")) {
-                        if (p.y == sender->get_pos().y) {
-                            SendMessage (GetStone (move (p, EAST)),  "signal", 1.0);
-                            SendMessage (GetStone (move (p, WEST)),  "signal", 1.0);
-                            SendMessage (GetStone (move (p, NORTH)), "signal", 0.0);
-                            SendMessage (GetStone (move (p, SOUTH)), "signal", 0.0);
-                        }
-                        else {
-                            SendMessage (GetStone (move (p, EAST)),  "signal", 0.0);
-                            SendMessage (GetStone (move (p, WEST)),  "signal", 0.0);
-                            SendMessage (GetStone (move (p, NORTH)), "signal", 1.0);
-                            SendMessage (GetStone (move (p, SOUTH)), "signal", 1.0);
-                        }
-                        return Value();
-                    }
-                }
-            }
-            return Stone::message(m);
-        }
-    public:
-        BlackBallsStone() : Stone ("st-blackballs") {
-        }
-    };
-
-    class WhiteBallsStone : public Stone {
-        CLONEOBJ(WhiteBallsStone);
-
-        virtual Value message(const Message &m)
-        {
-            if (m.message == "signal" || m.message == "hit") {
-                if (GridObject *sender = dynamic_cast<GridObject*>(m.sender)) {
-                    GridPos p = get_pos();
-                    Object *o;
-                    if (m.message == "hit")
-                        o = m.value;
-                    else
-                        o = SendMessage(m.sender, "_hitactor");
-                        
-                    Actor *a = dynamic_cast<Actor *>(o);
-                    if ((a && get_id(a) == ac_marble_white) ||
-                             (m.sender->getObjectType() != Object::ITEM && m.message == "signal")) {
-                        if (p.y == sender->get_pos().y) {
-                            SendMessage (GetStone (move (p, EAST)),  "signal", 1.0);
-                            SendMessage (GetStone (move (p, WEST)),  "signal", 1.0);
-                            SendMessage (GetStone (move (p, NORTH)), "signal", 0.0);
-                            SendMessage (GetStone (move (p, SOUTH)), "signal", 0.0);
-                        }
-                        else {
-                            SendMessage (GetStone (move (p, EAST)),  "signal", 0.0);
-                            SendMessage (GetStone (move (p, WEST)),  "signal", 0.0);
-                            SendMessage (GetStone (move (p, NORTH)), "signal", 1.0);
-                            SendMessage (GetStone (move (p, SOUTH)), "signal", 1.0);
-                        }
-                        return Value();
-                    }
-                }
-            }
-            return Stone::message(m);
-        }
-
-    public:
-        WhiteBallsStone() : Stone ("st-whiteballs") {
-        }
-
-    };
-}
-
 // --------------------------------------------------------------------------------
 
 void InitStones() {
@@ -501,8 +415,6 @@
     // Register(new ...);
 
     Register (new SpitterStone);
-    Register (new BlackBallsStone);
-    Register (new WhiteBallsStone);
 
     // Init stones from stones_simple.cc and stones_complex.cc:
     Init_simple();

Modified: trunk/src/stones.hh
===================================================================
--- trunk/src/stones.hh	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones.hh	2009-02-02 00:27:28 UTC (rev 1500)
@@ -50,6 +50,7 @@
         st_break_plain,
         st_break_white,
         st_ghost_break,
+        st_jamb,
         st_chameleon,
         st_chess,
         st_magic_oxydc,
@@ -73,6 +74,7 @@
         st_peroxyd_0xb8,
         st_peroxyd_0xb9,
         st_plop,
+        st_portal,
         st_pull,
         st_puzzle,
         st_rotator,

Modified: trunk/src/stones_simple.cc
===================================================================
--- trunk/src/stones_simple.cc	2009-02-01 15:14:54 UTC (rev 1499)
+++ trunk/src/stones_simple.cc	2009-02-02 00:27:28 UTC (rev 1500)
@@ -24,7 +24,6 @@
 #include "client.hh"
 #include "main.hh"
 #include "Inventory.hh"
-#include "items/GlassesItem.hh"
 
 #include "stones_internal.hh"
 
@@ -32,103 +31,6 @@
 
 namespace enigma {
 
-
-/* -------------------- DummyStone -------------------- */
-
-namespace
-{
-    /*! Used for debugging; Prints its own oxyd code when hit. */
-    class DummyStone : public Stone {
-        CLONEOBJ(DummyStone);
-    public:
-        DummyStone() : Stone("st-dummy") {}
-    private:
-
-        StoneResponse collision_response(const StoneContact &/*sc*/) {
-            static int lastCode = -1;
-            int        code     = getAttr("code");
-            if (code != lastCode) {
-                fprintf(stderr, "Collision with stone 0x%02x\n", code);
-                lastCode = code;
-            }
-            return STONE_REBOUND;
-        }
-    };
-}
-
-/* -------------------- Grates -------------------- */
-
-namespace
-{
-    class GrateBase : public Stone {
-    public:
-        GrateBase(const char *kind) : Stone(kind) {}
-    private:
-        bool is_floating() const { return true; }
-        bool is_transparent (Direction) const { return true; }
-
-        virtual StoneResponse collision_response(const StoneContact &sc) {
-            if (server::GameCompatibility == GAMET_OXYD1) {
-                return STONE_PASS;
-            }
-            // tested with per.oxyd
-            return sc.actor->is_on_floor() ? STONE_PASS : STONE_REBOUND;
-        }
-    };
-
-    /*! Horses and small marbles can move through this stone, but
-      normal marbles can't. */
-    class Grate3 : public GrateBase {
-        CLONEOBJ(Grate3);
-    public:
-        Grate3() : GrateBase("st-grate3") {}
-
-        StoneResponse collision_response(const StoneContact &sc) {
-            ActorID id = get_id(sc.actor);
-            if (id == ac_horse || id == ac_pearl_white || id == ac_killer)
-                return STONE_PASS;
-            else
-                return STONE_REBOUND;
-        }
-    };
-}
-
-
-/* -------------------- Chameleon Stone -------------------- */
-
-namespace
-{
-    class ChameleonStone : public Stone {
-        CLONEOBJ(ChameleonStone);
-        DECL_TRAITS;
-
-        Value message(const Message &m) {
-            if (m.message == "_model_reanimated") {
-                init_model();
-            }
-            return Stone::message(m);
-        }
-        
-        void init_model() {
-            if (Floor *fl = GetFloor(get_pos())) {
-                set_model(fl->get_kind());
-            } else
-                ASSERT(false, XLevelRuntime, "Chameleon Stone: Floor must be set before stone");
-        }
-
-        bool is_floating() const 
-        { return true; }
-
-        StoneResponse collision_response(const StoneContact &)
-        { return STONE_PASS; }
-
-    public:
-        ChameleonStone() 
-        {}
-    };
-    DEF_TRAITS(ChameleonStone, "st-chameleon", st_chameleon);
-}
-
 /* -------------------- BombStone -------------------- */
 
 namespace
@@ -202,11 +104,6 @@
     Register(new BombStone("st-bombs", "it-blackbomb"));
     //Register(new BombStone("st-dynamite", "it-dynamite"));
     //Register(new BombStone("st-whitebombs", "it-whitebomb"));
-
-    Register(new ChameleonStone);
-
-    Register(new DummyStone);
-    Register(new Grate3);
 }
 
 } // namespace enigma



From raoul at mail.berlios.de  Mon Feb  2 19:13:28 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 2 Feb 2009 19:13:28 +0100
Subject: [Enigma-game-svn] r1501 - in trunk/data/levels: enigma_cross
	enigma_iv enigma_v enigma_vii enigma_viii
Message-ID: <200902021813.n12IDSeT025959@sheep.berlios.de>

Author: raoul
Date: 2009-02-02 19:13:25 +0100 (Mon, 02 Feb 2009)
New Revision: 1501

Modified:
   trunk/data/levels/enigma_cross/enigma0_92_1.xml
   trunk/data/levels/enigma_cross/enigma0_92_3.xml
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_iv/duffy125_2.xml
   trunk/data/levels/enigma_iv/index.xml
   trunk/data/levels/enigma_v/ant21_2.xml
   trunk/data/levels/enigma_v/index.xml
   trunk/data/levels/enigma_vii/index.xml
   trunk/data/levels/enigma_vii/mecke09_2.xml
   trunk/data/levels/enigma_vii/pulley04_2.xml
   trunk/data/levels/enigma_vii/pulley06_2.xml
   trunk/data/levels/enigma_vii/pulley07_1.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/mecke13_1.xml
   trunk/data/levels/enigma_viii/mecke19_1.xml
   trunk/data/levels/enigma_viii/mecke20_2.xml
   trunk/data/levels/enigma_viii/mecke23_1.xml
   trunk/data/levels/enigma_viii/ral21_2.xml
Log:
-> Level updates for latest renamings


Modified: trunk/data/levels/enigma_cross/enigma0_92_1.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_1.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_cross/enigma0_92_1.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15100" network="false" owner="Enigma Team" release="1" revision="19" title="Enigma 0.92 - 1"/>
+  <info enigma="1.00" group="Facets" location="15100" network="false" owner="Enigma Team" release="1" revision="20" title="Enigma 0.92 - 1"/>
 
   <attributes/>
 
@@ -115,7 +115,7 @@
     <level _seq="107" _title="The Turtle" _xpath="enigma_iii/ant05_1" author="Petr Machata" ctrl="force" easy="false" id="ant05" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="108" _title="Grow Your Own" _xpath="enigma_iii/nat36_1" author="Nat Pryce" ctrl="force" easy="false" id="natmaze5" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="109" _title="- Meditation -" _xpath="enigma_ii/siegfried37_1" author="Siegfried Fennig" ctrl="force" easy="false" id="meditation16" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="110" _title="Draggers" _xpath="enigma_v/ant21_2" author="Petr Machata" ctrl="force" easy="true" id="ant21" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="110" _title="Draggers" _xpath="enigma_v/ant21_2" author="Petr Machata" ctrl="force" easy="true" id="ant21" rel="2" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="111" _title="The Disappearing Block" _xpath="enigma_ii/duffy02_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy2" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="112" _title="Space Fishing" _xpath="enigma_iii/martin73_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin73" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="113" _title="Robbery" _xpath="enigma_iv/ant29_2" author="Petr Machata" ctrl="force" easy="false" id="ant29" rel="2" rev="1" score="2" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/enigma0_92_3.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_3.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_cross/enigma0_92_3.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15300" network="false" owner="Enigma Team" release="1" revision="13" title="Enigma 0.92 - 3"/>
+  <info enigma="1.00" group="Facets" location="15300" network="false" owner="Enigma Team" release="1" revision="14" title="Enigma 0.92 - 3"/>
 
   <attributes/>
 
@@ -63,7 +63,7 @@
     <level _seq="55" _title="Civil Engineer" _xpath="enigma_i/duffy122_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy122" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Electric Meditation" _xpath="enigma_iv/duffy123_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy123" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Worse Nightmare" _xpath="enigma_iv/duffy124_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy124" rel="2" rev="3" score="2" target="time" unit="duration"/>
-    <level _seq="58" _title="Triple-Maze" _xpath="enigma_iv/duffy125_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy125" rel="2" rev="11" score="2" target="time" unit="duration"/>
+    <level _seq="58" _title="Triple-Maze" _xpath="enigma_iv/duffy125_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy125" rel="2" rev="12" score="2" target="time" unit="duration"/>
     <level _seq="59" _title="Elaborate" _xpath="enigma_v/duffy126_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy126" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="60" _title="Now What?" _xpath="enigma_v/duffy127_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy127" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="61" _title="Patterns" _xpath="enigma_ii/duffy128_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy128" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="34" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="35" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -30,7 +30,7 @@
     <level _seq="22" _title="Double Oneways" _xpath="enigma_vii/duffy172_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy172" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Wood - Water - Wood" _xpath="enigma_vii/duffy173_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy173" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="Transpositions" _xpath="enigma_vii/duffy174_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy174" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="25" _title="Puppet" _xpath="enigma_vii/pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="8" score="1" target="time" unit="duration"/>
+    <level _seq="25" _title="Puppet" _xpath="enigma_vii/pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="Restless Meditation" _xpath="enigma_vii/ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="27" _title="Ghost Driver" _xpath="enigma_vii/duffy176_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy176" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Re-entry Circuit" _xpath="enigma_vii/pulley05_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley05" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -59,8 +59,8 @@
     <level _seq="51" _title="Swapping Puzzle II" _xpath="enigma_vii/joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Multiban" _xpath="enigma_vii/dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Riverside" _xpath="enigma_vii/johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="16" score="2" target="time" unit="duration"/>
-    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="18" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="17" score="2" target="time" unit="duration"/>
+    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="19" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Spaceship Control" _xpath="enigma_vii/safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Ball Alley" _xpath="enigma_vii/johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Action Potential" _xpath="enigma_vii/pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -79,11 +79,11 @@
     <level _seq="71" _title="Pick-Up" _xpath="enigma_vii/joe27_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe27" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="A Kind of Magic" _xpath="enigma_vii/just37_1" author="JuSt" ctrl="force" easy="true" id="JuStA Kind of Magic" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="73" _title="Blue Screen Of Death" _xpath="enigma_vii/pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="74" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="38" score="1" target="time" unit="duration"/>
+    <level _seq="74" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Black Liberation" _xpath="enigma_vii/mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="47" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="34" score="1" target="time" unit="duration"/>
-    <level _seq="78" _title="Rhythm of Space" _xpath="enigma_viii/mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="37" score="1" target="time" unit="duration"/>
+    <level _seq="78" _title="Rhythm of Space" _xpath="enigma_viii/mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="38" score="1" target="time" unit="duration"/>
     <level _seq="79" _title="The Show Jumper" _xpath="enigma_viii/andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="The Red Room" _xpath="enigma_viii/joe29_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe29" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Enigmines" _xpath="enigma_viii/huffman01_1" author="Brian Huffman" ctrl="force" easy="true" id="huffman01" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -120,7 +120,7 @@
     <level _seq="112" _title=" - Meditation - " _xpath="enigma_viii/devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="113" _title="Relaxing at the sea" _xpath="enigma_viii/devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="114" _title="Helios II" _xpath="enigma_viii/mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
-    <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="151" score="2" target="time" unit="duration"/>
+    <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="152" score="2" target="time" unit="duration"/>
     <level _seq="116" _title="Alternation I" _xpath="enigma_viii/mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="117" _title="Enigmaparcour II" _xpath="enigma_viii/mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="118" _title=" - Meditation - " _xpath="enigma_viii/devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
@@ -133,11 +133,11 @@
     <level _seq="125" _title="On belay?" _xpath="enigma_viii/devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="126" _title="Hang-dogging?" _xpath="enigma_viii/devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="127" _title="Alternation II" _xpath="enigma_viii/mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
-    <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="34" score="1" target="time" unit="duration"/>
-    <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="18" score="1" target="time" unit="duration"/>
+    <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="35" score="1" target="time" unit="duration"/>
+    <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="19" score="1" target="time" unit="duration"/>
     <level _seq="130" _title="Techno Voodoo" _xpath="enigma_viii/mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="17" score="1" target="time" unit="duration"/>
     <level _seq="131" _title="Plutos World" _xpath="enigma_viii/mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="19" score="1" target="time" unit="duration"/>
-    <level _seq="132" _title="Plutos Confusion" _xpath="enigma_viii/mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="18" score="1" target="time" unit="duration"/>
+    <level _seq="132" _title="Plutos Confusion" _xpath="enigma_viii/mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="19" score="1" target="time" unit="duration"/>
     <level _seq="133" _title="Coober Pedy Opals" _xpath="enigma_viii/ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="134" _title="Butterfly Opals" _xpath="enigma_viii/ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="135" _title="Brilliant Opals" _xpath="enigma_viii/ral37_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081212ral162" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/duffy125_2.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy125_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_iv/duffy125_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Triple-Maze" el:subtitle="" el:id="duffy125"/>
-      <el:version el:score="2" el:release="2" el:revision="11" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="12" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -22,7 +22,7 @@
 ti["#"] = {"st_greenbrown"}
 ti["B"] = {"st_passage_black_square"}
 ti["W"] = {"st_passage_white_square"}
-ti["H"] = {"st-grate3"}
+ti["H"] = {"st_portal"}
 ti["o"] = {"st_oxyd"}
 ti["*"] = {"st_brownie"}
 ti["x"] = {"it_yinyang"}

Modified: trunk/data/levels/enigma_iv/index.xml
===================================================================
--- trunk/data/levels/enigma_iv/index.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_iv/index.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="26" title="Enigma IV"/>
+  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="27" title="Enigma IV"/>
 
   <attributes/>
 
@@ -73,7 +73,7 @@
     <level _seq="65" _title="Little Bit of Everything" _xpath="./duffy34_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy34" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="66" _title="Snowball Fight" _xpath="./nat14_1" author="Nat Pryce" ctrl="force" easy="false" id="nat14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="67" _title="U-Swap" _xpath="./ralf15_1" author="Ralf Westram" ctrl="force" easy="true" id="ralf15" rel="1" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="68" _title="Triple-Maze" _xpath="./duffy125_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy125" rel="2" rev="11" score="2" target="time" unit="duration"/>
+    <level _seq="68" _title="Triple-Maze" _xpath="./duffy125_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy125" rel="2" rev="12" score="2" target="time" unit="duration"/>
     <level _seq="69" _title="The Dark Outside" _xpath="./andreas16_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas16" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="70" _title="Electric Meditation" _xpath="./duffy123_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy123" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="71" _title="Seed Puzzle" _xpath="./duffy77_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy77" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_v/ant21_2.xml
===================================================================
--- trunk/data/levels/enigma_v/ant21_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_v/ant21_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Draggers" el:subtitle="" el:id="ant21"/>
-      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="5" el:status="released"/>
       <el:author  el:name="Petr Machata" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Petr Machata</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -19,7 +19,7 @@
 
 ti[" "] = {"fl_metal"}
 ti["."] = {"fl_abyss"}
-ti[":"] = ti[" "] .. ti({"it_seed"}) .. {"st-chameleon"}
+ti[":"] = ti[" "] .. ti({"it_seed"}) .. {"st_chameleon"}
 ti["d"] = {"it_document", text="text1"}
 ti["#"] = {"st_granite"}
 ti["X"] = {"st_grate_cross"}

Modified: trunk/data/levels/enigma_v/index.xml
===================================================================
--- trunk/data/levels/enigma_v/index.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_v/index.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10600" network="false" owner="Enigma Team" release="1" revision="25" title="Enigma V"/>
+  <info enigma="1.00" group="Enigma" location="10600" network="false" owner="Enigma Team" release="1" revision="26" title="Enigma V"/>
 
   <attributes/>
 
@@ -21,7 +21,7 @@
     <level _seq="13" _title="Sentry Duty" _xpath="./nat25_1" author="Nat Pryce" ctrl="force" easy="true" id="nat25" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="Thievish Alleys" _xpath="./andreas33_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas33" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="Solvable?" _xpath="./barry01_2" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry01" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="16" _title="Draggers" _xpath="./ant21_2" author="Petr Machata" ctrl="force" easy="true" id="ant21" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="16" _title="Draggers" _xpath="./ant21_2" author="Petr Machata" ctrl="force" easy="true" id="ant21" rel="2" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="Break and Enter" _xpath="./siegfried16_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level5b" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="Double play" _xpath="./just06_1" author="JuSt" ctrl="force" easy="false" id="just06" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Oxyd-Puzzle" _xpath="./raoul05_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul05" rel="2" rev="7" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_vii/index.xml
===================================================================
--- trunk/data/levels/enigma_vii/index.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_vii/index.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="38" title="Enigma VII"/>
+  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="39" title="Enigma VII"/>
 
   <attributes/>
 
@@ -54,7 +54,7 @@
     <level _seq="46" _title="Double Oneways" _xpath="./duffy172_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy172" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="47" _title="Wood - Water - Wood" _xpath="./duffy173_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy173" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="48" _title="Transpositions" _xpath="./duffy174_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy174" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="49" _title="Puppet" _xpath="./pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="8" score="1" target="time" unit="duration"/>
+    <level _seq="49" _title="Puppet" _xpath="./pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Restless Meditation" _xpath="./ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Ghost Driver" _xpath="./duffy176_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy176" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Re-entry Circuit" _xpath="./pulley05_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley05" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -83,8 +83,8 @@
     <level _seq="75" _title="Swapping Puzzle II" _xpath="./joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Multiban" _xpath="./dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Riverside" _xpath="./johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="16" score="2" target="time" unit="duration"/>
-    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="18" score="1" target="time" unit="duration"/>
+    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="17" score="2" target="time" unit="duration"/>
+    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="19" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="Spaceship Control" _xpath="./safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Ball Alley" _xpath="./johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="Action Potential" _xpath="./pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -103,7 +103,7 @@
     <level _seq="95" _title="Pick-Up" _xpath="./joe27_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe27" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="96" _title="A Kind of Magic" _xpath="./just37_1" author="JuSt" ctrl="force" easy="true" id="JuStA Kind of Magic" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="97" _title="Blue Screen Of Death" _xpath="./pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="98" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="38" score="1" target="time" unit="duration"/>
+    <level _seq="98" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
     <level _seq="99" _title="Black Liberation" _xpath="./mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
     <level _seq="100" _title="Jack-Of-All-Trades" _xpath="./mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="47" score="1" target="time" unit="duration"/>
   </levels>

Modified: trunk/data/levels/enigma_vii/mecke09_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/mecke09_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_vii/mecke09_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Audience in Venice" el:subtitle="Press the Triggers" el:id="mecke9"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 38 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 39 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -94,7 +94,7 @@
 ti["N "] = {"st_door_a"}
 ti["m "] = {"it_springboard"}
 ti["O "] = {"st_purplegray"}
-ti["P "] = {"st-grate3"}
+ti["P "] = {"st_portal"}
 ti["R "] = {"st_grate_framed"}
 ti[" 7"] = {"fl_space"}
 ti["S "] = {"st_ghost_break"}
@@ -104,7 +104,7 @@
 ti["U "] = {"st_plaster_breakable"}
 ti["V "] = {"st_tigris"}
 ti["W "] = {"st_mirror", movable=true, transparent=false, orientation=SOUTH}
-ti["n "] = {"it-surprise"}
+ti["n "] = {"it_surprise"}
 ti["X "] = {"st_oneway_black_n"}
 ti["o "] = {"it_squashed"}
 ti["Y "] = {"st_oneway_black_w"}

Modified: trunk/data/levels/enigma_vii/pulley04_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Lone Ranger" el:subtitle="" el:id="pulley04"/>
-      <el:version el:score="2" el:release="2" el:revision="16" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="17" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -25,7 +25,7 @@
 ti["k"] = ti[" "] .. {"it_trigger", action="callback", target="Band2"} -- attaches rubber band from Tonto to Tonto's Horse
 ti["l"] = {"fl_water"}
 ti["m"] = ti[" "] .. {"it_hammer"}
-ti["n"] = (ti[" "] .. {"it-drop"}) .. ti({"st-chameleon"})
+ti["n"] = (ti[" "] .. {"it-drop"}) .. ti({"st_chameleon"})
 ti["o"] = {"fl_sand", secure=true} .. ti({"it_burnable_oil"})
 ti["p"] = {"fl_swamp"}
 ti["q"] = ti[" "] .. {"st_redrock"} -- SUN RAY

Modified: trunk/data/levels/enigma_vii/pulley06_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley06_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_vii/pulley06_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Puppet" el:subtitle="" el:id="pulley06"/>
-      <el:version el:score="1" el:release="2" el:revision="8" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="9" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -22,7 +22,7 @@
     ti["f"]= {"ac_horse", name="footL"} .. ti({"fl_metal_7"})
 end
 ti["b"] = {"fl_bluegreen"}
-ti["g"] = {"st-grate3"}
+ti["g"] = {"st_portal"}
 ti["0"] = {"st_oxyd_b"}
 ti["Y"] = {"st_rawglass", name="support1"}
 ti["Z"] = {"st_rawglass", name="support2"}
@@ -39,7 +39,7 @@
 ti["door"] = {"st_door", name="Door%%", flavor="a"} .. ti["b"]
 ti["W"] = {"st_brick"}
 ti["trigger"]= {"it_trigger", target="Door%%"} .. ti["b"]
-ti["2"]= {"st-grate3"} .. ti({"it_trigger", target="Door%2"}) .. ti["b"]
+ti["2"]= {"st_portal"} .. ti({"it_trigger", target="Door%2"}) .. ti["b"]
 ti["."] = {"#ac_marble_black"}
 
 resolver = res.autotile(ti, {"1", "9", "trigger"}, {"A","I","door"})

Modified: trunk/data/levels/enigma_vii/pulley07_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Little Shop Of Horrors" el:subtitle="Watch out, here comes Audrey II!" el:id="pulley07"/>
-      <el:version el:score="1" el:release="1" el:revision="18" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="19" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -76,7 +76,7 @@
 ti["J"] = ti["b"] .. {"#ac_pearl_white", name="Orin", controllers=0,essential=-1}
 ti["K"] = ti["z"] .. {"#ac_pearl_white", name="Mushnik", controllers=0,essential=-1}
 ti["L"] = ti["f"] .. {"#ac_pearl_white", name="Audrey", controllers=0,essential=-1}
-ti["Y"] = ti[" "] .. {"st-grate3"}
+ti["Y"] = ti[" "] .. {"st_portal"}
 ti["M"] = ti["Y"] .. {"#ac_horse", strength=3, name="horse", destination={"d1","d2","d3","d4"}} -- Chiffon, Crystal, Ronnette
 ti["O"] = ti[" "] .. {"st_panel", cluster=1}
 ti["P"] = {"fl_bright"} .. ti({"st_flat_breakable"})
@@ -86,10 +86,10 @@
 ti["T"] = {"fl_plank"} .. ti({"it_coffee"})
 ti["W"] = (ti({"fl-gradient15"}) .. {"st_oneway", orientation=WEST}) .. {"it_burnable"}
 ti["X"] = ti[" "] .. {"st_brick"}
-ti["["] = ti[" "] .. {"st-grate3", name="d1"}
-ti["]"] = ti[" "] .. {"st-grate3", name="d2"}
-ti["{"] = ti[" "] .. {"st-grate3", name="d3"}
-ti["}"] = ti[" "] .. {"st-grate3", name="d4"}
+ti["["] = ti[" "] .. {"st_portal", name="d1"}
+ti["]"] = ti[" "] .. {"st_portal", name="d2"}
+ti["{"] = ti[" "] .. {"st_portal", name="d3"}
+ti["}"] = ti[" "] .. {"st_portal", name="d4"}
 
 --|         1    1   |2    2    3    3  | 4    4    5    5 |  6    6    7    7|   8    8    9   9|
 --|1   5    0    5   |0    5    0    5  | 0    5    0    5 |  0    5    0    5|   0    5    0   4|

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -1,14 +1,14 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="29" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="30" title="Enigma VIII"/>
 
   <attributes/>
 
   <levels>
     <level _seq="1" _title="Welcome" _xpath="./welcometopack8_1" author="Raoul Bourquin" ctrl="force" easy="true" id="welcometopack8" rel="1" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="2" _title="Enigmaparcour I" _xpath="./mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="34" score="1" target="time" unit="duration"/>
-    <level _seq="3" _title="Rhythm of Space" _xpath="./mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="37" score="1" target="time" unit="duration"/>
+    <level _seq="3" _title="Rhythm of Space" _xpath="./mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="38" score="1" target="time" unit="duration"/>
     <level _seq="4" _title="The Show Jumper" _xpath="./andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
     <level _seq="5" _title="The Red Room" _xpath="./joe29_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe29" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="6" _title="Enigmines" _xpath="./huffman01_1" author="Brian Huffman" ctrl="force" easy="true" id="huffman01" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -43,7 +43,7 @@
     <level _seq="35" _title="- Meditation -" _xpath="./raoul31_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul31" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Relaxing at the sea" _xpath="./devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Helios II" _xpath="./mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
-    <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="151" score="2" target="time" unit="duration"/>
+    <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="152" score="2" target="time" unit="duration"/>
     <level _seq="39" _title="Alternation I" _xpath="./mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="40" _title="Enigmaparcour II" _xpath="./mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="41" _title=" - Meditation - " _xpath="./devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
@@ -56,11 +56,11 @@
     <level _seq="48" _title="On belay?" _xpath="./devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Hang-dogging?" _xpath="./devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Alternation II" _xpath="./mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
-    <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="34" score="1" target="time" unit="duration"/>
-    <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="18" score="1" target="time" unit="duration"/>
+    <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="35" score="1" target="time" unit="duration"/>
+    <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="19" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Techno Voodoo" _xpath="./mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="17" score="1" target="time" unit="duration"/>
     <level _seq="54" _title="Plutos World" _xpath="./mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="19" score="1" target="time" unit="duration"/>
-    <level _seq="55" _title="Plutos Confusion" _xpath="./mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="18" score="1" target="time" unit="duration"/>
+    <level _seq="55" _title="Plutos Confusion" _xpath="./mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="19" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Coober Pedy Opals" _xpath="./ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Butterfly Opals" _xpath="./ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Brilliant Opals" _xpath="./ral37_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081212ral162" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_viii/mecke13_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke13_1.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_viii/mecke13_1.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Plutos Confusion" el:subtitle="The other side ..." el:id="mecke30"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 18 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 19 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -75,8 +75,8 @@
 ti["m"] = ti[" "] .. {"it_magnet", name="maggi1",state=ON, range=20, strength=10}
 ti["U"] = {"st_oneway_black_w"}
 ti["V"] = {"st_passage_black_frame"}
-ti["n"] = ti[" "] .. ti["W"] .. {"st-chameleon"}
-ti["o"] = ti[" "] .. ti["m"] .. {"st-chameleon"}
+ti["n"] = ti[" "] .. ti["W"] .. {"st_chameleon"}
+ti["o"] = ti[" "] .. ti["m"] .. {"st_chameleon"}
 ti["O"] = ti[" "] .. {"st_lightglass_hollow"}
 ti["'"] = {"it_burnable_oil"}
 ti[":"] = {"it_burnable_burning"}

Modified: trunk/data/levels/enigma_viii/mecke19_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke19_1.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_viii/mecke19_1.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Turbulencia" el:subtitle="Meditation! Silence? ... Have a Look ..." el:id="mecke19" />
-      <el:version el:score="1" el:release="1" el:revision="$Revision:18$" el:status="released" />
+      <el:version el:score="1" el:release="1" el:revision="$Revision:19$" el:status="released" />
       <el:author el:name="mecke" el:email="" />
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true" />
@@ -39,7 +39,7 @@
 ti[" ("] = {"fl-gradient11"}
 ti["+ "] = {"st_boulder_e"}
 ti[", "] = {"st_pull"}
-ti[" a"] = ti["hh"] .. {"it-surprise"}
+ti[" a"] = ti["hh"] .. {"it_surprise"}
 ti[" )"] = {"fl-gradient12"}
 ti[" *"] = {"fl-gradient4"}
 ti["- "] = {"st_boulder_w"}

Modified: trunk/data/levels/enigma_viii/mecke20_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke20_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_viii/mecke20_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Rhythm of Space" el:subtitle="Only A Labyrinth" el:id="mecke20"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 37 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 38 $" el:status="released"/>
       <el:author  el:name="mecke" el:email=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -29,7 +29,7 @@
 ti["ex"] = ti[" %"]..{"it_extralife"}
 ti["' "] = {"st_yellow"}
 ti[" '"] = {"fl_bluegray"}
-ti["( "] = {"st-grate3"}
+ti["( "] = {"st_portal"}
 ti["* "] = {"st_break_oxydc"}
 ti[" )"] = {"fl_yinyang_yin"}
 ti["+ "] = {"st_passage_white_cross"}

Modified: trunk/data/levels/enigma_viii/mecke23_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke23_1.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_viii/mecke23_1.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Fifty Years Later ..." el:subtitle="Survival Training in wasted Landscapes ..." el:id="mecke23"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 34 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 35 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -32,7 +32,7 @@
 ti[" O"] = {"fl_abyss"}
 ti[" 1"] = {"fl_red"}
 ti["/ "] = {"st-puzzle-new"}
-ti["$ "] = {"st-grate3"}
+ti["$ "] = {"st_portal"}
 ti["% "] = {"st_redfiber"}
 ti["& "] = {"st_darkglass"}
 ti["' "] =  ti[" O"] .. {"it_strip_ns"}

Modified: trunk/data/levels/enigma_viii/ral21_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/ral21_2.xml	2009-02-02 00:27:28 UTC (rev 1500)
+++ trunk/data/levels/enigma_viii/ral21_2.xml	2009-02-02 18:13:25 UTC (rev 1501)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Tutoxyd's Pyramid" el:subtitle="Marble Jones I" el:id="20070822ral291"/>
-      <el:version el:score="2" el:release="2" el:revision="$Revision: 151 $" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="$Revision: 152 $" el:status="released"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2007,2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -165,7 +165,7 @@
 ti["t6"] = ti["%."] .. {"it_trigger", target="volcano", name="volcano6"}
 ti["tc"] = ti["^^"] .. {"it_sensor", target="scorpion_count"}
 ti["ti"] = ti["%%"] .. {"it_sensor", target="scorpion_init", invisible=true}
-ti[" C"] = ti["  "] .. {"st-chameleon"}
+ti[" C"] = ti["  "] .. {"st_chameleon"}
 ti["'b"] = ti["''"] .. {"st_passage_black_frame"}
 ti["W "] = ti["  "] .. {"st_passage_white_cross"}
 ti["Wv"] = ti[" v"] .. {"st_passage_white_cross"}
@@ -247,7 +247,7 @@
 ti["K0"] = ti["  "] .. {"st_key", code=0, target="predecessor"}
 ti["B0"] = ti[",,"] .. {"st_door_d", "predecessor", faces="ew"}
 ti["O,"] = ti[",,"] .. {"st_door_d", "oil_shop", faces="ns"}
-ti["Cm"] = ti[" m"] .. {"st-chameleon"}
+ti["Cm"] = ti[" m"] .. {"st_chameleon"}
 ti["UA"] = ti["_U"] .. {"st_lightglass"}
 ti["B;"] = ti[";;"] .. {"st_passage_black_frame"}
 ti["BB"] = ti["  "] .. {"st_brick", cluster=1}
@@ -290,7 +290,7 @@
 ti["GV"] = ti["t1"] .. {"st_passage_black_frame"}
 ti["Ti"] = ti["ti"] .. {"st_passage_black_frame"}
 ti["HW"] = ti["  "] .. {"st_chess_white"}
-ti["C."] = ti[".."] .. {"st-chameleon"}
+ti["C."] = ti[".."] .. {"st_chameleon"}
 ti["Mw"] = ti["  "] .. {"st_mail_w"}
 ti["TL"] = ti[",,"] .. {"st_timer", target="do_curse_legs", name="timer_curse_legs", state=OFF}
 ti["ON"] = ti["^^"] .. {"st_oneway_n"}
@@ -317,7 +317,7 @@
 ti["D5"] = ti["::"] .. {"st_door_c", "door5#"}
 ti["D7"] = ti[".."] .. {"st_door_a", "door7"}
 ti["D8"] = ti["gw"] .. {"st_door_a", "door8"}
-ti["_C"] = ti["__"] .. {"st-chameleon"}
+ti["_C"] = ti["__"] .. {"st_chameleon"}
 ti["_T"] = ti["__"] .. {"st_invisible"} .. ti({"#ac_horse"})
 
 ti[" 1"] = ti[",,"] .. {"#ac_marble_black", "black", essential=1, owner=0, controllers=1} .. ti({"it_extralife"})
@@ -334,14 +334,14 @@
 ti["%6"] = ti["%%"] .. {"#ac_rotor", range=3, strength=40}
 ti["'6"] = ti["''"] .. {"ac_rotor", range=3, strength=40}
 
-ti["C4"] = ti[" 4"] .. {"st-chameleon"}    -- aka sand viper in natur
+ti["C4"] = ti[" 4"] .. {"st_chameleon"}    -- aka sand viper in natur
 ti["H4"] = ti[" 4"] .. {"st_greenbrown_hollow"}    -- aka sand viper in natur
 ti["P5"] = ti[" 5"] .. {"st_pull"}    -- aka sand viper in a puller
 ti["G6"] = ti[" 6"] .. {"st_lightglass"}    -- aka rotodile in a puller
 ti["G3"] = ti[" 3"] .. {"st_lightglass"}    -- aka scorpion in a puller
 ti["G8"] = ti[" 8"] .. {"st_lightglass_movable"}
 ti["W4"] = ti[" 4"] .. {"st_window_e"}
-ti["C1"] = ti["k1"] .. {"st-chameleon"}
+ti["C1"] = ti["k1"] .. {"st_chameleon"}
 
 ti["'A"] = {"fl_sahara", "tutoxyd"}
 
@@ -359,8 +359,8 @@
 ti["VE"] = ti["%%"] .. {"it_vortex", "vortex_E", destination="vortex_e"}
 ti["FB"] = ti["Rh"] .. {"it_wormhole", destination="fire_target", range=1.5}
 
-ti["'c"] = ti["''"] .. {"st-chameleon"}
-ti["?g"] = ti["  "] .. {"st-grate3"}
+ti["'c"] = ti["''"] .. {"st_chameleon"}
+ti["?g"] = ti["  "] .. {"st_portal"}
 ti[" w"] = ti["  "] .. {"it_magicwand"}
 
 ti["ni"] = {"st_nil"} .. ti{"it_nil"}



From raoulb at bluewin.ch  Mon Feb  2 19:51:48 2009
From: raoulb at bluewin.ch (Raoul)
Date: Mon, 2 Feb 2009 19:51:48 +0100
Subject: [Enigma-game-svn] r1502
Message-ID: <20090202195148.1e144166@amarok.loinet.zh>

-> Many new API level rewritings


From ral at mail.berlios.de  Tue Feb  3 00:53:35 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Tue, 3 Feb 2009 00:53:35 +0100
Subject: [Enigma-game-svn] r1503 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 data/schemas src src/items src/others src/stones
Message-ID: <200902022353.n12NrZQN022429@sheep.berlios.de>

Author: ral
Date: 2009-02-03 00:53:30 +0100 (Tue, 03 Feb 2009)
New Revision: 1503

Added:
   trunk/data/gfx32/it_bottle_broken.png
   trunk/data/gfx32/it_bottle_idle.png
   trunk/data/gfx32/it_drop.png
   trunk/data/gfx32/it_dummy.png
   trunk/data/gfx32/it_odometer.png
   trunk/data/gfx40/it_bottle_broken.png
   trunk/data/gfx40/it_bottle_idle.png
   trunk/data/gfx40/it_drop.png
   trunk/data/gfx40/it_dummy.png
   trunk/data/gfx40/it_odometer.png
   trunk/data/gfx48/it_bottle-broken.png
   trunk/data/gfx48/it_bottle_idle.png
   trunk/data/gfx48/it_drop.png
   trunk/data/gfx48/it_dummy.png
   trunk/data/gfx48/it_odometer.png
   trunk/src/items/Bottle.cc
   trunk/src/items/Bottle.hh
   trunk/src/items/Drop.cc
   trunk/src/items/Drop.hh
Removed:
   trunk/data/gfx32/it-booze-broken.png
   trunk/data/gfx32/it-booze.png
   trunk/data/gfx32/it-drop.png
   trunk/data/gfx32/it-dummy.png
   trunk/data/gfx32/it-odometer.png
   trunk/data/gfx40/it-booze-broken.png
   trunk/data/gfx40/it-booze.png
   trunk/data/gfx40/it-drop.png
   trunk/data/gfx40/it-dummy.png
   trunk/data/gfx40/it-odometer.png
   trunk/data/gfx48/it-booze-broken.png
   trunk/data/gfx48/it-booze.png
   trunk/data/gfx48/it-drop.png
   trunk/data/gfx48/it-dummy.png
   trunk/data/gfx48/it-odometer.png
Modified:
   trunk/data/api1init.lua
   trunk/data/api2init.lua
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Makefile.am
   trunk/src/items.cc
   trunk/src/items.hh
   trunk/src/items/CompatibilityItems.cc
   trunk/src/items/CompatibilityItems.hh
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/others/CounterGadget.cc
   trunk/src/ox_magnum.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/oxyd.cc
   trunk/src/stones/ShogunStone.cc
Log:
Trunk 1.1: new API reengineering
- gadget counter:
  - react on state dependent action, too
- reengineering booze:
  - new class bottle item
  - it-booze -> it_bottle
  - it-booze-broken -> it_bottle_broken
- renaming drop item:
  - it-drop -> it_drop
- renaming system items:
  - it-debris -> it_debris
  - it-odometer -> it_odometer
  - it-dummy -> it_dummy
Note:
- odometer should not be used in Enigma mode! Use coffee instead.
- bottle, drop features are still incomplete and need to be fixed 

Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/data/api1init.lua	2009-02-02 23:53:30 UTC (rev 1503)
@@ -134,6 +134,8 @@
     it_bag = "it-bag",
     it_blocker = "it-blocker",
     it_blocker_new = "it-blocker-new",
+    it_bottle_idle = "it-booze",
+    it_bottle_broken = "it-booze-broken",
     it_brake = "it-brake",
     it_brush = "it-brush",
     it_burnable_invisible = "it-burnable",
@@ -153,6 +155,7 @@
     it_crack_l = "it-crack3",
     it_cross = "it-cross",
     it_document = "it-document",
+    it_drop = "it-drop",
     it_extinguisher_empty = "it-extinguisher_empty",
     it_extinguisher_medium = "it-extinguisher_medium",
     it_extinguisher_full = "it-extinguisher",

Modified: trunk/data/api2init.lua
===================================================================
--- trunk/data/api2init.lua	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/data/api2init.lua	2009-02-02 23:53:30 UTC (rev 1503)
@@ -84,6 +84,7 @@
 YANG      = 1
 EMPTY     = 0
 FULL      = 2
+BROKEN    = 1 
 
 -- color
 BLACK  = 0

Deleted: trunk/data/gfx32/it-booze-broken.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-booze.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-drop.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-odometer.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/it_bottle_broken.png (from rev 1502, trunk/data/gfx32/it-booze-broken.png)

Copied: trunk/data/gfx32/it_bottle_idle.png (from rev 1502, trunk/data/gfx32/it-booze.png)

Copied: trunk/data/gfx32/it_drop.png (from rev 1502, trunk/data/gfx32/it-drop.png)

Copied: trunk/data/gfx32/it_dummy.png (from rev 1502, trunk/data/gfx32/it-dummy.png)

Copied: trunk/data/gfx32/it_odometer.png (from rev 1502, trunk/data/gfx32/it-odometer.png)

Deleted: trunk/data/gfx40/it-booze-broken.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-booze.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-drop.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-odometer.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/it_bottle_broken.png (from rev 1502, trunk/data/gfx40/it-booze-broken.png)

Copied: trunk/data/gfx40/it_bottle_idle.png (from rev 1502, trunk/data/gfx40/it-booze.png)

Copied: trunk/data/gfx40/it_drop.png (from rev 1502, trunk/data/gfx40/it-drop.png)

Copied: trunk/data/gfx40/it_dummy.png (from rev 1502, trunk/data/gfx40/it-dummy.png)

Copied: trunk/data/gfx40/it_odometer.png (from rev 1502, trunk/data/gfx40/it-odometer.png)

Deleted: trunk/data/gfx48/it-booze-broken.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-booze.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-drop.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-odometer.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_bottle-broken.png (from rev 1502, trunk/data/gfx48/it-booze-broken.png)

Added: trunk/data/gfx48/it_bottle_idle.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/it_bottle_idle.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx48/it_drop.png (from rev 1502, trunk/data/gfx48/it-drop.png)

Copied: trunk/data/gfx48/it_dummy.png (from rev 1502, trunk/data/gfx48/it-dummy.png)

Copied: trunk/data/gfx48/it_odometer.png (from rev 1502, trunk/data/gfx48/it-odometer.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/data/models-2d.lua	2009-02-02 23:53:30 UTC (rev 1503)
@@ -453,14 +453,14 @@
         "it_bag",
         "it-blackbomb",
         "it-blocker",
-        "it-booze",
-        "it-booze-broken",
+        "it_bottle_idle",
+        "it_bottle_broken",
         "it_document",
-        "it-drop",
+        "it_drop",
         "it-dynamite",
         "it_flag_black",
         "it_flag_white",
-        "it-odometer",
+        "it_odometer",
         "it_pencil",
         "it_pin",
         "it_ring",
@@ -528,7 +528,7 @@
 
 -- it-dummy
 do
-    DefTiles("it-dummy", {"it-dummy", "it-dummy_egg"})
+    DefTiles("it_dummy", {"it_dummy", "it_dummy_egg"})
 end
 
 -- Oil --
@@ -614,7 +614,7 @@
 do
     local images = DefSubimages("it-crack", {h=8})
     local frames = BuildFrames(images,50)
-    DefAnim("it-debris", frames)
+    DefAnim("it_debris", frames)
 
     local frames = BuildFrames({"it-crack4", "it-crack5", "it-crack6", "it-crack7", "it-crack8"},120)
     DefAnim("it-crack_anim", frames)

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/data/schemas/objects.xml	2009-02-02 23:53:30 UTC (rev 1503)
@@ -385,6 +385,15 @@
     <object name="it_bag"/>
     <object name="it_blocker_new" init="true">
     </object>
+    <object name="it_bottle">
+      <msg name="_brush"/>
+    </object>
+    <object name="it_bottle_idle">
+      <attr name="state" value="0"/>
+    </object>
+    <object name="it_bottle_broken">
+      <attr name="state" value="1"/>
+    </object>
     <object name="it_brake"/>
     <object name="it_brush"/>
     <object name="it_cherry"/>
@@ -455,6 +464,7 @@
     <object name="it_document">
       <attr name="text"/>
     </object>
+    <object name="it_drop"/>
     <object name="it_extinguisher">
       <attr name="state" max="2"/>
     </object>

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/Makefile.am	2009-02-02 23:53:30 UTC (rev 1503)
@@ -208,6 +208,8 @@
 	items/BrakeItem.hh	\
 	items/BlockerItem.cc	\
 	items/BlockerItem.hh	\
+	items/Bottle.cc		\
+	items/Bottle.hh		\
 	items/BurnableItem.cc	\
 	items/BurnableItem.hh	\
 	items/Coin.cc		\
@@ -220,6 +222,8 @@
 	items/CrossItem.hh	\
 	items/DocumentItem.cc	\
 	items/DocumentItem.hh	\
+	items/Drop.cc		\
+	items/Drop.hh		\
 	items/Extinguisher.cc	\
 	items/Extinguisher.hh	\
 	items/ExtraLife.cc	\

Added: trunk/src/items/Bottle.cc
===================================================================
--- trunk/src/items/Bottle.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/Bottle.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -0,0 +1,87 @@
+/*
+ * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "items/Bottle.hh"
+//#include "errors.hh"
+//#include "main.hh"
+#include "world.hh"
+
+namespace enigma {
+
+    Bottle::Bottle(int initState) : Item() {
+        state = initState;
+    }
+
+    std::string Bottle::getClass() const {
+        return "it_bottle";
+    }
+    
+    Value Bottle::message(const Message &m) {
+        if (state == BROKEN && m.message == "_brush" && enigma_server::GameCompatibility == GAMET_ENIGMA) {
+            if (isDisplayable()) {
+                KillItem(this->get_pos());
+                return Value();
+            }
+        }
+        return Item::message(m);
+    }
+    
+    void Bottle::on_stonehit(Stone *) {
+        if (state == IDLE) {
+            sound_event("shatter");
+            state = BROKEN;
+            init_model();
+        }
+    }
+    
+    bool Bottle::actor_hit(Actor *a) {
+        if (state == BROKEN) {
+            ActorInfo &ai = * a->get_actorinfo();
+            if (!ai.grabbed && a->is_on_floor()) {
+                SendMessage(a, "_shatter");
+            }
+            return false;
+        } else
+            return Item::actor_hit(a);
+    }
+    
+    ItemAction Bottle::activate(Actor *a, GridPos) {
+        if (state == IDLE) {
+            SendMessage(a, "_booze");
+        }
+        return ITEM_DROP;
+    }
+    
+    int Bottle::traitsIdx() const {
+        return state;
+    }
+
+    ItemTraits Bottle::traits[2] = {
+        {"it_bottle_idle",  it_bottle_idle, itf_none, 0.0},
+        {"it_bottle_broken",  it_bottle_idle, itf_static | itf_indestructible, 0.0},
+    };
+
+    BOOT_REGISTER_START
+        BootRegister(new Bottle(0), "it_bottle");
+        BootRegister(new Bottle(0), "it_bottle_idle");
+        BootRegister(new Bottle(1), "it_bottle_broken");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/items/Bottle.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/items/Bottle.hh
===================================================================
--- trunk/src/items/Bottle.hh	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/Bottle.hh	2009-02-02 23:53:30 UTC (rev 1503)
@@ -0,0 +1,55 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef BOTTLEITEM_HH
+#define BOTTLEITEM_HH
+
+#include "items.hh"
+
+namespace enigma {
+    /**
+     */
+    class Bottle : public Item {
+        CLONEOBJ(Bottle);
+        DECL_ITEMTRAITS_ARRAY(2, traitsIdx());
+
+    private:
+        enum iState {
+            IDLE,       ///< 
+            BROKEN      ///<  
+        };
+
+    public:
+        Bottle(int initState);
+
+        // Object interface
+        virtual std::string getClass() const;
+        virtual Value message(const Message &m);
+        
+        // Item interface
+        virtual void on_stonehit(Stone *st);
+        virtual bool actor_hit(Actor *a);
+        virtual ItemAction activate(Actor* a, GridPos p);
+
+    private:
+        int traitsIdx() const;
+    };
+   
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/items/Bottle.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/items/CompatibilityItems.cc
===================================================================
--- trunk/src/items/CompatibilityItems.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/CompatibilityItems.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -19,7 +19,7 @@
 
 #include "items/CompatibilityItems.hh"
 //#include "errors.hh"
-//#include "main.hh"
+#include "main.hh"
 #include "server.hh"
 #include "world.hh"
 
@@ -120,6 +120,22 @@
 
     DEF_ITEMTRAITSF(TwoPKillStone, "it-2pkillstone", it_2pkillstone, itf_invisible | itf_fireproof);
 
+/* -------------------- DummyItem -------------------- */
+
+    Dummyitem::Dummyitem() {
+    }
+
+    void Dummyitem::on_pickup(Actor *) {
+        int code = getAttr("code");
+        Log << ecl::strf("Picked up item 0x%x\n", code);
+    }
+    void Dummyitem::on_drop(Actor *) {
+        int code = getAttr("code");
+        Log << ecl::strf("Dropped up item 0x%x\n", code);
+    }
+    
+    DEF_ITEMTRAITSF(Dummyitem, "it_dummy", it_dummy, itf_fireproof);
+
 //----------------------------------------
 // Bridge item (for Oxyd compatibility)
 //
@@ -165,6 +181,7 @@
         BootRegister(new EasyKillStone(), "it-easykillstone");
         BootRegister(new OnePKillStone(), "it-1pkillstone");
         BootRegister(new TwoPKillStone(), "it-2pkillstone");
+        BootRegister(new OxydBridge(), "it_dummy");
         BootRegister(new OxydBridge(), "it-bridge-oxyd");
         BootRegister(new OxydBridgeActive(), "it-bridge-oxyd_active");
     BOOT_REGISTER_END

Modified: trunk/src/items/CompatibilityItems.hh
===================================================================
--- trunk/src/items/CompatibilityItems.hh	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/CompatibilityItems.hh	2009-02-02 23:53:30 UTC (rev 1503)
@@ -77,6 +77,26 @@
     };
 
     /**
+     * DummyItem
+     */
+    class Dummyitem : public Item {
+        CLONEOBJ(Dummyitem);
+        DECL_ITEMTRAITS;
+    public:
+        Dummyitem();
+        
+        // Item interface
+       virtual void on_drop(Actor *a);
+       virtual void on_pickup(Actor *a);
+    };
+
+
+    /**
+     * Odometer
+     */
+    DEF_ITEM(Odometer, "it_odometer", it_odometer);
+    
+    /**
      * OxydBridge
      */
     class OxydBridge : public Item {

Added: trunk/src/items/Drop.cc
===================================================================
--- trunk/src/items/Drop.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/Drop.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -0,0 +1,113 @@
+/*
+ * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "items/Drop.hh"
+//#include "errors.hh"
+#include "main.hh"
+#include "player.hh"
+#include "world.hh"
+
+namespace enigma {
+
+    Actor *replace_actor(Actor *olda, Actor *newa) {
+        ActorInfo *info = newa->get_actorinfo();
+        info->pos = olda->get_pos();
+        info->vel = olda->get_vel();
+
+        if (Value v = olda->getAttr("owner")) {
+            player::ReplaceActor((int)v, olda, newa);
+        }
+
+        AddActor (newa);
+        if (!YieldActor (olda)) {
+            enigma::Log << "Strange: could not remove old actor\n";
+        }
+        olda->hide();
+        newa->show();
+        return olda;
+    }
+
+    class DropCallback : public enigma::TimeHandler {
+        Actor *rotor;
+        Actor *old;
+    
+    public:
+        DropCallback (Actor *rotor_, Actor *old_)
+        : rotor (rotor_), old (old_)
+        {}
+
+        // TimerHandler interface
+        virtual void alarm()
+        {
+            replace_actor (rotor, old);
+
+            delete rotor;
+            delete this;
+        }
+    };
+
+/* -------------------- Drop -------------------- */
+
+    Drop::Drop() : Item() {
+    }
+
+    std::string Drop::getClass() const {
+        return "it_drop";
+    }
+        
+    ItemAction Drop::activate(Actor *a, GridPos) {
+        const double ROTOR_LIFETIME = 5.0;
+
+        int     iplayer = a->getAttr("owner");
+        ActorID id      = get_id (a);
+
+        if (id == ac_marble_black || id == ac_marble_white) {
+            // Kill ALL rubberbands connected with the actor:
+            SendMessage(a, "disconnect");
+            Actor *rotor = MakeActor("ac_rotor");
+            rotor->setAttr("adhesion", 1.0);
+            rotor->setAttr("controllers", iplayer+1);
+            rotor->setAttr("owner", iplayer);
+            rotor->setAttr("gohome", false);
+            rotor->setAttr("essential", a->getAttr("essential"));
+            std::string essId;
+            if (Value v = a->getAttr("essential_id")) {
+                essId = v.to_string();
+            } else {
+                essId = a->get_traits().name;
+            }
+            rotor->setAttr("essential_id", Value(essId));
+
+            replace_actor (a, rotor);
+
+            GameTimer.set_alarm (new DropCallback (rotor, a),
+                                        ROTOR_LIFETIME,
+                                        false);
+        }
+        return ITEM_KILL;          // remove from inventory
+    }
+    
+    DEF_ITEMTRAITS(Drop, "it_drop", it_drop);
+
+    BOOT_REGISTER_START
+        BootRegister(new Drop(), "it_drop");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/items/Drop.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/items/Drop.hh
===================================================================
--- trunk/src/items/Drop.hh	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/Drop.hh	2009-02-02 23:53:30 UTC (rev 1503)
@@ -0,0 +1,52 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef DROPITEM_HH
+#define DROPITEM_HH
+
+#include "items.hh"
+
+namespace enigma {
+    
+    /**
+     */
+    class Drop : public Item {
+        CLONEOBJ(Drop);
+        DECL_ITEMTRAITS;
+
+    private:
+        enum iState {
+            IDLE,       ///< 
+            BROKEN      ///<  
+        };
+
+    public:
+        Drop();
+
+        // Object interface
+        virtual std::string getClass() const;
+        
+        // Item interface
+        virtual ItemAction activate(Actor* a, GridPos p);
+
+    private:
+    };
+   
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/items/Drop.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/SimpleItems.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -98,6 +98,24 @@
     
     DEF_ITEMTRAITSF(DeathItem, "it_death", it_death, itf_static | itf_indestructible);
 
+/* -------------------- Debris -------------------- */
+
+    Debris::Debris() {
+    }
+    
+    void Debris::animcb() { 
+        SetFloor(get_pos(), MakeFloor("fl_abyss"));
+        kill();
+     }
+
+    bool Debris::actor_hit(Actor *a) {
+        SendMessage(a, "_fall");
+        return false;
+    }
+
+    DEF_ITEMTRAITSF(Debris, "it_debris", it_debris,
+                itf_static | itf_animation | itf_indestructible | itf_fireproof);
+    
 /* -------------------- Flag -------------------- */
 
     FlagItem::FlagItem(int type) {
@@ -360,6 +378,7 @@
         BootRegister(new Cherry(), "it_cherry");
         BootRegister(new Coffee(), "it_coffee");
         BootRegister(new DeathItem(), "it_death");
+        BootRegister(new Debris(), "it_debris");
         BootRegister(new FlagItem(0), "it_flag");
         BootRegister(new FlagItem(0), "it_flag_black");
         BootRegister(new FlagItem(1), "it_flag_white");

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items/SimpleItems.hh	2009-02-02 23:53:30 UTC (rev 1503)
@@ -92,7 +92,23 @@
 
         // Item interface
         virtual bool actor_hit(Actor *a);
+    };
+
+    /**
+     * DeathItem
+     */
+    class Debris : public Item {
+        CLONEOBJ(Debris);
+        DECL_ITEMTRAITS;
+
+    public:
+        Debris();
         
+        // ModelCallback interface
+        virtual void animcb();
+
+        // Item interface
+        virtual bool actor_hit(Actor *a);
     };
 
     /**

Modified: trunk/src/items.cc
===================================================================
--- trunk/src/items.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -155,86 +155,6 @@
     }
 }
 
-/* -------------------- Various simple items -------------------- */
-
-namespace
-{
-    DEF_ITEM(Odometer,  "it-odometer", it_odometer);
-}
-
-/* -------------------- DummyItem -------------------- */
-    class Dummyitem : public Item {
-        CLONEOBJ(Dummyitem);
-        DECL_ITEMTRAITS;
-
-        void on_pickup(Actor *) {
-            int code = getAttr("code");
-            fprintf(stderr, "Picked up item 0x%x\n", code);
-        }
-        void on_drop(Actor *) {
-            int code = getAttr("code");
-            fprintf(stderr, "Dropped item 0x%x\n", code);
-        }
-    public:
-        Dummyitem() {}
-    };
-    DEF_ITEMTRAITSF(Dummyitem, "it-dummy", it_dummy, itf_fireproof);
-
-/* -------------------- Booze -------------------- */
-
-namespace
-{
-    class Booze : public Item {
-	CLONEOBJ(Booze);
-        DECL_ITEMTRAITS;
-    public:
-	Booze() {
-	}
-    private:
-	ItemAction activate(Actor *a, GridPos) {
-	    SendMessage(a, "_booze");
-	    return ITEM_DROP;
-	}
-    void on_stonehit(Stone *) {
-        sound_event("shatter");
-        replace("it-booze-broken");
-    }
-    };
-    DEF_ITEMTRAITS(Booze, "it-booze", it_booze);
-}
-
-/* -------------------- Broken Booze -------------------- */
-namespace
-{
-    class BrokenBooze : public Item {
-        CLONEOBJ(BrokenBooze);
-        DECL_ITEMTRAITS;
-
-        bool actor_hit(Actor *a) {
-            ActorInfo &ai = * a->get_actorinfo();
-            if (!ai.grabbed && a->is_on_floor()) {
-                SendMessage(a, "_shatter");
-            }
-            return false;
-        }
-
-        virtual Value message (const Message &m) {
-            if (enigma_server::GameCompatibility == GAMET_ENIGMA) {
-                if (m.message == "_brush") {
-                    KillItem(this->get_pos());
-                    return Value();
-                }
-            }
-            return Item::message(m);
-        }
-
-    public:
-        BrokenBooze() {}
-    };
-
-    DEF_ITEMTRAITSF(BrokenBooze, "it-booze-broken", it_booze_broken, itf_static | itf_indestructible);
-}
-
 /* -------------------- Explosion -------------------- */
 namespace
 {
@@ -294,7 +214,7 @@
         void animcb() {
             if (Floor *fl = GetFloor(get_pos()))
                 if (fl->is_destructible())
-                    replace("it-debris");
+                    replace("it_debris");
                 else
                     kill();
         }
@@ -517,129 +437,17 @@
                 itf_static | itf_indestructible | itf_fireproof);
 }
 
-/* -------------------- Debris -------------------- */
-namespace
-{
-    class Debris : public Item {
-        CLONEOBJ(Debris);
-        DECL_ITEMTRAITS;
 
-        bool actor_hit(Actor *a) {
-            SendMessage(a, "_fall");
-            return false;
-        }
-        void animcb() {
-            GridPos p = get_pos();
-            SetFloor(p, MakeFloor("fl_abyss"));
-            KillItem(p);
-        }
-    public:
-        Debris() {}
-    };
-    DEF_ITEMTRAITSF(Debris, "it-debris", it_debris,
-                itf_static | itf_animation | itf_indestructible | itf_fireproof);
-}
-
-/* -------------------- Drop -------------------- */
-
-namespace
-{
-    Actor *replace_actor (Actor *olda, Actor *newa)
-    {
-        ActorInfo *info = newa->get_actorinfo();
-        info->pos = olda->get_pos();
-        info->vel = olda->get_vel();
-
-        if (Value v = olda->getAttr("owner")) {
-            player::ReplaceActor((int)v, olda, newa);
-        }
-
-        AddActor (newa);
-        if (!YieldActor (olda)) {
-            enigma::Log << "Strange: could not remove old actor\n";
-        }
-        olda->hide();
-        newa->show();
-        return olda;
-    }
-
-    class DropCallback : public enigma::TimeHandler {
-        Actor *rotor;
-        Actor *old;
-    public:
-        DropCallback (Actor *rotor_, Actor *old_)
-        : rotor (rotor_), old (old_)
-        {}
-
-        // TimerHandler interface
-        virtual void alarm()
-        {
-            replace_actor (rotor, old);
-
-            delete rotor;
-            delete this;
-        }
-    };
-
-    class Drop : public Item {
-        CLONEOBJ (Drop);
-        DECL_ITEMTRAITS;
-
-        ItemAction activate(Actor *a, GridPos)
-        {
-            const double ROTOR_LIFETIME = 5.0;
-
-            int     iplayer = a->getAttr("owner");
-            ActorID id      = get_id (a);
-
-            if (id == ac_marble_black || id == ac_marble_white) {
-                // Kill ALL rubberbands connected with the actor:
-                SendMessage(a, "disconnect");
-                Actor *rotor = MakeActor("ac_rotor");
-                rotor->setAttr("adhesion", 1.0);
-                rotor->setAttr("controllers", iplayer+1);
-                rotor->setAttr("owner", iplayer);
-                rotor->setAttr("gohome", false);
-                rotor->setAttr("essential", a->getAttr("essential"));
-                std::string essId;
-                if (Value v = a->getAttr("essential_id")) {
-                    essId = v.to_string();
-                } else {
-                    essId = a->get_traits().name;
-                }
-                rotor->setAttr("essential_id", Value(essId));
-
-                replace_actor (a, rotor);
-
-                GameTimer.set_alarm (new DropCallback (rotor, a),
-                                            ROTOR_LIFETIME,
-                                            false);
-            }
-            return ITEM_KILL;	       // remove from inventory
-        }
-
-    public:
-        Drop() {}
-    };
-    DEF_ITEMTRAITS(Drop, "it-drop", it_drop);
-}
-
 /* -------------------- Functions -------------------- */
 
 void InitItems()
 {
     RegisterItem (new BlackBomb);
     RegisterItem (new BlackBombBurning);
-    RegisterItem (new Booze);
-    RegisterItem (new BrokenBooze);
-    RegisterItem (new Debris);
-    RegisterItem (new Drop);
-    RegisterItem (new Dummyitem);
     RegisterItem (new Dynamite);
     RegisterItem (new Explosion1);
     RegisterItem (new Explosion2);
     RegisterItem (new Explosion3);
-    RegisterItem (new Odometer);
     RegisterItem (new WhiteBomb);
 }
 

Modified: trunk/src/items.hh
===================================================================
--- trunk/src/items.hh	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/items.hh	2009-02-02 23:53:30 UTC (rev 1503)
@@ -34,11 +34,11 @@
         it_blackbomb,
         it_blackbomb_burning,
         it_blocker,
-        it_booze,
+        it_bottle_idle,
+        it_bottle_broken,
         it_brake,
         it_bridge_oxyd,
         it_bridge_oxyd_active,
-        it_booze_broken,
         it_brush,
         it_burnable_invisible,
         it_burnable_fireproof,

Modified: trunk/src/others/CounterGadget.cc
===================================================================
--- trunk/src/others/CounterGadget.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/others/CounterGadget.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -44,7 +44,9 @@
             } else {
                 state--;
             }
-            if (Value stateTarget = getAttr(ecl::strf("target_%d", state))) {
+            Value stateTarget = getAttr(ecl::strf("target_%d", state));
+            Value stateAction = getAttr(ecl::strf("action_%d", state));
+            if (stateTarget || stateAction) {
                 performAction(true);
             }
             return Value();

Modified: trunk/src/ox_magnum.cc
===================================================================
--- trunk/src/ox_magnum.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/ox_magnum.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -386,7 +386,7 @@
     UNUSED,        // OxydMagnum item 0x5d
     UNUSED,        // OxydMagnum item 0x5e
     "it_sensor_filter1", // OxydMagnum item 0x5f
-    "it-drop",          // OxydMagnum item 0x60 (drunk)
+    "it_drop",          // OxydMagnum item 0x60 (drunk)
     UNUSED,        // OxydMagnum item 0x61 (rev. breaking are)
     UNUSED,        // OxydMagnum item 0x62 (player exchange)
     "it_trigger",       // OxydMagnum item 0x63

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/ox_oxyd1.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -402,6 +402,6 @@
     UNUSED,                  // 0x5d
     UNUSED,                  // 0x5e
     "it_sensor",                  // 0x5f
-    "it-drop",                    // 0x60    drop (turns actor into rotor)
+    "it_drop",                    // 0x60    drop (turns actor into rotor)
     // codes >= 0x61 are unused
 };

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/ox_peroxyd.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -453,7 +453,7 @@
     "it_magicwand",               // 0x47
     "it_wrench",                  // 0x48
     UNUSED,                  // 0x49
-    "it-odometer",                // 0x4a
+    "it_odometer",                // 0x4a
     "it_puller_n",                // 0x4b
     "it_puller_s",                // 0x4c
     "it_puller_w",                // 0x4d

Modified: trunk/src/oxyd.cc
===================================================================
--- trunk/src/oxyd.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/oxyd.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -399,7 +399,7 @@
             std::string key = config.itemtable[type];
             if (key == IT_INVALID) {
                 Log << ecl::strf ("Unknown item %X\n",type);
-                it = MakeItem("it-dummy");
+                it = MakeItem("it_dummy");
                 it->setAttr("code", type);
             } else if (key == "it_vortex_closed") {
                 it = MakeItem(key.c_str());

Modified: trunk/src/stones/ShogunStone.cc
===================================================================
--- trunk/src/stones/ShogunStone.cc	2009-02-02 18:49:22 UTC (rev 1502)
+++ trunk/src/stones/ShogunStone.cc	2009-02-02 23:53:30 UTC (rev 1503)
@@ -150,8 +150,6 @@
     }
 
     void ShogunStone::on_impulse(const Impulse& impulse) {
-        static char * soundevent = "movesmall";
-        
         if (!impulse.byWire && subShogun != NULL) {
             subShogun->on_impulse(impulse);
             return;
@@ -171,7 +169,7 @@
             if (!yieldShogun())
                 return;            // being swapped or pulled
             
-            sound_event(soundevent);
+            sound_event("movesmall");
             
             // then put to new position
             if (st == NULL) {



From raoul at mail.berlios.de  Tue Feb  3 01:45:22 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Tue, 3 Feb 2009 01:45:22 +0100
Subject: [Enigma-game-svn] r1504 - in trunk/data/levels: enigma_cross
	enigma_iv enigma_vi enigma_vii enigma_viii
Message-ID: <200902030045.n130jM7U025618@sheep.berlios.de>

Author: raoul
Date: 2009-02-03 01:45:20 +0100 (Tue, 03 Feb 2009)
New Revision: 1504

Modified:
   trunk/data/levels/enigma_cross/enigma0_92_1.xml
   trunk/data/levels/enigma_cross/enigma0_92_3.xml
   trunk/data/levels/enigma_cross/newlevels.xml
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_iv/duffy05_1.xml
   trunk/data/levels/enigma_iv/duffy83_1.xml
   trunk/data/levels/enigma_iv/index.xml
   trunk/data/levels/enigma_vi/duffy132_2.xml
   trunk/data/levels/enigma_vi/index.xml
   trunk/data/levels/enigma_vii/index.xml
   trunk/data/levels/enigma_vii/pulley04_2.xml
   trunk/data/levels/enigma_vii/pulley07_1.xml
   trunk/data/levels/enigma_viii/andreas48_2.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/mecke06_1.xml
   trunk/data/levels/enigma_viii/mecke13_1.xml
   trunk/data/levels/enigma_viii/mecke15_1.xml
   trunk/data/levels/enigma_viii/mecke22_2.xml
   trunk/data/levels/enigma_viii/mecke23_1.xml
   trunk/data/levels/enigma_viii/ral21_2.xml
Log:
-> Level updates for latest object renamings


Modified: trunk/data/levels/enigma_cross/enigma0_92_1.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_cross/enigma0_92_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15100" network="false" owner="Enigma Team" release="1" revision="21" title="Enigma 0.92 - 1"/>
+  <info enigma="1.00" group="Facets" location="15100" network="false" owner="Enigma Team" release="1" revision="22" title="Enigma 0.92 - 1"/>
 
   <attributes/>
 
@@ -128,7 +128,7 @@
     <level _seq="120" _title="Jump!" _xpath="enigma_i/duffy07_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy7" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="121" _title="Checkerboard" _xpath="enigma_iii/duffy08_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy8" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="122" _title="Circularity" _xpath="enigma_iv/ant10_1" author="Petr Machata" ctrl="force" easy="false" id="ant10" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="123" _title="Just Moving Blocks?" _xpath="enigma_iv/duffy05_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy5" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="123" _title="Just Moving Blocks?" _xpath="enigma_iv/duffy05_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy5" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="124" _title="Slinky-Racing" _xpath="enigma_iv/duffy14_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy14" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="125" _title="Boulder-Puzzle" _xpath="enigma_iv/duffy06_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy6" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="126" _title="Wild" _xpath="enigma_iii/ant28_1" author="Petr Machata" ctrl="force" easy="false" id="ant28" rel="1" rev="0" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/enigma0_92_3.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_3.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_cross/enigma0_92_3.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15300" network="false" owner="Enigma Team" release="1" revision="15" title="Enigma 0.92 - 3"/>
+  <info enigma="1.00" group="Facets" location="15300" network="false" owner="Enigma Team" release="1" revision="16" title="Enigma 0.92 - 3"/>
 
   <attributes/>
 
@@ -15,7 +15,7 @@
     <level _seq="7" _title="Path in the Stars" _xpath="enigma_ii/duffy80_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy80" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="8" _title="Listen Carefully" _xpath="enigma_v/duffy81_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy81" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="9" _title="Flood Zone" _xpath="enigma_iv/duffy82_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy82" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="10" _title="Fire Safety" _xpath="enigma_iv/duffy83_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy83" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="10" _title="Fire Safety" _xpath="enigma_iv/duffy83_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy83" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="Laser Tricks" _xpath="enigma_iii/duffy84_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy84" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="Think Fast" _xpath="enigma_iii/duffy85_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy85" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="13" _title="Fly High" _xpath="enigma_iii/duffy86_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy86" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_cross/newlevels.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="31" title="Enigma 1.00 new"/>
+  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="32" title="Enigma 1.00 new"/>
 
   <attributes/>
 
@@ -160,7 +160,7 @@
     <level _seq="152" _title="Banana Republic" _xpath="enigma_v/alain26_2" author="Alain Busser" ctrl="force" easy="true" id="alain26" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="153" _title="Zeus" _xpath="enigma_vi/raoul19_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul19" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="154" _title="Rhapsody on Cracks" _xpath="enigma_vi/ral06_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060510ral008" rel="1" rev="42" score="1" target="time" unit="duration"/>
-    <level _seq="155" _title="Prepare Your Defense" _xpath="enigma_vi/duffy132_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy132" rel="2" rev="1" score="2" target="time" unit="duration"/>
+    <level _seq="155" _title="Prepare Your Defense" _xpath="enigma_vi/duffy132_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy132" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="156" _title="Cold Way" _xpath="enigma_vi/raoul21_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul21" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="157" _title="Laserpowered" _xpath="enigma_vi/raoul20_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul20" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="158" _title="Oxydmoron" _xpath="enigma_vi/raoul14_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul14" rel="2" rev="3" score="2" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="35" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="36" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -59,8 +59,8 @@
     <level _seq="51" _title="Swapping Puzzle II" _xpath="enigma_vii/joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Multiban" _xpath="enigma_vii/dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Riverside" _xpath="enigma_vii/johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="17" score="2" target="time" unit="duration"/>
-    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="18" score="2" target="time" unit="duration"/>
+    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Spaceship Control" _xpath="enigma_vii/safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Ball Alley" _xpath="enigma_vii/johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Action Potential" _xpath="enigma_vii/pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -82,7 +82,7 @@
     <level _seq="74" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Black Liberation" _xpath="enigma_vii/mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="47" score="1" target="time" unit="duration"/>
-    <level _seq="77" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="34" score="1" target="time" unit="duration"/>
+    <level _seq="77" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="35" score="1" target="time" unit="duration"/>
     <level _seq="78" _title="Rhythm of Space" _xpath="enigma_viii/mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="79" _title="The Show Jumper" _xpath="enigma_viii/andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="The Red Room" _xpath="enigma_viii/joe29_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe29" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -93,7 +93,7 @@
     <level _seq="85" _title="Southside Life" _xpath="enigma_viii/mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="33" score="1" target="time" unit="duration"/>
     <level _seq="86" _title="Joona's Chess" _xpath="enigma_viii/joona02_1" author="Joona Laire" ctrl="force" easy="true" id="joona02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="87" _title="Helios I" _xpath="enigma_viii/mecke07_1" author="mecke" ctrl="force" easy="false" id="mecke48" rel="1" rev="22" score="1" target="time" unit="duration"/>
-    <level _seq="88" _title="The Green Hell" _xpath="enigma_viii/mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="80" score="1" target="time" unit="duration"/>
+    <level _seq="88" _title="The Green Hell" _xpath="enigma_viii/mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="81" score="1" target="time" unit="duration"/>
     <level _seq="89" _title="Tilt Board" _xpath="enigma_viii/ulf06_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20080529ulf118" rel="2" rev="116" score="2" target="time" unit="duration"/>
     <level _seq="90" _title="4 - 8 - 4" _xpath="enigma_viii/dpl03_3" author="Dominik Leipold" ctrl="force" easy="true" id="20070821dpl003" rel="3" rev="4" score="3" target="time" unit="duration"/>
     <level _seq="91" _title="Impulsive Order" _xpath="enigma_viii/raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="12" score="1" target="time" unit="duration"/>
@@ -110,7 +110,7 @@
     <level _seq="102" _title="Freestyle Microwire" _xpath="enigma_viii/ral29_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080719ral530" rel="1" rev="129" score="1" target="time" unit="duration"/>
     <level _seq="103" _title="Balance Beam" _xpath="enigma_viii/mecke03_1" author="mecke" ctrl="force" easy="true" id="mecke03" rel="1" rev="37" score="1" target="time" unit="duration"/>
     <level _seq="104" _title="Colored Oxyds" _xpath="enigma_viii/andreas50_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas50" rel="1" rev="8" score="1" target="time" unit="duration"/>
-    <level _seq="105" _title="Styles Change" _xpath="enigma_viii/andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="16" score="2" target="time" unit="duration"/>
+    <level _seq="105" _title="Styles Change" _xpath="enigma_viii/andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="17" score="2" target="time" unit="duration"/>
     <level _seq="106" _title="Colored Turnstiles" _xpath="enigma_viii/andreas51_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas51" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="107" _title="Sanssouci" _xpath="enigma_viii/mecke05_1" author="mecke" ctrl="force" easy="true" id="mecke05" rel="1" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="108" _title="Wired Shogun" _xpath="enigma_viii/ral34_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080828ral417" rel="1" rev="129" score="1" target="time" unit="duration"/>
@@ -120,7 +120,7 @@
     <level _seq="112" _title=" - Meditation - " _xpath="enigma_viii/devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="113" _title="Relaxing at the sea" _xpath="enigma_viii/devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="114" _title="Helios II" _xpath="enigma_viii/mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
-    <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="153" score="2" target="time" unit="duration"/>
+    <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="154" score="2" target="time" unit="duration"/>
     <level _seq="116" _title="Alternation I" _xpath="enigma_viii/mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="117" _title="Enigmaparcour II" _xpath="enigma_viii/mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="118" _title=" - Meditation - " _xpath="enigma_viii/devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
@@ -133,11 +133,11 @@
     <level _seq="125" _title="On belay?" _xpath="enigma_viii/devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="126" _title="Hang-dogging?" _xpath="enigma_viii/devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="127" _title="Alternation II" _xpath="enigma_viii/mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
-    <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="35" score="1" target="time" unit="duration"/>
+    <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="19" score="1" target="time" unit="duration"/>
-    <level _seq="130" _title="Techno Voodoo" _xpath="enigma_viii/mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="17" score="1" target="time" unit="duration"/>
+    <level _seq="130" _title="Techno Voodoo" _xpath="enigma_viii/mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="18" score="1" target="time" unit="duration"/>
     <level _seq="131" _title="Plutos World" _xpath="enigma_viii/mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="19" score="1" target="time" unit="duration"/>
-    <level _seq="132" _title="Plutos Confusion" _xpath="enigma_viii/mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="132" _title="Plutos Confusion" _xpath="enigma_viii/mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="133" _title="Coober Pedy Opals" _xpath="enigma_viii/ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="134" _title="Butterfly Opals" _xpath="enigma_viii/ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="135" _title="Brilliant Opals" _xpath="enigma_viii/ral37_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081212ral162" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/duffy05_1.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy05_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_iv/duffy05_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Just Moving Blocks?" el:subtitle="" el:id="duffy5"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="2" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -61,7 +61,7 @@
         elseif c=="c" then
             set_item("it-coin2", i-1,line)
         elseif c=="5" then
-            set_item("it-odometer", i-1,line)
+            set_item("it-coffee", i-1,line)
         elseif c=="4" then
             set_item("it-coin4", i-1,line,{value=3})
         elseif c=="P" then

Modified: trunk/data/levels/enigma_iv/duffy83_1.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy83_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_iv/duffy83_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Fire Safety" el:subtitle="" el:id="duffy83"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="2" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -100,7 +100,7 @@
         elseif c==" " then
             set_item("it-burnable",i-1,line)
         elseif c=="r" then
-            set_item("it-odometer",i-1,line)
+            set_item("it-coffee",i-1,line)
         end
     end
 end

Modified: trunk/data/levels/enigma_iv/index.xml
===================================================================
--- trunk/data/levels/enigma_iv/index.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_iv/index.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="28" title="Enigma IV"/>
+  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="29" title="Enigma IV"/>
 
   <attributes/>
 
@@ -52,14 +52,14 @@
     <level _seq="44" _title="Patterns of Impulse" _xpath="./andreas11_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas11" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="45" _title="Ball and Chain" _xpath="./duffy41_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy41" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="46" _title="Stay There!" _xpath="./ralf05_3" author="Ralf Westram" ctrl="force" easy="false" id="ralf05" rel="3" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="47" _title="Just Moving Blocks?" _xpath="./duffy05_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy5" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="47" _title="Just Moving Blocks?" _xpath="./duffy05_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy5" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="48" _title="Artillery" _xpath="./duffy111_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy111" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="What's the Problem?" _xpath="./ss14_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Walls Of Sadness" _xpath="./ss12_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss12" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Pull it!" _xpath="./luc14_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="FIRE, FIRE!" _xpath="./ss07_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss7" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Chain Reaction" _xpath="./siegfried17_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level5e" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="54" _title="Fire Safety" _xpath="./duffy83_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy83" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="Fire Safety" _xpath="./duffy83_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy83" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="55" _title="Easily Inflammable" _xpath="./martin95_2" author="Martin Hawlisch" ctrl="force" easy="false" id="martin95" rel="2" rev="0" score="2" target="time" unit="duration"/>
     <level _seq="56" _title="The Builder" _xpath="./ss09_2" author="Sven Siggelkow" ctrl="force" easy="false" id="ss9" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="57" _title="Run Like Hell" _xpath="./ralf09_2" author="Ralf Westram" ctrl="force" easy="false" id="ralf09" rel="2" rev="4" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_vi/duffy132_2.xml
===================================================================
--- trunk/data/levels/enigma_vi/duffy132_2.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_vi/duffy132_2.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Prepare Your Defense" el:subtitle="" el:id="duffy132"/>
-      <el:version el:score="2" el:release="2" el:revision="1" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="2" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2005 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -107,7 +107,7 @@
         elseif c == "e" then
             set_item("it-extinguisher",i-1,line,{load=2})
         elseif c == "f" then
-            set_item("it-odometer",i-1,line)
+            set_item("it-coffee",i-1,line)
         elseif c == "p" then
             set_item("it-pin",i-1,line)
         elseif c == "s" then

Modified: trunk/data/levels/enigma_vi/index.xml
===================================================================
--- trunk/data/levels/enigma_vi/index.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_vi/index.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="33" title="Enigma VI"/>
+  <info enigma="1.00" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="34" title="Enigma VI"/>
 
   <attributes/>
 
@@ -28,7 +28,7 @@
     <level _seq="20" _title="- Meditation -" _xpath="./alain25_2" author="Alain Busser + Raoul Bourquin" ctrl="force" easy="true" id="alain25" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="21" _title="Checkmate I" _xpath="./andreas29_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas29" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="Edwards Second Level" _xpath="./edward02_1" author="Edward" ctrl="force" easy="false" id="edward02" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="23" _title="Prepare Your Defense" _xpath="./duffy132_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy132" rel="2" rev="1" score="2" target="time" unit="duration"/>
+    <level _seq="23" _title="Prepare Your Defense" _xpath="./duffy132_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy132" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="24" _title="The Stable" _xpath="./andreas30_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas30" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="25" _title="Oxydrings" _xpath="./raoul13_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul13" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="Dialers" _xpath="./edward05_1" author="Edward" ctrl="force" easy="true" id="edward05" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_vii/index.xml
===================================================================
--- trunk/data/levels/enigma_vii/index.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_vii/index.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="40" title="Enigma VII"/>
+  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="41" title="Enigma VII"/>
 
   <attributes/>
 
@@ -83,8 +83,8 @@
     <level _seq="75" _title="Swapping Puzzle II" _xpath="./joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Multiban" _xpath="./dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Riverside" _xpath="./johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="17" score="2" target="time" unit="duration"/>
-    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="18" score="2" target="time" unit="duration"/>
+    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="Spaceship Control" _xpath="./safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Ball Alley" _xpath="./johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="Action Potential" _xpath="./pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_vii/pulley04_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Lone Ranger" el:subtitle="" el:id="pulley04"/>
-      <el:version el:score="2" el:release="2" el:revision="17" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="18" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -25,7 +25,7 @@
 ti["k"] = ti[" "] .. {"it_trigger", action="callback", target="Band2"} -- attaches rubber band from Tonto to Tonto's Horse
 ti["l"] = {"fl_water"}
 ti["m"] = ti[" "] .. {"it_hammer"}
-ti["n"] = (ti[" "] .. {"it-drop"}) .. ti({"st_chameleon"})
+ti["n"] = (ti[" "] .. {"it_drop"}) .. ti({"st_chameleon"})
 ti["o"] = {"fl_sand", secure=true} .. ti({"it_burnable_oil"})
 ti["p"] = {"fl_swamp"}
 ti["q"] = ti[" "] .. {"st_redrock"} -- SUN RAY
@@ -67,7 +67,7 @@
 ti["1"] = ti[" "] .. {"st_key", code="1", action="toggle", target="Door1"}
 ti["2"] = ti[" "] .. {"st_key", code="2", action="toggle", target="Door2"}
 ti["+"] = ti["l"] .. {"st_box_wood"}
-ti["6"] = ti[" "] .. {"it-booze"}
+ti["6"] = ti[" "] .. {"it_bottle"}
 ti["!"] = ti[" "] .. {"it_key", code="1"}
 ti["@"] = ti[" "] .. {"it_key", code="2"}
 ti["#"] = ti[" "] .. {"st_camouflage"}

Modified: trunk/data/levels/enigma_vii/pulley07_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,12 +3,12 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Little Shop Of Horrors" el:subtitle="Watch out, here comes Audrey II!" el:id="pulley07"/>
-      <el:version el:score="1" el:release="1" el:revision="19" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="20" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10"/>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force" el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
        <el:credits el:showinfo="true" el:showstart="true">
        This level is based on the 1982 musical "Little Shop Of Horrors.
@@ -44,7 +44,7 @@
 ti["/"] = {"st_turnstilearm_n"} .. ti({"fl_bright"})
 ti["+"] = {"st_turnstilearm_n"} .. ti({"fl_lawn"})
 ti["a"] = ti[" "] .. {"st_camouflage"}
-ti["b"] = {"fl_bright"} .. ti({"it-booze"})
+ti["b"] = {"fl_bright"} .. ti({"it_bottle"})
 ti["c"] = {"fl_lawn"} .. ti({"st_nil"}) .. ti({"it_nil"})
 ti["d"] = ti[" "] .. {"st_redrock"} --Walls
 ti["e"] = {"fl-gradient16"} .. ti({"st_nil"})

Modified: trunk/data/levels/enigma_viii/andreas48_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/andreas48_2.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/andreas48_2.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Styles Change" el:subtitle="But dynamite is forever" el:id="andreas48"/>
-      <el:version el:score="2" el:release="2" el:revision="16" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="17" el:status="released"/>
       <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -120,7 +120,7 @@
   elseif spot == SPOT_ACTORIMPULSE then
     ti["*"..j] = ti["_"..j] .. ti({"st_actorimpulse", invisible = true, strength = 1000})
   elseif spot == SPOT_HOLLOW then
-    ti["*"..j] = ti["_"..j] .. ti({design[4]}) .. ti({"it-booze-broken"})
+    ti["*"..j] = ti["_"..j] .. ti({design[4]}) .. ti({"it_bottle_broken"})
   end
 
   if spot == SPOT_SENSOR then

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -1,13 +1,13 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="30" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="31" title="Enigma VIII"/>
 
   <attributes/>
 
   <levels>
     <level _seq="1" _title="Welcome" _xpath="./welcometopack8_1" author="Raoul Bourquin" ctrl="force" easy="true" id="welcometopack8" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="2" _title="Enigmaparcour I" _xpath="./mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="34" score="1" target="time" unit="duration"/>
+    <level _seq="2" _title="Enigmaparcour I" _xpath="./mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="35" score="1" target="time" unit="duration"/>
     <level _seq="3" _title="Rhythm of Space" _xpath="./mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="4" _title="The Show Jumper" _xpath="./andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
     <level _seq="5" _title="The Red Room" _xpath="./joe29_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe29" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -18,7 +18,7 @@
     <level _seq="10" _title="Southside Life" _xpath="./mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="33" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="Joona's Chess" _xpath="./joona02_1" author="Joona Laire" ctrl="force" easy="true" id="joona02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="Helios I" _xpath="./mecke07_1" author="mecke" ctrl="force" easy="false" id="mecke48" rel="1" rev="22" score="1" target="time" unit="duration"/>
-    <level _seq="13" _title="The Green Hell" _xpath="./mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="80" score="1" target="time" unit="duration"/>
+    <level _seq="13" _title="The Green Hell" _xpath="./mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="81" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="Tilt Board" _xpath="./ulf06_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20080529ulf118" rel="2" rev="116" score="2" target="time" unit="duration"/>
     <level _seq="15" _title="4 - 8 - 4" _xpath="./dpl03_3" author="Dominik Leipold" ctrl="force" easy="true" id="20070821dpl003" rel="3" rev="4" score="3" target="time" unit="duration"/>
     <level _seq="16" _title="Impulsive Order" _xpath="./raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="12" score="1" target="time" unit="duration"/>
@@ -35,7 +35,7 @@
     <level _seq="27" _title="Freestyle Microwire" _xpath="./ral29_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080719ral530" rel="1" rev="129" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Balance Beam" _xpath="./mecke03_1" author="mecke" ctrl="force" easy="true" id="mecke03" rel="1" rev="37" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Colored Oxyds" _xpath="./andreas50_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas50" rel="1" rev="8" score="1" target="time" unit="duration"/>
-    <level _seq="30" _title="Styles Change" _xpath="./andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="16" score="2" target="time" unit="duration"/>
+    <level _seq="30" _title="Styles Change" _xpath="./andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="17" score="2" target="time" unit="duration"/>
     <level _seq="31" _title="Colored Turnstiles" _xpath="./andreas51_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas51" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Sanssouci" _xpath="./mecke05_1" author="mecke" ctrl="force" easy="true" id="mecke05" rel="1" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Wired Shogun" _xpath="./ral34_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080828ral417" rel="1" rev="129" score="1" target="time" unit="duration"/>
@@ -43,7 +43,7 @@
     <level _seq="35" _title="- Meditation -" _xpath="./raoul31_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul31" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Relaxing at the sea" _xpath="./devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Helios II" _xpath="./mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
-    <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="153" score="2" target="time" unit="duration"/>
+    <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="154" score="2" target="time" unit="duration"/>
     <level _seq="39" _title="Alternation I" _xpath="./mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="40" _title="Enigmaparcour II" _xpath="./mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="41" _title=" - Meditation - " _xpath="./devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
@@ -56,11 +56,11 @@
     <level _seq="48" _title="On belay?" _xpath="./devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Hang-dogging?" _xpath="./devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Alternation II" _xpath="./mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
-    <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="35" score="1" target="time" unit="duration"/>
+    <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="19" score="1" target="time" unit="duration"/>
-    <level _seq="53" _title="Techno Voodoo" _xpath="./mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="17" score="1" target="time" unit="duration"/>
+    <level _seq="53" _title="Techno Voodoo" _xpath="./mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="18" score="1" target="time" unit="duration"/>
     <level _seq="54" _title="Plutos World" _xpath="./mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="19" score="1" target="time" unit="duration"/>
-    <level _seq="55" _title="Plutos Confusion" _xpath="./mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="55" _title="Plutos Confusion" _xpath="./mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Minopal" _xpath="./andreas54_1" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas54" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Coober Pedy Opals" _xpath="./ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Butterfly Opals" _xpath="./ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_viii/mecke06_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke06_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/mecke06_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Techno Voodoo" el:subtitle="Just a Dance ?" el:id="mecke06" />
-      <el:version el:score="1" el:release="1" el:revision="$Revision:17$" el:status="released" />
+      <el:version el:score="1" el:release="1" el:revision="$Revision:18$" el:status="released" />
       <el:author el:name="mecke" el:email="" />
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true" />
@@ -32,7 +32,7 @@
 ti["F "] = {"st_black_slash"}
 ti[" s"] = {"fl_space"}
 ti["w "] = {"it_wormhole", range=10, strength=3}
-ti["d "] = {"it-drop"}
+ti["d "] = {"it_drop"}
 ti["X "] = {"#ac_marble_black"}
 ti["r "] = {"#ac_top", range=5, strength=7}
 ti["a "] = {"#ac_bug"}

Modified: trunk/data/levels/enigma_viii/mecke13_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke13_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/mecke13_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Plutos Confusion" el:subtitle="The other side ..." el:id="mecke30"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 19 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 20 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -36,7 +36,7 @@
 ti["P"] = {"st_bluegray"}
 ti["p"] = ti["H"] .. {"it_spring_keep"}
 ti["Q"] = {"st_ghost_break"}
-ti["q"] = {"it-booze-broken"}
+ti["q"] = {"it_bottle_broken"}
 ti["i"] = {"it_sensor"}
 ti["t"] = {"it_meditation_bump"}
 ti["R"] = {"st_oneway_e"}

Modified: trunk/data/levels/enigma_viii/mecke15_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke15_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/mecke15_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Enigmaparcour I" el:subtitle="Open the Doors" el:id="mecke15"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 34 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 35 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -87,13 +87,13 @@
 ti["z "] = ti[" v"] .. {"st_break_oxydc"}
 ti["N "] = ti[" v"] .. {"st_break_oxydc"}
 ti["- "] = ti[" ~"] .. {"it_strip_ew"}
-ti["b "] = ti[" ~"] .. {"it-booze"}
+ti["b "] = ti[" ~"] .. {"it_bottle"}
 ti["h2"] = ti["h1"] .. {"it_cherry"}
 ti["h3"] = ti["h1"] .. {"it_glasses"}
 ti["5 "] = {"it_key", code=1}
 ti["o "] = {"it_springboard"}
 ti["j "] = {"it_magicwand"}
-ti[" z"] = {"it-booze"}
+ti[" z"] = {"it_bottle"}
 ti["P "] = {"st_grate_cross"}
 ti["9 "] = {"st_turnstile"} 
 ti["a "] = {"st_turnstilearm", orientation=NORTH}

Modified: trunk/data/levels/enigma_viii/mecke22_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke22_2.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/mecke22_2.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Green Hell" el:subtitle="Exploration Trip to Green Waters" el:id="mecke22"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision:80$" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision:81$" el:status="released"/>
       <el:author  el:name="mecke" el:email=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -95,7 +95,7 @@
 ti[" 8"] = {"fl_bluegreen"}
 ti[" 9"] = {"fl_lawn_c2"}
 ti["c9"] = ti["c "] .. {"fl_lawn_c2"}
-ti["q9"] = ti["c9"] .. {"it-booze"}
+ti["q9"] = ti["c9"] .. {"it_bottle"}
 ti["P "] = ti[" l"] .. {"st_mirror_slab",movable=true,transparent=false}
 ti["Q "] = ti[" l"] .. {"st_mirror_triangle",movable=true,transparent=true}
 ti["R "] = ti[" l"] .. {"st_mirror_slab",movable=false,transparent=false}

Modified: trunk/data/levels/enigma_viii/mecke23_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke23_1.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/mecke23_1.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Fifty Years Later ..." el:subtitle="Survival Training in wasted Landscapes ..." el:id="mecke23"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 35 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 36 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -83,16 +83,16 @@
 ti[" ~"] = ti[" ="] .. {"it-blackbomb"}
 ti[" _"] = ti[" ="] .. {"it_cherry"}
 ti[" 2"] = ti[" 1"] .. {"it-dynamite"}
-ti[" -"] = ti[" a"] .. {"it-booze-broken", 0.5, 0.5}
+ti[" -"] = ti[" a"] .. {"it_bottle_broken", 0.5, 0.5}
 ti["!1"] = ti[" ="] .. {"st_disco"}
 ti["!2"] = ti["!0"] .. {"st_disco",state=MEDIUM}
 ti["!3"] = ti["!0"] .. {"st_disco",state=DARK}
 ti["!4"] = ti["!0"] .. {"st_disco"}
 ti["!5"] = ti["  "] .. {"st_disco"}
 ti["&1"] = ti[" &"] .. {"st_disco"}
-ti["!6"] = ti["!5"] .. {"it-drop"}
+ti["!6"] = ti["!5"] .. {"it_drop"}
 ti["!7"] = ti["!5"] .. {"it_coffee"}
-ti["!8"] = ti["!5"] .. {"it-booze"}
+ti["!8"] = ti["!5"] .. {"it_bottle"}
 ti["!9"] = ti["!5"] .. {"it_spoon"}
 ti[" m"] = ti["!1"] .. {"it_magnet",state=ON,range=3,strength=7}
 ti["-m"] = ti["!1"] .. {"it_magnet",state=ON,range=5,strength=-7}

Modified: trunk/data/levels/enigma_viii/ral21_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/ral21_2.xml	2009-02-02 23:53:30 UTC (rev 1503)
+++ trunk/data/levels/enigma_viii/ral21_2.xml	2009-02-03 00:45:20 UTC (rev 1504)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Tutoxyd's Pyramid" el:subtitle="Marble Jones I" el:id="20070822ral291"/>
-      <el:version el:score="2" el:release="2" el:revision="$Revision: 153 $" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="$Revision: 154 $" el:status="released"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2007,2008,2009 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -80,8 +80,8 @@
 ti["'o"] = ti["''"] .. {"it_meditation"}
 ti["%;"] = ti["%."] .. {"st_door_b", state=OPEN}
 ti[";@"] = ti[";;"] .. {"it_death"}
-ti[" %"] = ti["  "] .. {"it-booze-broken"}
-ti[",%"] = ti[",,"] .. {"it-booze-broken"}
+ti[" %"] = ti["  "] .. {"it_bottle_broken"}
+ti[",%"] = ti[",,"] .. {"it_bottle_broken"}
 ti[",b"] = ti[",,"] .. {"it_banana"}
 ti[",d"] = ti[",,"] .. {"it_coin_l"}
 ti[",s"] = ti[",,"] .. {"it_sword"}
@@ -104,7 +104,7 @@
 ti[";s"] = ti[";;"] .. {"it_squashed"}
 ti["%t"] = ti["%%"] .. {"it_meditation_bump"}
 ti["_U"] = ti["__"] .. {"it_umbrella"}
-ti["_d"] = ti["__"] .. {"it-drop"}
+ti["_d"] = ti["__"] .. {"it_drop"}
 ti["_."] = ti["_v"] .. {"it_seed_volcano", secure=true}
 ti[";t"] = ti[";;"] .. {"it_spade"}
 ti[" t"] = ti["  "] .. {"it_spade"}



From raoul at mail.berlios.de  Tue Feb  3 22:49:36 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Tue, 3 Feb 2009 22:49:36 +0100
Subject: [Enigma-game-svn] r1505 - trunk/attic/images-stones
Message-ID: <200902032149.n13Lnanq014480@sheep.berlios.de>

Author: raoul
Date: 2009-02-03 22:49:35 +0100 (Tue, 03 Feb 2009)
New Revision: 1505

Added:
   trunk/attic/images-stones/st_yinyangswitch_gfx16.xcf
   trunk/attic/images-stones/st_yinyangswitch_gfx32.xcf
   trunk/attic/images-stones/st_yinyangswitch_gfx40.xcf
   trunk/attic/images-stones/st_yinyangswitch_gfx48.xcf
   trunk/attic/images-stones/st_yinyangswitch_gfx64.xcf
   trunk/attic/images-stones/yinyang_sombols.svg
Log:
-> Yinyang symbols as svg
-> Gimp sources for yinyangswitch stone



Added: trunk/attic/images-stones/st_yinyangswitch_gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_yinyangswitch_gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_yinyangswitch_gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_yinyangswitch_gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_yinyangswitch_gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_yinyangswitch_gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_yinyangswitch_gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_yinyangswitch_gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_yinyangswitch_gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_yinyangswitch_gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/yinyang_sombols.svg
===================================================================
--- trunk/attic/images-stones/yinyang_sombols.svg	2009-02-03 00:45:20 UTC (rev 1504)
+++ trunk/attic/images-stones/yinyang_sombols.svg	2009-02-03 21:49:35 UTC (rev 1505)
@@ -0,0 +1,636 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+<svg
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   version="1.0"
+   width="210mm"
+   height="297mm"
+   id="svg2">
+  <defs
+     id="defs4" />
+  <g
+     id="layer1">
+    <g
+       transform="matrix(0.7071068,0.7071068,-0.7071068,0.7071068,-2392.9517,-1322.9221)"
+       id="g2540">
+      <g
+         id="g2542">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2544"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2546"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2548"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2550">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2552"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2554"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0,1,-1,0,-606.4814,-1146.8814)"
+       id="g2556">
+      <g
+         id="g2558">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2560"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2562"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2564"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2566">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2568"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2570"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(-0.7071068,0.7071068,-0.7071068,-0.7071068,931.02946,-721.88143)"
+       id="g2572">
+      <g
+         id="g2574">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2576"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2578"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2580"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2582">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2584"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2586"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="translate(-4179.4215,-1146.8814)"
+       id="g2604">
+      <g
+         id="g2606">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2608"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2610"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2612"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2614">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2616"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2618"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="translate(1266.4587,-1146.8814)"
+       id="g2732">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2734">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2736"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2738"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2740"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2742">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2744"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2746"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0.7071068,0.7071068,-0.7071068,0.7071068,3052.9291,-1322.9222)"
+       id="g2780">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2782">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2784"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2786"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2788"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2790">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2792"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2794"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0,1,-1,0,4839.3991,-1146.8814)"
+       id="g2828">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2830">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2832"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2834"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2836"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2838">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2840"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2842"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(-0.7071068,0.7071068,-0.7071068,-0.7071068,6376.9094,-721.8814)"
+       id="g2876">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2878">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2880"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2882"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2884"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2886">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2888"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2890"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="translate(-4179.4215,93.227713)"
+       id="g2620">
+      <g
+         id="g2622">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2624"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2626"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2628"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2630">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2632"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2634"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0.5,0.8660254,-0.8660254,0.5,-1793.3611,-62.333082)"
+       id="g2636">
+      <g
+         id="g2638">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2640"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2642"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2644"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2646">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2648"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2650"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(-0.5,0.8660254,-0.8660254,-0.5,437.13852,362.66692)"
+       id="g2652">
+      <g
+         id="g2654">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2656"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2658"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2660"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2662">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2664"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2666"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="translate(1237.0774,93.227713)"
+       id="g2748">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2750">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2752"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2754"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2756"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2758">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2760"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2762"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0.5,0.8660254,-0.8660254,0.5,3623.1377,-62.333082)"
+       id="g2844">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2846">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2848"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2850"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2852"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2854">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2856"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2858"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(-0.5,0.8660254,-0.8660254,-0.5,5853.6375,362.66692)"
+       id="g2892">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2894">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2896"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2898"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2900"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2902">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2904"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2906"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="translate(-4179.4215,1168.8407)"
+       id="g2684">
+      <g
+         id="g2686">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2688"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2690"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2692"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2694">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2696"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2698"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0,1,-1,0,-551.46899,1168.8407)"
+       id="g2700">
+      <g
+         id="g2702">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2704"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2706"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2708"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2710">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2712"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2714"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="translate(1376.4834,1168.8407)"
+       id="g2764">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2766">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2768"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2770"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2772"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2774">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2776"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2778"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+    <g
+       transform="matrix(0,1,-1,0,5004.4357,1168.8407)"
+       id="g2908">
+      <g
+         transform="matrix(-1,0,0,-1,850,850)"
+         id="g2910">
+        <g
+           transform="matrix(-1,0,0,-1,825,825)"
+           id="g2912"
+           style="fill:#000000;fill-opacity:1">
+          <path
+             d="M 425,25 C 204.2,25 25,204.2 25,425 C 25,645.8 204.2,825 425,825 C 314.6,825 225,735.4 225,625 C 225,514.6 314.6,425 425,425 C 535.4,425 625,335.4 625,225 C 625,114.6 535.4,25 425,25 z M 425,162.5 C 459.5,162.5 487.5,190.5 487.5,225 C 487.5,259.5 459.5,287.5 425,287.5 C 390.5,287.5 362.5,259.5 362.5,225 C 362.5,190.5 390.5,162.5 425,162.5 z"
+             transform="matrix(-1,0,0,-1,825,825)"
+             id="path2914"
+             style="fill:#000000;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,1.25,-100,-50)"
+             id="path2916"
+             style="opacity:1;fill:#000000;fill-opacity:1;stroke:none" />
+        </g>
+        <g
+           id="g2918">
+          <path
+             d="M 425,25 C 535.4,25 625,114.6 625,225 C 625,335.4 535.4,425 425,425 C 314.6,425 225,514.6 225,625 C 225,735.4 314.6,825 425,825 C 645.8,825 825,645.8 825,425 C 825,204.2 645.8,25 425,25 z M 425,562.5 C 459.5,562.5 487.5,590.5 487.5,625 C 487.5,659.5 459.5,687.5 425,687.5 C 390.5,687.5 362.5,659.5 362.5,625 C 362.5,590.5 390.5,562.5 425,562.5 z"
+             id="path2920"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+          <path
+             d="M 450,200 A 50,50 0 1 1 350,200 A 50,50 0 1 1 450,200 z"
+             transform="matrix(1.25,0,0,-1.25,-75,475)"
+             id="path2922"
+             style="fill:#ffffff;fill-opacity:1;stroke:none" />
+        </g>
+      </g>
+    </g>
+  </g>
+</svg>



From raoul at mail.berlios.de  Tue Feb  3 23:44:35 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Tue, 3 Feb 2009 23:44:35 +0100
Subject: [Enigma-game-svn] r1506 - in trunk/data: gfx16 gfx32 gfx40 gfx48
	gfx64
Message-ID: <200902032244.n13MiZgE019760@sheep.berlios.de>

Author: raoul
Date: 2009-02-03 23:44:34 +0100 (Tue, 03 Feb 2009)
New Revision: 1506

Added:
   trunk/data/gfx16/st_yinyang.png
   trunk/data/gfx32/st_yinyang.png
   trunk/data/gfx40/st_yinyang.png
   trunk/data/gfx48/st_yinyang.png
   trunk/data/gfx64/st_yinyang.png
Log:
-> Images for yinyang switch


Added: trunk/data/gfx16/st_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From andreasl at mail.berlios.de  Tue Feb  3 23:54:23 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Tue, 3 Feb 2009 23:54:23 +0100
Subject: [Enigma-game-svn] r1507 - in trunk: attic attic/gfx80 data
	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64 src/stones
Message-ID: <200902032254.n13MsNjh021095@sheep.berlios.de>

Author: andreasl
Date: 2009-02-03 23:51:35 +0100 (Tue, 03 Feb 2009)
New Revision: 1507

Added:
   trunk/attic/gfx80/
   trunk/attic/gfx80/st_oxyd_color_0001.png
   trunk/attic/gfx80/st_oxyd_color_0002.png
   trunk/attic/gfx80/st_oxyd_color_0003.png
   trunk/attic/gfx80/st_oxyd_color_0004.png
   trunk/attic/gfx80/st_oxyd_color_0005.png
   trunk/attic/gfx80/st_oxyd_color_0006.png
   trunk/attic/gfx80/st_oxyd_color_0007.png
   trunk/attic/gfx80/st_oxyd_color_0008.png
   trunk/attic/gfx80/st_oxyd_color_0009.png
   trunk/attic/gfx80/st_oxyd_color_0010.png
   trunk/attic/gfx80/st_oxyd_color_0011.png
   trunk/attic/gfx80/st_oxyd_color_0012.png
   trunk/attic/gfx80/st_oxyd_pseudo_3_0001.png
   trunk/attic/gfx80/st_oxyd_pseudo_3_0002.png
   trunk/attic/gfx80/st_oxyd_pseudo_3_0003.png
   trunk/attic/gfx80/st_oxyd_pseudo_3_0004.png
   trunk/attic/gfx80/st_oxydb.png
   trunk/attic/gfx80/st_oxyde.png
   trunk/data/gfx16/st_oxyd_color_0001.png
   trunk/data/gfx16/st_oxyd_color_0002.png
   trunk/data/gfx16/st_oxyd_color_0003.png
   trunk/data/gfx16/st_oxyd_color_0004.png
   trunk/data/gfx16/st_oxyd_color_0005.png
   trunk/data/gfx16/st_oxyd_color_0006.png
   trunk/data/gfx16/st_oxyd_color_0007.png
   trunk/data/gfx16/st_oxyd_color_0008.png
   trunk/data/gfx16/st_oxyd_color_0009.png
   trunk/data/gfx16/st_oxyd_color_0010.png
   trunk/data/gfx16/st_oxyd_color_0011.png
   trunk/data/gfx16/st_oxyd_color_0012.png
   trunk/data/gfx16/st_oxyd_pseudo_3_0001.png
   trunk/data/gfx16/st_oxyd_pseudo_3_0002.png
   trunk/data/gfx16/st_oxyd_pseudo_3_0003.png
   trunk/data/gfx16/st_oxyd_pseudo_3_0004.png
   trunk/data/gfx16/st_oxydb.png
   trunk/data/gfx16/st_oxyde.png
   trunk/data/gfx32/st_fakeoxyd_blink_0001.png
   trunk/data/gfx32/st_fakeoxyd_blink_0002.png
   trunk/data/gfx32/st_fakeoxyd_blink_0003.png
   trunk/data/gfx32/st_fakeoxyd_blink_0004.png
   trunk/data/gfx32/st_oxyd_blink_0001.png
   trunk/data/gfx32/st_oxyd_blink_0002.png
   trunk/data/gfx32/st_oxyd_blink_0003.png
   trunk/data/gfx32/st_oxyd_blink_0004.png
   trunk/data/gfx32/st_oxyd_blink_0005.png
   trunk/data/gfx32/st_oxyd_color_0001.png
   trunk/data/gfx32/st_oxyd_color_0002.png
   trunk/data/gfx32/st_oxyd_color_0003.png
   trunk/data/gfx32/st_oxyd_color_0004.png
   trunk/data/gfx32/st_oxyd_color_0005.png
   trunk/data/gfx32/st_oxyd_color_0006.png
   trunk/data/gfx32/st_oxyd_color_0007.png
   trunk/data/gfx32/st_oxyd_color_0008.png
   trunk/data/gfx32/st_oxyd_color_0009.png
   trunk/data/gfx32/st_oxyd_color_0010.png
   trunk/data/gfx32/st_oxyd_color_0011.png
   trunk/data/gfx32/st_oxyd_color_0012.png
   trunk/data/gfx32/st_oxyd_color_0096.png
   trunk/data/gfx32/st_oxyd_color_0097.png
   trunk/data/gfx32/st_oxyd_pseudo_3_0001.png
   trunk/data/gfx32/st_oxyd_pseudo_3_0002.png
   trunk/data/gfx32/st_oxyd_pseudo_3_0003.png
   trunk/data/gfx32/st_oxyd_pseudo_3_0004.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0001.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0002.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0003.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0004.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0005.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0006.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0007.png
   trunk/data/gfx32/st_oxyd_pseudo_4_0008.png
   trunk/data/gfx32/st_oxyd_questmark.png
   trunk/data/gfx32/st_oxyda.png
   trunk/data/gfx32/st_oxyda_open.png
   trunk/data/gfx32/st_oxyda_opening.png
   trunk/data/gfx32/st_oxydb.png
   trunk/data/gfx32/st_oxydb_open.png
   trunk/data/gfx32/st_oxydb_opening.png
   trunk/data/gfx32/st_oxydc.png
   trunk/data/gfx32/st_oxydc_open.png
   trunk/data/gfx32/st_oxydc_opening.png
   trunk/data/gfx32/st_oxydd.png
   trunk/data/gfx32/st_oxydd_open.png
   trunk/data/gfx32/st_oxydd_opening.png
   trunk/data/gfx32/st_oxyde.png
   trunk/data/gfx32/st_quake_break.png
   trunk/data/gfx40/st_fakeoxyd_blink_0001.png
   trunk/data/gfx40/st_fakeoxyd_blink_0002.png
   trunk/data/gfx40/st_fakeoxyd_blink_0003.png
   trunk/data/gfx40/st_fakeoxyd_blink_0004.png
   trunk/data/gfx40/st_oxyd_blink_0001.png
   trunk/data/gfx40/st_oxyd_blink_0002.png
   trunk/data/gfx40/st_oxyd_blink_0003.png
   trunk/data/gfx40/st_oxyd_blink_0004.png
   trunk/data/gfx40/st_oxyd_blink_0005.png
   trunk/data/gfx40/st_oxyd_color_0001.png
   trunk/data/gfx40/st_oxyd_color_0002.png
   trunk/data/gfx40/st_oxyd_color_0003.png
   trunk/data/gfx40/st_oxyd_color_0004.png
   trunk/data/gfx40/st_oxyd_color_0005.png
   trunk/data/gfx40/st_oxyd_color_0006.png
   trunk/data/gfx40/st_oxyd_color_0007.png
   trunk/data/gfx40/st_oxyd_color_0008.png
   trunk/data/gfx40/st_oxyd_color_0009.png
   trunk/data/gfx40/st_oxyd_color_0010.png
   trunk/data/gfx40/st_oxyd_color_0011.png
   trunk/data/gfx40/st_oxyd_color_0012.png
   trunk/data/gfx40/st_oxyd_color_0096.png
   trunk/data/gfx40/st_oxyd_color_0097.png
   trunk/data/gfx40/st_oxyd_pseudo_3_0001.png
   trunk/data/gfx40/st_oxyd_pseudo_3_0002.png
   trunk/data/gfx40/st_oxyd_pseudo_3_0003.png
   trunk/data/gfx40/st_oxyd_pseudo_3_0004.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0001.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0002.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0003.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0004.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0005.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0006.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0007.png
   trunk/data/gfx40/st_oxyd_pseudo_4_0008.png
   trunk/data/gfx40/st_oxyd_questmark.png
   trunk/data/gfx40/st_oxyda.png
   trunk/data/gfx40/st_oxyda_open.png
   trunk/data/gfx40/st_oxyda_opening.png
   trunk/data/gfx40/st_oxydb.png
   trunk/data/gfx40/st_oxydb_open.png
   trunk/data/gfx40/st_oxydb_opening.png
   trunk/data/gfx40/st_oxydc.png
   trunk/data/gfx40/st_oxydc_open.png
   trunk/data/gfx40/st_oxydc_opening.png
   trunk/data/gfx40/st_oxydd.png
   trunk/data/gfx40/st_oxydd_open.png
   trunk/data/gfx40/st_oxydd_opening.png
   trunk/data/gfx40/st_oxyde.png
   trunk/data/gfx40/st_quake_break.png
   trunk/data/gfx48/st_fakeoxyd_blink_0001.png
   trunk/data/gfx48/st_fakeoxyd_blink_0002.png
   trunk/data/gfx48/st_fakeoxyd_blink_0003.png
   trunk/data/gfx48/st_fakeoxyd_blink_0004.png
   trunk/data/gfx48/st_oxyd_blink_0001.png
   trunk/data/gfx48/st_oxyd_blink_0002.png
   trunk/data/gfx48/st_oxyd_blink_0003.png
   trunk/data/gfx48/st_oxyd_blink_0004.png
   trunk/data/gfx48/st_oxyd_blink_0005.png
   trunk/data/gfx48/st_oxyd_color_0001.png
   trunk/data/gfx48/st_oxyd_color_0002.png
   trunk/data/gfx48/st_oxyd_color_0003.png
   trunk/data/gfx48/st_oxyd_color_0004.png
   trunk/data/gfx48/st_oxyd_color_0005.png
   trunk/data/gfx48/st_oxyd_color_0006.png
   trunk/data/gfx48/st_oxyd_color_0007.png
   trunk/data/gfx48/st_oxyd_color_0008.png
   trunk/data/gfx48/st_oxyd_color_0009.png
   trunk/data/gfx48/st_oxyd_color_0010.png
   trunk/data/gfx48/st_oxyd_color_0011.png
   trunk/data/gfx48/st_oxyd_color_0012.png
   trunk/data/gfx48/st_oxyd_color_0096.png
   trunk/data/gfx48/st_oxyd_color_0097.png
   trunk/data/gfx48/st_oxyd_pseudo_3_0001.png
   trunk/data/gfx48/st_oxyd_pseudo_3_0002.png
   trunk/data/gfx48/st_oxyd_pseudo_3_0003.png
   trunk/data/gfx48/st_oxyd_pseudo_3_0004.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0001.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0002.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0003.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0004.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0005.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0006.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0007.png
   trunk/data/gfx48/st_oxyd_pseudo_4_0008.png
   trunk/data/gfx48/st_oxyd_questmark.png
   trunk/data/gfx48/st_oxyda.png
   trunk/data/gfx48/st_oxyda_open.png
   trunk/data/gfx48/st_oxyda_opening.png
   trunk/data/gfx48/st_oxydb.png
   trunk/data/gfx48/st_oxydb_open.png
   trunk/data/gfx48/st_oxydb_opening.png
   trunk/data/gfx48/st_oxydc.png
   trunk/data/gfx48/st_oxydc_open.png
   trunk/data/gfx48/st_oxydc_opening.png
   trunk/data/gfx48/st_oxydd.png
   trunk/data/gfx48/st_oxydd_open.png
   trunk/data/gfx48/st_oxydd_opening.png
   trunk/data/gfx48/st_oxyde.png
   trunk/data/gfx48/st_quake_break.png
   trunk/data/gfx64/st_oxyd_color_0001.png
   trunk/data/gfx64/st_oxyd_color_0002.png
   trunk/data/gfx64/st_oxyd_color_0003.png
   trunk/data/gfx64/st_oxyd_color_0004.png
   trunk/data/gfx64/st_oxyd_color_0005.png
   trunk/data/gfx64/st_oxyd_color_0006.png
   trunk/data/gfx64/st_oxyd_color_0007.png
   trunk/data/gfx64/st_oxyd_color_0008.png
   trunk/data/gfx64/st_oxyd_color_0009.png
   trunk/data/gfx64/st_oxyd_color_0010.png
   trunk/data/gfx64/st_oxyd_color_0011.png
   trunk/data/gfx64/st_oxyd_color_0012.png
   trunk/data/gfx64/st_oxyd_pseudo_3_0001.png
   trunk/data/gfx64/st_oxyd_pseudo_3_0002.png
   trunk/data/gfx64/st_oxyd_pseudo_3_0003.png
   trunk/data/gfx64/st_oxyd_pseudo_3_0004.png
   trunk/data/gfx64/st_oxydb.png
   trunk/data/gfx64/st_oxyde.png
Removed:
   trunk/data/gfx32/st-fakeoxyd-blink_0001.png
   trunk/data/gfx32/st-fakeoxyd-blink_0002.png
   trunk/data/gfx32/st-fakeoxyd-blink_0003.png
   trunk/data/gfx32/st-fakeoxyd-blink_0004.png
   trunk/data/gfx32/st-fart-break.png
   trunk/data/gfx32/st-oxyd-blink_0001.png
   trunk/data/gfx32/st-oxyd-blink_0002.png
   trunk/data/gfx32/st-oxyd-blink_0003.png
   trunk/data/gfx32/st-oxyd-blink_0004.png
   trunk/data/gfx32/st-oxyd-blink_0005.png
   trunk/data/gfx32/st-oxyd-color_0001.png
   trunk/data/gfx32/st-oxyd-color_0002.png
   trunk/data/gfx32/st-oxyd-color_0003.png
   trunk/data/gfx32/st-oxyd-color_0004.png
   trunk/data/gfx32/st-oxyd-color_0005.png
   trunk/data/gfx32/st-oxyd-color_0006.png
   trunk/data/gfx32/st-oxyd-color_0007.png
   trunk/data/gfx32/st-oxyd-color_0008.png
   trunk/data/gfx32/st-oxyd-color_0009.png
   trunk/data/gfx32/st-oxyd-color_0010.png
   trunk/data/gfx32/st-oxyd-color_0011.png
   trunk/data/gfx32/st-oxyd-color_0012.png
   trunk/data/gfx32/st-oxyd-color_0096.png
   trunk/data/gfx32/st-oxyd-color_0097.png
   trunk/data/gfx32/st-oxyd-pseudo-3_0001.png
   trunk/data/gfx32/st-oxyd-pseudo-3_0002.png
   trunk/data/gfx32/st-oxyd-pseudo-3_0003.png
   trunk/data/gfx32/st-oxyd-pseudo-3_0004.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0001.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0002.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0003.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0004.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0005.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0006.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0007.png
   trunk/data/gfx32/st-oxyd-pseudo-4_0008.png
   trunk/data/gfx32/st-oxyd-questmark.png
   trunk/data/gfx32/st-oxyda-open.png
   trunk/data/gfx32/st-oxyda-opening.png
   trunk/data/gfx32/st-oxyda.png
   trunk/data/gfx32/st-oxydb-open.png
   trunk/data/gfx32/st-oxydb-opening.png
   trunk/data/gfx32/st-oxydb.png
   trunk/data/gfx32/st-oxydc-open.png
   trunk/data/gfx32/st-oxydc-opening.png
   trunk/data/gfx32/st-oxydc.png
   trunk/data/gfx32/st-oxydd-open.png
   trunk/data/gfx32/st-oxydd-opening.png
   trunk/data/gfx32/st-oxydd.png
   trunk/data/gfx32/st-oxyde.png
   trunk/data/gfx40/st-fakeoxyd-blink_0001.png
   trunk/data/gfx40/st-fakeoxyd-blink_0002.png
   trunk/data/gfx40/st-fakeoxyd-blink_0003.png
   trunk/data/gfx40/st-fakeoxyd-blink_0004.png
   trunk/data/gfx40/st-fart-break.png
   trunk/data/gfx40/st-oxyd-blink_0001.png
   trunk/data/gfx40/st-oxyd-blink_0002.png
   trunk/data/gfx40/st-oxyd-blink_0003.png
   trunk/data/gfx40/st-oxyd-blink_0004.png
   trunk/data/gfx40/st-oxyd-blink_0005.png
   trunk/data/gfx40/st-oxyd-color_0001.png
   trunk/data/gfx40/st-oxyd-color_0002.png
   trunk/data/gfx40/st-oxyd-color_0003.png
   trunk/data/gfx40/st-oxyd-color_0004.png
   trunk/data/gfx40/st-oxyd-color_0005.png
   trunk/data/gfx40/st-oxyd-color_0006.png
   trunk/data/gfx40/st-oxyd-color_0007.png
   trunk/data/gfx40/st-oxyd-color_0008.png
   trunk/data/gfx40/st-oxyd-color_0009.png
   trunk/data/gfx40/st-oxyd-color_0010.png
   trunk/data/gfx40/st-oxyd-color_0011.png
   trunk/data/gfx40/st-oxyd-color_0012.png
   trunk/data/gfx40/st-oxyd-color_0096.png
   trunk/data/gfx40/st-oxyd-color_0097.png
   trunk/data/gfx40/st-oxyd-pseudo-3_0001.png
   trunk/data/gfx40/st-oxyd-pseudo-3_0002.png
   trunk/data/gfx40/st-oxyd-pseudo-3_0003.png
   trunk/data/gfx40/st-oxyd-pseudo-3_0004.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0001.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0002.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0003.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0004.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0005.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0006.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0007.png
   trunk/data/gfx40/st-oxyd-pseudo-4_0008.png
   trunk/data/gfx40/st-oxyd-questmark.png
   trunk/data/gfx40/st-oxyda-open.png
   trunk/data/gfx40/st-oxyda-opening.png
   trunk/data/gfx40/st-oxyda.png
   trunk/data/gfx40/st-oxydb-open.png
   trunk/data/gfx40/st-oxydb-opening.png
   trunk/data/gfx40/st-oxydb.png
   trunk/data/gfx40/st-oxydc-open.png
   trunk/data/gfx40/st-oxydc-opening.png
   trunk/data/gfx40/st-oxydc.png
   trunk/data/gfx40/st-oxydd-open.png
   trunk/data/gfx40/st-oxydd-opening.png
   trunk/data/gfx40/st-oxydd.png
   trunk/data/gfx40/st-oxyde.png
   trunk/data/gfx48/st-fakeoxyd-blink_0001.png
   trunk/data/gfx48/st-fakeoxyd-blink_0002.png
   trunk/data/gfx48/st-fakeoxyd-blink_0003.png
   trunk/data/gfx48/st-fakeoxyd-blink_0004.png
   trunk/data/gfx48/st-fart-break.png
   trunk/data/gfx48/st-oxyd-blink_0001.png
   trunk/data/gfx48/st-oxyd-blink_0002.png
   trunk/data/gfx48/st-oxyd-blink_0003.png
   trunk/data/gfx48/st-oxyd-blink_0004.png
   trunk/data/gfx48/st-oxyd-blink_0005.png
   trunk/data/gfx48/st-oxyd-color_0001.png
   trunk/data/gfx48/st-oxyd-color_0002.png
   trunk/data/gfx48/st-oxyd-color_0003.png
   trunk/data/gfx48/st-oxyd-color_0004.png
   trunk/data/gfx48/st-oxyd-color_0005.png
   trunk/data/gfx48/st-oxyd-color_0006.png
   trunk/data/gfx48/st-oxyd-color_0007.png
   trunk/data/gfx48/st-oxyd-color_0008.png
   trunk/data/gfx48/st-oxyd-color_0009.png
   trunk/data/gfx48/st-oxyd-color_0010.png
   trunk/data/gfx48/st-oxyd-color_0011.png
   trunk/data/gfx48/st-oxyd-color_0012.png
   trunk/data/gfx48/st-oxyd-color_0096.png
   trunk/data/gfx48/st-oxyd-color_0097.png
   trunk/data/gfx48/st-oxyd-pseudo-3_0001.png
   trunk/data/gfx48/st-oxyd-pseudo-3_0002.png
   trunk/data/gfx48/st-oxyd-pseudo-3_0003.png
   trunk/data/gfx48/st-oxyd-pseudo-3_0004.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0001.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0002.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0003.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0004.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0005.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0006.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0007.png
   trunk/data/gfx48/st-oxyd-pseudo-4_0008.png
   trunk/data/gfx48/st-oxyd-questmark.png
   trunk/data/gfx48/st-oxyda-open.png
   trunk/data/gfx48/st-oxyda-opening.png
   trunk/data/gfx48/st-oxyda.png
   trunk/data/gfx48/st-oxydb-open.png
   trunk/data/gfx48/st-oxydb-opening.png
   trunk/data/gfx48/st-oxydb.png
   trunk/data/gfx48/st-oxydc-open.png
   trunk/data/gfx48/st-oxydc-opening.png
   trunk/data/gfx48/st-oxydc.png
   trunk/data/gfx48/st-oxydd-open.png
   trunk/data/gfx48/st-oxydd-opening.png
   trunk/data/gfx48/st-oxydd.png
   trunk/data/gfx48/st-oxyde.png
Modified:
   trunk/data/models-2d.lua
   trunk/src/stones/FakeStone.cc
   trunk/src/stones/OxydStone.cc
   trunk/src/stones/OxydStone.hh
   trunk/src/stones/QuakeStone.cc
Log:
Trunk:
 - Renewing oxyd graphics, first try:
   - new, perfectly centered oxyd color dots and pseudo_3 in sizes
     16, 32, 40, 48, 64 and 80 (size 80 is in new directory attic/gfx80)
   - experimental new oxydb/oxyde-frame - if it's good, it should become the
     default frame for plain-based stones (like switches).
   - renaming of oxyd/fakeoxyd/quake images and modelnames to use underscore
   - renamed "fart" and "likeoxyd" model names to "quake" and "fake_oxyd"


Added: trunk/attic/gfx80/st_oxyd_color_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0009.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0009.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0010.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0010.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0011.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0011.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_color_0012.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_color_0012.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_pseudo_3_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_pseudo_3_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_pseudo_3_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_pseudo_3_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_pseudo_3_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_pseudo_3_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyd_pseudo_3_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyd_pseudo_3_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxydb.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxydb.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/gfx80/st_oxyde.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/gfx80/st_oxyde.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0009.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0009.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0010.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0010.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0011.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0011.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_color_0012.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_color_0012.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_pseudo_3_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_pseudo_3_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_pseudo_3_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_pseudo_3_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_pseudo_3_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_pseudo_3_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyd_pseudo_3_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_pseudo_3_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxydb.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxydb.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx16/st_oxyde.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyde.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Deleted: trunk/data/gfx32/st-fakeoxyd-blink_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-fakeoxyd-blink_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-fakeoxyd-blink_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-fakeoxyd-blink_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-fart-break.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-blink_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-blink_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-blink_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-blink_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-blink_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0006.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0007.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0008.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0009.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0010.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0011.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0012.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0096.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-color_0097.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-3_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-3_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-3_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-3_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0006.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0007.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-pseudo-4_0008.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyd-questmark.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyda-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyda-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyda.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydb-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydb-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydc-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydc-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydc.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydd-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydd-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxydd.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-oxyde.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/st_fakeoxyd_blink_0001.png (from rev 1502, trunk/data/gfx32/st-fakeoxyd-blink_0001.png)

Copied: trunk/data/gfx32/st_fakeoxyd_blink_0002.png (from rev 1502, trunk/data/gfx32/st-fakeoxyd-blink_0002.png)

Copied: trunk/data/gfx32/st_fakeoxyd_blink_0003.png (from rev 1502, trunk/data/gfx32/st-fakeoxyd-blink_0003.png)

Copied: trunk/data/gfx32/st_fakeoxyd_blink_0004.png (from rev 1502, trunk/data/gfx32/st-fakeoxyd-blink_0004.png)

Copied: trunk/data/gfx32/st_oxyd_blink_0001.png (from rev 1502, trunk/data/gfx32/st-oxyd-blink_0001.png)

Copied: trunk/data/gfx32/st_oxyd_blink_0002.png (from rev 1502, trunk/data/gfx32/st-oxyd-blink_0002.png)

Copied: trunk/data/gfx32/st_oxyd_blink_0003.png (from rev 1502, trunk/data/gfx32/st-oxyd-blink_0003.png)

Copied: trunk/data/gfx32/st_oxyd_blink_0004.png (from rev 1502, trunk/data/gfx32/st-oxyd-blink_0004.png)

Copied: trunk/data/gfx32/st_oxyd_blink_0005.png (from rev 1502, trunk/data/gfx32/st-oxyd-blink_0005.png)

Added: trunk/data/gfx32/st_oxyd_color_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0009.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0009.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0010.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0010.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0011.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0011.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0012.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0012.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0096.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0096.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_color_0097.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_color_0097.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_3_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_3_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_3_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_3_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_3_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_3_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_3_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_3_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx32/st_oxyd_pseudo_4_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyd_pseudo_4_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx32/st_oxyd_questmark.png (from rev 1502, trunk/data/gfx32/st-oxyd-questmark.png)

Copied: trunk/data/gfx32/st_oxyda.png (from rev 1502, trunk/data/gfx32/st-oxyda.png)

Copied: trunk/data/gfx32/st_oxyda_open.png (from rev 1502, trunk/data/gfx32/st-oxyda-open.png)

Copied: trunk/data/gfx32/st_oxyda_opening.png (from rev 1502, trunk/data/gfx32/st-oxyda-opening.png)

Added: trunk/data/gfx32/st_oxydb.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxydb.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx32/st_oxydb_open.png (from rev 1502, trunk/data/gfx32/st-oxydb-open.png)

Copied: trunk/data/gfx32/st_oxydb_opening.png (from rev 1502, trunk/data/gfx32/st-oxydb-opening.png)

Copied: trunk/data/gfx32/st_oxydc.png (from rev 1502, trunk/data/gfx32/st-oxydc.png)

Copied: trunk/data/gfx32/st_oxydc_open.png (from rev 1502, trunk/data/gfx32/st-oxydc-open.png)

Copied: trunk/data/gfx32/st_oxydc_opening.png (from rev 1502, trunk/data/gfx32/st-oxydc-opening.png)

Copied: trunk/data/gfx32/st_oxydd.png (from rev 1502, trunk/data/gfx32/st-oxydd.png)

Copied: trunk/data/gfx32/st_oxydd_open.png (from rev 1502, trunk/data/gfx32/st-oxydd-open.png)

Copied: trunk/data/gfx32/st_oxydd_opening.png (from rev 1502, trunk/data/gfx32/st-oxydd-opening.png)

Added: trunk/data/gfx32/st_oxyde.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_oxyde.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx32/st_quake_break.png (from rev 1502, trunk/data/gfx32/st-fart-break.png)

Deleted: trunk/data/gfx40/st-fakeoxyd-blink_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-fakeoxyd-blink_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-fakeoxyd-blink_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-fakeoxyd-blink_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-fart-break.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-blink_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-blink_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-blink_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-blink_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-blink_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0006.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0007.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0008.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0009.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0010.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0011.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0012.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0096.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-color_0097.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-3_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-3_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-3_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-3_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0006.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0007.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-pseudo-4_0008.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyd-questmark.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyda-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyda-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyda.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydb-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydb-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydc-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydc-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydc.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydd-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydd-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxydd.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-oxyde.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/st_fakeoxyd_blink_0001.png (from rev 1502, trunk/data/gfx40/st-fakeoxyd-blink_0001.png)

Copied: trunk/data/gfx40/st_fakeoxyd_blink_0002.png (from rev 1502, trunk/data/gfx40/st-fakeoxyd-blink_0002.png)

Copied: trunk/data/gfx40/st_fakeoxyd_blink_0003.png (from rev 1502, trunk/data/gfx40/st-fakeoxyd-blink_0003.png)

Copied: trunk/data/gfx40/st_fakeoxyd_blink_0004.png (from rev 1502, trunk/data/gfx40/st-fakeoxyd-blink_0004.png)

Copied: trunk/data/gfx40/st_oxyd_blink_0001.png (from rev 1502, trunk/data/gfx40/st-oxyd-blink_0001.png)

Copied: trunk/data/gfx40/st_oxyd_blink_0002.png (from rev 1502, trunk/data/gfx40/st-oxyd-blink_0002.png)

Copied: trunk/data/gfx40/st_oxyd_blink_0003.png (from rev 1502, trunk/data/gfx40/st-oxyd-blink_0003.png)

Copied: trunk/data/gfx40/st_oxyd_blink_0004.png (from rev 1502, trunk/data/gfx40/st-oxyd-blink_0004.png)

Copied: trunk/data/gfx40/st_oxyd_blink_0005.png (from rev 1502, trunk/data/gfx40/st-oxyd-blink_0005.png)

Added: trunk/data/gfx40/st_oxyd_color_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0009.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0009.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0010.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0010.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0011.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0011.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0012.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0012.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0096.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0096.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_color_0097.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_color_0097.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_3_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_3_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_3_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_3_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_3_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_3_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_3_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_3_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx40/st_oxyd_pseudo_4_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyd_pseudo_4_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx40/st_oxyd_questmark.png (from rev 1502, trunk/data/gfx40/st-oxyd-questmark.png)

Copied: trunk/data/gfx40/st_oxyda.png (from rev 1502, trunk/data/gfx40/st-oxyda.png)

Copied: trunk/data/gfx40/st_oxyda_open.png (from rev 1502, trunk/data/gfx40/st-oxyda-open.png)

Copied: trunk/data/gfx40/st_oxyda_opening.png (from rev 1502, trunk/data/gfx40/st-oxyda-opening.png)

Added: trunk/data/gfx40/st_oxydb.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxydb.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx40/st_oxydb_open.png (from rev 1502, trunk/data/gfx40/st-oxydb-open.png)

Copied: trunk/data/gfx40/st_oxydb_opening.png (from rev 1502, trunk/data/gfx40/st-oxydb-opening.png)

Copied: trunk/data/gfx40/st_oxydc.png (from rev 1502, trunk/data/gfx40/st-oxydc.png)

Copied: trunk/data/gfx40/st_oxydc_open.png (from rev 1502, trunk/data/gfx40/st-oxydc-open.png)

Copied: trunk/data/gfx40/st_oxydc_opening.png (from rev 1502, trunk/data/gfx40/st-oxydc-opening.png)

Copied: trunk/data/gfx40/st_oxydd.png (from rev 1502, trunk/data/gfx40/st-oxydd.png)

Copied: trunk/data/gfx40/st_oxydd_open.png (from rev 1502, trunk/data/gfx40/st-oxydd-open.png)

Copied: trunk/data/gfx40/st_oxydd_opening.png (from rev 1502, trunk/data/gfx40/st-oxydd-opening.png)

Added: trunk/data/gfx40/st_oxyde.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_oxyde.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx40/st_quake_break.png (from rev 1502, trunk/data/gfx40/st-fart-break.png)

Deleted: trunk/data/gfx48/st-fakeoxyd-blink_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-fakeoxyd-blink_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-fakeoxyd-blink_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-fakeoxyd-blink_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-fart-break.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-blink_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-blink_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-blink_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-blink_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-blink_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0006.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0007.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0008.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0009.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0010.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0011.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0012.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0096.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-color_0097.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-3_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-3_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-3_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-3_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0001.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0002.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0003.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0004.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0005.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0006.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0007.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-pseudo-4_0008.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyd-questmark.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyda-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyda-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyda.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydb-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydb-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydc-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydc-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydc.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydd-open.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydd-opening.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxydd.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-oxyde.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/st_fakeoxyd_blink_0001.png (from rev 1502, trunk/data/gfx48/st-fakeoxyd-blink_0001.png)

Copied: trunk/data/gfx48/st_fakeoxyd_blink_0002.png (from rev 1502, trunk/data/gfx48/st-fakeoxyd-blink_0002.png)

Copied: trunk/data/gfx48/st_fakeoxyd_blink_0003.png (from rev 1502, trunk/data/gfx48/st-fakeoxyd-blink_0003.png)

Copied: trunk/data/gfx48/st_fakeoxyd_blink_0004.png (from rev 1502, trunk/data/gfx48/st-fakeoxyd-blink_0004.png)

Copied: trunk/data/gfx48/st_oxyd_blink_0001.png (from rev 1502, trunk/data/gfx48/st-oxyd-blink_0001.png)

Copied: trunk/data/gfx48/st_oxyd_blink_0002.png (from rev 1502, trunk/data/gfx48/st-oxyd-blink_0002.png)

Copied: trunk/data/gfx48/st_oxyd_blink_0003.png (from rev 1502, trunk/data/gfx48/st-oxyd-blink_0003.png)

Copied: trunk/data/gfx48/st_oxyd_blink_0004.png (from rev 1502, trunk/data/gfx48/st-oxyd-blink_0004.png)

Copied: trunk/data/gfx48/st_oxyd_blink_0005.png (from rev 1502, trunk/data/gfx48/st-oxyd-blink_0005.png)

Added: trunk/data/gfx48/st_oxyd_color_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0009.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0009.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0010.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0010.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0011.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0011.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0012.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0012.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0096.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0096.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_color_0097.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_color_0097.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_3_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_3_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_3_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_3_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_3_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_3_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_3_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_3_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx48/st_oxyd_pseudo_4_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyd_pseudo_4_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx48/st_oxyd_questmark.png (from rev 1502, trunk/data/gfx48/st-oxyd-questmark.png)

Copied: trunk/data/gfx48/st_oxyda.png (from rev 1502, trunk/data/gfx48/st-oxyda.png)

Copied: trunk/data/gfx48/st_oxyda_open.png (from rev 1502, trunk/data/gfx48/st-oxyda-open.png)

Copied: trunk/data/gfx48/st_oxyda_opening.png (from rev 1502, trunk/data/gfx48/st-oxyda-opening.png)

Added: trunk/data/gfx48/st_oxydb.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxydb.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx48/st_oxydb_open.png (from rev 1502, trunk/data/gfx48/st-oxydb-open.png)

Copied: trunk/data/gfx48/st_oxydb_opening.png (from rev 1502, trunk/data/gfx48/st-oxydb-opening.png)

Copied: trunk/data/gfx48/st_oxydc.png (from rev 1502, trunk/data/gfx48/st-oxydc.png)

Copied: trunk/data/gfx48/st_oxydc_open.png (from rev 1502, trunk/data/gfx48/st-oxydc-open.png)

Copied: trunk/data/gfx48/st_oxydc_opening.png (from rev 1502, trunk/data/gfx48/st-oxydc-opening.png)

Copied: trunk/data/gfx48/st_oxydd.png (from rev 1502, trunk/data/gfx48/st-oxydd.png)

Copied: trunk/data/gfx48/st_oxydd_open.png (from rev 1502, trunk/data/gfx48/st-oxydd-open.png)

Copied: trunk/data/gfx48/st_oxydd_opening.png (from rev 1502, trunk/data/gfx48/st-oxydd-opening.png)

Added: trunk/data/gfx48/st_oxyde.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_oxyde.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Copied: trunk/data/gfx48/st_quake_break.png (from rev 1502, trunk/data/gfx48/st-fart-break.png)

Added: trunk/data/gfx64/st_oxyd_color_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0005.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0005.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0006.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0006.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0007.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0007.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0008.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0008.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0009.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0009.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0010.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0010.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0011.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0011.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_color_0012.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_color_0012.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_pseudo_3_0001.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_pseudo_3_0001.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_pseudo_3_0002.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_pseudo_3_0002.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_pseudo_3_0003.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_pseudo_3_0003.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyd_pseudo_3_0004.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_pseudo_3_0004.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxydb.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxydb.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/data/gfx64/st_oxyde.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyde.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-03 22:44:34 UTC (rev 1506)
+++ trunk/data/models-2d.lua	2009-02-03 22:51:35 UTC (rev 1507)
@@ -1009,9 +1009,9 @@
 
 -- laserswitch --
 do
-    DefStone("st-laserswitch0", nil, {filename="st-oxydb"})
+    DefStone("st-laserswitch0", nil, {filename="st_oxydb"})
     DefAnimImages("laserswitch-blink",
-        RepeatAnim(PingPong(BuildFrames(FrameNames("st-fakeoxyd-blink", 1,4),50))), {loop=1})
+        RepeatAnim(PingPong(BuildFrames(FrameNames("st_fakeoxyd_blink", 1,4),50))), {loop=1})
     DefSolidStone("st-laserswitch1", "laserswitch-blink")
 end
 
@@ -1387,21 +1387,21 @@
 
 do
     local num_colors = 12
-    local colorspots = FrameNames("st-oxyd-color", 1, num_colors)
-    AddFrameNames(colorspots, "st-oxyd-color", 96, 97)
-    local blink_ovls = FrameNames("st-oxyd-blink", 1, 5)
+    local colorspots = FrameNames("st_oxyd_color", 1, num_colors)
+    AddFrameNames(colorspots, "st_oxyd_color", 96, 97)
+    local blink_ovls = FrameNames("st_oxyd_blink", 1, 5)
     local pseudospots = {}
-    pseudospots[-3] = FrameNames("st-oxyd-pseudo-3", 1, 4)
-    pseudospots[-4] = FrameNames("st-oxyd-pseudo-4", 1, 8)
+    pseudospots[-3] = FrameNames("st_oxyd_pseudo_3", 1, 4)
+    pseudospots[-4] = FrameNames("st_oxyd_pseudo_4", 1, 8)
 
 -- Define "fading in" and "fading out" animations for oxyd stones.
 -- These two animations are combined with the stone images to
 -- produce the opening and closing animations for oxyd stones.
     local baseimg = {
-        a="st-oxyda-open",
-        b="st-oxydb-open",
-        c="st-oxydc-open",
-        d="st-oxydd-open",
+        a="st_oxyda_open",
+        b="st_oxydb_open",
+        c="st_oxydc_open",
+        d="st_oxydd_open",
     }
     local shadow = {
        a="sh-round",
@@ -1410,10 +1410,10 @@
        d="sh-solid",
     }
     local fopening = {
-        a = BuildFrames(DefSubimages("st-oxyda-opening", {h=9}), 60),
-        b = BuildFrames(DefSubimages("st-oxydb-opening", {h=14}), 40),
-        c = BuildFrames(DefSubimages("st-oxydc-opening", {h=5}), 70),
-        d = BuildFrames(DefSubimages("st-oxydd-opening", {h=5}), 70),
+        a = BuildFrames(DefSubimages("st_oxyda_opening", {h=9}), 60),
+        b = BuildFrames(DefSubimages("st_oxydb_opening", {h=14}), 40),
+        c = BuildFrames(DefSubimages("st_oxydc_opening", {h=5}), 70),
+        d = BuildFrames(DefSubimages("st_oxydd_opening", {h=5}), 70),
     }
     local fclosing = {
         a = ReverseFrames(fopening["a"]),
@@ -1423,9 +1423,9 @@
     }
 
     function mkopenclose(flavor, color)
-        local n = "st-oxyd" .. flavor .. color
-        local fadein = "oxyd"..flavor.."-fadein"
-        local fadeout= "oxyd"..flavor.."-fadeout"
+        local n = "st_oxyd" .. flavor .. color
+        local fadein = "oxyd"..flavor.."_fadein"
+        local fadeout= "oxyd"..flavor.."_fadeout"
         local spotcolor = color
 
         if (color >= 0) then
@@ -1434,24 +1434,24 @@
             spotcolor = 100 + color -- pseudo colors
         end
 
-        DefOverlay(n.."-base", {baseimg[flavor], colorspots[spotcolor]})
-        display.DefineComposite(n.."-opening-fg", n.."-base", fadein)
-        display.DefineComposite(n.."-closing-fg", n.."-base", fadeout)
-        DefShModel (n.."-opening", n.."-opening-fg", shadow[flavor])
-        DefShModel (n.."-closing", n.."-closing-fg", shadow[flavor])
+        DefOverlay(n.."_base", {baseimg[flavor], colorspots[spotcolor]})
+        display.DefineComposite(n.."_opening_fg", n.."_base", fadein)
+        display.DefineComposite(n.."_closing_fg", n.."_base", fadeout)
+        DefShModel (n.."_opening", n.."_opening_fg", shadow[flavor])
+        DefShModel (n.."_closing", n.."_closing_fg", shadow[flavor])
     end
 
     function mkblink(flavor, color)
-        local n = "st-oxyd"..flavor..color.."-blink"
-        local img={baseimg[flavor],colorspots[color+1], "st-oxyd-questmark"}
+        local n = "st_oxyd"..flavor..color.."_blink"
+        local img={baseimg[flavor],colorspots[color+1], "st_oxyd_questmark"}
         DefOverlay(n..1, img)
         DefOverlay(n..2, {baseimg[flavor], colorspots[color+1]})
-        DefAnim(n.."-anim", BuildFrames({n..1,n..2}, 500), 1)
-        DefShModel(n, n.."-anim", shadow[flavor])
+        DefAnim(n.."_anim", BuildFrames({n..1,n..2}, 500), 1)
+        DefShModel(n, n.."_anim", shadow[flavor])
     end
 
     function mkopened(flavor, color)
-        local n = "st-oxyd" .. flavor .. color .. "-open"
+        local n = "st_oxyd" .. flavor .. color .. "_open"
         local names = {}
 
         for i=1, table.getn(blink_ovls) do
@@ -1462,14 +1462,14 @@
 
         -- compose these images into an animation
         frames = PingPong(BuildFrames(names, 100))
-        DefAnim(n.."-anim", frames, true)
+        DefAnim(n.."_anim", frames, true)
 
         -- and finally add a shadow to make the model complete
-        DefShModel(n, n.."-anim", shadow[flavor])
+        DefShModel(n, n.."_anim", shadow[flavor])
     end
 
     function mkpseudo(flavor, color)
-        local n = "st-oxyd" .. flavor .. "-pseudo" .. color
+        local n = "st_oxyd" .. flavor .. "_pseudo" .. color
         local names = {}
 
         for i=1, table.getn(pseudospots[color]) do
@@ -1484,21 +1484,21 @@
         elseif (color == -4) then
             frames = RepeatAnim(BuildFrames(names, 100),2)
         end
-        DefAnim(n.."-anim", frames, false)
+        DefAnim(n.."_anim", frames, false)
 
         -- and finally add a shadow to make the model complete
-        DefShModel(n, n.."-anim", shadow[flavor])
+        DefShModel(n, n.."_anim", shadow[flavor])
     end
 
     function mkoxyd(flavor)
-        DefStone("st-oxyd"..flavor, shadow[flavor])
-        DefShModel("st-likeoxyd"..flavor, "st-oxyd"..flavor, shadow[flavor])
---        DefSolidStone("st-likeoxyd"..flavor, "st-oxyd"..flavor)
-        img = DefImage("st-oxyd"..flavor.."-open")
-        DefShModel("st-likeoxyd"..flavor.."-open", img, shadow[flavor])
+        DefStone("st_oxyd"..flavor, shadow[flavor])
+        DefShModel("st_fake_oxyd"..flavor, "st_oxyd"..flavor, shadow[flavor])
+--        DefSolidStone("st_fake_oxyd"..flavor, "st_oxyd"..flavor)
+        img = DefImage("st_oxyd"..flavor.."_open")
+        DefShModel("st_fake_oxyd"..flavor.."_open", img, shadow[flavor])
 
-        local fadein = "oxyd"..flavor.."-fadein"
-        local fadeout= "oxyd"..flavor.."-fadeout"
+        local fadein = "oxyd"..flavor.."_fadein"
+        local fadeout= "oxyd"..flavor.."_fadeout"
         DefAnim(fadein, fopening[flavor])
         DefAnim(fadeout, fclosing[flavor])
 
@@ -1519,31 +1519,31 @@
 
     -- flavors 'e'
     for color = 0, num_colors - 1 do
-        DefOverlay("st-oxyde"..color.."-peep", {"st-oxydb-open", colorspots[color+1], "st-oxyde"})
-        DefShModel("st-oxyde"..color, "st-oxyde"..color.."-peep", "sh-round")
-        DefAlias("st-oxyde"..color.."-opening", "st-oxydb"..color.."-opening")
-        DefAlias("st-oxyde"..color.."-closing", "st-oxydb"..color.."-closing")
-        DefAlias("st-oxyde"..color.."-blink", "st-oxydb"..color.."-blink")
-        DefAlias("st-oxyde"..color.."-open", "st-oxydb"..color.."-open")
+        DefOverlay("st_oxyde"..color.."_peep", {"st_oxydb_open", colorspots[color+1], "st_oxyde"})
+        DefShModel("st_oxyde"..color, "st_oxyde"..color.."_peep", "sh-round")
+        DefAlias("st_oxyde"..color.."_opening", "st_oxydb"..color.."_opening")
+        DefAlias("st_oxyde"..color.."_closing", "st_oxydb"..color.."_closing")
+        DefAlias("st_oxyde"..color.."_blink", "st_oxydb"..color.."_blink")
+        DefAlias("st_oxyde"..color.."_open", "st_oxydb"..color.."_open")
     end
-    DefAlias("st-oxyde", "st-oxydb")
-    DefAlias("st-likeoxyde", "st-oxydb")
-    DefAlias("st-likeoxyde-open", "st-likeoxydb-open")
-    DefAlias("st-oxyde-3-opening", "st-oxydb-3-opening")
-    DefAlias("st-oxyde-pseudo-3", "st-oxydb-pseudo-3")
-    DefAlias("st-oxyde-3-closing", "st-oxydb-3-closing")
-    DefOverlay("st-oxyde-3-peep", {"st-oxydb-open", colorspots[97], "st-oxyde"})
-    DefShModel("st-oxyde-3", "st-oxyde-3-peep", "sh-round")
-    DefAlias("st-oxyde-4-opening", "st-oxydb-4-opening")
-    DefAlias("st-oxyde-pseudo-4", "st-oxydb-pseudo-4")
-    DefAlias("st-oxyde-4-closing", "st-oxydb-4-closing")
-    DefOverlay("st-oxyde-4-peep", {"st-oxydb-open", colorspots[96], "st-oxyde"})
-    DefShModel("st-oxyde-4", "st-oxyde-4-peep", "sh-round")
+    DefAlias("st_oxyde", "st_oxydb")
+    DefAlias("st_fake_oxyde", "st_oxydb")
+    DefAlias("st_fake_oxyde_open", "st_fake_oxydb_open")
+    DefAlias("st_oxyde_3_opening", "st_oxydb_3_opening")
+    DefAlias("st_oxyde_pseudo_3", "st_oxydb_pseudo_3")
+    DefAlias("st_oxyde_3_closing", "st_oxydb_3_closing")
+    DefOverlay("st_oxyde_3_peep", {"st_oxydb_open", colorspots[97], "st_oxyde"})
+    DefShModel("st_oxyde_3", "st_oxyde_3_peep", "sh-round")
+    DefAlias("st_oxyde_4_opening", "st_oxydb_4_opening")
+    DefAlias("st_oxyde_pseudo_4", "st_oxydb_pseudo_4")
+    DefAlias("st_oxyde_4_closing", "st_oxydb_4_closing")
+    DefOverlay("st_oxyde_4_peep", {"st_oxydb_open", colorspots[96], "st_oxyde"})
+    DefShModel("st_oxyde_4", "st_oxyde_4_peep", "sh-round")
 end
 
 -- st-coffee --
 do
-    DefAlias("st_magic_oxydc", "st-oxydc")
+    DefAlias("st_magic_oxydc", "st_oxydc")
 end
 
 -- st-doorh, st-doorv --
@@ -1576,7 +1576,7 @@
 -- st-door_a --
 do
     DefAlias("st-door_a-open", "st_grate_cross")
-    DefAlias("st-door_a-closed", "st-oxyda")
+    DefAlias("st-door_a-closed", "st_oxyda")
     local f = BuildFrames({"st-door_a-closed", "st-door_a-open"},60)
     DefAnim("st-door_a-opening", f)
     DefAnim("st-door_a-closing", ReverseFrames(f))
@@ -1603,26 +1603,26 @@
 
 -- st-fakeoxyda --
 do
-    DefAlias("st_magic_oxyda", "st-oxyda")
+    DefAlias("st_magic_oxyda", "st_oxyda")
 end
 
--- st-fart --
+-- st_quake --
 do
-    DefStone("st-fart", "sh-round", {filename="st-oxydb"})
-    DefAnimImages("farting",
-        RepeatAnim(PingPong(BuildFrames(FrameNames("st-fakeoxyd-blink", 1,4),50))))
-    DefRoundStone("st-farting", "farting")
+    DefStone("st_quake", "sh-round", {filename="st_oxydb"})
+    DefAnimImages("quaking",
+        RepeatAnim(PingPong(BuildFrames(FrameNames("st_fakeoxyd_blink", 1,4),50))))
+    DefRoundStone("st_quaking", "quaking")
 
-    namelist = DefSubimages("st-fart-break",{h=6})
-    DefAnim("fartbreak-anim", BuildFrames(namelist,50))
-    DefRoundStone("st-fartbreak-anim", "fartbreak-anim")
+    namelist = DefSubimages("st_quake_break",{h=6})
+    DefAnim("quakebreak_anim", BuildFrames(namelist,50))
+    DefRoundStone("st_quakebreak_anim", "quakebreak_anim")
 end
 
 -- st-spitter --
 do
     DefAlias ("st-spitter", "st-timeswitch")
-    DefAlias ("st-spitter-loading", "st-farting")
-    DefAlias ("st-spitter-spitting", "st-farting")
+    DefAlias ("st-spitter-loading", "st_quaking")
+    DefAlias ("st-spitter-spitting", "st_quaking")
 end
 
 ---------------------------

Modified: trunk/src/stones/FakeStone.cc
===================================================================
--- trunk/src/stones/FakeStone.cc	2009-02-03 22:44:34 UTC (rev 1506)
+++ trunk/src/stones/FakeStone.cc	2009-02-03 22:51:35 UTC (rev 1507)
@@ -75,16 +75,16 @@
         switch (typ) {
             case QUAKE:
                 if (state == ACTIVE)
-                    set_anim("st-farting");
+                    set_anim("st_quaking");
                 else
-                    set_model("st-fart");
+                    set_model("st_quake");
                 break;
             case OXYDA:
             case OXYDB:
             case OXYDC:
             case OXYDD:
             case OXYDE:
-                set_model(ecl::strf("st-like%s%s", getFlavor().c_str(), state == IDLE ? "" : "-open").c_str());
+                set_model(ecl::strf("st_fake_%s%s", getFlavor().c_str(), state == IDLE ? "" : "_open").c_str());
                 break;
         }
     }

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2009-02-03 22:44:34 UTC (rev 1506)
+++ trunk/src/stones/OxydStone.cc	2009-02-03 22:51:35 UTC (rev 1507)
@@ -884,7 +884,7 @@
                 state = OPEN_PAIR;
                 std::string flavor(getAttr("flavor"));
                 string color(getDefaultedAttr("oxydcolor", 0));
-                set_model(string("st-oxyd") + flavor + color + "-open");
+                set_model(string("st_oxyd") + flavor + color + "_open");
                 objFlags &= ~OBJBIT_OPENPAIR;
             }
             return Value();
@@ -991,9 +991,9 @@
         std::string flavor(getDefaultedAttr("flavor", "a"));
         Value c = getAttr("oxydcolor");
         if (flavor == "e" && !isInitial && (int)c != FAKE)
-            set_model(std::string("st-oxyd") + flavor + (std::string)c);
+            set_model(std::string("st_oxyd") + flavor + (std::string)c);
         else
-            set_model(std::string("st-oxyd") + flavor);
+            set_model(std::string("st_oxyd") + flavor);
         
     }
     
@@ -1087,7 +1087,7 @@
         string flavor(getDefaultedAttr("flavor","a"));
         string color(getDefaultedAttr("oxydcolor", 0));
     
-        string basemodelname = string("st-oxyd") + flavor;
+        string basemodelname = string("st_oxyd") + flavor;
         string modelname = basemodelname + color;
     
         iState oldState = (iState)state;
@@ -1104,12 +1104,12 @@
                     didShuffle = true;
                 }
                 setClosedModel();
-//                set_model(string("st-oxyd")+flavor);
+//                set_model(string("st_oxyd")+flavor);
                 break;
         
             case OPEN_SINGLE:
                 if ((int)getAttr("oxydcolor") <= QUAKE) {
-                    set_anim(basemodelname + "-pseudo" + color);
+                    set_anim(basemodelname + "_pseudo" + color);
                     if ((int)getAttr("oxydcolor") == QUAKE) {
                         closeAllStandardOxyds();
                         didQuake = true;
@@ -1118,16 +1118,16 @@
                         sound_event("shuffle");
                     }
                 } else
-                    set_model(modelname + "-blink");
+                    set_model(modelname + "_blink");
                 break;
         
             case OPEN_PAIR:
                 if (oldState == CLOSED) {
                     sound_event("oxydopen");
                     sound_event("oxydopened");
-                    set_anim(modelname+"-opening");
+                    set_anim(modelname+"_opening");
                 } else {
-                    set_model(modelname + "-open");
+                    set_model(modelname + "_open");
                 }
                 // If this was the last closed oxyd stone, finish the level
                 if (find_if(levelOxyds.begin(),levelOxyds.end(),not_open)
@@ -1139,7 +1139,7 @@
             case OPENING:
                 sound_event("oxydopen");
                 if (oldState == CLOSED)
-                    set_anim(modelname + "-opening");
+                    set_anim(modelname + "_opening");
                 else if (oldState == CLOSING)
                     get_model()->reverse();
         
@@ -1155,7 +1155,7 @@
                 if (oldState == OPENING)
                     get_model()->reverse();
                 else if (oldState == OPEN_SINGLE || oldState == OPEN_PAIR) {
-                    set_anim(modelname + "-closing");
+                    set_anim(modelname + "_closing");
                 }
                 break;
         }

Modified: trunk/src/stones/OxydStone.hh
===================================================================
--- trunk/src/stones/OxydStone.hh	2009-02-03 22:44:34 UTC (rev 1506)
+++ trunk/src/stones/OxydStone.hh	2009-02-03 22:51:35 UTC (rev 1507)
@@ -38,7 +38,7 @@
 
 \subsection oxyda Attributes
 
-- \b flavor      "a", "b", "c", or "d"
+- \b flavor      "a", "b", "c", "d", or "e"
 - \b color       number between 0 and 7
 
 \subsection oxydm Messages
@@ -48,10 +48,10 @@
 - \b trigger     open the stone
 
 <table><tr>
-<td>\image html st-oxyda.png "flavor A"
-<td>\image html st-oxydb.png "flavor B"
-<td>\image html st-oxydc.png "flavor C"
-<td>\image html st-oxydd.png "flavor D"
+<td>\image html st_oxyda.png "flavor A"
+<td>\image html st_oxydb.png "flavors B and E"
+<td>\image html st_oxydc.png "flavor C"
+<td>\image html st_oxydd.png "flavor D"
 </table>
 */
 

Modified: trunk/src/stones/QuakeStone.cc
===================================================================
--- trunk/src/stones/QuakeStone.cc	2009-02-03 22:44:34 UTC (rev 1506)
+++ trunk/src/stones/QuakeStone.cc	2009-02-03 22:51:35 UTC (rev 1507)
@@ -78,10 +78,10 @@
     
     void QuakeStone::init_model() {
         switch (state) {
-            case IDLE:     set_model("st-fart"); break;
+            case IDLE:     set_model("st_quake"); break;
             case ACTIVEBREAKING:
-            case ACTIVE:   set_anim("st-farting"); break;
-            case BREAKING: set_anim("st-fartbreak-anim"); break;
+            case ACTIVE:   set_anim("st_quaking"); break;
+            case BREAKING: set_anim("st_quakebreak_anim"); break;
         }
     }
     



From andreasl at mail.berlios.de  Wed Feb  4 00:53:58 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Wed, 4 Feb 2009 00:53:58 +0100
Subject: [Enigma-game-svn] r1508 - in trunk: data data/levels/lib
	doc/reference
Message-ID: <200902032353.n13NrwCi018253@sheep.berlios.de>

Author: andreasl
Date: 2009-02-04 00:53:51 +0100 (Wed, 04 Feb 2009)
New Revision: 1508

Modified:
   trunk/data/levels/lib/libmap.xml
   trunk/data/models-2d.lua
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk:
 - completed half-forgotten example in refman
 - added error message to libmap
 - fixed r1507: Pseudo oxyds in flavor "e" are now shown correctly



Modified: trunk/data/levels/lib/libmap.xml
===================================================================
--- trunk/data/levels/lib/libmap.xml	2009-02-03 22:51:35 UTC (rev 1507)
+++ trunk/data/levels/lib/libmap.xml	2009-02-03 23:53:51 UTC (rev 1508)
@@ -194,6 +194,8 @@
     end
   elseif type(posarg) == "table" then
     lib.map.paste(map1, map2, po(posarg))
+  else
+    error("lib.map.paste: Expected position, got "..type(posarg)..".", 2)
   end
 end
 

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-03 22:51:35 UTC (rev 1507)
+++ trunk/data/models-2d.lua	2009-02-03 23:53:51 UTC (rev 1508)
@@ -1529,16 +1529,16 @@
     DefAlias("st_oxyde", "st_oxydb")
     DefAlias("st_fake_oxyde", "st_oxydb")
     DefAlias("st_fake_oxyde_open", "st_fake_oxydb_open")
-    DefAlias("st_oxyde_3_opening", "st_oxydb_3_opening")
-    DefAlias("st_oxyde_pseudo_3", "st_oxydb_pseudo_3")
-    DefAlias("st_oxyde_3_closing", "st_oxydb_3_closing")
-    DefOverlay("st_oxyde_3_peep", {"st_oxydb_open", colorspots[97], "st_oxyde"})
-    DefShModel("st_oxyde_3", "st_oxyde_3_peep", "sh-round")
-    DefAlias("st_oxyde_4_opening", "st_oxydb_4_opening")
-    DefAlias("st_oxyde_pseudo_4", "st_oxydb_pseudo_4")
-    DefAlias("st_oxyde_4_closing", "st_oxydb_4_closing")
-    DefOverlay("st_oxyde_4_peep", {"st_oxydb_open", colorspots[96], "st_oxyde"})
-    DefShModel("st_oxyde_4", "st_oxyde_4_peep", "sh-round")
+    DefAlias("st_oxyde-3_opening", "st_oxydb-3_opening")
+    DefAlias("st_oxyde_pseudo-3", "st_oxydb_pseudo-3")
+    DefAlias("st_oxyde-3_closing", "st_oxydb-3_closing")
+    DefOverlay("st_oxyde-3_peep", {"st_oxydb_open", colorspots[97], "st_oxyde"})
+    DefShModel("st_oxyde-3", "st_oxyde-3_peep", "sh-round")
+    DefAlias("st_oxyde-4_opening", "st_oxydb-4_opening")
+    DefAlias("st_oxyde_pseudo-4", "st_oxydb_pseudo-4")
+    DefAlias("st_oxyde-4_closing", "st_oxydb-4_closing")
+    DefOverlay("st_oxyde-4_peep", {"st_oxydb_open", colorspots[96], "st_oxyde"})
+    DefShModel("st_oxyde-4", "st_oxyde-4_peep", "sh-round")
 end
 
 -- st-coffee --

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-03 22:51:35 UTC (rev 1507)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-03 23:53:51 UTC (rev 1508)
@@ -11063,7 +11063,7 @@
 one tile right beside the second marble @samp{@@2}, which is named
 @samp{marble2}:
 @example
-mymap[no["marble2"] + @{1,0@}]
+mymap[no["marble2"] + @{1,0@}] = "  "
 @end example
 Note that the reference to @samp{marble2} only works after the marble has been
 set.



From ral at mail.berlios.de  Wed Feb  4 01:35:26 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 4 Feb 2009 01:35:26 +0100
Subject: [Enigma-game-svn] r1509 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 data/schemas src src/items src/stones
Message-ID: <200902040035.n140ZQbk021522@sheep.berlios.de>

Author: ral
Date: 2009-02-04 01:35:22 +0100 (Wed, 04 Feb 2009)
New Revision: 1509

Added:
   trunk/data/gfx32/it_bomb_black.png
   trunk/data/gfx32/it_bomb_black_burning.png
   trunk/data/gfx32/it_bomb_white.png
   trunk/data/gfx32/it_dynamite.png
   trunk/data/gfx32/it_dynamite_burning.png
   trunk/data/gfx32/it_white_burning.png
   trunk/data/gfx32/st_dispenser_bombblackpng
   trunk/data/gfx32/st_dispenser_bombwhite.png
   trunk/data/gfx32/st_dispenser_dynamite.png
   trunk/data/gfx40/it_bomb_black.png
   trunk/data/gfx40/it_bomb_black_burning.png
   trunk/data/gfx40/it_bomb_white.png
   trunk/data/gfx40/it_bomb_white_burning.png
   trunk/data/gfx40/it_dynamite.png
   trunk/data/gfx40/it_dynamite_burning.png
   trunk/data/gfx40/st_dispenser_bombblack.png
   trunk/data/gfx40/st_dispenser_bombwhite.png
   trunk/data/gfx40/st_dispenser_dynamite.png
   trunk/data/gfx48/it_bomb_black.png
   trunk/data/gfx48/it_bomb_black_burning.png
   trunk/data/gfx48/it_bomb_white.png
   trunk/data/gfx48/it_bomb_white_burning.png
   trunk/data/gfx48/it_dynamite.png
   trunk/data/gfx48/it_dynamite_burning.png
   trunk/data/gfx48/st_dispenser_bombblack.png
   trunk/data/gfx48/st_dispenser_bombwhite.png
   trunk/data/gfx48/st_dispenser_dynamite.png
   trunk/src/items/Bomb.cc
   trunk/src/items/Bomb.hh
   trunk/src/items/Dynamite.cc
   trunk/src/items/Dynamite.hh
   trunk/src/stones/DispenserStone.cc
   trunk/src/stones/DispenserStone.hh
Removed:
   trunk/data/gfx32/it-blackbomb-burning.png
   trunk/data/gfx32/it-blackbomb.png
   trunk/data/gfx32/it-dynamite-burning.png
   trunk/data/gfx32/it-dynamite.png
   trunk/data/gfx32/it-whitebomb-burning.png
   trunk/data/gfx32/it-whitebomb.png
   trunk/data/gfx32/st-bombs.png
   trunk/data/gfx32/st-dynamite.png
   trunk/data/gfx32/st-whitebombs.png
   trunk/data/gfx40/it-blackbomb-burning.png
   trunk/data/gfx40/it-blackbomb.png
   trunk/data/gfx40/it-dynamite-burning.png
   trunk/data/gfx40/it-dynamite.png
   trunk/data/gfx40/it-whitebomb-burning.png
   trunk/data/gfx40/it-whitebomb.png
   trunk/data/gfx40/st-bombs.png
   trunk/data/gfx40/st-dynamite.png
   trunk/data/gfx40/st-whitebombs.png
   trunk/data/gfx48/it-blackbomb-burning.png
   trunk/data/gfx48/it-blackbomb.png
   trunk/data/gfx48/it-dynamite-burning.png
   trunk/data/gfx48/it-dynamite.png
   trunk/data/gfx48/it-whitebomb-burning.png
   trunk/data/gfx48/it-whitebomb.png
   trunk/data/gfx48/st-bombs.png
   trunk/data/gfx48/st-dynamite.png
   trunk/data/gfx48/st-whitebombs.png
   trunk/src/stones_simple.cc
Modified:
   trunk/data/api1init.lua
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Makefile.am
   trunk/src/items.cc
   trunk/src/items.hh
   trunk/src/items/BurnableItem.cc
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/ox_extra.cc
   trunk/src/ox_magnum.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/stones.cc
   trunk/src/stones.hh
   trunk/src/stones/ShogunStone.cc
   trunk/src/stones/SimpleStones.cc
   trunk/src/stones/SimpleStones.hh
   trunk/src/stones_internal.hh
   trunk/src/world.cc
Log:
Trunk 1.1: new API reengineering
- reengineering bomb dispenser stone:
  - st-bombs -> st_dispenser, st_dispenser_bombblack
  - add support for white bombs and dynamite:
    - st_dispenser_bombwhite
    - st_dispenser_dynamite
  - attribute flavor identical to suffix
- fix bomb item: set correct inventory model


Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/data/api1init.lua	2009-02-04 00:35:22 UTC (rev 1509)
@@ -134,6 +134,8 @@
     it_bag = "it-bag",
     it_blocker = "it-blocker",
     it_blocker_new = "it-blocker-new",
+    it_bomb_black = "it-blackbomb",
+    it_bomb_white = "it-whitebomb",
     it_bottle_idle = "it-booze",
     it_bottle_broken = "it-booze-broken",
     it_brake = "it-brake",
@@ -154,13 +156,17 @@
     it_crack_m = "it-crack2",
     it_crack_l = "it-crack3",
     it_cross = "it-cross",
+    it_death = "it-death",
     it_document = "it-document",
     it_drop = "it-drop",
+    it_dynamite = "it-dynamite",
+    it_explosion_nil = "it-explosion1",
+    it_explosion_hollow = "it-explosion2",
+    it_explosion_debris = "it-explosion3",    
     it_extinguisher_empty = "it-extinguisher_empty",
     it_extinguisher_medium = "it-extinguisher_medium",
     it_extinguisher_full = "it-extinguisher",
     it_extralife = "it-extralife",
-    it_death = "it-death",
     it_flag_black = "it-flagblack",
     it_flag_white = "it-flagwhite",
     it_floppy = "it-floppy",
@@ -309,6 +315,7 @@
     st_disco_light = "st-disco-light",
     st_disco_medium = "st-disco-medium",
     st_disco_dark = "st-disco-dark",
+    st_dispenser_bombblack = "st-bombs",
     st_door_a = "st-door_a",
     st_door_b = "st-door_b",
     st_door_c = "st-door_c",

Deleted: trunk/data/gfx32/it-blackbomb-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-blackbomb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-dynamite-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-dynamite.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-whitebomb-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-whitebomb.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/it_bomb_black.png (from rev 1502, trunk/data/gfx32/it-blackbomb.png)

Copied: trunk/data/gfx32/it_bomb_black_burning.png (from rev 1502, trunk/data/gfx32/it-blackbomb-burning.png)

Copied: trunk/data/gfx32/it_bomb_white.png (from rev 1502, trunk/data/gfx32/it-whitebomb.png)

Copied: trunk/data/gfx32/it_dynamite.png (from rev 1502, trunk/data/gfx32/it-dynamite.png)

Copied: trunk/data/gfx32/it_dynamite_burning.png (from rev 1502, trunk/data/gfx32/it-dynamite-burning.png)

Copied: trunk/data/gfx32/it_white_burning.png (from rev 1502, trunk/data/gfx32/it-whitebomb-burning.png)

Deleted: trunk/data/gfx32/st-bombs.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-dynamite.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-whitebombs.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/st_dispenser_bombblackpng (from rev 1508, trunk/data/gfx32/st-bombs.png)

Copied: trunk/data/gfx32/st_dispenser_bombwhite.png (from rev 1508, trunk/data/gfx32/st-whitebombs.png)

Copied: trunk/data/gfx32/st_dispenser_dynamite.png (from rev 1508, trunk/data/gfx32/st-dynamite.png)

Deleted: trunk/data/gfx40/it-blackbomb-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-blackbomb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-dynamite-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-dynamite.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-whitebomb-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-whitebomb.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/it_bomb_black.png (from rev 1502, trunk/data/gfx40/it-blackbomb.png)

Copied: trunk/data/gfx40/it_bomb_black_burning.png (from rev 1502, trunk/data/gfx40/it-blackbomb-burning.png)

Copied: trunk/data/gfx40/it_bomb_white.png (from rev 1502, trunk/data/gfx40/it-whitebomb.png)

Copied: trunk/data/gfx40/it_bomb_white_burning.png (from rev 1502, trunk/data/gfx40/it-whitebomb-burning.png)

Copied: trunk/data/gfx40/it_dynamite.png (from rev 1502, trunk/data/gfx40/it-dynamite.png)

Copied: trunk/data/gfx40/it_dynamite_burning.png (from rev 1502, trunk/data/gfx40/it-dynamite-burning.png)

Deleted: trunk/data/gfx40/st-bombs.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-dynamite.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-whitebombs.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/st_dispenser_bombblack.png (from rev 1508, trunk/data/gfx40/st-bombs.png)

Copied: trunk/data/gfx40/st_dispenser_bombwhite.png (from rev 1508, trunk/data/gfx40/st-whitebombs.png)

Copied: trunk/data/gfx40/st_dispenser_dynamite.png (from rev 1508, trunk/data/gfx40/st-dynamite.png)

Deleted: trunk/data/gfx48/it-blackbomb-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-blackbomb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-dynamite-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-dynamite.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-whitebomb-burning.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-whitebomb.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_bomb_black.png (from rev 1502, trunk/data/gfx48/it-blackbomb.png)

Copied: trunk/data/gfx48/it_bomb_black_burning.png (from rev 1502, trunk/data/gfx48/it-blackbomb-burning.png)

Copied: trunk/data/gfx48/it_bomb_white.png (from rev 1502, trunk/data/gfx48/it-whitebomb.png)

Copied: trunk/data/gfx48/it_bomb_white_burning.png (from rev 1502, trunk/data/gfx48/it-whitebomb-burning.png)

Copied: trunk/data/gfx48/it_dynamite.png (from rev 1502, trunk/data/gfx48/it-dynamite.png)

Copied: trunk/data/gfx48/it_dynamite_burning.png (from rev 1502, trunk/data/gfx48/it-dynamite-burning.png)

Deleted: trunk/data/gfx48/st-bombs.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-dynamite.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-whitebombs.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/st_dispenser_bombblack.png (from rev 1508, trunk/data/gfx48/st-bombs.png)

Copied: trunk/data/gfx48/st_dispenser_bombwhite.png (from rev 1508, trunk/data/gfx48/st-whitebombs.png)

Copied: trunk/data/gfx48/st_dispenser_dynamite.png (from rev 1508, trunk/data/gfx48/st-dynamite.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/data/models-2d.lua	2009-02-04 00:35:22 UTC (rev 1509)
@@ -451,13 +451,13 @@
 do
     itemlist = {
         "it_bag",
-        "it-blackbomb",
+        "it_bomb_black",
         "it-blocker",
         "it_bottle_idle",
         "it_bottle_broken",
         "it_document",
         "it_drop",
-        "it-dynamite",
+        "it_dynamite",
         "it_flag_black",
         "it_flag_white",
         "it_odometer",
@@ -470,7 +470,7 @@
         "it_spring_drop",
         "it_surprise",
         "it_weight",
-        "it-whitebomb"
+        "it_bomb_white"
     }
 
     DefImages(itemlist)
@@ -569,23 +569,23 @@
 
 -- Burning black bomb --
 do
-    local images = DefSubimages("it-blackbomb-burning", {h=9})
+    local images = DefSubimages("it_bomb_black_burning", {h=9})
     local frames = BuildFrames(images, 100)
-    DefAnim("it-blackbomb-burning", frames)
+    DefAnim("it_bomb_black_burning", frames)
 end
 
 -- Burning white bomb --
 do
-    local images = DefSubimages("it-whitebomb-burning", {h=9})
+    local images = DefSubimages("it_bomb_white_burning", {h=9})
     local frames = BuildFrames(images, 100)
-    DefAnim("it-whitebomb-burning", frames)
+    DefAnim("it_bomb_white_burning", frames)
 end
 
 -- Burning dynamite --
 do
-    local images = DefSubimages("it-dynamite-burning", {h=15})
+    local images = DefSubimages("it_dynamite_burning", {h=15})
     local frames = BuildFrames(images, 100)
-    DefAnim("it-dynamite-burning", frames)
+    DefAnim("it_dynamite_burning", frames)
 end
 
 -- Burning Floor --
@@ -630,9 +630,7 @@
 -- Explosion --
 do
     DefAnimImages("expl", {{"expl", 50}})
-    DefAlias("it-explosion1", "expl")
-    DefAlias("it-explosion2", "expl")
-    DefAlias("it-explosion3", "expl")
+    DefAlias("it_explosion", "expl")
 end
 
 -- it-magnet --
@@ -945,17 +943,22 @@
     DefRoundStoneWithAnim ("st-death", 3, 140)
 end
 
+-- st_yinyang --
+do
+    DefRoundStoneWithAnim("st_yinyang", 6, 140)
+end
+
 -- st-dynamite, st-bombs, st-whitebombs --
 do
     function make_bombstone(name)
         local images = DefSubimages(name, {h=7})
         DefRoundStone(name, name.."1")
-        DefAnim(name.."-anim", BuildFrames(images,50))
+        DefAnim(name.."_breaking", BuildFrames(images,50))
     end
 
-    make_bombstone("st-bombs")
-    make_bombstone("st-dynamite")
-    make_bombstone("st-whitebombs")
+    make_bombstone("st_dispenser_bombblack")
+    make_bombstone("st_dispenser_dynamite")
+    make_bombstone("st_dispenser_bombwhite")
 end
 
 -- st-flash --

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/data/schemas/objects.xml	2009-02-04 00:35:22 UTC (rev 1509)
@@ -98,7 +98,7 @@
     <msg name="crack" type="nil"/>
     <msg name="darken" type="nil"/>
     <msg name="disconnect" type="nil"/>
-    <msg name="expl" type="nil"/>
+    <msg name="explode" type="nil"/>
     <msg name="extinguish" type="nil"/>
     <msg name="fire" type="nil"/>
     <msg name="flip" type="nil"/>
@@ -385,6 +385,22 @@
     <object name="it_bag"/>
     <object name="it_blocker_new" init="true">
     </object>
+    <object name="it_bomb">
+      <attr name="color"/>
+      <msg name="ignite"/>
+      <msg name="heat"/>
+      <msg name="explode"/>
+      <msg name="_explosion"/>
+      <msg name="_bombstone"/>
+    </object>
+    <object name="it_bomb_black">
+      <attr name="color" value="0"/>
+    </object>
+    <object name="it_bomb_black_burning" init="true"/>
+    <object name="it_bomb_white">
+      <attr name="color" value="1"/>
+    </object>
+    <object name="it_bomb_white_burning" init="true"/>
     <object name="it_bottle">
       <msg name="_brush"/>
     </object>
@@ -468,6 +484,32 @@
     <object name="it_extinguisher">
       <attr name="state" max="2"/>
     </object>
+    <object name="it_dynamite">
+      <attr name="state"/>
+      <msg name="ignite"/>
+      <msg name="heat"/>
+      <msg name="explode"/>
+      <msg name="_explosion"/>
+      <msg name="_bombstone"/>
+    </object>
+    <object name="it_dynamite_burning">
+      <attr name="state" value="1"/>
+    </object>
+    <object name="it_explosion">
+      <attr name="state" max="3" rw="r"/>
+    </object>
+    <object name="it_explosion_nil">
+      <attr name="state" value="0"/>
+    </object>
+    <object name="it_explosion_hollow">
+      <attr name="state" value="1"/>
+    </object>
+    <object name="it_explosion_crack">
+      <attr name="state" value="2"/>
+    </object>
+    <object name="it_explosion_debris">
+      <attr name="state" value="3"/>
+    </object>
     <object name="it_extinguisher_empty">
       <attr name="state" value="0"/>
     </object>
@@ -1080,6 +1122,20 @@
     <object name="st_disco_dark">
       <attr name="state" value="2"/>
     </object>
+    <object name="st_dispenser">
+      <attr name="flavor" default="bombblack" rw="r"/>
+      <msg name="_explosion"/>
+      <msg name="_bombstone"/>
+    </object>
+    <object name="st_dispenser_bombblack">
+      <attr name="flavor" value="bombblack"/>
+    </object>
+    <object name="st_dispenser_bombwhite">
+      <attr name="flavor" value="bombwhite"/>
+    </object>
+    <object name="st_dispenser_dynamite">
+      <attr name="flavor" value="dynamite"/>
+    </object>
     <object name="st_door">
       <attr name="faces" default="nesw"/>
       <attr name="flavor"/>
@@ -1734,5 +1790,10 @@
     </object>
     <object name="st_woven"/>
     <object name="st_yellow"/>
+    <object name="st_yinyang">
+    </object>
+    <object name="st_yinyang_active">
+      <attr name="state" value="1"/>
+    </object>
   </zoo>
 </objects>

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/Makefile.am	2009-02-04 00:35:22 UTC (rev 1509)
@@ -124,7 +124,6 @@
 	stones.cc 		\
 	stones.hh 		\
 	stones_internal.hh 	\
-	stones_simple.cc 	\
 	Utf8ToXML.cc		\
 	Utf8ToXML.hh		\
 	util.cc 		\
@@ -208,6 +207,8 @@
 	items/BrakeItem.hh	\
 	items/BlockerItem.cc	\
 	items/BlockerItem.hh	\
+	items/Bomb.cc		\
+	items/Bomb.hh		\
 	items/Bottle.cc		\
 	items/Bottle.hh		\
 	items/BurnableItem.cc	\
@@ -224,6 +225,8 @@
 	items/DocumentItem.hh	\
 	items/Drop.cc		\
 	items/Drop.hh		\
+	items/Dynamite.cc	\
+	items/Dynamite.hh	\
 	items/Extinguisher.cc	\
 	items/Extinguisher.hh	\
 	items/ExtraLife.cc	\
@@ -312,6 +315,8 @@
 	stones/DeathStone.hh	\
 	stones/DiscoStone.cc	\
 	stones/DiscoStone.hh	\
+	stones/DispenserStone.cc	\
+	stones/DispenserStone.hh	\
 	stones/Door.cc		\
 	stones/Door.hh		\
 	stones/FakeStone.cc	\

Added: trunk/src/items/Bomb.cc
===================================================================
--- trunk/src/items/Bomb.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/Bomb.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -0,0 +1,134 @@
+/*
+ * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "items/Bomb.hh"
+//#include "errors.hh"
+//#include "main.hh"
+#include "server.hh"
+#include "world.hh"
+
+namespace enigma {
+
+    Bomb::Bomb(int color, bool burning) {
+        Item::setAttr("color", color);
+        if (burning)
+            state = BURNING;
+    }
+    
+    std::string Bomb::getClass() const {
+        return "it_bomb";
+    }
+    
+    void Bomb::setAttr(const string& key, const Value &val) {
+        if (key == "color") {
+            Item::setAttr("color", val);
+            if (isDisplayable())
+                init_model();
+            return;
+        }
+        Item::setAttr(key, val);
+    }
+    
+    Value Bomb::message(const Message &m) {
+        if (m.message == "ignite"  || m.message == "_explosion") {
+            if (isDisplayable())
+                burn();
+            return Value();
+        } else if (m.message == "explode" ) {
+            if (isDisplayable())
+                explode();
+            return Value();
+        } else if (m.message == "heat") {  // used by fire-system
+            if (isDisplayable())
+                burn();
+            return true;  // caught message -> no fire!
+        }
+        return Item::message(m);
+    }
+    
+    void Bomb::setState(int extState) {
+        if (state == IDLE && extState == 1) {
+            state = BURNING;
+            if (isDisplayable())
+                init_model();
+        }
+    }
+    
+    void Bomb::init_model() {
+        std::string color = (getAttr("color") == BLACK) ? "black" : "white";
+        if (state == IDLE) {
+            set_model(ecl::strf("it_bomb_%s", color.c_str()));
+        } else
+            set_anim(ecl::strf("it_bomb_%s_burning", color.c_str()));
+    }
+    
+    void Bomb::processLight(Direction d) {
+        explode();
+    }
+    
+    void Bomb::animcb() {
+        explode();
+    }
+    
+    std::string Bomb::get_inventory_model() {
+        std::string color = (getAttr("color") == BLACK) ? "black" : "white";
+        return ecl::strf("it_bomb_%s", color.c_str());        
+    }
+    
+    void Bomb::on_stonehit(Stone *st) {
+        switch (server::GameCompatibility) {
+            case GAMET_OXYD1:
+            case GAMET_OXYDMAGNUM:
+                if (!st->isKind("st_box_wood"))
+                    // st-wood does not cause bombs to explode
+                    explode();
+                break;
+            default :
+                explode();
+                break;
+        }
+    }
+    
+    void Bomb::burn() {
+        if (state == IDLE) {
+            state = BURNING;
+            init_model();
+        }
+    }
+    
+    void Bomb::explode() {
+        GridPos p = get_pos();
+        Value vc = getAttr("color");
+        sound_event(vc == BLACK ? "blackbomb" : "whitebomb");
+        SendExplosionEffect(p, vc == BLACK ? EXPLOSION_BLACKBOMB : EXPLOSION_WHITEBOMB);  // may kill the bomb by another explosion1 set by brake
+        replace("it_explosion_debris");
+    }
+
+    DEF_ITEMTRAITSF(Bomb, "it_bomb", it_bomb, itf_static | itf_indestructible | itf_fireproof);
+
+    BOOT_REGISTER_START
+        BootRegister(new Bomb(0), "it_bomb");
+        BootRegister(new Bomb(0), "it_bomb_black");
+        BootRegister(new Bomb(0, true), "it_bomb_black_burning");
+        BootRegister(new Bomb(1), "it_bomb_white");
+        BootRegister(new Bomb(1, true), "it_bomb_white_burning");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/items/Bomb.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/items/Bomb.hh
===================================================================
--- trunk/src/items/Bomb.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/Bomb.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -0,0 +1,70 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef BOMBITEM_HH
+#define BOMBITEM_HH
+
+#include "items.hh"
+
+//#include "enigma.hh"
+
+namespace enigma {
+    /**
+     * 
+     */
+
+    class Bomb : public Item {
+        CLONEOBJ(Bomb);
+        DECL_ITEMTRAITS;
+
+    private:
+        enum iState {
+            IDLE       =  0,       ///< 
+            BURNING    =  1,       ///<  
+        };
+        
+    public:
+        Bomb(int color, bool burning =false);
+        
+        // Object interface
+        virtual std::string getClass() const;
+        virtual void setAttr(const string& key, const Value &val);
+        virtual Value message (const Message &m);
+
+        // StateObject interface
+        virtual void setState(int extState);
+
+        // GridObject interface
+        virtual void init_model();
+        virtual void processLight(Direction d);
+        
+        // ModelCallback interface
+        virtual void animcb();
+        
+        // Item interface
+        virtual std::string get_inventory_model();
+        virtual void on_stonehit(Stone *st);
+        
+    private:
+        void burn();
+        void explode();
+    };
+   
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/items/Bomb.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/items/BurnableItem.cc
===================================================================
--- trunk/src/items/BurnableItem.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/BurnableItem.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -53,7 +53,7 @@
     }
     
     void BurnableItem::init_model() {
-        if(state == OIL) {
+        if (state == OIL) {
             set_model(ecl::strf("it_burnable_oil%d", IntegerRand(1, 4)));  // TODO store and keep model subtyp!
         } else
             Item::init_model();

Added: trunk/src/items/Dynamite.cc
===================================================================
--- trunk/src/items/Dynamite.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/Dynamite.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -0,0 +1,113 @@
+/*
+ * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "items/Dynamite.hh"
+//#include "errors.hh"
+//#include "main.hh"
+#include "world.hh"
+
+namespace enigma {
+
+    Dynamite::Dynamite(int initState) {
+        state = initState;
+    }
+    
+    std::string Dynamite::getClass() const {
+        return "it_dynamite";
+    }
+    
+    Value Dynamite::message(const Message &m) {
+        if (m.message == "ignite" || m.message == "_explosion" || m.message == "_bombstone") {
+            if (isDisplayable())
+                burn();
+            return Value();
+        } else if (m.message == "explode") { // currently unused in c++ code
+            if (isDisplayable())
+                explode();
+            return Value();
+        } else if (m.message == "heat") {  // used by fire-system
+            if (isDisplayable())
+                burn();
+            return true;  // caught message -> no fire!
+        }
+        return Item::message(m);
+    }
+    
+    void Dynamite::setState(int extState) {
+        if (state == IDLE && extState == 1) {
+            state = BURNING;
+            if (isDisplayable())
+                init_model();
+        }
+    }
+    
+    void Dynamite::init_model() {
+        if (state == IDLE) {
+            set_model("it_dynamite");
+        } else
+            set_anim("it_dynamite_burning");
+    }
+    
+    void Dynamite::processLight(Direction d) {
+        burn();
+    }
+    
+    void Dynamite::animcb() {
+        explode();
+    }
+    
+    bool Dynamite::isStatic() const {
+        return state == BURNING;  // burning dynamite cannot be picked up
+    }
+    
+    void Dynamite::on_drop(Actor *a) {
+        burn();
+    }
+    
+    void Dynamite::burn() {
+        if (state == IDLE) {
+            state = BURNING;
+            init_model();
+        }
+    }
+    
+    void Dynamite::explode() {
+        GridPos p = get_pos();
+        SendExplosionEffect(p, EXPLOSION_DYNAMITE);
+        sound_event ("dynamite");
+        Floor *fl = GetFloor(p);
+        std::string flclass = fl->getClass();
+        if (flclass == "fl_space") {
+            replace("it_explosion_hollow");
+        } else if (flclass == "fl_ice") {
+            replace("it_explosion_crack");
+        } else {
+            replace("it_explosion_hollow");
+        }
+    }
+    
+    DEF_ITEMTRAITSF(Dynamite, "it_dynamite", it_dynamite, itf_indestructible | itf_fireproof);
+
+    BOOT_REGISTER_START
+        BootRegister(new Dynamite(0), "it_dynamite");
+        BootRegister(new Dynamite(1), "it_dynamite_burning");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/items/Dynamite.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/items/Dynamite.hh
===================================================================
--- trunk/src/items/Dynamite.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/Dynamite.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -0,0 +1,70 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef DYNAMITEITEM_HH
+#define DYNAMITEITEM_HH
+
+#include "items.hh"
+
+//#include "enigma.hh"
+
+namespace enigma {
+    /**
+     * 
+     */
+
+    class Dynamite : public Item {
+        CLONEOBJ(Dynamite);
+        DECL_ITEMTRAITS;
+
+    private:
+        enum iState {
+            IDLE       =  0,       ///< 
+            BURNING    =  1,       ///<  
+        };
+        
+    public:
+        Dynamite(int initState);
+        
+        // Object interface
+        virtual std::string getClass() const;
+        virtual Value message (const Message &m);
+
+        // StateObject interface
+        virtual void setState(int extState);
+
+        // GridObject interface
+        virtual void init_model();
+        virtual void processLight(Direction d);
+        
+        // ModelCallback interface
+        virtual void animcb();
+        
+        // Item interface
+        virtual bool isStatic() const;
+        virtual void on_drop(Actor *a);
+        
+        
+    private:
+        void burn();
+        void explode();
+    };
+   
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/items/Dynamite.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/SimpleItems.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -116,6 +116,32 @@
     DEF_ITEMTRAITSF(Debris, "it_debris", it_debris,
                 itf_static | itf_animation | itf_indestructible | itf_fireproof);
     
+/* -------------------- Explosion -------------------- */
+
+    Explosion::Explosion(int strength) {
+        state = strength;
+    }
+    
+    void Explosion::setState(int extState) {
+        // no state writes
+    }
+    
+    void Explosion::animcb() { 
+        Floor *fl = GetFloor(get_pos());
+        if (state != 0 && fl->is_destructible())
+            if (state == 1)
+                replace("it_meditation_hollow");
+            else if (state == 2)
+                replace("it_crack_m");
+            else
+                replace("it_debris");
+        else
+            kill();
+     }
+     
+    DEF_ITEMTRAITSF(Explosion, "it_explosion", it_explosion, itf_static |
+                itf_animation | itf_indestructible | itf_norespawn | itf_fireproof);
+
 /* -------------------- Flag -------------------- */
 
     FlagItem::FlagItem(int type) {
@@ -379,6 +405,10 @@
         BootRegister(new Coffee(), "it_coffee");
         BootRegister(new DeathItem(), "it_death");
         BootRegister(new Debris(), "it_debris");
+        BootRegister(new Explosion(0), "it_explosion_nil");
+        BootRegister(new Explosion(1), "it_explosion_hollow");
+        BootRegister(new Explosion(2), "it_explosion_crack");
+        BootRegister(new Explosion(3), "it_explosion_debris");
         BootRegister(new FlagItem(0), "it_flag");
         BootRegister(new FlagItem(0), "it_flag_black");
         BootRegister(new FlagItem(1), "it_flag_white");

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items/SimpleItems.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -112,6 +112,23 @@
     };
 
     /**
+     * Explosion
+     */
+    class Explosion : public Item {
+        CLONEOBJ(Explosion);
+        DECL_ITEMTRAITS;
+
+    public:
+        Explosion(int strength);
+        
+        // StateObject interface
+        virtual void setState(int extState);
+        
+        // ModelCallback interface
+        virtual void animcb();
+    };
+    
+    /**
      * FlagItem
      */
     class FlagItem : public Item {

Modified: trunk/src/items.cc
===================================================================
--- trunk/src/items.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -30,16 +30,9 @@
 #include "world.hh"
 #include "Inventory.hh"
 #include "ItemHolder.hh"
-#include "lev/Proxy.hh"
-#include "items/GlassesItem.hh"
 
 #include "ecl_util.hh"
 
-#include <algorithm>
-#include <cmath>
-#include <iostream>
-
-
 using namespace std;
 
 using enigma::GridPos;
@@ -102,7 +95,7 @@
 
 void Item::processLight(Direction d) {
     if (get_traits().flags & itf_inflammable) {
-        replace("it-explosion1");
+        replace("it_explosion_nil");
     } else
         GridObject::processLight(d);
 }
@@ -155,300 +148,5 @@
     }
 }
 
-/* -------------------- Explosion -------------------- */
-namespace
-{
-    class Explosion : public Item {
-    public:
-        Explosion ()
-        {}
 
-    private:
-        void init_model() {set_anim("expl");}
-        bool actor_hit(Actor *actor) {
-            SendMessage(actor, "_shatter");
-            return false;
-        }
-    };
-
-    // Explode but do nothing else.
-    class Explosion1 : public Explosion {
-        CLONEOBJ(Explosion1);
-        DECL_ITEMTRAITS;
-
-        void animcb() {
-            kill();
-        }
-    public:
-        Explosion1()
-        {}
-    };
-    DEF_ITEMTRAITSF(Explosion1, "it-explosion1", it_explosion1, itf_static |
-                itf_animation | itf_indestructible | itf_norespawn | itf_fireproof);
-
-    // Explode and leave a hole in the ground.
-    class Explosion2 : public Explosion {
-        CLONEOBJ(Explosion2);
-        DECL_ITEMTRAITS;
-
-        void animcb() {
-            if (Floor *fl = GetFloor(get_pos()))
-                if (fl->is_destructible())
-                    replace("it_meditation_hollow");
-                else
-                    kill();
-        }
-    public:
-        Explosion2()
-        {}
-    };
-    DEF_ITEMTRAITSF(Explosion2, "it-explosion2", it_explosion2, itf_static |
-                itf_animation | itf_indestructible | itf_norespawn | itf_fireproof);
-
-
-    // Explode and shatter the floor.
-    class Explosion3 : public Explosion {
-        CLONEOBJ(Explosion3);
-        DECL_ITEMTRAITS;
-
-        void animcb() {
-            if (Floor *fl = GetFloor(get_pos()))
-                if (fl->is_destructible())
-                    replace("it_debris");
-                else
-                    kill();
-        }
-    public:
-        Explosion3()
-        {}
-    };
-    DEF_ITEMTRAITSF(Explosion3, "it-explosion3", it_explosion3, itf_static |
-                itf_animation | itf_indestructible | itf_norespawn | itf_fireproof);
-}
-
-
-/* -------------------- Dynamite -------------------- */
-namespace
-{
-    class Dynamite : public Item {
-        CLONEOBJ(Dynamite);
-        DECL_ITEMTRAITS;
-    public:
-        Dynamite() : state(IDLE) {}
-    private:
-        enum State { IDLE, BURNING };
-        State state;
-
-        void change_state(State newstate) {
-            if (newstate==BURNING && state==IDLE) {
-                state = BURNING;
-                set_anim("it-dynamite-burning");
-            }
-        }
-
-        virtual bool isStatic() const {
-            return state == BURNING;  // burning dynamite cannot be picked up
-        }
-
-        void explode () {
-            GridPos p = get_pos();
-            SendExplosionEffect(p, EXPLOSION_DYNAMITE);
-            sound_event ("dynamite");
-            //SetItem(p, it_explosion2);
-            Floor *fl = GetFloor(p);
-            string model = fl->get_kind();
-            // SetItem(p, it_explosion2) only used by it-dynamite?
-            // If Yes, the following block could be places in the explosion class:
-            if (model == "fl_space") {
-                // In space, an it-dynamite explodes to an it-sherd:
-                // HOT FIX
-                //replace(it_sherd);
-                replace("it_meditation_hollow");
-            } else if (model == "fl_ice") {
-                // In ice, an it-dynamite explodes to an it-crack2:
-                replace("it_crack_m");
-            } else {
-                SetItem(p, MakeItem("it-explosion2"));
-            }
-        }
-
-        virtual Value message(const Message &m) {
-            if (m.message == "ignite" || m.message == "_explosion" || m.message == "_bombstone") {
-                change_state(BURNING);
-                return Value();
-            } else if (m.message == "explode") { // currently unused in c++ code
-                explode();
-                return Value();
-            } else if (m.message == "heat") {  // used by fire-system
-                change_state(BURNING);
-                return true;  // caught message -> no fire!
-            }
-            return Item::message(m);
-        }
-        void animcb() { explode(); }
-        void processLight(Direction d) {
-            change_state(BURNING);
-        }
-        void on_drop(Actor *) { change_state(BURNING); }
-    };
-    DEF_ITEMTRAITSF(Dynamite, "it-dynamite", it_dynamite,
-                itf_indestructible | itf_fireproof);
-}
-
-// ----------------------------
-//      BombBase
-// ----------------------------
-// base class for BlackBomb and WhiteBomb
-
-namespace
-{
-    class BombBase : public Item {
-    public:
-        BombBase (bool burning = false)
-        : m_burning(burning)
-        {}
-
-    protected:
-        virtual Value message(const Message &m) {
-            if (m.message == "ignite"  || m.message == "_explosion") {
-                burn();
-                return Value();
-            } else if (m.message == "explode" ) {
-                explode();
-                return Value();
-            } else if (m.message == "heat") {  // used by fire-system
-                burn();
-                return true;  // caught message -> no fire!
-            }
-            return Item::message(m);
-        }
-
-    private:
-        // Variables
-        bool m_burning;
-
-        // Private methods
-        virtual void explode() = 0;
-
-        void init_model() {
-            if (m_burning)
-                set_anim(burn_anim());
-            else
-                Item::init_model();
-        }
-
-        void burn() {
-            if (!m_burning) {
-                m_burning = true;
-                init_model();
-            }
-        }
-
-        void animcb() { explode (); }
-
-        void processLight(Direction d) {
-            explode();
-        }
-
-        void on_stonehit(Stone *st) {
-            switch (server::GameCompatibility) {
-            case GAMET_OXYD1:
-            case GAMET_OXYDMAGNUM:
-                if (!st->is_kind("st-wood?"))
-                    // st-wood does not cause bombs to explode
-                    explode();
-                break;
-            default :
-                explode();
-                break;
-            }
-        }
-
-        virtual const char *burn_anim() const = 0;
-    };
-}
-
-/* -------------------- Black Bomb -------------------- */
-
-/** \page it-blackbomb Black Bomb
-
-When black bombs explode, they destroy the floor tile underneath them.
-
-\image html it-blackbomb.png
-*/
-
-namespace
-{
-    class BlackBomb : public BombBase  {
-        CLONEOBJ(BlackBomb);
-        DECL_ITEMTRAITS;
-    public:
-        BlackBomb (bool burning=false)
-        : BombBase(burning)
-        {}
-    private:
-        const char *burn_anim() const { return "it-blackbomb-burning"; }
-        void explode() {
-            GridPos p = get_pos();
-            sound_event ("blackbomb");
-            replace("it-explosion3");
-            SendExplosionEffect(p, EXPLOSION_BLACKBOMB);  // may kill the bomb by another explosion1 set by brake
-        }
-    };
-    DEF_ITEMTRAITSF(BlackBomb, "it-blackbomb", it_blackbomb,
-                itf_static | itf_indestructible | itf_fireproof);
-
-    class BlackBombBurning : public BlackBomb {
-        CLONEOBJ(BlackBombBurning);
-        DECL_ITEMTRAITS;
-    public:
-        BlackBombBurning() : BlackBomb(true) {}
-    };
-    DEF_ITEMTRAITSF(BlackBombBurning, "it-blackbomb_burning",
-                it_blackbomb_burning,
-                itf_static | itf_indestructible | itf_norespawn | itf_fireproof);
-}
-
-
-/* -------------------- White bomb -------------------- */
-
-/*! When a white bombs explode, they destroy the floor tile underneath
-them and neighboring floors. */
-
-namespace
-{
-    class WhiteBomb : public BombBase  {
-        CLONEOBJ(WhiteBomb);
-        DECL_ITEMTRAITS;
-
-        const char *burn_anim() const { return "it-whitebomb-burning"; }
-        void explode() {
-            GridPos p = get_pos();
-            sound_event ("whitebomb");
-            replace("it-explosion3");
-            SendExplosionEffect(p, EXPLOSION_WHITEBOMB); // may kill the bomb by another explosion1 set by brake
-        }
-
-    public:
-        WhiteBomb()
-        {}
-    };
-    DEF_ITEMTRAITSF(WhiteBomb, "it-whitebomb", it_whitebomb,
-                itf_static | itf_indestructible | itf_fireproof);
-}
-
-
-/* -------------------- Functions -------------------- */
-
-void InitItems()
-{
-    RegisterItem (new BlackBomb);
-    RegisterItem (new BlackBombBurning);
-    RegisterItem (new Dynamite);
-    RegisterItem (new Explosion1);
-    RegisterItem (new Explosion2);
-    RegisterItem (new Explosion3);
-    RegisterItem (new WhiteBomb);
-}
-
 } // namespace enigma

Modified: trunk/src/items.hh
===================================================================
--- trunk/src/items.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/items.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -31,8 +31,7 @@
         it_2pkillstone,
         it_bag,
         it_banana,
-        it_blackbomb,
-        it_blackbomb_burning,
+        it_bomb,
         it_blocker,
         it_bottle_idle,
         it_bottle_broken,
@@ -65,9 +64,7 @@
         it_dummy,
         it_easykeepstone,
         it_easykillstone,
-        it_explosion1,
-        it_explosion2,
-        it_explosion3,
+        it_explosion,
         it_exitsensor,
         it_extinguisher,
         it_extinguisher_medium,
@@ -148,7 +145,6 @@
         it_vortex_closed,
         it_vstrip,
         it_weight,
-        it_whitebomb,
         it_wormhole_off,
         it_wormhole_on,
         it_wrench,
@@ -280,8 +276,6 @@
     }
 
 /* -------------------- Functions -------------------- */
-
-    void InitItems();
     
     
 /* --------------------  Item Macros -------------------- */

Modified: trunk/src/ox_extra.cc
===================================================================
--- trunk/src/ox_extra.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/ox_extra.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -318,7 +318,7 @@
     "it_umbrella",                // OxydExtra item 0x07
     IT_MISSING,                 // OxydExtra item 0x08
     UNUSED,                  // OxydExtra item 0x09
-    "it-dynamite",                // OxydExtra item 0x0a
+    "it_dynamite",                // OxydExtra item 0x0a
     UNUSED,                  // OxydExtra item 0x0b
     UNUSED,                  // OxydExtra item 0x0c
     "it_crack_i",                 // OxydExtra item 0x0d

Modified: trunk/src/ox_magnum.cc
===================================================================
--- trunk/src/ox_magnum.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/ox_magnum.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -220,8 +220,8 @@
     UNUSED,                     // OxydMagnum stone 0x65
     UNUSED,                     // OxydMagnum stone 0x66
     UNUSED,                     // OxydMagnum stone 0x67
-    "st-bombs",                 // OxydMagnum stone 0x68 (common was 'st-shogun-l')
-    "st-flash",                 // OxydMagnum stone 0x69
+    "st_dispenser_bombblack",   // OxydMagnum stone 0x68 (common was 'st-shogun-l')
+    "st_flash",                 // OxydMagnum stone 0x69
     "st_coinslot_instant",      // OxydMagnum stone 0x6a
     "st_thief",                 // OxydMagnum stone 0x6b
     "st_shogun_s",              // OxydMagnum stone 0x6c
@@ -300,9 +300,9 @@
     "it_umbrella",      // OxydMagnum item 0x07
     "it_glasses",       // OxydMagnum item 0x08
     "it_glasses_broken", // OxydMagnum item 0x09
-    "it-dynamite",      // OxydMagnum item 0x0a
-    "it-blackbomb",     // OxydMagnum item 0x0b
-    "it-whitebomb",     // OxydMagnum item 0x0c
+    "it_dynamite",      // OxydMagnum item 0x0a
+    "it_bomb_black",    // OxydMagnum item 0x0b
+    "it_bomb_white",    // OxydMagnum item 0x0c
     "it_crack_i",        // OxydMagnum item 0x0d
     "it_crack_s",        // OxydMagnum item 0x0e
     "it_crack_m",        // OxydMagnum item 0x0f

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/ox_oxyd1.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -252,8 +252,8 @@
     UNUSED,                     // Oxyd1 stone 0x65
     "st_disco_medium",          // Oxyd1 stone 0x66
     "st_disco_light",           // Oxyd1 stone 0x67
-    "st-bombs",                 // Oxyd1 stone 0x68
-    "st-flash",                 // Oxyd1 stone 0x69
+    "st_dispenser_bombblack",   // Oxyd1 stone 0x68
+    "st_flash",                 // Oxyd1 stone 0x69
     "st_coinslot_instant",      // Oxyd1 stone 0x6a
     "st_thief",                 // Oxyd1 stone 0x6b
     "st_shogun_s",              // Oxyd1 stone 0x6c
@@ -316,9 +316,9 @@
     "it_umbrella",                // 0x07
     "it_glasses",                 // 0x08
     "it_glasses_broken",          // 0x09
-    "it-dynamite",                // 0x0a
-    "it-blackbomb",               // 0x0b
-    "it-whitebomb",               // 0x0c
+    "it_dynamite",                // 0x0a
+    "it_bomb_black",              // 0x0b
+    "it_bomb_white",              // 0x0c
     "it_crack_i",                 // 0x0d
     "it_crack_s",                 // 0x0e
     "it_crack_m",                 // 0x0f

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/ox_peroxyd.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -286,7 +286,7 @@
     "st_shogun",                // PerOxyd stone 0x5f (oxyd with a hole, movable ... strange stone! st-shogun as workaround, only link level 74)
     "st_disco_dark",            // PerOxyd stone 0x60
     "st_disco_medium",          // PerOxyd stone 0x61
-    "st-bombs",                 // PerOxyd stone 0x62
+    "st_dispenser_bombblack",   // PerOxyd stone 0x62
     "st_flash",                 // PerOxyd stone 0x63
     "st_coinslot_instant",      // PerOxyd stone 0x64
     "st_thief",                 // PerOxyd stone 0x65
@@ -389,9 +389,9 @@
     "it_umbrella",                // 0x07
     "it_glasses",                 // 0x08
     "it_glasses_broken",          // 0x09
-    "it-dynamite",                // 0x0a
-    "it-blackbomb",               // 0x0b
-    "it-whitebomb",               // 0x0c
+    "it_dynamite",                // 0x0a
+    "it_bomb_black",              // 0x0b
+    "it_bomb_white",              // 0x0c
     "it_crack_i",                 // 0x0d
     "it_crack_s",                 // 0x0e
     "it_crack_m",                 // 0x0f
@@ -485,7 +485,7 @@
     UNUSED,                  // 0x67
     UNUSED,                  // 0x68
     UNUSED,                  // 0x69
-    "it-blackbomb-burning",       // 0x6a
+    "it_bomb_black_burning", // 0x6a
     UNUSED,                  // 0x6b
     UNUSED,                  // 0x6c
     UNUSED,                  // 0x6d

Added: trunk/src/stones/DispenserStone.cc
===================================================================
--- trunk/src/stones/DispenserStone.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones/DispenserStone.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -0,0 +1,128 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "stones/DispenserStone.hh"
+#include "errors.hh"
+#include "Inventory.hh"
+//#include "main.hh"
+#include "player.hh"
+#include "world.hh"
+
+namespace enigma {
+    DispenserStone::DispenserStone(int subtyp) : Stone() {
+        objFlags |= (subtyp << 24);
+    }
+    
+    std::string DispenserStone::getClass() const {
+        return "st_dispenser";
+    }
+    
+    Value DispenserStone::getAttr(const std::string &key) const {
+        if (key == "flavor") {
+            DispenserStoneTyp typ = (DispenserStoneTyp)((objFlags & OBJBIT_SUBTYP) >> 24);
+            switch (typ) {
+                case BOMBBLACK:
+                    return "bombblack";
+                case BOMBWHITE:
+                    return "bombwhite";
+                case DYNAMITE:
+                    return "dynamite";
+            }
+        }
+        return Stone::getAttr(key);
+    }
+
+    Value DispenserStone::message(const Message &m) {
+        if (m.message =="_explosion" || m.message =="_bombstone") {
+            if (isDisplayable())
+                doBreak();
+            return Value();
+        }
+        return Stone::message(m);
+    }
+
+    void DispenserStone::setState(int extState) {
+        // no external states
+    }
+    
+    void DispenserStone::init_model() {
+        std::string base = get_traits().name;
+        if (state == BREAKING)
+            set_anim(base + "_breaking");
+        else
+            set_model(base);
+    }
+    
+    void DispenserStone::animcb() {
+        GridPos p = get_pos();
+        SendExplosionEffect(p, EXPLOSION_BOMBSTONE);
+        if (Item *it = GetItem(get_pos())) {
+            SendMessage(it, "ignite");
+        } else
+            SetItem(p, MakeItem("it_explosion_nil"));
+        KillStone(p);
+    }
+
+    void DispenserStone::actor_hit(const StoneContact &sc) {
+        if (enigma::Inventory *inv = player::GetInventory(sc.actor)) {
+            if (!inv->is_full()) {
+                DispenserStoneTyp typ = (DispenserStoneTyp)((objFlags & OBJBIT_SUBTYP) >> 24);
+                std::string itemkind;
+                switch (typ) {
+                    case BOMBBLACK:
+                        itemkind = "it_bomb_black"; break;
+                    case BOMBWHITE:
+                        itemkind = "it_bomb_white"; break;
+                    case DYNAMITE:
+                        itemkind = "it_dynamite"; break;
+                    default:
+                        ASSERT(false, XLevelRuntime, "Dispenser - unexpected subtyp");
+                }
+                inv->add_item(MakeItem(itemkind.c_str()));
+                player::RedrawInventory(inv);
+            }
+        }
+    }
+    
+    void DispenserStone::doBreak() {
+        if (state == IDLE) {
+            state = BREAKING;
+            sound_event ("stonedestroy");
+            init_model();
+        }
+    }
+    
+    int DispenserStone::traitsIdx() const {
+        return (objFlags & OBJBIT_SUBTYP) >> 24;
+    }
+
+    StoneTraits DispenserStone::traits[3] = {
+        {"st_dispenser_bombblack", st_INVALID, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
+        {"st_dispenser_bombwhite", st_INVALID, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
+        {"st_dispenser_dynamite", st_INVALID, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
+    };
+
+    BOOT_REGISTER_START
+        BootRegister(new DispenserStone(0), "st_dispenser");
+        BootRegister(new DispenserStone(0), "st_dispenser_bombblack");
+        BootRegister(new DispenserStone(1), "st_dispenser_bombwhite");
+        BootRegister(new DispenserStone(2), "st_dispenser_dynamite");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/stones/DispenserStone.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/stones/DispenserStone.hh
===================================================================
--- trunk/src/stones/DispenserStone.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones/DispenserStone.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -0,0 +1,78 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef DISPENSERSTONE_HH
+#define DISPENSERSTONE_HH
+
+#include "stones.hh"
+
+#include "stones_internal.hh"
+
+namespace enigma {
+
+    /** 
+     * 
+     */
+    class DispenserStone : public Stone {
+        CLONEOBJ(DispenserStone);
+        DECL_TRAITS_ARRAY(3, traitsIdx());
+
+    private:
+        enum iState {
+            IDLE,       ///< 
+            BREAKING    ///< 
+        };
+        
+        enum ObjectPrivatFlagsBits {
+            OBJBIT_SUBTYP    =   3<<24,   ///< the item typ
+        };
+        
+        enum DispenserStoneTyp {
+            BOMBBLACK,
+            BOMBWHITE,
+            DYNAMITE
+        };
+    public:
+        DispenserStone(int subtyp);
+        
+        // Object interface
+        virtual std::string getClass() const;
+        virtual Value getAttr(const std::string &key) const;
+        virtual Value message(const Message &m);
+        
+        // StateObject interface
+        virtual void setState(int extState);
+        
+        // GridObject interface
+        virtual void init_model();
+        
+        // ModelCallback interface
+        virtual void animcb();
+        
+        // Stone interface
+        virtual void actor_hit(const StoneContact &sc);
+    
+    private:
+        // Private methods.
+        void doBreak();
+        int traitsIdx() const;
+    };
+
+} // namespace enigma
+
+#endif /*DISPENSERSTONE_HH*/


Property changes on: trunk/src/stones/DispenserStone.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/stones/ShogunStone.cc
===================================================================
--- trunk/src/stones/ShogunStone.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones/ShogunStone.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -196,7 +196,7 @@
                 if (Item *it = GetItem(newPos)) {
                     ItemID id = get_id(it);
                     if ((server::GameCompatibility != GAMET_OXYD1 && server::GameCompatibility != GAMET_OXYDMAGNUM) ||
-                            (id != it_cherry && id != it_blackbomb && id != it_whitebomb))
+                            (id != it_cherry && id != it_bomb))
                         it->on_stonehit(this);
                 }
             }

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones/SimpleStones.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -25,6 +25,7 @@
 //#include "main.hh"
 #include "player.hh"
 #include "server.hh"
+#include "SoundEffectManager.hh"
 #include "world.hh"
 
 namespace enigma {
@@ -218,7 +219,49 @@
     DEF_TRAITSM(PlopStone, "st_plop", st_plop, MOVABLE_STANDARD);
 
 
+/* -------------------- Yinyang stone -------------------- */
+    YinyangStone::YinyangStone(int initState) : Stone () {
+        state = initState;
+    }
+    
+    std::string YinyangStone::getClass() const {
+        return "st_yinyang";
+    }
+    
+    void YinyangStone::setState(int extState) {
+        if (!isDisplayable())
+           state = extState;
+        else if (state == IDLE) {
+            state = extState;
+            init_model();
+        }
+    }
+        
+    void YinyangStone::init_model() {
+        if (state == IDLE)
+            set_model("st_yinyang");
+        else
+            set_anim("st_yinyang-anim");
+    }
+    
+    void YinyangStone::animcb() {
+        // Switch to other marble
+        player::SwapPlayers();
+        sound::EmitSoundEvent("switchplayer", get_pos().center());
+        state = IDLE;
+        init_model();
+    }
+    
+    void YinyangStone::actor_hit(const StoneContact &sc) {
+        if (state == IDLE) {
+            state = ACTIVE;
+            init_model();
+        }
+    }
+    
+    DEF_TRAITSM(YinyangStone, "st_yinyang", st_yinyang, MOVABLE_STANDARD);
 
+
     BOOT_REGISTER_START
         BootRegister(new BlurStone(0), "st_blur");
         BootRegister(new BlurStone(0), "st_blur_straight");
@@ -234,6 +277,8 @@
         BootRegister(new GrateStone(1), "st_grate_framed");
         BootRegister(new PlopStone(), "st_plop");
         BootRegister(new PlopStone(), "st_plop_slate");
+        BootRegister(new YinyangStone(0), "st_yinyang");
+        BootRegister(new YinyangStone(1), "st_yinyang_active");
     BOOT_REGISTER_END
 
 } // namespace enigma

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones/SimpleStones.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -130,7 +130,7 @@
     /** 
      * PlopStone
      */
-   class PlopStone : public Stone {
+    class PlopStone : public Stone {
         CLONEOBJ(PlopStone);
         DECL_TRAITS;
     public:
@@ -144,7 +144,37 @@
         
         // Stone interface
         virtual void on_floor_change();
-   };
+    };
+   
+    /** 
+     * Yinyang 
+     */
+    class YinyangStone : public Stone {
+        CLONEOBJ(YinyangStone);
+        DECL_TRAITS;
+    private:
+        enum iState {
+            IDLE,       ///< 
+            ACTIVE      ///< 
+        };
+    public:
+        YinyangStone(int initState);
+        
+         // Object interface
+        virtual std::string getClass() const;        
+        
+        // StateObject interface
+        virtual void setState(int extState);
+
+        // GridObject interface
+        virtual void init_model();
+        
+        // ModelCallback interface  - Animation callback
+        virtual void animcb();
+
+        // Stone interface
+        virtual void actor_hit(const StoneContact &sc);
+    };
 } // namespace enigma
 
 #endif /*SIMPLESTONES_HH*/

Modified: trunk/src/stones.cc
===================================================================
--- trunk/src/stones.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -416,7 +416,5 @@
 
     Register (new SpitterStone);
 
-    // Init stones from stones_simple.cc and stones_complex.cc:
-    Init_simple();
 }
 } // namespace enigma

Modified: trunk/src/stones.hh
===================================================================
--- trunk/src/stones.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -106,6 +106,7 @@
         st_camouflage,
         st_polarswitch,
         st_volcano_growing,
+        st_yinyang,
 
         st_LAST,
         st_COUNT = st_LAST

Modified: trunk/src/stones_internal.hh
===================================================================
--- trunk/src/stones_internal.hh	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones_internal.hh	2009-02-04 00:35:22 UTC (rev 1509)
@@ -40,9 +40,7 @@
 
 namespace enigma {
 
-    void Init_simple();
 
-
 /* -------------------- Auxiliary Functions -------------------- */
 
     Direction get_push_direction (const StoneContact &sc);

Deleted: trunk/src/stones_simple.cc
===================================================================
--- trunk/src/stones_simple.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/stones_simple.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -1,109 +0,0 @@
-/*
- * Copyright (C) 2002,2003,2004 Daniel Heck
- *
- * This program is free software; you can redistribute it and/or
- * modify it under the terms of the GNU General Public License
- * as published by the Free Software Foundation; either version 2
- * of the License, or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License along
- * with this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
- *
- */
-
-#include "errors.hh"
-#include "laser.hh"
-#include "server.hh"
-#include "player.hh"
-#include "client.hh"
-#include "main.hh"
-#include "Inventory.hh"
-
-#include "stones_internal.hh"
-
-using namespace std;
-
-namespace enigma {
-
-/* -------------------- BombStone -------------------- */
-
-namespace
-{
-    /*! This stone add a bomb to the player's inventory when touched. */
-    class BombStone : public Stone {
-        CLONEOBJ(BombStone);
-        DECL_TRAITS;
-        const char *collision_sound() {return "stone";}
-    public:
-        BombStone(const char* kind_, const char* itemkind_) :
-            Stone(kind_), state(IDLE), itemkind(itemkind_) {}
-    private:
-        enum State { IDLE, BREAK };
-        State state;
-        const char* itemkind;
-        void actor_hit (const StoneContact &sc);
-        void change_state (State newstate);
-        void animcb();
-        virtual Value message(const Message &m);
-    };
-}
-DEF_TRAITSM(BombStone, "INVALID", st_INVALID, MOVABLE_BREAKABLE);
-    
-void BombStone::change_state (State newstate) 
-{
-    if (state == IDLE && newstate==BREAK) {
-        string model = get_kind();
-        state = newstate;
-        sound_event ("stonedestroy");
-        set_anim(model + "-anim");
-    }
-}
-
-void BombStone::animcb() 
-{
-    ASSERT(state == BREAK, XLevelRuntime, "BombStone: animcb called with inconsistent state");
-    GridPos p = get_pos();
-    SendExplosionEffect(p, EXPLOSION_BOMBSTONE);
-    KillStone(p);
-    if(Item *it = GetItem(get_pos())) {
-        SendMessage(it, "ignite");
-    } else
-        SetItem(p, MakeItem("it-explosion1"));
-}
-
-Value BombStone::message(const Message &m) 
-{
-    if (m.message =="_explosion" || m.message =="_bombstone") {
-        change_state(BREAK);
-        return Value();
-    }
-    return Stone::message(m);
-}
-
-void BombStone::actor_hit(const StoneContact &sc) 
-{
-    if (enigma::Inventory *inv = player::GetInventory(sc.actor)) {
-        if (!inv->is_full()) {
-            Item *it = MakeItem(itemkind);
-            inv->add_item(it);
-            player::RedrawInventory (inv);
-        }
-    }
-}
-
-/* -------------------- Functions -------------------- */
-
-void Init_simple()
-{
-    Register(new BombStone("st-bombs", "it-blackbomb"));
-    //Register(new BombStone("st-dynamite", "it-dynamite"));
-    //Register(new BombStone("st-whitebombs", "it-whitebomb"));
-}
-
-} // namespace enigma

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-03 23:53:51 UTC (rev 1508)
+++ trunk/src/world.cc	2009-02-04 00:35:22 UTC (rev 1509)
@@ -1983,8 +1983,14 @@
             SendMessage(stone, "_explosion", source);
         if (source == dest)  // item and floor handling on explosion center is specific
             return;
-        if (Item  *item  = GetItem(dest)) {
-            if (has_flags(item, itf_indestructible))
+        if (Item *item = GetItem(dest)) {
+            if (item->getClass() == "it_explosion") {
+                Item *newExplosion = MakeItem(explosion_item);
+                if ((int)(newExplosion->getAttr("state")) > (int)(item->getAttr("state")))
+                    SetItem(dest, newExplosion);
+                else
+                    DisposeObject(newExplosion);
+            } else if (has_flags(item, itf_indestructible))
                 SendMessage(item, "_explosion", source);
             else
                 SetItem(dest, MakeItem(explosion_item));
@@ -2016,7 +2022,7 @@
 
             case EXPLOSION_BLACKBOMB:
                 if (direct_neighbor) {
-                    explosion(center, dest, "it-explosion1");
+                    explosion(center, dest, "it_explosion_nil");
                 } else {
                     // Note: should not ignite in non-enigma-mode!
                     if (stone) SendMessage(stone, "ignite");
@@ -2028,7 +2034,7 @@
             case EXPLOSION_WHITEBOMB:
                 // Note: at least in oxyd1 only direct neighbors
                 // explode, and the others not even ignite
-                explosion(center, dest, "it-explosion3");            
+                explosion(center, dest, "it_explosion_debris");            
                 break;
     
             case EXPLOSION_BOMBSTONE:
@@ -2388,7 +2394,6 @@
     BootRegister(NULL, NULL, false);
     InitActors();
     InitLasers();
-    InitItems();
     InitStones();
     InitFloors();
 }



From ral at mail.berlios.de  Wed Feb  4 01:54:37 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Wed, 4 Feb 2009 01:54:37 +0100
Subject: [Enigma-game-svn] r1510 - team_levelpacks/team_test_new_api
Message-ID: <200902040054.n140sbdc022444@sheep.berlios.de>

Author: ral
Date: 2009-02-04 01:54:30 +0100 (Wed, 04 Feb 2009)
New Revision: 1510

Added:
   team_levelpacks/team_test_new_api/ralT079_1.xml
Modified:
   team_levelpacks/team_test_new_api/ralT059_1.xml
   team_levelpacks/team_test_new_api/ralT076_1.xml
   team_levelpacks/team_test_new_api/ralT078_1.xml
Log:
Test Level new API:
- added level for explosion, bomb, dynamite and yinyang objects
- some updates


Modified: team_levelpacks/team_test_new_api/ralT059_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT059_1.xml	2009-02-04 00:35:22 UTC (rev 1509)
+++ team_levelpacks/team_test_new_api/ralT059_1.xml	2009-02-04 00:54:30 UTC (rev 1510)
@@ -32,7 +32,7 @@
 
 ti["S"] = {"st_switch", target="@door#*"}
 
-ti["s"] = {"it-spring1"}
+ti["s"] = {"it_spring"}
 ti["L"] = {"st_laser_n", "laser#", state=ON}
 ti["P"] = {"st_polarswitch"}
 
@@ -42,7 +42,7 @@
 
 ti["K"] = {"st_door_d", target="bb", action="hit"}
 ti["j"] = {"st_door_d", target="bb", action="hit", faces="ew"}
-ti["J"] = {"st-blackballs", "bb"}
+ti["J"] = {"st_jamb_black", "bb"}
 
 ti["@"] = {"#ac_marble"} 
 

Modified: team_levelpacks/team_test_new_api/ralT076_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT076_1.xml	2009-02-04 00:35:22 UTC (rev 1509)
+++ team_levelpacks/team_test_new_api/ralT076_1.xml	2009-02-04 00:54:30 UTC (rev 1510)
@@ -29,8 +29,11 @@
 ti["o"] = {"#ac_killer", controllers=1, owner=YIN} 
 ti["O"] = {"#ac_horse", controllers=1, owner=YIN, adhesion=1} 
 
+ti["y"] = {"it_yinyang"}
+ti["Y"] = {"it_yinyang"} .. ti{"fl_space"}
+
 w, h = wo(ti, " ", {
-"   #                ",
+"   # Y y            ",
 "   #         ....   ",
 "   #        x....   ",
 "o  #        x....   ",

Modified: team_levelpacks/team_test_new_api/ralT078_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT078_1.xml	2009-02-04 00:35:22 UTC (rev 1509)
+++ team_levelpacks/team_test_new_api/ralT078_1.xml	2009-02-04 00:54:30 UTC (rev 1510)
@@ -37,8 +37,10 @@
 ti["l"] = {"it_surprise", target="changeitem"}
 ti["L"] = {"it_wormhole", destination=po(3,3)}
 
+ti["d"] = {"it_drop"}
+ti["y"] = {"it_yinyang"}
+ti["Y"] = {"it_yinyang"} .. ti{"fl_space"}
 
-
 w, h = wo(ti, " ", {
 "SSSSSSSSSSSSSSSSSSSS",
 "                    ",
@@ -51,8 +53,8 @@
 "V       iiiiii     T",
 "V                  T",
 "V         jjjjjj   T",
-"                    ",
-"   WWWWWW  kkk  lll "
+"y                   ",
+"d YWWWWWW  kkk  lll "
 })
 
 function changeselection(value, sender)

Added: team_levelpacks/team_test_new_api/ralT079_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT079_1.xml	2009-02-04 00:35:22 UTC (rev 1509)
+++ team_levelpacks/team_test_new_api/ralT079_1.xml	2009-02-04 00:54:30 UTC (rev 1510)
@@ -0,0 +1,66 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test Explosions new API" el:subtitle="" el:id="20090203ral168"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision$" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+
+wo["ConserveLevel"] = true
+
+ti[" "] = {"fl_sahara"}
+ti["~"] = {"fl_ice"}
+ti["."] = {"fl_space"}
+ti["1"] = {"#ac_marble"}
+ti["2"] = {"#ac_marble_white"}
+ti["d"] = {"it_dynamite"}
+ti["b"] = {"it_bomb_black"}
+ti["w"] = {"it_bomb_white"}
+
+ti["e"] = {"it_extinguisher"}
+ti["t"] = {"it_document"}
+ti["c"] = {"it_banana"}
+
+ti["y"] = {"st_yinyang"}
+ti["Y"] = {"st_yinyang_active"}
+
+ti["4"] = {"st_dispenser_bombblack"}
+ti["5"] = {"st_dispenser_bombwhite"}
+ti["6"] = {"st_dispenser_dynamite"}
+
+w, h = wo(ti, " ", {
+"        ddd         ",
+"        ddd         ",
+"   b    ddd     w   ",
+"          e         ",
+"       1      2    4",
+"                    ",
+"                   5",
+"            t       ",
+"   b               6",
+"   w                ",
+"           c        ",
+"               .. ~~",
+"Y      y       .. ~~"
+})
+
+  ]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT079_1.xml
___________________________________________________________________
Name: svn:keywords
   + Revision
Name: svn:eol-style
   + native



From R.Lamprecht at T-Online.de  Wed Feb  4 01:53:07 2009
From: R.Lamprecht at T-Online.de (Ronald Lamprecht)
Date: Wed, 04 Feb 2009 01:53:07 +0100
Subject: [Enigma-game-svn] r1509 - incomplete commit message
In-Reply-To: <200902040035.n140ZQbk021522@sheep.berlios.de>
References: <200902040035.n140ZQbk021522@sheep.berlios.de>
Message-ID: <4988E6F3.7020804@T-Online.de>

A major part of the commit message got lost - from memory:

- reengineering explosion item:
   - it-explosion1 -> it_explosion_nil
   - it-explosion2 -> it_explosion_hollow
   - it-explosion3 -> it_explosion_debris
   - new explosion: it_explosion_crack
- rengineering dynamite:
   - it-dynamite -> it_dynamite
- rengineering bomb items:
   - it_blackbomb -> it_bomb, it_bomb_black
   - it_whitebomb -> it_bomb_white
   - attribute color
   - StateObject: bombs can be toggled
- new stone: yinyang switch
   - st_yinyang, st_yinyang_active
   - switch player on actor hit (arbitrary typ)
   - StateObject that can be toggled
   - active version can be used to switch player
     immediately after initialization
Note:
- bomb vs. item interactions are not yet
   checked - some items will change behaviour


From ral at mail.berlios.de  Wed Feb  4 14:14:41 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 4 Feb 2009 14:14:41 +0100
Subject: [Enigma-game-svn] r1511 - in trunk: data data/gfx32 data/gfx48
	data/schemas src src/stones
Message-ID: <200902041314.n14DEfPw000436@sheep.berlios.de>

Author: ral
Date: 2009-02-04 14:14:38 +0100 (Wed, 04 Feb 2009)
New Revision: 1511

Added:
   trunk/data/gfx32/it_bomb_white_burning.png
   trunk/data/gfx32/st_dispenser_bombblack.png
   trunk/data/gfx48/it_bottle_broken.png
Removed:
   trunk/data/gfx32/it_white_burning.png
   trunk/data/gfx32/st_dispenser_bombblackpng
   trunk/data/gfx48/it_bottle-broken.png
Modified:
   trunk/data/api1init.lua
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/actors.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/stones.cc
   trunk/src/stones.hh
   trunk/src/stones/SimpleStones.cc
   trunk/src/stones/SimpleStones.hh
   trunk/src/world.cc
Log:
Commit message addendum to r1509:
- reengineering explosion item:
  - it-explosion1 -> it_explosion_nil
  - it-explosion2 -> it_explosion_hollow
  - it-explosion3 -> it_explosion_debris
  - new explosion: it_explosion_crack
- rengineering dynamite:
  - it-dynamite -> it_dynamite
- rengineering bomb items:
  - it_blackbomb -> it_bomb, it_bomb_black
  - it_whitebomb -> it_bomb_white
  - attribute color
  - StateObject: bombs can be toggled
- new stone: yinyang switch
  - st_yinyang, st_yinyang_active
  - switch player on actor hit (arbitrary typ)
  - StateObject that can be toggled
  - active version can be used to switch player
    immediately after initialization
Note:
- bomb vs. item interactions are not yet
  checked - some items will change behaviour
------
r1511:
Trunk 1.1: new API reengineering

- reengineering spitter stone:
  - st-spitter -> st_spitter
- fix some issues introduced by r1509


Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/data/api1init.lua	2009-02-04 13:14:38 UTC (rev 1511)
@@ -501,6 +501,7 @@
     st_shogun_sl = "st-shogun-sl",
     st_shogun_ml = "st-shogun-ml",
     st_shogun_sml = "st-shogun-sml",
+    st_spitter = "st-spitter",
     st_stoneimpulse = "st-stoneimpulse",
     st_stoneimpulse_hollow = "st-stoneimpulse-hollow",
     st_stoneimpulse_movable = "st-stoneimpulse_movable",

Copied: trunk/data/gfx32/it_bomb_white_burning.png (from rev 1509, trunk/data/gfx32/it_white_burning.png)

Deleted: trunk/data/gfx32/it_white_burning.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/st_dispenser_bombblack.png (from rev 1509, trunk/data/gfx32/st_dispenser_bombblackpng)

Deleted: trunk/data/gfx32/st_dispenser_bombblackpng
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it_bottle-broken.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_bottle_broken.png (from rev 1508, trunk/data/gfx48/it_bottle-broken.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/data/models-2d.lua	2009-02-04 13:14:38 UTC (rev 1511)
@@ -1623,9 +1623,9 @@
 
 -- st-spitter --
 do
-    DefAlias ("st-spitter", "st-timeswitch")
-    DefAlias ("st-spitter-loading", "st_quaking")
-    DefAlias ("st-spitter-spitting", "st_quaking")
+    DefAlias ("st_spitter", "st-timeswitch")
+    DefAlias ("st_spitter_loading", "st_quaking")
+    DefAlias ("st_spitter_spitting", "st_quaking")
 end
 
 ---------------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/data/schemas/objects.xml	2009-02-04 13:14:38 UTC (rev 1511)
@@ -1645,6 +1645,13 @@
     <object name="st_shogun_sml">
       <attr name="flavor" value="sml"/>
     </object>
+    <object name="st_spitter">
+      <attr name="hit_factor"/>
+      <attr name="hit_distortion_xx"/>
+      <attr name="hit_distortion_xy"/>
+      <attr name="hit_distortion_yx"/>
+      <attr name="hit_distortion_yy"/>
+    </object>
     <object name="st_stoneimpulse">
       <attr name="hollow"/>
       <attr name="movable"/>

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/actors.cc	2009-02-04 13:14:38 UTC (rev 1511)
@@ -376,11 +376,11 @@
     }
     else if (Item *it = GetItem(p)) {
         if (!has_flags(it, itf_indestructible))
-            SetItem (p, MakeItem("it-explosion3"));
+            SetItem (p, MakeItem("it_explosion_debris"));
     }
     else if (Floor *fl = GetFloor(p)) {
         if (fl->is_destructible())
-            SetItem (p, MakeItem("it-explosion3"));
+            SetItem (p, MakeItem("it_explosion_debris"));
     }
     KillActor (this);
 }

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/ox_peroxyd.cc	2009-02-04 13:14:38 UTC (rev 1511)
@@ -336,13 +336,13 @@
     "st_rotator_ccw_movable",   // PerOxyd stone 0x91
     "st_rotator_cw_movable",    // PerOxyd stone 0x92
     "st_swap",                  // PerOxyd stone 0x93
-    "st-spitter",               // PerOxyd stone 0x94
+    "st_spitter",               // PerOxyd stone 0x94
     0,                          // PerOxyd stone 0x95 (dynamite holder, will implememnt it)(levels: 41 184 200)
     "st_rubberband",            // PerOxyd stone 0x96
     "st_scissors",              // PerOxyd stone 0x97
     "st_portal_horse",          // PerOxyd stone 0x98
     "st_blocker",               // PerOxyd stone 0x99
-    "st-grate1",                // PerOxyd stone 0x9a
+    "st_grate_cross",           // PerOxyd stone 0x9a
     "st_metal_hollow",          // PerOxyd stone 0x9b
     "st_brownpyramide",         // PerOxyd stone 0x9c
     "st_quake",                 // PerOxyd stone 0x9d

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/stones/SimpleStones.cc	2009-02-04 13:14:38 UTC (rev 1511)
@@ -22,6 +22,7 @@
 #include "stones/SimpleStones.hh"
 #include "client.hh"
 #include "errors.hh"
+#include "Inventory.hh"
 //#include "main.hh"
 #include "player.hh"
 #include "server.hh"
@@ -218,7 +219,63 @@
     
     DEF_TRAITSM(PlopStone, "st_plop", st_plop, MOVABLE_STANDARD);
 
+/* -------------------- SpitterStone -------------------- */
 
+    SpitterStone::SpitterStone() {
+    }
+    
+    void SpitterStone::setState(int extState) {
+        // block any calls
+    }
+    
+    void SpitterStone::init_model() {
+        if (state == IDLE)
+            set_model("st_spitter");
+        else if (state == LOADING)
+            set_anim("st_spitter_loading");
+        else
+            set_anim("st_spitter_spitting");
+    }
+    
+    void SpitterStone::animcb() {
+        switch (state) {
+            case IDLE:
+                ASSERT(false, XLevelRuntime, "SpitterStone: animcb called with inconsistent state"); 
+            case LOADING: {
+                Actor     *ball = MakeActor("ac-cannonball");
+                ActorInfo *ai   = ball->get_actorinfo();
+                ecl::V2 center  = get_pos().center();
+        
+                ai->vel = getAttr("$ball_velocity");
+                AddActor(center[0], center[1], ball);
+                state = SPITTING;
+                init_model();
+                break;
+            }
+            case SPITTING:
+                state = IDLE;
+                break;
+            }
+    }
+
+    void SpitterStone::actor_hit (const StoneContact &sc) {
+        if (state != IDLE)
+            return;
+    
+        if (enigma::Inventory *inv = player::GetInventory(sc.actor)) {
+            int lifepos = inv->find("it_extralife");
+            if (lifepos != -1) {
+                delete inv->yield_item(lifepos);
+                player::RedrawInventory (inv);
+                setAttr("$ball_velocity", distortedVelocity(sc.actor->get_vel(), 1.0));
+                state = LOADING;
+                init_model();
+            }
+        }
+    }
+
+    DEF_TRAITSM(SpitterStone, "st_spitter", st_yinyang, MOVABLE_PERSISTENT);
+
 /* -------------------- Yinyang stone -------------------- */
     YinyangStone::YinyangStone(int initState) : Stone () {
         state = initState;
@@ -259,7 +316,7 @@
         }
     }
     
-    DEF_TRAITSM(YinyangStone, "st_yinyang", st_yinyang, MOVABLE_STANDARD);
+    DEF_TRAITSM(YinyangStone, "st_yinyang", st_yinyang, MOVABLE_PERSISTENT);
 
 
     BOOT_REGISTER_START
@@ -277,6 +334,7 @@
         BootRegister(new GrateStone(1), "st_grate_framed");
         BootRegister(new PlopStone(), "st_plop");
         BootRegister(new PlopStone(), "st_plop_slate");
+        BootRegister(new SpitterStone(), "st_spitter");
         BootRegister(new YinyangStone(0), "st_yinyang");
         BootRegister(new YinyangStone(1), "st_yinyang_active");
     BOOT_REGISTER_END

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/stones/SimpleStones.hh	2009-02-04 13:14:38 UTC (rev 1511)
@@ -147,6 +147,35 @@
     };
    
     /** 
+     * SpitterStone
+     */
+    class SpitterStone : public Stone {
+        CLONEOBJ(SpitterStone);
+        DECL_TRAITS;
+    private:
+        enum iState {
+            IDLE, 
+            LOADING,
+            SPITTING
+        };
+
+    public:
+        SpitterStone ();
+        
+        // StateObject interface
+        virtual void setState(int extState);
+
+        // GridObject interface
+        virtual void init_model();
+        
+        // ModelCallback interface  - Animation callback
+        virtual void animcb();
+
+        // Stone interface
+        virtual void actor_hit(const StoneContact &sc);
+    };
+    
+    /** 
      * Yinyang 
      */
     class YinyangStone : public Stone {

Modified: trunk/src/stones.cc
===================================================================
--- trunk/src/stones.cc	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/stones.cc	2009-02-04 13:14:38 UTC (rev 1511)
@@ -337,84 +337,4 @@
     return false;
 }
 
-
-
-
-// *******************************************************************************
-//  Stones under development :
-
-
-
-/* -------------------- SpitterStone -------------------- */
-
-namespace
-{
-    class SpitterStone : public Stone {
-        CLONEOBJ(SpitterStone);
-
-        enum State { IDLE, LOADING, SPITTING };
-
-        // Variables
-        State state;
-        V2    ball_velocity;
-
-        // Functions.
-        void animcb();
-        void actor_hit (const StoneContact &sc);
-
-    public:
-        SpitterStone () : Stone("st-spitter"), state (IDLE) {
-        }
-    };
-}
-
-void SpitterStone::animcb() {
-    switch (state) {
-    case IDLE:
-        ASSERT(0, XLevelRuntime, "SpitterStone: animcb called with inconsistent state"); 
-    case LOADING: {
-        Actor     *ball = MakeActor("ac-cannonball");
-        ActorInfo *ai   = ball->get_actorinfo();
-        V2         center  = get_pos().center();
-
-        state = SPITTING;
-        ai->vel = ball_velocity;
-        AddActor (center[0], center[1], ball);
-        set_anim ("st-spitter-spitting");
-        break;
-    }
-    case SPITTING:
-        init_model();
-        state = IDLE;
-        break;
-    }
-}
-
-void SpitterStone::actor_hit (const StoneContact &sc) 
-{
-    if (state != IDLE)
-        return;
-
-    if (enigma::Inventory *inv = player::GetInventory(sc.actor)) {
-        int lifepos = inv->find("it_extralife");
-        if (lifepos != -1) {
-            delete inv->yield_item(lifepos);
-            player::RedrawInventory (inv);
-            ball_velocity = distortedVelocity(sc.actor->get_vel(), 1.0);
-            state = LOADING;
-            set_anim ("st-spitter-loading");
-        }
-    }
-}
-
-
-// --------------------------------------------------------------------------------
-
-void InitStones() {
-
-    // Register(new ...);
-
-    Register (new SpitterStone);
-
-}
 } // namespace enigma

Modified: trunk/src/stones.hh
===================================================================
--- trunk/src/stones.hh	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/stones.hh	2009-02-04 13:14:38 UTC (rev 1511)
@@ -263,9 +263,7 @@
     inline StoneID get_id(Stone *st) {
         return st->get_traits().id;
     }
-    
-    void InitStones();
-    
+        
 } // namespace enigma
 
 

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-04 00:54:30 UTC (rev 1510)
+++ trunk/src/world.cc	2009-02-04 13:14:38 UTC (rev 1511)
@@ -2394,7 +2394,6 @@
     BootRegister(NULL, NULL, false);
     InitActors();
     InitLasers();
-    InitStones();
     InitFloors();
 }
 



From raoul at mail.berlios.de  Wed Feb  4 16:17:10 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Wed, 4 Feb 2009 16:17:10 +0100
Subject: [Enigma-game-svn] r1512 - in trunk/data/levels: enigma_cross
	enigma_iv enigma_tutorial enigma_v enigma_vi enigma_vii enigma_viii
Message-ID: <200902041517.n14FHAmI018192@sheep.berlios.de>

Author: raoul
Date: 2009-02-04 16:17:06 +0100 (Wed, 04 Feb 2009)
New Revision: 1512

Modified:
   trunk/data/levels/enigma_cross/enigma0_92_2.xml
   trunk/data/levels/enigma_cross/enigma0_92_3.xml
   trunk/data/levels/enigma_cross/newlevels_1.0.1.xml
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_iv/duffy73_3.xml
   trunk/data/levels/enigma_iv/duffy93_3.xml
   trunk/data/levels/enigma_iv/index.xml
   trunk/data/levels/enigma_tutorial/adv_tutorial.xml
   trunk/data/levels/enigma_tutorial/index.xml
   trunk/data/levels/enigma_v/duffy114_3.xml
   trunk/data/levels/enigma_v/index.xml
   trunk/data/levels/enigma_v/ss03_3.xml
   trunk/data/levels/enigma_vi/duffy137_2.xml
   trunk/data/levels/enigma_vi/index.xml
   trunk/data/levels/enigma_vii/index.xml
   trunk/data/levels/enigma_vii/mecke12_2.xml
   trunk/data/levels/enigma_vii/pulley04_2.xml
   trunk/data/levels/enigma_vii/pulley07_1.xml
   trunk/data/levels/enigma_viii/andreas48_2.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/johann03_1.xml
   trunk/data/levels/enigma_viii/mecke01_1.xml
   trunk/data/levels/enigma_viii/mecke02_1.xml
   trunk/data/levels/enigma_viii/mecke19_1.xml
   trunk/data/levels/enigma_viii/mecke22_2.xml
   trunk/data/levels/enigma_viii/mecke23_1.xml
   trunk/data/levels/enigma_viii/mecke29_1.xml
   trunk/data/levels/enigma_viii/raywick05_1.xml
Log:
-> Level updates for bomb/explosion and spitter



Modified: trunk/data/levels/enigma_cross/enigma0_92_2.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_2.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_cross/enigma0_92_2.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15200" network="false" owner="Enigma Team" release="1" revision="27" title="Enigma 0.92 - 2"/>
+  <info enigma="1.00" group="Facets" location="15200" network="false" owner="Enigma Team" release="1" revision="28" title="Enigma 0.92 - 2"/>
 
   <attributes/>
 
@@ -52,7 +52,7 @@
     <level _seq="44" _title="Black Diamond Course" _xpath="enigma_iii/duffy28_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy28" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="45" _title="Hall of Glass" _xpath="enigma_i/martin86_2" author="Martin Hawlisch" ctrl="force" easy="false" id="martin86" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="46" _title="When Gravity Fails" _xpath="enigma_ii/nat10_1" author="Nat Pryce" ctrl="force" easy="false" id="nat10" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="47" _title="Psycho Pushing" _xpath="enigma_v/ss03_3" author="Sven Siggelkow" ctrl="force" easy="true" id="ss3" rel="3" rev="17" score="2" target="time" unit="duration"/>
+    <level _seq="47" _title="Psycho Pushing" _xpath="enigma_v/ss03_3" author="Sven Siggelkow" ctrl="force" easy="true" id="ss3" rel="3" rev="18" score="2" target="time" unit="duration"/>
     <level _seq="48" _title="Walls Of Sadness" _xpath="enigma_iv/ss12_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss12" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Unfair!" _xpath="enigma_iii/ant33_1" author="Petr Machata" ctrl="force" easy="false" id="ant33" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Puzzle Blues" _xpath="enigma_ii/siegfried07_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level3c" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -153,7 +153,7 @@
     <level _seq="145" _title="Build Up and Tear Down" _xpath="enigma_v/duffy70_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy70" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="146" _title="Don't Be Greedy" _xpath="enigma_v/duffy71_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy71" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="147" _title="Where Am I?" _xpath="enigma_iv/duffy72_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy72" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="148" _title="Bizarro World" _xpath="enigma_iv/duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="19" score="2" target="time" unit="duration"/>
+    <level _seq="148" _title="Bizarro World" _xpath="enigma_iv/duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="20" score="2" target="time" unit="duration"/>
     <level _seq="149" _title="Solvable?" _xpath="enigma_v/barry01_2" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry01" rel="2" rev="0" score="2" target="time" unit="duration"/>
     <level _seq="150" _title="Where is it?" _xpath="enigma_iv/barry02_1" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="151" _title="Tool Time" _xpath="enigma_ii/barry03_1" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry03" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/enigma0_92_3.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_3.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_cross/enigma0_92_3.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15300" network="false" owner="Enigma Team" release="1" revision="16" title="Enigma 0.92 - 3"/>
+  <info enigma="1.00" group="Facets" location="15300" network="false" owner="Enigma Team" release="1" revision="17" title="Enigma 0.92 - 3"/>
 
   <attributes/>
 
@@ -25,7 +25,7 @@
     <level _seq="17" _title="Excruciating" _xpath="enigma_iv/duffy90_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy90" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="You Must Be Kidding" _xpath="enigma_v/duffy91_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy91" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Map It Out" _xpath="enigma_iii/duffy92_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy92" rel="1" rev="4" score="1" target="time" unit="duration"/>
-    <level _seq="20" _title="Seed Puzzle 2" _xpath="enigma_iv/duffy93_3" author="Jacob Scott" ctrl="force" easy="false" id="duffy93" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="20" _title="Seed Puzzle 2" _xpath="enigma_iv/duffy93_3" author="Jacob Scott" ctrl="force" easy="false" id="duffy93" rel="3" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="21" _title="Graduated Puzzles" _xpath="enigma_iv/duffy94_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy94" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="Automaton" _xpath="enigma_v/duffy95_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy95" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Alien Glyphs 2" _xpath="enigma_ii/duffy96_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy96" rel="2" rev="1" score="2" target="time" unit="duration"/>
@@ -52,7 +52,7 @@
     <level _seq="44" _title="Artillery" _xpath="enigma_iv/duffy111_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy111" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="45" _title="Versailles" _xpath="enigma_iii/duffy112_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy112" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="46" _title="Help Yourself" _xpath="enigma_v/duffy113_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy113" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="47" _title="Plan Ahead" _xpath="enigma_v/duffy114_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy114" rel="3" rev="4" score="2" target="time" unit="duration"/>
+    <level _seq="47" _title="Plan Ahead" _xpath="enigma_v/duffy114_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy114" rel="3" rev="5" score="2" target="time" unit="duration"/>
     <level _seq="48" _title="Randomizer" _xpath="enigma_v/duffy115_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy115" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Just Stay Calm" _xpath="enigma_vi/duffy116_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy116" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Bad Nightmare" _xpath="enigma_iv/duffy117_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy117" rel="2" rev="3" score="2" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels_1.0.1.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.0.1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_cross/newlevels_1.0.1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15500" network="false" owner="Enigma Team" release="1" revision="23" title="Enigma 1.01 new"/>
+  <info enigma="1.00" group="Facets" location="15500" network="false" owner="Enigma Team" release="1" revision="24" title="Enigma 1.01 new"/>
 
   <attributes/>
 
@@ -36,7 +36,7 @@
     <level _seq="28" _title="Oxyd Drilling" _xpath="enigma_vi/duffy140_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy140" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Pleasure Garden" _xpath="enigma_vi/duffy134_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy134" rel="1" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="30" _title="Idempotency" _xpath="enigma_vi/duffy145_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy145" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="31" _title="Pontoon Bridges" _xpath="enigma_vi/duffy137_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy137" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="31" _title="Pontoon Bridges" _xpath="enigma_vi/duffy137_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy137" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Parish Fair" _xpath="enigma_vi/duffy143_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy143" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="In the Middle" _xpath="enigma_vi/duffy141_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy141" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="34" _title="Construction Workers" _xpath="enigma_vi/duffy142_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy142" rel="1" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="36" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="37" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -59,8 +59,8 @@
     <level _seq="51" _title="Swapping Puzzle II" _xpath="enigma_vii/joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Multiban" _xpath="enigma_vii/dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Riverside" _xpath="enigma_vii/johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="18" score="2" target="time" unit="duration"/>
-    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="20" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="19" score="2" target="time" unit="duration"/>
+    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="21" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Spaceship Control" _xpath="enigma_vii/safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Ball Alley" _xpath="enigma_vii/johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Action Potential" _xpath="enigma_vii/pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -81,7 +81,7 @@
     <level _seq="73" _title="Blue Screen Of Death" _xpath="enigma_vii/pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="74" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Black Liberation" _xpath="enigma_vii/mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
-    <level _seq="76" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="47" score="1" target="time" unit="duration"/>
+    <level _seq="76" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="48" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="35" score="1" target="time" unit="duration"/>
     <level _seq="78" _title="Rhythm of Space" _xpath="enigma_viii/mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="79" _title="The Show Jumper" _xpath="enigma_viii/andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
@@ -89,15 +89,15 @@
     <level _seq="81" _title="Enigmines" _xpath="enigma_viii/huffman01_1" author="Brian Huffman" ctrl="force" easy="true" id="huffman01" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="Red Cave" _xpath="enigma_viii/mecke21_2" author="mecke" ctrl="force" easy="true" id="mecke21" rel="2" rev="45" score="1" target="time" unit="duration"/>
     <level _seq="83" _title="Status code 302" _xpath="enigma_viii/devnull02_1" author="/dev/null" ctrl="force" easy="true" id="devnull02" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="84" _title="A Screenful of Secrets" _xpath="enigma_viii/mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="34" score="1" target="time" unit="duration"/>
+    <level _seq="84" _title="A Screenful of Secrets" _xpath="enigma_viii/mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="35" score="1" target="time" unit="duration"/>
     <level _seq="85" _title="Southside Life" _xpath="enigma_viii/mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="33" score="1" target="time" unit="duration"/>
     <level _seq="86" _title="Joona's Chess" _xpath="enigma_viii/joona02_1" author="Joona Laire" ctrl="force" easy="true" id="joona02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="87" _title="Helios I" _xpath="enigma_viii/mecke07_1" author="mecke" ctrl="force" easy="false" id="mecke48" rel="1" rev="22" score="1" target="time" unit="duration"/>
-    <level _seq="88" _title="The Green Hell" _xpath="enigma_viii/mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="81" score="1" target="time" unit="duration"/>
+    <level _seq="88" _title="The Green Hell" _xpath="enigma_viii/mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="82" score="1" target="time" unit="duration"/>
     <level _seq="89" _title="Tilt Board" _xpath="enigma_viii/ulf06_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20080529ulf118" rel="2" rev="116" score="2" target="time" unit="duration"/>
     <level _seq="90" _title="4 - 8 - 4" _xpath="enigma_viii/dpl03_3" author="Dominik Leipold" ctrl="force" easy="true" id="20070821dpl003" rel="3" rev="4" score="3" target="time" unit="duration"/>
-    <level _seq="91" _title="Impulsive Order" _xpath="enigma_viii/raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="12" score="1" target="time" unit="duration"/>
-    <level _seq="92" _title="Cross Mail" _xpath="enigma_viii/johann03_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann03" rel="1" rev="8" score="1" target="time" unit="duration"/>
+    <level _seq="91" _title="Impulsive Order" _xpath="enigma_viii/raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="13" score="1" target="time" unit="duration"/>
+    <level _seq="92" _title="Cross Mail" _xpath="enigma_viii/johann03_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann03" rel="1" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="93" _title="Color Maze" _xpath="enigma_viii/pulley16_3" author="Mark Pulley" ctrl="force" easy="false" id="pulley16" rel="3" rev="10" score="3" target="time" unit="duration"/>
     <level _seq="94" _title="Earthlink" _xpath="enigma_viii/pulley15_1" author="Mark Pulley" ctrl="force" easy="true" id="pulley15" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="95" _title="Vanity's Constrictions" _xpath="enigma_viii/andreas53_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas53" rel="2" rev="9" score="2" target="time" unit="duration"/>
@@ -110,7 +110,7 @@
     <level _seq="102" _title="Freestyle Microwire" _xpath="enigma_viii/ral29_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080719ral530" rel="1" rev="129" score="1" target="time" unit="duration"/>
     <level _seq="103" _title="Balance Beam" _xpath="enigma_viii/mecke03_1" author="mecke" ctrl="force" easy="true" id="mecke03" rel="1" rev="37" score="1" target="time" unit="duration"/>
     <level _seq="104" _title="Colored Oxyds" _xpath="enigma_viii/andreas50_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas50" rel="1" rev="8" score="1" target="time" unit="duration"/>
-    <level _seq="105" _title="Styles Change" _xpath="enigma_viii/andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="17" score="2" target="time" unit="duration"/>
+    <level _seq="105" _title="Styles Change" _xpath="enigma_viii/andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="18" score="2" target="time" unit="duration"/>
     <level _seq="106" _title="Colored Turnstiles" _xpath="enigma_viii/andreas51_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas51" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="107" _title="Sanssouci" _xpath="enigma_viii/mecke05_1" author="mecke" ctrl="force" easy="true" id="mecke05" rel="1" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="108" _title="Wired Shogun" _xpath="enigma_viii/ral34_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080828ral417" rel="1" rev="129" score="1" target="time" unit="duration"/>
@@ -122,7 +122,7 @@
     <level _seq="114" _title="Helios II" _xpath="enigma_viii/mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
     <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="154" score="2" target="time" unit="duration"/>
     <level _seq="116" _title="Alternation I" _xpath="enigma_viii/mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
-    <level _seq="117" _title="Enigmaparcour II" _xpath="enigma_viii/mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="16" score="1" target="time" unit="duration"/>
+    <level _seq="117" _title="Enigmaparcour II" _xpath="enigma_viii/mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="17" score="1" target="time" unit="duration"/>
     <level _seq="118" _title=" - Meditation - " _xpath="enigma_viii/devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="119" _title=" - Meditation - " _xpath="enigma_viii/devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="120" _title="- Meditation -" _xpath="enigma_viii/devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="9" score="1" target="time" unit="duration"/>
@@ -133,10 +133,10 @@
     <level _seq="125" _title="On belay?" _xpath="enigma_viii/devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="126" _title="Hang-dogging?" _xpath="enigma_viii/devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="127" _title="Alternation II" _xpath="enigma_viii/mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
-    <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="36" score="1" target="time" unit="duration"/>
-    <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="37" score="1" target="time" unit="duration"/>
+    <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="130" _title="Techno Voodoo" _xpath="enigma_viii/mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="18" score="1" target="time" unit="duration"/>
-    <level _seq="131" _title="Plutos World" _xpath="enigma_viii/mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="131" _title="Plutos World" _xpath="enigma_viii/mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="132" _title="Plutos Confusion" _xpath="enigma_viii/mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="133" _title="Coober Pedy Opals" _xpath="enigma_viii/ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="134" _title="Butterfly Opals" _xpath="enigma_viii/ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/duffy73_3.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy73_3.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_iv/duffy73_3.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Bizarro World" el:subtitle="" el:id="duffy73"/>
-      <el:version el:score="2" el:release="3" el:revision="19" el:status="released"/>
+      <el:version el:score="2" el:release="3" el:revision="20" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -70,7 +70,7 @@
 ti["N"] = {"#ac_top", owner=1, adhesion=0, range=8, strength=20} .. ti["i"]
 ti["R"] = {"st_oneway", orientation=EAST} .. ti["l"]
 ti["J"] = {"st_break_white"}
-ti["D"] = {"it-dynamite"}
+ti["D"] = {"it_dynamite"}
 ti["t"] = {"it_hammer"}
 ti["H"] = {"st_break_oxydc"}
 ti["f"] = {"st_actorimpulse_invisible"}

Modified: trunk/data/levels/enigma_iv/duffy93_3.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy93_3.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_iv/duffy93_3.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Seed Puzzle 2" el:subtitle="" el:id="duffy93"/>
-      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:version el:score="2" el:release="3" el:revision="3" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -19,10 +19,10 @@
 ti[" "] = {"fl_lawn"}
 ti["-"] = {"fl_abyss"}
 ti["#"] = {"st_purplegray"}
-ti["&"] = ti({"st_rawglass"}) .. {"it-blackbomb"}
+ti["&"] = ti({"st_rawglass"}) .. {"it_bomb_black"}
 ti["%"] = {"st_rawglass_movable"}
 ti["X"] = ti({"st_grate", flavor="cross"}) .. {"it_crack_l"}
-ti["B"] = {"st-bombs"}
+ti["B"] = {"st_dispenser"}
 ti["^"] = {"st_oneway", orientation=NORTH}
 ti[">"] = {"st_oneway", orientation=EAST}
 ti["V"] = {"st_oneway", orientation=SOUTH}

Modified: trunk/data/levels/enigma_iv/index.xml
===================================================================
--- trunk/data/levels/enigma_iv/index.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_iv/index.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="29" title="Enigma IV"/>
+  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="30" title="Enigma IV"/>
 
   <attributes/>
 
@@ -79,7 +79,7 @@
     <level _seq="71" _title="Seed Puzzle" _xpath="./duffy77_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy77" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="Action at a Distance" _xpath="./duffy121_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy121" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="73" _title="Long Jump" _xpath="./duffy43_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy43" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="74" _title="Seed Puzzle 2" _xpath="./duffy93_3" author="Jacob Scott" ctrl="force" easy="false" id="duffy93" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="74" _title="Seed Puzzle 2" _xpath="./duffy93_3" author="Jacob Scott" ctrl="force" easy="false" id="duffy93" rel="3" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="75" _title="Electrickery" _xpath="./nat17_1" author="Nat Pryce" ctrl="force" easy="false" id="nat17" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Speed Jump" _xpath="./duffy44_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy44" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Bolder Run" _xpath="./just02_1" author="JuSt" ctrl="force" easy="false" id="just02" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -103,7 +103,7 @@
     <level _seq="95" _title="MetaPuzzle" _xpath="./ant03_1" author="Petr Machata" ctrl="force" easy="false" id="ant03" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="96" _title="TODO" _xpath="lib/todo" author="Martin Hawlisch" ctrl="force" easy="false" id="todo" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="97" _title="Over the Lake" _xpath="./siegfried27_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level9d" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="98" _title="Bizarro World" _xpath="./duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="19" score="2" target="time" unit="duration"/>
+    <level _seq="98" _title="Bizarro World" _xpath="./duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="20" score="2" target="time" unit="duration"/>
     <level _seq="99" _title="Little Puzzles" _xpath="./wb11_1" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb11" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="100" _title="Big Adventures" _xpath="./wb12_1" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb12" rel="1" rev="0" score="1" target="time" unit="duration"/>
   </levels>

Modified: trunk/data/levels/enigma_tutorial/adv_tutorial.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Advanced Tutorial" el:subtitle="" el:id="m_tutor/adv_tutorial"/>
-      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -97,7 +97,7 @@
 ti["tR"] = {"it_trigger", invisible = true, target = "call_rotor"} .. ti[". "]  -- See below for callback function.
 ti["w "] = {"it_magicwand"}
 ti["x "] = {"it_spoon"} .. ti[". "]
-ti["y "] = {"it-dynamite"}
+ti["y "] = {"it_dynamite"}
 ti["iy"] = ti["y "] .. ti["i "]
 
 -- {"it_document", text = "text%17"} .. ti[". "]  -> dQ

Modified: trunk/data/levels/enigma_tutorial/index.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/index.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_tutorial/index.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -71,7 +71,7 @@
     <level _seq="63" _title="Slalom Skiing" _xpath="enigma_ii/martin93_1" author="Martin Hawlisch" ctrl="force" easy="true" id="martin93" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="64" _title="Chess Stones" _xpath="./a_tut07" author="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" ctrl="force" easy="false" id="c_tut01" rel="1" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="Bye!" _xpath="./a_tut06" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut06" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="3" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_v/duffy114_3.xml
===================================================================
--- trunk/data/levels/enigma_v/duffy114_3.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_v/duffy114_3.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Plan Ahead" el:subtitle="" el:id="duffy114"/>
-      <el:version el:score="2" el:release="3" el:revision="4" el:status="released"/>
+      <el:version el:score="2" el:release="3" el:revision="5" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -24,7 +24,7 @@
 ti["("] = {"st_oneway", color=WHITE, orientation=WEST}
 ti[":"] = {"it_meditation_hollow"}
 ti["."] = {"it_seed"}
-ti["d"] = {"it-dynamite"}
+ti["d"] = {"it_dynamite"}
 ti["b"] = {"it_bag"}
 ti["*"] = ti({"st_grate", flavor="cross"}) .. {"it_crack_l"}
 ti["O"] = {"st_oxyd", name="left#"}

Modified: trunk/data/levels/enigma_v/index.xml
===================================================================
--- trunk/data/levels/enigma_v/index.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_v/index.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10600" network="false" owner="Enigma Team" release="1" revision="27" title="Enigma V"/>
+  <info enigma="1.00" group="Enigma" location="10600" network="false" owner="Enigma Team" release="1" revision="28" title="Enigma V"/>
 
   <attributes/>
 
@@ -26,7 +26,7 @@
     <level _seq="18" _title="Double play" _xpath="./just06_1" author="JuSt" ctrl="force" easy="false" id="just06" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Oxyd-Puzzle" _xpath="./raoul05_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul05" rel="2" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="- Meditation -" _xpath="./ralf12_1" author="Ralf Westram" ctrl="force" easy="true" id="ralf12" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="21" _title="Plan Ahead" _xpath="./duffy114_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy114" rel="3" rev="4" score="2" target="time" unit="duration"/>
+    <level _seq="21" _title="Plan Ahead" _xpath="./duffy114_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy114" rel="3" rev="5" score="2" target="time" unit="duration"/>
     <level _seq="22" _title="Keystone" _xpath="./raoul12_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul12" rel="2" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Print 23" _xpath="./richi07_1" author="Richi B?tzer" ctrl="force" easy="false" id="richi07" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="Space Pirates" _xpath="./siegfried19_2" author="Siegfried Fennig" ctrl="force" easy="false" id="level6a" rel="2" rev="0" score="2" target="time" unit="duration"/>
@@ -50,7 +50,7 @@
     <level _seq="42" _title="Choo-Choo" _xpath="./duffy22_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy22" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="43" _title="Humid Maze" _xpath="./duffy133_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy133" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="44" _title="Turnstile City" _xpath="./duffy39_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy39" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="45" _title="Psycho Pushing" _xpath="./ss03_3" author="Sven Siggelkow" ctrl="force" easy="true" id="ss3" rel="3" rev="17" score="2" target="time" unit="duration"/>
+    <level _seq="45" _title="Psycho Pushing" _xpath="./ss03_3" author="Sven Siggelkow" ctrl="force" easy="true" id="ss3" rel="3" rev="18" score="2" target="time" unit="duration"/>
     <level _seq="46" _title="Turnstile Maze" _xpath="./duffy53_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy53" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="47" _title="Swamp Stomp" _xpath="./ralf11_2" author="Ralf Westram" ctrl="force" easy="true" id="ralf11" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="48" _title="Crossfire" _xpath="./duffy56_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy56" rel="2" rev="2" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_v/ss03_3.xml
===================================================================
--- trunk/data/levels/enigma_v/ss03_3.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_v/ss03_3.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Psycho Pushing" el:subtitle="" el:id="ss3"/>
-      <el:version el:score="2" el:release="3" el:revision="17" el:status="released"/>
+      <el:version el:score="2" el:release="3" el:revision="18" el:status="released"/>
       <el:author  el:name="Sven Siggelkow" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Sven Siggelkow</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -27,7 +27,7 @@
 ti["- "] = {"st_door", flavor="d", faces="ns"}
 ti["T "] = {"st_thief"}
 ti["C "] = {"st_coinslot", target="door3"}
-ti["B "] = {"st-bombs"}
+ti["B "] = {"st_dispenser"}
 ti["X "] = {"st_grate_framed"}
 ti["M "] = {"st_blocker"}
 ti["W "] = {"st_box_wood"}
@@ -48,8 +48,8 @@
 ti["O "] = {"st_oxyd", flavor="c"}
 ti["t "] = {"it_trigger"}
 ti[" m"] = {"it_magicwand"}
-ti[" g"] = {"it-blackbomb"}
-ti[" b"] = {"it-blackbomb", "bomb4"}
+ti[" g"] = {"it_bomb_black"}
+ti[" b"] = {"it_bomb_black", "bomb4"}
 ti[" e"] = {"it_extralife"}
 ti[" c"] = {"it_crack_l"}
 ti[" y"] = {"it_yinyang"}
@@ -70,7 +70,7 @@
 ti[" v"] = {"it_meditation_hollow"}
 ti[" d"] = {"it_document", text="text2"}
 ti[" -"] = {"it_meditation_dent"}
-ti[" w"] = {"it_whitebomb"}
+ti[" w"] = {"it_bomb_white"}
 ti[" !"] = {"it_wormhole", "worm5", destination="destination5", strength=5}
 ti[" o"] = {"it_spade"}
 ti[" x"] = {"it_document", text="text2"}

Modified: trunk/data/levels/enigma_vi/duffy137_2.xml
===================================================================
--- trunk/data/levels/enigma_vi/duffy137_2.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_vi/duffy137_2.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Pontoon Bridges" el:subtitle="" el:id="duffy137"/>
-      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -17,12 +17,12 @@
 ti["~"] = {"fl_water"}
 ti["#"] = {"st_greenbrown"}
 ti["="] = ti["~"] .. {"st_greenbrown"}
-ti["B"] = {"st-bombs"}
+ti["B"] = {"st_dispenser"}
 ti["1"] = {"st_puzzle", cluster=1}
 ti["2"] = {"st_puzzle", cluster=2}
 ti["3"] = {"st_puzzle", cluster=3}
 ti["4"] = ti["~"] .. ti["3"]
-ti["d"] = {"it-dynamite"}
+ti["d"] = {"it_dynamite"}
 ti["O"] = {"st_oxyd"}
 ti["@"] = {"#ac_marble_black"}
 

Modified: trunk/data/levels/enigma_vi/index.xml
===================================================================
--- trunk/data/levels/enigma_vi/index.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_vi/index.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="34" title="Enigma VI"/>
+  <info enigma="1.00" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="35" title="Enigma VI"/>
 
   <attributes/>
 
@@ -87,7 +87,7 @@
     <level _seq="79" _title="Quadropolis" _xpath="./cel1_1" author="Johannes Laire, Jacob Scott, Raoul Bourquin, Andreas Lochmann" ctrl="force" easy="false" id="cel2007_364" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="- Meditation -" _xpath="./raoul18_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul18" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Magic Trinity" _xpath="./duffy146_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy146" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="82" _title="Pontoon Bridges" _xpath="./duffy137_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy137" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="82" _title="Pontoon Bridges" _xpath="./duffy137_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy137" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="83" _title="The Cube" _xpath="./malaire01_1" author="Markus Laire" ctrl="force" easy="true" id="20061120malaire901" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="84" _title="Blitz Chess" _xpath="./luc32_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc322006" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="85" _title="One-Way Woods" _xpath="./duffy135_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy135" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_vii/index.xml
===================================================================
--- trunk/data/levels/enigma_vii/index.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_vii/index.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="41" title="Enigma VII"/>
+  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="42" title="Enigma VII"/>
 
   <attributes/>
 
@@ -83,8 +83,8 @@
     <level _seq="75" _title="Swapping Puzzle II" _xpath="./joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Multiban" _xpath="./dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Riverside" _xpath="./johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="18" score="2" target="time" unit="duration"/>
-    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="20" score="1" target="time" unit="duration"/>
+    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="19" score="2" target="time" unit="duration"/>
+    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="21" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="Spaceship Control" _xpath="./safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Ball Alley" _xpath="./johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="Action Potential" _xpath="./pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -105,7 +105,7 @@
     <level _seq="97" _title="Blue Screen Of Death" _xpath="./pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="98" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
     <level _seq="99" _title="Black Liberation" _xpath="./mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
-    <level _seq="100" _title="Jack-Of-All-Trades" _xpath="./mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="47" score="1" target="time" unit="duration"/>
+    <level _seq="100" _title="Jack-Of-All-Trades" _xpath="./mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="48" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_vii/mecke12_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/mecke12_2.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_vii/mecke12_2.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Jack-Of-All-Trades" el:subtitle="Find The Paradise" el:id="mecke12"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 47 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 48 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -58,7 +58,7 @@
 ti["o "] = {"it_springboard"}
 ti["3 "] = {"st_door", faces="ns"}
 ti["f "] = {"it_coffee"}
-ti["g "] = {"it-blackbomb"}
+ti["g "] = {"it_bomb_black"}
 ti["5 "] = {"st_passage_black_cross"}
 ti["6 "] = {"st_granite"}
 ti[" 1"] = {"fl_redslab"}

Modified: trunk/data/levels/enigma_vii/pulley04_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Lone Ranger" el:subtitle="" el:id="pulley04"/>
-      <el:version el:score="2" el:release="2" el:revision="18" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="19" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -50,7 +50,7 @@
 ti["K"] = ti["y"] .. {"st_grate_cross"} --Grate on blue floor
 ti["L"] = ti[" "] .. {"it_landmine"}
 ti["M"] = ti[" "] .. {"it_spoon"}
-ti["N"] = ti[" "] .. {"it-dynamite"}
+ti["N"] = ti[" "] .. {"it_dynamite"}
 ti["O"] = ti["y"] .. {"st_invisible"} --Invisible stone on blue floor
 ti["P"] = ti[" "] .. {"st_door_a", name="Door1"} -- Tonto's prison door
 ti["Q"] = ti[" "] .. {"#ac_rotor", range=10, gohome=0}

Modified: trunk/data/levels/enigma_vii/pulley07_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Little Shop Of Horrors" el:subtitle="Watch out, here comes Audrey II!" el:id="pulley07"/>
-      <el:version el:score="1" el:release="1" el:revision="20" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="21" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -66,7 +66,7 @@
 ti["y"] = {"fl_woven"}
 ti["z"] = {"fl_plank"}
 ti["A"] = {"fl_lawn"} .. ti({"it_banana"})
-ti["B"] = {"fl_plank"} .. ti({"it-blackbomb"})
+ti["B"] = {"fl_plank"} .. ti({"it_bomb_black"})
 ti["D"] = {"fl_bright"} .. ti({"st_death"})
 ti["E"] = {"fl_lawn"} .. ti({"it_cherry"})
 ti["F"] = {"fl_plank"} .. ti({"it_seed"})

Modified: trunk/data/levels/enigma_viii/andreas48_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/andreas48_2.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/andreas48_2.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Styles Change" el:subtitle="But dynamite is forever" el:id="andreas48"/>
-      <el:version el:score="2" el:release="2" el:revision="17" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="18" el:status="released"/>
       <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -134,7 +134,7 @@
   ti["v"..j] = {"it_vortex", "vortex_"..spot, autoclose = true, state = CLOSED,
                  destination = "start_position"} .. ti["_"..j]
   ti["O"..j] = {"st_oxyd", oxydcolor = design[5]} .. ti["_"..j]
-  ti["d"..j] = {"it-dynamite"} .. ti["_"..j]
+  ti["d"..j] = {"it_dynamite"} .. ti["_"..j]
   ti["G"..j] = {"it_glasses", state = spot_constants[spot_permutation[(j%5) + 1]]}
                .. ti["_"..j]
   ti["H"..j] = {"it_glasses", state = spot_constants[spot_permutation[((j+1)%5) + 1]]}

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="31" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="32" title="Enigma VIII"/>
 
   <attributes/>
 
@@ -14,15 +14,15 @@
     <level _seq="6" _title="Enigmines" _xpath="./huffman01_1" author="Brian Huffman" ctrl="force" easy="true" id="huffman01" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="7" _title="Red Cave" _xpath="./mecke21_2" author="mecke" ctrl="force" easy="true" id="mecke21" rel="2" rev="45" score="1" target="time" unit="duration"/>
     <level _seq="8" _title="Status code 302" _xpath="./devnull02_1" author="/dev/null" ctrl="force" easy="true" id="devnull02" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="9" _title="A Screenful of Secrets" _xpath="./mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="34" score="1" target="time" unit="duration"/>
+    <level _seq="9" _title="A Screenful of Secrets" _xpath="./mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="35" score="1" target="time" unit="duration"/>
     <level _seq="10" _title="Southside Life" _xpath="./mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="33" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="Joona's Chess" _xpath="./joona02_1" author="Joona Laire" ctrl="force" easy="true" id="joona02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="Helios I" _xpath="./mecke07_1" author="mecke" ctrl="force" easy="false" id="mecke48" rel="1" rev="22" score="1" target="time" unit="duration"/>
-    <level _seq="13" _title="The Green Hell" _xpath="./mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="81" score="1" target="time" unit="duration"/>
+    <level _seq="13" _title="The Green Hell" _xpath="./mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="82" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="Tilt Board" _xpath="./ulf06_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20080529ulf118" rel="2" rev="116" score="2" target="time" unit="duration"/>
     <level _seq="15" _title="4 - 8 - 4" _xpath="./dpl03_3" author="Dominik Leipold" ctrl="force" easy="true" id="20070821dpl003" rel="3" rev="4" score="3" target="time" unit="duration"/>
-    <level _seq="16" _title="Impulsive Order" _xpath="./raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="12" score="1" target="time" unit="duration"/>
-    <level _seq="17" _title="Cross Mail" _xpath="./johann03_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann03" rel="1" rev="8" score="1" target="time" unit="duration"/>
+    <level _seq="16" _title="Impulsive Order" _xpath="./raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="13" score="1" target="time" unit="duration"/>
+    <level _seq="17" _title="Cross Mail" _xpath="./johann03_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann03" rel="1" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="Color Maze" _xpath="./pulley16_3" author="Mark Pulley" ctrl="force" easy="false" id="pulley16" rel="3" rev="10" score="3" target="time" unit="duration"/>
     <level _seq="19" _title="Earthlink" _xpath="./pulley15_1" author="Mark Pulley" ctrl="force" easy="true" id="pulley15" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="Vanity's Constrictions" _xpath="./andreas53_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas53" rel="2" rev="9" score="2" target="time" unit="duration"/>
@@ -35,7 +35,7 @@
     <level _seq="27" _title="Freestyle Microwire" _xpath="./ral29_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080719ral530" rel="1" rev="129" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Balance Beam" _xpath="./mecke03_1" author="mecke" ctrl="force" easy="true" id="mecke03" rel="1" rev="37" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Colored Oxyds" _xpath="./andreas50_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas50" rel="1" rev="8" score="1" target="time" unit="duration"/>
-    <level _seq="30" _title="Styles Change" _xpath="./andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="17" score="2" target="time" unit="duration"/>
+    <level _seq="30" _title="Styles Change" _xpath="./andreas48_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas48" rel="2" rev="18" score="2" target="time" unit="duration"/>
     <level _seq="31" _title="Colored Turnstiles" _xpath="./andreas51_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas51" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Sanssouci" _xpath="./mecke05_1" author="mecke" ctrl="force" easy="true" id="mecke05" rel="1" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Wired Shogun" _xpath="./ral34_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080828ral417" rel="1" rev="129" score="1" target="time" unit="duration"/>
@@ -45,7 +45,7 @@
     <level _seq="37" _title="Helios II" _xpath="./mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
     <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="154" score="2" target="time" unit="duration"/>
     <level _seq="39" _title="Alternation I" _xpath="./mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
-    <level _seq="40" _title="Enigmaparcour II" _xpath="./mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="16" score="1" target="time" unit="duration"/>
+    <level _seq="40" _title="Enigmaparcour II" _xpath="./mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="17" score="1" target="time" unit="duration"/>
     <level _seq="41" _title=" - Meditation - " _xpath="./devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="42" _title=" - Meditation - " _xpath="./devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="43" _title="- Meditation -" _xpath="./devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="9" score="1" target="time" unit="duration"/>
@@ -56,10 +56,10 @@
     <level _seq="48" _title="On belay?" _xpath="./devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Hang-dogging?" _xpath="./devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Alternation II" _xpath="./mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
-    <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="36" score="1" target="time" unit="duration"/>
-    <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="37" score="1" target="time" unit="duration"/>
+    <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Techno Voodoo" _xpath="./mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="18" score="1" target="time" unit="duration"/>
-    <level _seq="54" _title="Plutos World" _xpath="./mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="Plutos World" _xpath="./mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="55" _title="Plutos Confusion" _xpath="./mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Minopal" _xpath="./andreas54_1" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas54" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Coober Pedy Opals" _xpath="./ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_viii/johann03_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/johann03_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/johann03_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Cross Mail" el:subtitle="The level goes on" el:id="johann03"/>
-      <el:version el:score="1" el:release="1" el:revision="8" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="9" el:status="released"/>
       <el:author  el:name="Johann Freymuth" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Johann Freymuth</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -23,8 +23,8 @@
 ti["6"] = {"it_pipe_nw"}
 ti["b"] = {"it_brush"}
 ti["h"] = {"it_hammer"}
-ti["d"] = {"it-dynamite"}
-ti["o"] = {"it-blackbomb"}
+ti["d"] = {"it_dynamite"}
+ti["o"] = {"it_bomb_black"}
 ti["#"] = {"st_darkglass"}
 ti["C"] = {"st_lightglass"}
 ti["0"] = ti["C"] .. {"it_pipe_ns"}

Modified: trunk/data/levels/enigma_viii/mecke01_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke01_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/mecke01_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="A Screenful of Secrets" el:subtitle="My First Level" el:id="mecke01"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 34 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 35 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -53,7 +53,7 @@
 ti["= "] = {"st_mirror_triangle", movable=false, transparent=false, orientation=EAST}
 ti["T "] = ti["X "] .. {"#ac_top", range=1, strength=1}
 ti["6 "] = {"st_panel"}
-ti["b "] = {"it-blackbomb"}
+ti["b "] = {"it_bomb_black"}
 ti["B "] = ti["b "] .. ti["X "]
 ti["e "] = {"it_extralife"}
 ti["Y "] = {"it_brush"}

Modified: trunk/data/levels/enigma_viii/mecke02_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke02_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/mecke02_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Plutos World" el:subtitle="Deep ..." el:id="mecke16"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 19 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 20 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -42,8 +42,8 @@
 ti["ic"] = {"st_break_oxydc"}
 ti["h "] = {"st_bluegray_hollow"}
 ti["Xn"] = ti["nn"] .. {"st_grate_cross"}
-ti[" b"] = ti["  "] .. {"it-blackbomb"}
-ti["i "] = ti["  "] .. {"it-dynamite"}
+ti[" b"] = ti["  "] .. {"it_bomb_black"}
+ti["i "] = ti["  "] .. {"it_dynamite"}
 ti["ih"] = ti["  "] .. {"it_hammer"}
 ti["w "] = ti["  "] .. {"it_magicwand"}
 ti[": "] = ti["  "] .. {"it_blocker"}

Modified: trunk/data/levels/enigma_viii/mecke19_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke19_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/mecke19_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Turbulencia" el:subtitle="Meditation! Silence? ... Have a Look ..." el:id="mecke19" />
-      <el:version el:score="1" el:release="1" el:revision="$Revision:19$" el:status="released" />
+      <el:version el:score="1" el:release="1" el:revision="$Revision:20$" el:status="released" />
       <el:author el:name="mecke" el:email="" />
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true" />
@@ -43,7 +43,7 @@
 ti[" *"] = {"fl-gradient4"}
 ti["- "] = {"st_boulder_w"}
 ti[". "] = {"st_grate_cross"}
-ti[" d"] = ti["hh"] .. {"it-dynamite"}
+ti[" d"] = ti["hh"] .. {"it_dynamite"}
 ti["c "] = {"it_crack_l"}
 ti["? "] = {"it_seed_volcano"}
 ti[" +"] = {"fl_rough"}

Modified: trunk/data/levels/enigma_viii/mecke22_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke22_2.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/mecke22_2.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Green Hell" el:subtitle="Exploration Trip to Green Waters" el:id="mecke22"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision:81$" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision:82$" el:status="released"/>
       <el:author  el:name="mecke" el:email=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -137,11 +137,11 @@
 ti["c!"] = ti["c "] .. {"fl_swamp"}
 ti["e-"] = ti["=-"] .. {"it_cherry"}
 ti["e!"] = ti[" !"] .. {"it_cherry"}
-ti["=d"] = ti["=-"] .. {"it-dynamite"}
-ti["d~"] = ti[" $"] .. {"it-dynamite"}
-ti["b$"] = ti[" $"] .. {"it-blackbomb"}
-ti["b3"] = ti[" 3"] .. {"it-blackbomb"}
-ti["b#"] = ti[" #"] .. {"it-blackbomb"}
+ti["=d"] = ti["=-"] .. {"it_dynamite"}
+ti["d~"] = ti[" $"] .. {"it_dynamite"}
+ti["b$"] = ti[" $"] .. {"it_bomb_black"}
+ti["b3"] = ti[" 3"] .. {"it_bomb_black"}
+ti["b#"] = ti[" #"] .. {"it_bomb_black"}
 ti["s$"] = ti[" $"] .. {"it_squashed"}
 ti["v1"] = ti["=!"] .. {"it_vortex_open", name="vortex1", destination="vortex2"}
 ti["v2"] = ti["=-"] .. {"it_vortex_open", name="vortex2", destination="vortex1"}
@@ -230,7 +230,7 @@
    ti["LL"] = ti[" +"] .. {"st_laser_n",name="liz1#",state=OFF}
    ti["LZ"] = ti[" ;"] .. {"it_burnable_oil"}
 else
-   ti["i+"] = ti[" +"] .. {"it-dynamite"}
+   ti["i+"] = ti[" +"] .. {"it_dynamite"}
    ti["rt"] = ti[" '"] .. {"st_ghost_break"}
    ti["rr"] = ti["rt"] .. {"#ac_rotor", range=3, strength=3}
    ti["ww"] = {"fl_swamp"}

Modified: trunk/data/levels/enigma_viii/mecke23_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke23_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/mecke23_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Fifty Years Later ..." el:subtitle="Survival Training in wasted Landscapes ..." el:id="mecke23"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 36 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 37 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -68,7 +68,7 @@
 ti["*w"] = ti[" '"] .. {"#ac_marble_white",essential=1}
 ti["= "] = ti[" ."] .. {"it_seed"}
 ti[" ="] = {"fl_water"}
-ti[" b"] = {"it-dynamite"}
+ti[" b"] = {"it_dynamite"}
 ti["!0"] = {"it_burnable_oil"}
 ti["ka"] = {"it_floppy"}
 ti["K1"] = {"st_floppy",target="ollf1"}
@@ -79,10 +79,10 @@
 ti[":3"] = {"st_door",faces="ns",name="ollf3"}
 ti["K4"] = {"st_floppy",target="ollf4"}
 ti[":4"] = {"st_door",faces="ns",name="ollf4"}
-ti["bb"] = ti[" *"] .. {"it-blackbomb"}
-ti[" ~"] = ti[" ="] .. {"it-blackbomb"}
+ti["bb"] = ti[" *"] .. {"it_bomb_black"}
+ti[" ~"] = ti[" ="] .. {"it_bomb_black"}
 ti[" _"] = ti[" ="] .. {"it_cherry"}
-ti[" 2"] = ti[" 1"] .. {"it-dynamite"}
+ti[" 2"] = ti[" 1"] .. {"it_dynamite"}
 ti[" -"] = ti[" a"] .. {"it_bottle_broken", 0.5, 0.5}
 ti["!1"] = ti[" ="] .. {"st_disco"}
 ti["!2"] = ti["!0"] .. {"st_disco",state=MEDIUM}

Modified: trunk/data/levels/enigma_viii/mecke29_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke29_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/mecke29_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Enigmaparcour II" el:subtitle="Open the Doors" el:id="mecke29"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 16 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 17 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -28,7 +28,7 @@
 end
 
 ti["' "] = {"it_trap"}
-ti["b "] = {"it-blackbomb"}
+ti["b "] = {"it_bomb_black"}
 ti[" ~"] = {"fl_water"}
 ti["r_"] = {"fl_red"}
 ti["b~"] = ti["b "] .. {"fl_water"}
@@ -116,13 +116,13 @@
 ti["N "] = ti[" v"] .. {"st_break_oxydc"}
 ti["- "] = ti[" ~"] .. {"it_strip_ew"}
 ti["h2"] = ti["h1"] .. {"it_cherry"}
-ti["h3"] = ti["h1"] .. {"it-dynamite"}
+ti["h3"] = ti["h1"] .. {"it_dynamite"}
 ti["gt"] = {"it_glasses", state = SPOT_TRAP}
 ti["gd"] = {"it_glasses", state = SPOT_DEATH}
 ti["5 "] = {"it_key", code=1}
 ti["o "] = {"it_springboard"}
 ti["j "] = {"it_magicwand"}
-ti[" z"] = {"it-dynamite"}
+ti[" z"] = {"it_dynamite"}
 ti["P "] = {"st_grate_cross"}
 ti["9 "] = {"st_turnstile_green"}
 ti["99"] = {"st_turnstile_red"}

Modified: trunk/data/levels/enigma_viii/raywick05_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/raywick05_1.xml	2009-02-04 13:14:38 UTC (rev 1511)
+++ trunk/data/levels/enigma_viii/raywick05_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Impulsive Order" el:subtitle="" el:id="raywick5"/>
-      <el:version el:score="1" el:release="1" el:revision="12" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="13" el:status="released"/>
       <el:author  el:name="Ray Wick" el:email=""/>
       <el:copyright>Copyright ? 2008 Ray Wick</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -37,7 +37,7 @@
 ti["L"] = {"st_laser", name="laser1", orientation=SOUTH}
 ti["M"] = {"st_mirror", transparent=true, orientation=0}
 ti["Z"] = {"st_shogun_sml"}
-ti["x"] = {"it-blackbomb"}
+ti["x"] = {"it_bomb_black"}
 ti["s"] = ti["G"] .. {"it_spring_keep"}
 ti["z"] = {"it_shogun_l", action="open", target="door1"}
 ti["B"] = {"it_trigger", action_1="signal", action_0="nop", target="outer#*"}



From raoul at mail.berlios.de  Thu Feb  5 00:16:48 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Thu, 5 Feb 2009 00:16:48 +0100
Subject: [Enigma-game-svn] r1513 - team_levelpacks/team_test_new_api
Message-ID: <200902042316.n14NGmHw029934@sheep.berlios.de>

Author: raoul
Date: 2009-02-05 00:16:47 +0100 (Thu, 05 Feb 2009)
New Revision: 1513

Modified:
   team_levelpacks/team_test_new_api/andreasT01_1.xml
   team_levelpacks/team_test_new_api/ralT028_1.xml
   team_levelpacks/team_test_new_api/ralT030_1.xml
   team_levelpacks/team_test_new_api/ralT031_1.xml
   team_levelpacks/team_test_new_api/ralT037_1.xml
   team_levelpacks/team_test_new_api/ralT058_1.xml
   team_levelpacks/team_test_new_api/ralT061_1.xml
   team_levelpacks/team_test_new_api/ralT064_1.xml
   team_levelpacks/team_test_new_api/ralT065_1.xml
   team_levelpacks/team_test_new_api/ralT066_1.xml
   team_levelpacks/team_test_new_api/ralT068_1.xml
   team_levelpacks/team_test_new_api/ralT071_1.xml
   team_levelpacks/team_test_new_api/ralT075_1.xml
   team_levelpacks/team_test_new_api/ralT077_1.xml
   team_levelpacks/team_test_new_api/ralT079_1.xml
   team_levelpacks/team_test_new_api/raoulT03_1.xml
Log:
-> Testlevel updates for latest renamings


Modified: team_levelpacks/team_test_new_api/andreasT01_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/andreasT01_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/andreasT01_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Test Trap new API" el:subtitle="" el:id="testtrap_andreas"/>
-      <el:version el:score="1" el:release="1" el:revision="2" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="3" el:status="experimental"/>
       <el:author  el:name="Andreas Lochmann" el:email=""/>
       <el:copyright>Copyright ? 2008 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -33,8 +33,8 @@
 ti["h"] = {"it_glasses", state = SPOT_SENSOR}
 ti["u"] = {"it_umbrella"}
 ti["d"] = {"st_death_invisible"}
-ti["b"] = {"it-blackbomb"}
-ti["y"] = {"it-dynamite"}
+ti["b"] = {"it_bomb_black"}
+ti["y"] = {"it_dynamite"}
 ti["w"] = ti["."] .. {"st_window", faces="e"}
 ti["r"] = {"it_wrench"}
 ti["t"] = {"it_spring"}

Modified: team_levelpacks/team_test_new_api/ralT028_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT028_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT028_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -44,8 +44,8 @@
 ti["w"] = {"st_switch", target="Laser%7", action="toggle"}
 ti["f"] = {"st_quake"}
 ti["h"] = {"it_hammer"}
-ti["d"] = {"it-dynamite"}
-ti["E"] = {"st-bombs"}
+ti["d"] = {"it_dynamite"}
+ti["E"] = {"st_dispenser"}
 
 ti["t"] = {"st_oxyd", "t#"}
 
@@ -96,7 +96,7 @@
 function enlighten(value, sender)
     -- the single opened oxyd
     no["Laser" .. string.sub(sender["name"],2)]:toggle()
-    
+
     -- all pair opened oxyds with the second laser
     for i=1,6 do
         if no["o%"..i]["state"] == 2 then

Modified: team_levelpacks/team_test_new_api/ralT030_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT030_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT030_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -21,7 +21,7 @@
 
 ti[" "] = {"fl_sahara"}
 ti["#"] = ti[" "] .. {"st_granite"}
-ti["~"] = ti({"fl_blueslab"}) .. {"st-chameleon"}
+ti["~"] = ti({"fl_blueslab"}) .. {"st_chameleon"}
 
 ti["s"] = ti[" "] .. {"st_swap"}
 
@@ -60,7 +60,7 @@
 })
 
 
-  
+
   ]]></el:luamain>
     <el:i18n>
 	 <el:string el:key="title">

Modified: team_levelpacks/team_test_new_api/ralT031_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT031_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT031_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -50,10 +50,10 @@
 ti["W"] = ti[" "] .. {"st_box"}
 ti["U"] = ti[" "] .. {"st_plop"}
 ti["V"] = ti[" "] .. {"st_brownie"}
-ti["u"] = ti[" "] .. {"it-spring1"}
+ti["u"] = ti[" "] .. {"it_spring_keep"}
 ti["v"] = ti[" "] .. {"st_brake"}
 ti["Y"] = ti[" "] .. {"st_death"}
-ti["z"] = ti[" "] .. {"it-dynamite"}
+ti["z"] = ti[" "] .. {"it_dynamite"}
 
 ti["M"] = ti[" "] .. {"st_switch", target="maketrigger"}
 ti["m"] = ti[" "] .. {"st_switch", target="makeactor"}
@@ -90,7 +90,7 @@
 function maketrigger(value, sender)
     wo[sender + {1,0}] = {"it_trigger", target={"laserf","laserfon"}, action={"toggle", "on"}}
 end
-  
+
 function makeactor(value, sender)
     wo[no["triggerA"]] = {"#ac_pearl", owner=nil, controllers=0}
 end
@@ -98,7 +98,7 @@
 function killstone(value, sender)
     wo[sender] = {"st_nil"}
 end
-  
+
   ]]></el:luamain>
     <el:i18n>
 	 <el:string el:key="title">

Modified: team_levelpacks/team_test_new_api/ralT037_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT037_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT037_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -32,9 +32,9 @@
 ti["m"] = {"it_magnet_on", strength=-40}
 ti["b"] = {"st_brake"}
 ti["B"] = ti["~"] .. ti["b"]
-ti["."] = {"it-springboard"}
-ti["|"] = {"it-spring1"}
-ti[";"] = {"it-spring2"}
+ti["."] = {"it_springboard"}
+ti["|"] = {"it_spring_keep"}
+ti[";"] = {"it_spring_drop"}
 ti["*"] = {"it_landmine"}
 
 

Modified: team_levelpacks/team_test_new_api/ralT058_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT058_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT058_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -26,18 +26,18 @@
 ti["a"] = {"st_oneway_black", state=NORTH}
 
 ti["m"] = {"it_magicwand"}
-ti["s"] = {"it-spring1"}
-ti["S"] = {"it-springboard"}
+ti["s"] = {"it_spring_keep"}
+ti["S"] = {"it_springboard"}
 
 
 
-ti["@"] = {"#ac_marble_black"} 
-ti["2"] = {"#ac_marble_white"} 
-ti["3"] = {"#ac_rotor"} 
-ti["4"] = {"#ac_bug"} 
-ti["5"] = {"#ac_horse"} 
-ti["6"] = {"#ac_killer"} 
-ti["7"] = {"#ac_top"} 
+ti["@"] = {"#ac_marble_black"}
+ti["2"] = {"#ac_marble_white"}
+ti["3"] = {"#ac_rotor"}
+ti["4"] = {"#ac_bug"}
+ti["5"] = {"#ac_horse"}
+ti["6"] = {"#ac_killer"}
+ti["7"] = {"#ac_top"}
 
 
 w, h = wo(ti, " ", {

Modified: team_levelpacks/team_test_new_api/ralT061_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT061_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT061_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Test Pull,Swap,Brake new API" el:subtitle="" el:id="20080818ral371"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1267 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1268 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -44,12 +44,12 @@
 ti["t"] = {"it_trigger", target="pol1"}
 ti["T"] = {"it_trigger", target="pol2"}
 
-ti["d"] = {"it-dynamite"}
-ti["E"] = {"st-bombs"}
-ti["|"] = {"it-spring1"}
+ti["d"] = {"it_dynamite"}
+ti["E"] = {"st_dispenser"}
+ti["|"] = {"it_spring_keep"}
 
-ti["@"] = {"#ac_marble_black"} 
-ti["."] = {"#ac_marble_white", "white"} 
+ti["@"] = {"#ac_marble_black"}
+ti["."] = {"#ac_marble_white", "white"}
 
 
 w, h = wo(ti, " ", {

Modified: team_levelpacks/team_test_new_api/ralT064_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT064_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT064_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -39,11 +39,11 @@
 ti["h"] = {"it_hammer"}
 ti["m"] = {"it_magicwand"}
 ti["b"] = {"st_brake"}
-ti["d"] = {"it-dynamite"}
-ti["B"] = {"st-bombs"}
+ti["d"] = {"it_dynamite"}
+ti["B"] = {"st_dispenser"}
 
-ti["@"] = {"#ac_marble_black"} 
-ti["."] = {"#ac_marble_white", "white"} 
+ti["@"] = {"#ac_marble_black"}
+ti["."] = {"#ac_marble_white", "white"}
 
 w, h = wo(ti, " ", {
 "B ddd           1234",

Modified: team_levelpacks/team_test_new_api/ralT065_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT065_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT065_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Test Meditation new API" el:subtitle="" el:id="20080829ral370"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1278 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1279 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -31,15 +31,15 @@
 ti[")"] = {"it_meditation_caldera", "vol#"}
 
 ti["w"] = {"st_box"}
-ti["d"] = {"it-dynamite"}
+ti["d"] = {"it_dynamite"}
 ti["?"] = {"it_spade"}
 ti["S"] = {"st_switch", target="hilli#*", action="flip"}
 ti["s"] = {"st_switch", target="bumpd#*", action="signal"}
 ti["T"] = {"st_switch", target="@vol#*", action="toggle"}
 ti["F"] = {"st_fourswitch", target="@vol#*", action_0="flip", action_2="flip"}
 
-ti["@"] = {"#ac_pearl"} 
-ti["1"] = {"#ac_marble"} 
+ti["@"] = {"#ac_pearl"}
+ti["1"] = {"#ac_marble"}
 
 w, h = wo(ti, " ", {
 "F             T    T",

Modified: team_levelpacks/team_test_new_api/ralT066_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT066_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT066_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -32,14 +32,14 @@
 ti["#"] = {"st_granite"}
 ti["s"] = {"st_switch", target="@door#*"}
 
-ti["e"] = {"it-dynamite"}
+ti["e"] = {"it_dynamite"}
 ti["E"] = {"it_extinguisher"}
 ti["F"] = {"it_extinguisher_medium"}
 ti["G"] = {"it_extinguisher_empty", "refill"}
 
 ti["L"] = {"st_switch", target="refill"}
 
-ti["@"] = {"#ac_marble"} 
+ti["@"] = {"#ac_marble"}
 
 w, h = wo(ti, " ", {
 "         #          ",

Modified: team_levelpacks/team_test_new_api/ralT068_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT068_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT068_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -33,7 +33,7 @@
 ti["w"] = {"st_box"}
 ti["g"] = {"st_rawglass_movable"}
 ti["c"] = {"it_cherry"}
-ti["s"] = {"it-spring1"}
+ti["s"] = {"it_spring_keep"}
 ti["p"] = {"st_pull"}
 ti["W"] = {"st_window_ew", secure=true}
 ti["h"] = {"st_puzzle", hollow=true, connections="nesw"}
@@ -43,7 +43,7 @@
 
 ti["b"] = {"st_brake"}
 
-ti["@"] = {"#ac_marble"} 
+ti["@"] = {"#ac_marble"}
 
 w, h = wo(ti, " ", {
 "    S    S     S    ",

Modified: team_levelpacks/team_test_new_api/ralT071_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT071_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT071_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -27,7 +27,7 @@
 ti[","] = {"st_stoneimpulse_movable", steady = true}
 
 ti["m"] = {"it_magicwand"}
-ti["d"] = {"it-dynamite"}
+ti["d"] = {"it_dynamite"}
 ti["w"] = {"st_box"}
 ti["s"] = {"st_swap"}
 ti["p"] = {"st_polarswitch"}

Modified: team_levelpacks/team_test_new_api/ralT075_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT075_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT075_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -52,7 +52,7 @@
 ti["7"] = {"it_puller_e"}
 ti["8"] = {"it_puller_n"}
 
-ti["T"] = {"it-bag", "bag"}
+ti["T"] = {"it_bag", "bag"}
 
 ti["E"] = {"st_ghost_purplemarble"}
 ti["F"] = {"st_ghost_greenbrown"}
@@ -90,7 +90,7 @@
    "####################",
 })
 
-wo:add(YIN, ti["f"] .. ti["5"] .. {"it_banana"} .. ti["m"] .. {"it-bag", "bag2"})
+wo:add(YIN, ti["f"] .. ti["5"] .. {"it_banana"} .. ti["m"] .. {"it_bag", "bag2"})
 wo:add(no["bag"], ti["7"] .. {"it_cherry"} .. ti["m"])
 wo:add(no["bag2"], ti["8"] .. {"it_coin_s"})
   ]]></el:luamain>

Modified: team_levelpacks/team_test_new_api/ralT077_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT077_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT077_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -44,7 +44,7 @@
 ti["p"] = {"it_pin"}
 ti["P"] = {"it_bag", "pinbag"}
 
-ti["d"] = {"it-booze"}
+ti["d"] = {"it_bottle"}
 
 
 w, h = wo(ti, " ", {

Modified: team_levelpacks/team_test_new_api/ralT079_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT079_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/ralT079_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -22,7 +22,7 @@
 ti[" "] = {"fl_sahara"}
 ti["~"] = {"fl_ice"}
 ti["."] = {"fl_space"}
-ti["1"] = {"#ac_marble"}
+ti["1"] = {"#ac_marble", essential=DISPENSIBLE}
 ti["2"] = {"#ac_marble_white"}
 ti["d"] = {"it_dynamite"}
 ti["b"] = {"it_bomb_black"}

Modified: team_levelpacks/team_test_new_api/raoulT03_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT03_1.xml	2009-02-04 15:17:06 UTC (rev 1512)
+++ team_levelpacks/team_test_new_api/raoulT03_1.xml	2009-02-04 23:16:47 UTC (rev 1513)
@@ -54,9 +54,9 @@
 ti["s"] = {"it_seed"}
 ti["k"] = {"it_coffee"}
 ti["K"] = {"it_cherry"}
-ti[":"] = {"it-dynamite"}
+ti[":"] = {"it_dynamite"}
 ti["I"] = {"st_stoneimpulse"}
-ti["&"] = {"st-bombs"}
+ti["&"] = {"st_dispenser"}
 ti["W"] = {"it_puller_w"}
 ti["E"] = {"it_puller_e"}
 ti["F"] = {"st_fourswitch", target="pullwindow", action="inner_pull"}



From ral at mail.berlios.de  Thu Feb  5 00:43:22 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Thu, 5 Feb 2009 00:43:22 +0100
Subject: [Enigma-game-svn] r1514 - in trunk: data src src/others src/stones
Message-ID: <200902042343.n14NhMvw012834@sheep.berlios.de>

Author: ral
Date: 2009-02-05 00:43:20 +0100 (Thu, 05 Feb 2009)
New Revision: 1514

Added:
   trunk/src/others/CannonBall.cc
   trunk/src/others/CannonBall.hh
Modified:
   trunk/data/models-2d.lua
   trunk/src/Makefile.am
   trunk/src/actors.cc
   trunk/src/server.cc
   trunk/src/stones/SimpleStones.cc
   trunk/src/world.cc
   trunk/src/world.hh
Log:
Trunk 1.1:
- improve safe actions by performing pending actions before actor move
- reengineering cannon ball
  - new system object ot_cannonball
  - remove pseudo actor ac-cannonball
  - adapt st_spitter
Note:
- cannonball explosion effects on other objects not yet well defined


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/data/models-2d.lua	2009-02-04 23:43:20 UTC (rev 1514)
@@ -189,7 +189,7 @@
 
 -- ac-cannonball --
 do
-    DefAlias("ac-cannonball", "ac_marble_black-jump")
+    DefAlias("ac_cannonball", "ac_marble_black-jump")
 end
 
 -- ac-horse --

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/Makefile.am	2009-02-04 23:43:20 UTC (rev 1514)
@@ -283,6 +283,8 @@
 	lev/ScoreManager.hh	\
 	lev/VolatileIndex.cc	\
 	lev/VolatileIndex.hh	\
+	others/CannonBall.cc	\
+	others/CannonBall.hh	\
 	others/CounterGadget.cc	\
 	others/CounterGadget.hh	\
 	others/Other.cc		\

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/actors.cc	2009-02-04 23:43:20 UTC (rev 1514)
@@ -333,75 +333,4 @@
             return !(other->isSouthOrEastOf(this));
     }
 
-
-/* -------------------- CannonBall -------------------- */
-
-namespace
-{
-    class CannonBall : public Actor {
-        CLONEACTOR(CannonBall);
-        DECL_ACTORTRAITS;
-    public:
-        CannonBall();
-        bool is_flying() const { return true; }
-        bool is_dead() const { return false; }
-        bool is_on_floor() const { return false; }
-        void on_creation(const ecl::V2 &p);
-        bool can_move() const { return true; }
-
-        void animcb();
-    };
-}
-
-ActorTraits CannonBall::traits = {
-    "ac-cannonball",            // name
-    ac_cannonball,              // id
-    1<<ac_cannonball,           // id_mask
-    24.0/64,                    // radius
-    1.0                         // mass
-};
-
-CannonBall::CannonBall()
-: Actor(traits)
-{
-    get_actorinfo()->ignore_contacts = true;
-}
-
-void CannonBall::animcb() 
-{
-    const GridPos &p = get_gridpos();
-
-    if (Stone *st = GetStone (p)) {
-        SendMessage (st, "_spitter");
-    }
-    else if (Item *it = GetItem(p)) {
-        if (!has_flags(it, itf_indestructible))
-            SetItem (p, MakeItem("it_explosion_debris"));
-    }
-    else if (Floor *fl = GetFloor(p)) {
-        if (fl->is_destructible())
-            SetItem (p, MakeItem("it_explosion_debris"));
-    }
-    KillActor (this);
-}
-
-void CannonBall::on_creation(const ecl::V2 &p) 
-{
-    Actor::on_creation(p);
-
-    display::SpriteHandle &sprite = get_sprite();
-    sprite.kill();
-    sprite = display::AddEffect(p, "ac-cannonball");
-    sprite.set_callback(this);
-}
-
-    
-
-/* -------------------- Functions -------------------- */
-
-void InitActors () 
-{
-    RegisterActor (new CannonBall);
-}
-
 } // namespace enigma

Added: trunk/src/others/CannonBall.cc
===================================================================
--- trunk/src/others/CannonBall.cc	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/others/CannonBall.cc	2009-02-04 23:43:20 UTC (rev 1514)
@@ -0,0 +1,71 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "others/CannonBall.hh"
+#include "errors.hh"
+#include "floors.hh"
+#include "items.hh"
+#include "main.hh"
+#include "stones.hh"
+#include "world.hh"
+
+namespace enigma {
+    CannonBall::CannonBall() : Other(), pos (-1, -1) {
+    }
+    
+    std::string CannonBall::getClass() const {
+        return "ot_cannonball";
+    }
+
+    void CannonBall::animcb() {
+        GridPos p(pos);
+        if (Stone *st = GetStone(p)) {
+            SendMessage (st, "_spitter");
+        }
+        else if (Item *it = GetItem(p)) {
+            if (!has_flags(it, itf_indestructible))
+                SetItem (p, MakeItem("it_explosion_debris"));
+        }
+        else if (Floor *fl = GetFloor(p)) {
+            if (fl->is_destructible())
+                SetItem (p, MakeItem("it_explosion_debris"));
+        }
+        KillOther(this);
+    }
+    
+    void CannonBall::postAddition() {
+        pos = getAttr("$position");
+        sprite = display::AddEffect(pos, "ac_cannonball");
+        sprite.set_callback(this);
+    }
+    
+    void CannonBall::preRemoval() {
+        sprite.kill();
+    }
+    
+    void CannonBall::tick(double dt) {
+        pos += (ecl::V2)getAttr("$ball_velocity") * dt;
+        sprite.move(pos);
+    }
+
+    BOOT_REGISTER_START
+        BootRegister(new CannonBall(), "ot_cannonball");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/others/CannonBall.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/others/CannonBall.hh
===================================================================
--- trunk/src/others/CannonBall.hh	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/others/CannonBall.hh	2009-02-04 23:43:20 UTC (rev 1514)
@@ -0,0 +1,54 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef CANNONBALL_HH
+#define CANNONBALL_HH
+
+#include "others/Other.hh"
+#include "display.hh"
+
+/* -------------------- Other -------------------- */
+
+
+namespace enigma {
+    
+    class CannonBall : public Other, public display::ModelCallback {
+        CLONEOBJ(CannonBall)
+
+    public:
+        CannonBall();
+        
+        // Object interface
+        virtual std::string getClass() const;
+        
+        // ModelCallback interface  - Animation callback
+        virtual void animcb();
+
+        // Other interface
+        virtual void postAddition();
+        virtual void preRemoval();
+        virtual void tick(double dt);
+        
+    private:
+        display::SpriteHandle sprite;
+        ecl::V2 pos;
+    };
+
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/others/CannonBall.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/server.cc	2009-02-04 23:43:20 UTC (rev 1514)
@@ -197,6 +197,7 @@
 void gametick(double dtime)
 {
     const double timestep = 0.01; // 10ms
+    int count = 0;
 
     server::LevelTime += dtime;
 
@@ -206,14 +207,14 @@
         time_accu = 1.0;
     }
     player::Tick (time_accu);
-    for (;time_accu >= timestep; time_accu -= timestep) {
-        WorldTick (timestep);
+    for (;time_accu >= timestep; time_accu -= timestep, count++) {
+        WorldTick(timestep);
 //        if (lua::CallFunc (lua::LevelState(), "Tick", timestep, NULL) != 0) {
 //            throw XLevelRuntime (string("Calling 'Tick' failed:\n")
 //                                                + lua::LastError(lua::LevelState()));
 //        }
     }
-    TickFinished ();
+    TickFinished(count * timestep);
 }
 
 

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/stones/SimpleStones.cc	2009-02-04 23:43:20 UTC (rev 1514)
@@ -242,12 +242,12 @@
             case IDLE:
                 ASSERT(false, XLevelRuntime, "SpitterStone: animcb called with inconsistent state"); 
             case LOADING: {
-                Actor     *ball = MakeActor("ac-cannonball");
-                ActorInfo *ai   = ball->get_actorinfo();
+                Other *cb = dynamic_cast<Other *>(MakeObject("ot_cannonball"));
                 ecl::V2 center  = get_pos().center();
-        
-                ai->vel = getAttr("$ball_velocity");
-                AddActor(center[0], center[1], ball);
+                cb->setAttr("$position", center);
+                cb->setAttr("$ball_velocity", getAttr("$ball_velocity"));
+                AddOther(cb);
+                
                 state = SPITTING;
                 init_model();
                 break;

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/world.cc	2009-02-04 23:43:20 UTC (rev 1514)
@@ -483,7 +483,6 @@
 
     move_actors(dtime);
     tick_sound_dampings();
-    doPerformPendingActions();
 
     // Tell floors and items about new stones.
     for (unsigned i=0; i<changed_stones.size(); ++i)
@@ -1395,6 +1394,8 @@
                 handle_stone_contacts(i);
         }
 
+        doPerformPendingActions();
+
         for (unsigned i=0; i<nactors; ++i) {
             Actor     *a  = actorlist[i];
             ActorInfo &ai = * a->get_actorinfo();
@@ -2374,31 +2375,28 @@
 }
 
 void WorldTick(double dtime) {
-    level->tick (dtime);
+    level->tick(dtime);
 }
 
-void TickFinished () {
+void TickFinished(double dtime) {
     for (unsigned i=0; i<level->actorlist.size(); ++i) {
         level->actorlist[i]->move_screen();
     }
 
     //     
     for (OtherList::iterator oit = level->others.begin(); oit != level->others.end(); ++oit) {
-        (*oit)->tick(0);
+        (*oit)->tick(dtime);
     }    
 }
 
-void InitWorld()
-{
+void InitWorld() {
     Object::bootFinished();
     BootRegister(NULL, NULL, false);
-    InitActors();
     InitLasers();
     InitFloors();
 }
 
-void ShutdownWorld()
-{
+void ShutdownWorld() {
     level.reset();
     player::PlayerShutdown();
     Repos_Shutdown();

Modified: trunk/src/world.hh
===================================================================
--- trunk/src/world.hh	2009-02-04 23:16:47 UTC (rev 1513)
+++ trunk/src/world.hh	2009-02-04 23:43:20 UTC (rev 1514)
@@ -164,7 +164,7 @@
     bool WorldInitLevel();
 
     void WorldTick(double dtime);
-    void TickFinished ();
+    void TickFinished(double dtime);
 
     // Destroy all objects and the complete object repository
     void ShutdownWorld();



From raoul at mail.berlios.de  Thu Feb  5 22:35:43 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Thu, 5 Feb 2009 22:35:43 +0100
Subject: [Enigma-game-svn] r1515 - in trunk: attic/images-items data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200902052135.n15LZhpv009227@sheep.berlios.de>

Author: raoul
Date: 2009-02-05 22:35:42 +0100 (Thu, 05 Feb 2009)
New Revision: 1515

Added:
   trunk/attic/images-items/Yinyangitem_gfx16.xcf
   trunk/attic/images-items/Yinyangitem_gfx32.xcf
   trunk/attic/images-items/Yinyangitem_gfx40.xcf
   trunk/attic/images-items/Yinyangitem_gfx48.xcf
   trunk/attic/images-items/Yinyangitem_gfx64.xcf
   trunk/data/gfx16/it_yinyang.png
   trunk/data/gfx64/it_yinyang.png
Modified:
   trunk/data/gfx32/it_yinyang.png
   trunk/data/gfx40/it_yinyang.png
   trunk/data/gfx48/it_yinyang.png
Log:
-> New gfx for yinyang items



Added: trunk/attic/images-items/Yinyangitem_gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/Yinyangitem_gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/Yinyangitem_gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/Yinyangitem_gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/Yinyangitem_gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/Yinyangitem_gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/Yinyangitem_gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/Yinyangitem_gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/Yinyangitem_gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/Yinyangitem_gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/it_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/it_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/it_yinyang.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/it_yinyang.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/it_yinyang.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/it_yinyang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/it_yinyang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From ral at mail.berlios.de  Thu Feb  5 23:51:52 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Thu, 5 Feb 2009 23:51:52 +0100
Subject: [Enigma-game-svn] r1516 - in trunk: data data/schemas src src/floors
Message-ID: <200902052251.n15MpqmF017639@sheep.berlios.de>

Author: ral
Date: 2009-02-05 23:51:49 +0100 (Thu, 05 Feb 2009)
New Revision: 1516

Added:
   trunk/src/floors/SlopeFloor.cc
   trunk/src/floors/SlopeFloor.hh
Modified:
   trunk/data/api1init.lua
   trunk/data/api2init.lua
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Makefile.am
   trunk/src/floors.cc
   trunk/src/floors.hh
   trunk/src/floors/SimpleFloors.cc
   trunk/src/floors/SimpleFloors.hh
   trunk/src/ox_extra.cc
   trunk/src/ox_magnum.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/oxyd.cc
   trunk/src/world.cc
Log:
Commit message addendum to r1509:
- reengineering gradient floor:
  - renaming ( new = old)
    fl_slope_ps = "fl-gradient1",
    fl_slope_pn = "fl-gradient2",
    fl_slope_pe = "fl-gradient3",
    fl_slope_pw = "fl-gradient4",
    fl_slope_ose = "fl-gradient5",
    fl_slope_osw = "fl-gradient6",
    fl_slope_one = "fl-gradient7",
    fl_slope_onw = "fl-gradient8",
    fl_slope_ise = "fl-gradient9",
    fl_slope_ine = "fl-gradient10",
    fl_slope_isw = "fl-gradient11",
    fl_slope_inw = "fl-gradient12",
    fl_slope_ts = "fl-gradient13",
    fl_slope_tn = "fl-gradient14",
    fl_slope_te = "fl-gradient15",
    fl_slope_tw = "fl-gradient16",
    fl_slope_tsl = "fl-gradient", type=20
    fl_slope_tnl = "fl-gradient", type=18
    fl_slope_tel = "fl-gradient", type=15
    fl_slope_twl = "fl-gradient", type=14
    fl_slope_tsr = "fl-gradient", type=19
    fl_slope_tnr = "fl-gradient", type=17
    fl_slope_ter = "fl-gradient", type=16
    fl_slope_twr = "fl-gradient", type=13
  - naming scheme - suffix:
    - p* : planar, descending to given direction
    - o* : outer edge, descending to given direction
    - i* : inner edge, descending to given direction
    - t* : tube, descending to given direction
    - t*l : tube, left wall, descending to given direction
    - t*r : tube, right wall, descending to given direction
  - attribute "shape" with above suffix values, determines image
  - attribtute "slope", values NODIR, WEST, SOUTH, EAST, NORTH, NORTHWEST,
      SOUTHWEST, SOUTHEAST, NORTHEAST determines force direction
  - variantes are preconfigured in both attributes shape, slope
  - attribute "strength" overrides global "SlopeStrength"
  - attribute "force_x", "force_y" overrides all slope and strength values
- bottle - improved drunken forces on actors


Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/data/api1init.lua	2009-02-05 22:51:49 UTC (rev 1516)
@@ -113,6 +113,22 @@
     fl_samba = "fl-samba",
     fl_samba_h = "fl-samba1",
     fl_samba_v = "fl-samba2",
+    fl_slope_ps = "fl-gradient1",
+    fl_slope_pn = "fl-gradient2",
+    fl_slope_pe = "fl-gradient3",
+    fl_slope_pw = "fl-gradient4",
+    fl_slope_ose = "fl-gradient5",
+    fl_slope_osw = "fl-gradient6",
+    fl_slope_one = "fl-gradient7",
+    fl_slope_onw = "fl-gradient8",
+    fl_slope_ise = "fl-gradient9",
+    fl_slope_ine = "fl-gradient10",
+    fl_slope_isw = "fl-gradient11",
+    fl_slope_inw = "fl-gradient12",
+    fl_slope_ts = "fl-gradient13",
+    fl_slope_tn = "fl-gradient14",
+    fl_slope_te = "fl-gradient15",
+    fl_slope_tw = "fl-gradient16",
     fl_space = "fl-space",
     fl_stone = "fl-stone",
     fl_swamp = "fl-swamp",
@@ -537,6 +553,9 @@
         local obj = enigma._MakeObject("ac_pearl_white")
         enigma._SetAttrib(obj, "owner", nil)
         return obj
+    elseif name == "fl-gradient" then
+        local obj = enigma._MakeObject("fl_slope_ps")
+        return obj
     elseif name == "fl-bridge-open" then
         local obj = enigma._MakeObject("fl_bridge")
         return obj
@@ -732,6 +751,9 @@
     if _newname == "st_mirror" then
         return "st-mirror"
     end
+    if _newname == "fl_slope" then
+        return "fl-gradient"
+    end
     if _oldname ~= nil then
         return _oldname
     else
@@ -795,9 +817,7 @@
      if key == "load" then
          _key = "state"
      end
-     if key == "force" and (_obj_name == "st-actorimpulse" or
-             _obj_name == "st-actorimpulse_invisible" or _obj_name == "ac-horse" or
-             _obj_name == "ac-rotor" or _obj_name == "ac-top")  then
+     if key == "force" then
          _key = "strength"
      end
      if key == "friction_factor" then
@@ -877,6 +897,83 @@
          else _val = "gc"
          end
      end
+     if key == "type" and string.find(_obj_name, "fl-gradient", 1, true) == 1 then
+         if val == 1 then
+             enigma._SetAttrib(obj, "shape", "ps")
+             enigma._SetAttrib(obj, "slope", 1)
+         elseif val == 2 then
+             enigma._SetAttrib(obj, "shape", "pn")
+             enigma._SetAttrib(obj, "slope", 3)
+         elseif val == 3 then
+             enigma._SetAttrib(obj, "shape", "pe")
+             enigma._SetAttrib(obj, "slope", 2)
+         elseif val == 4 then
+             enigma._SetAttrib(obj, "shape", "pw")
+             enigma._SetAttrib(obj, "slope", 0)
+         elseif val == 5 then
+             enigma._SetAttrib(obj, "shape", "ose")
+             enigma._SetAttrib(obj, "slope", 6)
+         elseif val == 6 then
+             enigma._SetAttrib(obj, "shape", "osw")
+             enigma._SetAttrib(obj, "slope", 5)
+         elseif val == 7 then
+             enigma._SetAttrib(obj, "shape", "one")
+             enigma._SetAttrib(obj, "slope", 7)
+         elseif val == 8 then
+             enigma._SetAttrib(obj, "shape", "onw")
+             enigma._SetAttrib(obj, "slope", 4)
+         elseif val == 9 then
+             enigma._SetAttrib(obj, "shape", "ise")
+             enigma._SetAttrib(obj, "slope", 6)
+         elseif val == 10 then
+             enigma._SetAttrib(obj, "shape", "ine")
+             enigma._SetAttrib(obj, "slope", 7)
+         elseif val == 11 then
+             enigma._SetAttrib(obj, "shape", "isw")
+             enigma._SetAttrib(obj, "slope", 5)
+         elseif val == 12 then
+             enigma._SetAttrib(obj, "shape", "inw")
+             enigma._SetAttrib(obj, "slope", 4)
+         elseif val == 13 then
+             enigma._SetAttrib(obj, "shape", "twr")
+             enigma._SetAttrib(obj, "slope", 5)
+         elseif val == 14 then
+             enigma._SetAttrib(obj, "shape", "twl")
+             enigma._SetAttrib(obj, "slope", 4)
+         elseif val == 15 then
+             enigma._SetAttrib(obj, "shape", "tel")
+             enigma._SetAttrib(obj, "slope", 6)
+         elseif val == 16 then
+             enigma._SetAttrib(obj, "shape", "ter")
+             enigma._SetAttrib(obj, "slope", 7)
+         elseif val == 17 then
+             enigma._SetAttrib(obj, "shape", "tnr")
+             enigma._SetAttrib(obj, "slope", 4)
+         elseif val == 18 then
+             enigma._SetAttrib(obj, "shape", "tnl")
+             enigma._SetAttrib(obj, "slope", 7)
+         elseif val == 19 then
+             enigma._SetAttrib(obj, "shape", "tsl")
+             enigma._SetAttrib(obj, "slope", 5)
+         elseif val == 20 then
+             enigma._SetAttrib(obj, "shape", "tsr")
+             enigma._SetAttrib(obj, "slope", 6)
+         elseif val == 21 then
+             enigma._SetAttrib(obj, "shape", "ts")
+             enigma._SetAttrib(obj, "slope", 1)
+         elseif val == 22 then
+             enigma._SetAttrib(obj, "shape", "tn")
+             enigma._SetAttrib(obj, "slope", 3)
+         elseif val == 23 then
+             enigma._SetAttrib(obj, "shape", "te")
+             enigma._SetAttrib(obj, "slope", 2)
+         elseif val == 24 then
+             enigma._SetAttrib(obj, "shape", "tw")
+             enigma._SetAttrib(obj, "slope", 0)
+         end
+         return
+     end
+     
      if key == "mousefactor" then
          _key = "adhesion"
      end
@@ -920,9 +1017,7 @@
      if key == "value" then
          _key = "coin_value"
      end
-     if key == "force" and (_obj_name == "st-actorimpulse" or
-             _obj_name == "st-actorimpulse_invisible" or _obj_name == "ac-horse" or
-             _obj_name == "ac-rotor" or _obj_name == "ac-top")  then
+     if key == "force" then
          _key = "strength"
      end
      if key == "friction_factor" then

Modified: trunk/data/api2init.lua
===================================================================
--- trunk/data/api2init.lua	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/data/api2init.lua	2009-02-05 22:51:49 UTC (rev 1516)
@@ -122,10 +122,15 @@
 OXYD_BOLD   = -4
 
 -- direction
+NODIR = -1
 WEST  = 0
 SOUTH = 1
 EAST  = 2
 NORTH = 3
+NORTHWEST = 4
+SOUTHWEST = 5
+SOUTHEAST = 6
+NORTHEAST = 7
 
 -- alternative orientation notation for mirrors
 BACKSLASH  = 0

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/data/models-2d.lua	2009-02-05 22:51:49 UTC (rev 1516)
@@ -327,6 +327,31 @@
 -- gradients
 do
     DefSubimages("fl-gradient2", {w=6, h=4, modelname="fl-gradient"})
+    DefAlias("fl_slope", "fl-gradient21")
+    DefAlias("fl_slope_pw", "fl-gradient4")
+    DefAlias("fl_slope_ps", "fl-gradient1")
+    DefAlias("fl_slope_pe", "fl-gradient3")
+    DefAlias("fl_slope_pn", "fl-gradient2")
+    DefAlias("fl_slope_inw", "fl-gradient12")
+    DefAlias("fl_slope_isw", "fl-gradient11")
+    DefAlias("fl_slope_ise", "fl-gradient9")
+    DefAlias("fl_slope_ine", "fl-gradient10")
+    DefAlias("fl_slope_onw", "fl-gradient8")
+    DefAlias("fl_slope_osw", "fl-gradient6")
+    DefAlias("fl_slope_ose", "fl-gradient5")
+    DefAlias("fl_slope_one", "fl-gradient7")
+    DefAlias("fl_slope_tw", "fl-gradient21")
+    DefAlias("fl_slope_ts", "fl-gradient21")
+    DefAlias("fl_slope_te", "fl-gradient21")
+    DefAlias("fl_slope_tn", "fl-gradient21")
+    DefAlias("fl_slope_twl", "fl-gradient2")
+    DefAlias("fl_slope_tsl", "fl-gradient4")
+    DefAlias("fl_slope_tel", "fl-gradient1")
+    DefAlias("fl_slope_tnl", "fl-gradient3")
+    DefAlias("fl_slope_twr", "fl-gradient1")
+    DefAlias("fl_slope_tsr", "fl-gradient3")
+    DefAlias("fl_slope_ter", "fl-gradient2")
+    DefAlias("fl_slope_tnr", "fl-gradient4")
 end
 
 -- leaves --

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/data/schemas/objects.xml	2009-02-05 22:51:49 UTC (rev 1516)
@@ -75,7 +75,9 @@
     <attr name="secure" type="bool" default="false" rw="rw"/>
     <attr name="scissor" type="bool" default="false" rw="rw"/>
     <attr name="scratches" type="string" default="" rw="rw"/>
+    <attr name="shape" type="string" default="" rw="rw"/>
     <attr name="selection" type="tokens" default="nil" rw="rw"/>
+    <attr name="slope" type="int" default="-1" min="-1" max="7" rw="rw"/>
     <attr name="spreading" type="double" default="nil" rw="rw"/>
     <attr name="state" type="int" default="0" min="0" max="1" rw="rw"/>
     <attr name="static" type="bool" default="false" rw="rw"/>
@@ -332,6 +334,85 @@
     <object name="fl_rock_framed">
       <attr name="faces" value="nesw"/>
     </object>
+    <object name="fl_slope">
+      <attr name="friction" default="4.0"/>
+      <attr name="adhesion" default="2.0"/>
+      <attr name="slope" default="-1"/>
+      <attr name="strength"/>
+      <attr name="shape"/>
+    </object>
+    <object name="fl_slope_pw">
+      <attr name="shape" value="pw"/>
+    </object>
+    <object name="fl_slope_ps">
+      <attr name="shape" value="ps"/>
+    </object>
+    <object name="fl_slope_pe">
+      <attr name="shape" value="pe"/>
+    </object>
+    <object name="fl_slope_pn">
+      <attr name="shape" value="pn"/>
+    </object>
+    <object name="fl_slope_inw">
+      <attr name="shape" value="inw"/>
+    </object>
+    <object name="fl_slope_isw">
+      <attr name="shape" value="isw"/>
+    </object>
+    <object name="fl_slope_ise">
+      <attr name="shape" value="ise"/>
+    </object>
+    <object name="fl_slope_ine">
+      <attr name="shape" value="ine"/>
+    </object>
+    <object name="fl_slope_onw">
+      <attr name="shape" value="onw"/>
+    </object>
+    <object name="fl_slope_osw">
+      <attr name="shape" value="osw"/>
+    </object>
+    <object name="fl_slope_ose">
+      <attr name="shape" value="ose"/>
+    </object>
+    <object name="fl_slope_one">
+      <attr name="shape" value="one"/>
+    </object>
+    <object name="fl_slope_tw">
+      <attr name="shape" value="tw"/>
+    </object>
+    <object name="fl_slope_ts">
+      <attr name="shape" value="ts"/>
+    </object>
+    <object name="fl_slope_te">
+      <attr name="shape" value="te"/>
+    </object>
+    <object name="fl_slope_tn">
+      <attr name="shape" value="tn"/>
+    </object>
+    <object name="fl_slope_twl">
+      <attr name="shape" value="twl"/>
+    </object>
+    <object name="fl_slope_tsl">
+      <attr name="shape" value="tsl"/>
+    </object>
+    <object name="fl_slope_tel">
+      <attr name="shape" value="tel"/>
+    </object>
+    <object name="fl_slope_tnl">
+      <attr name="shape" value="tnl"/>
+    </object>
+    <object name="fl_slope_twr">
+      <attr name="shape" value="twr"/>
+    </object>
+    <object name="fl_slope_tsr">
+      <attr name="shape" value="tsr"/>
+    </object>
+    <object name="fl_slope_ter">
+      <attr name="shape" value="ter"/>
+    </object>
+    <object name="fl_slope_tnr">
+      <attr name="shape" value="tnr"/>
+    </object>
     <object name="fl_space">
       <attr name="friction" default="0.0"/>
       <attr name="adhesion" default="0.0"/>

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/Makefile.am	2009-02-05 22:51:49 UTC (rev 1516)
@@ -159,6 +159,8 @@
 	floors/FloodStream.hh	\
 	floors/SimpleFloors.cc	\
 	floors/SimpleFloors.hh	\
+	floors/SlopeFloor.cc	\
+	floors/SlopeFloor.hh	\
 	floors/ThiefFloor.cc	\
 	floors/ThiefFloor.hh	\
 	gui/ErrorMenu.cc	\

Modified: trunk/src/floors/SimpleFloors.cc
===================================================================
--- trunk/src/floors/SimpleFloors.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/floors/SimpleFloors.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -21,7 +21,7 @@
 #include "floors/SimpleFloors.hh"
 
 //#include "errors.hh"
-//#include "main.hh"
+#include "main.hh"
 #include "player.hh"
 #include "world.hh"
 
@@ -29,7 +29,7 @@
     
 /* -------------------- Abyss -------------------- */
 
-    Abyss::Abyss() : Floor("fl_abyss", 0.0, 0.0, flf_indestructible) {
+    Abyss::Abyss() : Floor ("fl_abyss", 0.0, 0.0, flf_indestructible) {
     }
     
     std::string Abyss::getClass() const {
@@ -44,6 +44,21 @@
         SendMessage(a, "_fall");
     }
     
+/* -------------------- DummyFloor -------------------- */
+
+    DummyFloor::DummyFloor() : Floor ("fl_dummy", 4.0, 2.5) {
+    }
+    
+    std::string DummyFloor::getClass() const {
+        return "fl_dummy";
+    }
+
+    void DummyFloor::actor_contact(Actor *) {
+        static int lastCode = -1;
+        int code = getAttr("code");
+        Log << ecl::strf("Entering floor 0x%x\n", code);
+    }
+
 /* -------------------- Ice -------------------- */
 
 
@@ -113,6 +128,7 @@
     
     BOOT_REGISTER_START
         BootRegister(new Abyss(),     "fl_abyss");
+        BootRegister(new DummyFloor(),"fl_dummy");
         BootRegister(new IceFloor(),  "fl_ice");
         BootRegister(new Space(),     "fl_space");
         BootRegister(new Space(true), "fl_space_force");

Modified: trunk/src/floors/SimpleFloors.hh
===================================================================
--- trunk/src/floors/SimpleFloors.hh	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/floors/SimpleFloors.hh	2009-02-05 22:51:49 UTC (rev 1516)
@@ -42,6 +42,22 @@
     };
 
     /** 
+     * DummyFloor
+     */
+    class DummyFloor : public Floor {
+        CLONEOBJ(DummyFloor);
+        
+    public:
+        DummyFloor();
+
+        // Object interface
+        virtual std::string getClass() const;
+
+        // Floor interface
+        virtual void actor_contact(Actor *);
+    };
+
+    /** 
      * IceFloor
      */
     class IceFloor : public Floor {

Added: trunk/src/floors/SlopeFloor.cc
===================================================================
--- trunk/src/floors/SlopeFloor.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/floors/SlopeFloor.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -0,0 +1,139 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "floors/SlopeFloor.hh"
+
+#include "errors.hh"
+#include "main.hh"
+#include "stones.hh"
+#include "world.hh"
+
+namespace enigma {
+    
+    SlopeFloor::SlopeFloor(int slope, std::string shape) : Floor("fl_slope", 4, 2)  {
+        state = slope;
+        Floor::setAttr("shape", shape);
+    }
+    
+    std::string SlopeFloor::getClass() const {
+        return "fl_slope";
+    }
+        
+    void SlopeFloor::setAttr(const string& key, const Value &val) {
+        if (key == "shape") {
+            std::string shape = val.to_string();
+            if (shape == "" || shape == "pw" || shape == "ps" || shape == "pe" || shape == "pn" ||
+                    shape == "inw" || shape == "isw" || shape == "ise" || shape == "ine" || 
+                    shape == "onw" || shape == "osw" || shape == "ose" || shape == "one" || 
+                    shape == "tw" || shape == "ts" || shape == "te" || shape == "tn" || 
+                    shape == "twl" || shape == "tsl" || shape == "tel" || shape == "tnl" || 
+                    shape == "twr" || shape == "tsr" || shape == "ter" || shape == "tnr") {
+                Floor::setAttr("shape", shape);
+                init_model();
+            }
+        } else if (key == "slope") {
+            int slope = val;
+            if (slope >= -1 && slope <= 7)
+                state = slope;
+        } else if (key == "strength") {
+            var_floorforce[0] = val;
+            objFlags = (objFlags & ~OBJBIT_FORCE) | OBJBIT_STRENGTH;
+        } else if (key == "force_x") {
+            var_floorforce[0] = val;
+            objFlags = (objFlags & ~OBJBIT_STRENGTH) | OBJBIT_FORCE;
+        } else if (key == "force_y") {
+            var_floorforce[1] = val;
+            objFlags = (objFlags & ~OBJBIT_STRENGTH) | OBJBIT_FORCE;
+        } else
+            Floor::setAttr(key, val);
+    }
+        
+    Value SlopeFloor::getAttr(const std::string &key) const {
+        if (key == "slope") {
+            return state;
+        } else if (key == "strength") {
+            return var_floorforce[0];
+       }
+        return Floor::getAttr(key);
+    }
+    
+    void SlopeFloor::setState(int extState) {
+        // ignore any state change attempts
+    }
+    
+    void SlopeFloor::init_model()  {
+        std::string shape = getAttr("shape").to_string();
+        if (shape == "")
+            set_model("fl_slope");
+        else
+            set_model(std::string("fl_slope_") + shape);
+    }
+    
+    void SlopeFloor::add_force(Actor *a, ecl::V2 &f) {
+        static int xforce[8] = {
+             -1,  0,  1, 0,
+             -1, -1,  1, 1
+        };
+        static int yforce[8] = {
+             0,  1,  0,  -1,
+             -1,  1, 1, -1
+        };
+        
+        if (objFlags & OBJBIT_FORCE)
+            return Floor::add_force(a, f);
+        else {
+            ecl::V2 force(0,0);
+            if (state != NODIR) {
+                force = ecl::V2(xforce[state], yforce[state]);
+                force.normalize();
+            }            
+            f += ((objFlags & OBJBIT_STRENGTH) ? var_floorforce[0] : server::SlopeForce) * force;
+        }
+    }
+    
+
+    BOOT_REGISTER_START
+        BootRegister(new SlopeFloor(-1, ""), "fl_slope");
+        BootRegister(new SlopeFloor( 0, "pw"), "fl_slope_pw");
+        BootRegister(new SlopeFloor( 1, "ps"), "fl_slope_ps");
+        BootRegister(new SlopeFloor( 2, "pe"), "fl_slope_pe");
+        BootRegister(new SlopeFloor( 3, "pn"), "fl_slope_pn");
+        BootRegister(new SlopeFloor( 4, "inw"), "fl_slope_inw");
+        BootRegister(new SlopeFloor( 5, "isw"), "fl_slope_isw");
+        BootRegister(new SlopeFloor( 6, "ise"), "fl_slope_ise");
+        BootRegister(new SlopeFloor( 7, "ine"), "fl_slope_ine");
+        BootRegister(new SlopeFloor( 4, "onw"), "fl_slope_onw");
+        BootRegister(new SlopeFloor( 5, "osw"), "fl_slope_osw");
+        BootRegister(new SlopeFloor( 6, "ose"), "fl_slope_ose");
+        BootRegister(new SlopeFloor( 7, "one"), "fl_slope_one");
+        BootRegister(new SlopeFloor( 0, "tw"), "fl_slope_tw");
+        BootRegister(new SlopeFloor( 1, "ts"), "fl_slope_ts");
+        BootRegister(new SlopeFloor( 2, "te"), "fl_slope_te");
+        BootRegister(new SlopeFloor( 3, "tn"), "fl_slope_tn");
+        BootRegister(new SlopeFloor( 4, "twl"), "fl_slope_twl");
+        BootRegister(new SlopeFloor( 5, "tsl"), "fl_slope_tsl");
+        BootRegister(new SlopeFloor( 6, "tel"), "fl_slope_tel");
+        BootRegister(new SlopeFloor( 7, "tnl"), "fl_slope_tnl");
+        BootRegister(new SlopeFloor( 5, "twr"), "fl_slope_twr");
+        BootRegister(new SlopeFloor( 6, "tsr"), "fl_slope_tsr");
+        BootRegister(new SlopeFloor( 7, "ter"), "fl_slope_ter");
+        BootRegister(new SlopeFloor( 4, "tnr"), "fl_slope_tnr");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/floors/SlopeFloor.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/floors/SlopeFloor.hh
===================================================================
--- trunk/src/floors/SlopeFloor.hh	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/floors/SlopeFloor.hh	2009-02-05 22:51:49 UTC (rev 1516)
@@ -0,0 +1,57 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef SLOPEFLOOR_HH
+#define SLOPEFLOOR_HH
+
+#include "floors.hh"
+
+namespace enigma {
+
+    /** 
+     * 
+     */
+    class SlopeFloor : public Floor {
+        CLONEOBJ(SlopeFloor);
+        
+    private:
+        enum ObjectPrivatFlagsBits {
+            OBJBIT_STRENGTH =   1<<24,   ///< floor specific strength factor
+            OBJBIT_FORCE    =   1<<25    ///< floor specific force vector
+        };
+    public:
+        SlopeFloor(int gradient, std::string shape);
+
+        // Object interface
+        virtual std::string getClass() const;
+        virtual void setAttr(const string& key, const Value &val);
+        virtual Value getAttr(const std::string &key) const;
+        
+        // StateObject interface
+        virtual void setState(int extState);
+
+        // GridObject interface
+        virtual void init_model();
+                
+        // Floor interface
+        virtual void add_force(Actor *, ecl::V2 &);
+    };
+
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/floors/SlopeFloor.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/floors.cc
===================================================================
--- trunk/src/floors.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/floors.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -482,160 +482,4 @@
     }
 }
 
-/* =============== Special Floors ================ */
-
-namespace
-{
-
-/* -------------------- DummyFloor -------------------- */
-
-    class DummyFloor : public Floor {
-        CLONEOBJ(DummyFloor);
-    public:
-        DummyFloor() : Floor("fl-dummy", 4.0, 2.5) {}
-    private:
-        void actor_enter(Actor *) {
-            static int lastCode = -1;
-            int        code     = getAttr("code");
-            if (lastCode != code) {
-                fprintf(stderr, "Entering floor 0x%x\n", code);
-                lastCode = code;
-            }
-        }
-    };
-}
-
-/* -------------------- Gradient -------------------- */
-
-/** \page fl-gradient Gradient Floor
-
-This is a sloped floor that accelerates in a particular direction.
-
-\subsection gradienta Attributes
-
-- \b type: number between 0 and 15 (see below)
-
-\subsection gradiente Examples
-
-*/
-namespace
-{
-    class Gradient : public Floor {
-        CLONEOBJ(Gradient);
-        int type;
-        bool use_forcefac;
-        double forcefac;
-    public:
-        Gradient(int type=MINTYPE);
-    private:
-        int get_type() const;
-        enum { MINTYPE=1, MAXTYPE=24 };
-
-        // Object interface
-        virtual void setAttr(const string& key, const Value &val);
-
-        // GridObject interface.
-        virtual void init_model();
-
-        // Floor interface
-        virtual void add_force(Actor *a, V2 &f);
-    };
-}
-
-Gradient::Gradient(int type_)
-: Floor("fl-gradient", 4, 2),
-  type (type_),
-  use_forcefac (false),
-  forcefac (1.0)
-{
-    setAttr("type", Value(type_));
-}
-
-void Gradient::setAttr(const string& key, const Value &val)
-{
-    if (key == "type") {
-        int t=to_int (val);
-        if (t < MINTYPE || t>MAXTYPE) {
-            enigma::Log << "Gradient: Illegal type="<< int(t) << std::endl;
-            t=MINTYPE;
-        }
-        type = t;
-    }
-    else if (key == "force") {
-        use_forcefac = true;
-        forcefac = to_double (val);
-    }
-    Floor::setAttr(key, val);
-}
-
-
-int Gradient::get_type() const
-{
-    return type;
-}
-
-void Gradient::init_model()
-{
-    set_model(ecl::strf("fl-gradient%d", get_type()));
-}
-
-void Gradient::add_force(Actor *a, V2 &f)
-{
-    ecl::V2 force;
-    int t = get_type();
-
-    static int xforce[MAXTYPE-MINTYPE+1] = {
-         0,  0,  1, -1,
-         1, -1,  1, -1,
-         1,  1, -1, -1,
-        -1, -1,  1,  1,
-         1, -1,  1, -1,
-         0,  0,  1, -1
-    };
-    static int yforce[MAXTYPE-MINTYPE+1] = {
-         1, -1,  0,  0,
-         1,  1, -1, -1,
-         1, -1,  1, -1,
-         1, -1,  1, -1,
-        -1, -1,  1,  1,
-         1, -1,  0,  0
-    };
-    force = ecl::V2(xforce[t-MINTYPE], yforce[t-MINTYPE]);
-    force.normalize();
-
-    // use enigma::SlopeForce if no "force" attribute is set
-    double factor = server::SlopeForce;
-    if (use_forcefac)
-        factor = forcefac;
-    force *= factor;
-    f += force;
-    Floor::add_force(a, f);
-}
-
-
-
-void InitFloors()
-{
-    // Floors (most floors are defined in init.lua)
-    Register(new DummyFloor);
-
-    Register(new Gradient);
-    Register("fl-gradient1", new Gradient(1));
-    Register("fl-gradient2", new Gradient(2));
-    Register("fl-gradient3", new Gradient(3));
-    Register("fl-gradient4", new Gradient(4));
-    Register("fl-gradient5", new Gradient(5));
-    Register("fl-gradient6", new Gradient(6));
-    Register("fl-gradient7", new Gradient(7));
-    Register("fl-gradient8", new Gradient(8));
-    Register("fl-gradient9", new Gradient(9));
-    Register("fl-gradient10", new Gradient(10));
-    Register("fl-gradient11", new Gradient(11));
-    Register("fl-gradient12", new Gradient(12));
-    Register("fl-gradient13", new Gradient(22));
-    Register("fl-gradient14", new Gradient(21));
-    Register("fl-gradient15", new Gradient(24));
-    Register("fl-gradient16", new Gradient(23));
-}
-
 } // namespace enigma

Modified: trunk/src/floors.hh
===================================================================
--- trunk/src/floors.hh	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/floors.hh	2009-02-05 22:51:49 UTC (rev 1516)
@@ -132,6 +132,7 @@
         int get_fire_countdown();
         virtual bool on_heattransform(Direction sourcedir, FloorHeatFlags flhf);
 
+        ecl::V2 var_floorforce;
     private:
         virtual void on_actorhit(Actor * /*a*/) {}
         // Fire logic
@@ -146,11 +147,8 @@
         int fire_countdown;  // used to delay ignition, default is 1.
         double friction;
         double adhesion;
-        ecl::V2 var_floorforce;
     };
 
-    void InitFloors();
-
 } // namespace enigma
 
 #endif

Modified: trunk/src/ox_extra.cc
===================================================================
--- trunk/src/ox_extra.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/ox_extra.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -71,8 +71,8 @@
     UNUSED,              // OxydExtra floor 0x22
     UNUSED,              // OxydExtra floor 0x23
     UNUSED,              // OxydExtra floor 0x24
-    "fl-gradient3",      // OxydExtra floor 0x25
-    "fl-gradient4",      // OxydExtra floor 0x26
+    "fl_slope_pe",      // OxydExtra floor 0x25
+    "fl_slope_pw",      // OxydExtra floor 0x26
     UNUSED,              // OxydExtra floor 0x27
     UNUSED,              // OxydExtra floor 0x28
     UNUSED,              // OxydExtra floor 0x29
@@ -83,8 +83,8 @@
     UNUSED,              // OxydExtra floor 0x2e
     UNUSED,              // OxydExtra floor 0x2f
     UNUSED,              // OxydExtra floor 0x30
-    "fl-gradient15",     // OxydExtra floor 0x31
-    "fl-gradient16",     // OxydExtra floor 0x32
+    "fl_slope_te",     // OxydExtra floor 0x31
+    "fl_slope_tw",     // OxydExtra floor 0x32
     UNUSED,              // OxydExtra floor 0x33
     "fl_rough",          // OxydExtra floor 0x34
     UNUSED,              // OxydExtra floor 0x35

Modified: trunk/src/ox_magnum.cc
===================================================================
--- trunk/src/ox_magnum.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/ox_magnum.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -69,22 +69,22 @@
     UNUSED,                     // OxydMagnum floor 0x20
     UNUSED,                     // OxydMagnum floor 0x21
     UNUSED,                     // OxydMagnum floor 0x22
-    "fl-gradient1",             // OxydMagnum floor 0x23
-    "fl-gradient2",             // OxydMagnum floor 0x24
-    "fl-gradient3",             // OxydMagnum floor 0x25
-    "fl-gradient4",             // OxydMagnum floor 0x26
-    "fl-gradient5",             // OxydMagnum floor 0x27
-    "fl-gradient6",             // OxydMagnum floor 0x28
-    "fl-gradient7",             // OxydMagnum floor 0x29
-    "fl-gradient8",             // OxydMagnum floor 0x2a
-    "fl-gradient9",             // OxydMagnum floor 0x2b
-    "fl-gradient10",            // OxydMagnum floor 0x2c
-    "fl-gradient11",            // OxydMagnum floor 0x2d
-    "fl-gradient12",            // OxydMagnum floor 0x2e
-    "fl-gradient13",            // OxydMagnum floor 0x2f
-    "fl-gradient14",            // OxydMagnum floor 0x30
-    "fl-gradient15",            // OxydMagnum floor 0x31
-    "fl-gradient16",            // OxydMagnum floor 0x32
+    "fl_slope_ps",             // OxydMagnum floor 0x23
+    "fl_slope_ps",             // OxydMagnum floor 0x24
+    "fl_slope_pe",             // OxydMagnum floor 0x25
+    "fl_slope_pw",             // OxydMagnum floor 0x26
+    "fl_slope_ose",             // OxydMagnum floor 0x27
+    "fl_slope_osw",             // OxydMagnum floor 0x28
+    "fl_slope_one",             // OxydMagnum floor 0x29
+    "fl_slope_onw",             // OxydMagnum floor 0x2a
+    "fl_slope_ise",             // OxydMagnum floor 0x2b
+    "fl_slope_ine",            // OxydMagnum floor 0x2c
+    "fl_slope_isw",            // OxydMagnum floor 0x2d
+    "fl_slope_inw",            // OxydMagnum floor 0x2e
+    "fl_slope_ts",            // OxydMagnum floor 0x2f
+    "fl_slope_tn",            // OxydMagnum floor 0x30
+    "fl_slope_te",            // OxydMagnum floor 0x31
+    "fl_slope_tw",            // OxydMagnum floor 0x32
     "fl_brick",                 // OxydMagnum floor 0x33 (common was 'fl-rough')
     "fl_brick",                 // OxydMagnum floor 0x34 (common was 'fl-rough')
     UNUSED,                     // OxydMagnum floor 0x35

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/ox_oxyd1.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -102,22 +102,22 @@
     "fl_space",                 // Oxyd1 floor 0x20
     "fl_space_force",           // Oxyd1 floor 0x21
     "fl_space",                 // Oxyd1 floor 0x22
-    "fl-gradient1",             // Oxyd1 floor 0x23
-    "fl-gradient2",             // Oxyd1 floor 0x24
-    "fl-gradient3",             // Oxyd1 floor 0x25
-    "fl-gradient4",             // Oxyd1 floor 0x26
-    "fl-gradient5",             // Oxyd1 floor 0x27
-    "fl-gradient6",             // Oxyd1 floor 0x28
-    "fl-gradient7",             // Oxyd1 floor 0x29
-    "fl-gradient8",             // Oxyd1 floor 0x2a
-    "fl-gradient9",             // Oxyd1 floor 0x2b
-    "fl-gradient10",            // Oxyd1 floor 0x2c
-    "fl-gradient11",            // Oxyd1 floor 0x2d
-    "fl-gradient12",            // Oxyd1 floor 0x2e
-    "fl-gradient13",            // Oxyd1 floor 0x2f
-    "fl-gradient14",            // Oxyd1 floor 0x30
-    "fl-gradient15",            // Oxyd1 floor 0x31
-    "fl-gradient16",            // Oxyd1 floor 0x32
+    "fl_slope_ps",              // Oxyd1 floor 0x23
+    "fl_slope_pn",              // Oxyd1 floor 0x24
+    "fl_slope_pe",              // Oxyd1 floor 0x25
+    "fl_slope_pw",              // Oxyd1 floor 0x26
+    "fl_slope_ose",             // Oxyd1 floor 0x27
+    "fl_slope_osw",             // Oxyd1 floor 0x28
+    "fl_slope_one",             // Oxyd1 floor 0x29
+    "fl_slope_onw",             // Oxyd1 floor 0x2a
+    "fl_slope_ise",             // Oxyd1 floor 0x2b
+    "fl_slope_ine",             // Oxyd1 floor 0x2c
+    "fl_slope_isw",             // Oxyd1 floor 0x2d
+    "fl_slope_inw",             // Oxyd1 floor 0x2e
+    "fl_slope_ts",              // Oxyd1 floor 0x2f
+    "fl_slope_tn",              // Oxyd1 floor 0x30
+    "fl_slope_te",              // Oxyd1 floor 0x31
+    "fl_slope_tw",              // Oxyd1 floor 0x32
     "fl_brick",                 // Oxyd1 floor 0x33
     "fl_brick",                 // Oxyd1 floor 0x34 (common was 'fl-rough')
     UNUSED,                     // Oxyd1 floor 0x35

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/ox_peroxyd.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -138,22 +138,22 @@
     UNUSED,                     // PerOxyd floor 0x20
     "fl_space_force",           // PerOxyd floor 0x21 (flat force)
     UNUSED,                     // PerOxyd floor 0x22
-    "fl-gradient1",             // PerOxyd floor 0x23
-    "fl-gradient2",             // PerOxyd floor 0x24
-    "fl-gradient3",             // PerOxyd floor 0x25
-    "fl-gradient4",             // PerOxyd floor 0x26
-    "fl-gradient5",             // PerOxyd floor 0x27
-    "fl-gradient6",             // PerOxyd floor 0x28
-    "fl-gradient7",             // PerOxyd floor 0x29
-    "fl-gradient8",             // PerOxyd floor 0x2a
-    "fl-gradient9",             // PerOxyd floor 0x2b
-    "fl-gradient10",            // PerOxyd floor 0x2c
-    "fl-gradient11",            // PerOxyd floor 0x2d
-    "fl-gradient12",            // PerOxyd floor 0x2e
-    "fl-gradient13",            // PerOxyd floor 0x2f (flat force)
-    "fl-gradient14",            // PerOxyd floor 0x30 (flat force)
-    "fl-gradient15",            // PerOxyd floor 0x31 (flat force)
-    "fl-gradient16",            // PerOxyd floor 0x32 (flat force)
+    "fl_slope_ps",             // PerOxyd floor 0x23
+    "fl_slope_pn",             // PerOxyd floor 0x24
+    "fl_slope_pe",             // PerOxyd floor 0x25
+    "fl_slope_pw",             // PerOxyd floor 0x26
+    "fl_slope_ose",             // PerOxyd floor 0x27
+    "fl_slope_osw",             // PerOxyd floor 0x28
+    "fl_slope_one",             // PerOxyd floor 0x29
+    "fl_slope_onw",             // PerOxyd floor 0x2a
+    "fl_slope_ise",             // PerOxyd floor 0x2b
+    "fl_slope_ine",            // PerOxyd floor 0x2c
+    "fl_slope_isw",            // PerOxyd floor 0x2d
+    "fl_slope_inw",            // PerOxyd floor 0x2e
+    "fl_slope_ts",            // PerOxyd floor 0x2f (flat force)
+    "fl_slope_tn",            // PerOxyd floor 0x30 (flat force)
+    "fl_slope_te",            // PerOxyd floor 0x31 (flat force)
+    "fl_slope_tw",            // PerOxyd floor 0x32 (flat force)
     "fl_rough",                 // PerOxyd floor 0x33 (common was 'fl-rough', should be a 'fl-paper')(only level 75)
     "fl_rough",                 // PerOxyd floor 0x34
     UNUSED,                     // PerOxyd floor 0x35

Modified: trunk/src/oxyd.cc
===================================================================
--- trunk/src/oxyd.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/oxyd.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -435,7 +435,7 @@
 
             if( name == 0) {
                 Log << ecl::strf ("Unknown floor %X\n",code);
-                fl = MakeFloor("fl-dummy");
+                fl = MakeFloor("fl_dummy");
                 fl->setAttr("code", code);
             }
             else {

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-05 21:35:42 UTC (rev 1515)
+++ trunk/src/world.cc	2009-02-05 22:51:49 UTC (rev 1516)
@@ -566,9 +566,11 @@
     V2 f = mforce;
     if (a->get_controllers() != 0) {
         if (a->is_drunken()) {
-            double time = fmod(server::LevelTime, 2.0) - 1.0;
+//            double time = fmod(server::LevelTime, 2.0) - 1.0;
+            int t = (int)server::LevelTime;
+            double time = fmod(t * M_PI, 2.0) - 1.0;
             // rotate mouse force by random angle
-            double maxangle = M_PI * 0.7;
+            double maxangle = M_PI * 0.4;
             double angle = maxangle * time;
 //            double angle = DoubleRand (-maxangle, maxangle);
             f = V2(f[0]*cos(angle) - f[1]*sin(angle),
@@ -2393,7 +2395,6 @@
     Object::bootFinished();
     BootRegister(NULL, NULL, false);
     InitLasers();
-    InitFloors();
 }
 
 void ShutdownWorld() {



From ral at mail.berlios.de  Fri Feb  6 00:17:22 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Fri, 6 Feb 2009 00:17:22 +0100
Subject: [Enigma-game-svn] r1517 - team_levelpacks/team_test_new_api
Message-ID: <200902052317.n15NHMXD020241@sheep.berlios.de>

Author: ral
Date: 2009-02-06 00:17:06 +0100 (Fri, 06 Feb 2009)
New Revision: 1517

Added:
   team_levelpacks/team_test_new_api/ralT080_1.xml
Modified:
   team_levelpacks/team_test_new_api/ralT031_1.xml
Log:
Test Level new API:
- added level for slope floors


Modified: team_levelpacks/team_test_new_api/ralT031_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT031_1.xml	2009-02-05 22:51:49 UTC (rev 1516)
+++ team_levelpacks/team_test_new_api/ralT031_1.xml	2009-02-05 23:17:06 UTC (rev 1517)
@@ -25,7 +25,7 @@
 ti["!"] = {"fl_wood", ignitable=true}
 ti["#"] = ti[" "] .. {"st_granite"}
 
-ti["A"] = ti[" "] .. {"it_trigger", target="lasera", action="toggle", "triggerA"}
+ti["A"] = ti[" "] .. {"it_trigger", "triggerA", target="lasera", action="toggle", "triggerA"}
 ti["B"] = ti["~"] .. {"it_trigger", target={"laserb","laserbon"}, action={"toggle", "on"}}
 ti["C"] = ti["."] .. {"it_trigger", target={"laserc","lasercon"}, action={"toggle", "on"}}
 ti["O"] = ti["!"] .. {"it_trigger", target={"lasero","laseroon"}, action={"toggle", "on"}}
@@ -57,6 +57,7 @@
 
 ti["M"] = ti[" "] .. {"st_switch", target="maketrigger"}
 ti["m"] = ti[" "] .. {"st_switch", target="makeactor"}
+ti["N"] = ti[" "] .. {"st_switch", target="freetrigger"}
 ti["X"] = ti[" "] .. {"it_wormhole", destination="triggerA", range=1}
 
 ti["1"] = (ti[" "] .. {"#ac_marble"}) .. {"it_ring"}
@@ -83,7 +84,7 @@
 "     W     W    W   ",
 "M    A     B    C   ",
 "    Y      ~    .   ",
-"fg   am    bd   ce  ",
+"fg   amN   bd   ce  ",
 "                    "
 })
 
@@ -99,6 +100,10 @@
     wo[sender] = {"st_nil"}
 end
 
+function freetrigger(value, sender)
+    wo[no["triggerA"]] = {"st_nil"}
+end
+
   ]]></el:luamain>
     <el:i18n>
 	 <el:string el:key="title">

Added: team_levelpacks/team_test_new_api/ralT080_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT080_1.xml	2009-02-05 22:51:49 UTC (rev 1516)
+++ team_levelpacks/team_test_new_api/ralT080_1.xml	2009-02-05 23:17:06 UTC (rev 1517)
@@ -0,0 +1,76 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test Slope new API" el:subtitle="" el:id="20090205ral545"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision$" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+
+wo["ConserveLevel"] = true
+
+ti[" "] = {"fl_sahara"}
+ti["1"] = {"#ac_marble"}
+
+ti["_"] = {"fl_slope"}
+ti["a"] = {"fl_slope_pw"}
+ti["b"] = {"fl_slope_ps"}
+ti["c"] = {"fl_slope_pe"}
+ti["d"] = {"fl_slope_pn"}
+ti["e"] = {"fl_slope_inw"}
+ti["f"] = {"fl_slope_isw"}
+ti["g"] = {"fl_slope_ise"}
+ti["h"] = {"fl_slope_ine"}
+ti["i"] = {"fl_slope_onw"}
+ti["j"] = {"fl_slope_osw"}
+ti["k"] = {"fl_slope_ose"}
+ti["l"] = {"fl_slope_one"}
+ti["A"] = {"fl_slope_tw"}
+ti["B"] = {"fl_slope_ts"}
+ti["C"] = {"fl_slope_te"}
+ti["D"] = {"fl_slope_tn"}
+ti["E"] = {"fl_slope_twl"}
+ti["F"] = {"fl_slope_tsl"}
+ti["G"] = {"fl_slope_tel"}
+ti["H"] = {"fl_slope_tnl"}
+ti["I"] = {"fl_slope_twr"}
+ti["J"] = {"fl_slope_tsr"}
+ti["K"] = {"fl_slope_ter"}
+ti["L"] = {"fl_slope_tnr"}
+ti["."] = {"fl_gray"}
+
+w, h = wo(ti, " ", {
+"...  ___  1  aaaa   ",
+"...  ___     cccc   ",
+"                    ",
+"  eh  kj        db  ",
+"  fg  li        db  ",
+"                db  ",
+"kGGGGGj         db  ",
+"HCCCCBF             ",
+"HDeKhBF             ",
+"HDL JBF             ",
+"HDfIgBF             ",
+"HDAAAAF             ",
+"lEEEEEi             "
+})
+
+  ]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT080_1.xml
___________________________________________________________________
Name: svn:keywords
   + Revision
Name: svn:eol-style
   + native



From andreasl at mail.berlios.de  Fri Feb  6 00:28:21 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Fri, 6 Feb 2009 00:28:21 +0100
Subject: [Enigma-game-svn] r1518 - homepage/input
Message-ID: <200902052328.n15NSLwL022812@sheep.berlios.de>

Author: andreasl
Date: 2009-02-06 00:28:18 +0100 (Fri, 06 Feb 2009)
New Revision: 1518

Modified:
   homepage/input/download.html
   homepage/input/download_de.html
   homepage/input/download_ru.html
   homepage/input/impressum.html
   homepage/input/impressum_de.html
   homepage/input/impressum_ru.html
   homepage/input/links.html
   homepage/input/links_de.html
   homepage/input/links_ru.html
Log:
Homepage:
 - repaired link to OZONE (now aims to "The Linux Game Tome"-
   page of OZONE)
 - copyright note for the amphora image (put into imprint)
 - download page:
    - link to FreeBSD now without wrong "0.92"-note
    - note for compiling the SVN version (needs curl!)
    - package summary for compiling under debian
 - validated
Todo:
 - Russian translations
 - Upload later (not important)


Modified: homepage/input/download.html
===================================================================
--- homepage/input/download.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/download.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -91,7 +91,7 @@
   <li><a href="http://packages.debian.org/unstable/games/enigma.html">
 	Debian</a></li>
   <li><a href="http://www.freshports.org/games/enigma/">
-	FreeBSD</a>&nbsp;&nbsp;(version 0.92)</li>
+	FreeBSD</a></li>
   <li><a href="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">
     Gentoo Linux</a></li>
   <li><a href="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma">
@@ -134,6 +134,25 @@
     <li><a href="http://xml.apache.org/xerces-c">Xerces</a>&nbsp;&nbsp;(&ge; 2.4)</li>
   </ul>
 
+  <p>If you want to compile the current SVN developmental version, you will
+  additionally need <a href="http://curl.haxx.se/">curl and libcurl4</a>.</p>
+
+  <p>If you're using Debian, you should have the following packages
+  installed for compiling the SVN developmental version:</p>
+
+  <ul>
+    <li>libxerces27-dev</li>
+    <li>curl</li>
+    <li>libcurl3-dev</li>
+    <li>libcurl3-openssl-dev</li>
+    <li>libsdl1.2-dev</li>
+    <li>libsdl-image1.2-dev</li>
+    <li>libsdl-mixer1.2-dev</li>
+    <li>libsdl-sound1.2-dev</li>
+    <li>libsdl-ttf2.0-dev</li>
+    <li>libxerces27-dev</li>
+  </ul>
+
 <h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
   <a name="announce">Announce Mailing List</a></h3>
 

Modified: homepage/input/download_de.html
===================================================================
--- homepage/input/download_de.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/download_de.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -99,7 +99,7 @@
   <li><a href="http://packages.debian.org/unstable/games/enigma.html">
 	Debian</a></li>
   <li><a href="http://www.freshports.org/games/enigma/">
-	FreeBSD</a>&nbsp;&nbsp;(version 0.92)</li>
+	FreeBSD</a></li>
   <li><a href="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">
     Gentoo Linux</a></li>
   <li><a href="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma">
@@ -146,6 +146,25 @@
     <li><a href="http://xml.apache.org/xerces-c">Xerces</a>&nbsp;&nbsp;(&ge; 2.4)
   </ul>
 
+  <p>Falls Sie die aktuelle SVN-Entwicklerversion kompilieren m&ouml;chten, 
+  ben&ouml;tigen Sie zus&auml;tzlich <a href="http://curl.haxx.se/"
+  >curl und libcurl4</a>.</p>
+
+  <p>Falls Sie Debian verwenden, sollten Sie die folgenden Pakete 
+  installiert haben, um die SVN-Entwicklerversion zu kompilieren:</p>
+
+  <ul>
+    <li>curl</li>
+    <li>libcurl3-dev</li>
+    <li>libcurl3-openssl-dev</li>
+    <li>libsdl1.2-dev</li>
+    <li>libsdl-image1.2-dev</li>
+    <li>libsdl-mixer1.2-dev</li>
+    <li>libsdl-sound1.2-dev</li>
+    <li>libsdl-ttf2.0-dev</li>
+    <li>libxerces27-dev</li>
+  </ul>
+
 <h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Nach oben" border="0" title="back to top"></a>
   <a name="announce">Ank&uuml;ndigungs-Mailingliste</a></h3>
 

Modified: homepage/input/download_ru.html
===================================================================
--- homepage/input/download_ru.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/download_ru.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -89,7 +89,7 @@
   <li><a href="http://packages.debian.org/unstable/games/enigma.html">
 	Debian</a></li>
   <li><a href="http://www.freshports.org/games/enigma/">
-	FreeBSD</a>&nbsp;&nbsp;(?????? 0.92)</li>
+	FreeBSD</a></li>
   <li><a href="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">
     Gentoo Linux</a></li>
   <li><a href="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma">
@@ -132,6 +132,24 @@
     <li><a href="http://xml.apache.org/xerces-c">Xerces</a>&nbsp;&nbsp;(&ge; 2.4)</li>
   </ul>
 
+  <p>If you want to compile the current SVN developmental version, you will
+  additionally need <a href="http://curl.haxx.se/">curl and libcurl4</a>.</p>
+
+  <p>If you're using Debian, you should have the following packages
+  installed for compiling the SVN developmental version:</p>
+
+  <ul>
+    <li>curl</li>
+    <li>libcurl3-dev</li>
+    <li>libcurl3-openssl-dev</li>
+    <li>libsdl1.2-dev</li>
+    <li>libsdl-image1.2-dev</li>
+    <li>libsdl-mixer1.2-dev</li>
+    <li>libsdl-sound1.2-dev</li>
+    <li>libsdl-ttf2.0-dev</li>
+    <li>libxerces27-dev</li>
+  </ul>
+
 <h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
   <a name="announce">?????? ???????? ? ???????????? ? ???????</a></h3>
 

Modified: homepage/input/impressum.html
===================================================================
--- homepage/input/impressum.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/impressum.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -8,3 +8,9 @@
 0551 / 3791553<br>
 andreas.lochmann at stud.uni-goettingen.de<br>
 <a href="$$disclaimer$$">Disclaimer</a></p>
+
+<p>
+The image of the amphora with Theseus and Procrustes depicted on it (article LotM 12/08) is a black-and-white version of a public domain image, available <a href="http://commons.wikimedia.org/wiki/File:Theseus_Prokroustes_Staatliche_Antikensammlungen_2325.jpg">via Wikimedia</a>.
+</p>
+
+

Modified: homepage/input/impressum_de.html
===================================================================
--- homepage/input/impressum_de.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/impressum_de.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -8,3 +8,8 @@
 0551 / 3791553<br>
 andreas.lochmann at stud.uni-goettingen.de<br>
 <a href="$$disclaimer$$">Haftungsausschluss</a></p>
+
+<p>
+Das Bild der Amphore mit Abbildungen von Theseus und Prokrustes (Artikel LdM 12/08) ist eine Schwarz-Wei&szlig;-Version eines Public-Domain-Bildes, verf&uuml;gbar <a href="http://commons.wikimedia.org/wiki/File:Theseus_Prokroustes_Staatliche_Antikensammlungen_2325.jpg">via Wikimedia</a>.
+</p>
+

Modified: homepage/input/impressum_ru.html
===================================================================
--- homepage/input/impressum_ru.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/impressum_ru.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -8,3 +8,8 @@
 0551 / 3791553<br>
 andreas.lochmann at stud.uni-goettingen.de<br>
 <a href="$$disclaimer$$">????????</a></p>
+
+<p>
+The image of the amphora with Theseus and Procrustes depicted on it (article LotM 12/08) is a black-and-white version of a public domain image, available <a href="http://commons.wikimedia.org/wiki/File:Theseus_Prokroustes_Staatliche_Antikensammlungen_2325.jpg">via Wikimedia</a>.
+</p>
+

Modified: homepage/input/links.html
===================================================================
--- homepage/input/links.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/links.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -45,8 +45,8 @@
     <ul>
         <li><a href="http://www.oxyd-game.com">Oxyd&reg; extra v2.0</a>
         - The only official available Dongleware Oxyd version</li>
-        <li><a href="http://ozone.game-host.org/wiki/index.php?title=Main_Page">Ozone</a>
-        - A game similar to Enigma but in three dimensions, with level-editor</li>
+        <li><a href="http://www.happypenguin.org/show?OZONE">Ozone</a>
+        - A game similar to Enigma but in three dimensions, with level-editor (link to &quot;The Linux Game Tome&quot;)</li>
         <li><a href="http://www.harbaum.org/till/palm/mulg/">Mulg</a>
         - A game similar to Enigma for Palms, with level-editor</li>
     </ul>

Modified: homepage/input/links_de.html
===================================================================
--- homepage/input/links_de.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/links_de.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -45,8 +45,8 @@
     <ul>
         <li><a href="http://www.oxyd-game.com">Oxyd&reg; extra v2.0</a>
         - Die einzige offiziell erh&auml;ltliche Dongleware Oxyd Version</li>
-        <li><a href="http://ozone.game-host.org/wiki/index.php?title=Main_Page">Ozone</a>
-        - Ein Spiel &auml;hnlich Oxyd aber in drei Dimensionen, mit Level-Editor</li>
+        <li><a href="http://www.happypenguin.org/show?OZONE">Ozone</a>
+        - Ein Spiel &auml;hnlich Oxyd aber in drei Dimensionen, mit Level-Editor (Link zu &quot;The Linux Game Tome&quot;)</li>
         <li><a href="http://www.harbaum.org/till/palm/mulg/">Mulg</a>
         - Ein Spiel &auml;hnlich Oxyd f&uuml;r Palms, mit Level-Editor</li>
     </ul>

Modified: homepage/input/links_ru.html
===================================================================
--- homepage/input/links_ru.html	2009-02-05 23:17:06 UTC (rev 1517)
+++ homepage/input/links_ru.html	2009-02-05 23:28:18 UTC (rev 1518)
@@ -45,8 +45,8 @@
     <ul>
         <li><a href="http://www.oxyd-game.com">Oxyd&reg; extra v2.0</a>
         - ?????? ?????????? ????????? ?????? Dongleware Oxyd</li>
-        <li><a href="http://ozone.game-host.org/wiki/index.php?title=Main_Page">Ozone</a>
-        - ????, ??????? ?? Enigma, ?? ? ???? ??????????, ? ?????????? ???????</li>
+        <li><a href="http://www.happypenguin.org/show?OZONE">Ozone</a>
+        - ????, ??????? ?? Enigma, ?? ? ???? ??????????, ? ?????????? ??????? (link to &quot;The Linux Game Tome&quot;)</li>
         <li><a href="http://www.harbaum.org/till/palm/mulg/">Mulg</a>
         - ????, ??????? ?? Enigma ??? Palm'??, ? ?????????? ???????</li>
     </ul>



From raoul at mail.berlios.de  Fri Feb  6 00:55:52 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Fri, 6 Feb 2009 00:55:52 +0100
Subject: [Enigma-game-svn] r1519 - in trunk/data/levels: enigma_cross
	enigma_ii enigma_iii enigma_iv enigma_tutorial enigma_vii
	enigma_viii
Message-ID: <200902052355.n15Ntqwg015326@sheep.berlios.de>

Author: raoul
Date: 2009-02-06 00:55:50 +0100 (Fri, 06 Feb 2009)
New Revision: 1519

Modified:
   trunk/data/levels/enigma_cross/enigma0_92_2.xml
   trunk/data/levels/enigma_cross/newlevels.xml
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_ii/andreas02_2.xml
   trunk/data/levels/enigma_ii/andreas15_2.xml
   trunk/data/levels/enigma_ii/index.xml
   trunk/data/levels/enigma_iii/andreas04_1.xml
   trunk/data/levels/enigma_iii/index.xml
   trunk/data/levels/enigma_iv/duffy73_3.xml
   trunk/data/levels/enigma_iv/index.xml
   trunk/data/levels/enigma_tutorial/adv_tutorial.xml
   trunk/data/levels/enigma_tutorial/index.xml
   trunk/data/levels/enigma_vii/alain28_2.xml
   trunk/data/levels/enigma_vii/index.xml
   trunk/data/levels/enigma_vii/mecke09_2.xml
   trunk/data/levels/enigma_vii/mecke12_2.xml
   trunk/data/levels/enigma_vii/pulley04_2.xml
   trunk/data/levels/enigma_vii/pulley06_2.xml
   trunk/data/levels/enigma_vii/pulley07_1.xml
   trunk/data/levels/enigma_viii/devnull04_1.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/mecke01_1.xml
   trunk/data/levels/enigma_viii/mecke02_1.xml
   trunk/data/levels/enigma_viii/mecke06_1.xml
   trunk/data/levels/enigma_viii/mecke10_2.xml
   trunk/data/levels/enigma_viii/mecke15_1.xml
   trunk/data/levels/enigma_viii/mecke19_1.xml
   trunk/data/levels/enigma_viii/mecke22_2.xml
   trunk/data/levels/enigma_viii/mecke31_1.xml
   trunk/data/levels/enigma_viii/ral21_2.xml
Log:
-> Level updates for gradient renamings



Modified: trunk/data/levels/enigma_cross/enigma0_92_2.xml
===================================================================
--- trunk/data/levels/enigma_cross/enigma0_92_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_cross/enigma0_92_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -153,7 +153,7 @@
     <level _seq="145" _title="Build Up and Tear Down" _xpath="enigma_v/duffy70_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy70" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="146" _title="Don't Be Greedy" _xpath="enigma_v/duffy71_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy71" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="147" _title="Where Am I?" _xpath="enigma_iv/duffy72_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy72" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="148" _title="Bizarro World" _xpath="enigma_iv/duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="20" score="2" target="time" unit="duration"/>
+    <level _seq="148" _title="Bizarro World" _xpath="enigma_iv/duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="21" score="2" target="time" unit="duration"/>
     <level _seq="149" _title="Solvable?" _xpath="enigma_v/barry01_2" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry01" rel="2" rev="0" score="2" target="time" unit="duration"/>
     <level _seq="150" _title="Where is it?" _xpath="enigma_iv/barry02_1" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="151" _title="Tool Time" _xpath="enigma_ii/barry03_1" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry03" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_cross/newlevels.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="32" title="Enigma 1.00 new"/>
+  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="33" title="Enigma 1.00 new"/>
 
   <attributes/>
 
@@ -41,9 +41,9 @@
     <level _seq="33" _title="Robin's Wood" _xpath="enigma_ii/andreas13_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas13" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="34" _title="Road to Eden" _xpath="enigma_ii/alain22_1" author="Alain Busser" ctrl="force" easy="false" id="alain22" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="35" _title="Disk Royal" _xpath="enigma_ii/illmind02_1" author="illmind" ctrl="force" easy="false" id="illmind02" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="36" _title="Spaceless" _xpath="enigma_ii/andreas02_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas02" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="36" _title="Spaceless" _xpath="enigma_ii/andreas02_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas02" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Laser Paradise" _xpath="enigma_ii/illmind05_1" author="illmind" ctrl="force" easy="false" id="illmind05" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="38" _title="Spaceleast" _xpath="enigma_ii/andreas15_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas15" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="38" _title="Spaceleast" _xpath="enigma_ii/andreas15_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas15" rel="2" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="39" _title="The Fuse" _xpath="enigma_ii/capkoh02_1" author="capkoh" ctrl="force" easy="false" id="capkoh02" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="40" _title="- Meditation -" _xpath="enigma_ii/edward10_1" author="Edward" ctrl="force" easy="false" id="edward10" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="41" _title="Knight Moves" _xpath="enigma_ii/illmind04_1" author="illmind" ctrl="force" easy="false" id="illmind04" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -67,7 +67,7 @@
     <level _seq="59" _title="Manamana" _xpath="enigma_iii/just07_1" author="JuSt" ctrl="force" easy="false" id="just07" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="60" _title="Bad Flowers" _xpath="enigma_iii/nat30_1" author="Nat Pryce" ctrl="force" easy="true" id="nat30" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="61" _title="Don't Touch" _xpath="enigma_iii/raoul07_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul07" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="62" _title="Laser Castle" _xpath="enigma_iii/andreas04_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas04" rel="1" rev="15" score="1" target="time" unit="duration"/>
+    <level _seq="62" _title="Laser Castle" _xpath="enigma_iii/andreas04_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas04" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="63" _title="Bump Ahead" _xpath="enigma_iii/illmind01_1" author="illmind" ctrl="force" easy="false" id="illmind01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="64" _title="Killer Hills" _xpath="enigma_iii/luc11_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc11" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="Fox in the Henhouse" _xpath="enigma_iii/nat26_1" author="Nat Pryce" ctrl="force" easy="false" id="nat26" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -173,7 +173,7 @@
     <level _seq="165" _title="Chessing Positions" _xpath="enigma_vi/raoul22_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="166" _title="Twisting by the pool" _xpath="enigma_vi/alain23_1" author="Alain Busser" ctrl="force" easy="true" id="alain23" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="167" _title="Hot Meditation" _xpath="enigma_vi/ral08_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060527ral010" rel="1" rev="42" score="1" target="time" unit="duration"/>
-    <level _seq="168" _title="Pool with a pole" _xpath="enigma_vii/alain28_2" author="Alain Busser" ctrl="force" easy="false" id="alain28" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="168" _title="Pool with a pole" _xpath="enigma_vii/alain28_2" author="Alain Busser" ctrl="force" easy="false" id="alain28" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="169" _title="Jump into Meditation" _xpath="enigma_vi/ral07_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060525ral009" rel="1" rev="42" score="1" target="time" unit="duration"/>
     <level _seq="170" _title="- Meditation -" _xpath="enigma_vi/raoul18_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul18" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="171" _title="Step gently!" _xpath="enigma_vi/malla03_2" author="Manuel K?nig" ctrl="force" easy="true" id="malla03" rel="2" rev="2" score="2" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="37" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="38" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -30,7 +30,7 @@
     <level _seq="22" _title="Double Oneways" _xpath="enigma_vii/duffy172_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy172" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Wood - Water - Wood" _xpath="enigma_vii/duffy173_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy173" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="Transpositions" _xpath="enigma_vii/duffy174_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy174" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="25" _title="Puppet" _xpath="enigma_vii/pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="9" score="1" target="time" unit="duration"/>
+    <level _seq="25" _title="Puppet" _xpath="enigma_vii/pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="Restless Meditation" _xpath="enigma_vii/ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="27" _title="Ghost Driver" _xpath="enigma_vii/duffy176_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy176" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Re-entry Circuit" _xpath="enigma_vii/pulley05_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley05" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -59,8 +59,8 @@
     <level _seq="51" _title="Swapping Puzzle II" _xpath="enigma_vii/joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Multiban" _xpath="enigma_vii/dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Riverside" _xpath="enigma_vii/johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="19" score="2" target="time" unit="duration"/>
-    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="21" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="The Lone Ranger" _xpath="enigma_vii/pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="20" score="2" target="time" unit="duration"/>
+    <level _seq="55" _title="Little Shop Of Horrors" _xpath="enigma_vii/pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="22" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Spaceship Control" _xpath="enigma_vii/safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Ball Alley" _xpath="enigma_vii/johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Action Potential" _xpath="enigma_vii/pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -79,21 +79,21 @@
     <level _seq="71" _title="Pick-Up" _xpath="enigma_vii/joe27_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe27" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="A Kind of Magic" _xpath="enigma_vii/just37_2" author="JuSt" ctrl="force" easy="true" id="JuStA Kind of Magic" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="73" _title="Blue Screen Of Death" _xpath="enigma_vii/pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="74" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
+    <level _seq="74" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Black Liberation" _xpath="enigma_vii/mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
-    <level _seq="76" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="48" score="1" target="time" unit="duration"/>
-    <level _seq="77" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="35" score="1" target="time" unit="duration"/>
+    <level _seq="76" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="49" score="1" target="time" unit="duration"/>
+    <level _seq="77" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="78" _title="Rhythm of Space" _xpath="enigma_viii/mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="79" _title="The Show Jumper" _xpath="enigma_viii/andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="The Red Room" _xpath="enigma_viii/joe29_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe29" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Enigmines" _xpath="enigma_viii/huffman01_1" author="Brian Huffman" ctrl="force" easy="true" id="huffman01" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="Red Cave" _xpath="enigma_viii/mecke21_2" author="mecke" ctrl="force" easy="true" id="mecke21" rel="2" rev="45" score="1" target="time" unit="duration"/>
     <level _seq="83" _title="Status code 302" _xpath="enigma_viii/devnull02_1" author="/dev/null" ctrl="force" easy="true" id="devnull02" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="84" _title="A Screenful of Secrets" _xpath="enigma_viii/mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="35" score="1" target="time" unit="duration"/>
-    <level _seq="85" _title="Southside Life" _xpath="enigma_viii/mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="33" score="1" target="time" unit="duration"/>
+    <level _seq="84" _title="A Screenful of Secrets" _xpath="enigma_viii/mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="36" score="1" target="time" unit="duration"/>
+    <level _seq="85" _title="Southside Life" _xpath="enigma_viii/mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="34" score="1" target="time" unit="duration"/>
     <level _seq="86" _title="Joona's Chess" _xpath="enigma_viii/joona02_1" author="Joona Laire" ctrl="force" easy="true" id="joona02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="87" _title="Helios I" _xpath="enigma_viii/mecke07_1" author="mecke" ctrl="force" easy="false" id="mecke48" rel="1" rev="22" score="1" target="time" unit="duration"/>
-    <level _seq="88" _title="The Green Hell" _xpath="enigma_viii/mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="82" score="1" target="time" unit="duration"/>
+    <level _seq="88" _title="The Green Hell" _xpath="enigma_viii/mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="83" score="1" target="time" unit="duration"/>
     <level _seq="89" _title="Tilt Board" _xpath="enigma_viii/ulf06_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20080529ulf118" rel="2" rev="116" score="2" target="time" unit="duration"/>
     <level _seq="90" _title="4 - 8 - 4" _xpath="enigma_viii/dpl03_3" author="Dominik Leipold" ctrl="force" easy="true" id="20070821dpl003" rel="3" rev="4" score="3" target="time" unit="duration"/>
     <level _seq="91" _title="Impulsive Order" _xpath="enigma_viii/raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="13" score="1" target="time" unit="duration"/>
@@ -120,23 +120,23 @@
     <level _seq="112" _title=" - Meditation - " _xpath="enigma_viii/devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="113" _title="Relaxing at the sea" _xpath="enigma_viii/devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="114" _title="Helios II" _xpath="enigma_viii/mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
-    <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="154" score="2" target="time" unit="duration"/>
+    <level _seq="115" _title="Tutoxyd's Pyramid" _xpath="enigma_viii/ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="155" score="2" target="time" unit="duration"/>
     <level _seq="116" _title="Alternation I" _xpath="enigma_viii/mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="117" _title="Enigmaparcour II" _xpath="enigma_viii/mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="17" score="1" target="time" unit="duration"/>
     <level _seq="118" _title=" - Meditation - " _xpath="enigma_viii/devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="119" _title=" - Meditation - " _xpath="enigma_viii/devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
-    <level _seq="120" _title="- Meditation -" _xpath="enigma_viii/devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="9" score="1" target="time" unit="duration"/>
+    <level _seq="120" _title="- Meditation -" _xpath="enigma_viii/devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="121" _title="Multi-lane" _xpath="enigma_viii/devnull03_1" author="/dev/null" ctrl="force" easy="true" id="devnull03" rel="1" rev="26" score="1" target="time" unit="duration"/>
     <level _seq="122" _title="See Saw Meditation" _xpath="enigma_viii/duffy180_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy180" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="123" _title="Under control?" _xpath="enigma_viii/devnull09_1" author="/dev/null" ctrl="force" easy="true" id="devnull09" rel="1" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="124" _title=" - Meditation - " _xpath="enigma_viii/devnull12_1" author="/dev/null" ctrl="force" easy="true" id="devnull12" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="125" _title="On belay?" _xpath="enigma_viii/devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="126" _title="Hang-dogging?" _xpath="enigma_viii/devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
-    <level _seq="127" _title="Alternation II" _xpath="enigma_viii/mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
+    <level _seq="127" _title="Alternation II" _xpath="enigma_viii/mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="128" _title="Fifty Years Later ..." _xpath="enigma_viii/mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="37" score="1" target="time" unit="duration"/>
-    <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="20" score="1" target="time" unit="duration"/>
-    <level _seq="130" _title="Techno Voodoo" _xpath="enigma_viii/mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="18" score="1" target="time" unit="duration"/>
-    <level _seq="131" _title="Plutos World" _xpath="enigma_viii/mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="20" score="1" target="time" unit="duration"/>
+    <level _seq="129" _title="Turbulencia" _xpath="enigma_viii/mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="21" score="1" target="time" unit="duration"/>
+    <level _seq="130" _title="Techno Voodoo" _xpath="enigma_viii/mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="131" _title="Plutos World" _xpath="enigma_viii/mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="21" score="1" target="time" unit="duration"/>
     <level _seq="132" _title="Plutos Confusion" _xpath="enigma_viii/mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="133" _title="Coober Pedy Opals" _xpath="enigma_viii/ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="134" _title="Butterfly Opals" _xpath="enigma_viii/ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_ii/andreas02_2.xml
===================================================================
--- trunk/data/levels/enigma_ii/andreas02_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_ii/andreas02_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Spaceless" el:subtitle="" el:id="andreas02"/>
-      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
       <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2005, 2009 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -14,19 +14,19 @@
     </el:info>
     <el:luamain><![CDATA[
 wo["SlopeStrength"] = 30
-                               -- Gradienten
-ti["v"] = {"fl-gradient1"}     --   1   v
-ti["^"] = {"fl-gradient2"}     --   2   ^
-ti[">"] = {"fl-gradient3"}     --   3   >
-ti["<"] = {"fl-gradient4"}     --   4   <
-ti["B"] = {"fl-gradient5"}     --   5  > v  Tal
-ti["A"] = {"fl-gradient6"}     --   6  < v  Tal
-ti["C"] = {"fl-gradient7"}     --   7  > ^  Tal
-ti["D"] = {"fl-gradient8"}     --   8  < ^  Tal
-ti["b"] = {"fl-gradient9"}     --   9  > v  Spitze
-ti["c"] = {"fl-gradient10"}    --  10  > ^  Spitze
-ti["a"] = {"fl-gradient11"}    --  11  < v  Spitze
-ti["d"] = {"fl-gradient12"}    --  12  < ^  Spitze
+                              -- Gradienten
+ti["v"] = {"fl_slope_ps"}     --   1   v
+ti["^"] = {"fl_slope_pn"}     --   2   ^
+ti[">"] = {"fl_slope_pe"}     --   3   >
+ti["<"] = {"fl_slope_pw"}     --   4   <
+ti["B"] = {"fl_slope_ose"}    --   5  > v  Tal
+ti["A"] = {"fl_slope_osw"}    --   6  < v  Tal
+ti["C"] = {"fl_slope_one"}    --   7  > ^  Tal
+ti["D"] = {"fl_slope_onw"}    --   8  < ^  Tal
+ti["b"] = {"fl_slope_ise"}    --   9  > v  Spitze
+ti["c"] = {"fl_slope_ine"}    --  10  > ^  Spitze
+ti["a"] = {"fl_slope_isw"}    --  11  < v  Spitze
+ti["d"] = {"fl_slope_inw"}    --  12  < ^  Spitze
 ti[" "] = {"fl_space"}
 ti["#"] = {"st_death"}
 ti["O"] = {"st_oxyd", flavor = "b"}

Modified: trunk/data/levels/enigma_ii/andreas15_2.xml
===================================================================
--- trunk/data/levels/enigma_ii/andreas15_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_ii/andreas15_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Spaceleast" el:subtitle="" el:id="andreas15"/>
-      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="5" el:status="released"/>
       <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2005, 2009 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -16,12 +16,12 @@
 wo["SlopeStrength"] = 30
 
 ti[" "] = {"fl_space"}
-ti["2"] = {"fl-gradient1"}
-ti["5"] = {"fl-gradient2"}
-ti["3"] = {"fl-gradient11"}
-ti["6"] = {"fl-gradient12"}
-ti["1"] = {"fl-gradient9"}
-ti["4"] = {"fl-gradient10"}
+ti["2"] = {"fl_slope_ps"}
+ti["5"] = {"fl_slope_pn"}
+ti["3"] = {"fl_slope_isw"}
+ti["6"] = {"fl_slope_inw"}
+ti["1"] = {"fl_slope_ise"}
+ti["4"] = {"fl_slope_ine"}
 ti["!"] = {"st_purplegray"}
 ti["#"] = {"st_death"}
 

Modified: trunk/data/levels/enigma_ii/index.xml
===================================================================
--- trunk/data/levels/enigma_ii/index.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_ii/index.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10300" network="false" owner="Enigma Team" release="1" revision="17" title="Enigma II"/>
+  <info enigma="1.00" group="Enigma" location="10300" network="false" owner="Enigma Team" release="1" revision="18" title="Enigma II"/>
 
   <attributes/>
 
@@ -58,9 +58,9 @@
     <level _seq="50" _title="- Meditation -" _xpath="./siegfried37_1" author="Siegfried Fennig" ctrl="force" easy="false" id="meditation16" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Disk Royal" _xpath="./illmind02_1" author="illmind" ctrl="force" easy="false" id="illmind02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Back And Forth" _xpath="./martin26_2" author="Martin Hawlisch" ctrl="force" easy="false" id="martin26" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="53" _title="Spaceless" _xpath="./andreas02_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas02" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="53" _title="Spaceless" _xpath="./andreas02_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas02" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="54" _title="Laser Paradise" _xpath="./illmind05_1" author="illmind" ctrl="force" easy="false" id="illmind05" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="55" _title="Spaceleast" _xpath="./andreas15_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas15" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="55" _title="Spaceleast" _xpath="./andreas15_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas15" rel="2" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Easy Shifting.." _xpath="./ralf01_1" author="Ralf Westram" ctrl="force" easy="false" id="ralf01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Floppy Swapping" _xpath="./martin19_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin19" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="The Fuse" _xpath="./capkoh02_1" author="capkoh" ctrl="force" easy="false" id="capkoh02" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iii/andreas04_1.xml
===================================================================
--- trunk/data/levels/enigma_iii/andreas04_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_iii/andreas04_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Laser Castle" el:subtitle="" el:id="andreas04"/>
-      <el:version el:score="1" el:release="1" el:revision="15" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="16" el:status="released"/>
       <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -24,20 +24,20 @@
 ti["!   "]={"fl_water"}
 ti["#   "]={"fl_lawn"}
 ti["$   "]={"fl_abyss"}
-ti["&   "]={"fl-gradient12"}
-ti["'   "]={"fl-gradient4"}
-ti["(   "]={"fl-gradient11"}
-ti[")   "]={"fl-gradient2"}
-ti["*   "]={"fl-gradient1"}
+ti["&   "]={"fl_slope_inw"}
+ti["'   "]={"fl_slope_pw"}
+ti["(   "]={"fl_slope_isw"}
+ti[")   "]={"fl_slope_pn"}
+ti["*   "]={"fl_slope_ps"}
 ti["+   "]={"fl_rock"}
-ti[",   "]={"fl-gradient6"}
-ti["-   "]={"fl-gradient8"}
-ti[".   "]={"fl-gradient10"}
-ti["/   "]={"fl-gradient3"}
-ti["0   "]={"fl-gradient7"}
+ti[",   "]={"fl_slope_osw"}
+ti["-   "]={"fl_slope_onw"}
+ti[".   "]={"fl_slope_ine"}
+ti["/   "]={"fl_slope_pe"}
+ti["0   "]={"fl_slope_one"}
 ti["1   "]={"fl_rock"}
-ti["2   "]={"fl-gradient5"}
-ti["3   "]={"fl-gradient9"}
+ti["2   "]={"fl_slope_ose"}
+ti["3   "]={"fl_slope_ise"}
 ti[" !  "]={"st_greenbrown"}
 ti[" #  "]={"st_stoneimpulse"}
 ti[" $  "]={"st_granite_movable"}

Modified: trunk/data/levels/enigma_iii/index.xml
===================================================================
--- trunk/data/levels/enigma_iii/index.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_iii/index.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10400" network="false" owner="Enigma Team" release="1" revision="19" title="Enigma III"/>
+  <info enigma="1.00" group="Enigma" location="10400" network="false" owner="Enigma Team" release="1" revision="20" title="Enigma III"/>
 
   <attributes/>
 
@@ -69,7 +69,7 @@
     <level _seq="61" _title="Fool the Warden" _xpath="./duffy37_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy37" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="62" _title="Don't Touch" _xpath="./raoul07_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul07" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="63" _title="Emergency Exit" _xpath="./ss05_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss5" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="64" _title="Laser Castle" _xpath="./andreas04_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas04" rel="1" rev="15" score="1" target="time" unit="duration"/>
+    <level _seq="64" _title="Laser Castle" _xpath="./andreas04_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas04" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="The Safe" _xpath="./siegfried77_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried77" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="66" _title="Block its way!" _xpath="./wb05_2" author="Jon 'WB' Sneyers" ctrl="force" easy="true" id="wb5" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="67" _title="Bump Ahead" _xpath="./illmind01_1" author="illmind" ctrl="force" easy="false" id="illmind01" rel="1" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/duffy73_3.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy73_3.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_iv/duffy73_3.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Bizarro World" el:subtitle="" el:id="duffy73"/>
-      <el:version el:score="2" el:release="3" el:revision="20" el:status="released"/>
+      <el:version el:score="2" el:release="3" el:revision="21" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -35,14 +35,14 @@
 ti["~"] = {"fl_water"}
 ti["="] = {"fl_space"}
 ti["@"] = {"fl_fake_abyss"}
-ti["d"] = {"fl-gradient", type=1}
-ti["u"] = {"fl-gradient", type=2}
-ti["r"] = {"fl-gradient", type=3}
-ti["e"] = {"fl-gradient", type=4}
-ti["1"] = {"fl-gradient", type=11}
-ti["3"] = {"fl-gradient", type=9}
-ti["7"] = {"fl-gradient", type=12}
-ti["9"] = {"fl-gradient", type=10}
+ti["d"] = {"fl_slope_ps"}
+ti["u"] = {"fl_slope_pn"}
+ti["r"] = {"fl_slope_pe"}
+ti["e"] = {"fl_slope_pw"}
+ti["1"] = {"fl_slope_isw"}
+ti["3"] = {"fl_slope_ise"}
+ti["7"] = {"fl_slope_inw"}
+ti["9"] = {"fl_slope_ine"}
 ti["#"] = {"st_death"}
 ti["v"] = {"st_greenbrown_movable"} .. ti["l"]
 ti["%"] = {"st_greenbrown"}

Modified: trunk/data/levels/enigma_iv/index.xml
===================================================================
--- trunk/data/levels/enigma_iv/index.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_iv/index.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="30" title="Enigma IV"/>
+  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="31" title="Enigma IV"/>
 
   <attributes/>
 
@@ -103,7 +103,7 @@
     <level _seq="95" _title="MetaPuzzle" _xpath="./ant03_1" author="Petr Machata" ctrl="force" easy="false" id="ant03" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="96" _title="TODO" _xpath="lib/todo" author="Martin Hawlisch" ctrl="force" easy="false" id="todo" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="97" _title="Over the Lake" _xpath="./siegfried27_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level9d" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="98" _title="Bizarro World" _xpath="./duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="20" score="2" target="time" unit="duration"/>
+    <level _seq="98" _title="Bizarro World" _xpath="./duffy73_3" author="Jacob Scott" ctrl="force" easy="true" id="duffy73" rel="3" rev="21" score="2" target="time" unit="duration"/>
     <level _seq="99" _title="Little Puzzles" _xpath="./wb11_1" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb11" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="100" _title="Big Adventures" _xpath="./wb12_1" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb12" rel="1" rev="0" score="1" target="time" unit="duration"/>
   </levels>

Modified: trunk/data/levels/enigma_tutorial/adv_tutorial.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Advanced Tutorial" el:subtitle="" el:id="m_tutor/adv_tutorial"/>
-      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -33,14 +33,14 @@
 ti["_ "] = {"fl_sand"}
 ti["r "] = {"fl_red"}
 ti["?1"] = {"fl_bridge", "b1"}  -- The second argument defines a name for the bridge: "b1".
-ti["2 "] = {"fl-gradient1"}  -- The numbers correspond to the arrows on the numerical keyboard.
-ti["8 "] = {"fl-gradient2"}
-ti["6 "] = {"fl-gradient3"}
-ti["4 "] = {"fl-gradient4"}
-ti["1 "] = {"fl-gradient11"}
-ti["3 "] = {"fl-gradient9"}
-ti["7 "] = {"fl-gradient12"}
-ti["9 "] = {"fl-gradient10"}
+ti["2 "] = {"fl_slope_ps"}  -- The numbers correspond to the arrows on the numerical keyboard.
+ti["8 "] = {"fl_slope_pn"}
+ti["6 "] = {"fl_slope_pe"}
+ti["4 "] = {"fl_slope_pw"}
+ti["1 "] = {"fl_slope_isw"}
+ti["3 "] = {"fl_slope_ise"}
+ti["7 "] = {"fl_slope_inw"}
+ti["9 "] = {"fl_slope_ine"}
 
 ti["@ "] = {"ac_marble", 0, 0.5}  -- Following Nethack-tradition, the main actor typically is "@",
 ti["# "] = {"st_granite"}         -- and the main walls are described by "#".

Modified: trunk/data/levels/enigma_tutorial/index.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/index.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_tutorial/index.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10100" network="false" owner="Enigma Team" release="1" revision="15" title="Tutorial"/>
+  <info enigma="1.00" group="Enigma" location="10100" network="false" owner="Enigma Team" release="1" revision="16" title="Tutorial"/>
 
   <attributes/>
 
@@ -71,7 +71,7 @@
     <level _seq="63" _title="Slalom Skiing" _xpath="enigma_ii/martin93_1" author="Martin Hawlisch" ctrl="force" easy="true" id="martin93" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="64" _title="Chess Stones" _xpath="./a_tut07" author="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" ctrl="force" easy="false" id="c_tut01" rel="1" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="Bye!" _xpath="./a_tut06" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut06" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="4" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_vii/alain28_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/alain28_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/alain28_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Pool with a pole" el:subtitle="" el:id="alain28"/>
-      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
       <el:author  el:name="Alain Busser" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Alain Busser</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -21,8 +21,8 @@
 ti[" "] = {"fl_lawn"}
 ti["#"] = {"st_actorimpulse"}
 ti["x"] = {"st_passage_white_frame"}
-ti["-"] = {"fl-gradient15"}
-ti["O"] = {"it_meditation_hollow", essential = 1}
+ti["-"] = {"fl_slope_te"}
+ti["O"] = {"it_meditation_hollow", essential = INDISPENSIBLE}
 ti["o"] = {"#ac_pearl", owner = nil, controllers = 0}
 ti["@"] = {"#ac_marble_black", name = "black", owner = 0}
 ti["*"] = {"#ac_marble_white", name = "white", owner = 0}

Modified: trunk/data/levels/enigma_vii/index.xml
===================================================================
--- trunk/data/levels/enigma_vii/index.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/index.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="42" title="Enigma VII"/>
+  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="43" title="Enigma VII"/>
 
   <attributes/>
 
@@ -24,7 +24,7 @@
     <level _seq="16" _title="Protected Exhibition" _xpath="./duffy156_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy156" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="Upstairs Meditation" _xpath="./duffy138_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy138" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="Speed Meditation" _xpath="./duffy148_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy148" rel="2" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="19" _title="Pool with a pole" _xpath="./alain28_2" author="Alain Busser" ctrl="force" easy="false" id="alain28" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="19" _title="Pool with a pole" _xpath="./alain28_2" author="Alain Busser" ctrl="force" easy="false" id="alain28" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="Meditation in Peace" _xpath="./ral20_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070502ral466" rel="1" rev="70" score="1" target="time" unit="duration"/>
     <level _seq="21" _title="Cold Meditation" _xpath="./ral18_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070314ral728" rel="1" rev="67" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="Mountain Climbing" _xpath="./joe10_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe10" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -54,7 +54,7 @@
     <level _seq="46" _title="Double Oneways" _xpath="./duffy172_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy172" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="47" _title="Wood - Water - Wood" _xpath="./duffy173_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy173" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="48" _title="Transpositions" _xpath="./duffy174_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy174" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="49" _title="Puppet" _xpath="./pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="9" score="1" target="time" unit="duration"/>
+    <level _seq="49" _title="Puppet" _xpath="./pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Restless Meditation" _xpath="./ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Ghost Driver" _xpath="./duffy176_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy176" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Re-entry Circuit" _xpath="./pulley05_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley05" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -83,8 +83,8 @@
     <level _seq="75" _title="Swapping Puzzle II" _xpath="./joe22_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Multiban" _xpath="./dpl01_1" author="Dominik Leipold" ctrl="force" easy="false" id="dpl01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="77" _title="Riverside" _xpath="./johann02_2" author="Johann Freymuth" ctrl="force" easy="false" id="johann02" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="19" score="2" target="time" unit="duration"/>
-    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="21" score="1" target="time" unit="duration"/>
+    <level _seq="78" _title="The Lone Ranger" _xpath="./pulley04_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley04" rel="2" rev="20" score="2" target="time" unit="duration"/>
+    <level _seq="79" _title="Little Shop Of Horrors" _xpath="./pulley07_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley07" rel="1" rev="22" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="Spaceship Control" _xpath="./safalra01_1" author="Safalra" ctrl="force" easy="false" id="safalra01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="81" _title="Ball Alley" _xpath="./johann01_1" author="Johann Freymuth" ctrl="force" easy="false" id="johann01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="Action Potential" _xpath="./pulley02_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley02" rel="2" rev="8" score="1" target="time" unit="duration"/>
@@ -103,9 +103,9 @@
     <level _seq="95" _title="Pick-Up" _xpath="./joe27_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe27" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="96" _title="A Kind of Magic" _xpath="./just37_2" author="JuSt" ctrl="force" easy="true" id="JuStA Kind of Magic" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="97" _title="Blue Screen Of Death" _xpath="./pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="98" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="39" score="1" target="time" unit="duration"/>
+    <level _seq="98" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="99" _title="Black Liberation" _xpath="./mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="43" score="1" target="time" unit="duration"/>
-    <level _seq="100" _title="Jack-Of-All-Trades" _xpath="./mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="48" score="1" target="time" unit="duration"/>
+    <level _seq="100" _title="Jack-Of-All-Trades" _xpath="./mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="49" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_vii/mecke09_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/mecke09_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/mecke09_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Audience in Venice" el:subtitle="Press the Triggers" el:id="mecke9"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 39 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 40 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -14,7 +14,7 @@
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = true
 
-ti[" #"] = {"fl-gradient1"}
+ti[" #"] = {"fl_slope_ps"}
 ti[" $"] = {"fl_dunes"}
 ti[" %"] = {"fl_water"}
 ti["! "] = {"st_death"}

Modified: trunk/data/levels/enigma_vii/mecke12_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/mecke12_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/mecke12_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Jack-Of-All-Trades" el:subtitle="Find The Paradise" el:id="mecke12"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 48 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 49 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -30,16 +30,16 @@
 ti[" ("] = {"fl_bluegray"}
 ti["& "] = {"st_oxyd_d"}
 ti[" )"] = {"fl_lawn_c1"}
-ti[" *"] = {"fl-gradient9"}
+ti[" *"] = {"fl_slope_ise"}
 ti[" +"] = {"fl_himalaya"}
-ti[" ,"] = {"fl-gradient10"}
+ti[" ,"] = {"fl_slope_ine"}
 ti["' "] = {"st_actorimpulse_invisible"}
 ti[" i"] = {"fl_ice"}
 ti["e "] = {"it_extralife"}
 ti["s "] = {"it_spring_drop"}
 ti["v "] = {"it_strip", connections="ns"}
-ti[" -"] = {"fl-gradient11"}
-ti[" ."] = {"fl-gradient12"}
+ti[" -"] = {"fl_slope_isw"}
+ti[" ."] = {"fl_slope_inw"}
 ti["b "] = {"it_brush"}
 ti["* "] = {"st_break_boulder"}
 ti[" /"] = {"fl_aquamarine"}
@@ -74,13 +74,13 @@
 ti[" 4"] = {"fl_bluegreen"}
 ti[": "] = {"st_puzzle",hollow=true, connections="nesw"}
 ti["m "] = {"it_hammer"}
-ti[" 5"] = {"fl-gradient4"}
+ti[" 5"] = {"fl_slope_pw"}
 ti["w "] = {"it_magicwand"}
 ti["y "] = {"it_floppy"}
 ti["; "] = {"st_passage_black_frame"}
 ti["> "] = {"st_box_wood"}
 ti[" 6"] = {"fl_yinyang_yang"}
-ti[" 7"] = {"fl-gradient14"}
+ti[" 7"] = {"fl_slope_tn"}
 ti["? "] = {"st_fake_oxydd"}
 ti["@ "] = {"st_rawglass"}
 ti["A "] = {"st_door", state=OPEN, faces="ns"}

Modified: trunk/data/levels/enigma_vii/pulley04_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/pulley04_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Lone Ranger" el:subtitle="" el:id="pulley04"/>
-      <el:version el:score="2" el:release="2" el:revision="19" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="20" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -76,10 +76,10 @@
 ti["&"] = ti[" "] .. {"st_actorimpulse_invisible"}
 ti["*"] = ti[" "] .. {"#ac_rotor", range=5, strength=100}
 ti[":"] = ti[" "] .. {"st_break_plain"} -- Tomb doors
-ti["v"] = {"fl-gradient14"} -- Down
-ti["<"] = {"fl-gradient15"} -- Left
-ti[">"] = {"fl-gradient16"} -- Right
-ti["^"] = {"fl-gradient13"} -- Up
+ti["v"] = {"fl_slope_tn"} -- Down
+ti["<"] = {"fl_slope_te"} -- Left
+ti[">"] = {"fl_slope_tw"} -- Right
+ti["^"] = {"fl_slope_ts"} -- Up
 ti["("] = (ti[" "] .. {"#ac_marble_white", owner=0, controllers=1, essential=-1, name="Ranger"})
 ti[")"] = (ti[" "] .. {"#ac_marble_black", owner=1, controllers=2, essential=-1, name="Tonto"}) .. ti({"it_yinyang"})
 ti["="] = ti["t"] .. {"it_flag_white"}

Modified: trunk/data/levels/enigma_vii/pulley06_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley06_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/pulley06_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Puppet" el:subtitle="" el:id="pulley06"/>
-      <el:version el:score="1" el:release="2" el:revision="9" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="10" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -13,9 +13,9 @@
     </el:info>
     <el:luamain><![CDATA[
 if wo["IsDifficult"] then
-    ti[" "]= {"fl-gradient14"}
-    ti["^"]= {"fl-gradient13"} -- Up
-    ti["f"]= {"ac_horse", name="footL"} .. ti({"fl-gradient13"})
+    ti[" "]= {"fl_slope_tn"}
+    ti["^"]= {"fl_slope_ts"} -- Up
+    ti["f"]= {"ac_horse", name="footL"} .. ti({"fl_slope_ts"})
 else
     ti[" "]= {"fl_metal_7"}
     ti["^"]= {"fl_metal_7"}

Modified: trunk/data/levels/enigma_vii/pulley07_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_vii/pulley07_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Little Shop Of Horrors" el:subtitle="Watch out, here comes Audrey II!" el:id="pulley07"/>
-      <el:version el:score="1" el:release="1" el:revision="21" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="22" el:status="released"/>
       <el:author  el:name="Mark Pulley" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2007 Mark Pulley</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -24,7 +24,7 @@
 ti["4"] = (ti[" "] .. {"st_grate_cross"}) .. {"it_trigger", action="callback", target="Grow4"} -- Mushnik swallowed by Audrey II
 ti["5"] = ti[" "] .. {"st_scissors", action="callback", target="Grow5"} -- Audrey being eaten by Audrey II
 ti["6"] = (ti[" "] .. {"st_grate_cross"}) .. {"it_trigger", action="callback", target="Grow6"} -- Audrey swallowed by Audrey II
-ti["7"] = (ti({"fl-gradient15"}) .. {"it_trigger", action="callback", target="Grow7"}) .. {"st_oneway_w"} -- Seymour being eaten by Audrey II
+ti["7"] = (ti({"fl_slope_te"}) .. {"it_trigger", action="callback", target="Grow7"}) .. {"st_oneway_w"} -- Seymour being eaten by Audrey II
 ti["8"] = (ti[" "] .. {"st_grate_cross"}) .. {"it_trigger", action="callback", target="Grow8"} -- Seymour swallowed by Audrey II
 ti["9"] = ti[" "] .. {"st_door", name="Door1", flavor="a"} -- Mushnik's door
 ti["0"] = ti[" "] .. {"st_door", name="Door2", flavor="a"} -- Audrey's door
@@ -47,7 +47,7 @@
 ti["b"] = {"fl_bright"} .. ti({"it_bottle"})
 ti["c"] = {"fl_lawn"} .. ti({"st_nil"}) .. ti({"it_nil"})
 ti["d"] = ti[" "] .. {"st_redrock"} --Walls
-ti["e"] = {"fl-gradient16"} .. ti({"st_nil"})
+ti["e"] = {"fl_slope_tw"} .. ti({"st_nil"})
 ti["f"] = {"fl_lawn"} --Audrey's floor
 ti["g"] = ti[" "] .. {"st_grate_cross"}
 ti["h"] = (ti({"fl_bright"}) .. {"it_hammer"}) .. {"st_plaster_hollow"}
@@ -55,13 +55,13 @@
 ti["j"] = {"fl_bright"} --Orin's floor
 ti["k"] = ti[" "] .. {"st_redbrown"} --Audrey's Walls
 ti["m"] = {"fl_plank"} .. ti({"it_coin_l"})
-ti["n"] = {"fl-gradient13"} .. ti({"st_grate_cross"})
+ti["n"] = {"fl_slope_ts"} .. ti({"st_grate_cross"})
 ti["o"] = (ti[" "] .. {"it_meditation_hollow", essential=1}) .. {"st_camouflage"}
 ti["p"] = ti[" "] .. {"st_flat"}
 ti["q"] = ti[" "] .. {"st_woven"}
-ti["s"] = {"fl-gradient14"} .. ti({"st_nil"})
-ti["t"] = (ti({"fl-gradient14"}) .. {"st_grate_cross"}) .. {"it_burnable"}
-ti["w"] = {"fl-gradient15"} .. ti({"st_nil"})
+ti["s"] = {"fl_slope_tn"} .. ti({"st_nil"})
+ti["t"] = (ti({"fl_slope_tn"}) .. {"st_grate_cross"}) .. {"it_burnable"}
+ti["w"] = {"fl_slope_te"} .. ti({"st_nil"})
 ti["x"] = ti[" "] .. {"st_scissors"}
 ti["y"] = {"fl_woven"}
 ti["z"] = {"fl_plank"}
@@ -82,9 +82,9 @@
 ti["P"] = {"fl_bright"} .. ti({"st_flat_breakable"})
 ti["Q"] = ti[" "] .. {"st_plaster_hollow"}
 ti["R"] = ti[" "] .. {"st_plaster"}
-ti["S"] = (ti({"fl-gradient14"}) .. {"st_oneway", orientation=SOUTH}) .. {"it_burnable"}
+ti["S"] = (ti({"fl_slope_tn"}) .. {"st_oneway", orientation=SOUTH}) .. {"it_burnable"}
 ti["T"] = {"fl_plank"} .. ti({"it_coffee"})
-ti["W"] = (ti({"fl-gradient15"}) .. {"st_oneway", orientation=WEST}) .. {"it_burnable"}
+ti["W"] = (ti({"fl_slope_te"}) .. {"st_oneway", orientation=WEST}) .. {"it_burnable"}
 ti["X"] = ti[" "] .. {"st_brick"}
 ti["["] = ti[" "] .. {"st_portal", name="d1"}
 ti["]"] = ti[" "] .. {"st_portal", name="d2"}

Modified: trunk/data/levels/enigma_viii/devnull04_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/devnull04_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/devnull04_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="- Meditation -" el:subtitle="" el:id="devnull04"/>
-      <el:version el:score="1" el:release="1" el:revision="9" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="10" el:status="released"/>
       <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -23,29 +23,29 @@
 
 ti[" "] = {"fl_abyss"}
 ti["."] = {"fl_gray"}
-ti["d"] = {"fl-gradient1"}
-ti["u"] = {"fl-gradient2"}
-ti["r"] = {"fl-gradient3"}
-ti["l"] = {"fl-gradient4"}
-ti["D"] = {"fl-gradient5"}
-ti["U"] = {"fl-gradient6"}
-ti["R"] = {"fl-gradient7"}
-ti["L"] = {"fl-gradient8"}
-ti["n"] = {"fl-gradient13"}
-ti["s"] = {"fl-gradient14"}
-ti["w"] = {"fl-gradient15"}
-ti["e"] = {"fl-gradient16"}
+ti["d"] = {"fl_slope_ps"}
+ti["u"] = {"fl_slope_pn"}
+ti["r"] = {"fl_slope_pe"}
+ti["l"] = {"fl_slope_pw"}
+ti["D"] = {"fl_slope_ose"}
+ti["U"] = {"fl_slope_osw"}
+ti["R"] = {"fl_slope_one"}
+ti["L"] = {"fl_slope_onw"}
+ti["n"] = {"fl_slope_ts"}
+ti["s"] = {"fl_slope_tn"}
+ti["w"] = {"fl_slope_te"}
+ti["e"] = {"fl_slope_tw"}
 ti["0"] = ti["."] .. {"it_wormhole_on", destination = po( 4.5, 6.5), strength = 1.0, range = 1.0}
 ti["1"] = ti["."] .. {"it_wormhole_on", destination = po(15.5, 6.5), strength = 1.0, range = 1.0}
 ti["o"] = ti["."] .. {"it_meditation_hollow"}
-ti["S"] = {"fl-gradient5", force_x =  f, force_y =  f}
-ti["E"] = {"fl-gradient6", force_x = -f, force_y = -f}
-ti["N"] = {"fl-gradient7", force_x =  f, force_y =  f}
-ti["W"] = {"fl-gradient8", force_x = -f, force_y = -f}
-ti["^"] = {"fl-gradient1", force_y =  f}
-ti["v"] = {"fl-gradient2", force_y = -f}
-ti["<"] = {"fl-gradient3", force_x =  f}
-ti[">"] = {"fl-gradient4", force_x = -f}
+ti["S"] = {"fl_slope_ose", force_x =  f, force_y =  f}
+ti["E"] = {"fl_slope_osw", force_x = -f, force_y = -f}
+ti["N"] = {"fl_slope_one", force_x =  f, force_y =  f}
+ti["W"] = {"fl_slope_onw", force_x = -f, force_y = -f}
+ti["^"] = {"fl_slope_ps", force_y =  f}
+ti["v"] = {"fl_slope_pn", force_y = -f}
+ti["<"] = {"fl_slope_pe", force_x =  f}
+ti[">"] = {"fl_slope_pw", force_x = -f}
 ti["9"] = ti["D"] .. {"#ac_pearl_white", owner = 0, essential = 1}
 ti["8"] = ti["U"] .. {"#ac_pearl_white", owner = 0, essential = 1}
 ti["7"] = ti["L"] .. {"#ac_pearl_white", owner = 0, essential = 1}

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -1,24 +1,24 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="32" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="33" title="Enigma VIII"/>
 
   <attributes/>
 
   <levels>
     <level _seq="1" _title="Welcome" _xpath="./welcometopack8_1" author="Raoul Bourquin" ctrl="force" easy="true" id="welcometopack8" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="2" _title="Enigmaparcour I" _xpath="./mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="35" score="1" target="time" unit="duration"/>
+    <level _seq="2" _title="Enigmaparcour I" _xpath="./mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="3" _title="Rhythm of Space" _xpath="./mecke20_2" author="mecke" ctrl="force" easy="true" id="mecke20" rel="2" rev="36" score="1" target="time" unit="duration"/>
     <level _seq="4" _title="The Show Jumper" _xpath="./andreas47_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas47" rel="1" rev="11" score="1" target="time" unit="duration"/>
     <level _seq="5" _title="The Red Room" _xpath="./joe29_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe29" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="6" _title="Enigmines" _xpath="./huffman01_1" author="Brian Huffman" ctrl="force" easy="true" id="huffman01" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="7" _title="Red Cave" _xpath="./mecke21_2" author="mecke" ctrl="force" easy="true" id="mecke21" rel="2" rev="45" score="1" target="time" unit="duration"/>
     <level _seq="8" _title="Status code 302" _xpath="./devnull02_1" author="/dev/null" ctrl="force" easy="true" id="devnull02" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="9" _title="A Screenful of Secrets" _xpath="./mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="35" score="1" target="time" unit="duration"/>
-    <level _seq="10" _title="Southside Life" _xpath="./mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="33" score="1" target="time" unit="duration"/>
+    <level _seq="9" _title="A Screenful of Secrets" _xpath="./mecke01_1" author="mecke" ctrl="force" easy="true" id="mecke01" rel="1" rev="36" score="1" target="time" unit="duration"/>
+    <level _seq="10" _title="Southside Life" _xpath="./mecke10_2" author="mecke" ctrl="force" easy="true" id="mecke10" rel="2" rev="34" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="Joona's Chess" _xpath="./joona02_1" author="Joona Laire" ctrl="force" easy="true" id="joona02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="Helios I" _xpath="./mecke07_1" author="mecke" ctrl="force" easy="false" id="mecke48" rel="1" rev="22" score="1" target="time" unit="duration"/>
-    <level _seq="13" _title="The Green Hell" _xpath="./mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="82" score="1" target="time" unit="duration"/>
+    <level _seq="13" _title="The Green Hell" _xpath="./mecke22_2" author="mecke" ctrl="force" easy="true" id="mecke22" rel="2" rev="83" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="Tilt Board" _xpath="./ulf06_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20080529ulf118" rel="2" rev="116" score="2" target="time" unit="duration"/>
     <level _seq="15" _title="4 - 8 - 4" _xpath="./dpl03_3" author="Dominik Leipold" ctrl="force" easy="true" id="20070821dpl003" rel="3" rev="4" score="3" target="time" unit="duration"/>
     <level _seq="16" _title="Impulsive Order" _xpath="./raywick05_1" author="Ray Wick" ctrl="force" easy="true" id="raywick5" rel="1" rev="13" score="1" target="time" unit="duration"/>
@@ -43,23 +43,23 @@
     <level _seq="35" _title="- Meditation -" _xpath="./raoul31_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul31" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Relaxing at the sea" _xpath="./devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Helios II" _xpath="./mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="25" score="1" target="time" unit="duration"/>
-    <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="154" score="2" target="time" unit="duration"/>
+    <level _seq="38" _title="Tutoxyd's Pyramid" _xpath="./ral21_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070822ral291" rel="2" rev="155" score="2" target="time" unit="duration"/>
     <level _seq="39" _title="Alternation I" _xpath="./mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="40" _title="Enigmaparcour II" _xpath="./mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="17" score="1" target="time" unit="duration"/>
     <level _seq="41" _title=" - Meditation - " _xpath="./devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="42" _title=" - Meditation - " _xpath="./devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
-    <level _seq="43" _title="- Meditation -" _xpath="./devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="9" score="1" target="time" unit="duration"/>
+    <level _seq="43" _title="- Meditation -" _xpath="./devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="44" _title="Multi-lane" _xpath="./devnull03_1" author="/dev/null" ctrl="force" easy="true" id="devnull03" rel="1" rev="26" score="1" target="time" unit="duration"/>
     <level _seq="45" _title="See Saw Meditation" _xpath="./duffy180_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy180" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="46" _title="Under control?" _xpath="./devnull09_1" author="/dev/null" ctrl="force" easy="true" id="devnull09" rel="1" rev="9" score="1" target="time" unit="duration"/>
     <level _seq="47" _title=" - Meditation - " _xpath="./devnull12_1" author="/dev/null" ctrl="force" easy="true" id="devnull12" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="48" _title="On belay?" _xpath="./devnull15_1" author="/dev/null" ctrl="force" easy="true" id="devnull15" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Hang-dogging?" _xpath="./devnull16_1" author="/dev/null" ctrl="force" easy="true" id="devnull16" rel="1" rev="7" score="1" target="time" unit="duration"/>
-    <level _seq="50" _title="Alternation II" _xpath="./mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="15" score="1" target="time" unit="duration"/>
+    <level _seq="50" _title="Alternation II" _xpath="./mecke31_1" author="mecke" ctrl="force" easy="false" id="mecke31" rel="1" rev="16" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Fifty Years Later ..." _xpath="./mecke23_1" author="mecke" ctrl="force" easy="true" id="mecke23" rel="1" rev="37" score="1" target="time" unit="duration"/>
-    <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="20" score="1" target="time" unit="duration"/>
-    <level _seq="53" _title="Techno Voodoo" _xpath="./mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="18" score="1" target="time" unit="duration"/>
-    <level _seq="54" _title="Plutos World" _xpath="./mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="20" score="1" target="time" unit="duration"/>
+    <level _seq="52" _title="Turbulencia" _xpath="./mecke19_1" author="mecke" ctrl="force" easy="true" id="mecke19" rel="1" rev="21" score="1" target="time" unit="duration"/>
+    <level _seq="53" _title="Techno Voodoo" _xpath="./mecke06_1" author="mecke" ctrl="force" easy="false" id="mecke06" rel="1" rev="19" score="1" target="time" unit="duration"/>
+    <level _seq="54" _title="Plutos World" _xpath="./mecke02_1" author="mecke" ctrl="force" easy="false" id="mecke16" rel="1" rev="21" score="1" target="time" unit="duration"/>
     <level _seq="55" _title="Plutos Confusion" _xpath="./mecke13_1" author="mecke" ctrl="force" easy="false" id="mecke30" rel="1" rev="20" score="1" target="time" unit="duration"/>
     <level _seq="56" _title="Minopal" _xpath="./andreas54_1" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas54" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="57" _title="Coober Pedy Opals" _xpath="./ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_viii/mecke01_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke01_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke01_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="A Screenful of Secrets" el:subtitle="My First Level" el:id="mecke01"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 35 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 36 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -29,7 +29,7 @@
 ti[" ,"] = {"fl_space"}
 ti[" ."] = {"fl_abyss"}
 ti[" _"] = {"fl_swamp"}
-ti[" ;"] = {"fl-gradient3"}
+ti[" ;"] = {"fl_slope_pe"}
 ti["! "] = {"st_death"}
 ti["# "] = {"st_passage_black_frame"}
 ti["+ "] = {"st_actorimpulse_invisible"}

Modified: trunk/data/levels/enigma_viii/mecke02_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke02_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke02_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Plutos World" el:subtitle="Deep ..." el:id="mecke16"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 20 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 21 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -17,7 +17,7 @@
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = true
 
-ti[" -"] = {"fl-gradient3"}
+ti[" -"] = {"fl_slope_pe"}
 ti[" ~"] = {"fl_swamp"}
 ti["A "] = ti[" -"] .. {"it_sword"}
 ti["B "] = {"st_swap"}

Modified: trunk/data/levels/enigma_viii/mecke06_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke06_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke06_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Techno Voodoo" el:subtitle="Just a Dance ?" el:id="mecke06" />
-      <el:version el:score="1" el:release="1" el:revision="$Revision:18$" el:status="released" />
+      <el:version el:score="1" el:release="1" el:revision="$Revision:19$" el:status="released" />
       <el:author el:name="mecke" el:email="" />
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true" />
@@ -24,10 +24,10 @@
 ti["! "] = {"st_lightpassenger"}
 ti[" d"] = ti[" f"] .. {"it_death"}
 ti["B "] = ti[" d"] .. {"st_polarswitch"}
-ti[" B"] = {"fl-gradient12"}
-ti[" C"] = {"fl-gradient8"}
-ti[" E"] = {"fl-gradient11"}
-ti[" D"] = {"fl-gradient16"}
+ti[" B"] = {"fl_slope_inw"}
+ti[" C"] = {"fl_slope_onw"}
+ti[" E"] = {"fl_slope_isw"}
+ti[" D"] = {"fl_slope_tw"}
 ti[" F"] = {"fl_redslab"}
 ti["F "] = {"st_black_slash"}
 ti[" s"] = {"fl_space"}

Modified: trunk/data/levels/enigma_viii/mecke10_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke10_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke10_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Southside Life" el:subtitle="...Enjoy!" el:id="mecke10" />
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 33 $" el:status="released" />
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 34 $" el:status="released" />
       <el:author el:name="mecke" el:email="" el:homepage="" />
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true" />
@@ -49,7 +49,7 @@
 ti["w5"] = ti[" )"] .. {"st_rawglass"}
 ti["w6"] = ti[" )"] .. {"st_rawglass_movable"}
 ti[", "] = {"st_door", faces="ew"}
-ti[" *"] = {"fl-gradient4"}
+ti[" *"] = {"fl_slope_pw"}
 ti["- "] = {"st_door", faces="ns"}
 ti["g "] = {"it_extralife"}
 ti["i3"] = ti["i1"] .. {"it_extralife"}
@@ -104,12 +104,12 @@
 ti["u "] = {"st_box_wood"}
 ti[" 4"] = {"fl_mortar"}
 ti["> "] = {"st_quake"}
-ti[" 5"] = {"fl-gradient15"}
-ti[" 6"] = {"fl-gradient11"}
+ti[" 5"] = {"fl_slope_te"}
+ti[" 6"] = {"fl_slope_isw"}
 ti["? "] = {"st_rotator_ccw"}
 ti["@ "] = {"st_boulder_e"}
 ti["A "] = {"st_actorimpulse_invisible"}
-ti[" 7"] = {"fl-gradient3"}
+ti[" 7"] = {"fl_slope_pe"}
 ti["B "] = {"st_boulder_w"}
 ti["V "] = {"st_passage_black_frame"}
 ti["C "] = {"st_ghost_break"}

Modified: trunk/data/levels/enigma_viii/mecke15_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke15_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke15_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,14 +3,14 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Enigmaparcour I" el:subtitle="Open the Doors" el:id="mecke15"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 35 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 36 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10"/>
       <el:modes el:easy="true" el:single="true" el:network="false" el:control="force" el:scoreunit="duration" el:scoretarget="time"/>
       <el:comments>
-        <el:credits el:showinfo="true" el:showstart="false">Thanks to Raoul Bourquin for the patterns, in the new API, and to Ronald Lamprecht for 
+        <el:credits el:showinfo="true" el:showstart="false">Thanks to Raoul Bourquin for the patterns, in the new API, and to Ronald Lamprecht for
 the "bottlepattern"</el:credits>
       </el:comments>
       <el:score el:easy="14:51" el:difficult="18:10"/>
@@ -31,7 +31,7 @@
 ti[" ~"] = {"fl_water"}
 ti[" _"] = {"fl_swamp"}
 ti[" ."] = {"fl_space"}
-ti[" ("] = {"fl-gradient", type=3}
+ti[" ("] = {"fl_slope_pe"}
 ti["t "] = {"st_break_oxydc"}
 ti["# "] = {"st_lightpassenger"}
 ti["K "] = {"st_knight"}
@@ -95,7 +95,7 @@
 ti["j "] = {"it_magicwand"}
 ti[" z"] = {"it_bottle"}
 ti["P "] = {"st_grate_cross"}
-ti["9 "] = {"st_turnstile"} 
+ti["9 "] = {"st_turnstile"}
 ti["a "] = {"st_turnstilearm", orientation=NORTH}
 ti["q "] = {"st_turnstilearm", orientation=SOUTH}
 ti["k "] = {"st_turnstilearm", orientation=WEST}

Modified: trunk/data/levels/enigma_viii/mecke19_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke19_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke19_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Turbulencia" el:subtitle="Meditation! Silence? ... Have a Look ..." el:id="mecke19" />
-      <el:version el:score="1" el:release="1" el:revision="$Revision:20$" el:status="released" />
+      <el:version el:score="1" el:release="1" el:revision="$Revision:21$" el:status="released" />
       <el:author el:name="mecke" el:email="" />
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true" />
@@ -35,12 +35,12 @@
 ti["( "] = {"st_yellow"}
 ti[") "] = {"st_scissors", name="df3"}
 ti["* "] = {"st_oneway_white_w"}
-ti[" ("] = {"fl-gradient11"}
+ti[" ("] = {"fl_slope_isw"}
 ti["+ "] = {"st_boulder_e"}
 ti[", "] = {"st_pull"}
 ti[" a"] = ti["hh"] .. {"it_surprise"}
-ti[" )"] = {"fl-gradient12"}
-ti[" *"] = {"fl-gradient4"}
+ti[" )"] = {"fl_slope_inw"}
+ti[" *"] = {"fl_slope_pw"}
 ti["- "] = {"st_boulder_w"}
 ti[". "] = {"st_grate_cross"}
 ti[" d"] = ti["hh"] .. {"it_dynamite"}

Modified: trunk/data/levels/enigma_viii/mecke22_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke22_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke22_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="The Green Hell" el:subtitle="Exploration Trip to Green Waters" el:id="mecke22"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision:82$" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision:83$" el:status="released"/>
       <el:author  el:name="mecke" el:email=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -71,7 +71,7 @@
 ti["C "] = {"st_oneway_black_e"}
 ti["D "] = {"st_oneway_black_s"}
 ti["//"] = ti[" !"].. {"st_box_wood"}
-ti[" ."] = {"fl-gradient4"}
+ti[" ."] = {"fl_slope_pw"}
 ti["F "] = {"st_camouflage"}
 ti["f "] = {"st_camouflage_movable"}
 ti["G "] = {"st_boulder_s"}
@@ -82,15 +82,15 @@
 ti["I "] = {"st_fake_oxyda"}
 ti["K "] = {"st_boulder_e"}
 ti["L "] = {"st_plaster_breakable"}
-ti[" 0"] = {"fl-gradient9"}
-ti[" 1"] = {"fl-gradient3"}
-ti[" 2"] = {"fl-gradient10"}
+ti[" 0"] = {"fl_slope_ise"}
+ti[" 1"] = {"fl_slope_pe"}
+ti[" 2"] = {"fl_slope_ine"}
 ti[" 3"] = {"fl_bast"}
 ti["M "] = {"st_swap"}
 ti["N "] = {"st_boulder_n"}
-ti[" 5"] = {"fl-gradient2"}
-ti[" 6"] = {"fl-gradient6"}
-ti[" 7"] = {"fl-gradient12"}
+ti[" 5"] = {"fl_slope_pn"}
+ti[" 6"] = {"fl_slope_osw"}
+ti[" 7"] = {"fl_slope_inw"}
 ti["O "] = {"st_oneway_s"}
 ti[" 8"] = {"fl_bluegreen"}
 ti[" 9"] = {"fl_lawn_c2"}
@@ -220,10 +220,10 @@
    ti["ww"] = {"fl_water"}
    ti["))"] = ti[" l"] .. {"it_burnable_burning"}
    ti[")$"] = ti[" $"] .. {"it_burnable_burning"}
-   ti[" 4"] = {"fl-gradient1"}
-   ti[" :"] = {"fl-gradient16"}
-   ti[" <"] = {"fl-gradient5"}
-   ti[" ="] = {"fl-gradient8"}
+   ti[" 4"] = {"fl_slope_ps"}
+   ti[" :"] = {"fl_slope_tw"}
+   ti[" <"] = {"fl_slope_ose"}
+   ti[" ="] = {"fl_slope_onw"}
    ti["r5"] = ti[" ;"] .. {"it_trigger", target="olle5"}
    ti["h5"] = ti[" ,"] .. {"fl_bridge",name="olle5"}
    ti["n5"] = ti[" ;"] .. {"it_trigger",target="liz1#*"}

Modified: trunk/data/levels/enigma_viii/mecke31_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke31_1.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/mecke31_1.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Alternation II" el:subtitle="Alternation in a Dark Area" el:id="mecke31"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 15 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 16 $" el:status="released"/>
       <el:author el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -27,7 +27,7 @@
 ti[" ,"] = {"fl_bright"}
 ti[" ="] = {"fl_swamp"}
 ti[" +"] = {"fl_sahara"}
-ti[" x"] = {"fl-gradient3"}
+ti[" x"] = {"fl_slope_pe"}
 ti["jj"] = {"it_crack_l"}
 ti["o "] = ti[" ~"] .. {"st_oxyd", flavor="d"}
 ti["X~"] = ti[" ~"] .. {"st_grate_cross"}

Modified: trunk/data/levels/enigma_viii/ral21_2.xml
===================================================================
--- trunk/data/levels/enigma_viii/ral21_2.xml	2009-02-05 23:28:18 UTC (rev 1518)
+++ trunk/data/levels/enigma_viii/ral21_2.xml	2009-02-05 23:55:50 UTC (rev 1519)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Tutoxyd's Pyramid" el:subtitle="Marble Jones I" el:id="20070822ral291"/>
-      <el:version el:score="2" el:release="2" el:revision="$Revision: 154 $" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="$Revision: 155 $" el:status="released"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2007,2008,2009 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -55,18 +55,18 @@
 ti["=="] = {"fl_wood"}
 ti["tt"] = {"fl_thief"}
 ti["$$"] = {"fl_yinyang_yang"}
-ti["gs"] = {"fl-gradient", type=1}
-ti["gw"] = {"fl-gradient", type=4}
-ti["gn"] = {"fl-gradient", type=2}
-ti["ge"] = {"fl-gradient", type=3}
-ti["g5"] = {"fl-gradient", type=5}
-ti["g6"] = {"fl-gradient", type=6}
-ti["g7"] = {"fl-gradient", type=7}
-ti["g8"] = {"fl-gradient", type=8}
-ti["g9"] = {"fl-gradient", type=9}
-ti["ga"] = {"fl-gradient", type=10}
-ti["gb"] = {"fl-gradient", type=11}
-ti["gc"] = {"fl-gradient", type=12}
+ti["gs"] = {"fl_slope_ps"}
+ti["gw"] = {"fl_slope_pw"}
+ti["gn"] = {"fl_slope_pn"}
+ti["ge"] = {"fl_slope_pe"}
+ti["g5"] = {"fl_slope_ose"}
+ti["g6"] = {"fl_slope_osw"}
+ti["g7"] = {"fl_slope_one"}
+ti["g8"] = {"fl_slope_onw"}
+ti["g9"] = {"fl_slope_ise"}
+ti["ga"] = {"fl_slope_ine"}
+ti["gb"] = {"fl_slope_isw"}
+ti["gc"] = {"fl_slope_inw"}
 ti["^^"] = {"fl_gray"}
 ti["%f"] = {"fl_samba", eternal=true, initfire=true}
 ti[" f"] = {"fl_sand", eternal=true, initfire=true}



From andreasl at mail.berlios.de  Fri Feb  6 22:31:29 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Fri, 6 Feb 2009 22:31:29 +0100
Subject: [Enigma-game-svn] r1520 - in trunk/data: gfx40 gfx48
	levels/enigma_tutorial
Message-ID: <200902062131.n16LVTkP010247@sheep.berlios.de>

Author: andreasl
Date: 2009-02-06 22:31:26 +0100 (Fri, 06 Feb 2009)
New Revision: 1520

Modified:
   trunk/data/gfx40/st_brownie.png
   trunk/data/gfx48/st_brownie.png
   trunk/data/levels/enigma_tutorial/adv_tutorial.xml
Log:
Trunk:
 - Removed wrongly transparent pixels in brownie image.
 - "Advanced Tutorial":
    - Fixed typo which set a document instead of a door.
    - Fixed spelling of "boulder" in documents.


Modified: trunk/data/gfx40/st_brownie.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_brownie.png
===================================================================
(Binary files differ)

Modified: trunk/data/levels/enigma_tutorial/adv_tutorial.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-02-05 23:55:50 UTC (rev 1519)
+++ trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-02-06 21:31:26 UTC (rev 1520)
@@ -122,11 +122,11 @@
     "#                 _ _ ~ ~ _ _ _                           dS          SL    #                       dT    K K K                 ! ! ! ! ! ! ! ! ! ! ! ! # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "#                   _ _ _ _                                                 #                             K K K             ! ! ! ! ! ! ! ! ! ! ! ! ! ! # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "#                                                                           #                             K K K         ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # d6# # # # # # # # # # # # # # # # # # # # # # # # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # # # # # # # # # # # # # # # # # # # # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # D6# # # # # # # # # # # # # # # # # # # # # # # # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # # # # # # # # # # # # # # # # # # # # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#D5.#. . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # Q                                 Q # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#.#.#.#D4.#. . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #               O     O               # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#I .#.#.#.#.#~ ~ ~ ~ ~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . t6. . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #           O             O           # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#. . . . . I ~ ~ ~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #       O                     O       # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#eQ. . . . I ~ ~ ~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #       O                     O       # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#. .#.#.#. .#~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . .G. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #   O                             O   # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#. .#~ .#. .#.#.#. . . . . . . . . . . . . . . . . . . . . . . .GR tR. . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #                                     # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#N4.#~ .#. 4 N1. . . . . . . . . . . . . . . . . . . . . . . . . .G. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #   O                             O   # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
@@ -243,10 +243,10 @@
         <el:english el:translate="true">Try using the spade on the holes caused by the dynamite.</el:english>
       </el:string> 
       <el:string el:key="text%O">
-        <el:english el:translate="true">Those things are bolders -- try moving one of the tan blocks.  Don't fall into the water or abyss (the black floor).</el:english>
+        <el:english el:translate="true">Those things are boulders -- try moving one of the tan blocks.  Don't fall into the water or abyss (the black floor).</el:english>
       </el:string> 
       <el:string el:key="text%P">
-        <el:english el:translate="true">Take the magic wand and hit a bolder.  Try to let the row of three bolders pass the large column.</el:english>
+        <el:english el:translate="true">Take the magic wand and hit a boulder.  Try to let the row of three boulders pass the large column.</el:english>
       </el:string> 
       <el:string el:key="text%Q">
         <el:english el:translate="true">Hit it hard enough!</el:english>



From ral at mail.berlios.de  Sat Feb  7 01:35:11 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 7 Feb 2009 01:35:11 +0100
Subject: [Enigma-game-svn] r1521 - in trunk/src: . items stones
Message-ID: <200902070035.n170ZBEU005482@sheep.berlios.de>

Author: ral
Date: 2009-02-07 01:35:10 +0100 (Sat, 07 Feb 2009)
New Revision: 1521

Modified:
   trunk/src/items/CompatibilityItems.cc
   trunk/src/items/CompatibilityItems.hh
   trunk/src/items/Trigger.cc
   trunk/src/lua.cc
   trunk/src/stones/VolcanoStone.cc
Log:
Trunk 1.1: new API reengineering
- fix trigger: 
  - update image in case a trigger was set below a stone which
      gets deleted before level initializtion-
  - hollow puzzles should press trigger
- fix odometer: missing template object
- fix dummy item: typo in template object
- fix group - objects occuring twice in a group did cause false result groups,
    especially the join group operator has been affected
- fix volcano: broken images due to fart -> quake renaming
- fix crash on grp:nearest(obj) in case obj is no longer existing - now an
    assetion is thrown


Modified: trunk/src/items/CompatibilityItems.cc
===================================================================
--- trunk/src/items/CompatibilityItems.cc	2009-02-06 21:31:26 UTC (rev 1520)
+++ trunk/src/items/CompatibilityItems.cc	2009-02-07 00:35:10 UTC (rev 1521)
@@ -122,19 +122,19 @@
 
 /* -------------------- DummyItem -------------------- */
 
-    Dummyitem::Dummyitem() {
+    DummyItem::DummyItem() {
     }
 
-    void Dummyitem::on_pickup(Actor *) {
+    void DummyItem::on_pickup(Actor *) {
         int code = getAttr("code");
         Log << ecl::strf("Picked up item 0x%x\n", code);
     }
-    void Dummyitem::on_drop(Actor *) {
+    void DummyItem::on_drop(Actor *) {
         int code = getAttr("code");
         Log << ecl::strf("Dropped up item 0x%x\n", code);
     }
     
-    DEF_ITEMTRAITSF(Dummyitem, "it_dummy", it_dummy, itf_fireproof);
+    DEF_ITEMTRAITSF(DummyItem, "it_dummy", it_dummy, itf_fireproof);
 
 //----------------------------------------
 // Bridge item (for Oxyd compatibility)
@@ -181,7 +181,8 @@
         BootRegister(new EasyKillStone(), "it-easykillstone");
         BootRegister(new OnePKillStone(), "it-1pkillstone");
         BootRegister(new TwoPKillStone(), "it-2pkillstone");
-        BootRegister(new OxydBridge(), "it_dummy");
+        BootRegister(new DummyItem(), "it_dummy");
+        BootRegister(new Odometer(), "it_odometer");
         BootRegister(new OxydBridge(), "it-bridge-oxyd");
         BootRegister(new OxydBridgeActive(), "it-bridge-oxyd_active");
     BOOT_REGISTER_END

Modified: trunk/src/items/CompatibilityItems.hh
===================================================================
--- trunk/src/items/CompatibilityItems.hh	2009-02-06 21:31:26 UTC (rev 1520)
+++ trunk/src/items/CompatibilityItems.hh	2009-02-07 00:35:10 UTC (rev 1521)
@@ -79,11 +79,11 @@
     /**
      * DummyItem
      */
-    class Dummyitem : public Item {
-        CLONEOBJ(Dummyitem);
+    class DummyItem : public Item {
+        CLONEOBJ(DummyItem);
         DECL_ITEMTRAITS;
     public:
-        Dummyitem();
+        DummyItem();
         
         // Item interface
        virtual void on_drop(Actor *a);

Modified: trunk/src/items/Trigger.cc
===================================================================
--- trunk/src/items/Trigger.cc	2009-02-06 21:31:26 UTC (rev 1520)
+++ trunk/src/items/Trigger.cc	2009-02-07 00:35:10 UTC (rev 1521)
@@ -47,6 +47,7 @@
             // old Enigma versions did issue performAction what is incompatible
             updateIState(countActors(),
                     server::EnigmaCompatibility >= 1.10 || server::GameCompatibility != GAMET_ENIGMA); 
+            init_model();
             return Value();
         } else if (m.message == "_jumping" ) {
             updateIState(m.value.to_bool() ? -1 : +1);
@@ -107,7 +108,7 @@
         
         Stone *st = GetStone(get_pos());
         state &= ~1;  // delete stone pressure bit
-        if (st != NULL && (!st->is_floating() || st->is_kind("st-puzzle*"))) {
+        if (st != NULL && (!st->is_floating() || st->getClass() == "st_puzzle")) {
             // Hack to make hollow puzzle stones press triggers
             state |= 1;   // add stone pressure bit
         }

Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2009-02-06 21:31:26 UTC (rev 1520)
+++ trunk/src/lua.cc	2009-02-07 00:35:10 UTC (rev 1521)
@@ -275,7 +275,7 @@
 
     std::set<Object *> unique;
     std::list<Object *>::iterator it = objects.begin();
-    for (int i = 1; it != objects.end(); ++it, ++i) {
+    for (int i = 1; it != objects.end(); ++it) {
         if (*it) {  // existing object not NULL
             if (unique.find(*it) == unique.end()) {
                 unique.insert(*it);
@@ -284,6 +284,7 @@
                 lua_rawseti(L, -3, i);   // group[i] = obj
                 lua_pushinteger(L, i);
                 lua_rawset(L, -3);       // group[obj] = i
+                i++;
             }
         }
     }
@@ -3142,6 +3143,9 @@
 
     ObjectList oldList = toObjectList(L, 1);
     Object *center = to_object(L, 2);
+    if (center == NULL) {
+        throwLuaError(L, "Error: reference object is no longer existing");
+    }
     double mindist = -1;
     Object *candidate = NULL;
     

Modified: trunk/src/stones/VolcanoStone.cc
===================================================================
--- trunk/src/stones/VolcanoStone.cc	2009-02-06 21:31:26 UTC (rev 1520)
+++ trunk/src/stones/VolcanoStone.cc	2009-02-07 00:35:10 UTC (rev 1521)
@@ -77,8 +77,8 @@
         switch (state) {
             case FINISHED:
             case INACTIVE: set_model("st_flat"); break;
-            case ACTIVE:   set_anim("st-farting"); break;
-            case BREAKING: set_anim("st-fartbreak-anim"); break;
+            case ACTIVE:   set_anim("st_quaking"); break;
+            case BREAKING: set_anim("st_quakebreak_anim"); break;
             case NEW:      set_anim("it-seed-growing"); break;
             case GROWING:  set_anim("st-volcano-growing"); break;
         }



From ged at mail.berlios.de  Sat Feb  7 14:48:58 2009
From: ged at mail.berlios.de (ged at mail.berlios.de)
Date: Sat, 7 Feb 2009 14:48:58 +0100
Subject: [Enigma-game-svn] r1522 - in homepage/input: . news
Message-ID: <200902071348.n17DmwsL025481@sheep.berlios.de>

Author: ged
Date: 2009-02-07 14:48:43 +0100 (Sat, 07 Feb 2009)
New Revision: 1522

Added:
   homepage/input/level_archive_ru.html
Modified:
   homepage/input/bottombar_ru.html
   homepage/input/development_ru.html
   homepage/input/download_ru.html
   homepage/input/faq_core_ru.html
   homepage/input/faq_questions_ru.html
   homepage/input/features_ru.html
   homepage/input/impressum_ru.html
   homepage/input/infobox_ru.html
   homepage/input/introduction_ru.html
   homepage/input/links_ru.html
   homepage/input/menu_ru.html
   homepage/input/navbar_ru.html
   homepage/input/news/news_issue10_ru.html
   homepage/input/news/news_issue11_ru.html
   homepage/input/news/news_issue13_ru.html
   homepage/input/news/news_issue15_ru.html
   homepage/input/news/news_issue16_ru.html
   homepage/input/news/news_issue19_ru.html
   homepage/input/news/news_issue1_ru.html
   homepage/input/news/news_issue21_ru.html
   homepage/input/news/news_issue22_ru.html
   homepage/input/news/news_issue23_ru.html
   homepage/input/news/news_issue25_ru.html
   homepage/input/news/news_issue26_ru.html
   homepage/input/news/news_issue2_ru.html
   homepage/input/news/news_issue3_ru.html
   homepage/input/news/news_issue5_ru.html
   homepage/input/news/news_issue6_ru.html
   homepage/input/news/news_issue7_ru.html
   homepage/input/news/news_issue8_ru.html
   homepage/input/news/news_issue9_ru.html
   homepage/input/output-files.lua
   homepage/input/press_ru.html
   homepage/input/screenshots_ru.html
   homepage/input/stat-help_ru.html
   homepage/input/support_ru.html
   homepage/input/testimonials_ru.html
   homepage/input/top_news_ru.html
Log:
Homepage:
- Russian translation for recent additions and fixes


Modified: homepage/input/bottombar_ru.html
===================================================================
--- homepage/input/bottombar_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/bottombar_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,4 +1,4 @@
     <p>Copyright &copy; 2003 - 2007 by <a href="$$credits$$">Daniel Heck and contributors</a>.
-    ??? ????????? ?????????? ???????? ?? ????????
+    ??? ????????? ?????????? ???????? ?? ????????
     <a href="http://creativecommons.org/licenses/sa/1.0/">Creative Commons License</a>.<br>
-    ?????? ????????: $Revision$ , ????????? ??????????: $Date$ .</p>
+    ?????? ????????: $Revision$, ????????? ??????????: $Date$.</p>

Modified: homepage/input/development_ru.html
===================================================================
--- homepage/input/development_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/development_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -29,18 +29,18 @@
   <a name="tasks">??????? ?????? ? ?????????</a></h3>
 
   <p>???? Enigma ? ???????? ??????? ?????? 1.00, ??????? ??????? ??????,
-  ???? ??? ??? ?????? ???? ???????. ????? ? ??? ??? ??????? ??? ???????, ????? ??????? ?? ???.
+  ????, ??? ??? ?????? ???? ???????. ????? ? ??? ??? ??????? ??? ???????, ????? ??????? ?? ???.
   ??? ?????? ??????? ?????, ??????? ?? ????? ????? ?????? ? ????? ???????.
-  ???? ? ??? ???? ??????????? ?????? ? ??????? ?????????? ???????, ?????????? ?????????
+  ???? ? ??? ???? ??????????? ?????? ? ??????? ?????????? ???????, ??????????, ?????????
   ??? ???, ??? ?? ?????? ??? ??????.</p>
 
   <div class="tasks">
-  <h4>????????????????? ??????</h4>
+  <h4>??????, ?? ????????? ??????? ????????????????</h4>
   <ul>
   <li><b>???????</b>. ? Enigma ???? ????????? ????????? ??????, ???????? ?? ???????????.
       ???? ?? ?????? ???????????? Enigma ??? ?????? ??????? ?????, ?????????
       ???? ?????????? ? ??????, ???????????, ??? ???????? ???????? ???
-      ???? ????????????? ???????, ?????????? ????????? ? ????.
+      ???? ????????????? ???????, ??????????, ????????? ? ????.
       <div class="diff">??????</div></li>
 
   <li><b>????????? ???????</b>. ??? ?? ?????? ????????, ? ????????? ????? ?? ?????????? ????????? ? ??????? ??????????.
@@ -52,11 +52,11 @@
       ???????????? ?????? ????? (??????!) ???? ???????????.
       <div class="diff">??????</div></li>
 
-  <li><b>??????????? ?????????</b>. ????? ???????????? ??? Enigma, ????? ??????????? 
+  <li><b>??????????? ?????????</b>. ??? ????? ?????????? ?????????? Enigma, ??? ????? ??????? ??????????? 
       ??????? ? ???????? ??????????????? ?? mag-heut.net ? ? ?????? ???????? ?????????????.
       ????????? ??????? ??? ????? ???? ????????? ? ????? ?????? ??? ???? ????????
       ? FAQ. ????? ??????????? ???????????? Enigma ? ?????? ????????? ??
-      ???? ??? ????????? ???????????? ?????? ????? ?????? ??? ? ???????? ??????? ???????
+      ???? ??? ????????? ???????????? ?????? ????? ?????? ??? ? ????????? ??????? ???????
       ? ?????? ?? ???????. ????? FAQ ?????? ????????????? ?????????????
       ???????.
       <div class="diff">??????-??????</div></li>
@@ -64,8 +64,8 @@
   <li><b>???????????? ?? ???????? ????????</b>. ?? ???????? ???????? ? Enigma
       ??? ????? ?????? ??????????. ?? ?? ????? ??????????????, ??? Enigma ??????
       ?????? ???????????????? ??? ???????????. ??????, ???????????? ????????
-      ?????? ?????? ??? ?????????? ? ??????????? - ? ?? ? ???? ?????
-      ?????? ?????? ??????? ?? ?????, ??????????? ? ?????????? ????????????.
+      ?????? ?????? ??? ?????????? ? ??????????? &mdash; ? ?? ??? ??????
+      ??????? ?? ?????, ??????????? ? ?????? ???? ????????????.
       ?? ????? ????????? ? ?????????, ??????? ?????? ? ???? ????? ? ????? ????? ?? ??????? ??????????????? ???.
       <div class="diff">??????-??????</div></li>
   </ul>
@@ -74,14 +74,14 @@
   <ul>
   <li><b>??????</b>. Enigma ????? ????????? ??????????? ?????? ????? (???????) ???????.
       ?? ?????, ???? ?? ???????? ??? ??????, ????? ??? ??? ???????? ???????????.
-      ???????? ???? ????, ????????? ? ?????? ? ???????
+      ???????? ???? ????, ??????? ?????? ? ???????
       <a href="$$development$$#level">?????????? ???????</a> ? ?? ????????
       ???????????? ??, ??? ? ??? ?????????!
       <div class="diff">??????-??????</div></li>
 
   <li><b>????? ? ??????</b>. ?? ??????? ? ??????????? ?????????? ??? ??????? ??????? ??? ????? ??????????
       ?? ????? ???????? ???????? ??????? ??? ??? ?????????????? ????????
-      (?????? ????????? Windows, ?????? Linux ??? ?????? ?????????????,
+      (?????? ????????? Windows, ?????? Linux ??? ?????? ?????????????
       &hellip;). ??? ????? ????????????, ??????? ????????? ????????? ? ????????????
       ?????? ??? ????????????? Enigma ?? ???? ????????? ??????????
       (Mac OS X, Visual Studio,&hellip;). ?? ?????? ??????????? Enigma ?? ????? ?????????,
@@ -94,21 +94,21 @@
       <div class="diff">??????</div></li>
 
   <li><b>????? ????? ? ??????????, ??????????? ???????????/???????</b>. Enigma ???????? ?? SDL,
-      ??????? ?? ???????????? ? ??????? ???? ???? ???????? ??? ??-ASCII ????????.
+      ??????? ?? ???????????? ? ??????? ???? ???? ???????? ??? ????????, ???????? ?? ASCII.
       ?????????? ?????????? ????????? ??? ????? ???? ???????? ?? ???? ???????????? ????????.
       ????? ??? ????? ????????? ??????????? ? ???????.
       <div class="diff">??????</div></li>
 
   <li><b>???????? ???????</b>. ??? ??? ???????????? ????????? ????? ?? ??????????? ? ?? ??? ??????????, ???
-      Enigma ?? ?????????? ? ????????? ?? ?????? Java, ??????????
-      ??????? ??????? XML ? ????? ? Enigma. ???????? ???????? 
+      Enigma, ?? ?????????? ? ????????? ?? ?????? Java, ??????????
+      ??????? ??????? XML ? ?????????? ? Enigma. ???????? ???????? 
       ??? ??????? ????? ? ? ????? ?? ??? ?????.
       <div class="diff">??????-??????</div></li>
 
-  <li><b>??????? ????</b>. ??? ???????? ? ????????? ???????, ??? ??? Enigma
+  <li><b>??????? ????</b>. ??? ?????? ? ????????? ???????, ??? ??? Enigma
       ?????????? ?? ??????????????? ??? ???????? ?????? ????.
-      ??????? ???????? ?????? - ?????????? ??????????????. ???? ?? ?????? ?????????? ? ??? ????????
-      ???????? ? ???????? ????? C++ ???? Enigma, ?? ? ???????? ?????? ??? ? ???? ???????.
+      ??????? ???????? ?????? &mdash; ?????????? ??????????????. ???? ?? ?????? ?????????? ? ??? ????????
+      ???????? ? ?????? C++ ???? Enigma, ?? ? ???????? ?????? ??? ? ???? ???????.
       <div class="diff">??????</div></li>
 
   </ul>
@@ -126,11 +126,11 @@
 
   <p><a href="$$refman$$">?????????? ???????????</a> Enigma ???????? ????????? ?????? ???????
   ? ???? ????????, ??????? ?? ?????? ????????????. ??? ????? ???? ?? ??????????? ??????? ??
-  ?????? 1 - 3 ? ???????, ??? ?? ?????? ?????? ????????? ???????? ??????? ???????.<p>
+  ?????? 1 - 3 ? ???????, ??? ?? ?????? ????? ????????? ???????? ??????? ???????.<p>
 
   <p>??? ????? ????????????? ? ? ???????? ????????????? ??????? ? ??????????? ???????, ?? 
-  ?????? ????????? ?? <a href="$$wiki$$">wiki ? ?????????? ???????</a>. ?? ????????????? ???????? ?? 
-  ????? ????? ???????????? ???????? ? ????????????? ??? ???????????? ????? ????
+  ?????? ????????? ?? <a href="$$wiki$$">wiki ? ?????????? ???????</a>. ? ???????? ??? ??????? ???????? 
+  ????? ????? ???????????? ???????? ? ????????????? ??? ??????????? ?????????? ???????? ????
   ??? ?????? ????? ?????.</p>
 
   <p>?????? ?? ?????? ???????? ??? ? <a href="$$development$$#maillist">?????? ???????? ?????????????</a>,
@@ -147,7 +147,7 @@
   <a name="app">?????????? ??????????</a></h3>
 
   <p>???? ?? ?????? ??????? ????? ????????? ?????? Enigma, ??? ????? ?????????
-  ?? ?? ????? <a href="https://developer.berlios.de/svn/?group_id=3972">
+  ?? ?? ????? <a href="https://developer.berlios.de/svn/?group_id=3972">
   ??????????? ???????? ????? ?? Berlios</a>. ????? ???????? ????????? ??????, ??????
   ????? ???????</p>
   <pre>svn checkout svn://svn.berlios.de/enigma-game/trunk</pre>
@@ -177,5 +177,5 @@
 
   <pre>doc/README.mingw32</pre>
 
-  <p>???? ??? ????? ?????? ?? ?????? ? ???????????, ?????????? ????????? ? ???? ????? 
+  <p>???? ??? ????? ?????? ?? ?????? ? ???????????, ??????????, ????????? ? ???? ????? 
   <a href="$$development$$#maillist">?????? ????????</a>.</p>

Modified: homepage/input/download_ru.html
===================================================================
--- homepage/input/download_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/download_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -12,7 +12,7 @@
   <li><a href="$$download$$#oldversions">?????? ??????</a></li>
 </ul>
 
-<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="stable">?????????? ?????? (?????? 1.01)</a></h3>
 
   <p>?????? ? '???????' ????????, ?? ?????????? ????????? '???????????' ??????
@@ -75,11 +75,11 @@
 
   </ul>
 
-  <p>??? ?????? ???????? ?? Berlios. ? ?????? ????????????? ??????? ? ????????? ?????????? ??????? ???????? ?
+  <p>??? ?????? ???????? ?? Berlios. ? ?????? ????????????? ??????? ? ????????? ??????????? ??????? ???????? ?
   <a href="http://developer.berlios.de/project/showfiles.php?group_id=3972">
-  Berlios</a> ?????????? ??????? ?? ???? ???????????? ????????.<p>
+  Berlios</a> ? ?????????? ?????? ?? ???????????? ????????.<p>
 
-  <p>?????????? ???????? ? ????????? ? ????? ?? ???? ??????? ? <a
+  <p>??????????, ???????? ? ????????? ? ????? ?? ???? ??????? ? <a
     href="mailto:enigma-devel at nongnu.org">?????? ???????? Enigma</a>.</p>
 
 
@@ -98,12 +98,12 @@
 	GP2X</a>&nbsp;&nbsp;(?????? 0.92)</li>
   </ul>
 
-<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="compilation">?????? ?? ???????? ????? ??? Unix</a></h3>
 
   <p>???? ?? ?? ????? ??????? Enigma ??? ?????? ???????????? Unix, ?? ?????? 
   ?????????? ??????? ????? ? ????????? ?????? ? ??????? Enigma ??????????????. ??????
-  ??? ????? ???????? ???? ? ????.</p>
+  ??? ???????? ??????.</p>
 
   <p>Enigma ??????? ?? ?????????? ????????? ? ????????????. ??????????? Unix-?????? ????????????
   ? ??? ?????????????? ???????????? ????????????. ?? ??? ??????, ?????? ??????? ? ???????????? ????????????, ??? ?????
@@ -111,11 +111,11 @@
   ?????????? ?????????, ??? ? ????? ??????? ??????????? ?????????? SDL, SDL_ttf, SDL_image, SDL_mixer
   ? Xerces.</p>
 
-  <p>?? ?????? ??????? ????????? ? ????????, ??????? ?????? ???? ??????????? ? ????? ???????
-  ??? ?????? Enigma, ?????????? ?????????? ? ????? 'doc/REQUIREMENTS', ??????? ???????
+  <p>????? ??????? ?????? ?????? ????????? ? ????????, ??????? ?????? ???? ??????????? ? ????? ???????
+  ??? ?????? Enigma, ??????????, ??????????? ???? 'doc/REQUIREMENTS', ??????? ???????
   ? ????? ???????? ????? Enigma.</p>
 
-  <p>??? ?????? ??? ????? ???????????, ???????? Enigma ?????? ??????? ??? ????? ??????</p>
+  <p>??? ?????? ??? ????? ???????????, ???????? Enigma ?????? ??????? ??? ????? ??????</p>
 
    <pre>./configure && make && make install</pre>
 
@@ -132,11 +132,11 @@
     <li><a href="http://xml.apache.org/xerces-c">Xerces</a>&nbsp;&nbsp;(&ge; 2.4)</li>
   </ul>
 
-  <p>If you want to compile the current SVN developmental version, you will
-  additionally need <a href="http://curl.haxx.se/">curl and libcurl4</a>.</p>
+  <p>???? ?? ?????? ??????? ??????? ??????????????? ?????? ?? SVN, ???
+  ????????????? ??????????? <a href="http://curl.haxx.se/">curl ? libcurl4</a>.</p>
 
-  <p>If you're using Debian, you should have the following packages
-  installed for compiling the SVN developmental version:</p>
+  <p>???? ?? ??????????? Debian, ?? ??? ?????? ??????????????? ?????? ?? SVN ? ???
+  ?????? ???? ??????????? ????????? ??????:</p>
 
   <ul>
     <li>curl</li>
@@ -150,24 +150,24 @@
     <li>libxerces27-dev</li>
   </ul>
 
-<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="announce">?????? ???????? ? ???????????? ? ???????</a></h3>
 
 <p>???? ?? ???????? ????? ???????? ????? ????????? ?????? Enigma, ?? ?????????? ?????? ???????????
 ? ????? ???????? ?? ??????????? ?????. ?????? ????????????????? ?
 <a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">?????? 
-???????? ? ???????????? ? ???????</a>. ????? ????????? ??????? ????? ????????? ????? ?????????? ? ???? ??? ????????? ???????
-Enigma, ??????? ??? ?? ??????????? ?????????? ????????? ? ??????? ????.</p>
+???????? ? ???????????? ? ???????</a>. ????? ????????? ??????? ????? ????????? ????? ?????????? ? ???? ??? ?????????? ???????
+Enigma, ??????? ??? ?? ??????????? ?????????? ????????? ? ??????? ????.</p>
 
-<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="devel">??????????????? ??????</a></h3>
 
   <p>?????????????? ? ????? ????????? ??????????????? ?????? Enigma?
-  ??????????????? ?????? Enigma ????? ??????? ? ??????????? ?? ???????? ?????.</p>
+  ??????????????? ?????? Enigma ????? ??????? ? ?? ??????????? ???????? ?????.</p>
   <pre>svn://svn.berlios.de/enigma-game</pre>
-  <p>?? ?????????? ???????????? ?????????? ?????????? ? <a href="$$development$$">???????? ??????????</a>.</p>
+  <p>?? ?????????? ???????????? ????????, ??????????, <a href="$$development$$">???????? ??????????</a>.</p>
 
-<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$download$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="oldversions">?????? ??????</a></h3>
 
   <p>??-?? ????????? ? ??????????? ???????? ????? ? ???????? ????????, ?????? ??????
@@ -178,5 +178,5 @@
   <li><a href="http://savannah.nongnu.org/download/enigma/">
     http://savannah.nongnu.org/download/enigma/</a>&nbsp;&nbsp;???? ????? ?????????? ???????</li>
   <li><a href="http://www.mag-heut.net/blackball/index.php?act=ST&amp;f=2&amp;t=118">
-    mag-heut.net</a>&nbsp;&nbsp;???? ????? ?????? Windows-??????.</li>
+    mag-heut.net</a>&nbsp;&nbsp;???? ????? ?????? ?????? ??? Windows.</li>
   </ul>

Modified: homepage/input/faq_core_ru.html
===================================================================
--- homepage/input/faq_core_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/faq_core_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -12,26 +12,28 @@
 <li><a href="$$faq$$#section_questions">?????? ????????</a></li>
 </ul>
 
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section1">????????? ? ??????????</a>
 </h3>
 
 
-<h4><a name="s1q1">????? ? ??????? ??????? Enigma, ?????? ????? ??????? ? ??????? ????????,
-?????? ?? ???????? ??? ????????? ????????.</a></h4>
-<p>??????? ?? ?????? ???????? ??????? ??????? - ??-?? ???????????, ?????????? ?????? ???
-?????? ???????? ??????????????. ?? ????????????? ?? ????? ??? ? ???? ??????, ??? ???
-??? ??????? ??? ?? ???????????. ?????????? ?????????? ??????? ? ?????? ?? ?????? (????????
-&quot;download&quot; ? ?????? ?????? ?? &quot;download2&quot;) ??? ????????? ??????? ??????.</p>
+<h4><a name="s1q1">????? ? ??????? ??????? Enigma, ?????? ????? ??????? ? ???????
+????????, ?????? ?? ???????? ??? ????????? ????????.</a></h4>
+<p>??????? ?? ?????? ???????? ??????? ??????? &mdash; ??-?? ???????????, ??????????
+?????? ??? ?????? ???????? ??????????????. ?? ????????????? ?? ????? ??? ? ???? ??????,
+??? ??? ??? ??????? ??? ?? ???????????. ??????????, ?????????? ??????? ? ??????
+?? ?????? (???????? &quot;download&quot; ? ?????? ?????? ?? &quot;download2&quot;)
+??? ????????? ??????? ??????.</p>
 
 
-<h4><a name="s1q2">? ?????? ???? ??? ????????? Enigma, ?? ??? ?????????? ?? ???????!</a></h4>
+<h4><a name="s1q2">? ?????? ???? ??? ????????? Enigma, ?? ??? ?????????? ?? ??????
+?? ????!</a></h4>
 <p>?????????? ?????? ???? ? ????????? Enigma, ??????? ???????????? ????? ?????????
 ????-??????????? ? ?????????? Boulderdash ? Sokoban, ????????
 <a href="http://www.chiark.greenend.org.uk/~sgtatham/enigma/">
 http://www.chiark.greenend.org.uk/&#732;sgtatham/enigma/</a>,
 ????? ?????? ? ??? ??????. ???? ?? ?????? ?????????? ???? Enigma,
-???????? ?? ? ????? <a href="$$download$$">??????? ????????</a> ?? ???? ???-????????.</p>
+???????? ?? ? ????? <a href="$$download$$">??????? ????????</a> ?? ???? ???-?????.</p>
 
 
 <h4><a name="s1q3">??? ? ???? ???????? Enigma?</a></h4>
@@ -39,48 +41,52 @@
 ?????? ? ??????????), ??????? ? ?????????.</p>
 <ul>
 <li>
-Enigma ????????????? ??????? ?????? ??????? ????????, ???? ?? ??????? ????? ????????? ? ???? ????????:
-&quot;????????? ???????: ????&quot;. ???? ?? ?????? ??????????? ??????????????,
-???????? ????????? ??????.</li>
+Enigma ????????????? ??????? ?????? ??????? ????????, ???? ?? ??????? ?????
+????????? ? ???? ????????: &quot;????????? ???????: ????&quot;. ???? ?? ??????
+??????????? ??????????????, ???????? ????????? ??????.</li>
 <li>
 ??? ?????????? ??????? ?? ?????? ?????? ????????? ?????????? ??????? Enigma ???
-??????? ????????? ????? ?????? ? ???? ????? ????????????: ????????? ?????? ? ???????? 
-&quot;levels/auto&quot;, ????? ?????? ??????? ? ????????? ????????????? ????? 
-&quot;levels&quot;.</li>
+??????? ????????? ????? ?????? ? ???? ????? ????????????: ????????? ?????? ?
+???????? &quot;levels/auto&quot;, ????? ?????? ??????? ? ????????? ?????????????
+????? &quot;levels&quot;.</li>
 <li>
 ????? ???????? ?????????, ?????? ??????? ?????? Enigma ? ??????????
 ?????. ???? ?????????? ? ????????? ??????????.</li>
 </ul>
 
 
-<h4><a name="s1q4">??? ??? ?? ????-?????????? ???????????/??????? ??? ?? ??? ??? ?? ???? ?? ???????????!</a></h4>
+<h4><a name="s1q4">??? ??? ?? ????-?????????? ???????????/??????? ??? ?? ??? ???
+?? ???? ?? ???????????!</a></h4>
 <p>????????? ? ???? ???????? ? ????????? &quot;????????? ???????&quot; ?
-&quot;????&quot;. ????? ????? Enigma ????? ????????? ????????????? ????????? ?????????? ???????? ??? ? ??????.</p>
+&quot;????&quot;. ????? ????? Enigma ????? ????????? ????????????? ?????????
+?????????? ???????? ??? ? ??????.</p>
 <p>???? ?? ?????? ??????????? ???????, ???????? ratings.xml ?? ??????, ????????? 
 <a href="$$support$$#score">?????</a> ? ?????????? ??? ? ???? ????? ????????????.</p>
 
 
-<h4><a name="s1q5">??? ??? ?? ????-?????????? ???????????/??????? ? ?? ????, ????? ?????????? ??? ?????? ???????? ? ????????!</a></h4>
+<h4><a name="s1q5">??? ??? ?? ????-?????????? ???????????/??????? ? ?? ????, ?????
+?????????? ??? ?????? ???????? ? ????????!</a></h4>
 <p>?? ????????????; Enigma ?? ?????? ? ????????, ???? ?? ?? ???????????? ??? ????? 
-? ???? ????????: ????? ?????? ? ????????? &quot;????????? ???????&quot;. ?? ????????? ??? 
-&quot;?????????&quot;, ?? ?????? ??? ???????? ?? ??? ? ?????????.
+? ???? ????????: ????? ?????? ? ????????? &quot;????????? ???????&quot;. ??
+????????? ??? &quot;?????????&quot;, ?? ?????? ??? ???????? ?? ??? ? ?????????.
 </p>
 <p>???? ?? ?????? ??????????? ???????, ???????? ratings.xml ?? ??????, ????????? 
 <a href="$$support$$#score">?????</a> ? ?????????? ??? ? ???? ????? ????????????.</p>
 
 
-<h4><a name="s1q6">? ????????? ? ????? ??????? ??? Enigma ? ???? ??????? ?? ??? &#8230;</a></h4>
+<h4><a name="s1q6">? ????????? ? ????? ??????? ??? Enigma ? ???? ??????? ?? ??? &#8230;</a></h4>
 <p>???? ???? ??????? ?????? ? ??????? 1.0-xml, ?? ?????? ?????? ??????? ??? ? 
 ??????????? ? ???????? &quot;levels/auto&quot; ????? ????? ????????????.
 ????? ????? ????????????? Enigma, ??????? ? ???? ??????? ???????, ???????? ??????
-&quot;User&quot; ? ????? ??????? &quot;Auto&quot;. ?? (???????) ?????? ?????? ????????? ?????.
-</p><p>
-???? ?? ?? ????????, ? ?????? ????? ???? ????? ?????? ??????.
-???? ?? ???????????? ??????????? ? ?????? ? ??????? ???????, ????????
-???? ?????? &quot;??? ? ???? ????????????? ??? ?????? ?????? ?? ?????? 0.92/0.81/&#8230; ? 1.00?&quot;.
-</p><p>
-?????? ? ????, ??? ????? ??????? ????? ????????? ??????. ???? ??? ???, Enigma ????????
-??????? ?? ???? ??? ???????. ? ???? ?????? ????? ???? ????? ????? ??????? ??????? ?? &quot;levels/auto&quot;.</p>
+&quot;User&quot; ? ????? ??????? &quot;Auto&quot;. ??????? ?????? ?????? ?????????
+?????.</p>
+<p>???? ?? ?? ????????, ? ?????? ????? ???? ????? ?????? ??????. ???? ??
+???????????? ??????????? ? ?????? ? ??????? ???????, ???????? ???? ??????
+&quot;??? ? ???? ????????????? ??? ?????? ?????? ?? ?????? 0.92/0.81/&#8230; ?
+1.00?&quot;.</p>
+<p>?????? ? ????, ??? ????? ??????? ????? ????????? ??????. ???? ??? ???, Enigma
+???????? ??????? ?? ???? ??? ???????. ? ???? ?????? ???????? ?????? ???????? ?????
+??????? ??????? ?? &quot;levels/auto&quot;.</p>
 
 
 <h4><a name="s1q7">??? ? ???? ??????? ?? ??????? Sokoban ????? ?????????</a></h4>
@@ -90,115 +96,123 @@
 &quot;data/levels/enigma_sokoban&quot; ? ??????????, ???? ?? ?????????? ????.</p>
 
 
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section2">?????? Enigma</a>
 </h3>
 
 
-<h4><a name="s2q1">?????? ??? ????? ?????????? ??????, ?? ????? Enigma ????? ????????, ???
-    ????? ?????? ?? ??????????</a></h4>
+<h4><a name="s2q1">?????? ??? ????? ?????????? ??????, ?? ????? Enigma ?????
+????????, ??? ????? ?????? ?? ??????????</a></h4>
 <p>??? ??? ????????? ??????. ???????? ???? ??? ???? ? Enigma ?????? 
-?? ?????????????? ?????????? ??????, ? ??????? ?? ???????, ??? ?? ?? ??????????? ???????????.
-?? ?????? ??? ????????? ??? ?????????? ??????, ??? ? ??????????
+?? ?????????????? ?????????? ??????, ? ??????? ?? ???????, ??? ?? ?? ???????????
+???????????. ?? ?????? ??? ????????? ??? ?????????? ??????, ??? ? ??????????
 ????????????? ?? ???????? ?????? ? ????????????? (??????? &quot;???? ????????&quot;).</p>
 <p>
-???? ?? ??????????? GNOME, ?? ?? ?????? ????????? ? ???? ????????? ????????? ???????:
+???? ?? ??????????? GNOME, ?? ?? ?????? ????????? ? ???? ????????? ?????????
+???????:
 <pre>
 gnome-screensaver-command --inhibit
 </pre>
-(??? ?? ?????????? &mdash; ????? ?????????? ????????!) ????? ????????? Enigma. ????? ?????????
-?????? ? Enigma, ??????? Ctrl+C ? ???? ? ???????? &quot;inhibit&quot;, ? ??? ????????? ??????
-????????? ???? ??????. ??????? &quot;inhibit&quot; ?????? ??????????? ? ????? ????, ??? ??
-???????? ???? ?????????.
+(??? ?? ?????????? &mdash; ????? ?????????? ????????!) ????? ????????? Enigma.
+????? ????????? ?????? ? Enigma, ??????? Ctrl+C ? ???? ? ???????? &quot;inhibit&quot;,
+? ??? ????????? ?????? ????????? ???? ??????. ??????? &quot;inhibit&quot; ??????
+??????????? ? ????? ????, ??? ?? ???????? ???? ?????????.
 </p>
 
 
 <h4><a name="s2q2">Enigma ?? ???????????, ??? ?????? ????????? ?????????
     &quot;mismatch of state.xml and enigma.score&quot;.</a></h4>
-<p>?????????? ???????? ??? ????? ???? ?????? (???????? ???? &quot;??? ????????? ????? enigma.score ? state.xml?&quot;).
-???? ?? ?????????? ????? ?????? ?????? 
-Enigma, ?????????? ?????????? ???? 
-&quot;enigmarc.lua2&quot; ?? ??? ?? ??????????. ????? ?? ?????? ?????????? ????????.
+<p>??????????, ???????? ??? ????? ???? ?????? (???????? ???? &quot;??? ?????????
+????? enigma.score ? state.xml?&quot;). ???? ?? ?????????? ????? ?????? ?????? 
+Enigma, ??????????, ?????????? ???? &quot;enigmarc.lua2&quot; ?? ??? ?? ??????????.
+????? ????? ?? ?????? ??????? ????????.
 </p><p>
 ??? ????????, ?? ?????? ??????????? ??????? &quot;state.xml&quot; ?
-&quot;enigma.score&quot; ? ????? ?????????????? Enigma ? ???????? ???, ???? ?????? ?? ????????.</p>
+&quot;enigma.score&quot; ? ????? ?????????????? Enigma ? ???????? ???, ??????????
+?? ?????? ???????????.</p>
 
 
 <h4><a name="s2q3">Enigma ?? ???????????, ??? ?????? ????????? ?????????
     &quot;Datatype error: Type: invalid data type Value exception, Message:
     Value '44734' must be less than or equal to maxinclusive '32767'&quot;.
     (???????? ????? ??????????.)</a></h4>
-<p>??? ????????? ????????. ?? ???????? ???? ??????????? ?????? 0.92, ??????? 
-????????? 9 ?????. ???????? ????????? ????? &quot;enigmarc.lua2&quot; (? ????? ????? ????????????),
-????? ??? ???????, ??? ???????????? ??? (????? ????? ?? ????????? 
-??? ???? ?????????? ?????? 0.92), ??? ???????? ??? ? ????????? ?????????. ? ??? ??????? 
-??????, ??????? ???????? ???????? ?????? ????????? ?? ??????
+<p>??? ????????? ????????. ?? ???????? ???? ??????????? ?????? 0.92, ??????? 
+????????? 9 ?????. ???????? ????????? ????? &quot;enigmarc.lua2&quot; (? ?????
+????? ????????????), ????? ??? ???????, ??? ???????????? ??? (????? ????? ??
+????????? ??? ???? ?????????? ?????? 0.92), ??? ???????? ??? ? ????????? ?????????.
+? ??? ??????? ??????, ??????? ???????? ???????? ?????? ????????? ?? ??????
 (????????, ? ????? ?????? &quot;44734&quot;) ? ??????? ??? ?????? (?? ???????? 
-?????? ??????????? ?? 9 ?????). ????????? &quot;enigmarc.lua2&quot; ? ??????? 
-&quot;state.xml&quot; ? &quot;enigma.score&quot;, ????? ????????? Enigma
-??????? ?? ??????. ????????????? Enigma ? ?????????, ??? ?? ????????.</p>
+?????? ??????????? ??????????? 9 ?????). ????????? &quot;enigmarc.lua2&quot; ?
+??????? &quot;state.xml&quot; ? &quot;enigma.score&quot;, ????? ????????? Enigma
+??????? ?? ??????. ????????????? Enigma ? ?????????, ??? ?? ????????.</p>
 
 
-<h4><a name="s2q8">?? ????? ???? ? Enigma ??? ? ????, ?????? ???? ????????? ?????? ???? ? 
-    ??????. (Linux)</a></h4>
-<p>??? ?????? ? SDL, ????? ?? ?????????, ??????? ?????????? Enigma. ?????????? ???? ???????:</p>
+<h4><a name="s2q8">?? ????? ???? ? Enigma ??? ? ????, ?????? ???? ????????? ??????
+???? ? ??????. (Linux)</a></h4>
+<p>??? ?????? ? SDL, ????? ?? ?????????, ??????? ?????????? Enigma. ??????????
+???? ???????:</p>
 <pre>export SDL_VIDEO_X11_DGAMOUSE=0
 enigma</pre>
-<p>????? ?????? ???????. ???? ??? ?????????, ?? ?????? ??????? ?????, ? ??????? ???????? ??????? export ????? ???????? ????.
-?????????? ???????? ? ??? ?????? ???????? <a
-href="mailto:enigma-devel at nongnu.org" >enigma-devel at nongnu.org</a>, ????????? ?????????? ? 
-????? ??????????, ???????????? Linux ? ?????? SDL, ????? ???????????????? ??? 
-??? ????? ? ?? ????? ???????? ????????? ??? ???????? ??????.
+<p>????? ?????? ???????. ???? ??? ?????????, ?? ?????? ??????? ?????, ? ???????
+???????? ??????? export ????? ???????? ????. ??????????, ???????? ? ??? ??????
+???????? <a href="mailto:enigma-devel at nongnu.org" >enigma-devel at nongnu.org</a>,
+????????? ?????????? ? ????? ??????????, ???????????? Linux ? ?????? SDL, ?????
+???????????????? ??? ??? ????? ? ?? ????? ???????? ????????? ??? ???????? ??????.
 </p>
 
 
-<h4><a name="s2q9">? ????????? Kaspersky Internet Security 7.0. ????? ? ???????? Enigma,
-    ?? ???????? &quot;????????? ?????? ??????????&quot;.</a></h4>
-<p>?????? ?????????? - ??? ?????????, ??????? ?????????????? ???? ? ???? ??? ??????????. ????? ?????????
-????? ??????????????, ??? ????????? ??????????? ??????????? ??? ????? ?????????? ? ???. ??????, ???
-?????? ?????? ????, Enigma ????? ?????????????? ???? ? ???? ? ??????????:
-?????????????? ??????? ?????? ???? ??????????, ?? ????? ???? ?????????? ???? ????????, ? ?? ?????? ??????????.
-??? ?????? ?????????? ?????????. ???? ?? ??????? Enigma ? ????? ???????? ????????,
-?? ?????? ????????? Enigma ? ?????????? ???? Kaspersky. ???? ?? ?????? ????????? ? ??????????? 
-Enigma, ?????????????? ???????????? ??????? ? <a
-href="$$download$$">??????? ????????</a>.
+<h4><a name="s2q9">? ????????? Kaspersky Internet Security 7.0. ????? ? ????????
+Enigma, ?? ???????? &quot;????????? ?????? ??????????&quot;.</a></h4>
+<p>?????? ?????????? &mdash; ??? ?????????, ??????? ?????????????? ???? ? ????
+??? ??????????. ????? ????????? ????? ??????????????, ??? ????????? ???????????
+??????????? ??? ????? ?????????? ? ???. ??????, ??? ?????? ?????? ????, Enigma
+????? ?????????????? ???? ? ???? ? ??????????: ????? ???????? ? ???????????????
+??????????, ???????? ?? ????? ???? ?????????, ? ?? ?????? ??????????. ??? ??????
+?????????? ?????????. ???? ?? ??????? Enigma ? ????? ???????? ????????, ??? ???????
+????????? Enigma ? ?????????? ???? Kaspersky. ???? ?? ?????? ????????? ? ??????????? 
+Enigma, ?????????????? ???????????? ??????? ? <a href="$$download$$">??????? ????????</a>.
 </p>
 
 
-<h4><a name="s2q10">? ????????? Linux. ?? ????? ???? ? Enigma, xmms (??? ????? ?????? ??????????? ?????????????) ?? ????????
-    ??? ??? ????? ? Enigma.</a></h4>
+<h4><a name="s2q10">? ????????? Linux. ?? ????? ???? ? Enigma, xmms (??? ?????
+?????? ??????????? ?????????????) ?? ???????? ??? ??? ????? ? Enigma.</a></h4>
 <p>
-??? ??????????? ????????????? ?????? ???????????? ALSA, ? ?? OSS. ??? xmms: ???????? ?????? ???????,
-&quot;?????????(Options)&quot;, &quot;????????(Preferences)&quot;, &quot;?????????? ?????-?????? ?????(Audio I/O Plugins)&quot;,
-&quot;?????????? ??? ??????(Output Plugin)&quot;: ???? ? ?????? ???? ALSA, ?? ???????? ??.
+??? ??????????? ????????????? ?????? ???????????? ALSA, ? ?? OSS. ??? xmms:
+???????? ?????? ???????, &quot;?????????(Options)&quot;,
+&quot;????????(Preferences)&quot;, &quot;?????????? ?????-?????? ?????(Audio I/O Plugins)&quot;,
+&quot;?????????? ??? ??????(Output Plugin)&quot;: ???? ? ?????? ???? ALSA, ??
+???????? ??.
 </p>
 
 
-<h4><a name="s2q4">??????, ????? ? ??????? ????? ???????, ??????????? ??????????? ??? ??????</a></h4>
-<p>??? ?????????? ?????? ??? ?????? ??????? Enigma, ? ?????? 
-???? ? Enigma ?? ???? ????????? ??????. ??? ?????????
-? ?????? ?????????, ????? ????? ??????? ??? ??????.</p>
+<h4><a name="s2q4">??????, ????? ? ??????? ????? ???????, ??????????? ???????????
+??? ??????</a></h4>
+<p>??? ?????????? ?????? ??? ?????? ??????? Enigma, ? ?????? ???? ? Enigma ??
+???? ????????? ??????. ??? ????????? ? ?????? ????????????, ????? ????? ???????
+??? ??????.</p>
 
 
 <h4><a name="s2q5">??? ????????? ????? enigma.score ? state.xml?</a></h4>
-<p>???? ? ??? ?????????? &quot;????? ????????????&quot;. ?? ?????? ??????? ???, ????? ?? ???????? ???? ????????? ?
-???? &quot;?????????&quot;; ??? ????? ? ??????? ????
-F2. ???? ?? ????????? ????????? ????:
+<p>???? ? ??? ?????????? &quot;????? ????????????&quot;. ?? ?????? ??????? ???,
+????? ?? ???????? ???? ????????? ? ???? &quot;?????????&quot;; ??? ????? ? ???????
+???? F2. ???? ?? ????????? ????????? ????:
 </p><p>
 ??? ?????? Linux/Unix:<br>
 &nbsp;&#732;/.enigma<br>
-??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ? ???????????? ??????:<br>
+??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ?
+???????????? ??????:<br>
 &nbsp;C:\Documents and Settings\YourUserName\Application Data\Enigma<br>
-??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ? ???????? ??????:<br>
+??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ?
+???????? ??????:<br>
 &nbsp;C:\Dokumente und Einstellungen\YourUserName\Anwendungsdaten\Enigma<br>
 ??? ?????? Windows, ?????????? ?? DOS (95, 98, ME) ? ???????????? ??????:<br>
 &nbsp;C:\WINDOWS\Application Data\Enigma<br>
 ??? ?????? Windows, ?????????? ?? DOS (95, 98, ME) ? ???????? ??????:<br>
 &nbsp;C:\WINDOWS\Anwendungsdaten\Enigma<br>
-(??? ?????? ?? ?????? ?????? ??? ???????; ???????? &quot;YourUserName&quot; ?? ???? 
-??? ????????????.)<br>
-??? Mac OS X: ?????????????? ???????????, ???? ??? ????????? &quot;Go&quot;, ???????? &quot;Go to
-folder&quot;, ????? ???????: &quot;/Users/YourUserName/.enigma&quot;</p>
+(??? ?????? ?? ?????? ?????? ??? ???????; ???????? &quot;YourUserName&quot; ??
+???? ??? ????????????.)<br>
+??? Mac OS X: ?????????????? ???????????, ???? ??? ????????? &quot;Go&quot;,
+???????? &quot;Go to folder&quot;, ????? ???????: &quot;/Users/YourUserName/.enigma&quot;</p>
 
 
 <h4><a name="s2q6">? ????? ??????!</a></h4>
@@ -207,11 +221,12 @@
 <a href="http://www.mag-heut.net">mag-heut.net</a> ??? ????????? ????? ????????? ?? ?????? ?? 
 Berlios: <a href="http://developer.berlios.de/projects/enigma-game/"
 >http://developer.berlios.de/projects/enigma-game/</a>
-????? ???????? ?? &quot;Bug Tracking&quot; (&quot;Fehlerverfolgung&quot;) ?
-&quot;Submit a Bug&quot;. ??? ?????, ? ??? ?????? ???? ??????? ?? Berlios. ????? ??? ???????, 
-?????????????? &quot;New User&quot; (&quot;Neuer Benutzer&quot;) ?????.
+????? ???????? ?? &quot;Bug Tracking&quot; (&quot;Fehlerverfolgung&quot;) ?
+&quot;Submit a Bug&quot;. ??? ?????, ? ??? ?????? ???? ??????? ?? Berlios. ?????
+??? ???????, ?????????????? &quot;New User&quot; (&quot;Neuer Benutzer&quot;)
+?????.
 </p><p>
-?????????? ???????? ? ????? ????????? ???????? ??????????:</p>
+??????????, ???????? ? ????? ????????? ???????? ??????????:</p>
 <ul>
 <li>????? ????????? ? ???????????? ??????? ?? ????????????</li>
 <li>?????? ? ????? ?????? Enigma ?? ????????</li>
@@ -223,173 +238,179 @@
 ??? ?????? ?????? ???????? ?????. ?????????? ?????? ????????, ??? 
 ?????????? ????? &quot;???????&quot; ??? &quot;?????????&quot;. ?????? ???????,
 ??? ????? ?? ???????, ? ??? ??????????? ?? ???????? ????? ????? ?????.
-???? ?? ????? ?????????? &quot;??????? ??????&quot; (????????, ????????? etc.; ? ?? ??????????? ???????),
-?????????? ????????? Enigma ?? ??????? ? ??????? ???????
+???? ?? ????? ?????????? &quot;??????? ??????&quot; (????????, ????????? etc.; ?
+?? ??????????? ???????), ??????????, ????????? Enigma ?? ??????? ? ??????? ???????
 &quot;enigma --log&quot;
 ? ??????????? ????????????? ??????. ? ?????????? ????????? ?????? ????????? ??? ????? 
-stdout.txt ? stderr.txt,
-??????????? ???????? ??? ??? ???????????. ?????????? ?????????? ??
-? ?????? ?????? ???. (????? ?????????? <a href="$$support$$#bug">?????</a>).</p>
+stdout.txt ? stderr.txt, ??????????? ???????? ??? ??? ???????????. ??????????,
+?????????? ?? ? ?????? ?????? ???. (???????? ?????
+<a href="$$support$$#bug">??? ????????</a>).</p>
 
 
 <h4><a name="s2q7">? ??????? ? ?????? ????????, ?? ??? ?? ???????? :-(</a></h4>
-<p>????????, ??? ?????????? ???????? ?????. ?? ??????, ??? ??? ?? ????????? ???? ??????;
-?? ?????? ??????, ? ?????? ?? ???? ?? ??? 
-?? ????? ???????? ? ????, ???? ??????? ??????. 
-???????, ?????????? ???????? ??? ?????? ??? ? ???????? ?????.
+<p>????????, ??? ?????????? ???????? ?????. ?? ??????, ??? ??? ?? ????????? ????
+??????; ?? ?????? ??????, ? ?????? ?? ???? ?? ??? ?? ????? ???????? ? ????, ????
+??????? ??????. ???????, ??????????, ???????? ??? ?????? ??? ? ???????? ?????.
 </p><p>
-? ?????????, ???? ?? ??????, ????? ????????? ??? ?????????? ??????????,
-?? ??? ?????? ??? ? ?????????? ????????. ???????? ??? ?? ??? ???????;
-? ?? ?????? ?????????, ??? ?????? ????? ????? ?????? ???????? ??? ?? ???????????????? ;-)</p>
+? ?????????, ???? ?? ??????, ????? ????????? ??? ?????????? ??????????, ?? ???
+?????? ??? ? ?????????? ????????. ???????? ??? ?? ??? ???????; ?, ????????,
+?????? ????? ????? ?????? ???????? ??? ?? ???????????????? ;-)</p>
 
 
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section3">??????? ??????? Enigma</a>
 </h3>
 
 
 <h4><a name="s3q1">? ??????? ?????????? ? ???? ?????. ? ???? ??? ???????</a></h4>
-<p>????? ?? ? ?????? ??? ????????? Enigma, ????????? ? Tutorial.
-?? ???????? ???????? ? ?????????? ????????. ????? ????, ??? ?? ????????? ? ???,
-??? ????? ?????? ? ?????? ??????? &quot;Enigma I&quot; ?
-???????? ?????? ????? ??? ?????? ???????. ???????, ?? ?????? ?????? ? ??????? ?????? ???????, ?? ?????? ???????????
-???, ????? ??????? ? ???? ???????????? ?? ??? ????? ??????? ????????.</p>
+<p>????? ?? ? ?????? ??? ????????? Enigma, ????????? ? Tutorial. ?? ????????
+???????? ? ?????????? ????????. ????? ????, ??? ?? ????????? ? ???, ??? ???????
+?????? ? ?????? ??????? &quot;Enigma I&quot; ? ???????? ?????? ????? ??? ??????
+???????. ???????, ?? ?????? ?????? ? ??????? ?????? ???????, ?? ??????
+??????????? ???, ????? ??????? ? ???? ?? ??? ????? ??????? ???????? ?????.</p>
 
 
-<h4><a name="s3q2">?????? ?? ????????, ??? ????? ?????? 900 ???????? ?? ????? ????? 65, ? ??? ??? 
-    ???????? ??????.</a></h4>
-<p>????? ?? ? ?????? ??? ????????? Enigma, ?? ?????? ?????? ? 
-&quot;?????? ??????? Tutorial&quot;, ??????? ????????????? ????? ???????? ???????? 
-??? ????????. ???? ?? ???????????? ???? ?????????? ??????????????, ?? ??????
-??????? ? &quot;?????????&quot; ??????? ???????: ??????? ?? ?????? ? ????????
-&quot;????? ???????&quot;, ????? &quot;Enigma&quot; ????? ? 
-???? ?? ??????? ?? &quot;Enigma I&quot; ?? &quot;Enigma VII&quot;.
+<h4><a name="s3q2">?????? ?? ????????, ??? ????? ?????? 900 ???????? ?? ?????
+????? 65, ? ??? ??? ???????? ??????.</a></h4>
+<p>????? ?? ? ?????? ??? ????????? Enigma, ?? ????????? ? &quot;?????? ???????
+Tutorial&quot;, ??????? ??????? ?? ????? ??????? ??????? ??? ??????????. ???? ??
+???????????? ???? ?????????? ??????????????, ?? ?????? ??????? ?
+&quot;?????????&quot; ??????? ???????: ??????? ?? ?????? ? ????????
+&quot;????? ???????&quot;, ????? &quot;Enigma&quot; ????? ? ???? ?? ??????? ??
+&quot;Enigma I&quot; ?? &quot;Enigma VII&quot;.
 </p><p>
 ?????? &quot;?????? Enigma&quot; ?? ????? ?????? ???????? ???????? ?? ??????
 &quot;Deja Vu&quot; ? &quot;Sokoban&quot;.</p>
 
 
 <h4><a name="s3q3">??? ???????? ?????? ?? ???????? ? ??? ??????, ??????</a></h4>
-<p>???????: ??? ??? ?????? ?????????, ????? ???????? ?? ?????? ?????????????:
+<p>??????? &mdash; ??? ??? ?????? ?????????, ????? ???????? ?? ?????? ?????????????:
 ??????? ? ??????? ?????. ?????? ?? ??? ?????? ???????????? ??????? ?????.
 ??????? ?????? ?? ?????? ??????????, ??? ?? ?????? ??? ? ??????? ??????,
-??????????? - ??? ?? ?????? ??????? ? ??????? ??????. ??????????? ????,
-???????? ??? ??????? ????? ?????? ??? ?? ?????.
-?????? ????? ????? ??????? ????????:</p>
+??????????? &mdash; ??? ?? ?????? ??????? ? ??????? ??????. ??????????? ????,
+???????? ??? ??????? ????? ?????? ??? ?? ?????. ?????? ????? ????? ???????
+????????:</p>
 <ul>
-<li>????????? ????? (??? ??????????? ?????????????, ?????????? ? ??????????? ?? ?????????????),</li>
-<li>????????? ?????????, ??????????????? ??????, ???????,</li>
-<li>??????????? ????? ??????? ? ??????? ???????,</li>
-<li>????? ? ???? ??????? ???????, ????? ??????? ?????? ????? ???????,</li>
-<li>????????? ? ??????? ????.</li>
+<li>????????? ????? (??? ??????????? ?????????????, ?????????? ? ???????????
+?? ?????????????),</li>
+<li>?????? ??????????, ???????????????? ??????, ??????,</li>
+<li>???????????? ????? ??????? ? ??????? ???????,</li>
+<li>??????? ? ???? ??????? ???????, ??? ?????? ??????? ?????? ???????,</li>
+<li>??????? ? ??????? ????.</li>
 </ul>
-<p>?????????? ?????????? ? <a href="$$manual$$">???????????</a> ?? ?????????????.</p>
+<p>?????????? ?????????? ? <a href="$$manual$$">???????????</a>, ????? ??????
+???????????.</p>
 
 
 <h4><a name="s3q4">??? ?????? ???? [?????????? ????? ??????? ??????]?</a></h4>
 <p>?????????? ????????? ???????? ???????? ???. ?? ????????, ????? ??
 ?????? ?????????????????? ? ???, ?????? ?????? ? ?????????!
-??? ?? ?????? ???????? <a href="http://www.mag-heut.net">www.mag-heut.net</a> ? ????????
-?????????? ?? ??????. ??? ???????? ? ???????????, ????????? ???????
+??? ?? ?????? ???????? <a href="http://www.mag-heut.net">www.mag-heut.net</a> ?
+???????? ?????????? ?? ??????. ??? ???????? ? ???????????, ????????? ???????
 ??? ??????????.
 </p><p>
-???? ??? ????? ????????? ?????????? ?? ???????, ???, ????????, ???? ?? ??????
+???? ??? ????? ????????? ?????????? ?? ???????, ????????, ???? ?? ??????
 ???????? ???????, ?????????? ? <a href="$$refman$$">?????????? ???????????</a>. 
 ??????, ??? ????? ??? ????? ????? ??? ???????.
 </p><p>
-???? ?? ?????? ?????? ??? ???????, ???????? Enigma
-Wiki ?? <a href="$$wiki$$" >$$wiki$$</a>.</p>
+???? ?? ?????? ?????? ??? ???????, ???????? Enigma Wiki ??
+<a href="$$wiki$$" >$$wiki$$</a>.</p>
 
 
 <h4><a name="s3q5">? ?? ???? ?????? [?????????? ????? ???????]!</a></h4>
 <p>?? ????????????. ?????????? ???? ???????, ????? ?????? ??????? ???? ????????? 
 ????? ??????.
 </p><p>
-? ??????????? ???? ????????? ????????? ? ??? ????????? ?? <a
+? ??????????? ???? ????????? ????????? ? ??? ????????? ?? <a
 href="http://www.mag-heut.net/blackball/index.php"
 >http://www.mag-heut.net/</a>.</p>
 
 
-<h4><a name="s3q6">? ?? ???? ?????? ?? ???? ??????? ? ???????????/???????????/???????/&#8230;.</a></h4>
-<p>??? ?????? ?????? ?? ???????, ??????? ??? ?? ????????.
-? ?????????, ?????? ?? ?????????? ???? ?? ????????? ??? 
-??????; ????? ??? ??????? ??????? ??? ????-?? ?????????, ???? ?? ?????? ???????? ?? 
-????? ??? ??????.
+<h4><a name="s3q6">? ?? ???? ?????? ?? ???? ??????? ?
+???????????/???????????/???????/&#8230;.</a></h4>
+<p>??? ?????? ?????? ?? ???????, ??????? ??? ?? ????????. ? ?????????, ?????? ??
+?????????? ???? ?? ????????? ??? ??????; ????? ??? ??????? ??????? ??? ????-??
+?????????, ???? ?? ?????? ???????? ?? ????? ??? ??????.
 </p><p>
 ?? ?????? ?? ???, ????????? ???? ???????????? ????????? ??????.
-?????? ??????? ?? ?? ????? ??????? ?? ??????????? ??????? ??????? ????????? ????? ??????????? ??????.
-?? ?? ?????????? ????????? ??????????? ????? ???????, ??????? ??? ???????? ??????!
-????? ?????? ???????????, ???????? ????? 2 ??????????? ???????????. ????? ?????, ?? ???? ?????? 
-?????????? ??? ????? ????? ??????? ?? mag-heut.net.</p>
+?????? ??????? ?? ?? ????? ??????? ?? ??????????? ??????? ??????? ?????????
+????? ??????????? ??????. ?? ?? ?????????? ????????? ??????????? ????? ???????,
+??????? ??? ???????? ??????! ????? ?????? ???????????, ???????? ????? 2
+??????????? ???????????. ????? ?????, ?? ???? ?????? ?????????? ??? ????? ?????
+??????? ?? mag-heut.net.</p>
 
 
-<h4><a name="s3q7">? ??????, ??? Enigma ??????? ?????? ??? ????, ??? ???????? ????, ??
-    ??? ??????????.</a></h4>
-<p>????????????, ??????????? ??????????? ? ????????? ?????? ???????? ?? ?????????????? ???????.
-???????? ???????, ??????? ??? ???????? ? ???????? ??? ??? ??? ?????????????? ??????????????? ???, 
-???????? ????? <a href="http://www.mag-heut.net/blackball/index.php"
->http://www.mag-heut.net/</a>.</p>
+<h4><a name="s3q7">? ??????, ??? Enigma ??????? ?????? ??? ????, ??? ????????
+????, ?? ??? ??????????.</a></h4>
+<p>????????????, ??????????? ??????????? ? ????????? ?????? ???????? ??
+?????????????? ???????. ???????? ???????, ??????? ??? ???????? ? ???????? ???
+??? ??? ?????????????? ??????????????? ???, ???????? ?????
+<a href="http://www.mag-heut.net/blackball/index.php">http://www.mag-heut.net/</a>.</p>
 
 
-<h4><a name="s3q8">? ???? ?????? ??? ? ??????! ???? ?? ?????? ???????? 
-    ??? ???????? ??????, ??? ???????????</a></h4>
+<h4><a name="s3q8">? ???? ?????? ??? ? ??????! ???? ?? ?????? ???????? ???
+???????? ??????, ??? ???????????</a></h4>
 <p>???? ?? ?????? &quot;?? ??????&quot; ????????? ???????, ????????? ? ???? ???????,
-??????? ?? ???? (?? ?????????!) ? ??????? &quot;u&quot;.
+???????? ?? ???? ?????? (?? ?????????!) ? ??????? &quot;u&quot;.
 </p><p>
 ???? ?? ?????? ???????? ??? ???? ?????????? (?? ????????????? ????? ???????),
-?? ??????? ???? &quot;enigma.score&quot;. ?? ????? ?????? 
-?????????????/??????? ??? ?????? ???? ??????????? ?????? 0.92
-(&quot;enigmarc.lua2&quot;). ?????????? ?????? ? ????, ??? ???????? &quot;enigma.score&quot;
-?????? ????? ????? ??????? ? ???? ?????? ?????? ???????!</p>
+?? ??????? ???? &quot;enigma.score&quot;. ?? ????? ?????? ?????????????/???????
+??? ?????? ???? ??????????? ?????? 0.92 (&quot;enigmarc.lua2&quot;). ??????????,
+?????? ? ????, ??? ???????? &quot;enigma.score&quot; ??????, ????? ????? ???????,
+? ???? ?????? ?????? ???????!</p>
 
 
 <h4><a name="s3q9">? ????? ???????, ? ???? ?????? ??? ?????; ?? ????? ??? ?? ???.
     ??? ??? ??? ??????</a></h4>
-<p>?? ??????? ???????? ??? ??? ?????? ????? ???????? ?? ??????
-&quot;?????&quot; ? ???? ??????? ???????, ? ??????? ???.
+<p>?? ??????? ???????? ??? ??? ?????? ????? ???????? ?? ?????? &quot;?????&quot;
+? ???? ??????? ???????, ? ??????? ???.
 </p><p>
-????? ????, ?? ?????? ???????? ? ?????? ??????? &quot;History&quot;,
-??????? ?? ?????? ????? ? ?????? ??????? &quot;User&quot; (????????? ? 
-???? ??????? ???????, ???????? ????? &quot;User&quot;, ? ????? 
-&quot;History&quot; ??????). ????? ??? ?????? ?? ??????? ?? ??????? ??????, ? ??????????????? ???????.
+????? ????, ?? ?????? ???????? ? ?????? ??????? &quot;History&quot;, ??????? ??
+?????? ????? ? ?????? ??????? &quot;User&quot; (????????? ? ???? ??????? ???????,
+???????? ????? &quot;User&quot;, ? ????? &quot;History&quot; ??????). ????? ???
+?????? ?? ??????? ?? ??????? ??????, ? ??????????????? ???????.
 </p><p>
-?????? ?????, ??? ??????? ?????? ?? ?????? ????? ???????, ? ??????? ?? ?????? ???????.
-???? ?? ????? ???? ????? ???????, ?? ?????? ????? ?? ???????? ?????????? ?? ??????
-(?????? ?????? ??????? ?? ??? ? ???? ???????).
-???????? ?????? &quot;???? ??????&quot;. ??? ????? ??????? ??? ?? ?????, 
-? ????? ?????? ??????? ?????? ?????? ???????.</p>
+?????? ?????, ??? ?? ???? ?????? ?? ?????? ????? ???????, ?? ???????? ?? ?????????
+???????. ???? ?? ????? ???? ????? ???????, ?? ?????? ????? ?? ???????? ??????????
+?? ?????? (???????? ?? ??? ? ???? ??????? ?????? ???????). ???????? ??????
+&quot;???? ??????&quot;. ??? ????? ??????? ??? ?? ?????, ? ????? ?????? ???????
+?????? ?????? ???????.</p>
 
 
 <h4><a name="s3q10">??? ? ???? ???????? ???? ? ????? ?????????</a></h4>
-<p>???????? <a href="$$support$$#score">?????</a> ?????? &quot;??????????? ???????????&quot;
-??? ?????? 4.3 (&quot;??????????? ???????????&quot;) <a
+<p>???????? <a href="$$support$$#score">?????</a> ?????? &quot;???????????
+???????????&quot; ??? ?????? 4.3 (&quot;??????????? ???????????&quot;) <a
 href="$$manual$$">???????????</a>.</p>
 
 
-<h4><a name="s3q11">????? ?? ???????? ??????????, ??????? ???? ???????? ? ?????? 0.92?</a></h4>
+<h4><a name="s3q11">????? ?? ???????? ??????????, ??????? ???? ???????? ? ??????
+0.92?</a></h4>
 <p>??. ??? ??????????, ??????? ???????????? ? ???????? ?????? 1.00 ?? ????? 
-??????????? ? ??????????. ?? ?????? ???????? ????????? ??????? ??????????? ?? ?????? ??????
-? ???? ???????. ???? ?? ????? ?????? ???? ??????? ? ??????
+??????????? ? ??????????. ?? ?????? ???????? ????????? ??????? ??????????? ??
+?????? ?????? ? ???? ???????. ???? ?? ????? ?????? ???? ??????? ? ??????
 1.00 ??? ????? ????????? ? ????????? ??? ????? ?????.</p>
 
 
-<h4><a name="s3q12">????????? ?? ??????? ???????? ??????? ???????????? - ??? ?? ??????????????</a></h4>
+<h4><a name="s3q12">????????? ?? ??????? ???????? ??????? ???????????? &mdash;
+??? ?? ??????????????</a></h4>
 <p>????? ???? ????????? ??????? ?? ???????, ?? ???????????????? ????????.
 ? ????????? ??????? ?????????????? ???????. ?? ? ??? ??? ????????, ??? ???-??
 ????????? ??????????. ????????? ?? ????? ?????????????
 <a href="http://www.mag-heut.net/blackball/index.php" >http://www.mag-heut.net/</a>.
-?????? &quot;????????????????&quot; ?????? ????? ???????? ???
-? ???? ???? ????????? ???????.</p>
+?????? &quot;????????????????&quot; ?????? ????? ???????? ??? ? ???? ????
+????????? ???????.</p>
 
 
-<h4><a name="s3q13">? ???????? ??????? ?????? ??? ??????. ????? ???????????? Enigma ?? ?????!</a></h4>
-<p>??? ????????? ?????? ??? ???????? ??? ??. ?? ?? ?????? ?????????? ?? ???????????? ? ???????
-???????? ?? ????? ????. ???? ?? ?????????? ??????????? &quot;????????? ???????&quot; 
-? &quot;????&quot; Enigma ?????????????? ??? ? ????? ????? ????????? ?????? ??????????? ?????????? ? ??????? ????????. 
+<h4><a name="s3q13">? ???????? ??????? ?????? ??? ??????. ????? ????????????
+Enigma ?? ?????!</a></h4>
+<p>??? ????????? ?????? ??? ???????? ??? ??. ?? ?? ?????? ?????????? ??
+???????????? ? ??????? ???????? ?? ????? ????. ???? ?? ?????????? ???????????
+&quot;????????? ???????&quot; ? &quot;????&quot; Enigma ?????????????? ??? ?
+????? ????? ????????? ?????? ??????????? ?????????? ? ??????? ????????.
 ????????, ?? ???-?? ?????? ??? ?????? ??? ??????? ??????.</p>
 
 
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section4">?????????? Enigma</a>
 </h3>
 
@@ -401,7 +422,7 @@
 ?????? ??????? ??????? ??? ? ?????????? ;-)
 ??? ??? ???????? ? ??? ???????????</li>
 
-<li>??? ?? ?????? ?????????? ?? Enigma! ??????????? ????? Enigma
+<li>??? ?? ?????? ?????????? ?? Enigma! ??????????? ????? Enigma
 ??????? ? ???????? ??? ?? ?????? ?????.</li>
 
 <li>?????????? ??? ????????? ?? ???????!</li>
@@ -412,23 +433,25 @@
 ?? <a href="http://www.mag-heut.net/blackball/index.php"
 >http://www.mag-heut.net/</a>; ????????: &quot;??? ??? ???????? ??????? ??? Enigma?&quot;</li>
 
-<li>?? ?????? ????????? Enigma ?? ?????? ?????. ????? ????? ??? ?????? ? Enigma ???? ??????????
-(??????? ?????? ???????, ???????????, ???????? ???????? ? ???? FAQ!), ????? ??????? ????????.</li>
+<li>?? ?????? ????????? Enigma ?? ?????? ?????. ????? ????? ??? ?????? ? Enigma
+???? ?????????? (??????? ?????? ???????, ???????????, ???????? ???????? ? ????
+FAQ!), ????? ??????? ????????.</li>
 
-<li>?? ?????? ??????????? ?? ?????? ???????? ??? ????????????? ? ???????? ?????????????
-? ??????? ???????? ????????, ???????? ? ?????????? Enigma.</li>
+<li>?? ?????? ??????????? ?? ?????? ???????? ??? ????????????? ? ????????
+????????????? ? ??????? ???????? ????????, ???????? ? ?????????? Enigma.</li>
 
-<li>?? ????? ??????: ???? ?? ?????? ???????????????, ?????? ???????
-??? ???????? ????? ? ?????? ????????? ??????? ??????? 
-????????????? ???????, ?? ??????? ?????? ? ???? ???????!
-?????????? ???????? ?????? ? <a href="mailto:enigma-devel at nongnu.org"
->enigma-devel at nongnu.org</a>, ? ??????? ??????? ? ??? ?? ?????????????? ? ??? ?????? ??????.
-? <a href="$$development$$#tasks" >??????? ??? ?????????????</a> ???? ????????? ????.</li>
+<li>?? ????? ??????: ???? ?? ?????? ???????????????, ?????? ??????? ??? ????????
+????? ? ?????? ????????? ??????? ??????? ????????????? ???????, ?? ???????
+?????? ? ???? ???????! ??????????, ???????? ?????? ?
+<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>, ? ???????
+??????? ? ??? ?? ?????????????? ? ??? ?????? ??????.
+? <a href="$$development$$#tasks" >??????? ??? ?????????????</a> ???? ?????????
+????.</li>
 </ul>
 
 
 <h4><a name="s4q2">???? ? ??????????????? ??? ????????????</a></h4>
-<p>?? ???????? ??? ???? &#8230; ?????, ?? ????? ???? ?? ?????? ????????? ? ???, 
+<p>?? ???????? ??? ???? &hellip; ?? ????? ???? ?? ?????? ????????? ? ???, 
 ????? ?? ??????? ??? ? ????????, ?????????????? <a href="#s4q1">????</a>.</p>
 
 
@@ -436,78 +459,83 @@
 <p>???????? <a href="$$refman$$">?????????? ???????????</a>, ???????? <a
 href="http://www.mag-heut.net" >mag-heut.net</a>, ??? ??????? 
 ???????????? ??????; ??? ??????????? ? ?????????????? &quot;data/levels/&#8727;&quot;
-?????? ???? ?????????. ?? <a href="$$wiki$$" >$$wiki$$</a> ?? ????? ?????? ????? Enigma Wiki.
-</p><p>
+?????? ???? ?????????. ?? <a href="$$wiki$$" >$$wiki$$</a> ?? ????? ?????? ?????
+Enigma Wiki.</p>
+<p>
 ???? ??? ??? ??????? ?????? ??????? ???? ???????, ??????????????? ?????
-?? mag-heut.net - ??? ????? ?????????? ???? ???? ? 
+?? mag-heut.net &mdash; ??? ????? ?????????? ???? ???? ? 
 ????????? ???????!</p>
 
 
 <h4><a name="s4q4">???? ?? ???????? ??? Enigma?</a></h4>
-<p>? ?? ? ???. ??? ?????? ?????? Enigma ???? ????????? ?????????
-Star.LUA ? BlackballEd. ??????, Enigma ?????????? ???????????
-? ?? ?????? ?????? (???.2007) ??? ????????? ?????? ?? ?????????? ? 
-Enigma 1.00. ?? ?????? ???????????? ?? ??? ???????? ????? 
-?????? ???????? ??????, ?? ??? ??? ????????? ?????????? ? ?????, ????? ??????? ??? ???????????.
+<p>? ??, ? ???. ??? ?????? ?????? Enigma ???? ????????? ????????? Star.LUA ?
+BlackballEd. ??????, Enigma ?????????? ??????????? ? ?? ?????? ?????? (???.2007)
+??? ????????? ?????? ?? ?????????? ? Enigma 1.00. ?? ?????? ???????????? ?? ???
+???????? ???????? ?????? ???????? ??????, ?? ??? ??? ????????? ?????????? ?
+?????, ????? ??????? ??? ???????????.</p>
+<p>
+BBE ? Star.LUA ????????????? ?????? ??? Windows ? Linux. ??? ?????????????
+Mac-?? ?????????? ???? ???.
 </p><p>
-BBE ? Star.LUA ????????????? ?????? ??? Windows ? Linux.
-??? ????????????? Mac-?? ?????????? ???? ???.
-</p><p>
-???????? <a href="http://blackballed.sourceforge.net/" >http://blackballed.sourceforge.net/</a> ?
+?????????? <a href="http://blackballed.sourceforge.net/" >http://blackballed.sourceforge.net/</a> ?
 <a href="http://www.capkoh.narod.ru/SL_MainPage.html" >http://www.capkoh.narod.ru/SL_MainPage.html</a>.</p>
 
 
 <h4><a name="s4q5">? ?????? ????? ??????. ?? ?????? ???????? ?? ? Enigma?</a></h4>
-<p>??, ??????? ?????. ?????????? ???????? email ? enigma-devel, ???? ? ??? ????
-??????, ???????? ?? ?????? ?????????? ? ??????????. ? ?????? ???????? ???? ??????????? ?? ?????? ????????? - 300 ??, 
-??????? ?????????? ????????????, ????? ??? ??? ???????? ???? ?????? ??????????.
+<p>??, ??????? ?????. ??????????, ???????? email ? enigma-devel, ???? ? ??? ????
+??????, ???????? ?? ?????? ?????????? ? ??????????. ? ?????? ???????? ????
+??????????? ?? ?????? ????????? &mdash; 300 ??, ???????, ??????????, ????????????,
+????? ??? ??? ???????? ???? ?????? ??????????.
 </p><p>
-?????? ? ????, ??? ?? ? ???????? ???????????? ?????? ?? ??????, ???????? ??????? ????? ?? ??? 
-????? ??????????, ??? ? ????????? ????? Enigma.</p>
+?????? ? ????, ??? ?? ? ???????? ???????????? ?????? ?? ??????, ???????? ???????
+????? ?? ??? ????? ????????, ??? ? ????????? ????? Enigma.</p>
 
 
-<h4><a name="s4q6">? ???? ???????????? ?????? ? ???? ????? ??????, ?? ?? ???? ??? ?? ??????????.</a></h4>
+<h4><a name="s4q6">? ???? ???????????? ?????? ? ???? ????? ??????, ?? ?? ????
+??? ?? ??????????.</a></h4>
 <p>???????? Enigma Wiki
-<a href="$$wiki$$" >$$wiki$$</a> ??? ?????????? ??????? ? ??????? ?? ????.</p>
+<a href="$$wiki$$" >$$wiki$$</a> ??? ?????????? ???????, ? ??????? ?? ????.</p>
 
 
 <h4><a name="s4q7">??? ??? ??????? Enigma ???/??? Windows?</a></h4>
-<p>?????? ?????? Enigma ??? Windows ??????? ???????, ??? ?????? 
-??? Unix. ???????? ?????????? Enigma ????????? ? Linux,
-??????? ??????? ?????? ????????????? ?????? ??? ????.
-</p><p>
-??????????? ?????? Enigma ??? Windows ?? ????? ???? ?????? ?? ?????? ? Linux,
-? ?????????????? MinGW ? ???????? ??????????????????? ???????????. MinGW ????? ???????? ??? ?????? 
-??????????, ??????? ???????? ? Windows, ?? ??? ????? ?????? ??????? ?????????????? ???????????? Unix,
-????? ??????? ????. ?? ??????????? ???????????? ? ???, ??? ??????? Enigma ????????? MinGW, ?????????? 
-?????????? ? ????? doc/README.mingw32.
-</p><p>
-??????? ????????? ????? ??????? Enigma ? ??????? ??????? ?????? 
-VisualStudio, ?? ???? ????? ?? ??????????? ? ???, ????? ????????? ???????? ??? Enigma
-? ??????? ?????????? ????? ???????.</p>
+<p>?????? ?????? Enigma ??? Windows ??????? ???????, ??? ?????? ??? Unix.
+???????? ?????????? Enigma ????????? ? Linux, ??????? ??????? ??????
+????????????? ?????? ??? ????.
+</p>
+<p>??????????? ?????? Enigma ??? Windows ?? ????? ???? ?????? ?? ?????? ? Linux,
+? ?????????????? MinGW ? ???????? ??????????????????? ???????????. MinGW ?????
+???????? ??? ?????? ??????????, ??????? ???????? ? Windows, ?? ??? ????? ??????
+??????? ?????????????? ???????????? Unix, ????? ??????? ????. ??????????
+?????????? ? ???, ??? ??????? Enigma ????????? MinGW, ?? ?????? ????? ? ?????
+doc/README.mingw32.
+</p>
+<p>??????? ????????? ????? ??????? Enigma ? ??????? ??????? ?????? VisualStudio,
+?? ???? ????? ?? ??????????? ? ???, ????? ????????? ???????? ??? Enigma ?
+??????? ?????????? ????? ???????.</p>
 
 
-<h4><a name="s4q8">??? ? ???? ????????????? ??? ?????? ?????? ?? ?????? 0.92/0.81/&#8230; ? 1.00?</a></h4>
-<p>??? ?? ????? ??????? ???????????. ???? ?? ??????????? ??????? ????????? ?? lua, ??? ??????????? ?????,
-??? ???? ?? ?????????? ???????????? xml ?????? ??????.
+<h4><a name="s4q8">??? ? ???? ????????????? ??? ?????? ?????? ?? ??????
+0.92/0.81/&#8230; ? 1.00?</a></h4>
+<p>??? ?? ??? ?? ? ??????. ???? ?? ??????????? ??????? ????????? ?? lua, ???
+??????????? ?????, ??? ???? ?? ?????????? ???????????? xml ?????? ??????.
 </p><p>
-?????? ?????, ??? ????? ??????????? lua ? ?????? 1.00-xml.
-?? ?????? ????????? ?? ???? ? <a href="$$refman$$">?????????? ???????????</a>,
-???????? 3.2, 3.3, ? ???????? 3.5. ?????? ????? ????????? ?? 
+?????? ?????, ??? ????? ??????????? lua ? ?????? 1.00-xml. ?? ?????? ?????????
+?? ???? ? <a href="$$refman$$">?????????? ???????????</a>, ???????? 3.2, 3.3, ?,
+????????, 3.5. ?????? ????? ????????? ?? 
 <a href="http://enigma.mal2.ch/index.php?title=XML-Metadaten" >http://enigma.mal2.ch/index.php?title=XML-Metadaten</a>,
 ?? ??? ?? ???????? (???????????).
 </p><p>
-?????, ?? ?????? ??????? ??? ?????? &quot;Require&quot; ???
-&quot;dofile&quot; ?? ???? lua ? ???????? ?? ???????? ?????????
-?? ????? xml, ???????? ?????? 3.3.6, ??????? &quot;???????????&quot;.
+?????, ?? ?????? ??????? ??? ?????? &quot;Require&quot; ??? &quot;dofile&quot;
+?? ???? lua ? ???????? ?? ???????? ????????? ?? ????? xml, ???????? ?????? 3.3.6,
+??????? &quot;dependency&quot;.
 </p><p>
 ???????, ????????? ??????? ??????? ?????? ???? ????????; ? ?????????,
-&quot;fl-ice_001&quot; ?????? ?? ??????????. ???????? ???
-&quot;fl-ice&quot;. ???? ?? ??????????? BBE, ????? ????????? ????????? ?????? ???? ??????????
-???????? &quot;it-magnet&quot;. ????? ?????, ??? ??????? ??? ??????
-???????? ? Enigma. ??????? ??????????? ??? ? ????????? ??? ?? ??? ????? ???????? ?????????.
-???? ? ??? ???????? ???????? ? ?? ?? ?????? ?????? ?? ??????????????
-(?????????? ??????????? ???? ???????? ?????????? ? ?????? ??????? ???????),
+&quot;fl-ice_001&quot; ?????? ?? ??????????. ???????? ??? &quot;fl-ice&quot;.
+???? ?? ??????????? BBE, ????? ????????? ????????? ?????? ???? ??????????,
+????????, &quot;it-magnet&quot;. ????? ?????, ??? ??????? ??? ??????
+???????? ? Enigma. ??????? ??????????? ??? ? ????????? ??? ?? ??? ????? ????????
+?????????. ???? ? ??? ???????? ???????? ? ?? ?? ?????? ?????? ?? ??????????????
+(?????????? ??????????? ???? ???????? ?????????? ? ?????? ??????? ???????),
 ????? ???????? ? <a href="mailto:enigma-devel at nongnu.org"
 >enigma-devel at nongnu.org</a>.
 ?? ????? ????? ???????? ? ????????? ??? ???????.</p>
@@ -515,43 +543,44 @@
 
 <h4><a name="s4q9">? ???? ???? ????? ?? ?????? ????? ???????? Enigma.</a></h4>
 <p>?? ?????? ????? ????? ???? ? ??? ?????. ? Enigma ?????? ???????? ????????? 
-????????. ?????? ????? ?????? ????????????? ????????? ?????????, ????? ???????? ?????? 
-????????? ??????????.</p>
+????????. ?????? ????? ?????? ????????????? ????????? ?????????, ????? ????????
+?????? ????????? ??????????.</p>
 <ul>
-<li>?? ?????? ????????? ????? ???????, ??????? ??? ?? ??????? ??????? ?????????</li>
+<li>?? ?????? ????????? ????? ???????, ??????? ??? ?? ??????? ??????? ?????????</li>
 <li>?? ?????? ?????? ??????????? ? ??????????? ?? ???????? ????????? ????? ???????</li>
-<li>?? ?????? ???? ????? ????????? ? ????? ????????? ?? ???? ????????? ???????????? ????????</li>
+<li>?? ?????? ???? ????? ????????? ? ????? ????????? ?? ???? ????????? ???????????? ????????</li>
 </ul>
 <p>
-??????? ??? ????? ???????????, ??? ?? C++ ?, ????????, ?????? ?????. ??? ?????? ?? ??????? 
-?????????? ?? ???????? ????, ??? ??????? ?? ?????? ? ??????? ???? ???????????.</p>
+??????? ??? ????? ???????????, ??? ?? C++ ?, ????????, ?????? ?????. ??? ??????
+?? ??????? ?????????? ?? ???????? ????, ??? ??????? ?? ?????? ? ??????? ????
+???????????.</p>
 
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section5">????????? ????? ? ????????</a>
 </h3>
 
 
 <h4><a name="s5q1">???? ? ????????? ????? Enigma ???? ????????</a></h4>
-<p>??! ?????????? ??? ? ???????. ??? ????? ?? ?????? ?? ?????? ????????.</p>
+<p>??! ??????????, ??? ? ???????. ??? ????? ?? ?????? ?? ?????? ????????.</p>
 
 
-<h4><a name="s5q2">???? ? ???????? Enigma ? ???? ???????????? ??????? ???? ?? ?????? ???????????? ???
-    ?????? ?????????
+<h4><a name="s5q2">???? ? ???????? Enigma ? ???? ???????????? ??????? ???? ??
+?????? ???????????? ??? ?????? ?????????
 </a></h4>
-<p>?? ?????? ?????? ??????????? ???????? <a href="$$gpl$$">GPL</a>, ??????? ????????? ???
-???? ????????? Enigma ??? ???????????? ????????. ?? ????????? ???? ???????? ???????? ?? ?? ????? ???? ????-???? ?????? ???????.
-?????????? ???????? ????? ???????, ?????????? ?? GPL
-? ?????? ????????????. ???? ?? ?? ??????? ? GPL
+<p>?? ?????? ?????? ??????????? ???????? <a href="$$gpl$$">GPL</a>, ???????
+????????? ??? ???? ????????? Enigma ??? ???????????? ????????. ?? ????????? ????
+???????? ???????? ?? ?? ????? ???? ????-???? ?????? ???????. ??????????, ????????
+????? ???????, ?????????? ?? GPL ? ?????? ????????????. ???? ?? ?? ??????? ? GPL
 <a href="http://en.wikipedia.org/wiki/GNU_General_Public_License">Wikipedia</a>
 ????? ???? ????????? ????????????? ?? ???????? ???????????? ? ?????? GPL.</p>
 
-<p>?? ?????????????? ? ??????????????? Enigma. ?????????? ????? ??? ????? 
-? ?? ???? ????????? ?????? ?? ???? ????????. ???? ?? ??????????????? Enigma ??? ?????? 
-?????? ?? Enigma ? ???????? ???????? ?? ????? ???? ?????????(????????) ????????
-????????? ?????.</p>
+<p>?? ?????????????? ? ??????????????? Enigma. ??????????, ????? ??? ????? 
+? ?? ???? ????????? ?????? ?? ???? ????????. ???? ?? ??????????????? Enigma ???
+?????? ?????? ?? Enigma ? ???????? ???????? ?? ????? ???? ?????????(????????)
+???????? ????????? ?????.</p>
 
 
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section6">?????????</a>
 </h3>
 
@@ -574,14 +603,16 @@
 <a href="$$wiki$$">Wiki</a> ????????? ? ?????????? ??????????? 
 ??? ??????? ??????, ?????????????? ?????????????? Enigma ??? ?? ????????.</p>
 
-<p>???????? ???????? ??? ??? ????????????? Savannah. ?? ??? ???????????? ??? ???????????
-??????????. ??????? ?? ??????????????? ????? <a href="http://enigma-game.org">enigma-game.org</a>,
-??????? ???????? ?????? ?????????????? ? ??????? ??? ???????????? ????? ??? ???????? ???????????, ??????
-??????? ???? ? ??????. ?????? ????? ?????????????? ??? ?? Savannah, ? ?? 
+<p>???????? ???????? ??? ??? ????????????? Savannah. ?? ??? ???????????? ???
+??????????? ??????????. ??????? ?? ??????????????? ?????
+<a href="http://enigma-game.org">enigma-game.org</a>, ???????, ????????, ?????
+?????????????? ? ??????? ??? ????? ???????????? ?????, ??? ???????? ???????????,
+?????? ??????? ???? ? ??????. ?????? ????? ?????????????? ??? ?? Savannah, ? ?? 
 ?????????? ?? ????? ?????? ?????? ???????? ??????.</p>
 
 
-<h4><a name="s6q1">?????????? ?? ???-?? ????????? ??????? Enigma ??? ?????? Enigma?</a></h4>
+<h4><a name="s6q1">?????????? ?? ???-?? ????????? ??????? Enigma ??? ??????
+Enigma?</a></h4>
 <p>???? ???, ?? ????? ???? ?? ?????? ???????????? ????? ?????????</p>
 
 <h4><a name="s6q2">???? ?? ??????? ?????</a></h4>
@@ -596,18 +627,20 @@
 >http://ozone.game-host.org/wiki/index.php?title=Main_Page</a>
 </p><p>
 ???????, ???? Mulg, ???? ????????? Oxyd&#174; ??? Palms, ? ????? ??? 370
-????????, ?????????? ?? Java ?????????? ??????? ? ???????????? ???????????? ?????? ???????!
-???????? <a href="http://www.harbaum.org/till/palm/mulg/"
-> http://www.harbaum.org/till/palm/mulg/</a>.</p>
+????????, ?????????? ?? Java ?????????? ??????? ? ???????????? ????????????
+?????? ???????!
+???????? <a href="http://www.harbaum.org/till/palm/mulg/">
+http://www.harbaum.org/till/palm/mulg/</a>.</p>
 
 
 <h4><a name="s6q3">??? ?? ??????? ?? ?????? ????? Oxyd&#174;?</a></h4>
-<p>???????????? ????? Oxyd&#174; ?? Meinolf Schneider (?? Dongleware) ???????? ????????????
-??? Enigma, ? ?????????? ?????? ?????? ??? ?? ??????????.
+<p>???????????? ????? Oxyd&#174; ?? Meinolf Schneider (?? Dongleware) ????????
+???????????? ??? Enigma, ? ?????????? ?????? ?????? ??? ?? ??????????.
 ???? ?? ??????, ?? ???????? ?? ????, ? ????? ?? ??? ?????????? ???????:
-Oxyd&#174; Extra v2.0 (<a href="http://www.oxyd-game.com" >www.oxyd-game.com</a>) ?? Jens Duttke.
+Oxyd&#174; Extra v2.0 (<a href="http://www.oxyd-game.com" >www.oxyd-game.com</a>)
+?? Jens Duttke.
 </p><p>
 ??????, Enigma ? ??? ??? ?????????. ??? ??????? ???? ?? ?????? ?????? ??? 
-? ????????? ?? ? ??????????? ???????, ????????? &quot;Enigris&quot;.
-? ??? ??? ??? ??????????? ????? ????? ???????? ? ??????? ????; ? ??? ?????????? ???? &#8230;</p>
+? ????????? ?? ? ??????????? ???????, ????????? &quot;Enigris&quot;. ? ??? ???
+??? ??????????? ????? ????? ???????? ? ??????? ????; ? ??? ?????????? ???? &hellip;</p>
 </div>

Modified: homepage/input/faq_questions_ru.html
===================================================================
--- homepage/input/faq_questions_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/faq_questions_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,5 +1,5 @@
 <div class="faq">
-<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$faq$$#faq_core"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 <a name="section_questions">?????? ????????</a></h3>
 
 <ul>
@@ -10,19 +10,21 @@
     ?????? ?? ???????? ??? ????????? ????????.</a></li>
 
     <li><a href="$$faq$$#s1q2">
-    ? ?????? ???? ??? ????????? Enigma, ?? ??? ?????????? ?? ???????!</a></li>
+    ? ?????? ???? ??? ????????? Enigma, ?? ??? ?????????? ?? ?????? ?? ????!</a></li>
 
     <li><a href="$$faq$$#s1q3">
     ??? ? ???? ???????? Enigma?</a></li>
 
     <li><a href="$$faq$$#s1q4">
-    ??? ??? ?? ????-?????????? ???????????/??????? ??? ?? ??? ??? ?? ???? ?? ???????????!</a></li>
+    ??? ??? ?? ????-?????????? ???????????/??????? ??? ?? ??? ??? ?? ???? ??
+    ???????????!</a></li>
 
     <li><a href="$$faq$$#s1q5">
-    ??? ??? ?? ????-?????????? ???????????/??????? ? ?? ????, ????? ?????????? ??? ?????? ???????? ? ????????!</a></li>
+    ??? ??? ?? ????-?????????? ???????????/??????? ? ?? ????, ????? ??????????
+    ??? ?????? ???????? ? ????????!</a></li>
 
     <li><a href="$$faq$$#s1q6">
-    ? ????????? ? ????? ??????? ??? Enigma ? ???? ??????? ?? ??? &#8230;</a></li>
+    ? ????????? ? ????? ??????? ??? Enigma ? ???? ??????? ?? ??? &hellip;</a></li>
 
     <li><a href="$$faq$$#s1q7">
     ??? ? ???? ??????? ?? ??????? ???????? ????? ?????????</a></li>
@@ -30,15 +32,15 @@
 </ul><li><a href="$$faq$$#section2" name="index_section2">?????? Enigma</a><ul>
 
     <li><a href="$$faq$$#s2q1">
-    ?????? ??? ????? ?????????? ??????, ?? ????? Enigma ????? ????????, ???
+    ?????? ??? ????? ?????????? ??????, ?? ????? Enigma ????? ????????, ???
     ????? ?????? ?? ??????????</a></li>
 
     <li><a href="$$faq$$#s2q2">
-    Enigma ?? ???????????, ??? ?????? ????????? ?????????
+    Enigma ?? ???????????, ??? ?????? ????????? ?????????
     &quot;mismatch of state.xml and enigma.score&quot;.</a></li>
 
     <li><a href="$$faq$$#s2q3">
-    Enigma ?? ???????????, ??? ?????? ????????? ?????????
+    Enigma ?? ???????????, ??? ?????? ????????? ?????????
     &quot;Datatype error: Type: invalid data type Value exception, Message:
     Value '44734' must be less than or equal to maxinclusive '32767'&quot;.
     (???????? ????? ??????????.)</a></li>
@@ -52,8 +54,8 @@
     ?? ???????? &quot;Keylogger found&quot;.</a></li>
 
     <li><a href="$$faq$$#s2q10">
-    ? ????????? Linux. ?? ????? ???? ? Enigma, xmms (??? ????? ?????? ??????????? ?????????????) ?? ????????
-    ??? ??? ????? ? Enigma.</a></li>
+    ? ????????? Linux. ?? ????? ???? ? Enigma, xmms (??? ????? ??????
+    ??????????? ?????????????) ?? ???????? ??? ??? ????? ? Enigma.</a></li>
 
     <li><a href="$$faq$$#s2q4">
     ??????, ????? ? ??????? ????? ???????, ??????????? ??????????? ??? ??????</a></li>
@@ -62,7 +64,7 @@
     ??? ????????? ????? enigma.score ? state.xml?</a></li>
 
     <li><a href="$$faq$$#s2q6">
-    ? ????? ??????!</a></li>
+    ? ????? ??????!</a></li>
 
     <li><a href="$$faq$$#s2q7">
     ? ??????? ? ?????? ????????, ?? ??? ?? ???????? :-(</a></li>
@@ -86,15 +88,15 @@
     ? ?? ???? ?????? [?????????? ????? ???????]!</a></li>
 
     <li><a href="$$faq$$#s3q6">
-    ? ?? ???? ?????? ?? ???? ??????? ? ???????????/???????????/???????/&#8230;.</a></li>
+    ? ?? ???? ?????? ?? ???? ??????? ? ???????????/???????????/???????/&hellip;.</a></li>
 
     <li><a href="$$faq$$#s3q7">
     ? ?????? Enigma, ??? ??????? ?????? ??? ????, ??? ???????? ????, ??
     ??? ??????????.</a></li>
 
     <li><a href="$$faq$$#s3q8">
-    ? ???? ?????? ??? ? ??????! ???? ?? ?????? ???????? 
-    ??? ???????? ??????, ??? ???????????</a></li>
+    ? ???? ?????? ??? ? ??????! ???? ?? ?????? ???????? 
+    ??? ???????? ??????, ??? ???????????</a></li>
 
     <li><a href="$$faq$$#s3q9">
     ? ????? ???????, ? ???? ?????? ??? ?????; ?? ????? ??? ?? ???.
@@ -107,7 +109,7 @@
     ????? ?? ???????? ??????????, ??????? ???? ???????? ? ?????? 0.92?</a></li>
 
     <li><a href="$$faq$$#s3q12">
-    ????????? ?? ??????? ???????? ??????? ???????????? - ??? ?? ??????????????</a></li>
+    ????????? ?? ??????? ???????? ??????? ???????????? &mdash; ??? ?? ??????????????</a></li>
 
     <li><a href="$$faq$$#s3q13">
     ? ???????? ??????? ?????? ??? ??????. ????? ???????????? Enigma ?? ?????!</a></li>
@@ -130,7 +132,7 @@
     ? ?????? ????? ??????. ?? ?????? ???????? ?? ? Enigma?</a></li>
 
     <li><a href="$$faq$$#s4q6">
-    ? ???? ???????????? ?????? ? ???? ????? ??????, ?? ?? ???? ??? ?? ??????????.</a></li>
+    ? ???? ???????????? ?????? ? ???? ????? ??????, ?? ?? ???? ??? ?? ??????????.</a></li>
 
     <li><a href="$$faq$$#s4q7">
     ??? ??? ??????? Enigma ???/??? Windows?</a></li>

Modified: homepage/input/features_ru.html
===================================================================
--- homepage/input/features_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/features_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,4 +1,4 @@
-<h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 ???????? ???????????</h3>
 
 <ul>
@@ -21,9 +21,10 @@
 <li>2D ??????? ? ??????? ??????????.</li>
 <li>???????????? ????????? ??????.</li>
 <li>????? 500 ????????? ??????? ????????.</li>
-<li>???????? ??? ???? ?????? Windows, Mac OSX, ??????????? ????????????? Linux, ????????? ?????? ?????? Unix.</li>
+<li>???????? ??? ???? ?????? Windows, Mac OSX, ??????????? ????????????? Linux,
+????????? ?????? ?????? Unix.</li>
 <li>????????? <a href="$$gpl$$">????????</a>!</li>
 </ul>
 
-<p>?? ????? ????????? ??????????? ?? ???????????? ?????????? ?????????? ? ??????? <a
-href="$$support$$#documentation">????????????</a>.</p>
+<p>?? ????? ????????? ??????????? ?? ????????????, ??????????, ?????????? ?
+??????? <a href="$$support$$#documentation">????????????</a>.</p>

Modified: homepage/input/impressum_ru.html
===================================================================
--- homepage/input/impressum_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/impressum_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -10,6 +10,8 @@
 <a href="$$disclaimer$$">????????</a></p>
 
 <p>
-The image of the amphora with Theseus and Procrustes depicted on it (article LotM 12/08) is a black-and-white version of a public domain image, available <a href="http://commons.wikimedia.org/wiki/File:Theseus_Prokroustes_Staatliche_Antikensammlungen_2325.jpg">via Wikimedia</a>.
+??????????? ?????? ? ????????????? ?? ??? ?????? ? ?????????? (?????? ?? ??
+12/08) ??? ?????-????? ?????? ?????????????? ???????????, ?????????? ?
+<a href="http://commons.wikimedia.org/wiki/File:Theseus_Prokroustes_Staatliche_Antikensammlungen_2325.jpg">Wikimedia</a>.
 </p>
 

Modified: homepage/input/infobox_ru.html
===================================================================
--- homepage/input/infobox_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/infobox_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,14 +1,15 @@
     <div class="infobody">
        <div class="info">
          <h3>???????????!</h3>
-         <a href="$$marbleous_3$$">?????</a> ????? ???????? ? ????????? ????????????
-	  ?????? &quot;???????&quot;, ? ??? ????? ? ????????????!
+         <a href="$$marbleous_3$$">?????</a> ????? ???????? ? ?????????
+	 ???????????? ?????? &quot;???????&quot;, ? ??? ????? ? ????????????!
 	  
          <h3>??????? ????? ????</h3>
          <a href="$$eoya_2008$$"><img src="images/articles/eoya_2008.png"
          alt="????? ????? ???? ??????? ?????" border="0"></a>
          <div class="imagetitle">
-           ?????? ?????? 2008 ???????, ? ??????? ???? 2008 ????????? - ???????, ??? ??????? ??????? <a href="$$eoya_2008$$">?????</a>!
+           ?????? ?????? 2008 ???????, ? ??????? ???? 2008 ????????? - ???????,
+	   ??? ??????? ??????? <a href="$$eoya_2008$$">?????</a>!
          </div>
          
          <h3>??????? ??????</h3>
@@ -39,11 +40,11 @@
          <h3>???????????? PAR ? Hcp</h3>
 	 ?? ????????? ????????? ????? ??????????? ???????????, ?? ??????
 	 ????? ?????????? ???????? PAR ??????????????? ?? ?????????? ?????. ???????
-	 ?????????????, ??????? ?? ?????? ???????, ?????? ?????? ??????? ?? 
-	 ?????????. ????? ???????, ???????? PAR ?????? ????? ????? ?????????????. 
-	 ??? ???????? ??????, ???????? HCP ?????????? ?? ????????? ???????? ??? 
-	 ??????????? ?????????????, ? ??? ?? ?????? ????????? ?? ????????
-	 <a href="$$statistics$$">??????????</a>.
+	 ?????????????, ??????? ?? ?????? ???????, ?????? ?????? ?????? ??
+	 ????????????? ?????????. ????? ???????, ???????? PAR ?????? ????? ?????
+	 ?????????????. ??? ???????? ??????, ???????? HCP ?????????? ?? ?????????
+	 ???????? ??? ??????????? ?????????????, ? ??? ?? ?????? ????????? ??
+	 ???????? <a href="$$statistics$$">??????????</a>.
 
          <h3>??????</h3>
          ???????? ???????, ???????, ????????? ?? ???????, ????????? ?????????.<br>

Modified: homepage/input/introduction_ru.html
===================================================================
--- homepage/input/introduction_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/introduction_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,13 +1,14 @@
-  <p>Enigma ??? ????-???????????, ???????? ?????????? ??? ??????? ????? Oxyd ?? ????????? Atari ST ?
-  Rock'n'Roll ?? ????????? Amiga. ???? ???? ??????? ? ?????? ???????? ??? ?????? Oxyd ??????????? ?????.
-  ???????  ??.  ??????
-  ??????? ???!  ??????? ???????, ???????? ?????????, ???????? ???? ? ?????? ?????
+  <p>Enigma ??? ????-???????????, ???????? ?????????? ??? ??????? ????? Oxyd ??
+  ????????? Atari ST ? Rock'n'Roll ?? ????????? Amiga. ???? ???? ??????? ? ??????
+  ???????? ??? ??????-??????? ??????????? ?????. ???????  ??.  ??????
+  ??????? ???! ??????? ???????, ???????? ?????????, ???????? ???? ? ?????? ?????
   ???????????? ??????????? ???????????, ?????? ????????????? ??? ?????? ???? ?
-  ?????? Oxyd &hellip; ???? ?? ??? ?? ??????? ? Enigma, ?? ?????? ????????? ?? ?????????
-  <a href="$$screenshots$$">??????????</a> ??? ????????? ?
+  ??????-???????&hellip; ???? ?? ??? ?? ??????? ? Enigma, ?? ?????? ????????? ??
+  ????????? <a href="$$screenshots$$">??????????</a> ??? ????????? ?
   <a href="$$manual$$">??????????? ????????????</a>.</p>
 
   <p>Enigma ???????? ??? Windows, Mac OS X, ??????????? ??????????????
   Linux ? ?????? ??????????? Unix'??.</p>
 
-  <p>Enigma ??? ????????? ??????????? ??????????? ? ????? ???????????????? ? ?????????? ?? ???????? <a href="$$gpl$$"> General Public License</a>.</p>
+  <p>Enigma ??? ????????? ??????????? ??????????? ? ????? ???????????????? ?
+  ?????????? ?? ???????? <a href="$$gpl$$"> General Public License</a>.</p>

Added: homepage/input/level_archive_ru.html
===================================================================
--- homepage/input/level_archive_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/level_archive_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -0,0 +1,10 @@
+
+<h2>????? ???????</h2>
+
+<p>
+????? ?? ??????? ??? ?????? ? ????? ?????? ???? ???????? ????????, ??????? ???-??
+??????? ? ????????, ?????????????? ?? ??????????:
+</p>
+
+$$parse_level_archive$$
+

Modified: homepage/input/links_ru.html
===================================================================
--- homepage/input/links_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/links_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,6 +1,6 @@
 <h2>??????</h2>
 
-<h3>???????? ?????? Enigma ?????? ??? ???????? ????????</h3>
+<h3>???????? ?????? Enigma ?????? ???? ???????? ????????</h3>
     <ul>
         <li><a href="http://developer.berlios.de/projects/enigma-game">???????? ??????? Berlios</a></li>
         <li><a href="http://developer.berlios.de/project/showfiles.php?group_id=3972">???????? Berlios</a></li>
@@ -13,7 +13,7 @@
 	</ul>
 	<ul>
         <li><a href="http://www.mag-heut.net">???-????? Enigma</a>
-        - ???-??????????????? ????? ??????????, ????? ???????????? ? Enigma</li>
+        - ???-??????????????? ????? ?????????? ????? ???????????? ? Enigma</li>
         <li><a href="http://www.blackballed.uni.cc">BlackBallEd</a>
         - ???????? ??????? Enigma</li>
         <li><a href="http://www.capkoh.narod.ru/SL_MainPage.html">Star.LUA</a>
@@ -33,7 +33,7 @@
         <li><a href="http://www.opensource-dvd.de/spiele1.htm">Opensource DVD</a>
         - Enigma 1.00 ?? Opensource-CD Games 2.0</li>
         <!-- dead  <li><a href="http://loshawlos.homeip.net/cgi-bin/twiki/view/Enigma/WebHome">Enigma Wiki</a>
-        - A Wiki dedicated to Enigma and Oxyd</li> -->
+        - ???????? Wiki, ??????????? Enigma ? Oxyd</li> -->
     </ul>
 
 <h3>???????? ???????? ?????????? ??????? Enigma</h3>
@@ -46,7 +46,8 @@
         <li><a href="http://www.oxyd-game.com">Oxyd&reg; extra v2.0</a>
         - ?????? ?????????? ????????? ?????? Dongleware Oxyd</li>
         <li><a href="http://www.happypenguin.org/show?OZONE">Ozone</a>
-        - ????, ??????? ?? Enigma, ?? ? ???? ??????????, ? ?????????? ??????? (link to &quot;The Linux Game Tome&quot;)</li>
+        - ????, ??????? ?? Enigma, ?? ? ???? ??????????, ? ?????????? ???????
+	(?????? ?? &quot;The Linux Game Tome&quot;)</li>
         <li><a href="http://www.harbaum.org/till/palm/mulg/">Mulg</a>
         - ????, ??????? ?? Enigma ??? Palm'??, ? ?????????? ???????</li>
     </ul>

Modified: homepage/input/menu_ru.html
===================================================================
--- homepage/input/menu_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/menu_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -18,7 +18,7 @@
             <li><a href="download_ru.html#stable">????????? ?????<br>
               <span class="menusubtitle">?????????? ??????</span></a></li>
             <li><a href="download_ru.html#compilation">??????<br>
-              <span class="menusubtitle">Linux-???????????</span></a></li>
+              <span class="menusubtitle">??????????? ??? Linux</span></a></li>
             <li><a href="download_ru.html#devel">?????? ??????</a></li>
             <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">???????????<br>
               <span class="menusubtitle">???????? ????????? ? ?????? ????? ??????</span></a></li>

Modified: homepage/input/navbar_ru.html
===================================================================
--- homepage/input/navbar_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/navbar_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -8,7 +8,7 @@
       <div class="navenigma">
         <table border="0" cellpadding="0" cellspacing="0">
           <tr>
-            <td><a href="$$index$$"><img src="$$imagedir$$/nav_enigma.gif" alt="Enigma Logo" border="0" title="Enigma Main"></a></td>
+            <td><a href="$$index$$"><img src="$$imagedir$$/nav_enigma.gif" alt="??????? Enigma" border="0" title="??????? ???????? Enigma"></a></td>
           </tr>
         </table>
       </div>
@@ -37,11 +37,11 @@
       <div class="navmain">
       <table border="0" cellpadding="0" cellspacing="0">
         <tr>
-          <td><a href="about_ru.html"><img src="images/nav_about.gif" border="0" width="78" height="48" alt="About" title="????????? ??????????"></a></td>
+          <td><a href="about_ru.html"><img src="images/nav_about.gif" border="0" width="78" height="48" alt="?? ????" title="????????? ??????????"></a></td>
           <td><img src="images/nav_point.gif" border="0" width="16" height="48" alt="."></td>
-          <td><a href="download_ru.html"><img src="images/nav_download.gif" border="0" width="124" height="48" alt="Download" title="????? ?????? ??? ????????"></a></td>
+          <td><a href="download_ru.html"><img src="images/nav_download.gif" border="0" width="124" height="48" alt="????????" title="????? ?????? ??? ????????"></a></td>
           <td><img src="images/nav_point.gif" border="0" width="16" height="48" alt="."></td>
-          <td><a href="support_ru.html"><img src="images/nav_support.gif" border="0" width="106" height="48" alt="Support" title="????????? ????????????"></a></td>
+          <td><a href="support_ru.html"><img src="images/nav_support.gif" border="0" width="106" height="48" alt="?????????" title="????????? ????????????"></a></td>
           <td><img src="images/nav_point.gif" border="0" width="16" height="48" alt="."></td>
           <td><a href="faq_ru.html"><img src="images/nav_faq.gif" border="0" width="48" height="48" alt="FAQ" title="????? ?????????? ???????"></a></td>
         </tr>

Modified: homepage/input/news/news_issue10_ru.html
===================================================================
--- homepage/input/news/news_issue10_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue10_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,5 +2,5 @@
     <span class="date">26 ?????? 2005: </span> ???????? ?? ????? Enigma 0.90! 
 </h3>
   
-<p>??? ??????, ?????????? ????????? ?? <a href="$$download$$">????????
+<p>??? ??????, ??????????, ????????? ?? <a href="$$download$$">????????
 ????????</a>.  ?????? ?????? ???????? ?????!</p>

Modified: homepage/input/news/news_issue11_ru.html
===================================================================
--- homepage/input/news/news_issue11_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue11_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -13,5 +13,5 @@
     <li> ????????? ?????? ??????</li>
     <li> ??????????? ???????? ????????????? ? Oxyd 1 ? Per.Oxyd</li>
     <li> ?????????????? ???? ?????</li>
-    <li> ????????? ?????????? ??????? ??????????</li>
+    <li> ????????? ?????????? ??????? ??????????</li>
 </ul>

Modified: homepage/input/news/news_issue13_ru.html
===================================================================
--- homepage/input/news/news_issue13_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue13_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -4,7 +4,7 @@
 
 <ul>
     <li> ???????? ????????? ???????</li>
-    <li> ?????????? ??????: ??? ?????? ????????</li>
+    <li> ?????????? ??????: ??? ?????? ????????</li>
     <li> ????????? ??????????? ?????? ????????</li>
 </ul>
 <p>???????????!</p>

Modified: homepage/input/news/news_issue15_ru.html
===================================================================
--- homepage/input/news/news_issue15_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue15_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,16 +2,15 @@
     <span class="date">22 ?????? 2006: </span> ???????? ????-?????? Enigma 1.00
 </h3>
 
-<p>????? ???????, ????? ??? ????????, ????????, ? ??? ???????? ? ?????? ????????? ???????? ???????
-    Enigma. ?? ???????? ?? 
-    <a href="$$download$$">???????? ????????</a>. 
-    ????????? ???? ????????? ??????? - ??????? ? ?????????
-    ??? ????? ?????? ???????, ?????????? ???????? ??? ???? ???????, ??????? ?? ??????? 
-    ? <a href="mailto:enigma-devel at nongnu.org">?????? ???????? Enigma</a>
+<p>????? ???????, ????? ??? ????????, ????????, ? ??? ???????? ? ?????? ?????????
+???????? ??????? Enigma. ?? ???????? ?? <a href="$$download$$">???????? ????????</a>. 
+    ????????? ???? ????????? ??????? &mdash; ??????? ? ?????????
+    ??? ????? ?????? ???????, ??????????, ???????? ??? ???? ???????, ??????? ??
+    ??????? ? <a href="mailto:enigma-devel at nongnu.org">?????? ???????? Enigma</a>
 </p>
 
-<p>? ?? ?? ????? ???? ????? ?????? ???? ????? ??????????? ?????????? ? ??????????
-    ?????? ?????? ??????? ????????. ??????????
-    ?????????? ???? ????? ? ???????????? ????? ?????????? ?? ?????? 1.00 ???? ??? ??? ??????? ? 
+<p>? ?? ?? ?????, ???? ????? ?????? ???? ????? ??????????? ?????????? ? ??????????
+    ?????? ?????? ??????? ????????. ??????????, ?????????? ???? ????? ?
+    ???????????? ????? ?????????? ?? ?????? 1.00 ????, ??? ??? ??????? ? 
     <a href="$$support$$#score">??????????? ???????????</a>.
 </p>

Modified: homepage/input/news/news_issue16_ru.html
===================================================================
--- homepage/input/news/news_issue16_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue16_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -19,10 +19,10 @@
     <li> ????????? ?????????????????? ????????</li>
 </ul>
   
-<p>? ?????????????? ?????? 1.00 ?????? ??????? ????????????? ?????? ??????? ? ??????????? ??????? ??????? ????????
-    ????? ?????????????. ??? ?????? ??????? ?? ????? ??????????. ??????????, ??????????? ????? ????????????
-    ????????? ???? ???? ???????????, ??? ??? ??????? ? 
-    <a href="$$support$$#score">??????????? ???????????</a></p>
+<p>? ?????????????? ?????? 1.00 ?????? ??????? ????????????? ?????? ??????? ?
+??????????? ??????? ??????? ???????? ????? ?????????????. ??? ?????? ??????? ??
+????? ??????????. ??????????, ??????????? ????? ???????????? ????????? ???? ????
+???????????, ??? ??? ??????? ? <a href="$$support$$#score">??????????? ???????????</a></p>
   
 <p>??? ?????? ????? ?????? ???????? ?? <a
 href="$$download$$">???????? ????????</a> (<font color="red">???????? Mac OS X!</font>).</p>

Modified: homepage/input/news/news_issue19_ru.html
===================================================================
--- homepage/input/news/news_issue19_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue19_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,7 +2,7 @@
     <span class="date">9 ????? 2007: </span> ????????? ???????? ????????
 </h3>
 
-<p>???????????, ?????? ??? ???????? ???????? ??-???????? ?? ? ????? ???????? ??.
+<p>???????????, ?????? ??? ???????? ???????? ??-???????? ?? ? ????? ???????? ??.
 ????? ?????????:</p>
 
 <ul>

Modified: homepage/input/news/news_issue1_ru.html
===================================================================
--- homepage/input/news/news_issue1_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue1_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -3,7 +3,7 @@
     ????? Enigma 0.70!
 </h3>
 
-<p class="news"> ???????? ?? ?? <a href="$$download$$">???????? ????????</a>.
+<p class="news"> ???????? ?? ?? <a href="$$download$$">???????? ????????</a>.
     ??? ??????? ?????? ????????? ? ???? ???????:</p>
 
 <ul>

Modified: homepage/input/news/news_issue21_ru.html
===================================================================
--- homepage/input/news/news_issue21_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue21_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,13 +2,14 @@
     <span class="date">25 ??? 2007: </span> ???????? Enigma 1.01 <font color="red">???????!</font>
 </h3>
 
-<p>Enigma 1.01 ???????? ??????????? ?????? ? ?????????? ???????, ? ????? ?????????????? ???????????.
+<p>Enigma 1.01 ???????? ??????????? ?????? ? ?????????? ???????, ? ?????
+?????????????? ???????????.
     ??????? ?? ??? ??????, ??????? ???? ?????? ? ???? ???????.
     ?????? ??????????? ? ????????? ???????????:</p>
 
 <ul>
     <li> 60++ ????? ??????? (? ????? ?? ?????? ?????? 1000)</li>
-    <li> ??? ????????? ???????????? ??????? ???????? ?????????? ?????</li>
+    <li> ??? ????????? ???????????? ??????? ???????? ?????????? ?????</li>
     <li> ?????????? ??? ?????? ? ?????????? "????????? ??????"</li>
     <li> ??????? ???????, ??????????? ? ??????? ??????????? ??? ?????? 1.0</li>
     <li> ????????? ??????? ???????, ??????????? ????? ????????</li>
@@ -17,10 +18,10 @@
     <li> ????????? ?????????????????? ????????</li>
 </ul>
   
-<p>????????? ??????? 1.01, ?? ?????? ??????? ??????????? ?????? ??????? ?? ???, ??? ? ?????????? ??????,
-    ? ??????? ????? ???? "???????? ????" ???????. ??????????, ??????????? ????????? ??? ????
-    ??????, ????????? ????? ?????? ????? ???????????, ??? ??? ??????? ? 
-    <a href="$$support$$#score">??????????? ???????????</a>.</p>
+<p>????????? ??????? 1.01, ?? ?????? ??????? ??????????? ?????? ??????? ?? ???,
+??? ? ?????????? ??????, ? ??????? ????? ???? "???????? ????" ???????. ??????????,
+??????????? ????????? ??? ???? ??????, ????????? ????? ?????? ????? ???????????,
+??? ??? ??????? ? <a href="$$support$$#score">??????????? ???????????</a>.</p>
   
 <p>??? ?????? ????? ?????? ???????? ?? <a
 href="$$download$$">???????? ????????</a> (<font color="red">???????? Mac OS X!</font>).</p>

Modified: homepage/input/news/news_issue22_ru.html
===================================================================
--- homepage/input/news/news_issue22_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue22_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -3,5 +3,4 @@
 </h3>
 
 <p>???????? ???????? ?????? ????? ????????? ?????????? ?? ???????. ?????? ???????? 
-??? ??????? ???? ????? ????? ?? ?????? ????? ?
-??????? ?????? ????.</p>
+??? ??????? ???? ????? ????? ?? ?????? ????? ? ??????? ?????? ????.</p>

Modified: homepage/input/news/news_issue23_ru.html
===================================================================
--- homepage/input/news/news_issue23_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue23_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,10 +2,11 @@
     <span class="date">10 ???????? 2007: </span> Enigma 1.01 ??? 64-????????? ?????? Linux
 </h3>
 
-<p>? ????????? Enigma ???????? ?????? ?????????? zipios++, ??????? ?? ?????????? ? 
+<p>? ????????? Enigma ???????? ?????? ?????????? zipios++, ????????????? ? 
 64 ?????????. ?? Windows, ?? Mac OSX, ?? Debian-?????????? ??????
 ?? ?????????? ???? ????????. ??? ???? ????????? ?????? Unix, ??????? ???????
-??????????????? ?? ?????????? ???? ???????? ?????, ?? ?????????? ??????????? ????? ???????? ?????, ??????? ????????? ? 
-64-?????????? ???????????? ??? ?? ??????, ??? ? ? 32-??????????. ?????????? ???????? ?????? ? ????????????? 
-&quot;????????????? ????????? ???? ? 32/64 ?????????&quot; ?? ?????? <a href="$$download$$#stable">
-??????? ????????</a>.</p>
+??????????????? ?? ?????????? ???? ???????? ?????, ?? ?????????? ???????????
+????? ???????? ?????, ??????? ????????? ? 64-?????????? ???????????? ??? ??
+??????, ??? ? ? 32-??????????. ??????????, ???????? ?????? ? ????????????? 
+&quot;????????????? ????????? ???? ? 32/64 ?????????&quot; ?? ??????
+<a href="$$download$$#stable">??????? ????????</a>.</p>

Modified: homepage/input/news/news_issue25_ru.html
===================================================================
--- homepage/input/news/news_issue25_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue25_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,11 +2,11 @@
     <span class="date">20 ?????? 2007: </span> ??????? ????? 2007 ???? - ???????????
 </h3>
 
-<p>? ???? ???? ?? ?????? ?????? ??????? - ??????? ????? ????. ??? ??????????? ?? ??????
-?????? ???? 2007, ??????? ?????? ?? ? ????? ?????? ?????????,
-??, ????? ????, ?? ??????? ?????? ??? ? ???? ??????????: ?????? ???????????? ???????,
-?????? ????? ???????, ?????? ??????????, ????? ???????? ??????? ? ?????? ???-??? ???????.
-????????? ???????????? ?? mag-heut.net ? ??????? ?????????? ??????,
+<p>? ???? ???? ?? ?????? ?????? ??????? &mdash; ??????? ????? ????. ???
+??????????? ?? ?????? ?????? ???? 2007, ??????? ?????? ?? ? ????? ?????? ?????????,
+??, ????? ????, ?? ??????? ?????? ??? ? ???? ??????????: ?????? ????????????
+???????, ?????? ????? ???????, ?????? ??????????, ????? ???????? ??????? ? ??????
+???-??? ???????. ????????? ???????????? ?? mag-heut.net ? ??????? ?????????? ??????,
 ? ?????? ?? ?????? ?? ??? ?????????????, ????????
 <a href="http://enigma-game.berlios.de/loty_2007.php">?????</a>
 ????? ??????? ?????????? ?????? ??? 

Modified: homepage/input/news/news_issue26_ru.html
===================================================================
--- homepage/input/news/news_issue26_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue26_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -6,8 +6,8 @@
 ????????????? ?????? ???????? ?????? ??????? &mdash; ??????? ????? 2008 ????. ??
 ????? ?????????? ??????? ???? 2008, ??????? ?????? ??????? ?????? ? ??????
 ??????? ????????, ????????????? ???????? ?????? ?????? 2007: &quot;Island
-Labyrinth&quot;. ?? ?? ??????? ?????? ? ??? ? ???? ??????????: ?????? ???????
-??? ????????? ? ?????? ???????? ???????, ??? ?? ??? ? ? ???? ???????? ??????????:
+Labyrinth&quot;. ?? ?? ??????? ?????? ? ??? ? ???? ??????????: ?????? ???????
+??? ????????? ? ?????? ???????? ???????, ??? ?? ??? ? ? ???? ???????? ??????????:
 ?????? ???????????? ???????, ?????? ?????????? ? ????? ???????? ???????. ?????????,
 ??? ? ? ??????? ????, ???????????? ?? ?????? mag-heut.net ?? ?????????? ??????????
 ??????, ? ?????? ?? ?????? ????????????? ?? ??? ??????? <a

Modified: homepage/input/news/news_issue2_ru.html
===================================================================
--- homepage/input/news/news_issue2_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue2_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -3,8 +3,7 @@
     ????? ??????
 </h3>
 
-<p class="news">?? <a href="$$download$$">???????? ????????</a> ???????? ????? RPM-??????. 
-    ???? ?????? ? ??? ?? ????????, ?? ?????? ??????????? ???;
-    ????? ?????? ????? ???????? ?? 
-    Redhat 7.3, SuSE 7.3, ? Mandrake 9.0.
+<p class="news">?? <a href="$$download$$">???????? ????????</a> ???????? ?????
+RPM-??????. ???? ?????? ? ??? ?? ????????, ?? ?????? ??????????? ???; ?????
+?????? ????? ???????? ?? Redhat 7.3, SuSE 7.3, ? Mandrake 9.0.
 </p>

Modified: homepage/input/news/news_issue3_ru.html
===================================================================
--- homepage/input/news/news_issue3_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue3_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -3,7 +3,8 @@
     ????-?????
 </h3>
 
-<p class="news">?????? ????? ??????? ? ??? ???, ??? ?? ????????? ????????? ?????????? ?????
-    Enigma. ????? ????? ????????? ? ??? ??? ? ?? ???????????? ? ??????? ?????? 0.80. 
-    ???? ?? ?????? ?????? ??? ? ??????????? ?????????? ??????, ?????????? ???????? ? ????????? ???
-    ?? <a href="$$download$$">???????? ????????</a>.</p>
+<p class="news">?????? ????? ??????? ? ??? ???, ??? ?? ????????? ?????????
+?????????? ????? Enigma. ????? ????? ????????? ? ??? ??? ? ?? ???????????? ?
+??????? ?????? 0.80. ???? ?? ?????? ?????? ??? ? ??????????? ?????????? ??????,
+??????????, ???????? ??? ?? <a href="$$download$$">???????? ????????</a> ?
+?????????.</p>

Modified: homepage/input/news/news_issue5_ru.html
===================================================================
--- homepage/input/news/news_issue5_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue5_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -3,4 +3,4 @@
     ???????-?? ???????? Enigma 0.80
 </h3>
 
-<p>???????? ?? <a href="$$download$$">??????</a>.</p>
+<p>???????? ?? <a href="$$download$$">??????</a>.</p>

Modified: homepage/input/news/news_issue6_ru.html
===================================================================
--- homepage/input/news/news_issue6_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue6_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -4,10 +4,12 @@
 </h3>
 
 <p>???? ?????? ?????????? ????????? ???????, ??????? ??????????? ? ?????? 0.80.  
-    ? ?????????, ?? ????????????? ?? ????????????? ??????? ?????? ???, ????? ?? ???????.</p>
+    ? ?????????, ?? ????????????? ?? ????????????? ??????? ?????? ???, ????? ??
+    ???????.</p>
   
 <p>? ????? ??????? ???????? ?????? ???????? ??? ? ?????? ????????? ??? Windows;
-?????? ??? ?????? ???????????? ?????? ???????? ? ????????? ????????? ???? ??? ??????.</p>
+?????? ??? ?????? ???????????? ?????? ???????? ? ????????? ????????? ???? ???
+??????.</p>
   
 <ul>
     <li>????????? ?????? ?????????</li>

Modified: homepage/input/news/news_issue7_ru.html
===================================================================
--- homepage/input/news/news_issue7_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue7_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -4,8 +4,9 @@
 </h3>
 
 <p>??? ?? ????? ????????, ?????? ?? ???????? ???????? ?? ?????? ?????? ?? ????????. 
-    ????????? ?????? ???????? ???????? 
-    ?? ???? ?????? ???????? ????????. ?? ???????????? ?? ??, ??? ?????? ???????? ????? ???????????? 
-    ? ??????? ????????? ?????????? ?????? ? ??????? ????? ????? ????? ???????? ?????? Enigma 0.90.
+    ????????? ?????? ???????? ???????? ?? ???? ?????? ???????? ????????. ??
+    ???????????? ?? ??, ??? ?????? ???????? ????? ???????????? ? ???????
+    ????????? ?????????? ?????? ? ??????? ????? ????? ????? ???????? ??????
+    Enigma 0.90.
     ??????? ??????????? ? ????!
 </p>

Modified: homepage/input/news/news_issue8_ru.html
===================================================================
--- homepage/input/news/news_issue8_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue8_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -7,6 +7,8 @@
     Enigma ?? ????? ??? ???. ?? ???????? ?? 
     <a href="$$download$$">???????? ????????</a>. 
     ????????? ???? ????????? ?????? ??????? ? ?????? ? ???????????
-    ??? ????? ???????? ?????????? ???????, ?????????? ????????? ? ????, ???????????? ???? ???????
-    ? <a href="mailto:enigma-devel at nongnu.org">?????? ???????? Enigma</a>. ?????? ?????? ???????? ?????!
+    ??? ????? ???????? ?????????? ???????, ??????????, ????????? ? ????,
+    ???????????? ???? ???????
+    ? <a href="mailto:enigma-devel at nongnu.org">?????? ???????? Enigma</a>.
+    ?????? ?????? ???????? ?????!
 </p>

Modified: homepage/input/news/news_issue9_ru.html
===================================================================
--- homepage/input/news/news_issue9_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/news/news_issue9_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -5,6 +5,6 @@
 
 <p>????????? ?????????? ????????? &#34;illmind&#34; ? ??? ?????? ???? 
     <a href="http://www.mag-heut.net">???-?????</a> ??? Enigma ? BlackBallEd,
-    ????????? ??????? Enigma. ???? ?? ?????????? ? ?????? ? ?????-???? ??????? ??? ?????? ??????????
-    ?????? ? ????????, ??????? ?????? ???.
+    ????????? ??????? Enigma. ???? ?? ?????????? ? ?????? ? ?????-???? ???????
+    ??? ?????? ?????????? ?????? ? ????????, ??????? ?????? ???.
 </p>

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/output-files.lua	2009-02-07 13:48:43 UTC (rev 1522)
@@ -289,7 +289,7 @@
     user_es = "Usuario",
     solved_hcp = "solved hcp",
     solved_hcp_de = "gel&ouml;stes hcp",
-    solved_hcp_ru = "???????? ????????",
+    solved_hcp_ru = "???????? ????????",
     solved_hcp_es = "hcp resuelto",
     difficult = "difficult",
     difficult_de = "schwer",
@@ -321,7 +321,7 @@
     Rating_Statistics_es = "Estad&iacute;sticas de clasificaci&oacute;n de",    
     Solved_Level_Statistics = "Solved Level Statistics of",
     Solved_Level_Statistics_de = "Statistik der gel&ouml;sten Levels vom",
-    Solved_Level_Statistics_ru = "?????????? ???????? ??????? ??",
+    Solved_Level_Statistics_ru = "?????????? ???????? ??????? ??",
     Solved_Level_Statistics_es = "Estad&iacute;sticas de niveles resueltos de",
     Worldrecord_Statistics = "Worldrecord Statistics of",
     Worldrecord_Statistics_de = "Weltrekord-Statistik vom",

Modified: homepage/input/press_ru.html
===================================================================
--- homepage/input/press_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/press_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,4 +1,4 @@
-<h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 ? ??????</h3>
 
 <p>?? ?????? ??????? ????? ?????????? ?????? ?? Enigma.</p>
@@ -28,10 +28,10 @@
         >Heise (????????, 0.81)</a></li>
 </ul>
 
-<p>?? &quot;Linux Game Tome&quot;, Enigma ???? ????????? ????? ?? ????? ????????????????? ???
-??? Linux (?? ????????? ?? ?????? 2007), ????????
+<p>?? &quot;Linux Game Tome&quot;, Enigma ???? ????????? ????? ?? ?????
+????????????????? ??? ??? Linux (?? ????????? ?? ?????? 2007), ????????
 <a href="http://www.happypenguin.org/list?sort=avg_rating">?????</a>.</p>
 
-<p>???? ?? ????? ??? ???????????? ??????????? ??????, ?????????? ???????? ???
+<p>???? ?? ????? ??? ???????????? ??????????? ??????, ??????????, ???????? ???
 (<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).</p>
 

Modified: homepage/input/screenshots_ru.html
===================================================================
--- homepage/input/screenshots_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/screenshots_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -2,32 +2,32 @@
 <h2>?????????</h2>
 
 <h3 id="v1.00">?????? 1.00</h3>
-<a href="$$imagedir$$/screenshots/andreas40_1.png"><img src="$$imagedir$$/screenshots/andreas40_1_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/levelinspector.png"><img src="$$imagedir$$/screenshots/levelinspector_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/luc12_1.png"><img src="$$imagedir$$/screenshots/luc12_1_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/andreas04_1.png"><img src="$$imagedir$$/screenshots/andreas04_1_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/levelmenu.png"><img src="$$imagedir$$/screenshots/levelmenu_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/andreas29_1.png"><img src="$$imagedir$$/screenshots/andreas29_1_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/raoul25_1.png"><img src="$$imagedir$$/screenshots/raoul25_1_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/andreas28_1.png"><img src="$$imagedir$$/screenshots/andreas28_1_s.png" alt="Levelscreenshot"></a>
+<a href="$$imagedir$$/screenshots/andreas40_1.png"><img src="$$imagedir$$/screenshots/andreas40_1_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/levelinspector.png"><img src="$$imagedir$$/screenshots/levelinspector_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/luc12_1.png"><img src="$$imagedir$$/screenshots/luc12_1_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/andreas04_1.png"><img src="$$imagedir$$/screenshots/andreas04_1_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/levelmenu.png"><img src="$$imagedir$$/screenshots/levelmenu_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/andreas29_1.png"><img src="$$imagedir$$/screenshots/andreas29_1_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/raoul25_1.png"><img src="$$imagedir$$/screenshots/raoul25_1_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/andreas28_1.png"><img src="$$imagedir$$/screenshots/andreas28_1_s.png" alt="???????? ??????"></a>
 
 <h3 id="v0.70">?????? 0.70</h3>
-<a href="$$imagedir$$/screenshots/ant21.png"><img src="$$imagedir$$/screenshots/ant21_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/duffy17.png"><img src="$$imagedir$$/screenshots/duffy17_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/level10f.png"><img src="$$imagedir$$/screenshots/level10f_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/martin73.png"><img src="$$imagedir$$/screenshots/martin73_s.png" alt="Levelscreenshot"></a>
+<a href="$$imagedir$$/screenshots/ant21.png"><img src="$$imagedir$$/screenshots/ant21_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/duffy17.png"><img src="$$imagedir$$/screenshots/duffy17_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/level10f.png"><img src="$$imagedir$$/screenshots/level10f_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/martin73.png"><img src="$$imagedir$$/screenshots/martin73_s.png" alt="???????? ??????"></a>
 
 <h3 id="v0.60">?????? 0.60</h3>
-<a href="$$imagedir$$/screenshots/level2d.jpg"><img src="$$imagedir$$/screenshots/level2d_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/level6b.jpg"><img src="$$imagedir$$/screenshots/level6b_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/martin07.jpg"><img src="$$imagedir$$/screenshots/martin07_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/martin43.jpg"><img src="$$imagedir$$/screenshots/martin43_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/meditation12.jpg"><img src="$$imagedir$$/screenshots/meditation12_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/qq2.jpg"><img src="$$imagedir$$/screenshots/qq2_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/martin08.jpg"><img src="$$imagedir$$/screenshots/martin08_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/martin27.jpg"><img src="$$imagedir$$/screenshots/martin27_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/martin30.jpg"><img src="$$imagedir$$/screenshots/martin30_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/meditation2.jpg"><img src="$$imagedir$$/screenshots/meditation2_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/nat1.jpg"><img src="$$imagedir$$/screenshots/nat1_s.png" alt="Levelscreenshot"></a>
-<a href="$$imagedir$$/screenshots/space.jpg"><img src="$$imagedir$$/screenshots/space_s.png" alt="Levelscreenshot"></a>
+<a href="$$imagedir$$/screenshots/level2d.jpg"><img src="$$imagedir$$/screenshots/level2d_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/level6b.jpg"><img src="$$imagedir$$/screenshots/level6b_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/martin07.jpg"><img src="$$imagedir$$/screenshots/martin07_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/martin43.jpg"><img src="$$imagedir$$/screenshots/martin43_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/meditation12.jpg"><img src="$$imagedir$$/screenshots/meditation12_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/qq2.jpg"><img src="$$imagedir$$/screenshots/qq2_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/martin08.jpg"><img src="$$imagedir$$/screenshots/martin08_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/martin27.jpg"><img src="$$imagedir$$/screenshots/martin27_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/martin30.jpg"><img src="$$imagedir$$/screenshots/martin30_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/meditation2.jpg"><img src="$$imagedir$$/screenshots/meditation2_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/nat1.jpg"><img src="$$imagedir$$/screenshots/nat1_s.png" alt="???????? ??????"></a>
+<a href="$$imagedir$$/screenshots/space.jpg"><img src="$$imagedir$$/screenshots/space_s.png" alt="???????? ??????"></a>
 </div>

Modified: homepage/input/stat-help_ru.html
===================================================================
--- homepage/input/stat-help_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/stat-help_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,29 +1,30 @@
   <div class="stat-help">
     <h3>?????????</h3>
     <h4>?????</h4>
-      ?????????????? ??? ???????????????? ??????. ???? ??? ?????? ???????? 
-      ?????????? ?????, ????????? ??? ??????. ??????, ??????? ?????????? 
+      ? ???????? ????????? ??? ???????????????? ??????. ???? ??? ?????? ???????? 
+      ?????????? ?????, ??????????? ??? ??????. ??????, ??????? ?????????? 
       ????????? ??? ? ?????? ??????? ??????? ????????? ?? ????.
     <h4>??????????</h4>
-      ????????? ?????????? ? ??????????? ? 1 ???????. ???? ??? ??? ?????? ????????????
-      ????????? ??????? ? ????????? ?? ??????? ? ??? ? ????? ????? ?????????? ?????????
-      ? ??? ???????? ????? ????? ??????? ??????. ?????? ????????????? ??? ??????? 
-      ????? ???????????.
+      ????????? ?????????? ? ??????????? ? 1 ???????. ???? ???? ??? ??????
+      ????????????? ????????? ??????? ? ????????? ?? ??????? ? ??? ? ????? ?????
+      ?????????? ????????? ? ??? ???????? ????? ????? ??????? ??????. ??????
+      ????????????? ??? ??????? ????? ???????????.
     <h4>???????? (hcp)</h4>
-      ??? ???????, ??????? ?? ????????? ???? ???????? ?? ??????? ????????, ?? ??? ?? ?????????
-      ????? ?????? ? ??????? ??????? ???????, ?? ????? ?????? ????.
-      ?? ??????? ?? ???????? ??-?? ???????? ? ?????????? ? ??????. ? ?????
-      ??????? ???????? ?????, ??? ???????. ???????? ?????????? ?? 
-      +100 ?? -300. ?????, ??????? ?????? ?????? ?? ??????? ????? ????????
-      ???????? 0.0. ???????? ???????????? ????? ??????????? ??????? ???????
-      ?? ??????? ???????????????? ??????????? (PAR), ??????? ??????? ??? ??????? 
+      ??? ???????, ??????? ?? ????????? ???? ???????? ?? ??????? ????????, ??
+      ??? ?? ????????? ????? ?????? ? ??????? ??????? ???????, ?? ????? ??????
+      ????. ?? ??????? ?? ???????? ??-?? ???????? ? ?????????? ? ??????. ? ?????
+      ??????? ???????? ?????, ??? ???????. ???????? ?????????? ?? +100 ?? -300.
+      ?????, ??????? ?????? ?????? ?? ??????? ????? ???????? ???????? 0.0.
+      ???????? ???????????? ????? ??????????? ??????? ??????? ?? ???????
+      ???????????????? ??????????? (PAR), ??????? ??????? ??? ??????? 
       ??????. ????? ??????? ???????? ????????? ????????????? ??? ??????
-      ????????????? ? 100 ??????? - ??????????? ?????? ?????? ???????.
-    <h4>???????? ????????</h4>
-      ???????? ???????? ??? ????????, ??????? ?????????????? ??? ???? ???????, ??????? ????? ?????.
-      ????????????? 10% ?????????? ??????? ??????? ? ??????
-      ? ?????? ??????????? ??????? ???????. ???? ?????? ????????? ?????????
-      ????? ?????????????? ??? ????????? ??????? ? ?????? ????????????? ???????????? ???????. ??
-      ?????????? ????????? ?????? ??? ???????? ????? ?????? ???????.
+      ????????????? ? 100 ??????? &mdash; ???????????? ??????? ?????? ???????.
+    <h4>???????? ??? ???????? ???????</h4>
+      ???????? ??? ???????? ??????? ??? ????????, ??????? ?????????????? ???
+      ???? ???????, ??????? ????? ?????. ?????????????, ? ?????? ???????????
+      ??????? ???????, ? ?????? ??????? 10% ?????????? ???????. ????? ???????,
+      ???????? ??? ???????? ??????? ????? ?????????????? ??? ????????? ???????
+      ? ?????? ????????????? ???????????? ???????. ?? ?????????? ?????????
+      ?????? ????? ?????? ???????.
   </div>
 

Modified: homepage/input/support_ru.html
===================================================================
--- homepage/input/support_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/support_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,11 +1,13 @@
 <h2>????????? ????????????</h2>
 
-<p>??????? Enigma ? ?????? ????? ?????????????? ??????????? ?? ??????????? ??????? ?? ???????? ?
-???????????? ? ????????? FAQ (????? ?????????? ????????). ???????????? ?????? ??????? ???? ?? ???????????
-????????????, ??????? ????? ??? ????????????. ???? ?? ???????? ? ?????-?? ?????? ??? ?????? ??????
-? ???-?? ???????? Enigma, ??? ????? ????????? ?? ?????. ??????? ???? ???? ? ?????? ???????, ??, ??? ????????????, ??????
-??????? ???????????? ? ????? Enigma.
-???? ?????????? ?????? ? ?????????????? ??????, ? ?????? ??????? ???????? ?? ????? ?????? ??????.</p>
+<p>??????? Enigma ? ?????? ????? ?????????????? ??????????? ?? ???????????
+??????? ?? ???????? ? ???????????? ? ????????? FAQ (????? ?????????? ????????).
+???????????? ?????? ??????? ???? ?? ??????????? ????????????, ??????? ????? ???
+????????????. ???? ?? ???????? ? ?????-?? ?????? ??? ?????? ?????? ? ???-??
+???????? Enigma, ??? ????? ????????? ?? ?????. ??????? ???? ???? ? ??????
+???????, ??, ??? ????????????, ?????? ??????? ???????????? ? ????? Enigma.
+???? ?????????? ?????? ? ?????????????? ??????, ? ?????? ??????? ???????? ??
+????? ?????? ??????.</p>
 
 <ul>
   <li><a href="$$support$$#documentation">????????????</a> - ????? ????? ?????????? ?????? - ??????? ??????</li>
@@ -19,11 +21,11 @@
 
   <p>?????? ?????? ???????? ?????!</p>
 
-<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="documentation">???????????? ??? Enigma 1.00</a></h3>
-  <p>?????? ??????????? ???????????? ?? ?????????? ?????? ?????????? ? ?????? ??????
-  Enigma. ????? ????, ?? ?????? ???????? ??? ? ????? ????? ??? ??????? PDF-??????
-  ?????????.</p>
+  <p>?????? ??????????? ???????????? ?? ?????????? ?????? ?????????? ? ??????
+  ?????? Enigma. ????? ????, ?? ?????? ???????? ??? ? ????? ????? ??? ???????
+  PDF-?????? ?????????.</p>
 
   <ul> <!-- keep space in first li entry - IE needs it -->
     <li> <img src="$$imagedir$$/flags25x15/gb.png" border="0" width="25" height="15" alt="English" title="English">&nbsp;&nbsp;
@@ -45,9 +47,9 @@
       ????????? ????? ??????? ?????? 1.00!</li>
   </ul>
 
-  <p>? ?????????? ?? ?????????? ?????????? ???????????, ??????? ????? ???????? ? ????? Enigma.
-  ????????? ????????????? ? ??? ???????????? ????? ??????? ?? ?????? ??? ??????? ?????????????
-  ? ?????????????.</p>
+  <p>? ?????????? ?? ?????????? ?????????? ???????????, ??????? ????? ???????? ?
+  ????? Enigma. ????????? ????????????? ? ??? ???????????? ????? ??????? ??
+  ?????? ??? ??????? ????????????? ? ?????????????.</p>
   <ul> <!-- keep space in first li entry - IE needs it -->
     <li> <img src="$$imagedir$$/flags25x15/gb.png" border="0" width="25" height="15" alt="English" title="English">&nbsp;&nbsp;
       <a href="manual/enigma-ref.html">English Reference manual (html)</a></li>
@@ -56,44 +58,46 @@
   ??????????, ???? ?? ?????? ?????????????? ????????, ???????? ?????? ?
   <a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>.</p>
 
-<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="forum">????? ?????????????</a></h3>
 
-  <p>????? ? ????? ????, ??? Enigma ????????? ???????? ???????. ?? ?????? ? ???-?? ????????
-  ???? ??????? ?????? ??? ???????? ????????? ?????????
+  <p>????? ? ????? ????, ??? Enigma ????????? ???????? ???????. ?? ?????? ?
+  ???-?? ???????? ???? ??????? ?????? ??? ???????? ????????? ?????????
   ?????? ?????????????. ?? ?????? <a href="http://www.mag-heut.net">mag-heut.net</a>
   ?? ?????? ?????????? ????? ?????? ? ??????? ?????? ?????????????.</p>
 
-  <p>??????? ????? ??? ???? ????????????? ??????: ?????????? ????? ????? ??????????,
-  ??????? ???? ??????? ??? ?????????? ???????? ????, ???????? ??????. ???????? ????
-  ??????????? ? ???? '??????', ?????? ????, ????? ???????? ????? ?????.</p>
+  <p>??????? ????? ??? ???? ????????????? ??????: ??????????, ????? ?????
+  ??????????, ??????? ???? ??????? ??? ?????????? ???????? ????, ????????,
+  ??????. ???????? ???? ??????????? ? ???? '??????', ?????? ????, ????? ????????
+  ????? ?????.</p>
 
   <p>? ????? ??? ??????? ???????: ?? ??????? ???????????? ?? ??????, ????????
-  ??????????? ?? ???????????. ???? ?????? ???????????? ?????? ???????????? ???????? ?????????.
-  ????? ???? ??????????? ?????? ????????? ?????? ????
-  (???? &quot;spoiler&quot;). ???????????? ?????? ??????? ??, ???? ?? ????? ???????? ?? ????? ??.
-  ??????? ?????, ?? ?????? ???????? ?????? ??? ?????????.
+  ??????????? ?? ???????????. ???? ?????? ???????????? ?????? ????????????
+  ???????? ?????????. ????? ???? ??????????? ?????? ????????? ?????? ????
+  (???? &quot;spoiler&quot;). ???????????? ?????? ??????? ??, ???? ?? ?????
+  ???????? ?? ????? ??. ??????? ?????, ?? ?????? ???????? ?????? ??? ?????????.
   ????? ???? ????????????? ??????????? ????? ????? ???????.</p>
 
-<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="score">??????????? ????? ? ??????</a></h3>
 
-  <p>??????? ? Enigma 1.00 ?? ?????? ???????????????? ???? ???? ? ??????. ??? ????????? ? ???,
-  ??? ?? ???????? ???? ??????????? ??????????? ?? ??? ????? ??????? ?????????? ??????????? ?????????????,
-  ?? ???????????? ??????????, ??????? ?? ???????????, ????? ?????????? ?????????? ?? ??????. ???? ????????, ???
-  ?????????? ???????, ?? ???????? ?????-???? ??????? ??? ?? ????? ??? ???????? ???? ? Enigma, ???
-  ?????? ?????? ???????????.</p>
+  <p>??????? ? Enigma 1.00 ?? ?????? ???????????????? ???? ???? ? ??????. ???
+  ????????? ? ???, ??? ?? ???????? ???? ??????????? ??????????? ?? ??? ?????
+  ??????? ?????????? ??????????? ?????????????, ?? ???????????? ??????????,
+  ??????? ?? ???????????, ????? ?????????? ?????????? ?? ??????. ???? ????????,
+  ??? ?????????? ???????, ?? ???????? ?????-???? ??????? ??? ?? ????? ???
+  ???????? ???? ? Enigma, ??? ?????? ?????? ???????????.</p>
 
-  <p>??????????, ??????? ??????? ??????? ?????? ???????. ????? ??????? ????????? ???????, ???????? ?????? ??????? ????
-  ?? ?????? ?????? (??? ???????? ?? ??? ? ??????? ???????? Ctrl) ? ???? ???????. ? ?????? ??????
-  ?? ?????? ??????? ??????? ?? 0 (??????) ?? 10 (??????). ???????????? ???????
-  ?? ?????? ??????? ??????, ?? ? ??????. ??????? ?????? ?????????? 5.
-  ???? ?????? ??????????, ????? ?????? ???????? ????????????? ? ??????? ? ?????? ??????
-  '?????? ??????'.</p>
+  <p>??????????, ??????? ??????? ??????? ?????? ???????. ????? ??????? ?????????
+  ???????, ???????? ?????? ??????? ???? ?? ?????? ?????? (??? ???????? ?? ??? ?
+  ??????? ???????? Ctrl) ? ???? ???????. ? ?????? ?????? ?? ?????? ???????
+  ??????? ?? 0 (??????) ?? 10 (??????). ???????????? ??????? ?? ?????? ???????
+  ??????, ?? ? ??????. ??????? ?????? ?????????? 5. ???? ?????? ??????????,
+  ????? ?????? ???????? ????????????? ? ??????? ? ?????? ?????? '?????? ??????'.</p>
 
-  <p>??? ??????? ??????? ?????????? ??? ???????????? ? ???? ????????. ?????????? ????????? ?
-  <a href="$$statistics$$#userlist">?????? ?????????????</a> ?? ???????????? ?? ???? ??????? ???
-  ???-?? ??????.</p>
+  <p>??? ??????? ??????? ?????????? ??? ???????????? ? ???? ????????. ??????????,
+  ????????? ? <a href="$$statistics$$#userlist">?????? ?????????????</a> ??
+  ???????????? ?? ???? ??????? ??? ???-?? ??????.</p>
 
   <p>??? ??????????? ????? ?????, ?????? ???????? ??? ??? ???? 'enigma.score'.
   ?? ????????? ? ????? '???? ????????????', ??????? Enigma ?????????? ??? ???????
@@ -102,13 +106,15 @@
   ? ????? 'score - ???_????????????' (???????? '???_????????????', ????????? ????
   ??????!).</p>
 
-  <p>???? ??????????????? ??? ? ?????. ?????????? ?? ?????????? ???? ????? ???????????
-  ????? ??????? ???????????? ???????? ??????????. ?????? ???? ? ????? ?????? ????? ??????????.</p>
+  <p>???? ??????????????? ??? ? ?????. ??????????, ?? ?????????? ???? ?????
+  ??????????? ????? ??????? ???????????? ???????? ??????????. ?????? ???? ?
+  ????? ?????? ????? ??????????.</p>
 
-  <p>??????????? ?????????? ????? ????????? ? ??? ?????????, ???? ?? ??????????
-  ????? ?????????? ??????????? ? '????'. Enigma ????? ???????? ?? ?????? ????? ????????? ??? ? ?????,
-  ? ??????????? ?? ????, ??? ????? ?? ?????????? ??????????. ??? ??? ??????????? ?????? ?????????????? ??????????
-  ?????? ????? ???, ? ?? ???????? ??? ?????????? ? ??????? ?????????? ????.</p>
+  <p>??????????? ?????????? ????? ????????? ? ??? ?????????, ???? ?? ??????????
+  ????? ?????????? ??????????? ? '????'. Enigma ????? ???????? ?? ?????? ?????
+  ????????? ??? ? ?????, ? ??????????? ?? ????, ??? ????? ?? ??????????
+  ??????????. ??? ??? ??????????? ?????? ?????????????? ?????????? ?????? ?????
+  ???, ? ?? ???????? ??? ?????????? ? ??????? ?????????? ????.</p>
 
   <p>???? ?? ? ???????? ??????? ? ??????? ? ?????????? ????? ?????????? ? '???????',
   ?? ?????? ??????? ????????? ???? ?????????? ???????????
@@ -116,42 +122,49 @@
   ????????? ???? ?? zip-?????? ? ?????????? ??? ? ??? '???? ????????????' ????? ?
   ????? ?????? 'enigma.score'.</p>
 
-<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="bug">????????? ?? ??????</a></h3>
 
-  <p>?? ????? ????? ????????? ? ????????? ? Enigma. ??????? ??????????? ??????????? ?
-  ????? ??? 200&nbsp;000 ????? ???? ? ??????? ??????? ??????? ??? Enigma ???????
-  ?? ????? ????????? ?? ??????. ?? Enigma ???????? ???????? ??????????? ??????? 1.00, ????????? ??????? ?????????????.
-  ?????????? ??????? ?????????? ??? ?? ??????? ??????? ? ????????????, FAQ ??? ?????? ?????????????.</p>
+  <p>?? ????? ????? ????????? ? ????????? ? Enigma. ??????? ???????????
+  ??????????? ? ????? ??? 200&nbsp;000 ????? ???? ? ??????? ??????? ??????? ???
+  Enigma ??????? ?? ????? ????????? ?? ??????. ?? Enigma ???????? ????????
+  ??????????? ??????? 1.00, ????????? ??????? ?????????????. ??????????, ???????
+  ?????????? ??? ?? ??????? ??????? ? ????????????, FAQ ??? ?????? ?????????????.</p>
 
-  <p>? ?????????? ?? ???????????? ? ??????? ??????? ?????????? ????????? ? ?????? ???????? ??? ?????????????
+  <p>? ?????????? ?? ???????????? ? ??????? ??????? ?????????? ????????? ?
+  ?????? ???????? ??? ?????????????
   <a href="mailto:enigma-devel at nongnu.org" >enigma-devel at nongnu.org</a>
-  (??? ?? ????? ????????????? ?? ?????? ????????).
-  ?????????? ???????? ? ???? ????????? ????????? ???????? ??????????:</p>
+  (??? ?? ??????????? ????????????? ?? ?????? ????????).
+  ?????????? ???????? ? ???? ????????? ????????? ???????? ??????????:</p>
     <ul>
     <li>????? ???????????? ??????? ?? ????????????</li>
     <li>????? ?????? Enigma ?? ????????????</li>
     <li>??? ?? ??????? ????? ???, ??? ?????????? ???????</li>
     <li>??? ????? ?? ?????? ????? ??????</li>
-    <li>??? ????????? ???????? ??? ?? ????? ??????????????</li>
+    <li>??? ????????? ???????? ??? ?? ????? ??????????????</li>
     </ul>
-  <p>???? ?? ????????? ?????????, ?????????? ??????????? ?? ????? ? ???????? ?? ?????????? ???????
-  ?? ????? ????????????? ? ??????????? ????????????. ?? ?????????, ??? ????? ??????? ????? ?? - ????
-  ?????? ??????? ??????? ?? ???? ????????? ????? ?????? ????????? ?????.</p>
+  <p>???? ?? ????????? ?????????, ??????????, ??????????? ?? ????? ? ???????? ??
+  ?????????? ??????? ?? ????? ????????????? ? ??????????? ????????????. ??
+  ?????????, ??? ????? ??????? ????? ?? &mdash; ???? ?????? ??????? ??????? ?? ????
+  ????????? ????? ?????? ????????? ?????.</p>
 
   <p>? ????????? ? ?????????? ???????? ????????? ?? ?????? ?????????????
-  <a href="http://www.mag-heut.net">mag-heut.net</a>. ?????????? ?????? ? ????, ???
-  ??? ?????? ? Enigma 1.00 ????????? ?? ??????????? ???????. ?? ????????????????? ???????? ???? ???????
-  ??? ???????? ????????????? ? ??????? ???????? ???????? ????? ? ?????? ????? ????????? ? ????,
-  ?????? ?????????????? ??????????????? ? Enigma.</p>
+  <a href="http://www.mag-heut.net">mag-heut.net</a>. ??????????, ?????? ? ????,
+  ??? ??? ?????? ? Enigma 1.00 ????????? ?? ??????????? ???????. ??
+  ????????????????? ???????? ???? ??????? ??? ???????? ????????????? ? ???????
+  ???????? ???????? ????? ? ?????? ????? ????????? ? ????, ?????? ??????????????
+  ??????????????? ? Enigma.</p>
 
-  <p>???????????? ????? ???????? ?????????? ????????? ?? ??????? ??????????????? ? ????? ???? ?????? ??????
+  <p>???????????? ????? ???????? ?????????? ????????? ?? ??????? ???????????????
+  ? ????? ???? ?????? ??????
   <a href="http://developer.berlios.de/projects/enigma-game/">Berlios.</a>
 
-<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$support$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
   <a name="donation">??????</a></h3>
 
-  <p>?? ?????? ?? ?????, ?? ?????? ?? ?????? ??????????? ?????????? ?????????? ?????????? Enigma. ???? ?? ?? ????????????
-  ???? ????????? ????? ??? ?????, ??????? ?? ?????? ???? ?? ????????? ?? Enigma ? ????????, ??? ??????? ?? ??? ????????
-  ????. ???? ?? ????????, ??? ??? ???? ?? ???????????, ???????? ??? ?? <a href="mailto:donation at enigma-game.org" >donation at enigma-game.org</a>,
-  ? ?? ??????? ???? ??? ?????????????.</p>
+  <p>?? ?????? ?? ?????, ?? ?????? ?? ?????? ??????????? ?????????? ??????????
+  ?????????? Enigma. ???? ?? ?? ???????????? ???? ????????? ????? ??? ?????,
+  ??????? ?? ?????? ???? ?? ????????? ?? Enigma ? ????????, ??? ??????? ?? ???
+  ???????? ????. ???? ?? ????????, ??? ??? ???? ?? ???????????, ???????? ??? ??
+  <a href="mailto:donation at enigma-game.org" >donation at enigma-game.org</a>,
+  ? ?? ??????? ???? ??? ?????????????.</p>

Modified: homepage/input/testimonials_ru.html
===================================================================
--- homepage/input/testimonials_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/testimonials_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -1,42 +1,43 @@
 <div class="testimonial">
-<h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
+<h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="? ?????? ????????"></a>
 ??????????? ?????????????</h3>
 
 <p>?? Enigma ? ???????? ????? ??? ? ????? ????????????, ?????????? ?
-????????? ????-???????????. ?? ?????? ???? ??? ??? ?????? ????????? ????????????:</p>
+????????? ????-???????????. ?? ?????? ???? ???, ??? ?????? ????????? ????????????:</p>
 
 
 <p class="quote">
-&ldquo;??? ?????? ????????? ????
-??????? ???????????????, ????? ???????? ??? ??????? ????? ? ????????? ?????.
-??? ???????? ???????????!&rdquo;</p>
+&ldquo;??? ?????? ????????? ???? ??????? ???????????????, ????? ???????? ???
+??????? ????? ? ????????? ?????. ??? ???????? ???????????!&rdquo;</p>
 
 <p class="quote">
 &ldquo;? ????? ? Enigma ????? ????????? ???? ? ???? ????????????? ??? ??????? ??
-???????? ????? ????????????? ????, ??? ??????, ? ??????? ????????, ????? ???????? ????????
- ;) ? ??????????? ??????????????.&rdquo;</p>
+???????? ????? ????????????? ????, ??? ??????, ? ??????? ????????, ????? ????????
+???????? ;) ? ??????????? ??????????????.&rdquo;</p>
 <p class="author">(??????? ????????????? ???????????)</p>
 
 <p class="quote">
 &ldquo;??? ???? ????????? ??????, ??? ? ?? ???? ?????? ?????? ??? ?? ?????????.
-??? ?? ??? ?? ????, ???? ??????, ??? ??? ????. ? ???? ??? ???????? ?? ??????????
-?? ???????? ????????. ???????? ??????? ????? ??????????? ???? ???? ??????????? ??????.&rdquo;</p>
+??? ?? ??? ?? ????, ???? ??????, ??? ??? ????. ? ???? ???? ?????? ?? ??????????
+?? ???????? ????????. ???????? ??????? ????? ??????????? ???? ???? ???????????
+??????.&rdquo;</p>
 
 <p class="quote">
-&ldquo;Enigma - ????? ????????????? ????, ? ??????? ? ?????-???? ?????.&rdquo;</p>
+&ldquo;Enigma &mdash; ????? ????????????? ????, ? ??????? ? ?????-???? ?????.&rdquo;</p>
 
 <p class="quote">
-&ldquo;??????? ?? ???????? ????? ????????????? ? ????????? ????. ? ?????? ?????? ????-???????????,
-? ??? ???? - ?????? ?? ???, ??? ? ?????.&rdquo;</p>
+&ldquo;??????? ?? ???????? ????? ????????????? ? ????????? ????. ? ?????? ??????
+????-???????????, ? ??? ???? &mdash; ?????? ?? ???, ??? ? ?????.&rdquo;</p>
 
 <p class="quote">
 &ldquo;? ??????? ??????? ? Oxyd ????? ?????? ??? ?????, ?? ??? ???? ??
 ???????. ????? ? Enigma, ??????? ??????????.&rdquo;</p>
 
 <p class="quote">
-&ldquo;??? ?????? ????-???????????, ??????? ??? ????????????? ??????????? - ??????? ????! ????????
-2D ???????, ??????? ????????????, ??????? ? ?????? ??????????? ?????? &hellip; ??? ????????, ???
-?????? ??? ????? ????????????? - ????? ?????? ????????? ??????, ? ???? ????????? ?? ???? ?????? ????!&rdquo;</p>
+&ldquo;??? ?????? ????-???????????, ??????? ??? ????????????? ??????????? &mdash;
+??????? ????! ???????? 2D ???????, ??????? ????????????, ??????? ? ??????
+??????????? ?????? &hellip; ??? ????????, ??? ?????? ??? ????? ?????????????
+&mdash; ????? ?????? ????????? ??????, ? ???? ????????? ?? ???? ?????? ????!&rdquo;</p>
 
 <p class="quote">
 &ldquo;??? ?????????????, ???????????? ????, ??????? ??????? ????? ?????? ??????
@@ -44,57 +45,64 @@
 <p class="author">TuxGamer ?? <a href="http://happypenguin.org/show?Enigma">Happy Penguin</a>.</p>
 
 <p class="quote">
-&ldquo;? ??? ??????? ???????? ???? ????. ???????? ??????????? ???????????
-? ?????????????? ?? ?????????. ?? ????? ????? ???? ??????????, ? ??? ????????????? ???????
-? ??????????? ??????????, ??????? ???????????????? ?????????. ??? ?? ?????????? ??????
-??????????? ???????? ???????????????? ????? ?????? ??????????? Linux ?????? ???????? Enigma!!!!&rdquo;</p>
+&ldquo;? ??? ??????? ???????? ???? ????. ???????? ??????????? ???????????
+? ?????????????? ?? ?????????. ?? ????? ????? ???? ??????????, ? ???
+????????????? ??????? ? ??????????? ??????????, ??????? ????????????????
+?????????. ??? ?? ?????????? ?????? ??????????? ???????? ???????????????? ?????
+?????? ??????????? Linux ?????? ???????? Enigma!!!!&rdquo;</p>
 <p class="author">Anonymous ?? <a href="http://happypenguin.org/show?Enigma">Happy Penguin</a>.</p>
 
 <p class="quote">
 &ldquo;??? ? ???? ???????? ? ????????? ??????? ? ?????? ????? ? ???????????
-? ? ?? ??? ??? ?? ??? ?? ?????, ?? ?????? ?? ??, ??? ????????? ?????? ??????? ???? ?? ????, ??? ? ?????
-????????? ??? ???? ? ????.&rdquo;</p>
+? ? ?? ??? ??? ?? ??? ?? ?????, ?? ?????? ?? ??, ??? ????????? ?????? ???????
+???? ?? ????, ??? ? ????? ????????? ??? ???? ? ????.&rdquo;</p>
 
 <p class="quote">
-&ldquo;Enigma - ?????? ???? ?? ????! [&hellip;] ??? ???? ??? ???????????? ?? ????? ?????? ????.
-? ?? ???? ?????????, ????? ??? ?????????? ??? ????? ??????!!!&rdquo;</p>
+&ldquo;Enigma &mdash; ?????? ???? ?? ????! [&hellip;] ??? ???? ??? ????????????
+?? ????? ?????? ????. ? ?? ???? ?????????, ????? ??? ?????????? ??? ?????
+??????!!!&rdquo;</p>
 <p class="author">Scott ????????? ??? &quot;Great Scott&quot;</p>
 
 <p class="quote">
 &ldquo;??? ???? ????????? ?? ?????????, ??? ?????????? ? ????? ? ??????? ? ??????.
-[&hellip;] ?? ?????? ?????????, ?????????????? ??????? ??? ???? ????: ?????? ?????
-????? ???? ?????????(Super Hyper Mega Universe HIGH)! ?? ???? ?????? ???? ? ???, ??? ?? ????????? ????? ????
-??? ???????? ???? ??????? ????? ? Enigma!&rdquo;</p>
+[&hellip;] ?? ?????? ?????????, ?????????????? ??????? ??? ???? ????: ?????
+????? ???? ?????? ?? ????????? (Super Hyper Mega Universe HIGH)! ?? ???? ??????
+???? ? ???, ??? ?? ????????? ????? ???? ??? ???????? ???? ??????? ????? ?
+Enigma!&rdquo;</p>
 <p class="author">JoTo ?? <a href="http://www.donationcoder.com/Forums/bb/index.php?topic=6859.new">DonationCoder.com</a></p>
 
 <p class="quote">
-&ldquo;? ??, ????? Oxyd! ?????? ? ??? ????? ?? ????? ?? Enigma, ????? ???????? ??? ??????
-??????????? ???????? Atari-Oxyd? ??????? ????, ??? ?????? ??? ????????????? ???? ? ?????!&rdquo;</p>
+&ldquo;? ??, ????? Oxyd! ?????? ? ??? ????? ?? ????? ?? Enigma, ????? ????????
+??? ?????? ??????????? ???????? Atari-Oxyd? ??????? ????, ??? ?????? ???
+????????????? ???? ? ?????!&rdquo;</p>
 <p class="author">Tatjana Heuser</p>
 
 <p class="quote">
-&ldquo;???????, ???????, ??????? ?? ???????? ?????????????? ????? ?????????????? ????
-(Oxyd -&gt; Enigma)! ? ??? ??????? ? ???????????? ???? (???? ????????? ???, ????? ??????????? NeXTStep!), ?? ?? ??? ????????? ???? ?????? ? ???? ? ??????? ????????,
-?????? ??? ? ????????????? ???? ????? ????????. ?????? ?????? ????
-???? ??? ? ? ??????? ????????? ????? ????????? ???????, ??????? ??? ?? ??????? ???? ????, ??? ? ?.&rdquo;</p>
+&ldquo;???????, ???????, ??????? ?? ???????? ?????????????? ????? ??????????????
+???? (Oxyd -&gt; Enigma)! ? ??? ??????? ? ???????????? ???? (???? ????????? ???,
+????? ??????????? NeXTStep!), ?? ?? ??? ????????? ???? ?????? ? ???? ? ???????
+????????, ?????? ??? ? ????????????? ???? ????? ????????. ?????? ?????? ????
+???? ??? ? ? ??????? ????????? ????? ????????? ???????, ??????? ??? ?? ???????
+???? ????, ??? ? ?.&rdquo;</p>
 <p class="author">Rorke Haining</p>
 
 <p class="quote">
 &ldquo;????? ? ??????????? (? ???????? ????? ???????) ?????? ??? ?????????, ??
-???? ????????? ?????????????? ? ??????? ?????????? ???????, ????????? ??????? ????, ??????? ???????? ??
-???????? ????????? ????? ????, ??????? ???????? ??? - ??? ?????? ?? ??????? ????? ?????????? ?? ????? ?????????????.
-???????? Enigma ? ?? ????? ????,
-?? ??? ??????? ???????? ???????????????? ???? ? ???????? ?????? ???????? ???????????? ? ??????????? ???????,
-????? ???? ?? ???? ????????.&rdquo;</p>
+???? ????????? ?????????????? ? ??????? ?????????? ???????, ????????? ???????
+????, ??????? ???????? ?? ???????? ????????? ????? ????, ??????? ???????? ???
+&mdash; ??? ?????? ?? ??????? ????? ?????????? ?? ????? ?????????????. ????????
+Enigma ? ?? ????? ????, ?? ??? ??????? ???????? ???????????????? ???? ? ????????
+?????? ???????? ???????????? ? ??????????? ???????, ????? ???? ?? ????
+????????.&rdquo;</p>
 <p class="author">Frank ?? <a
 href="http://macgameblog.com/archives/Enigma-88.html">The Mac Game Blog</a>
 </p>
 
 <p class="quote">
 &ldquo;? ????? ??????????? ??????????? ??????? ? ????? ????? ??? ????????????,
-??????????? Enigma ??????? ?? ??????????. ? ???? ???? ??? ??????? ???-?? ????????,
-???????? ?? ??? ??????? ??????????? ??? ??????? ???????? ?? ????????.
-? ????? ?????????? ???????, ???? ???????? ???????????, ??????? ? ??????????? Enigma.&rdquo;</p>
+??????????? Enigma ??????? ?? ??????????. ? ???? ???? ??? ??????? ???-?? ????????,
+???????? ?? ??? ??????? ??????????? ??? ??????? ???????? ?? ????????. ? ?????
+?????????? ???????, ???? ???????? ???????????, ??????? ? ??????????? Enigma.&rdquo;</p>
 <p class="author">Ayhoe ?? <a
 href="http://www.associatedcontent.com/article/335780/enigma_classic_memory_game_meets_fastpaced.html"
 >AssociatedContent</a>

Modified: homepage/input/top_news_ru.html
===================================================================
--- homepage/input/top_news_ru.html	2009-02-07 00:35:10 UTC (rev 1521)
+++ homepage/input/top_news_ru.html	2009-02-07 13:48:43 UTC (rev 1522)
@@ -8,38 +8,49 @@
          ????? ????? ???????? ???????? ??????? ?? ???? Enigma.
          
          <h4><span class="date">2007-05-26:</span> ???????? Enigma 1.01</h4>
-         Enigma 1.01 - ??? ?????? ? ???????????? ??????, ??????????????? ???????? ? ??????????? ??????????????? ?????????????.
+         Enigma 1.01 &mdash; ??? ?????? ? ???????????? ??????, ???????????????
+	 ???????? ? ??????????? ??????????????? ?????????????.
          
          <h4><span class="date">2007-05-26:</span> ???????? Enigma 1.01</h4>
-         ?????? ???????? ??? ??????, ??????? Mac OS X. ????????? ???????? ????????? ???????.
+         ?????? ???????? ??? ??????, ??????? Mac OS X. ??????????? ????? ????????
+	 ? ????????? ????????.
          
          <h4><span class="date">2007-07-27:</span> 100 000 ????????</h4>
-         ?????? Enigma 1.01 ? ????? ??? ??? ???????? ??? ????? 100 000 ???.
+         ?????? Enigma 1.01 ? ????? ??? ??? ???????? ??? ????? 100 000 ???.
          
-         <h4><span class="date">2007-09-01:</span> 100 ????? ???????? ??? ???? ??????????</h4>
-         ?? ???????????? ???????????? &quot;dpl&quot;, ??????? 100-? ????? ??????? Enigma 1.00 ??????? ??? ???? ??????????.
+         <h4><span class="date">2007-09-01:</span> 100 ????? ???????? ??? ????
+	 ??????????</h4>
+         ?? ???????????? ???????????? &quot;dpl&quot;, ??????? 100-? ?????
+	 ??????? Enigma 1.00 ??????? ??? ???? ??????????.
          
          <h4><span class="date">2007-10-02:</span> ????? 10,000 ?????? ???????</h4>
-         ? ???? ?????? ?? ???????? ??????? ? 10,000 ??????. ??????? ???? ????????? ???????, ??????? ????????? ???? ??????!
+         ? ???? ?????? ?? ???????? ??????? ? 10,000 ??????. ??????? ????
+	 ????????? ???????, ??????? ????????? ???? ??????!
          
          <h4><span class="date">2008-01-02:</span> ??????????? IV/2!</h4>
          ??????? Enigma ?????? ???? ??????????? ?????? ????!
-         ???????? ??? ? 2008 ???? ?? ?????? ??? ????? ????? ???????&mdash;????????? ??? ? ???????? ????????&hellip;
+         ???????? ??? ? 2008 ???? ?? ?????? ??? ????? ????? ??????? &mdash;
+	 ????????? ??? ? ???????? ????????&hellip;
          
          <h4><span class="date">2008-02-01:</span> ?????? 100%!</h4>
-         ??????????? ?????? ????????? ???????????? Ryujun, ??????? ?????? ??????? ????? ??? ?????? Enigma 1.01 ?
-	?????????? ? ??????? ???????.
+         ??????????? ?????? ????????? ???????????? Ryujun, ??????? ??????
+	 ??????? ????? ??? ?????? Enigma 1.01 ?	?????????? ? ??????? ???????.
          
          <h4><span class="date">2008-03-14:</span> 500,000 ????????!</h4>
-         ? 2 ?? 3 ?????????????? ???????, Enigma ???????? ??????? ? 500.000 ???????? ? ??????? Berlios. ? ??? ?????? ???????? ? ?????? 0.92 ?? 1.01. ??????? ???? ???????, ????????? ??????? ??? ????? ?????????!
+         ? 2 ?? 3 ?????????????? ???????, Enigma ???????? ??????? ? 500.000
+	 ???????? ? ??????? Berlios. ? ??? ?????? ???????? ? ?????? 0.92 ?? 1.01.
+	 ??????? ???? ???????, ????????? ??????? ??? ????? ?????????!
          
          
          <h4><span class="date">2008-06-17:</span> ??? ??????????</h4>
-         ?????? ? ??? ???? ??????????? ?? Jacob ? ??? ?????????? ??, ??????? ?? ?????? ????????
-         <a href="$$lotm_200805$$#jacob">?????</a>. ? ???, ?? ???????? ?? Shoki, ???????? ?????
-         ?????? ???? 2007, <a href="$$lotm_200703$$">&quot;Island
-         Labyrinth&quot;</a>. ?? ?????? ??????? ?? <a href="$$imagedir$$/lotm/lotm_200703_shoki.jpg">?????</a>.
+         ?????? ? ??? ???? ??????????? ?? Jacob ? ??? ?????????? ??, ??????? ??
+	 ?????? ???????? <a href="$$lotm_200805$$#jacob">?????</a>. ? ???, ??
+	 ???????? ?? Shoki, ???????? ????? ?????? ???? 2007,
+	 <a href="$$lotm_200703$$">&quot;Island Labyrinth&quot;</a>. ?? ??????
+	 ??????? ?? <a href="$$imagedir$$/lotm/lotm_200703_shoki.jpg">?????</a>.
 
          <h4><span class="date">2008-08-17:</span> ???????????!</h4>
-         Mecke ??????? ?????? ??? ????? ??????????? ??????? ??? ????? ???????? ???????? &mdash; &quot;???????? ?? ???????&quot;! ? ?????? ??? ???????????, ????? ? ???????????? ??????? <a href="$$marbleous_1$$">?????</a>.
+         Mecke ??????? ?????? ??? ????? ??????????? ??????? ??? ????? ????????
+	 ???????? &mdash; &quot;???????? ?? ???????&quot;! ? ?????? ???
+	 ???????????, ????? ? ???????????? ??????? <a href="$$marbleous_1$$">?????</a>.
 



From raoul at mail.berlios.de  Sat Feb  7 15:07:36 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 7 Feb 2009 15:07:36 +0100
Subject: [Enigma-game-svn] r1523 - in trunk/data/levels: enigma_esprit
	enigma_oxyd enigma_oxydmagnum enigma_peroxyd
Message-ID: <200902071407.n17E7aca027596@sheep.berlios.de>

Author: raoul
Date: 2009-02-07 15:07:34 +0100 (Sat, 07 Feb 2009)
New Revision: 1523

Modified:
   trunk/data/levels/enigma_esprit/esprit100_1.xml
   trunk/data/levels/enigma_esprit/esprit26_3.xml
   trunk/data/levels/enigma_esprit/esprit67_2.xml
   trunk/data/levels/enigma_esprit/index.xml
   trunk/data/levels/enigma_oxyd/index.xml
   trunk/data/levels/enigma_oxyd/oxyd11_1.xml
   trunk/data/levels/enigma_oxyd/oxyd15_1.xml
   trunk/data/levels/enigma_oxyd/oxyd17_1.xml
   trunk/data/levels/enigma_oxyd/oxyd28_1.xml
   trunk/data/levels/enigma_oxyd/oxyd31_1.xml
   trunk/data/levels/enigma_oxyd/oxyd37_1.xml
   trunk/data/levels/enigma_oxyd/oxyd52_1.xml
   trunk/data/levels/enigma_oxyd/oxyd79_1.xml
   trunk/data/levels/enigma_oxyd/oxyd95_1.xml
   trunk/data/levels/enigma_oxydmagnum/index.xml
   trunk/data/levels/enigma_oxydmagnum/oxm13_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm27_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm28_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm33_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm37_2.xml
   trunk/data/levels/enigma_oxydmagnum/oxm58_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm78_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm84_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm96_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxm99_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxmg17_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxmg18_1.xml
   trunk/data/levels/enigma_oxydmagnum/oxmg19_1.xml
   trunk/data/levels/enigma_peroxyd/index.xml
   trunk/data/levels/enigma_peroxyd/peroxyd27_1.xml
   trunk/data/levels/enigma_peroxyd/peroxyd28_1.xml
   trunk/data/levels/enigma_peroxyd/peroxyd29_2.xml
Log:
-> Object renamings and level updates for dejavu levels
-> Some minor fixes concerning the el:engine



Modified: trunk/data/levels/enigma_esprit/esprit100_1.xml
===================================================================
--- trunk/data/levels/enigma_esprit/esprit100_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_esprit/esprit100_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="esprit 100" el:subtitle="esprit 100" el:id="ss_esp100"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
       <el:author  el:name="Sven Siggelkow" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Sven Siggelkow</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -17,12 +17,6 @@
       <el:score el:easy="-" el:difficult="-"/>
     </el:info>
     <el:luamain><![CDATA[
--- Feb.'06: Replaced some characters to get pure ASCII, Raoul 
-                                                               
-world.DefineSimpleStoneMovable("oneway_move", "metal", 0)
-
-display.DefineAlias("oneway_move", "st-oneway_black-n")
-
 cells={}
 
 -- only for testing
@@ -82,7 +76,7 @@
 cells["m"]=cell{floor="fl-metal"}
 cells["p"]=cell{floor="fl-metal",stone="st-plain"}
 cells["v"]=cell{floor="fl-metal",stone="st-oneway-s"}   
-cells["q"]=cell{floor="fl-metal",stone="oneway_move"}
+cells["q"]=cell{floor="fl-metal",stone="st-rock3_move"}
 cells["'"]=cell{floor="fl-metal", item={"it-wormhole",{targetx=41.5, targety=8.5, strength=0}}}
 cells["("]=cell{floor="fl-metal", item={"it-wormhole",{targetx=40.5, targety=3.5, strength=0}}}
 cells[")"]=cell{floor="fl-metal", item={"it-wormhole",{targetx=45.5, targety=4.5, strength=0}}}
@@ -165,19 +159,18 @@
 oxyd(43,35)
 
 function door23()
-SendMessage("door2", "openclose")  
-SendMessage("door3", "openclose")
+    SendMessage("door2", "openclose")  
+    SendMessage("door3", "openclose")
 end
 
 function door45()
-SendMessage("door4", "openclose")  
-SendMessage("door5", "openclose")
+    SendMessage("door4", "openclose")  
+    SendMessage("door5", "openclose")
 end
 
 fill_floor("fl-leaves",38,24,20,13)
 fill_floor("fl-metal",38,12,20,13)
 
-
 ------------------ Starting Points ------------------------------------
 
 -- starting point
@@ -189,23 +182,11 @@
 -- last but two puzzle (wormhole room)
 --set_actor("ac-blackball", 39.5,11.5, {player=0})
 
--- last but one puzzle (Keyhole room)                               
+-- last but one puzzle (Keyhole room)                       
 --set_actor("ac-blackball", 47.5,17.5, {player=0})
 
 -- last puzzle (meadow pushing)                               
 --set_actor("ac-blackball", 48,30.5, {player=0})
-
-
-
-
-
-
-
-
-
-
-
-
     ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">

Modified: trunk/data/levels/enigma_esprit/esprit26_3.xml
===================================================================
--- trunk/data/levels/enigma_esprit/esprit26_3.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_esprit/esprit26_3.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -3,79 +3,53 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Bank-O-Mat" el:subtitle="esprit 26" el:id="ss4"/>
-      <el:version el:score="3" el:release="3" el:revision="3" el:status="released"/>
+      <el:version el:score="3" el:release="3" el:revision="4" el:status="released"/>
       <el:author  el:name="Sven Siggelkow" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Sven Siggelkow</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.10">
-      </el:compatibility>
+      <el:compatibility el:enigma="1.10"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="-" el:difficult="-"/>
     </el:info>
     <el:luamain><![CDATA[
-ti[" "] = {"fl-bumps"}
+ti[" "] = {"fl_pinkbumps"}
 ti["#"] = {"st_fake_quake"}
 ti["D"] = {"st_death"}
 ti["O"] = {"st_oxyd"}
 ti["."] = {"it_seed"}
 ti["S"] = {"st_switch_black", target="get_money"}
-ti["G"] = {"st-glass1"}
-ti["|"] = {"st_door", name="door#", flavor="c"}
-ti["1"] = {"st_coinslot", _id=1, interval_m=COIN_IGNORE, target="open_door"}
-ti["2"] = {"st_coinslot", _id=2, interval_m=COIN_IGNORE, target="open_door"}
-ti["3"] = {"st_coinslot", _id=3, interval_m=COIN_IGNORE, target="open_door"}
-ti["4"] = {"st_coinslot", _id=4, interval_m=COIN_IGNORE, target="open_door"}
-ti["5"] = {"st_coinslot", _id=5, interval_m=COIN_IGNORE, target="open_door"}
-ti["6"] = {"st_coinslot", _id=6, interval_m=COIN_IGNORE, target="open_door"}
-ti["7"] = {"st_coinslot", _id=7, interval_m=COIN_IGNORE, target="open_door"}
-ti["8"] = {"st_coinslot", _id=8, interval_m=COIN_IGNORE, target="open_door"}
+ti["G"] = {"st_lightglass"}
+ti["|"] = {"st_door", name="doors#", flavor="c"}
+ti["C"] = {"st_coinslot", interval_m=COIN_IGNORE, target="counter", action="signal"}
 ti["@"] = {"#ac_marble_black"}
 
-w, h = wo(ti, " ", {
-"#######################################",
-"#                GS#                  #",
-"#    1.2 3 4       #                  #",
-"#                  #                  #",
-"#                  #                  #",
-"#                  |   D              #",
-"# O     @          |   D            O #",
-"#                  |   D              #",
-"#                  #                  #",
-"#                  #                  #",
-"#    5 6 7 8       #                  #",
-"#                  #                  #",
-"#######################################"
-})
+wo(ti, " ", {
+    "#######################################",
+    "#                GS#                  #",
+    "#    C.C C C       #                  #",
+    "#                  #                  #",
+    "#                  #                  #",
+    "#                  |   D              #",
+    "# O     @          |   D            O #",
+    "#                  |   D              #",
+    "#                  #                  #",
+    "#                  #                  #",
+    "#    C C C C       #                  #",
+    "#                  #                  #",
+    "#######################################"})
 
-reserve = 8
+wo:add({"ot_counter", "counter", state=0, target="doors#*", action_8="open"})
+
+local reserve = 8
 function get_money()
     if reserve > 0 then
         reserve = reserve -1
         wo[po(16,1)] = {"it_coin_m"}
     else
-        wo[po(16,1)] = {"it-document", text="text1"}
+        wo[po(16,1)] = {"it_document", text="text1"}
     end
 end
-
-doors = {false, false, false, false, false, false, false, false}
-door_group = no["door#*"]
-function open_door(value, sender)
-    doors[sender["_id"]] = value
-    counter = 0
-    for k, v in pairs(doors) do
-        if v == true then
-            counter = counter +1
-        end
-    end
-    if counter == 8 then
-        door_group:message("open")
-    else
-        door_group:message("close")
-    end
-end
-
-wo:shuffleOxyd()
-]]></el:luamain>
+ ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">
         <el:english el:translate="false"/>

Modified: trunk/data/levels/enigma_esprit/esprit67_2.xml
===================================================================
--- trunk/data/levels/enigma_esprit/esprit67_2.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_esprit/esprit67_2.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="esprit 67" el:subtitle="esprit 67" el:id="martin54"/>
-      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
       <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
@@ -18,9 +18,9 @@
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = false
 
-ti[" "] = {"fl-rough"}
-ti["-"] = {"fl-rough", friction=5.0, adhesion=1.2}
-ti["#"] = {"st-rock1"}
+ti[" "] = {"fl_rough"}
+ti["-"] = {"fl_rough", friction=5.0, adhesion=1.2}
+ti["#"] = {"st_granite"}
 ti["D"] = {"st_death"}
 ti["O"] = {"st_oxyd", flavor="a"}
 ti["@"] = ti["-"] .. {"ac_marble_black", 1.0, 0.5, essential=-1}

Modified: trunk/data/levels/enigma_esprit/index.xml
===================================================================
--- trunk/data/levels/enigma_esprit/index.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_esprit/index.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="D?j?-vu" location="20100" network="false" owner="Enigma Team" release="1" revision="5" title="Esprit"/>
+  <info enigma="1.00" group="D?j?-vu" location="20100" network="false" owner="Enigma Team" release="1" revision="6" title="Esprit"/>
 
   <attributes/>
 
@@ -31,7 +31,7 @@
     <level _seq="23" _title="esprit 23" _xpath="./esprit23_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp23" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="esprit 24" _xpath="./esprit24_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp24" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="25" _title="esprit 25" _xpath="./esprit25_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp25" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="26" _title="Bank-O-Mat" _xpath="./esprit26_3" author="Sven Siggelkow" ctrl="force" easy="false" id="ss4" rel="3" rev="3" score="3" target="time" unit="duration"/>
+    <level _seq="26" _title="Bank-O-Mat" _xpath="./esprit26_3" author="Sven Siggelkow" ctrl="force" easy="false" id="ss4" rel="3" rev="4" score="3" target="time" unit="duration"/>
     <level _seq="27" _title="esprit 27" _xpath="./esprit27_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp27" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="esprit 28" _xpath="./esprit28_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp28" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="esprit 29" _xpath="./esprit29_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp29" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -65,7 +65,7 @@
     <level _seq="57" _title="esprit 63" _xpath="./esprit63_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp63" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="esprit 65" _xpath="./esprit65_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp65" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="59" _title="esprit 66" _xpath="./esprit66_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp66" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="60" _title="esprit 67" _xpath="./esprit67_2" author="Martin Hawlisch" ctrl="force" easy="true" id="martin54" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="60" _title="esprit 67" _xpath="./esprit67_2" author="Martin Hawlisch" ctrl="force" easy="true" id="martin54" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="61" _title="esprit 68" _xpath="./esprit68_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp68" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="62" _title="esprit 69" _xpath="./esprit69_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp69" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="63" _title="- Meditation -" _xpath="./esprit70_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp70" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -96,7 +96,7 @@
     <level _seq="88" _title="esprit 97" _xpath="./esprit97_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp97" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="89" _title="esprit 98" _xpath="./esprit98_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp98" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="90" _title="esprit 99" _xpath="./esprit99_1" author="Sven Siggelkow" ctrl="force" easy="false" id="ss_esp99" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="91" _title="esprit 100" _xpath="./esprit100_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss_esp100" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="91" _title="esprit 100" _xpath="./esprit100_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss_esp100" rel="1" rev="1" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_oxyd/index.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/index.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/index.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="D?j?-vu" location="20200" network="false" owner="Enigma Team" release="1" revision="4" title="Oxyd"/>
+  <info enigma="1.00" group="D?j?-vu" location="20200" network="false" owner="Enigma Team" release="1" revision="5" title="Oxyd"/>
 
   <attributes/>
 
@@ -15,19 +15,19 @@
     <level _seq="7" _title="Linear Accelerator" _xpath="./oxyd08_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin36" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="8" _title="Demolition Squad" _xpath="./oxyd09_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried75" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="9" _title="- Meditation -" _xpath="./oxyd10_1" author="Daniel Heck" ctrl="force" easy="false" id="daniel1" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="10" _title="Oxyd 11" _xpath="./oxyd11_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061221ulf009" rel="1" rev="69" score="1" target="time" unit="duration"/>
+    <level _seq="10" _title="Oxyd 11" _xpath="./oxyd11_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061221ulf009" rel="1" rev="70" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="On the Flip Side" _xpath="./oxyd13_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin10" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="12" _title="Oxyd 15" _xpath="./oxyd15_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061221ulf010" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="12" _title="Oxyd 15" _xpath="./oxyd15_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061221ulf010" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="13" _title="Look Alike" _xpath="./oxyd16_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin61" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="14" _title="Oxyd 17" _xpath="./oxyd17_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061221ulf011" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="14" _title="Oxyd 17" _xpath="./oxyd17_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061221ulf011" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="More Speed" _xpath="./oxyd18_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin63" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="16" _title="Oxyd 20" _xpath="./oxyd20_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxyd20" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="Bad Punball" _xpath="./oxyd22_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin59" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="Twin Rooms" _xpath="./oxyd23_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried71" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Proper Order" _xpath="./oxyd26_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried79" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="20" _title="Oxyd 28" _xpath="./oxyd28_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070104ulf017" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="20" _title="Oxyd 28" _xpath="./oxyd28_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070104ulf017" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="21" _title="- Meditation -" _xpath="./oxyd30_1" author="Siegfried Fennig" ctrl="force" easy="false" id="meditation9" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="22" _title="Oxyd 31" _xpath="./oxyd31_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061222ulf012" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="22" _title="Oxyd 31" _xpath="./oxyd31_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20061222ulf012" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Tunnel System" _xpath="./oxyd33_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried98" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="Oxyd 37" _xpath="./oxyd37_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20060629ulf005" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="25" _title="The Amazing Maze" _xpath="./oxyd38_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss_ox38" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -37,10 +37,10 @@
     <level _seq="29" _title="Soaring High" _xpath="./oxyd54_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried101" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="30" _title="Oxyd 70" _xpath="./oxyd70_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxyd70" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="31" _title="Oxyd 77" _xpath="./oxyd77_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxyd77" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="32" _title="Oxyd 79" _xpath="./oxyd79_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070103ulf015" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="32" _title="Oxyd 79" _xpath="./oxyd79_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070103ulf015" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Oxyd 90" _xpath="./oxyd90_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxyd90" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="34" _title="So Many Doors" _xpath="./oxyd93_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level9b" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="35" _title="Oxyd 95" _xpath="./oxyd95_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070103ulf014" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="35" _title="Oxyd 95" _xpath="./oxyd95_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070103ulf014" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Oxyd Link 1" _xpath="./oxydlink01_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxyd2p1" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Land of the Doors" _xpath="./oxydlink02_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin65" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="38" _title="Oxyd Link 3" _xpath="./oxydlink03_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxyd2p3" rel="1" rev="0" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_oxyd/oxyd11_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd11_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd11_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,23 +1,17 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 11"
-        el:subtitle="Oxyd 11"
-        el:id="20061221ulf009"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 11" el:subtitle="Oxyd 11" el:id="20061221ulf009"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 70 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1" >
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
         <el:dependency el:path="lib/libpuzzle" el:id="lib/libpuzzle" el:release="2" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="01:00" el:difficult="01:00"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd15_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd15_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd15_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 15"
-        el:subtitle="Oxyd 15"
-        el:id="20061221ulf010"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 15" el:subtitle="Oxyd 15" el:id="20061221ulf010"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="00:39" el:difficult="00:39"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd17_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd17_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd17_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 17"
-        el:subtitle="Oxyd 17"
-        el:id="20061221ulf011"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 17" el:subtitle="Oxyd 17" el:id="20061221ulf011"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="00:40" el:difficult="00:40"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd28_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd28_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd28_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 28"
-        el:subtitle="Oxyd 28"
-        el:id="20070104ulf017"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 28" el:subtitle="Oxyd 28" el:id="20070104ulf017"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="02:12" el:difficult="02:12"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd31_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd31_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd31_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 31"
-        el:subtitle="Oxyd 31"
-        el:id="20061222ulf012"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 31" el:subtitle="Oxyd 31" el:id="20061222ulf012"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="00:25" el:difficult="00:25"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd37_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd37_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd37_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,20 +1,14 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 37"
-        el:subtitle="Oxyd 37"
-        el:id="20060629ulf005"/>
+      <el:identity el:title="Oxyd 37" el:subtitle="Oxyd 37" el:id="20060629ulf005"/>
       <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="0.92" el:engine="oxyd1"/>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="-" el:difficult="00:24"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd52_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd52_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd52_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,20 +1,14 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Moonwalking"
-        el:subtitle="Oxyd 52"
-        el:id="20060629ulf006"/>
+      <el:identity el:title="Moonwalking" el:subtitle="Oxyd 52" el:id="20060629ulf006"/>
       <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="0.92" el:engine="oxyd1"/>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="-" el:difficult="00:19"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd79_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd79_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd79_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 79"
-        el:subtitle="Oxyd 79"
-        el:id="20070103ulf015"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 79" el:subtitle="Oxyd 79" el:id="20070103ulf015"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="00:24" el:difficult="00:24"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxyd/oxyd95_1.xml
===================================================================
--- trunk/data/levels/enigma_oxyd/oxyd95_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxyd/oxyd95_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd 95"
-        el:subtitle="Oxyd 95"
-        el:id="20070103ulf014"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd 95" el:subtitle="Oxyd 95" el:id="20070103ulf014"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd1">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="00:28" el:difficult="00:28"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxydmagnum/index.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/index.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/index.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="D?j?-vu" location="20400" network="false" owner="Enigma Team" release="1" revision="3" title="Oxyd Magnum"/>
+  <info enigma="1.00" group="D?j?-vu" location="20400" network="false" owner="Enigma Team" release="1" revision="4" title="Oxyd Magnum"/>
 
   <attributes/>
 
@@ -14,7 +14,7 @@
     <level _seq="6" _title="- Meditation -" _xpath="./oxm10_1" author="Petr Machata" ctrl="force" easy="false" id="oxm010" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="7" _title="Marbles &amp; Mountains" _xpath="./oxm11_1" author="Petr Machata" ctrl="force" easy="false" id="oxm011" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="8" _title="Laser Room" _xpath="./oxm12_1" author="Petr Machata" ctrl="force" easy="false" id="oxm012" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="9" _title="Oxyd Magnum 13" _xpath="./oxm13_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070105ulf018" rel="1" rev="68" score="1" target="time" unit="duration"/>
+    <level _seq="9" _title="Oxyd Magnum 13" _xpath="./oxm13_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20070105ulf018" rel="1" rev="69" score="1" target="time" unit="duration"/>
     <level _seq="10" _title="Black or White" _xpath="./oxm14_1" author="Martin Hawlisch" ctrl="force" easy="false" id="oxm14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="Pull Me!" _xpath="./oxm16_1" author="Petr Machata" ctrl="force" easy="false" id="oxm016" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="- Meditation -" _xpath="./oxm20_1" author="Petr Machata" ctrl="force" easy="false" id="oxm020" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -23,7 +23,7 @@
     <level _seq="15" _title="Hover Doors" _xpath="./oxm27_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried81" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="16" _title="Land of Impulses" _xpath="./oxm28_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried89" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="Follow the Light" _xpath="./oxm33_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin49" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="18" _title="Tilt" _xpath="./oxm37_2" author="Martin Hawlisch" ctrl="force" easy="false" id="martin51" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="18" _title="Tilt" _xpath="./oxm37_2" author="Martin Hawlisch" ctrl="force" easy="false" id="martin51" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Oxyd Magnum 40" _xpath="./oxm40_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxydmagnum40" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="Light and Doors" _xpath="./oxm58_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried91" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="21" _title="Sensor Fields" _xpath="./oxm78_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried84" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -32,7 +32,7 @@
     <level _seq="24" _title="Hall of Mirrors" _xpath="./oxm96_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried96" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="25" _title="Letter Bomb" _xpath="./oxm99_1" author="Siegfried Fennig" ctrl="force" easy="false" id="siegfried97" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="Magnum 100" _xpath="./oxm100_1" author="Sven Siggelkow" ctrl="force" easy="true" id="ss_mag100" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="27" _title="Oxyd Magnum Gold 17" _xpath="./oxmg17_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxydmagnumgold17" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="27" _title="Oxyd Magnum Gold 17" _xpath="./oxmg17_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxydmagnumgold17" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Oxyd Magnum Gold 18" _xpath="./oxmg18_1" author="Edward" ctrl="force" easy="false" id="oxydmagnumgold18" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Oxyd Magnum Gold 19" _xpath="./oxmg19_1" author="Raoul Bourquin" ctrl="force" easy="false" id="oxydmagnumgold19" rel="1" rev="0" score="1" target="time" unit="duration"/>
   </levels>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm13_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm13_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm13_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,22 +1,16 @@
 <?xml version="1.0" encoding="utf-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
-  xmlns:el="http://enigma-game.org/schema/level/1">
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Oxyd Magnum 13"
-        el:subtitle="Oxyd Magnum 13"
-        el:id="20070105ulf018"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 68 $" el:status="released"/>
-      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de"
-        el:homepage="http://ulf.zeitform.de"/>
+      <el:identity el:title="Oxyd Magnum 13" el:subtitle="Oxyd Magnum 13" el:id="20070105ulf018"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 69 $" el:status="released"/>
+      <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false" el:control="force"
-        el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="00:51" el:difficult="00:51"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_oxydmagnum/oxm27_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm27_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm27_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm28_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm28_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm28_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm33_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm33_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm33_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm37_2.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm37_2.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm37_2.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -3,12 +3,11 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Tilt" el:subtitle="Oxyd Magnum 37" el:id="martin51"/>
-      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
       <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="1.10" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="1.10" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML and new API converted by Leveladministrators</el:code>
@@ -16,10 +15,10 @@
       <el:score el:easy="-" el:difficult="-"/>
     </el:info>
     <el:luamain><![CDATA[
-ti[" "] = {"fl-rough"}
-ti["-"] = {"fl-rough", friction=7.0, adhesion=0.5}
+ti[" "] = {"fl_rough"}
+ti["-"] = {"fl_rough", friction=7.0, adhesion=0.5}
 ti["X"] = {"fl_bridge", name="bridge"}
-ti["#"] = {"st-metal"}
+ti["#"] = {"st_metal"}
 ti["O"] = {"st_oxyd"}
 ti["6"] = {"st_door", name="dn", flavor="d", faces="ns"}
 ti["8"] = {"st_door", name="ds", flavor="d", faces="ns"}
@@ -33,7 +32,7 @@
 ti["4"] = ti["-"] .. {"it_trigger", target="dw"}
 ti["5"] = ti["."] .. {"it_trigger", target="bridge", action=ONOFF, inverse=true}
 
-w, h = wo(ti, " ", {
+wo(ti, " ", {
 "######O#############",
 "#    # #           #",
 "#    #6#           #",
@@ -46,11 +45,10 @@
 "#    # #           #",
 "#    #8#           #",
 "#    # #           #",
-"######O#############"
-})
+"######O#############"})
 
 wo:shuffleOxyd()
-]]></el:luamain>
+ ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">
         <el:english el:translate="false"/>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm58_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm58_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm58_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm78_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm78_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm78_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm84_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm84_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm84_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm96_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm96_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm96_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxm99_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxm99_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxm99_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Siegfried Fennig" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Siegfried Fennig</el:copyright>
       <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="true"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
@@ -68,7 +67,7 @@
          set_item("it-yinyang", i-1, line+.5)
       elseif c == "b" then
          set_actor("ac-whiteball", i-.5,line+.5)
-         set_item("it-yinyang", i-1, line+.5)     
+         set_item("it-yinyang", i-1, line+.5)
         end
     end
 end
@@ -102,10 +101,10 @@
       </el:string>
       <el:string el:key="text1">
         <el:english el:translate="true">Everything's been counted carefully!</el:english>
-      </el:string> 
+      </el:string>
       <el:string el:key="text2">
         <el:english el:translate="true">Parts of the tubes disappear during detonation!</el:english>
-      </el:string> 
+      </el:string>
     </el:i18n>
   </el:protected>
 </el:level>

Modified: trunk/data/levels/enigma_oxydmagnum/oxmg17_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxmg17_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxmg17_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -3,12 +3,11 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Oxyd Magnum Gold 17" el:subtitle="Oxyd Magnum Gold 17" el:id="oxydmagnumgold17"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
       <el:author  el:name="Raoul Bourquin" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Raoul Bourquin</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="-" el:difficult="0:28"/>
     </el:info>
@@ -37,7 +36,7 @@
         elseif c=="-" then
             set_floor("fl-metal",i-1,line)
         end
-    end    
+    end
 end
 
 renderLine(00 , "                    ")
@@ -72,14 +71,14 @@
 set_item("it-springboard",10,10)
 
 -- Special
-bb=set_actor("ac-blackball", 10.0,6.5, {player=0,name=bb})  
+bb=set_actor("ac-blackball", 10.0,6.5, {player=0,name=bb})
 AddRubberBand(bb, enigma.GetStone(0, 6))
-AddRubberBand(bb, enigma.GetStone(19, 6))               
+AddRubberBand(bb, enigma.GetStone(19, 6))
     ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">
         <el:english el:translate="false"/>
-      </el:string> 
+      </el:string>
     </el:i18n>
   </el:protected>
 </el:level>

Modified: trunk/data/levels/enigma_oxydmagnum/oxmg18_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxmg18_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxmg18_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Edward" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Edward</el:copyright>
       <el:license el:type="Donated to Enigma under the projects license" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>

Modified: trunk/data/levels/enigma_oxydmagnum/oxmg19_1.xml
===================================================================
--- trunk/data/levels/enigma_oxydmagnum/oxmg19_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_oxydmagnum/oxmg19_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,7 @@
       <el:author  el:name="Raoul Bourquin" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Raoul Bourquin</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum">
-      </el:compatibility>
+      <el:compatibility el:enigma="0.92" el:engine="oxyd.magnum"/>
       <el:modes el:easy="false" el:single="true" el:network="true"/>
       <el:comments>
         <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
@@ -37,7 +36,7 @@
                 elseif c=="w" then
                    set_floor("fl-acwhite",i-1,line)
         end
-    end    
+    end
 end
 
 renderLine(00 , "                    ")
@@ -57,8 +56,8 @@
 oxyd_shuffle()
 
 -- Special
-set_actor("ac-blackball", 1.5,2.5, {player=0})  
-set_actor("ac-whiteball", 2.5,2.5, {player=1})  
+set_actor("ac-blackball", 1.5,2.5, {player=0})
+set_actor("ac-whiteball", 2.5,2.5, {player=1})
 set_item("it-yinyang",1,2)
 set_item("it-yinyang",2,2)
     ]]></el:luamain>

Modified: trunk/data/levels/enigma_peroxyd/index.xml
===================================================================
--- trunk/data/levels/enigma_peroxyd/index.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_peroxyd/index.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="D?j?-vu" location="20300" network="false" owner="Enigma Team" release="1" revision="4" title="PerOxyd"/>
+  <info enigma="1.00" group="D?j?-vu" location="20300" network="false" owner="Enigma Team" release="1" revision="5" title="PerOxyd"/>
 
   <attributes/>
 
@@ -24,7 +24,7 @@
     <level _seq="16" _title="Physics 101" _xpath="./peroxyd21_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin50" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="On the Beach" _xpath="./peroxyd24_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin16" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="Per.Oxyd #27" _xpath="./peroxyd27_1" author="Ulf Stegemann" ctrl="force" easy="true" id="20060629ulf008" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="19" _title="Per.Oxyd 28" _xpath="./peroxyd28_1" author="Ulf Stegemann" ctrl="force" easy="true" id="20070104ulf016" rel="1" rev="93" score="1" target="time" unit="duration"/>
+    <level _seq="19" _title="Per.Oxyd 28" _xpath="./peroxyd28_1" author="Ulf Stegemann" ctrl="force" easy="true" id="20070104ulf016" rel="1" rev="94" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="Per.Oxyd 29" _xpath="./peroxyd29_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20061222ulf013" rel="2" rev="69" score="2" target="time" unit="duration"/>
     <level _seq="21" _title="- Meditation - " _xpath="./peroxyd30_1" author="Raoul Bourquin" ctrl="force" easy="true" id="peroxyd30" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="- Meditation -" _xpath="./peroxyd40_1" author="Daniel Heck" ctrl="force" easy="false" id="daniel4" rel="1" rev="0" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_peroxyd/peroxyd27_1.xml
===================================================================
--- trunk/data/levels/enigma_peroxyd/peroxyd27_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_peroxyd/peroxyd27_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -7,8 +7,8 @@
       <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92"/>
-      <el:modes el:easy="true" el:single="true" el:network="false" el:control="force" el:scoreunit="duration" el:scoretarget="time"/>
+      <el:compatibility el:enigma="0.92" el:engine="per.oxyd"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
       <el:score el:easy="00:18" el:difficult="00:27"/>
     </el:info>
     <el:luamain><![CDATA[

Modified: trunk/data/levels/enigma_peroxyd/peroxyd28_1.xml
===================================================================
--- trunk/data/levels/enigma_peroxyd/peroxyd28_1.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_peroxyd/peroxyd28_1.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -4,14 +4,14 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Per.Oxyd 28" el:subtitle="Per.Oxyd 28" el:id="20070104ulf016"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 93 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 94 $" el:status="released"/>
       <el:author  el:name="Ulf Stegemann" el:email="ulf-enigma at zeitform.de" el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
+      <el:compatibility el:enigma="0.92" el:engine="per.oxyd">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
       </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false" el:control="force" el:scoreunit="duration" el:scoretarget="time"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
       <el:score el:easy="01:19" el:difficult="01:19"/>
     </el:info>
     <el:luamain><![CDATA[
@@ -52,7 +52,7 @@
 set_item("it-surprise",12,8)
 set_item("it-flagwhite",13,8)
 set_item("it-key",14,8)
-set_item("it-odometer",15,8)
+set_item("it_odometer",15,8)
 set_item("it-coin1",16,8)
 set_item("it-coin1",17,8)
 set_item("it-document",18,8,{text="text1"})

Modified: trunk/data/levels/enigma_peroxyd/peroxyd29_2.xml
===================================================================
--- trunk/data/levels/enigma_peroxyd/peroxyd29_2.xml	2009-02-07 13:48:43 UTC (rev 1522)
+++ trunk/data/levels/enigma_peroxyd/peroxyd29_2.xml	2009-02-07 14:07:34 UTC (rev 1523)
@@ -12,7 +12,7 @@
         el:homepage="http://ulf.zeitform.de"/>
       <el:copyright>Copyright ? 2006 Ulf Stegemann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00">
+      <el:compatibility el:enigma="1.00" el:engine="per.oxyd">
         <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
         <el:dependency el:path="lib/andreas_ghosts" el:id="lib/andreas_ghosts" el:release="1" el:preload="true"/>
       </el:compatibility>



From ral at mail.berlios.de  Sun Feb  8 01:04:20 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 8 Feb 2009 01:04:20 +0100
Subject: [Enigma-game-svn] r1524 - in trunk: data data/schemas src src/stones
Message-ID: <200902080004.n1804KlK006891@sheep.berlios.de>

Author: ral
Date: 2009-02-08 01:04:12 +0100 (Sun, 08 Feb 2009)
New Revision: 1524

Modified:
   trunk/data/api1init.lua
   trunk/data/schemas/objects.xml
   trunk/src/WorldProxy.cc
   trunk/src/ox_extra.cc
   trunk/src/ox_magnum.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/stones/SimpleStones.cc
   trunk/src/stones/SimpleStones.hh
Log:
Trunk 1.1: new API reengineering
- fix blur stone set attribute "flavor"
- fix volcano stone: add missing object declarations:
  - st_volcano_idle
  - st_volcano_active
  - st_volcano_new  (init only)
  - st_volcano_growing (init only)
- fix wrong old API mappings for fl-gradient13/16
- extend st_yinyang:
  - performAction after player switch
  - add attribute "instant" to switch at start of animation
- rename global attributes:
  - SwampSinkSpeed -> SwampSinkTime
  - WaterSinkSpeed -> WaterSinkTime
  - both attributes now represent the time a static marble needs to sink 

Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/data/api1init.lua	2009-02-08 00:04:12 UTC (rev 1524)
@@ -125,10 +125,10 @@
     fl_slope_ine = "fl-gradient10",
     fl_slope_isw = "fl-gradient11",
     fl_slope_inw = "fl-gradient12",
-    fl_slope_ts = "fl-gradient13",
-    fl_slope_tn = "fl-gradient14",
-    fl_slope_te = "fl-gradient15",
-    fl_slope_tw = "fl-gradient16",
+    fl_slope_ts = "fl-gradient14",
+    fl_slope_tn = "fl-gradient13",
+    fl_slope_te = "fl-gradient16",
+    fl_slope_tw = "fl-gradient15",
     fl_space = "fl-space",
     fl_stone = "fl-stone",
     fl_swamp = "fl-swamp",

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/data/schemas/objects.xml	2009-02-08 00:04:12 UTC (rev 1524)
@@ -1824,6 +1824,14 @@
       <attr name="secure"/>
       <msg name="_trigger"/>
     </object>
+    <object name="st_volcano_idle">
+      <attr name="state" value="0"/>
+    </object>
+    <object name="st_volcano_active">
+      <attr name="state" value="1"/>
+    </object>
+    <object name="st_volcano_new" init="true"/>
+    <object name="st_volcano_growing" init="true"/>
     <object name="st_window">
       <attr name="faces" default="s"/>
       <attr name="scratches"/>
@@ -1879,9 +1887,14 @@
     <object name="st_woven"/>
     <object name="st_yellow"/>
     <object name="st_yinyang">
+      <attr name="instant"/>
     </object>
+    <object name="st_yinyang_instant">
+      <attr name="instant" value="true"/>
+    </object>
     <object name="st_yinyang_active">
       <attr name="state" value="1"/>
+      <attr name="instant" value="false"/>
     </object>
   </zoo>
 </objects>

Modified: trunk/src/WorldProxy.cc
===================================================================
--- trunk/src/WorldProxy.cc	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/WorldProxy.cc	2009-02-08 00:04:12 UTC (rev 1524)
@@ -100,10 +100,22 @@
             return server::RubberViolationStrength;
         } else if (key == "SlopeStrength") {
             return server::SlopeForce;
-        } else if (key == "SwampSinkSpeed") {
-            return server::SwampSinkSpeed;
-        } else if (key == "WaterSinkSpeed") {
-            return server::WaterSinkSpeed;
+        } else if (key == "SwampSinkTime") {
+            if (server::SwampSinkSpeed > 0) {
+                if (server::SwampSinkSpeed >= 1000)
+                    return 0;
+                else
+                    return 7.0 / server::SwampSinkSpeed;
+            } else
+                return Value();  // infinite time
+        } else if (key == "WaterSinkTime") {
+            if (server::WaterSinkSpeed > 0) {
+                if (server::WaterSinkSpeed >= 1000)
+                    return 0;
+                else
+                    return 7.0 / server::WaterSinkSpeed;
+            } else
+                return Value();  // infinite time
         } else if (key == "WormholeStrength") {
             return server::WormholeForce;
         } else if (key == "WormholeRange") {
@@ -192,10 +204,24 @@
             server::RubberViolationStrength = val;
         } else if (key == "SlopeStrength") {
             server::SlopeForce = val;
-        } else if (key == "SwampSinkSpeed") {
-            server::SwampSinkSpeed = val;
-        } else if (key == "WaterSinkSpeed") {
-            server::WaterSinkSpeed = val;
+        } else if (key == "SwampSinkTime") {
+            if (val.getType() == Value::NIL)
+                server::SwampSinkSpeed = 0;
+            else if ((double)val == 0)
+                server::SwampSinkSpeed = 1000;
+            else {
+                ASSERT((double)val > 0, XLevelRuntime, "SwampSinkTime less zero");
+                server::SwampSinkSpeed = 7.0 / (double)val;
+            }
+        } else if (key == "WaterSinkTime") {
+            if (val.getType() == Value::NIL)
+                server::WaterSinkSpeed = 0;
+            else if ((double)val == 0)
+                server::WaterSinkSpeed = 1000;
+            else {
+                ASSERT((double)val > 0, XLevelRuntime, "SwampSinkTime less zero");
+                server::WaterSinkSpeed = 7.0 / (double)val;
+            }
         } else if (key == "WormholeStrength") {
             server::WormholeForce = val;
             BroadcastMessage("_updateglobals", "it_wormhole", GRID_ITEMS_BIT);

Modified: trunk/src/ox_extra.cc
===================================================================
--- trunk/src/ox_extra.cc	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/ox_extra.cc	2009-02-08 00:04:12 UTC (rev 1524)
@@ -83,8 +83,8 @@
     UNUSED,              // OxydExtra floor 0x2e
     UNUSED,              // OxydExtra floor 0x2f
     UNUSED,              // OxydExtra floor 0x30
-    "fl_slope_te",     // OxydExtra floor 0x31
-    "fl_slope_tw",     // OxydExtra floor 0x32
+    "fl_slope_tw",     // OxydExtra floor 0x31
+    "fl_slope_te",     // OxydExtra floor 0x32
     UNUSED,              // OxydExtra floor 0x33
     "fl_rough",          // OxydExtra floor 0x34
     UNUSED,              // OxydExtra floor 0x35

Modified: trunk/src/ox_magnum.cc
===================================================================
--- trunk/src/ox_magnum.cc	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/ox_magnum.cc	2009-02-08 00:04:12 UTC (rev 1524)
@@ -81,10 +81,10 @@
     "fl_slope_ine",            // OxydMagnum floor 0x2c
     "fl_slope_isw",            // OxydMagnum floor 0x2d
     "fl_slope_inw",            // OxydMagnum floor 0x2e
-    "fl_slope_ts",            // OxydMagnum floor 0x2f
-    "fl_slope_tn",            // OxydMagnum floor 0x30
-    "fl_slope_te",            // OxydMagnum floor 0x31
-    "fl_slope_tw",            // OxydMagnum floor 0x32
+    "fl_slope_tn",            // OxydMagnum floor 0x2f
+    "fl_slope_ts",            // OxydMagnum floor 0x30
+    "fl_slope_tw",            // OxydMagnum floor 0x31
+    "fl_slope_te",            // OxydMagnum floor 0x32
     "fl_brick",                 // OxydMagnum floor 0x33 (common was 'fl-rough')
     "fl_brick",                 // OxydMagnum floor 0x34 (common was 'fl-rough')
     UNUSED,                     // OxydMagnum floor 0x35

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/ox_oxyd1.cc	2009-02-08 00:04:12 UTC (rev 1524)
@@ -114,10 +114,10 @@
     "fl_slope_ine",             // Oxyd1 floor 0x2c
     "fl_slope_isw",             // Oxyd1 floor 0x2d
     "fl_slope_inw",             // Oxyd1 floor 0x2e
-    "fl_slope_ts",              // Oxyd1 floor 0x2f
-    "fl_slope_tn",              // Oxyd1 floor 0x30
-    "fl_slope_te",              // Oxyd1 floor 0x31
-    "fl_slope_tw",              // Oxyd1 floor 0x32
+    "fl_slope_tn",              // Oxyd1 floor 0x2f
+    "fl_slope_ts",              // Oxyd1 floor 0x30
+    "fl_slope_tw",              // Oxyd1 floor 0x31
+    "fl_slope_te",              // Oxyd1 floor 0x32
     "fl_brick",                 // Oxyd1 floor 0x33
     "fl_brick",                 // Oxyd1 floor 0x34 (common was 'fl-rough')
     UNUSED,                     // Oxyd1 floor 0x35

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/ox_peroxyd.cc	2009-02-08 00:04:12 UTC (rev 1524)
@@ -150,10 +150,10 @@
     "fl_slope_ine",            // PerOxyd floor 0x2c
     "fl_slope_isw",            // PerOxyd floor 0x2d
     "fl_slope_inw",            // PerOxyd floor 0x2e
-    "fl_slope_ts",            // PerOxyd floor 0x2f (flat force)
-    "fl_slope_tn",            // PerOxyd floor 0x30 (flat force)
-    "fl_slope_te",            // PerOxyd floor 0x31 (flat force)
-    "fl_slope_tw",            // PerOxyd floor 0x32 (flat force)
+    "fl_slope_tn",            // PerOxyd floor 0x2f (flat force)
+    "fl_slope_ts",            // PerOxyd floor 0x30 (flat force)
+    "fl_slope_tw",            // PerOxyd floor 0x31 (flat force)
+    "fl_slope_te",            // PerOxyd floor 0x32 (flat force)
     "fl_rough",                 // PerOxyd floor 0x33 (common was 'fl-rough', should be a 'fl-paper')(only level 75)
     "fl_rough",                 // PerOxyd floor 0x34
     UNUSED,                     // PerOxyd floor 0x35

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/stones/SimpleStones.cc	2009-02-08 00:04:12 UTC (rev 1524)
@@ -41,12 +41,14 @@
     }
 
     void BlurStone::setAttr(const string& key, const Value &val) {
-        if (key == "flavor" && isDisplayable()) {
+        if (key == "flavor") {
             std::string fs = val.to_string();
             if (fs == "straight") state = STRAIGHT;
             else if (fs == "cross") state = CROSS;
             else if (fs == "magic") state = MAGIC;
             else ASSERT(false, XLevelRuntime, ecl::strf("Blur stone set known flavor%s", fs.c_str()).c_str());
+            if (isDisplayable())
+                init_model();
             return; 
         } else
             Stone::setAttr(key, val);
@@ -277,8 +279,10 @@
     DEF_TRAITSM(SpitterStone, "st_spitter", st_yinyang, MOVABLE_PERSISTENT);
 
 /* -------------------- Yinyang stone -------------------- */
-    YinyangStone::YinyangStone(int initState) : Stone () {
+    YinyangStone::YinyangStone(int initState, bool isInstant) : Stone () {
         state = initState;
+        if (isInstant)
+            setAttr("instant", true);
     }
     
     std::string YinyangStone::getClass() const {
@@ -302,20 +306,28 @@
     }
     
     void YinyangStone::animcb() {
-        // Switch to other marble
-        player::SwapPlayers();
-        sound::EmitSoundEvent("switchplayer", get_pos().center());
         state = IDLE;
         init_model();
+        if (!getAttr("instant").to_bool())
+            switchPlayer();
     }
     
     void YinyangStone::actor_hit(const StoneContact &sc) {
         if (state == IDLE) {
             state = ACTIVE;
             init_model();
+            if (getAttr("instant").to_bool())
+                switchPlayer();
         }
     }
     
+    void YinyangStone::switchPlayer() {
+        // Switch to other marble
+        player::SwapPlayers();
+        sound::EmitSoundEvent("switchplayer", get_pos().center());
+        performAction(true);        
+    }
+    
     DEF_TRAITSM(YinyangStone, "st_yinyang", st_yinyang, MOVABLE_PERSISTENT);
 
 
@@ -336,6 +348,7 @@
         BootRegister(new PlopStone(), "st_plop_slate");
         BootRegister(new SpitterStone(), "st_spitter");
         BootRegister(new YinyangStone(0), "st_yinyang");
+        BootRegister(new YinyangStone(0, true), "st_yinyang_instant");
         BootRegister(new YinyangStone(1), "st_yinyang_active");
     BOOT_REGISTER_END
 

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-02-07 14:07:34 UTC (rev 1523)
+++ trunk/src/stones/SimpleStones.hh	2009-02-08 00:04:12 UTC (rev 1524)
@@ -27,7 +27,7 @@
 namespace enigma {
 
     /** 
-     * BlurStone (old YinYang)
+     * BlurStone (former YinYang)
      */
     class BlurStone : public Stone {
         CLONEOBJ(BlurStone);
@@ -187,7 +187,7 @@
             ACTIVE      ///< 
         };
     public:
-        YinyangStone(int initState);
+        YinyangStone(int initState, bool isInstant =false);
         
          // Object interface
         virtual std::string getClass() const;        
@@ -203,6 +203,9 @@
 
         // Stone interface
         virtual void actor_hit(const StoneContact &sc);
+        
+    private:
+        void switchPlayer();
     };
 } // namespace enigma
 



From ral at mail.berlios.de  Sun Feb  8 14:45:13 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 8 Feb 2009 14:45:13 +0100
Subject: [Enigma-game-svn] r1525 - trunk/data
Message-ID: <200902081345.n18DjD47000809@sheep.berlios.de>

Author: ral
Date: 2009-02-08 14:45:12 +0100 (Sun, 08 Feb 2009)
New Revision: 1525

Modified:
   trunk/data/api2init.lua
Log:
Trunk 1.1: new API reengineering
- improve resolver composer:
  - fix avoid addition of default all space key tile on composition
  - remove special 3 char key support that did compose by 2 + 1 char matches
  - add configuration argument: a string template that defaults to "123456789":
    - it defines the key decomposition to be applied
    - key chars are checked in number sequence and combination
    - the default is a total decomposition starting with the first key char
    - for 3 char the template "122" causes the first char to be checked first,
      the remaining 2 char key padded with a leading space char to be resolved
      by the chained resolver without further decomposition
  - the template allows a full chaining of composer and autotile resolvers
  - add error handling for configuration arguments
- improve resolver autotile:
  - resolve existing key combinations that priorize auto generated tiles via
    resolver chain


Modified: trunk/data/api2init.lua
===================================================================
--- trunk/data/api2init.lua	2009-02-08 00:04:12 UTC (rev 1524)
+++ trunk/data/api2init.lua	2009-02-08 13:45:12 UTC (rev 1525)
@@ -467,17 +467,23 @@
             
             if #key == #rule[1] and string.sub(key, 1, -2) == string.sub(rule[1], 1, -2)
                     and first <= candidate and candidate <= last then
-                if ti[key] == nil then
+                local tile = evaluator(context[3], key, x, y)
+                if tile == nil then
                     res.autotile_newtile(key, ti[rule[3]], candidate - first + 1)
+                    return ti[key]
+                else
+                    return tile
                 end
-                return ti[key]
             end
         elseif string.find(key, rule[1], 1, true) == 1 then
             -- prefix based substitution
-            if ti[key] == nil then
+            local tile = evaluator(context[3], key, x, y)
+            if tile == nil then
                 res.autotile_newtile(key, ti[rule[2]], string.sub(key, #(rule[1]) + 1))
+                return ti[key]
+            else
+                return tile
             end
-            return ti[key]
         end
     end
     return evaluator(context[3], key, x, y)
@@ -521,31 +527,48 @@
     if tile ~= nil then
         return tile
     end
+    local template = context[4]
+    if template == nil then
+        template = "123456789"
+    end
     -- try to compose tile
-    for i = #key, 1, -1 do
-        local subkey = string.rep(" ", i-1) .. string.sub(key, i, i) .. string.rep(" ", #key - i)
-        local subtile = evaluator(context[3], subkey, x, y)
-        if subtile == nil then
-            return nil
+    for i = 1, #key do
+        local subkey = ""
+        local ic = "" .. i
+        for j = 1, #key do
+            if template:sub(j, j) == ic then
+                subkey = subkey .. key:sub(j, j)
+            else
+                subkey = subkey .. " "
+            end
         end
-        if tile == nil then
-            tile = subtile
-        else
-            tile = subtile .. tile
-        end
-        if #key == 3 then
-            subkey = string.sub(key, 1, i-1) .. " " .. string.sub(key, i+1)
-            local subtile2 = evaluator(context[3], subkey, x, y)
-            if subtile2 ~= nil then
-                return subtile2 .. subtile
+        if subkey ~= string.rep(" ", #key) then
+            local subtile = evaluator(context[3], subkey, x, y)
+            if subtile == nil then
+                return nil
             end
+            if tile == nil then
+                tile = subtile
+            else
+                tile = tile .. subtile
+            end
         end
     end
     return tile
 end
 
-function res.composer(subresolver)
-    local context = {res.composer_implementation, nil, subresolver}
+function res.composer(subresolver, ...)
+    local args = {...}
+    local template = nil
+    if #args >  1 then
+        error("Resolver composer did not expect more than one argument" ,2)
+    elseif #args == 1 then
+        if type(args[1]) ~= "string" then
+            error("Resolver composer did expect string as first argument" ,2)
+        end
+        template = args[1]
+    end
+    local context = {res.composer_implementation, nil, subresolver, template}
     return context
 end
 



From ral at mail.berlios.de  Sun Feb  8 15:13:21 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 8 Feb 2009 15:13:21 +0100
Subject: [Enigma-game-svn] r1526 - team_levelpacks/team_test_new_api
Message-ID: <200902081413.n18EDLVt003644@sheep.berlios.de>

Author: ral
Date: 2009-02-08 15:13:14 +0100 (Sun, 08 Feb 2009)
New Revision: 1526

Added:
   team_levelpacks/team_test_new_api/ralT081_1.xml
Modified:
   team_levelpacks/team_test_new_api/ralT058_1.xml
Log:
Test Level new API:
- added level for autocomposer resolver combination


Modified: team_levelpacks/team_test_new_api/ralT058_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT058_1.xml	2009-02-08 13:45:12 UTC (rev 1525)
+++ team_levelpacks/team_test_new_api/ralT058_1.xml	2009-02-08 14:13:14 UTC (rev 1526)
@@ -25,6 +25,9 @@
 ti["A"] = {"st_oneway_white_n"}
 ti["a"] = {"st_oneway_black", state=NORTH}
 
+ti["b"] = {"st_oneway_black", "one", state=NORTH}
+ti["B"] = {"st_switch", target="recolor"}
+
 ti["m"] = {"it_magicwand"}
 ti["s"] = {"it_spring_keep"}
 ti["S"] = {"it_springboard"}
@@ -43,10 +46,10 @@
 w, h = wo(ti, " ", {
 "                    ",
 "   v<        <      ",
-"                    ",
+"  b                  ",
 "             S      ",
+"B                    ",
 "                    ",
-"                    ",
 "   vvvvv            ",
 "                    ",
 "            @ m s   ",
@@ -56,8 +59,10 @@
 "            3     67"
 })
 
+function recolor(value, sender)
+    no["one"]["color"] = WHITE - no["one"]["color"]
+end
 
-
   ]]></el:luamain>
     <el:i18n>
 	 <el:string el:key="title">

Added: team_levelpacks/team_test_new_api/ralT081_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT081_1.xml	2009-02-08 13:45:12 UTC (rev 1525)
+++ team_levelpacks/team_test_new_api/ralT081_1.xml	2009-02-08 14:13:14 UTC (rev 1526)
@@ -0,0 +1,70 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test autocomposer new API" el:subtitle="" el:id="20090208ral019"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision$" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["ConserveLevel"] = true
+
+ti["   "] = {"fl_sahara"}
+ti["=  "] = {"fl_tigris"}
+ti[".  "] = {"fl_abyss"}
+ti["~  "] = {"fl_water"}
+ti[";  "] = {"fl_lawn"}
+
+ti["  #"] = {"st_granite"}
+ti["  W"] = {"st_box"}
+ti["  X"] = {"st_oxyd"}
+ti["  G"] = {"st_grate"}
+
+ti[" 2 "] = {"it_coin_s"}
+ti[" s "] = {"it_seed"}
+ti[" c "] = {"it_cherry"}
+ti[" h "] = {"it_hammer"}
+
+ti[" k "] = {"it_key"} 
+
+ti["xxx"] = {"#ac_marble"}  -- priorized by topresolver
+
+ti["templateA"] = {"it_trigger", target="door%%"}
+ti["templateB"] = {"st_door", "door%%"}
+
+ti[" ##"] = {"it_yinyang"}    -- priorized by baseresolver
+
+
+local baseresolver = res.composer(ti, "321")
+local medresolver  = res.autotile(baseresolver, {" A", "templateA"}, {" B", "templateB"})
+local topresolver  = res.composer(medresolver, "122")
+
+w, h = wo(topresolver, "   ", {
+"                                                      ",
+"   =h ;  ; W;2  c ~ G~    #. #.2   X~ X=kG;kG    cG   ",
+"                                                 hG   ",
+"   ;2 ;s       .2 .s       =2 =s        ##      =2#   ",
+"   ;c ;h       .c .h       =c =h       xxx      ~k#   ",
+"                                                ~2G   ",
+"    Aa                     =Ab                        ",
+"    Ba                     =Bb                        "
+})
+
+]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT081_1.xml
___________________________________________________________________
Name: svn:keywords
   + Revision
Name: svn:eol-style
   + native



From ral at mail.berlios.de  Sun Feb  8 20:55:12 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 8 Feb 2009 20:55:12 +0100
Subject: [Enigma-game-svn] r1527 - trunk/doc/reference
Message-ID: <200902081955.n18JtCQT029109@sheep.berlios.de>

Author: ral
Date: 2009-02-08 20:55:03 +0100 (Sun, 08 Feb 2009)
New Revision: 1527

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1: new API reengineering
- refman updates and typo fixes
Note:
- the refman is still not up to date

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-08 14:13:14 UTC (rev 1526)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-08 19:55:03 UTC (rev 1527)
@@ -3597,10 +3597,10 @@
 15
 16    @i{wo}["@b{ConserveLevel}"] = @var{true}
 17
-18    @i{ti}["@var{ }"] = @{"@b{fl-samba}"@}
-19    @i{ti}["@var{.}"] = @{"@b{fl-abyss}"@}
-20    @i{ti}["@var{~}"] = @{"@b{fl-water}"@}
-21    @i{ti}["@var{#}"] = @{"@b{st-rock1}"@}
+18    @i{ti}["@var{ }"] = @{"@b{fl_samba}"@}
+19    @i{ti}["@var{.}"] = @{"@b{fl_abyss}"@}
+20    @i{ti}["@var{~}"] = @{"@b{fl_water}"@}
+21    @i{ti}["@var{#}"] = @{"@b{st_granite}"@}
 22    @i{ti}["@var{X}"] = @{"@b{st_oxyd}"@}
 23
 24    @i{ti}["@var{L}"] = @{"@b{st_laser}", @b{orientation}=@var{EAST}, @b{state}=@var{ON}@}
@@ -3623,9 +3623,9 @@
 41    @i{ti}["@var{E}"] = @{"@b{st_turnstilearm}", @b{orientation}=@var{EAST}@}
 42    @i{ti}["@var{N}"] = @i{ti}["@var{.}"] .. @{"@b{st_turnstilearm_n}"@}
 43
-44    @i{ti}["@var{+}"] = @{"@b{fl-samba}", @b{checkerboard}=@var{0}@} .. ti(@{"@b{fl-wood}", @b{checkerboard}=@var{1}@})
+44    @i{ti}["@var{+}"] = @{"@b{fl_samba}", @b{checkerboard}=@var{0}@} .. ti(@{"@b{fl_wood}", @b{checkerboard}=@var{1}@})
 45
-46    @i{ti}["@var{1}"] = @{"#@b{ac-blackball}"@}
+46    @i{ti}["@var{1}"] = @{"#@b{ac_marble}"@}
 47
 48    if @i{wo}["@b{IsDifficult}"] then
 49        @i{ti}["@var{=}"] = @i{ti}["@var{~}"]
@@ -3695,10 +3695,10 @@
 The second part of a level are the tile definitions as explained in
 @ref{World's Shape and Coordinates}. Let us start with the most simple ones:
 @example
-18    @i{ti}["@var{ }"] = @{"@b{fl-samba}"@}
-19    @i{ti}["@var{.}"] = @{"@b{fl-abyss}"@}
-20    @i{ti}["@var{~}"] = @{"@b{fl-water}"@}
-21    @i{ti}["@var{#}"] = @{"@b{st-rock1}"@}
+18    @i{ti}["@var{ }"] = @{"@b{fl_samba}"@}
+19    @i{ti}["@var{.}"] = @{"@b{fl_abyss}"@}
+20    @i{ti}["@var{~}"] = @{"@b{fl_water}"@}
+21    @i{ti}["@var{#}"] = @{"@b{st_granite}"@}
 22    @i{ti}["@var{X}"] = @{"@b{st_oxyd}"@}
 @end example
 
@@ -3811,7 +3811,7 @@
 not provide its own floor will set this default floor.
 
 @example
-44    @i{ti}["@var{+}"] = @{"@b{fl-samba}", @b{checkerboard}=@var{0}@} .. ti(@{"@b{fl-wood}", @b{checkerboard}=@var{1}@})
+44    @i{ti}["@var{+}"] = @{"@b{fl_samba}", @b{checkerboard}=@var{0}@} .. ti(@{"@b{fl_wood}", @b{checkerboard}=@var{1}@})
 @end example
 
 Just for fun we want to provide a checkerboard floor on the right side of our
@@ -3826,7 +3826,7 @@
 has to be a tile.
 
 @example
-46    @i{ti}["@var{1}"] = @{"#@b{ac-blackball}"@}
+46    @i{ti}["@var{1}"] = @{"#@b{ac_marble}"@}
 @end example
 
 Finally we do need our marble. Unlike other objects it can be positioned
@@ -3895,22 +3895,22 @@
 how such an idea can be realized with the new API
 
 @example
- at i{ti}["@var{ }"] = @{"@b{fl-sahara}"@}
- at i{ti}["@var{#}"] = @{"@b{st-rock6}"@}
- at i{ti}["@var{@@}"] = @{"#@b{ac-blackball}"@}
+ at i{ti}["@var{ }"] = @{"@b{fl_sahara}"@}
+ at i{ti}["@var{#}"] = @{"@b{st_purplegray}"@}
+ at i{ti}["@var{@@}"] = @{"#@b{ac_marble_black}", "@var{marble_black}"@}
 
 @i{ti}["@var{N}"] = @{"@b{st_turnstilearm_n}"@}
 @i{ti}["@var{S}"] = @{"@b{st_turnstilearm_s}"@}
 @i{ti}["@var{E}"] = @{"@b{st_turnstilearm_e}"@}
 @i{ti}["@var{W}"] = @{"@b{st_turnstilearm_w}"@}
- at i{ti}["@var{R}"] = @{"@b{st_turnstile}", @b{action} = @{"@b{open}", "@b{close}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@}@}
- at i{ti}["@var{G}"] = @{"@b{st_turnstile}", @b{action} = @{"@b{close}", "@b{open}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@},
-                           @b{flavor} = "@b{green}"@}
- at i{ti}["@var{r}"] = @{"@b{it_blocker}", "@var{red}#"@} .. @i{ti}(@{"@b{fl-red}"@})
- at i{ti}["@var{g}"] = @{"@b{it_blocker}", "@var{green}#"@} .. @i{ti}(@{"@b{fl-leaves}"@})
+ at i{ti}["@var{R}"] = @{"@b{st_turnstile}", @b{action} = @{"@var{open}", "@var{close}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@}@}
+ at i{ti}["@var{G}"] = @{"@b{st_turnstile}", @b{action} = @{"@var{close}", "@var{open}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@},
+                           @b{flavor} = "@var{green}"@}
+ at i{ti}["@var{r}"] = @{"@b{it_blocker}", "@var{red}#"@} .. @i{ti}(@{"@b{fl_red}"@})
+ at i{ti}["@var{g}"] = @{"@b{it_blocker}", "@var{green}#"@} .. @i{ti}(@{"@b{fl_lawn}"@})
 
- at i{ti}["@var{O}"] = @{"@b{st_oxyd}", @b{flavor} = "@b{d}", @b{oxydcolor} = @var{OXYD_GREEN}@}
- at i{ti}["@var{o}"] = @{"@b{st_oxyd}", @b{flavor} = "@b{d}", @b{oxydcolor} = @var{OXYD_RED}@}
+ at i{ti}["@var{O}"] = @{"@b{st_oxyd}", @b{flavor} = "@var{d}", @b{oxydcolor} = @var{OXYD_GREEN}@}
+ at i{ti}["@var{o}"] = @{"@b{st_oxyd}", @b{flavor} = "@var{d}", @b{oxydcolor} = @var{OXYD_RED}@}
 
 @var{w}, @var{h} = @i{wo}(@i{ti}, "@var{ }", @{
  -- 01234567890123456789
@@ -3928,6 +3928,8 @@
    "@var{#   g S r S go##o#o#}",
    "@var{#o#####o############}"
 @})
+
+ at i{wo}:@b{shuffleOxyd}()
 @end example
 
 There are just four tile definitions that do all the dynamic actions. Let us
@@ -3943,9 +3945,9 @@
 later on.
 
 @example
- at i{ti}["@var{R}"] = @{"@b{st_turnstile}", @b{action} = @{"@b{open}", "@b{close}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@}@}
- at i{ti}["@var{G}"] = @{"@b{st_turnstile}", @b{action} = @{"@b{close}", "@b{open}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@},
-                           @b{flavor} = "@b{green}"@}
+ at i{ti}["@var{R}"] = @{"@b{st_turnstile}", @b{action} = @{"@var{open}", "@var{close}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@}@}
+ at i{ti}["@var{G}"] = @{"@b{st_turnstile}", @b{action} = @{"@var{close}", "@var{open}"@}, @b{target} = @{"@var{red}#*", "@var{green}#*"@},
+                           @b{flavor} = "@var{green}"@}
 @end example
 Whenever the marble hits and turns an @ref{st_turnstile} it performs its actions
 on the targets. Here the author makes clever usage of multitargets and
@@ -4448,7 +4450,7 @@
 
 @menu
 * Color Maze::    Enigma levelpack VIII, level #19
-* Wired::           Enigma levelpack VIII, level #22
+* Weirdly Wired:: Enigma levelpack VIII, level #22
 @end menu
 
 
@@ -4465,30 +4467,30 @@
 02    @i{wo}["@b{FollowGrid}"] = @var{false}
 03    @i{wo}["@b{FollowMethod}"] = @var{FOLLOW_SCROLL}
 04
-05    @i{ti}["@var{ }"] = @{"@b{fl-abyss_fake}"@} .. @i{ti}(@{"@b{st-glass1}"@})
+05    @i{ti}["@var{ }"] = @{"@b{fl_fale_abyss}"@} .. @i{ti}(@{"@b{st_lightglass}"@})
 06
-07    @i{ti}["@var{!}"] = @{"@b{fl-rough-blue}", "@var{blue#}", @var{_color}="@var{blue}"@}
-08    @i{ti}["@var{@@}"] = @{"@b{fl-bumps}", "@var{orange#}", @var{_color}="@var{orange}"@}
-09    @i{ti}["@var{#}"] = @{"@b{fl-rough-red}", "@var{red#}", @var{_color}="@var{red}"@}
-10    @i{ti}["@var{$}"] = @{"@b{fl-leavesb}", "@var{green#}", @var{_color}="@var{green}"@}
+07    @i{ti}["@var{!}"] = @{"@b{fl_blueslab}", "@var{blue#}", @var{_color}="@var{blue}"@}
+08    @i{ti}["@var{@@}"] = @{"@b{fl_pinkbumps}", "@var{orange#}", @var{_color}="@var{orange}"@}
+09    @i{ti}["@var{#}"] = @{"@b{fl_redslab}", "@var{red#}", @var{_color}="@var{red}"@}
+10    @i{ti}["@var{$}"] = @{"@b{fl_lawn_b}", "@var{green#}", @var{_color}="@var{green}"@}
 11
-12    @i{ti}["@var{b}"] = @i{ti}["@var{!}"] .. @{"@b{st-door-h-open}"@}
-13    @i{ti}["@var{B}"] = @i{ti}["@var{!}"] .. @{"@b{st-door-v-open}"@}
-14    @i{ti}["@var{o}"] = @i{ti}["@var{@@}"] .. @{"@b{st-door-h-open}"@}
-15    @i{ti}["@var{O}"] = @i{ti}["@var{@@}"] .. @{"@b{st-door-v-open}"@}
-16    @i{ti}["@var{r}"] = @i{ti}["@var{#}"] .. @{"@b{st-door-h-open}"@}
-17    @i{ti}["@var{R}"] = @i{ti}["@var{#}"] .. @{"@b{st-door-v-open}"@}
-18    @i{ti}["@var{g}"] = @i{ti}["@var{$}"] .. @{"@b{st-door-h-open}"@}
-19    @i{ti}["@var{G}"] = @i{ti}["@var{$}"] .. @{"@b{st-door-v-open}"@}
+12    @i{ti}["@var{b}"] = @i{ti}["@var{!}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ns}", @b{state}=@var{OPEN}@}
+13    @i{ti}["@var{B}"] = @i{ti}["@var{!}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ew}", @b{state}=@var{OPEN}@}
+14    @i{ti}["@var{o}"] = @i{ti}["@var{@@}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ns}", @b{state}=@var{OPEN}@}
+15    @i{ti}["@var{O}"] = @i{ti}["@var{@@}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ew}", @b{state}=@var{OPEN}@}
+16    @i{ti}["@var{r}"] = @i{ti}["@var{#}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ns}", @b{state}=@var{OPEN}@}
+17    @i{ti}["@var{R}"] = @i{ti}["@var{#}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ew}", @b{state}=@var{OPEN}@}
+18    @i{ti}["@var{g}"] = @i{ti}["@var{$}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ns}", @b{state}=@var{OPEN}@}
+19    @i{ti}["@var{G}"] = @i{ti}["@var{$}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ew}", @b{state}=@var{OPEN}@}
 20
-21    @i{ti}["@var{d}"] = @{"@b{it-document}", @b{text}="@var{text1}"@}
+21    @i{ti}["@var{d}"] = @{"@b{it_document}", @b{text}="@var{text1}"@}
 22    @i{ti}["@var{5}"] = @i{ti}["@var{b}"] .. @i{ti}["@var{d}"]
 23    @i{ti}["@var{6}"] = @i{ti}["@var{O}"] .. @i{ti}["@var{d}"]
 24    @i{ti}["@var{7}"] = @i{ti}["@var{r}"] .. @i{ti}["@var{d}"]
 25    @i{ti}["@var{8}"] = @i{ti}["@var{G}"] .. @i{ti}["@var{d}"]
 26
 27    @i{ti}["@var{x}"] = @{"@b{it_sensor}", @b{invisible}=@var{true}, @b{target}="@var{gates}"@}
-28    @i{ti}["@var{*}"] = @i{ti}["@var{x}"] .. @{"#@b{ac-blackball}", "@var{me}"@}
+28    @i{ti}["@var{*}"] = @i{ti}["@var{x}"] .. @{"#@b{ac_marble_black}", "@var{me}"@}
 29
 30    @i{ti}["@var{?}"] = @{"@b{st_oxyd_a}"@}
 31
@@ -4569,10 +4571,10 @@
 objects like the glass stone will never be set on default usage.
 
 @example
-07    @i{ti}["@var{!}"] = @{"@b{fl-rough-blue}", "@var{blue#}", @var{_color}="@var{blue}"@}
-08    @i{ti}["@var{@@}"] = @{"@b{fl-bumps}", "@var{orange#}", @var{_color}="@var{orange}"@}
-09    @i{ti}["@var{#}"] = @{"@b{fl-rough-red}", "@var{red#}", @var{_color}="@var{red}"@}
-10    @i{ti}["@var{$}"] = @{"@b{fl-leavesb}", "@var{green#}", @var{_color}="@var{green}"@}
+07    @i{ti}["@var{!}"] = @{"@b{fl_blueslab}", "@var{blue#}", @var{_color}="@var{blue}"@}
+08    @i{ti}["@var{@@}"] = @{"@b{fl_pinkbumps}", "@var{orange#}", @var{_color}="@var{orange}"@}
+09    @i{ti}["@var{#}"] = @{"@b{fl_redslab}", "@var{red#}", @var{_color}="@var{red}"@}
+10    @i{ti}["@var{$}"] = @{"@b{fl_lawn_b}", "@var{green#}", @var{_color}="@var{green}"@}
 @end example
 Every floor object is autonamed for later group access purposes. Additinally
 every floor objects sets a user attribute prefixed in its name by an underscore
@@ -4580,8 +4582,8 @@
 function.
 
 @example
-12    @i{ti}["@var{b}"] = @i{ti}["@var{!}"] .. @{"@b{st-door-h-open}"@}
-13    @i{ti}["@var{B}"] = @i{ti}["@var{!}"] .. @{"@b{st-door-v-open}"@}
+12    @i{ti}["@var{b}"] = @i{ti}["@var{!}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ns}", @b{state}=@var{OPEN}@}
+13    @i{ti}["@var{B}"] = @i{ti}["@var{!}"] .. @{"@b{st_door}", @b{flavor}="@var{d}", @b{faces}="@var{ew}", @b{state}=@var{OPEN}@}
 @end example
 The doors are set without being named, as we will target them by their position.
 
@@ -4675,9 +4677,9 @@
 
 That is all to code a quite complex dynamic level idea like "Color Maze".
 
- at c ----------------- Wired --------------------
- at node Wired
- at subsection Wired
+ at c ----------------- Weirdly Wired --------------------
+ at node Weirdly Wired
+ at subsection Weirdly Wired
 You should have restarted this level several times to notice the design changes
 of the floor pattern and the border panel stones besides the dynamic wiring of
 the stones.
@@ -4691,13 +4693,13 @@
 02	    <el:dependency el:path="lib/libmath" el:id="lib/libmath" el:release="1" el:preload="true"/>
 03	  </el:compatibility>
 ...
-04    @i{ti}["@var{ }"] = @{"@b{fl-sahara}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-05    @i{ti}["@var{a}"] = @{"@b{fl-light}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-06    @i{ti}["@var{b}"] = @{"@b{fl-white}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-07    @i{ti}["@var{c}"] = @{"@b{fl-lightgray}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-08    @i{ti}["@var{_}"] = @{"@b{fl-water}"@}
-09    @i{ti}["@var{@@}"] = @{"#@b{ac-blackball}"@}
-10    @i{ti}["@var{w}"] = @{"@b{st-plain_move}", "@var{wood}#"@}
+04    @i{ti}["@var{ }"] = @{"@b{fl_sahara}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+05    @i{ti}["@var{a}"] = @{"@b{fl_ivory}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+06    @i{ti}["@var{b}"] = @{"@b{fl_bright}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+07    @i{ti}["@var{c}"] = @{"@b{fl_platinum}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+08    @i{ti}["@var{_}"] = @{"@b{fl_water}"@}
+09    @i{ti}["@var{@@}"] = @{"#@b{ac_marble_black}"@}
+10    @i{ti}["@var{w}"] = @{"@b{st_flat_movable}", "@var{wood}#"@}
 11    @i{ti}["@var{t}"] = @{"@b{it_trigger}", "@var{trigger}#"@}
 12    @i{ti}["@var{d}"] = @{"@b{st_blocker}", "@var{door}#"@}
 13    @i{ti}["@var{o}"] = @{"@b{st_oxyd}", @b{oxydcolor} = @var{OXYD_YELLOW}, @b{flavor} = "@var{a}"@}
@@ -4782,17 +4784,17 @@
 preload it, besides declaration of compatibility to Enigma 1.10.
 
 @example
-04    @i{ti}["@var{ }"] = @{"@b{fl-sahara}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-05    @i{ti}["@var{a}"] = @{"@b{fl-light}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-06    @i{ti}["@var{b}"] = @{"@b{fl-white}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
-07    @i{ti}["@var{c}"] = @{"@b{fl-lightgray}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+04    @i{ti}["@var{ }"] = @{"@b{fl_sahara}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+05    @i{ti}["@var{a}"] = @{"@b{fl_ivory}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+06    @i{ti}["@var{b}"] = @{"@b{fl_bright}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
+07    @i{ti}["@var{c}"] = @{"@b{fl_platinum}", @b{friction} = @var{3.5}, @b{adhesion} = @var{4.0}@}
 @end example
 Four floor types that the dynamic floor is composed of. They all are unified
 in the @samp{friction} and @samp{adhesion} to provide smooth movement on the
 stylish floor.
 
 @example
-10    @i{ti}["@var{w}"] = @{"@b{st-plain_move}", "@var{wood}#"@}
+10    @i{ti}["@var{w}"] = @{"@b{st_flat_movable}", "@var{wood}#"@}
 11    @i{ti}["@var{t}"] = @{"@b{it_trigger}", "@var{trigger}#"@}
 12    @i{ti}["@var{d}"] = @{"@b{st_blocker}", "@var{door}#"@}
 @end example
@@ -5363,7 +5365,7 @@
 
 An attribute that describes one or several destinations. It is used by objects
 like @ref{it_vortex} and @ref{it_wormhole} to describe their teleporting
-destination.
+destination and by @ref{ac_horse} to describe its traveling path.
 
 Note that this attribute is only supported if it is listed in the individual
 description.
@@ -5378,9 +5380,15 @@
 destination = "myFloor"
 destination = myObject
 destination = @{"vortex2","vortex3","vortex4"@}
+po["dest1"] = po(3,4)
+po["dest2"] = po(7,8)
+destination = @{"dest1","dest2","myFloor"@}
 @end example
 Note that objects like @samp{it_wormhole} that have just a single destination
-do take the first token object.
+do take the first token object. Note that in contrast to @ref{target} tokens a
+destination tokens argument can take named positions, too. Referencing floors
+that may be destructed by bombs, cracks, floor building stones, etc. are save
+destinations, too.
 @item @b{Default:} @ @ @code{nil}
 @item @b{Access:} @ @ read/write
 @item @b{Support:} @ @ by teleporting objects
@@ -6208,8 +6216,8 @@
 being unpassable for marbles like @ref{fl_abyss} when being opened. Floor
 bridges come in several flavors. They can be grey or wooden brown, they can
 pop up in the center or emerge from one side. The flavor string is a combination
-of a color character and a emerging direction character. Note that not all
-combination do exist.
+of a color character and an emerging direction character. Note that not all
+combinations do exist.
 
 Bridges can be opened and closed via messages and state set operations like
 @ref{st_door}.
@@ -6851,7 +6859,7 @@
 @code{MEDITATION_VOLCANO} <-> @code{MEDITATION_CALDERA}, @code{MEDITATION_HILL}
 <-> @code{MEDITATION_HOLLOW}, @code{MEDITATION_BUMP} <-> @code{MEDITATION_DENT}.
 
-Third a @code{"signal"} messages flips on a @code{1} value all meditations to
+Third a @code{"signal"} message flips on a @code{1} value all meditations to
 their hill like counterparts, keeping hill like meditations unchanged, and on a
 @code{0} value to their hollow like counterparts, keeping hollow like meditations
 unchanged.
@@ -7124,7 +7132,7 @@
 The current state of the dot - @samp{ON} for a matching @ref{st_shogun} stack
 on top, @samp{OFF} otherwise.
 @item @b{flavor}, @ @ @i{values}: @code{"s"}, @code{"m"}, @code{"l"}; @ @ @i{default}: @code{"s"}
-A string describing the hole size. @code{"s"} for a small hole, @code{m} for
+A string describing the hole size. @code{"s"} for a small hole, @code{"m"} for
 a medium hole, @code{"l"} for a large hole.
 
 @end table
@@ -7980,7 +7988,7 @@
 all other blocking stones the brake can be picked up as an item by actors and
 dropped anywhere else.
 
-When an actor passes an brake stone, rolling on the floor or while jumping, it
+When an actor passes a brake stone, rolling on the floor or while jumping, it
 will pick up the object like other items. The brake will be added as an
 @ref{it_brake} to its inventory. Unlike other items the brake can be dropped
 even on grids that are already occupied by an item. But you can not drop the
@@ -8242,7 +8250,7 @@
 Doors are stones that let actors pass or block them to enter the grid, depending
 on their state. Doors can be opened and closed by the standard set of messages.
 Doors do not open or close instantly. They need a small amount of time. Actors
-can pass only doors that are completly open.
+can pass only doors that are completely open.
 
 There are several flavors of doors. Where as the variants @code{"a"} to
 @code{"c"} represent grid filling block doors, does the flavor @code{"d"}
@@ -8261,7 +8269,7 @@
 The @ref{st_blocker} is a quite compatible door alternative that allows stones
 to pass in its open state.
 
-All doors are floating and will not press @ref{it_triggers}. Thus you can detect
+All doors are floating and will not press @ref{it_trigger}s. Thus you can detect
 passing actors by positioning a trigger beneath a door. Doors will neither press
 @ref{fl_bridge} and will thus take no influence on the bridge.
 
@@ -8728,7 +8736,7 @@
 @table @asis
 @item @b{orientation}, @ @ @i{values}: @code{NORTH}, @code{EAST}, @code{SOUTH}, @code{WEST}; @ @ @i{default}: @code{NORTH}
 The orientation of the mail stone. It determines the neighbor grid position
-onto which the item will dropped, or where the pipe starts.
+onto which the item will be dropped, or where the pipe starts.
 @end table
 
 @item @b{Messages:} none
@@ -9038,7 +9046,7 @@
 @item @code{"d"} dark blue, pyramid like stone that opens like a flower
 @item @code{"e"} black, flat stone that provides a peep hole after closing
 @end table
- at item @b{oxydcolor}, @ @ @i{values}: @code{OXYD_AUTO}, @code{OXYD_FAKE}, @code{OXYD_QUAKE}, @code{OXYD_BOLD}, @code{OXYD_BLUE}, @code{OXYD_RED}, @code{OXYD_GREEN}, @code{OXYD_YELLOW}, @code{OXYD_CYAN}, @code{OXYD_PURPLE}, @code{OXYD_WHITE}, @code{OXYD_BLACK}, @code{OXYD_GREY}, @code{OXYD_ORANGE}, @code{OXYD_PINE}, @code{OXYD_BROWN}; @ @ @i{default}: @code{OXYD_AUTO}
+ at item @b{oxydcolor}, @ @ @i{values}: @code{OXYD_AUTO}, @code{OXYD_FAKE}, @code{OXYD_QUAKE}, @code{OXYD_BOLD}, @code{OXYD_BLUE}, @code{OXYD_RED}, @code{OXYD_GREEN}, @code{OXYD_YELLOW}, @code{OXYD_CYAN}, @code{OXYD_PURPLE}, @code{OXYD_WHITE}, @code{OXYD_BLACK}, @code{OXYD_GRAY}, @code{OXYD_ORANGE}, @code{OXYD_PINE}, @code{OXYD_BROWN}; @ @ @i{default}: @code{OXYD_AUTO}
 @item @b{noshuffle} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 @item @b{static} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 Static oxyds are neither swappable nor pullable.
@@ -9138,7 +9146,7 @@
 
 The pull stone is laser light transparent like other glass like stones.
 
-An existing stone exchange partner is not mandatory. But if an stone is located
+An existing stone exchange partner is not mandatory. But if a stone is located
 on the destination position of a pull stone some conditions must be met for a
 stone exchange. Connected @ref{Cluster Stones} building a block, @ref{st_oxyd}
 configured as being @samp{static}, and another @ref{st_swap} or pull stone that
@@ -9199,12 +9207,12 @@
 abyss floor just complete blue clusters will sink. Note that puzzles just sink
 on moves. Moving a blue fragment besides another fragment on abyss so that both
 fragments build a complete cluster will not sink the new cluster. It will sink
-on the next move. If two or more stones of a cluster are connected by a wire
-which all send move impulses by the same event, the cluster will move multiple
-times. But it will sink on the first opportunity.
+as a whole on the next move. If two or more stones of a cluster are receive
+wire impulses originating from a single event, the whole cluster will move 
+multiple times. But it will sink on the first opportunity.
 
 Just single unconnected yellow puzzle stones can be moved by actors. Any yellow
-cluster of 2 or more stone can not moved by actor hits. But on stone impulses
+cluster of 2 or more stones can not moved by actor hits. But on stone impulses
 they move like blue puzzles with the exception that just complete yellow clusters
 will sink on water.
 
@@ -9222,7 +9230,7 @@
 @ref{it_magicwand}.
 
 Exploding puzzles will stay on place and do not interact any more. The exploding
-stones are leathal for actors hitting them, but an actor can start an explosion
+stones are lethal for actors hitting them, but an actor can start an explosion
 beneath a hollow puzzle stone and stay beneath this hollow exploding stone
 without harm until the puzzle dissolved.
 
@@ -9239,7 +9247,7 @@
 sufficient for a hit operation, the cluster will move instead of an expected
 row rotation.
 
-Like @ref{Cluster Stone}s puzzle accept a @samp{cluster} attribute. A new set
+Like @ref{Cluster Stone}s puzzles accept a @samp{cluster} attribute. A new set
 puzzle stone autoconnects to adjacent, same colored puzzle stones belonging to
 the same cluster. But once set the puzzle stone will of course not change its
 connections on subsequent moves or rotations. But as a level author you need to
@@ -9253,10 +9261,10 @@
 
 If you need to shuffle a puzzle of your own, you can make use of the messages
 @samp{get_adjacents} which returns the group of color matching, adjacent puzzle
-stones, and @samp{push_rotate} which is the exact invertion of a push rotation.
+stones, and @samp{pull_rotate} which is the exact invertion of a push rotation.
 
 @table @asis
- at item @b{Attributes:} none
+ at item @b{Attributes:}
 @item @b{color} @ @ @i{values}: @code{BLUE}, @code{YELLOW}; @ @ @i{default}: @code{BLUE}
 The color of the puzzle stubs. Adjacent puzzle stones of matching colors and
 connections cluster to fragments.
@@ -9268,7 +9276,7 @@
 
 @item @b{cluster} @ @ @i{values}: number; @ @ @i{default}: @code{nil}
 If set to a number all adjacent puzzle stones of the same color with
-the identical cluster number will build a cluster. This attribute superceds
+the identical cluster number will build a cluster. This attribute supercedes
 any explicitly given connection description.
 
 @item @b{hollow} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
@@ -9284,10 +9292,10 @@
 Returns the huddle of all adjacent puzzle stones of same color independent of
 being connected or not. The huddle is returned as a group.
 @item @b{pull_rotate}, @ @ @i{value type}: direction
-Perform a reverse @samp{push_rotate} from this puzzle stone with the line
+Perform a reverse @samp{push_rotate} from this puzzle stones with the line
 of puzzle stone into the given direction.
 @item @b{push_rotate}, @ @ @i{value type}: direction
-Perform a line rotation as described above from this puzzle stone with the line
+Perform a line rotation as described above from this puzzle stones with the line
 of puzzle stone into the given direction.
 
 @end table
@@ -9499,7 +9507,7 @@
 @table @asis
 @item @b{flavor}, @ @ @i{values}: @code{"s"}, @code{"m"}, @code{"l"}, @code{"sm"}, @code{"sl"}, @code{"ml"}, @code{"sml"}; @ @ @i{default}: @code{"s"}; @ @ @i{access}: after initialization read only
 A string describing the hole sizes of this shogun stone and all smaller shogun
-stones that are positioned beneath this stone. @code{"s"} for a small hole, @code{m} for
+stones that are positioned beneath this stone. @code{"s"} for a small hole, @code{"m"} for
 a medium hole, @code{"l"} for a large hole, plus combinations of these
 characters for stacks. On initialization all shoguns of this grid's stack will
 be set according to this attribute, which can be prior set. After initialization
@@ -9567,7 +9575,7 @@
 actors benath it while pulsing.
 
 Hollow stoneimpulse stones are transparent to laserlight and thus do not react.
-But all other stones to pulse. A standard not @ref{steady} stoneimpulse will
+But all other stones do pulse. A standard not @ref{steady} stoneimpulse will
 pulse just one time on each new added light beam. But if you set @ref{steady}
 to @code{true} the stone will continue pulsing as long as a single beam hits
 one of its sides.
@@ -9578,10 +9586,10 @@
 when the stoneimpulse gets activated otherwise it will push back the boulder,
 which will in return hit the stoneimpulse again.
 
-On a chain of stoneimpulse the pulsing will propagate along the chain without
-backfiring, as the previous stone is still active when its successor impulses.
-This feature lets propagate a linear front of impuls through a field of
-stoneimpulse as expected.
+On a chain of stoneimpulse stones the pulsing will propagate along the chain
+without backfiring, as the previous stone is still active when its successor
+impulses. This feature lets propagate a linear front of impulses through a field
+of stoneimpulse stones as expected.
 
 If you want to setup a linear circle of stoneimpulse stones with an impulse
 wandering around the circle in one direction forever, you should insert one
@@ -9595,7 +9603,7 @@
 
 Impulse stones will be destroyed by @ref{it_dynamite} exploding on one of the
 eight neighboring grid positions while the stone is enlightened by a laser. But
-other explosions, inclusive @ref{it_bomb}, will not effect stoneimpulse stones.
+other explosions, including @ref{it_bomb}, will not effect stoneimpulse stones.
 
 @table @asis
 @item @b{Attributes:}
@@ -9606,7 +9614,7 @@
 @item @b{hollow} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 Hollow stones are neither movable, nor steady.
 @item @b{steady} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
-Steady stones send continous impulses while exposed to laser light. Steady stones
+Steady stones send continuous impulses while exposed to laser light. Steady stones
 are not hollow.
 @end table
 
@@ -9641,7 +9649,7 @@
 in direction of the initiating impulse. It is not freely movable by pushes.
 But when an actor hits a swap stone and another stone is located on the opposite
 side of the swap stone, both stones will exchange their positions. The swap will
-also be perfomed when the swap stones receives a stone impulse via an
+also be performed when the swap stone receives a stone impulse via an
 @ref{ot_wire} or a neighboring @ref{st_stoneimpulse}. A similar stone it the
 @ref{st_pull}, that exchanges with stones in the reverse direction of the
 initiating impulse.
@@ -9944,8 +9952,8 @@
 @subsection st_volcano
 @obindex st_volcano
 
-A volcano stone spreads slowly to neighboring grid positions and filling up
-complete areas and will just stop on boundaries set by others stones.
+A volcano stone spreads slowly to neighboring grid positions filling up
+complete areas and will just stop on boundaries set by other stones.
 
 A volcano can either start by the setting of an @samp{ACTIVE} variant, by
 an inactive @samp{IDLE} variant being triggered by a message or a hitting
@@ -10106,17 +10114,342 @@
 @section Actor Attributes
 
 @menu
+* adhesion::        Effectiveness of mousemotion
+* charge::          Initial electrical charge
+* controllers::     Mouse
+* color::           Color
+* essential::       
+* essential_id::    
+* owner::           Inventory owner
+* velocity_x::      Initial velocity
+* velocity_y::      Initial velocity
 @end menu
 
- at c -----------------  --------------------
 
+ at node adhesion
+ at subsection adhesion
+
+The responsiveness of an actor on mouse movements. It is a scalar factor to
+the accelerating force applied to the actor. Note that mouse forces are only
+applied to an actor if the @ref{controllers} attribute allows forces at all.
+Vice versa you should exclude an actor from mouse forces by usage of the
+ at ref{controllers} attribute instead of setting its adhesion to zero. The 
+adhesion may take negativ values, too. Such values correspond to inverse forces.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ float number
+ at item @b{Default:} @ @ actor dependent
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node charge
+ at subsection charge
+
+The initial electrical charge that a new actor starts with when being added to
+the world. Even though this attribute is readable it does not reflect the
+current velocity of an actor during runtime.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ float number
+ at item @b{Default:} @ @ @code{0.0}
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node controllers
+ at subsection controllers
+
+The players that can control the actor by their mouse movements.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}
+ at item @b{Default:} @ @ @code{0}
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node color
+ at subsection color
+
+The logical color of the actor. All actors besides @ref{ac_marble}s and
+ at ref{ac_pearl}s will report color @code{nil}. The color of an actor can not be
+changed, it is a read only attribute.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ @code{BLACK}, @code{WHITE}, @code{nil}
+ at item @b{Default:} @ @ @code{nil}
+ at item @b{Access:} @ @ read only
+ at end table
+
+ at node essential
+ at subsection essential
+
+Describes the necessity of an actor to be alive in case of multiple actors being
+attached to a player. A value 0 marks an actor as not essential. The player
+may well continue to play with other actors that he controls which are still 
+alive. A value of -1 marks an actor as totally necessary. If such an actor 
+cannot be resurrected after a death, the player is essentially dead. A value 
+of 1 marks an actor as partially essential. Not the actor itself needs to 
+survive but the number of actors of its kind controlled by the player need to be
+larger than the number of actors with value 1. For example, marking 3 out of 5
+small whiteballs with 1 means that the player is dead if 3 small whiteballs are
+no longer alive. See Old API - Variables ?enigma.ConserveLevel? for more details
+about restart of levels.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ @code{DISPENSIBLE}, @code{INDISPENSIBLE}, @code{PERKIND}
+ at item @b{Default:} @ @ @code{}
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node essential_id
+ at subsection essential_id
+
+Since a player may control actors of different kinds at the same time, the
+essentialness of actors is limited to its kind via this id. It is possible to
+group actors of different kinds into an essential group via this id. The engine 
+keeps this id even if actors are transformed into other kinds.
+
+ at table @asis
+ at item @b{Type:} @ @ string
+ at item @b{Values:} @ @ any
+ at item @b{Default:} @ @ @ model name of actor
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node owner
+ at subsection owner
+
+The player that owns the actor. The owner gets all items picked up by an actor
+added to his inventory. The ownership of an actor does not influence the
+ability of a player to control the actors movements.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ @code{YIN}, @code{YANG}, @code{nil}
+ at item @b{Default:} @ @ @code{nil}
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node velocity_x
+ at subsection velocity_x
+
+The velocity into x direction that a new actor starts with when being added to
+the world. Even though this attribute is readable it does not reflect the
+current velocity of an actor during runtime.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ float number
+ at item @b{Default:} @ @ @code{0.0}
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at node velocity_y
+ at subsection velocity_y
+
+The velocity into y direction that a new actor starts with when being added to
+the world. Even though this attribute is readable it does not reflect the
+current velocity of an actor during runtime.
+
+ at table @asis
+ at item @b{Type:} @ @ number
+ at item @b{Values:} @ @ float number
+ at item @b{Default:} @ @ @code{0.0}
+ at item @b{Access:} @ @ read/write
+ at end table
+
+ at c ----------------- Actors --------------------
 @node Actors
 @section Actors
 
 @menu
+* ac_horse::
+* ac_killer::
+* ac_marble::     
+* ac_pearl::
+* ac_rotor::
+* ac_top::
 @end menu
 
+ at c ----------------- Horse --------------------
+ at node ac_horse
+ at subsection ac_horse
+ at obindex ac_horse
 
+A large blue disc like actor. It is called a horse because in some future Enigma
+release @ref{ac_marble}s and @ref{ac_pearl}s should be able to ride on it.
+
+In contrast to the main actors it can not jump or pass an @ref{it_vortex}, and
+will not sink, fall or shatter. A horse is immortal.
+
+A horse is preset to its standard attribute values, that make it a passive
+actor. But nevertheless a horse may move its own way. By usage of the attributes
+ at samp{destination} and @samp{strength} you can mark a path marked by an
+arbitrary number of positions given as destinations. The horse will try to reach
+the destinations one in a row with a force given by the strength attribute. As
+soon as one destination has been reached the horse targets for the next position
+and will start over again as soon as the last position has been reached.
+
+Note that you need to set @samp{controllers} as well as @samp{adhesion} to proper
+values if you want a player to control a horse directly.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{0.0}; @ @ @xref{adhesion}
+ at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
+ at item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at item @b{destination}, @ @ @i{values}: position or tokens; @ @ @i{default}: @code{nil} @ @ @xref{destination}
+A path given by a sequence of positions.
+ at item @b{strength} @ @ @i{values}: float number; @ @ @i{default}: @code{+10.0}
+A scalar factor for the horse force that drive it to the next destination.
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_horse}: controllers = @code{CTRL_NONE}, owner = @code{nil}
+ at end table
+
+ at end table
+
+ at c ----------------- Killer --------------------
+ at node ac_killer
+ at subsection ac_killer
+ at obindex ac_killer
+
+An actor that looks like a white @ref{ac_pearl}, but is a death bringing killer
+ball that shatters @ref{ac_marble}s and @ref{ac_pearl}s on contact.
+
+In contrast to the main actors it can not jump or pass an @ref{it_vortex}, and
+will not sink, fall or shatter. A killer ball is immortal.
+
+A killer is preset to its standard attribute values, that let both players
+control the actor and do assign a higher @samp{adhesion} to it than to
+ at ref{ac_pearl}s.
+
+Note that even though a killer looks quite dangerous, @ref{fl_thief} and 
+ at ref{st_thief} do steal items from them, if the killer is owned by a player.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{color} @ @ @i{values}: @code{WHITE}; @ @ @i{default}: @code{WHITE}; @ @ @i{access}: read only
+The color of the killer.
+ at item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{2.0}; @ @ @xref{adhesion}
+ at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
+ at item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_killer}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{nil}
+ at end table
+
+ at end table
+
+ at c ----------------- Marble --------------------
+ at node ac_marble
+ at subsection ac_marble
+ at obindex ac_marble
+
+The main actor in the shape of a large ball, either black or white. Marbles are
+versatile actors that can jump, pass @ref{it_vortex}, but on the other hand they
+can sink, fall and shatter, too.
+
+As long as the @samp{owner} has an @ref{it_extralife} in his inventory a dying
+marble will be resurrected. If no extra life is available a dying actor ends
+up in the @samp{state} dead and can no longer be controlled.
+
+The marbles are preset to their standard attribute values. A recoloring of 
+marbles is not possible. The marbles state changes due to events and can be
+read only, too.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{state}, @ @ @i{values}: @code{ALIVE}, @code{DEAD}; @ @ @i{default}: @code{ALIVE}; @ @ @xref{state}; @ @ @i{access}: read only
+ at item @b{color} @ @ @i{values}: @code{BLACK}, @code{WHITE}; @ @ @i{default}: @code{BLACK}; @ @ @i{access}: read only
+The color of the marble.
+ at item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{1.0}; @ @ @xref{adhesion}
+ at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
+ at item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_marble}: color = @code{BLACK}, controllers = @code{CTRL_YIN}, owner = @code{YIN}
+ at item @b{ac_marble_black}: color = @code{BLACK}, controllers = @code{CTRL_YIN}, owner = @code{YIN}
+ at item @b{ac_marble_white}: color = @code{WHITE}, controllers = @code{CTRL_YANG}, owner = @code{YANG}
+ at end table
+
+ at end table
+
+ at c ----------------- Pearl --------------------
+ at node ac_pearl
+ at subsection ac_pearl
+ at obindex ac_pearl
+
+The main actor for meditation levels in the shape of a small ball, currently
+just in white color available. Pearls are like marbles versatile actors that
+can jump, pass @ref{it_vortex}, but on the other hand they can sink, fall and
+shatter, too.
+
+As long as the @samp{owner} has an @ref{it_extralife} in his inventory a dying
+marble will be resurrected. If no extra life is available a dying actor ends
+up in the @samp{state} dead and can no longer be controlled.
+
+The pearls are preset to their standard attribute values. The pearls state 
+changes due to events and can be read only.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{state}, @ @ @i{values}: @code{ALIVE}, @code{DEAD}; @ @ @i{default}: @code{ALIVE}; @ @ @xref{state}; @ @ @i{access}: read only
+ at item @b{color} @ @ @i{values}: @code{WHITE}; @ @ @i{default}: @code{WHITE}; @ @ @i{access}: read only
+The color of the pearl.
+ at item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{1.0}; @ @ @xref{adhesion}
+ at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
+ at item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_pearl}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{YIN}
+ at item @b{ac_pearl_white}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{YIN}
+ at end table
+
+ at end table
+
+ at c ----------------- Rotor --------------------
+ at node ac_rotor
+ at subsection ac_rotor
+ at obindex ac_rotor
+
+ at c ----------------- Top --------------------
+ at node ac_top
+ at subsection ac_top
+ at obindex ac_top
+
 @c ===================  Other Objects  =======================
 
 @node Other Objects
@@ -11401,13 +11734,13 @@
 
 @item @b{Full Example:}
 @example
-ti[" "] = @{"fl-plank"@}
+ti[" "] = @{"fl_plank"@}
 ti["X"] = @{"st_oxyd"@}
-ti["B"] = @{"st-black3"@}
-ti["W"] = @{"st-white3"@}
-ti["y"] = @{"it-yinyang"@}
-ti["1"] = ti["y"] .. @{"#ac-blackball"@}
-ti["2"] = ti["y"] .. @{"#ac-whiteball"@}
+ti["B"] = @{"st_passage_black", flavor="frame"@}
+ti["W"] = @{"st_passage_white", flavor="frame"@}
+ti["y"] = @{"it_yinyang"@}
+ti["1"] = ti["y"] .. @{"#ac_marble_black"@}
+ti["2"] = ti["y"] .. @{"#ac_marble_white"@}
 
 function myresolver(key, x, y)
     if key == "w" then
@@ -11612,7 +11945,7 @@
 
 ti["~"] = @{"fl_water"@}
 ti[" "] = @{"fl_plank"@}
-ti["c"] = @{"it_crack3", brittleness=0@}
+ti["c"] = @{"it_crack_l", brittleness=0@}
 ti["^"] = @{"st_oneway_n"@}
 ti["1"] = @{"ac_marble_black", 0, 0.5@}
 
@@ -11750,13 +12083,13 @@
 
 @item @b{Full Example:}
 @example
-ti[" "] = @{"fl-sahara"@}
+ti[" "] = @{"fl_sahara"@}
 
 ti["template_a"] = @{"st_floppy", target=@{"door%%#*","laser%%"@}@}
 ti["template_A"] = @{"st_blocker", "door%%#"@}
 ti["template_1"] = @{"st_laser_s", "laser%%"@}
 
-ti["x"] = @{"#ac-blackball"@} .. ti(@{"it_floppy"@})
+ti["x"] = @{"#ac-marble_black"@} .. ti(@{"it_floppy"@})
 
 local resolver = res.autotile(ti, @{"a", "e", "template_a"@},
     @{"A", "E", "template_A"@},  @{"1", "5", "template_1"@})
@@ -11868,7 +12201,7 @@
 
 ti["k "] = @{"it_key"@} .. ti(@{"st_glass1"@})
 
-ti["xx"] = @{"#ac-blackball"@}
+ti["xx"] = @{"#ac_marbel_black"@}
 
 local resolver = res.composer(ti)
 
@@ -12022,17 +12355,17 @@
 
 @item @b{Full Example:}
 @example
-ti["  "] = @{"fl-sahara"@}
-ti["##"] = @{"st-rock1"@}
+ti["  "] = @{"fl_sahara"@}
+ti["##"] = @{"st_granite"@}
 
-ti[".."] = @{"fl-sahara", push_directions="nesw"@}
+ti[".."] = @{"fl_sahara", push_directions="nesw"@}
 
 ti["B"] = @{"st_puzzle_blue"@}
 ti["Y"] = @{"st_puzzle_yellow"@}
 ti["I"] = @{"st_puzzle_blue", intensity=2/6@}
 ti["M"] = @{"st_puzzle_blue", algorithm="marked", intensity=10@}
 
-ti["xx"] = @{"#ac-blackball"@} ..ti(@{"it_magicwand"@})
+ti["xx"] = @{"#ac_marble_black"@} ..ti(@{"it_magicwand"@})
 
 local resolver = res.puzzle(ti, "B", "Y", "I", "M")
 
@@ -12117,17 +12450,17 @@
 
 @item @b{Full Example:}
 @example
-ti["~"] = @{"fl-water"@}
-ti["s"] = @{"fl-sahara"@}
-ti["t"] = @{"fl-tigris"@}
-ti["i"] = @{"fl-inverse2"@}
-ti["b"] = @{"fl-acblack"@}
-ti["w"] = @{"fl-acwhite"@}
+ti["~"] = @{"fl_water"@}
+ti["s"] = @{"fl_sahara"@}
+ti["t"] = @{"fl_tigris"@}
+ti["i"] = @{"fl_inverse_gray"@}
+ti["b"] = @{"fl_yinyang_yin"@}
+ti["w"] = @{"fl_yinyang_yang"@}
 
 ti["c"] = @{"it_coin_s"@}
 ti["p"] = @{"it_brush"@}
 
-ti["1"] = @{"ac-blackball", 0, 0.5@}
+ti["1"] = @{"ac_marble_black", 0, 0.5@}
 
 simple_random = res.random(ti, " ", @{"s", "t"@})
 
@@ -18024,3 +18357,4 @@
 @printindex cp
 
 @bye
+



From ral at mail.berlios.de  Sun Feb  8 23:26:47 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 8 Feb 2009 23:26:47 +0100
Subject: [Enigma-game-svn] r1528 - in trunk/src: items stones
Message-ID: <200902082226.n18MQl9C016054@sheep.berlios.de>

Author: ral
Date: 2009-02-08 23:26:47 +0100 (Sun, 08 Feb 2009)
New Revision: 1528

Modified:
   trunk/src/items/Crack.cc
   trunk/src/items/Crack.hh
   trunk/src/items/Landmine.cc
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/stones/SimpleStones.cc
Log:
Trunk 1.1: new API reengineering
- fix landmine - renaming typo on explosion type
- fix spitter - missing init_model on return to idle state
- fix explosion item - shatter actors on grid
- fix crack - just crack on entering a grid, not on moving on the grid

Modified: trunk/src/items/Crack.cc
===================================================================
--- trunk/src/items/Crack.cc	2009-02-08 19:55:03 UTC (rev 1527)
+++ trunk/src/items/Crack.cc	2009-02-08 22:26:47 UTC (rev 1528)
@@ -72,21 +72,20 @@
         }
     }
     
-    void Crack::animcb() {
-        GridPos p= get_pos();
-        SetFloor(p, MakeFloor("fl_abyss"));
-        KillItem(p);
-    }
-    
-    bool Crack::actor_hit(Actor *a) {
+    void Crack::actor_enter(Actor *a) {
         if (a->is_on_floor()) {
             crack();
             if (state < DISSOLVING)
                 spread();
         }
-        return false;
     }
     
+    void Crack::animcb() {
+        GridPos p= get_pos();
+        SetFloor(p, MakeFloor("fl_abyss"));
+        KillItem(p);
+    }
+    
     void Crack::crack() {
         Floor *fl = GetFloor(get_pos());
         if (fl != NULL && fl->is_destructible()) {

Modified: trunk/src/items/Crack.hh
===================================================================
--- trunk/src/items/Crack.hh	2009-02-08 19:55:03 UTC (rev 1527)
+++ trunk/src/items/Crack.hh	2009-02-08 22:26:47 UTC (rev 1528)
@@ -55,13 +55,11 @@
 
         // GridObject interface
         virtual void init_model();
+        virtual void actor_enter(Actor *a);
         
         // ModelCallback interface
         virtual void animcb();
         
-        // Item interface
-        virtual bool actor_hit(Actor *a);
-        
     private:
         void crack();
         void spread();

Modified: trunk/src/items/Landmine.cc
===================================================================
--- trunk/src/items/Landmine.cc	2009-02-08 19:55:03 UTC (rev 1527)
+++ trunk/src/items/Landmine.cc	2009-02-08 22:26:47 UTC (rev 1528)
@@ -45,7 +45,7 @@
     
     void Landmine::explode() {
         sound_event ("landmine");
-        replace("it-explosion2");
+        replace("it_explosion_hollow");
     }
 
     DEF_ITEMTRAITSF(Landmine, "it_landmine", it_landmine, itf_static);

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-02-08 19:55:03 UTC (rev 1527)
+++ trunk/src/items/SimpleItems.cc	2009-02-08 22:26:47 UTC (rev 1528)
@@ -138,6 +138,11 @@
         else
             kill();
      }
+
+    bool Explosion::actor_hit(Actor *actor) {
+        SendMessage(actor, "shatter");
+        return false;
+    }
      
     DEF_ITEMTRAITSF(Explosion, "it_explosion", it_explosion, itf_static |
                 itf_animation | itf_indestructible | itf_norespawn | itf_fireproof);

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-02-08 19:55:03 UTC (rev 1527)
+++ trunk/src/items/SimpleItems.hh	2009-02-08 22:26:47 UTC (rev 1528)
@@ -126,6 +126,9 @@
         
         // ModelCallback interface
         virtual void animcb();
+        
+        // Item interface
+        virtual bool actor_hit(Actor *a);
     };
     
     /**

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-08 19:55:03 UTC (rev 1527)
+++ trunk/src/stones/SimpleStones.cc	2009-02-08 22:26:47 UTC (rev 1528)
@@ -256,6 +256,7 @@
             }
             case SPITTING:
                 state = IDLE;
+                init_model();
                 break;
             }
     }



From raoulb at bluewin.ch  Mon Feb  9 20:52:18 2009
From: raoulb at bluewin.ch (Raoul)
Date: Mon, 9 Feb 2009 20:52:18 +0100
Subject: [Enigma-game-svn] r1529
Message-ID: <20090209205218.1a37f254@bluewin.ch>

-> New API level rewritings
-> A new level


From raoul at mail.berlios.de  Tue Feb 10 23:25:33 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Tue, 10 Feb 2009 23:25:33 +0100
Subject: [Enigma-game-svn] r1530 - trunk/data/levels/enigma_tutorial
Message-ID: <200902102225.n1AMPX4M017882@sheep.berlios.de>

Author: raoul
Date: 2009-02-10 23:25:32 +0100 (Tue, 10 Feb 2009)
New Revision: 1530

Added:
   trunk/data/levels/enigma_tutorial/a_tut01_2.xml
   trunk/data/levels/enigma_tutorial/a_tut02_2.xml
   trunk/data/levels/enigma_tutorial/a_tut03_2.xml
   trunk/data/levels/enigma_tutorial/a_tut04_2.xml
   trunk/data/levels/enigma_tutorial/a_tut05_2.xml
   trunk/data/levels/enigma_tutorial/a_tut06_2.xml
   trunk/data/levels/enigma_tutorial/a_tut07_1.xml
   trunk/data/levels/enigma_tutorial/m_tut01_2.xml
   trunk/data/levels/enigma_tutorial/m_tut02_2.xml
   trunk/data/levels/enigma_tutorial/m_tut03_2.xml
   trunk/data/levels/enigma_tutorial/m_tut04_2.xml
   trunk/data/levels/enigma_tutorial/m_tut05_2.xml
   trunk/data/levels/enigma_tutorial/m_tut06_2.xml
   trunk/data/levels/enigma_tutorial/m_tut07_2.xml
   trunk/data/levels/enigma_tutorial/m_tut08_2.xml
   trunk/data/levels/enigma_tutorial/m_tut09_2.xml
   trunk/data/levels/enigma_tutorial/m_tut10_2.xml
   trunk/data/levels/enigma_tutorial/m_tut11_2.xml
   trunk/data/levels/enigma_tutorial/m_tut12_2.xml
   trunk/data/levels/enigma_tutorial/m_tut13_2.xml
Removed:
   trunk/data/levels/enigma_tutorial/a_tut01.xml
   trunk/data/levels/enigma_tutorial/a_tut02.xml
   trunk/data/levels/enigma_tutorial/a_tut03.xml
   trunk/data/levels/enigma_tutorial/a_tut04.xml
   trunk/data/levels/enigma_tutorial/a_tut05.xml
   trunk/data/levels/enigma_tutorial/a_tut06.xml
   trunk/data/levels/enigma_tutorial/a_tut07.xml
   trunk/data/levels/enigma_tutorial/m_tut1.xml
   trunk/data/levels/enigma_tutorial/m_tut2.xml
   trunk/data/levels/enigma_tutorial/m_tut3.xml
   trunk/data/levels/enigma_tutorial/m_tut4.xml
   trunk/data/levels/enigma_tutorial/m_tut5.xml
   trunk/data/levels/enigma_tutorial/m_tut6.xml
   trunk/data/levels/enigma_tutorial/m_tut7.xml
   trunk/data/levels/enigma_tutorial/m_tut8.xml
   trunk/data/levels/enigma_tutorial/m_tut9.xml
Modified:
   trunk/data/levels/enigma_tutorial/index.xml
Log:
-> New API rewritings of tutorial levels



Deleted: trunk/data/levels/enigma_tutorial/a_tut01.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut01.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut01.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,187 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Doors and Triggers" el:subtitle="" el:id="a_tut01"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-leaves"}
-stones["!"]=cell{stone="st-likeoxyda"}
-cells["#"]=cell{floor="fl-leavesb"}
-cells["$"]=cell{floor="fl-leavesc1"}
-cells["%"]=cell{floor="fl-leavesc2"}
-items["!"]=cell{item="it-trigger"}
-cells["&"]=cell{floor="fl-leavesc3"}
-cells["'"]=cell{floor="fl-leavesc4"}
-items["#"]=cell{item="it-document"}
-
-function ac_blackball(x,y)
-n=""
-p=0
-f=0
- if (x==10) and (y==6) then
-  n="ac10x6"
-  p=0
-  mf=1,66666666666667
- end
-set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-function par_trigger(x,y,mytarget)
-  set_item("it-trigger",x,y,{action="callback", target=mytarget})
-end
-
-function par_door(x,y,myname)
-  set_stone("st-door-v",x,y,{name=myname})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
-cells["("]=cell{floor="fl-leavese2"}
-cells[")"]=cell{floor="fl-leavese1"}
-stones["#"]=cell{stone="st-door-v-open"}
-stones["$"]=cell{parent={{file_oxyd,"d"}}}
-stones["A"]=cell{parent={{par_door, "door_a"}}}
-stones["B"]=cell{parent={{par_door, "door_b"}}}
-stones["C"]=cell{parent={{par_door, "door_c"}}}
-stones["D"]=cell{parent={{par_door, "door_d"}}}
-stones["E"]=cell{parent={{par_door, "door_e"}}}
-stones["F"]=cell{parent={{par_door, "door_f"}}}
-items["a"]=cell{parent={{par_trigger, "trig_e"}}}
-items["b"]=cell{parent={{par_trigger, "trig_b"}}}
-items["c"]=cell{parent={{par_trigger, "trig_d"}}}
-items["d"]=cell{parent={{par_trigger, "trig_f"}}}
-items["e"]=cell{parent={{par_trigger, "trig_c"}}}
-items["f"]=cell{parent={{par_trigger, "trig_a"}}}
-
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!#####$!&###(!!!!!!!",
-       "!##$!&!!!####!!!!!!!",
-       "!##!!!%!'#####(!!!!!",
-       "!#$!!'#########!!!!!",
-       "!#!!!##########(!!!!",
-       "!#!!!###########!!!!",
-       "!#!!!##########)!!!!",
-       "!#%!!&#########!!!!!",
-       "!##!!!$!&#####)!!!!!",
-       "!##%!'!!!####!!!!!!!",
-       "!#####%!'###)!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "          !         ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "       a            ",
-       "    b               ",
-       "                    ",
-       "   c                ",
-       "        #           ",
-       "   d                ",
-       "                    ",
-       "    e               ",
-       "       f            ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!            A     $",
-       "!            !!!!!!!",
-       "!              B   $",
-       "!              !!!!!",
-       "!               C  $",
-       "!               !!!!",
-       "!               D  $",
-       "!              !!!!!",
-       "!              E   $",
-       "!            !!!!!!!",
-       "!            F     $",
-       "!!!!!!!!!!!!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-SetAttrib(enigma.GetItem(3,5),"invisible",FALSE)
-SetAttrib(enigma.GetItem(3,7),"invisible",FALSE)
-SetAttrib(enigma.GetItem(4,3),"invisible",FALSE)
-SetAttrib(enigma.GetItem(4,9),"invisible",FALSE)
-SetAttrib(enigma.GetItem(7,2),"invisible",FALSE)
-SetAttrib(enigma.GetItem(7,10),"invisible",FALSE)
-SetAttrib(enigma.GetItem(8,6),"text","text1")
-
-function closealldoors()
-  SendMessage("door_a", "close")
-  SendMessage("door_b", "close")
-  SendMessage("door_c", "close")
-  SendMessage("door_d", "close")
-  SendMessage("door_e", "close")
-  SendMessage("door_f", "close")
-end
-
-function openmydoor(s)
-  SendMessage("door_"..s, "open")
-end
-
-function trig_a()  closealldoors()  openmydoor("a")  end
-function trig_b()  closealldoors()  openmydoor("b")  end
-function trig_c()  closealldoors()  openmydoor("c")  end
-function trig_d()  closealldoors()  openmydoor("d")  end
-function trig_e()  closealldoors()  openmydoor("e")  end
-function trig_f()  closealldoors()  openmydoor("f")  end
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Those doors on the right block your way to the oxyds ... on the left you see some triggers. Maybe they are somehow connected?</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut01_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut01_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut01_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,61 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Doors and Triggers" el:subtitle="" el:id="a_tut01"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn"}
+ti["_"] = {"fl_lawn_b"}
+ti[";"] = {"fl_lawn_c1"}
+ti[","] = {"fl_lawn_c2"}
+ti[":"] = {"fl_lawn_c3"}
+ti["."] = {"fl_lawn_c4"}
+ti["+"] = {"fl_lawn_e2"}
+ti["-"] = {"fl_lawn_e1"}
+ti["#"] = {"st_fake_oxyda"}
+ti["O"] = {"st_oxyd", flavor = "d"}
+ti["X"] = {"st_door", "door%%", faces = "ew"}
+ti["x"] = {"it_trigger", target = {"door%*", "door%%"}, action = {"close", "open"}}
+ti["i"] = {"it_document", text = "text1"} .. ti["_"]
+ti["@"] = {"#ac_marble", adhesion = 1} .. ti["_"]
+
+wo(res.autotile(ti, {"a", "f", "x"}, {"A", "F", "X"}), " ",
+      {"####################",
+       "#_____; :___+A     O",
+       "#__; : e ____#######",
+       "#__ b , ._____+B   O",
+       "#_;  ._________#####",
+       "#_ d __________+C  O",
+       "#_   ___i_ at _____####",
+       "#_ f __________-D  O",
+       "#_,  :_________#####",
+       "#__ c ; :_____-E   O",
+       "#__, . a ____#######",
+       "#_____, .___-F     O",
+       "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Those doors on the right block your way to the oxyds ... on the left you see some triggers. Maybe they are somehow connected?</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut01_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/a_tut02.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut02.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut02.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,168 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Timers" el:subtitle="" el:id="a_tut02"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-leaves"}
-stones["!"]=cell{stone="st-likeoxyda"}
-cells["#"]=cell{floor="fl-leavesb"}
-cells["$"]=cell{floor="fl-leavesc1"}
-cells["%"]=cell{floor="fl-leavesc2"}
-items["!"]=cell{item="it-document"}
-
-function ac_blackball(x,y)
-n=""
-p=0
-f=0
- if (x==2) and (y==10) then
-  n="ac2x10"
-  p=0
-  mf=1,66666666666667
- end
-set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
---stones["#"]=cell{stone="st-timer"}
-stones["#"]=cell{}
-cells["&"]=cell{floor="fl-leavesc3"}
-cells["'"]=cell{floor="fl-leavesc4"}
-stones["$"]=cell{stone="st-oneway-w"}
-stones["%"]=cell{stone="st-oneway-e"}
-stones["&"]=cell{stone="st-oneway-n"}
-stones["'"]=cell{stone="st-oneway-s"}
-cells["("]=cell{floor="fl-leavesd2"}
-cells[")"]=cell{floor="fl-leavesd1"}
-cells["*"]=cell{floor="fl-leavesd3"}
-cells["+"]=cell{floor="fl-leavesd4"}
-stones["("]=cell{parent={{file_oxyd,"d"}}}
-
-level={"!!!!!!!!!!!!!!!#!!!!",
-       "!###############%!!!",
-       "!################*!!",
-       "!#################!!",
-       "!#################!!",
-       "!#$!&########$!!(+!!",
-       "!#!!!########!!!!!!!",
-       "!#%!'########%!!)*!!",
-       "!#################!!",
-       "!#################!!",
-       "!################+!!",
-       "!###############$!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "  !                 ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "  ! !               ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!     $ $ % $ $    !",
-       "!     !&!'!&!'!    !",
-       "!     $ $ $ $ $    (",
-       "!     !'!&!'!&!!   !",
-       "!     % $ $ $  !   !",
-       "!  #  !'!&!&!  %   !",
-       "!     $ % $ $  !   !",
-       "!     !&!'!'!'!!   !",
-       "!     $ $ $ % $    (",
-       "!     !'!&!&!'!    !",
-       "!     $ $ $ $ $    !",
-       "!!!!!!!!!!!!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-SetAttrib(enigma.GetItem(2,9),"text","text1")
-
---SetAttrib(enigma.GetStone(3,6),"interval",1000)
-set_stone("st-timer", 3, 6, {interval = 15})
-SetAttrib(enigma.GetStone(3,6),"on",TRUE)
-SetAttrib(enigma.GetStone(3,6),"loop",TRUE)
-
-SetAttrib(enigma.GetItem(4,9),"text","text2")
-
-Signal ("st(3 6)","st(9 2)")
-Signal ("st(3 6)","st(11 2)")
-Signal ("st(3 6)","st(13 8)")
-Signal ("st(3 6)","st(11 4)")
-Signal ("st(3 6)","st(11 6)")
-
-set_item("it-document", 16, 6, {text = "text3"})
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">This oscillating stone is a timer-stone. You cannot interact with it, but nevertheless be aware when you see one: After some time-period anything might happen ...</el:english>
-      </el:string> 
-      <el:string el:key="text2">
-        <el:english el:translate="true">The stones with arrows are one-way-stones. As you might have guessed, you can only pass them in one direction.                Mazes are cherished elements of Enigma - you will see lots of them.</el:english>
-      </el:string> 
-      <el:string el:key="text3">
-        <el:english el:translate="true">Well done!     When you have finished this level, let's play some example levels from the actual Enigma packs!</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut02_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut02_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut02_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,76 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Timers" el:subtitle="" el:id="a_tut02"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["_"] = {"fl_lawn"}
+ti[";"] = {"fl_lawn_c1"}
+ti[","] = {"fl_lawn_c2"}
+ti[":"] = {"fl_lawn_c3"}
+ti["."] = {"fl_lawn_c4"}
+ti["/"] = {"fl_lawn_d1"}
+ti["*"] = {"fl_lawn_d2"}
+ti["-"] = {"fl_lawn_d3"}
+ti["+"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"} .. ti["-"]
+ti["w"] = {"st_oneway_w"}
+ti["e"] = {"st_oneway_e"}
+ti["n"] = {"st_oneway_n"}
+ti["s"] = {"st_oneway_s"}
+ti["N"] = {"st_oneway_n", "flip#"}
+ti["S"] = {"st_oneway_s", "flip#"}
+ti["T"] = {"st_timer", interval = 15, target = "flip#*", action = "flip"} .. ti["-"]
+ti["O"] = {"st_oxyd", flavor = "d"}
+ti["i"] = {"it_document", text = "text1"}
+ti["j"] = {"it_document", text = "text2"}
+ti["k"] = {"it_document", text = "text3"} .. ti["_"]
+ti["@"] = {"#ac_marble", adhesion = 1}
+
+wo(ti, " ",
+      {"####################",
+       "#     w w e w w ,__#",
+       "#     #n#S#N#s#  -_#",
+       "#     w w w w w   _O",
+       "#     #s#n#S#n##  _#",
+       "# ;_: e w w w;_#*+_#",
+       "# _T_ #s#n#N#__ek__#",
+       "# ,_. w e w w,_#/-_#",
+       "#     #n#s#s#S##  _#",
+       "# i j w w w e w   _O",
+       "# @   #s#n#n#s#  +_#",
+       "#     w w w w w ;__#",
+       "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">This oscillating stone is a timer-stone. You cannot interact with it, but nevertheless be aware when you see one: After some time-period anything might happen ...</el:english>
+      </el:string> 
+      <el:string el:key="text2">
+        <el:english el:translate="true">The stones with arrows are one-way-stones. As you might have guessed, you can only pass them in one direction.                Mazes are cherished elements of Enigma - you will see lots of them.</el:english>
+      </el:string> 
+      <el:string el:key="text3">
+        <el:english el:translate="true">Well done!     When you have finished this level, let's play some example levels from the actual Enigma packs!</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut02_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/a_tut03.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut03.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut03.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,159 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Blocks and Slopes" el:subtitle="" el:id="a_tut03"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-leaves"}
-stones["!"]=cell{stone="st-likeoxyda"}
-cells["#"]=cell{floor="fl-leavesb"}
-cells["$"]=cell{floor="fl-leavesc1"}
-cells["%"]=cell{floor="fl-leavesc2"}
-
-function ac_blackball(x,y)
-n=""
-p=0
-f=0
- if (x==2) and (y==2) then
-  n="ac2x2"
-  p=0
-  mf=1,66666666666667
- end
-set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
-items["!"]=cell{item="it-document"}
-stones["#"]=cell{stone="st-wood"}
-cells["&"]=cell{floor="fl-leavesc3"}
-cells["'"]=cell{floor="fl-leavesc4"}
-cells["("]=cell{floor="fl-leavesd2"}
-cells[")"]=cell{floor="fl-gradient6"}
-cells["*"]=cell{floor="fl-gradient1"}
-cells["+"]=cell{floor="fl-leavesd4"}
-cells[","]=cell{floor="fl-gradient4"}
-stones["$"]=cell{stone="st-door_a"}
-stones["%"]=cell{parent={{file_oxyd,"d"}}}
-cells["-"]=cell{floor="fl-gradient3"}
-cells["."]=cell{floor="fl-gradient5"}
-items["#"]=cell{item="it-trigger"}
-
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!###!),,,,----.!###!",
-       "!$!&!*),,,---.*!$!&!",
-       "!%!'!**),,--.**!%!'!",
-       "!#!#!***!!!!***!#!#!",
-       "!$!&!***!!!!***!$!&!",
-       "!!!!!***!!!!***!!!!!",
-       "!%!'!***!!!!***!%!'!",
-       "!#!#!***!!!!***!#!#!",
-       "!#!(#+!#!!!!#!(#+!#!",
-       "!#%!!!'#!!!!#%!!!'#!",
-       "!#######!!!!#######!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "  !                 ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "  !              !  ",
-       "                    ",
-       "                    ",
-       "                 #  ",
-       "                    ",
-       "                    ",
-       "      !             ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!   !          !   !",
-       "!   !          !   !",
-       "!   !          !   !",
-       "!   !   !$$!   !   !",
-       "!   !   !  !   !   !",
-       "! # !   !  !   !   !",
-       "!   !   !  !   !   !",
-       "!   !   !  !   !   !",
-       "!       !  !       !",
-       "!       !  !       !",
-       "!       !  !       !",
-       "!!!!!!!!!%%!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-SetAttrib(enigma.GetItem(2,3),"text","text1")
-SetAttrib(enigma.GetItem(6,9),"text","text2")
-SetAttrib(enigma.GetItem(17,3),"text","text3")
-
-SetAttrib(enigma.GetItem(17,6),"invisible",FALSE)
-Signal ("it(17 6)","st(10 4)")
-Signal ("it(17 6)","st(9 4)")
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">This wooden block is movable and heavy enough to hold down the trigger on the right.   Try to push it there!</el:english>
-      </el:string> 
-      <el:string el:key="text2">
-        <el:english el:translate="true">Remember?  There are different kinds of floors.  And these are steep ...</el:english>
-      </el:string> 
-      <el:string el:key="text3">
-        <el:english el:translate="true">Is there more one can do with wooden blocks?   Yes!  Just explore the next levels.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut03_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut03_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut03_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,77 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Blocks and Slopes" el:subtitle="" el:id="a_tut03"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["SlopeStrength"] = 30
+
+ti[" "] = {"fl_lawn"}
+ti["_"] = {"fl_lawn_b"}
+ti[";"] = {"fl_lawn_c1"}
+ti[","] = {"fl_lawn_c2"}
+ti[":"] = {"fl_lawn_c3"}
+ti["."] = {"fl_lawn_c4"}
+ti["/"] = {"fl_lawn_d2"}
+ti["*"] = {"fl_lawn_d4"}
+ti["v"] = {"fl_slope_ps"}
+ti["+"] = {"fl_slope_osw"}
+ti["<"] = {"fl_slope_pw"}
+ti[">"] = {"fl_slope_pe"}
+ti["-"] = {"fl_slope_ose"}
+ti["#"] = {"st_fake_oxyda"}
+ti["B"] = {"st_box"}
+ti["D"] = {"st_door_a", "door#"}
+ti["O"] = {"st_oxyd", flavor = "d"}
+ti["i"] = {"it_document", text = "text1"}
+ti["j"] = {"it_document", text = "text2"}
+ti["k"] = {"it_document", text = "text3"}
+ti["t"] = {"it_trigger", target = "door#*"}
+ti["@"] = {"#ac_marble", adhesion = 1}
+
+wo(ti, " ",
+      {"####################",
+       "#___#+<<<<>>>>-#___#",
+       "#;@:#v+<<<>>>-v#; :#",
+       "#,i.#vv+<<>>-vv#,k.#",
+       "#_ _#vvv#DD#vvv#_ _#",
+       "#; :#vvv#  #vvv#; :#",
+       "# B #vvv#  #vvv# t #",
+       "#, .#vvv#  #vvv#, .#",
+       "#_ _#vvv#  #vvv#_ _#",
+       "#_ /_*j_#  #_ /_* _#",
+       "#_,   ._#  #_,   ._#",
+       "#_______#  #_______#",
+       "#########OO#########"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">This wooden block is movable and heavy enough to hold down the trigger on the right.   Try to push it there!</el:english>
+      </el:string> 
+      <el:string el:key="text2">
+        <el:english el:translate="true">Remember?  There are different kinds of floors.  And these are steep ...</el:english>
+      </el:string> 
+      <el:string el:key="text3">
+        <el:english el:translate="true">Is there more one can do with wooden blocks?   Yes!  Just explore the next levels.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut03_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/a_tut04.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut04.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut04.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,146 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Lasers and Mirrors" el:subtitle="" el:id="a_tut04"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006, 2008 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-leavesb"}
-stones["!"]=cell{stone="st-likeoxyda"}
-stones["#"]=cell{stone="st-glass1"}
-cells["#"]=cell{floor="fl-leaves"}
-
-function par_laser(x,y)
-  set_stone("st-laser-e",x,y,{on=TRUE})
-end
-
-stones["$"]=cell{parent={{par_laser}}}
-cells["$"]=cell{floor="fl-leavesd4"}
-cells["%"]=cell{floor="fl-leavesd3"}
-stones["%"]=cell{parent={{file_oxyd,"d"}}}
-stones["&"]=cell{stone="st-mirror-p/"}
-cells["&"]=cell{floor="fl-leavesd2"}
-cells["'"]=cell{floor="fl-leavesd1"}
-stones["'"]=cell{stone="st-mirror-p\\m"}
-items["!"]=cell{item="it-document"}
-
-function ac_blackball(x,y)
-n=""
-p=0
-f=0
- if (x==14) and (y==6) then
-  n="ac14x6"
-  p=0
-  mf=1,66666666666667
- end
-set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!#!!!!!!!!!!!!",
-       "!!!!!!!#&!!!!!!!!!!!",
-       "!!!!!!!############!",
-       "!!!!!!$##'!!!!!!!!!!",
-       "!!!!#####!!!!!!!!!!!",
-       "!!!!!!%##&!!!!!!!!!!",
-       "!!!!!!!############!",
-       "!!!!!!!#'!!!!!!!!!!!",
-       "!!!!!!!#!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "              !     ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "            !       ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!      %           !",
-       "!    ##########    !",
-       "!  ###        ###  !",
-       "! ##            ##%!",
-       "! #              # !",
-       "! # $  &  '      # !",
-       "! #              # !",
-       "! ##            ##%!",
-       "!  ###        ###  !",
-       "!    ##########    !",
-       "!      %           !",
-       "!!!!!!!!!!!!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
---SetAttrib(enigma.GetStone(4,6),"init",TRUE)
-
-SetAttrib(enigma.GetItem(12,6),"text","text1")
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">The bright light beam is a laser beam.   Don't get too close to it!   But it has its uses ...    You can use the mirrors to direct the laser to its targets.   From these, only the light-gray ones are movable, just try it!</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut04_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut04_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut04_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,62 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Lasers and Mirrors" el:subtitle="" el:id="a_tut04"/>
+      <el:version el:score="1" el:release="2" el:revision="3" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2008, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["_"] = {"fl_lawn"}
+ti[";"] = {"fl_lawn_d4"}
+ti[","] = {"fl_lawn_d3"}
+ti[":"] = {"fl_lawn_d2"}
+ti["."] = {"fl_lawn_d1"}
+ti["#"] = {"st_fake_oxyda"}
+ti["G"] = {"st_lightglass"}
+ti["H"] = {"st_lightglass"} .. ti["_"]
+ti["L"] = {"st_laser", orientation = EAST, state = ON} .. ti["_"]
+ti["M"] = {"st_mirror", orientation = EAST} .. ti["_"]
+ti["N"] = {"st_mirror", orientation = WEST, movable = true}
+ti["O"] = {"st_oxyd", flavor = "d"}
+ti["i"] = {"it_document", text = "text1"}
+ti["@"] = {"#ac_marble", adhesion = 1}
+
+wo(ti, " ",
+      {"####################",
+       "#      O           #",
+       "#    GGHGGGGGGG    #",
+       "#  GGG _:     GGG  #",
+       "# GG   _________HHO#",
+       "# G   ;__.       G #",
+       "# G L__M_ N i @  G #",
+       "# G   ,__:       G #",
+       "# GG   _________HHO#",
+       "#  GGG _.     GGG  #",
+       "#    GGHGGGGGGG    #",
+       "#      O           #",
+       "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">The bright light beam is a laser beam.   Don't get too close to it!   But it has its uses ...    You can use the mirrors to direct the laser to its targets.   From these, only the light-gray ones are movable, just try it!</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut04_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/a_tut05.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut05.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut05.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,156 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Items" el:subtitle="" el:id="a_tut05"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-leaves"}
-stones["!"]=cell{stone="st-likeoxyda"}
-cells["#"]=cell{floor="fl-leavesb"}
-cells["$"]=cell{floor="fl-leavesc1"}
-cells["%"]=cell{floor="fl-leavesc2"}
-items["!"]=cell{item="it-document"}
-
-function ac_blackball(x,y)
-n=""
-p=0
-f=0
- if (x==3) and (y==5) then
-  n="ac3x5"
-  p=0
-  mf=1,66666666666667
- end
-set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
-items["#"]=cell{item="it-key_a"}
-items["$"]=cell{item="it-key_b"}
-items["%"]=cell{item="it-key_c"}
-cells["&"]=cell{floor="fl-leavesc3"}
-cells["'"]=cell{floor="fl-leavesd1"}
-cells["("]=cell{floor="fl-leavesc4"}
-cells[")"]=cell{floor="fl-leavesd2"}
-stones["#"]=cell{stone="st-key_b"}
-stones["$"]=cell{stone="st-door_a"}
-cells["*"]=cell{floor="fl-leavesd3"}
-stones["%"]=cell{stone="st-key_a"}
-cells["+"]=cell{floor="fl-leavesd4"}
-stones["&"]=cell{stone="st-key_c"}
-stones["'"]=cell{parent={{file_oxyd,"d"}}}
-
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!#####!###!###!####!",
-       "!#$!&#!###!###!#$&#!",
-       "!#!!!)!###!###!+!!#!",
-       "!#%!!!!!&#!#$!!!!!#!",
-       "!##!'#!*!#!#!'!*!!#!",
-       "!#$!&#!#!###!#!#!!#!",
-       "!#!!!#!#!)!+!#!#!!#!",
-       "!#!!!#!#%!!!(#!#!!#!",
-       "!#!!!#!###!###!#!!#!",
-       "!#%!(#!###!###!#%(#!",
-       "!#####!#######!####!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "   !                ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "   !                ",
-       "                    ",
-       "                    ",
-       "                !   ",
-       "   #                ",
-       "   $                ",
-       "   %                ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!     !   !   !    !",
-       "!     !   !   !    !",
-       "!     !   !   !    !",
-       "!     #   $   &  ' !",
-       "!     !   !   !  ' !",
-       "!     !   !   !    !",
-       "!     !   !   !  ' !",
-       "!     $   %   $  ' !",
-       "!     !   !   !    !",
-       "!     !   !   !    !",
-       "!     !   !   !    !",
-       "!!!!!!!!!!!!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-SetAttrib(enigma.GetItem(3,3),"text","text1")
-SetAttrib(enigma.GetItem(16,6),"text","text2")
-
-Signal ("st(6 4)","st(6 8)")
-Signal ("st(10 8)","st(10 4)")
-Signal ("st(14 4)","st(14 8)")
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Use the right mouse-button to rotate your inventory,  it's the bar at the bottom of the screen.   And guess what these three items down there can be used to.</el:english>
-      </el:string> 
-      <el:string el:key="text2">
-        <el:english el:translate="true">There are lots of different items to use in Enigma, as well as special floors and stones.   Let's explore some more of the actual Enigma levels!   And if you have problems with a level - take a look at the manual:   For some levels, there are hints.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut05_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut05_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut05_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Items" el:subtitle="" el:id="a_tut05"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn"}
+ti["_"] = {"fl_lawn_b"}
+ti[";"] = {"fl_lawn_c1"}
+ti[","] = {"fl_lawn_c2"}
+ti[":"] = {"fl_lawn_c3"}
+ti["."] = {"fl_lawn_c4"}
+ti["/"] = {"fl_lawn_d1"}
+ti["-"] = {"fl_lawn_d2"}
+ti["*"] = {"fl_lawn_d3"}
+ti["+"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["O"] = {"st_oxyd", flavor = "d"}
+ti["X"] = {"st_key", code = "%%", target = "door%%"}
+ti["Y"] = {"st_door", "door%%", flavor = "a"} .. ti["_"]
+ti["x"] = {"it_key", code = "%%"}
+ti["i"] = {"it_document", text = "text1"}
+ti["j"] = {"it_document", text = "text2"}
+ti["@"] = {"#ac_marble", adhesion = 1}
+
+wo(res.autotile(ti, {"a", "c", "x"}, {"A", "C", "X"}, {"D", "F", "Y"}), " ",
+      {"####################",
+       "#_____#___#___#____#",
+       "#_; :_#___#___#_;:_#",
+       "#_ i -#___#___#+  _#",
+       "#_,   A :_E_; C  O_#",
+       "#__@/_#* _#_ /#* O_#",
+       "#_; :_#_ _#_ _#_j _#",
+       "#_ b _#_ -#+ _#_ O_#",
+       "#_ a _D_, B ._F_ O_#",
+       "#_ c _#___#___#_  _#",
+       "#_, ._#___#___#_,._#",
+       "#_____#___#___#____#",
+       "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Use the right mouse-button to rotate your inventory,  it's the bar at the bottom of the screen.   And guess what these three items down there can be used to.</el:english>
+      </el:string> 
+      <el:string el:key="text2">
+        <el:english el:translate="true">There are lots of different items to use in Enigma, as well as special floors and stones.   Let's explore some more of the actual Enigma levels!   And if you have problems with a level - take a look at the manual:   For some levels, there are hints.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut05_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/a_tut06.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut06.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut06.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,139 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Bye!" el:subtitle="" el:id="a_tut06"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-leaves"}
-stones["!"]=cell{stone="st-likeoxyda"}
-cells["#"]=cell{floor="fl-leavesc4"}
-cells["$"]=cell{floor="fl-leavesc3"}
-cells["%"]=cell{floor="fl-leavesc2"}
-cells["&"]=cell{floor="fl-leavesc1"}
-items["!"]=cell{item="it-document"}
-stones["#"]=cell{parent={{file_oxyd,"a"}}}
-
-function ac_blackball(x,y)
-n=""
-p=0
-f=0
- if (x==12) and (y==6) then
-  n="ac12x6"
-  p=0
-  mf=1,66666666666667
- end
-set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!#%!!!!!",
-       "!!!#%!!!!!!!!$&!!!!!",
-       "!!!$&!!!!!!!!!!!!!!!",
-       "!!!!!!!!#%!!!!!!!!!!",
-       "!!!!!!!!$&!!!!#%!!!!",
-       "!!!!!#%!!!!!!!$&!!!!",
-       "!!!!!$&!!!#%!!!!!!!!",
-       "!!#%!!!!!!$&!!!!#%!!",
-       "!!$&!!!!!!!!!!!!$&!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "            !       ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "     ! !            ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  #",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!!!!!!#!!!!!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-SetAttrib(enigma.GetItem(5,6),"text","text1")
-SetAttrib(enigma.GetItem(7,6),"text","text2")
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">But before this, take a look at the final tutorial level Jacob devised for you.   See it as an exam, if you want to.   It's quite difficult, so don't despair if you don't get through it at the first time.   Bye!</el:english>
-      </el:string> 
-      <el:string el:key="text2">
-        <el:english el:translate="true">Well, I hope you enjoyed this tutorial-pack.   You will see most of these levels a second time in the Enigma packs, together with many new and much more difficult ones.   Just don't give up on them!</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut06_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut06_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut06_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,60 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Bye!" el:subtitle="" el:id="a_tut06"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn"}
+ti["."] = {"fl_lawn_c4"}
+ti[","] = {"fl_lawn_c2"}
+ti[":"] = {"fl_lawn_c3"}
+ti[";"] = {"fl_lawn_c1"}
+ti["#"] = {"st_fake_oxyda"}
+ti["O"] = {"st_oxyd", flavor = "a"}
+ti["i"] = {"it_document", text = "text1"}
+ti["j"] = {"it_document", text = "text2"}
+ti["@"] = {"#ac_marble", adhesion = 1}
+
+wo(ti, " ",
+      {"####################",
+       "#                  #",
+       "#            .,    #",
+       "#  .,        :;    #",
+       "#  :;              #",
+       "#       .,         O",
+       "#    j i:;  @ .,   #",
+       "#    .,       :;   #",
+       "#    :;   .,       #",
+       "# .,      :;    ., #",
+       "# :;            :; #",
+       "#                  #",
+       "######O#############"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">But before this, take a look at the final tutorial level Jacob devised for you.   See it as an exam, if you want to.   It's quite difficult, so don't despair if you don't get through it at the first time.   Bye!</el:english>
+      </el:string> 
+      <el:string el:key="text2">
+        <el:english el:translate="true">Well, I hope you enjoyed this tutorial-pack.   You will see most of these levels a second time in the Enigma packs, together with many new and much more difficult ones.   Just don't give up on them!</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut06_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/a_tut07.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut07.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut07.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,95 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Chess Stones" el:subtitle="" el:id="c_tut01"/>
-      <el:version el:score="1" el:release="1" el:revision="5" el:status="released"/>
-      <el:author el:name="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2008 Raoul Bourquin, Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.10">
-        <el:dependency el:path="lib/libmath" el:id="lib/libmath" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments></el:comments>
-      <el:score el:easy="-" el:difficult="2:18"/>
-    </el:info>
-    <el:luamain><![CDATA[
-wo["ConserveLevel"] = true
-
-ti[" "] = {"fl_lawn_b"}
-ti["1"] = {"fl_lawn_c1"}
-ti["2"] = {"fl_lawn_c2"}
-ti["3"] = {"fl_lawn_c3"}
-ti["4"] = {"fl_lawn_c4"}
-ti["."] = {"fl_lawn"}
-ti["~"] = {"fl_water"}
-ti["#"] = ti[" "] .. {"st_fake_oxyda"}
-ti["@"] = ti["."] .. {"#ac_marble_black"}
-ti["C"] = ti["."] .. {"st_chess_black"}
-ti["c"] = (ti["."] .. {"st_chess_black"}) .. {"it_cross"}
-ti["D"] = ti[" "] .. {"st_door", name="door#", flavor="a"}
-ti["T"] = ti["."] .. {"it_trigger", name="trigger#"}
-ti["B"] = ti["."] .. {"#ac_marble_black", controllers=0, owner=1, name="second_marble"}
-ti["S"] = ti["."] .. {"st_switch", target="let_marble_run"}
-ti["d"] = ti["."] .. {"st_door", name="first_door", flavor="a"}
-ti["t"] = ti["."] .. {"it_trigger", target="first_door"}
-ti["i"] = ti["."] .. {"it_document", text="text1"}
-ti["I"] = ti["."] .. {"it_document", text="text2"}
-ti["x"] = ti[" "] .. {"st_oxyd", flavor="d"}
-
-w, h = wo(ti, " ", {
- -- 01234567890123456789
-   "#x###########x####x#",
-   "xD           D    Dx",
-   "# 1.....3          #",
-   "# .......  1...3   #",
-   "# ..C.... 1.T.T.3  #",
-   "# 2...... .T...T.  #",
-   "xD ...... ...~... Dx",
-   "# 1...... .T...T.  #",
-   "# ..C.... 2.T.T.4  #",
-   "# .......  2...4   #",
-   "# 2...I.4          #",
-   "xD    .      D    Dx",
-   "#x####.######x####x#",
-   "#    #.#           #",
-   "#    #.#           #",
-   "#    #d#     1.3   #",
-   "#    #.#     .B.   #",
-   "#    #.#     ...   #",
-   "######.####  2..3  #",
-   "#     .   #   .c.  #",
-   "#  1...3  #   2..3 #",
-   "#  . at .i...S    .t. #",
-   "#  2...4  #    2.4 #",
-   "#         #        #",
-   "####################",
-})
-
-function let_marble_run(onoff, sender)
-  wo:fl(no["second_marble"]):set({force_x = 65, force_y = 155})
-  sender:set({target = ""})
-end
-
-trigger_to_doors = lib.math.permutation(8)
-doors = no["door#*"]
-triggers = no["trigger#*"]
-
-for j = 1, #triggers do
-  triggers[j].target = doors[trigger_to_doors[j]]
-end
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">The stone with the horse's head is called ''chess stone''. Watch how the other marble hits one of them to move it. The angle is important.</el:english>
-      </el:string>
-      <el:string el:key="text2">
-        <el:english el:translate="true">Now try to move these chess stones onto the triggers. They always move two steps plus one step.</el:english>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/a_tut07_1.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/a_tut07_1.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/a_tut07_1.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,96 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Chess Stones" el:subtitle="" el:id="c_tut01"/>
+      <el:version el:score="1" el:release="1" el:revision="5" el:status="released"/>
+      <el:author  el:name="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2008 Raoul Bourquin, Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="2:18"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["ConserveLevel"] = true
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn_c1"}
+ti["2"] = {"fl_lawn_c2"}
+ti["3"] = {"fl_lawn_c3"}
+ti["4"] = {"fl_lawn_c4"}
+ti["."] = {"fl_lawn"}
+ti["~"] = {"fl_water"}
+ti["#"] = ti[" "] .. {"st_fake_oxyda"}
+ti["@"] = ti["."] .. {"#ac_marble_black"}
+ti["C"] = ti["."] .. {"st_chess_black"}
+ti["c"] = ti["C"] .. {"it_cross"}
+ti["D"] = ti[" "] .. {"st_door", name="door#", flavor="a"}
+ti["T"] = ti["."] .. {"it_trigger", name="trigger#"}
+ti["B"] = ti["."] .. {"#ac_marble_black", controllers=0, owner=1, name="second_marble"}
+ti["S"] = ti["."] .. {"st_switch", target="let_marble_run"}
+ti["d"] = ti["."] .. {"st_door", name="first_door", flavor="a"}
+ti["t"] = ti["."] .. {"it_trigger", target="first_door"}
+ti["i"] = ti["."] .. {"it_document", text="text1"}
+ti["I"] = ti["."] .. {"it_document", text="text2"}
+ti["x"] = ti[" "] .. {"st_oxyd", flavor="d"}
+
+w, h = wo(ti, " ", {
+ -- 01234567890123456789
+   "#x###########x####x#",
+   "xD           D    Dx",
+   "# 1.....3          #",
+   "# .......  1...3   #",
+   "# ..C.... 1.T.T.3  #",
+   "# 2...... .T...T.  #",
+   "xD ...... ...~... Dx",
+   "# 1...... .T...T.  #",
+   "# ..C.... 2.T.T.4  #",
+   "# .......  2...4   #",
+   "# 2...I.4          #",
+   "xD    .      D    Dx",
+   "#x####.######x####x#",
+   "#    #.#           #",
+   "#    #.#           #",
+   "#    #d#     1.3   #",
+   "#    #.#     .B.   #",
+   "#    #.#     ...   #",
+   "######.####  2..3  #",
+   "#     .   #   .c.  #",
+   "#  1...3  #   2..3 #",
+   "#  . at .i...S    .t. #",
+   "#  2...4  #    2.4 #",
+   "#         #        #",
+   "####################",
+})
+
+doors = no["door#*"]:shuffle()
+triggers = no["trigger#*"]
+
+for j = 1, #triggers do
+  triggers[j].target = doors[j]
+end
+
+function let_marble_run(onoff, sender)
+  wo:fl(no["second_marble"]):set({force_x = 65, force_y = 155})
+  sender:set({target = ""})
+end
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">The stone with the horse's head is called ''chess stone''. Watch how the other marble hits one of them to move it. The angle is important.</el:english>
+      </el:string>
+      <el:string el:key="text2">
+        <el:english el:translate="true">Now try to move these chess stones onto the triggers. They always move two steps plus one step.</el:english>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/a_tut07_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/data/levels/enigma_tutorial/index.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/index.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/index.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,26 +1,26 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10100" network="false" owner="Enigma Team" release="1" revision="16" title="Tutorial"/>
+  <info enigma="1.00" group="Enigma" location="10100" network="false" owner="Enigma Team" release="1" revision="17" title="Tutorial"/>
 
   <attributes/>
 
   <levels>
-    <level _seq="1" _title="Oxyd Stones 1" _xpath="./m_tut1" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut1" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="2" _title="Oxyd Stones 2" _xpath="./m_tut2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut2" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="3" _title="Oxyd Stones 3" _xpath="./m_tut3" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut3" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="4" _title="Meditation 1" _xpath="./m_med1" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_med1" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="5" _title="Movement 1" _xpath="./m_tut4" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut4" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="6" _title="Movement 2" _xpath="./m_tut5" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut5" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="7" _title="Movement 3" _xpath="./m_tut6" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut6" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="8" _title="Meditation 2" _xpath="./m_med2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_med2" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="9" _title="Movement 4" _xpath="./m_tut7" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut7" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="10" _title="Movement 5" _xpath="./m_tut8" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut8" rel="2" rev="0" score="2" target="time" unit="duration"/>
-    <level _seq="11" _title="Floors 1" _xpath="./m_tut9" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut9" rel="3" rev="5" score="2" target="time" unit="duration"/>
-    <level _seq="12" _title="Floors 2" _xpath="./m_tut10" author="Martin Hawlisch" ctrl="force" easy="false" id="m_tutor/m_tut10" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="13" _title="Floors 3" _xpath="./m_tut11" author="Martin Hawlisch" ctrl="force" easy="false" id="m_tutor/m_tut11" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="14" _title="Doors and Triggers" _xpath="./a_tut01" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut01" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="15" _title="Timers" _xpath="./a_tut02" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut02" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="1" _title="Oxyd Stones 1" _xpath="./m_tut01_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut1" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="2" _title="Oxyd Stones 2" _xpath="./m_tut02_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut2" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="3" _title="Oxyd Stones 3" _xpath="./m_tut03_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut3" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="4" _title="Meditation 1" _xpath="./m_tut12_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_med1" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="5" _title="Movement 1" _xpath="./m_tut04_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut4" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="6" _title="Movement 2" _xpath="./m_tut05_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut5" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="7" _title="Movement 3" _xpath="./m_tut06_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut6" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="8" _title="Meditation 2" _xpath="./m_tut13_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_med2" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="9" _title="Movement 4" _xpath="./m_tut07_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut7" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="10" _title="Movement 5" _xpath="./m_tut08_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut8" rel="3" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="11" _title="Floors 1" _xpath="./m_tut09_2" author="Martin Hawlisch" ctrl="force" easy="true" id="m_tutor/m_tut9" rel="3" rev="5" score="2" target="time" unit="duration"/>
+    <level _seq="12" _title="Floors 2" _xpath="./m_tut10_2" author="Martin Hawlisch" ctrl="force" easy="false" id="m_tutor/m_tut10" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="13" _title="Floors 3" _xpath="./m_tut11_2" author="Martin Hawlisch" ctrl="force" easy="false" id="m_tutor/m_tut11" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="14" _title="Doors and Triggers" _xpath="./a_tut01_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut01" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="15" _title="Timers" _xpath="./a_tut02_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut02" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="16" _title="Welcome" _xpath="enigma_i/welcome_2" author="Daniel Heck" ctrl="force" easy="true" id="welcome" rel="2" rev="4" score="2" target="time" unit="duration"/>
     <level _seq="17" _title="Rollercoaster" _xpath="enigma_ii/jc02_1" author="Jens-Christian Korth" ctrl="force" easy="false" id="jc02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="The Doors" _xpath="enigma_i/siegfried11_2" author="Siegfried Fennig" ctrl="force" easy="false" id="level4a" rel="2" rev="2" score="2" target="time" unit="duration"/>
@@ -29,7 +29,7 @@
     <level _seq="21" _title="(Counter)Clockwise" _xpath="enigma_i/wb13_1" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb13" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="Hurry!" _xpath="enigma_i/jc01_1" author="Jens-Christian Korth" ctrl="force" easy="false" id="jc01" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Watery Grave" _xpath="enigma_i/martin37_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin37" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="24" _title="Blocks and Slopes" _xpath="./a_tut03" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut03" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="24" _title="Blocks and Slopes" _xpath="./a_tut03_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut03" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="25" _title="Round Trip" _xpath="enigma_ii/martin35_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin35" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="Koosnab" _xpath="enigma_ii/rb02_1" author="Roberto Bardin" ctrl="force" easy="false" id="rb02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="27" _title="Hanging In The Balance" _xpath="enigma_i/illmind03_1" author="illmind" ctrl="force" easy="false" id="illmind03" rel="1" rev="1" score="1" target="time" unit="duration"/>
@@ -43,7 +43,7 @@
     <level _seq="35" _title="Slippery Slopes" _xpath="enigma_i/martin38_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin38" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Ice Skating" _xpath="enigma_i/siegfried22_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level7a" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Sok It To 'Em" _xpath="enigma_i/nat07_1" author="Nat Pryce" ctrl="force" easy="false" id="nat7" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="38" _title="Lasers and Mirrors" _xpath="./a_tut04" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut04" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="38" _title="Lasers and Mirrors" _xpath="./a_tut04_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut04" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="39" _title="Light Switches" _xpath="enigma_i/martin08_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin08" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="40" _title="- Meditation -" _xpath="enigma_i/siegfried33_1" author="anonymous" ctrl="force" easy="false" id="meditation1" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="41" _title="Mirror Room" _xpath="enigma_i/luc12_2" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc12" rel="2" rev="1" score="1" target="time" unit="duration"/>
@@ -57,7 +57,7 @@
     <level _seq="49" _title="Inverted Laser Spiral" _xpath="enigma_ii/duffy42_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy42" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="- Meditation -" _xpath="enigma_i/siegfried35_1" author="Siegfried Fennig" ctrl="force" easy="false" id="meditation14" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Laser Games" _xpath="enigma_iv/mp03_1" author="moonpearl" ctrl="force" easy="false" id="mp03" rel="1" rev="10" score="1" target="time" unit="duration"/>
-    <level _seq="52" _title="Items" _xpath="./a_tut05" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut05" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="52" _title="Items" _xpath="./a_tut05_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut05" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Flying" _xpath="enigma_i/luc07_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc07" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="54" _title="Annoying little balls" _xpath="enigma_i/wb09_2" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb9" rel="2" rev="0" score="2" target="time" unit="duration"/>
     <level _seq="55" _title="The Grim Reaper" _xpath="enigma_i/daniel11_1" author="Daniel Heck" ctrl="force" easy="true" id="space" rel="1" rev="3" score="1" target="time" unit="duration"/>
@@ -69,8 +69,8 @@
     <level _seq="61" _title="Is It Easy?" _xpath="enigma_i/martin06_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin06" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="62" _title="Beam0r" _xpath="enigma_ii/peter01_1" author="Peter Santo" ctrl="force" easy="false" id="peter_001" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="63" _title="Slalom Skiing" _xpath="enigma_ii/martin93_1" author="Martin Hawlisch" ctrl="force" easy="true" id="martin93" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="64" _title="Chess Stones" _xpath="./a_tut07" author="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" ctrl="force" easy="false" id="c_tut01" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="65" _title="Bye!" _xpath="./a_tut06" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut06" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="64" _title="Chess Stones" _xpath="./a_tut07_1" author="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" ctrl="force" easy="false" id="c_tut01" rel="1" rev="5" score="1" target="time" unit="duration"/>
+    <level _seq="65" _title="Bye!" _xpath="./a_tut06_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut06" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="4" score="1" target="time" unit="duration"/>
   </levels>
 

Added: trunk/data/levels/enigma_tutorial/m_tut01_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut01_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut01_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Oxyd Stones 1" el:subtitle="" el:id="m_tutor/m_tut1"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+if not wo["IsDifficult"] then
+    ti["Q"] = ti["1"]
+else
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, "1", {
+   "####################",
+   "#                  #",
+   "#       2111111114 #",
+   "#       1011111101 #",
+   "# 214   1111111111 #",
+   "# 1d17 91111111111 #", 
+   "# 1o11111111QQ1111 #",
+   "# 1d16 81111111111 #",
+   "# 315   1111111111 #",
+   "#       1011111101 #",
+   "#       3111111115 #",
+   "#                  #",
+   "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">The blue stones are Oxyd stones. Open them by touching them with your black marble.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut01_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut02_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut02_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut02_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,63 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Oxyd Stones 2" el:subtitle="" el:id="m_tutor/m_tut2"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["3"] = {"fl_lawn_c1"}
+ti["4"] = {"fl_lawn_c2"}
+ti["5"] = {"fl_lawn_c3"}
+ti["6"] = {"fl_lawn_c4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+if not wo["IsDifficult"] then
+    ti["Q"] = ti["#"]
+else
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, " ", {
+   "##Q####0####0####Q##",
+   "#3546 3546 3546 354#",
+   "046 3546 3546d3546 0",
+   "# 3546 3546 3546 35#",
+   "#546 3546 3546 3546#",
+   "#6 3546d3546 3546 3#", 
+   "#3546 3546o3546 354#",
+   "#46 3546 3546 3546 #",
+   "# 3546 3546 3546d35#",
+   "#546 3546 3546 3546#",
+   "06 3546 3546 3546 30",
+   "#3546 3546 3546 354#",
+   "##Q####0####0####Q##"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Remember the colors.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut02_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut03_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut03_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut03_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,63 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Oxyd Stones 3" el:subtitle="" el:id="m_tutor/m_tut3"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+     </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn"}
+ti["3"] = {"fl_lawn_d1"}
+ti["4"] = {"fl_lawn_d2"}
+ti["5"] = {"fl_lawn_d3"}
+ti["6"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "a"}
+
+if not wo["IsDifficult"] then
+    ti["Q"] = ti["#"]
+else
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, " ", {
+   "###0########0#######",
+   "#3546 3546 3546 354#",
+   "#46 3546 3546 3546 #",
+   "0 3546 3546 3546 35#",
+   "#546 3546 3546 3546Q",
+   "#6 3546d3546 3546 3#", 
+   "#3546 3546o3546 354#",
+   "#46 3546 3546 3546 #",
+   "# 3546 3546 3546 35#",
+   "Q546 3546 3546 3546#",
+   "#6 3546 3546 3546 3#",
+   "#3546 3546 3546 3540",
+   "##Q####0####Q##0####"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Some stones look exactly like the Oxyd stones!</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut03_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut04_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut04_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut04_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Movement 1" el:subtitle="" el:id="m_tutor/m_tut4"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+if not wo["IsDifficult"] then
+    ti["Q"] = ti["1"]
+else
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, "1", {
+   "####################",
+   "#21114#            #",
+   "#11011# 211111114  #",
+   "#11Q11# 11Q16  81  #",
+   "#31d15# 1111 #  1  #",
+   "# 816 # 1111 #  1  #",
+   "#  1  # 1o11 #  1  #",
+   "#  1  # 1111 # 917 #",
+   "#  1  # 1111 #21d14#",
+   "#  17  91Q11 #11Q11#",
+   "#  311111115 #11011#",
+   "#            #31115#",
+   "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Learn to move your black ball properly.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut04_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut05_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut05_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut05_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Movement 2" el:subtitle="" el:id="m_tutor/m_tut5"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+if not wo["IsDifficult"] then
+    ti["Q"] = ti["#"]
+else
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, "1", {
+   "####################",
+   "#     #            #",
+   "01114 # 211111111110",
+   "#d111 # 16    81111#",
+   "Q1111 # 1 #### 1111Q",
+   "#1111 # 17   # 1111#",
+   "01o11 # 3114 # 11110",
+   "#1111 #   81 # 1111#",
+   "Q1111 #### 1 # 1111Q",
+   "#1d117    91 # 1111#",
+   "011111111115 # 31110",
+   "#            #     #",
+   "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Prepare for even more mouse gymnastics in the next levels.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut05_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut06_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut06_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut06_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,66 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Movement 3" el:subtitle="" el:id="m_tutor/m_tut6"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["3"] = {"fl_lawn_e1"}
+ti["4"] = {"fl_lawn_e4"}
+ti["5"] = {"fl_lawn_e1"}
+ti["6"] = {"fl_lawn_e3"}
+ti["#"] = {"st_fake_oxyda"}
+ti["x"] = {"st_redfiber"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+if not wo["IsDifficult"] then 
+    ti["X"] = ti[" "]
+    ti["Q"] = ti["#"]
+else
+    ti["X"] = ti["x"]
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, " ", {
+   "##Q####0####0####Q##",
+   "#3546X3546x3546X354#",
+   "046x3546X3546x3546 0",
+   "#x3546X3546x3546x35#",
+   "#546X3546X3546X3546#",
+   "#6x3546x3546d3546X3#", 
+   "#3546X3546o3546x354#",
+   "#46X3546d3546d3546x#",
+   "#x3546X3546X3546x35#",
+   "#546X3546X3546X3546#",
+   "06x3546x3546x3546X30",
+   "#3546x3546X3546X354#",
+   "##Q####0####0####Q##"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Take your time ...</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut06_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut07_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut07_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut07_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,65 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Movement 4" el:subtitle="" el:id="m_tutor/m_tut7"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+     </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["3"] = {"fl_lawn_d4"}
+ti["4"] = {"fl_lawn_d3"}
+ti["5"] = {"fl_lawn_d2"}
+ti["6"] = {"fl_lawn_d1"}
+ti["#"] = {"st_death"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "b"}
+
+if not wo["IsDifficult"] then 
+    ti["x"] = {"st_actorimpulse"}
+    ti["Q"] = ti["#"]
+else
+    ti["x"] = ti["#"]
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, " ", {
+   "##0##Q##0##0##Q##0##",
+   "#  x  35  x     x  #",
+   "#     46      35   #",
+   "# 35         x46   #",
+   "0 46  x   35       0",
+   "#      d  46     d #", 
+   "# x       o        #",
+   "#   35        x    #",
+   "0   46   x         0",
+   "#              35  #",
+   "#  x   d35     46  #",
+   "#       46  x      #",
+   "##0##Q##0##0##Q##0##"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Don't touch everything!</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut07_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut08_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut08_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut08_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Movement 5" el:subtitle="" el:id="m_tutor/m_tut8"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+if not wo["IsDifficult"] then 
+    ti["Q"] = ti["#"]
+else
+    ti["Q"] = ti["0"]
+end
+
+wo(ti, "1", {
+   "##########################################################",
+   "#       #                                        #       #",
+   "0111114 # 21111111111111111111111111111111111114 # 2111110",
+   "#11d111 # 16                                  81 # 111111#",
+   "Q111111 # 1 ################################## 1 # 111111Q",
+   "#111111 # 17                 #                91 # 111111#",
+   "0111o11 # 311111111111111114 # 21111111111111115 # 1111110",
+   "#111111 #                 81 # 16                # 111111#",
+   "Q111111 ################## 1 # 1 ################# 111111Q",
+   "#111d117                  91 # 17                 9111111#",
+   "0111111111111111111111111115 # 311111111111111111111111110",
+   "#                            #                           #",
+   "##########################################################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Levels can be larger than one screen.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut08_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Copied: trunk/data/levels/enigma_tutorial/m_tut09_2.xml (from rev 1529, trunk/data/levels/enigma_tutorial/m_tut9.xml)
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut9.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut09_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,83 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Floors 1" el:subtitle="" el:id="m_tutor/m_tut9"/>
+      <el:version el:score="2" el:release="3" el:revision="5" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments><el:code>New API converted by R. Bourquin</el:code></el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["M"] = {"fl_metal"}
+ti["I"] = {"fl_ice"}
+ti["R"] = {"fl_rough", friction=7.0, adhesion=0.5}
+ti["D"] = {"fl_dunes"}
+ti["S"] = {"fl_space"}
+ti["C"] = {"fl_sand"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = ti["1"] .. {"it_document", text="text1"}
+ti["@"] = ti["C"] .. {"#ac_marble_black"}
+ti["O"] = {"st_oxyd", flavor="d"}
+
+if wo["IsDifficult"] then
+    ti["Q"] = ti["O"]
+else
+    ti["Q"] = {"st_fake_oxydd"}
+end
+
+wo(ti, " ", {
+    "##########################################################",
+    "#                  #                  #                  #",
+    "# 2111111111111114 # 2111111111111114 # 2111111111111114 #",
+    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
+    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
+    "# 1IIOIIIIIIIIIII1   1RRORRRRRRRRRRR1   1DDODDDDDDDDDDD1 #",
+    "# 1IIIIIIIIIIIIII11111RRRRRRRRRRRRRR11111DDDDDDDDDDDDDD1 #",
+    "# 1IIIIIIIIIIIQII1   1RRRRRRRRRRRQRR1   1DDDDDDDDDDDQDD1 #",
+    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
+    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
+    "# 3111111111111115 # 3111111111111115 # 3111111111111115 #",
+    "#        1         #         1        #         1        #",
+    "######## 1 ################# 1 ################ 1 ########",
+    "#        1         #         1        #         1        #",
+    "# 2111111111111114 # 21111111d1111114 # 2111111111111114 #",
+    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
+    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
+    "# 1MMOMMMMMMMMMMM1   1CCOCCCCCCCCCCC1   1SSOSSSSSSSSSSS1 #",
+    "# 1MMMMMMMMMMMMMM1111dCCCCCCC at CCCCCCd1111SSSSSSSSSSSSSS1 #",
+    "# 1MMMMMMMMMMMQMM1   1CCCCCCCCCCCQCC1   1SSSSSSSSSSSQSS1 #",
+    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
+    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
+    "# 3111111111111115 # 3111111111111115 # 3111111111111115 #",
+    "#                  #                  #                  #",
+    "##########################################################"})
+
+wo:shuffleOxyd()
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Friction and acceleration depend on the floor type.</el:english>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut09_2.xml
___________________________________________________________________
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/m_tut1.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut1.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut1.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,74 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Oxyd Stones 1" el:subtitle="" el:id="m_tutor/m_tut1"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "d"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["1"]=cell{floor="fl-leaves"}
-cells["2"]=cell{floor="fl-leavesc1"}
-cells["3"]=cell{floor="fl-leavesc2"}
-cells["4"]=cell{floor="fl-leavesc3"}
-cells["5"]=cell{floor="fl-leavesc4"}
-cells["6"]=cell{floor="fl-leavesd1"}
-cells["7"]=cell{floor="fl-leavesd2"}
-cells["8"]=cell{floor="fl-leavesd3"}
-cells["9"]=cell{floor="fl-leavesd4"}
-cells["#"]=cell{stone="st-likeoxyda"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-cells["0"]=cell{{{oxyd}}}
-
-if (not difficult) then
-    cells["Q"]=cell{parent=cells["1"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "####################",
-   "#                  #",
-   "#       2111111114 #",
-   "#       1011111101 #",
-   "# 214   1111111111 #",
-   "# 1d17 91111111111 #", 
-   "# 1o11111111QQ1111 #",
-   "# 1d16 81111111111 #",
-   "# 315   1111111111 #",
-   "#       1011111101 #",
-   "#       3111111115 #",
-   "#                  #",
-   "####################"
-}
-
-set_default_parent(cells["1"])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">The blue stones are Oxyd stones. Open them by touching them with your black marble.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Added: trunk/data/levels/enigma_tutorial/m_tut10_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut10_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut10_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,54 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Floors 2" el:subtitle="" el:id="m_tutor/m_tut10"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_swamp"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+wo(ti, " ", {
+   "####################",
+   "#     11111111     #",
+   "# d   111111111  d #",
+   "0   o 1111111111   0",
+   "#     11111111111  #",
+   "#    1111111111111 #", 
+   "#111111111111111111#",
+   "#    11111111111111#",
+   "#     1111111111111#",
+   "0     11111111111110",
+   "# d   1111111111111#",
+   "#     1111111111111#",
+   "####################"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Don't drown in the swamp.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut10_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut11_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut11_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut11_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,54 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Floors 3" el:subtitle="" el:id="m_tutor/m_tut11"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn"}
+ti["1"] = {"fl_water"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_marble"}
+ti["0"] = {"st_oxyd", flavor = "d"}
+
+wo(ti, " ", {
+   "####################",
+   "#o     d  11111    #",
+   "#   d  11 11111    #",
+   "#11111 11 11111  1 #",
+   "#1111  11 11111  1 #",
+   "#111  111 11111  1 #", 
+   "#11  1111 1111  11 #",
+   "#1  11         11  #",
+   "#  11       1111   #",
+   "0 11   d   1111    #",
+   "#11       11    d  0",
+   "#1       11        #",
+   "##0########0########"})
+
+wo:shuffleOxyd()
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Careful - you can not swim in the water.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut11_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut12_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut12_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut12_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Meditation 1" el:subtitle="" el:id="m_tutor/m_med1"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["d"] = {"it_document", text = "text1"}
+ti["o"] = {"#ac_pearl"}
+ti["+"] = {"it_meditation"}
+
+if not wo["IsDifficult"] then 
+    ti["q"] = ti["1"]
+    ti["*"] = ti["1"]
+else
+    ti["q"] = ti["o"]
+    ti["*"] = ti["+"]
+end
+
+wo(ti, "1", {
+   "####################",
+   "#                  #",
+   "#      2o11o4      #",
+   "#      111111      #",
+   "#     91q11q17     #",
+   "#    211d11d114    #", 
+   "#   911111111117   #",
+   "#  211+111111+114  #",
+   "#  1*1111111111*1  #",
+   "#  31111111111115  #",
+   "#                  #",
+   "#                  #",
+   "####################"})
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Move all small marbles into the holes. Only one marble per hole is allowed.</el:english>
+      </el:string> 
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut12_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_tutorial/m_tut13_2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut13_2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut13_2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -0,0 +1,64 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Meditation 2" el:subtitle="" el:id="m_tutor/m_med2"/>
+      <el:version el:score="2" el:release="3" el:revision="2" el:status="released"/>
+      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
+      <el:license el:type="GPL version 2" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>API 2 version by Andreas, February 2009. Thanks to Martin for the clean code!</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_lawn_b"}
+ti["1"] = {"fl_lawn"}
+ti["2"] = {"fl_lawn_c1"}
+ti["3"] = {"fl_lawn_c2"}
+ti["4"] = {"fl_lawn_c3"}
+ti["5"] = {"fl_lawn_c4"}
+ti["6"] = {"fl_lawn_d1"}
+ti["7"] = {"fl_lawn_d2"}
+ti["8"] = {"fl_lawn_d3"}
+ti["9"] = {"fl_lawn_d4"}
+ti["#"] = {"st_fake_oxyda"}
+ti["o"] = {"#ac_pearl"}
+ti["+"] = {"it_meditation"}
+
+if not wo["IsDifficult"] then 
+    ti["q"] = ti["1"]
+    ti["*"] = ti["1"]
+else
+    ti["q"] = ti["o"]
+    ti["*"] = ti["+"]
+end
+
+wo(ti, "1", {
+   "####################",
+   "#                  #",
+   "# 2111111111111114 #",
+   "# 1*16  8116  81*1 #",
+   "# 311  # 11 #  115 #",
+   "#  81  # 11 #  16  #", 
+   "### 1 ## 11 ## 1 ###",
+   "#  91 #  11  # 17  #",
+   "# 211 # 2qq4 # 114 #",
+   "# 1+1 # 1oo1 # 1+1 #",
+   "# 315 # 3115 # 315 #",
+   "#     #      #     #",
+   "####################"})
+
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_tutorial/m_tut13_2.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_tutorial/m_tut2.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut2.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut2.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,68 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Oxyd Stones 2" el:subtitle="" el:id="m_tutor/m_tut2"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "d"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["3"]=cell{floor="fl-leavesc1"}
-cells["4"]=cell{floor="fl-leavesc2"}
-cells["5"]=cell{floor="fl-leavesc3"}
-cells["6"]=cell{floor="fl-leavesc4"}
-cells["#"]=cell{stone="st-likeoxyda"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then
-    cells["Q"]=cell{parent=cells["#"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "##Q####0####0####Q##",
-   "#3546 3546 3546 354#",
-   "046 3546 3546d3546 0",
-   "# 3546 3546 3546 35#",
-   "#546 3546 3546 3546#",
-   "#6 3546d3546 3546 3#", 
-   "#3546 3546o3546 354#",
-   "#46 3546 3546 3546 #",
-   "# 3546 3546 3546d35#",
-   "#546 3546 3546 3546#",
-   "06 3546 3546 3546 30",
-   "#3546 3546 3546 354#",
-   "##Q####0####0####Q##"
-}
-
-set_default_parent(cells[" "])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Remember the colors.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut3.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut3.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut3.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,68 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Oxyd Stones 3" el:subtitle="" el:id="m_tutor/m_tut3"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "a"
-
-cells={}
-cells[" "]=cell{floor="fl-leaves"}
-cells["3"]=cell{floor="fl-leavesd1"}
-cells["4"]=cell{floor="fl-leavesd2"}
-cells["5"]=cell{floor="fl-leavesd3"}
-cells["6"]=cell{floor="fl-leavesd4"}
-cells["#"]=cell{stone="st-likeoxyda"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then
-    cells["Q"]=cell{parent=cells["#"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "###0########0#######",
-   "#3546 3546 3546 354#",
-   "#46 3546 3546 3546 #",
-   "0 3546 3546 3546 35#",
-   "#546 3546 3546 3546Q",
-   "#6 3546d3546 3546 3#", 
-   "#3546 3546o3546 354#",
-   "#46 3546 3546 3546 #",
-   "# 3546 3546 3546 35#",
-   "Q546 3546 3546 3546#",
-   "#6 3546 3546 3546 3#",
-   "#3546 3546 3546 3540",
-   "##Q####0####Q##0####"
-}
-
-set_default_parent(cells[" "])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Some stones look exactly like the Oxyd stones!</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut4.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut4.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut4.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,71 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Movement 1" el:subtitle="" el:id="m_tutor/m_tut4"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "d"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["1"]=cell{floor="fl-leaves"}
-cells["2"]=cell{floor="fl-leavesc1"}
-cells["3"]=cell{floor="fl-leavesc2"}
-cells["4"]=cell{floor="fl-leavesc3"}
-cells["5"]=cell{floor="fl-leavesc4"}
-cells["6"]=cell{floor="fl-leavesd1"}
-cells["7"]=cell{floor="fl-leavesd2"}
-cells["8"]=cell{floor="fl-leavesd3"}
-cells["9"]=cell{floor="fl-leavesd4"}
-cells["#"]=cell{stone="st-likeoxyda"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then
-    cells["Q"]=cell{parent=cells["1"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-level = {
-   "####################",
-   "#21114#            #",
-   "#11011# 211111114  #",
-   "#11Q11# 11Q16  81  #",
-   "#31d15# 1111 #  1  #",
-   "# 816 # 1111 #  1  #",
-   "#  1  # 1o11 #  1  #",
-   "#  1  # 1111 # 917 #",
-   "#  1  # 1111 #21d14#",
-   "#  17  91Q11 #11Q11#",
-   "#  311111115 #11011#",
-   "#            #31115#",
-   "####################"
-}
-set_default_parent(cells["1"])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Learn to move your black ball properly.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut5.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut5.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut5.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,73 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Movement 2" el:subtitle="" el:id="m_tutor/m_tut5"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "d"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["1"]=cell{floor="fl-leaves"}
-cells["2"]=cell{floor="fl-leavesc1"}
-cells["3"]=cell{floor="fl-leavesc2"}
-cells["4"]=cell{floor="fl-leavesc3"}
-cells["5"]=cell{floor="fl-leavesc4"}
-cells["6"]=cell{floor="fl-leavesd1"}
-cells["7"]=cell{floor="fl-leavesd2"}
-cells["8"]=cell{floor="fl-leavesd3"}
-cells["9"]=cell{floor="fl-leavesd4"}
-cells["#"]=cell{stone="st-likeoxyda"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then
-    cells["Q"]=cell{parent=cells["#"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "####################",
-   "#     #            #",
-   "01114 # 211111111110",
-   "#d111 # 16    81111#",
-   "Q1111 # 1 #### 1111Q",
-   "#1111 # 17   # 1111#",
-   "01o11 # 3114 # 11110",
-   "#1111 #   81 # 1111#",
-   "Q1111 #### 1 # 1111Q",
-   "#1d117    91 # 1111#",
-   "011111111115 # 31110",
-   "#            #     #",
-   "####################"
-}
-
-set_default_parent(cells["1"])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Prepare for even more mouse gymnastics in the next levels.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut6.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut6.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut6.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,76 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Movement 3" el:subtitle="" el:id="m_tutor/m_tut6"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "d"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["3"]=cell{floor="fl-leavese1"}
-cells["4"]=cell{floor="fl-leavese4"}
-cells["5"]=cell{floor="fl-leavese1"}
-cells["6"]=cell{floor="fl-leavese3"}
-cells["#"]=cell{stone="st-likeoxyda"}
-
-if (not difficult) then 
-    cells["X"]=cell{parent=cells[" "]}
-else
-    cells["X"]=cell{stone="st-glass3"}
-end
-
-cells["x"]=cell{stone="st-glass3"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then
-    cells["Q"]=cell{parent=cells["#"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "##Q####0####0####Q##",
-   "#3546X3546x3546X354#",
-   "046x3546X3546x3546 0",
-   "#x3546X3546x3546x35#",
-   "#546X3546X3546X3546#",
-   "#6x3546x3546d3546X3#", 
-   "#3546X3546o3546x354#",
-   "#46X3546d3546d3546x#",
-   "#x3546X3546X3546x35#",
-   "#546X3546X3546X3546#",
-   "06x3546x3546x3546X30",
-   "#3546x3546X3546X354#",
-   "##Q####0####0####Q##"
-}
-
-set_default_parent(cells[" "])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Take your time ...</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut7.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut7.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut7.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,75 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Movement 4" el:subtitle="" el:id="m_tutor/m_tut7"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "b"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["3"]=cell{floor="fl-leavesd4"}
-cells["4"]=cell{floor="fl-leavesd3"}
-cells["5"]=cell{floor="fl-leavesd2"}
-cells["6"]=cell{floor="fl-leavesd1"}
-cells["#"]=cell{stone="st-death"}
-
-if (not difficult) then 
-    cells["x"]=cell{stone="st-actorimpulse"}
-else
-    cells["x"]=cell{stone="st-death"}
-end
-
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then 
-    cells["Q"]=cell{parent=cells["#"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "##0##Q##0##0##Q##0##",
-   "#  x  35  x     x  #",
-   "#     46      35   #",
-   "# 35         x46   #",
-   "0 46  x   35       0",
-   "#      d  46     d #", 
-   "# x       o        #",
-   "#   35        x    #",
-   "0   46   x         0",
-   "#              35  #",
-   "#  x   d35     46  #",
-   "#       46  x      #",
-   "##0##Q##0##0##Q##0##"
-}
-
-set_default_parent(cells[" "])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Don't touch everything!</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut8.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut8.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut8.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,73 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Movement 5" el:subtitle="" el:id="m_tutor/m_tut8"/>
-      <el:version el:score="2" el:release="2" el:revision="0" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-oxyd_default_flavor = "d"
-
-cells={}
-cells[" "]=cell{floor="fl-leavesb"}
-cells["1"]=cell{floor="fl-leaves"}
-cells["2"]=cell{floor="fl-leavesc1"}
-cells["3"]=cell{floor="fl-leavesc2"}
-cells["4"]=cell{floor="fl-leavesc3"}
-cells["5"]=cell{floor="fl-leavesc4"}
-cells["6"]=cell{floor="fl-leavesd1"}
-cells["7"]=cell{floor="fl-leavesd2"}
-cells["8"]=cell{floor="fl-leavesd3"}
-cells["9"]=cell{floor="fl-leavesd4"}
-cells["#"]=cell{stone="st-likeoxyda"}
-cells["d"]=cell{{{document, "text1"}}}
-cells["o"]=cell{actor={"ac-blackball", {player=0}}}
-
-if (not difficult) then 
-    cells["Q"]=cell{parent=cells["#"]}
-else
-    cells["Q"]=cell{{{oxyd}}}
-end
-
-level = {
-   "##########################################################",
-   "#       #                                        #       #",
-   "0111114 # 21111111111111111111111111111111111114 # 2111110",
-   "#11d111 # 16                                  81 # 111111#",
-   "Q111111 # 1 ################################## 1 # 111111Q",
-   "#111111 # 17                 #                91 # 111111#",
-   "0111o11 # 311111111111111114 # 21111111111111115 # 1111110",
-   "#111111 #                 81 # 16                # 111111#",
-   "Q111111 ################## 1 # 1 ################# 111111Q",
-   "#111d117                  91 # 17                 9111111#",
-   "0111111111111111111111111115 # 311111111111111111111111110",
-   "#                            #                           #",
-   "##########################################################"
-}
-
-set_default_parent(cells["1"])
-create_world_by_map(level,cells)
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Levels can be larger than one screen.</el:english>
-      </el:string> 
-    </el:i18n>
-  </el:protected>
-</el:level>

Deleted: trunk/data/levels/enigma_tutorial/m_tut9.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/m_tut9.xml	2009-02-09 19:50:52 UTC (rev 1529)
+++ trunk/data/levels/enigma_tutorial/m_tut9.xml	2009-02-10 22:25:32 UTC (rev 1530)
@@ -1,80 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Floors 1" el:subtitle="" el:id="m_tutor/m_tut9"/>
-      <el:version el:score="2" el:release="3" el:revision="5" el:status="released"/>
-      <el:author  el:name="Martin Hawlisch" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2003 Martin Hawlisch</el:copyright>
-      <el:license el:type="GPL version 2" el:open="true"/>
-      <el:compatibility el:enigma="1.10"/>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments><el:code>New API converted by R. Bourquin</el:code></el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-ti[" "] = {"fl_lawn_b"}
-ti["1"] = {"fl_lawn"}
-ti["2"] = {"fl_lawn_c1"}
-ti["3"] = {"fl_lawn_c2"}
-ti["4"] = {"fl_lawn_c3"}
-ti["5"] = {"fl_lawn_c4"}
-ti["6"] = {"fl_lawn_d1"}
-ti["7"] = {"fl_lawn_d2"}
-ti["8"] = {"fl_lawn_d3"}
-ti["9"] = {"fl_lawn_d4"}
-ti["M"] = {"fl_metal"}
-ti["I"] = {"fl_ice"}
-ti["R"] = {"fl_rough", friction=7.0, adhesion=0.5}
-ti["D"] = {"fl_dunes"}
-ti["S"] = {"fl_space"}
-ti["C"] = {"fl_sand"}
-ti["#"] = {"st_fake_oxyda"}
-ti["d"] = ti["1"] .. {"it_document", text="text1"}
-ti["o"] = ti["C"] .. {"#ac_marble_black"}
-ti["0"] = {"st_oxyd", flavor="d"}
-if wo["IsDifficult"] then
-    ti["Q"] = {"st_oxyd", flavor="d"}
-else
-    ti["Q"] = {"st_fake_oxydd"}
-end
-
-wo(ti, " ", {
-    "##########################################################",
-    "#                  #                  #                  #",
-    "# 2111111111111114 # 2111111111111114 # 2111111111111114 #",
-    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
-    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
-    "# 1II0IIIIIIIIIII1   1RR0RRRRRRRRRRR1   1DD0DDDDDDDDDDD1 #",
-    "# 1IIIIIIIIIIIIII11111RRRRRRRRRRRRRR11111DDDDDDDDDDDDDD1 #",
-    "# 1IIIIIIIIIIIQII1   1RRRRRRRRRRRQRR1   1DDDDDDDDDDDQDD1 #",
-    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
-    "# 1IIIIIIIIIIIIII1 # 1RRRRRRRRRRRRRR1 # 1DDDDDDDDDDDDDD1 #",
-    "# 3111111111111115 # 3111111111111115 # 3111111111111115 #",
-    "#        1         #         1        #         1        #",
-    "######## 1 ################# 1 ################ 1 ########",
-    "#        1         #         1        #         1        #",
-    "# 2111111111111114 # 21111111d1111114 # 2111111111111114 #",
-    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
-    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
-    "# 1MM0MMMMMMMMMMM1   1CC0CCCCCCCCCCC1   1SS0SSSSSSSSSSS1 #",
-    "# 1MMMMMMMMMMMMMM1111dCCCCCCCoCCCCCCd1111SSSSSSSSSSSSSS1 #",
-    "# 1MMMMMMMMMMMQMM1   1CCCCCCCCCCCQCC1   1SSSSSSSSSSSQSS1 #",
-    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
-    "# 1MMMMMMMMMMMMMM1 # 1CCCCCCCCCCCCCC1 # 1SSSSSSSSSSSSSS1 #",
-    "# 3111111111111115 # 3111111111111115 # 3111111111111115 #",
-    "#                  #                  #                  #",
-    "##########################################################"})
-
-wo:shuffleOxyd()
- ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Friction and acceleration depend on the floor type.</el:english>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>



From ral at mail.berlios.de  Wed Feb 11 00:39:10 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Wed, 11 Feb 2009 00:39:10 +0100
Subject: [Enigma-game-svn] r1531 - trunk/doc/reference
Message-ID: <200902102339.n1ANdAe3002135@sheep.berlios.de>

Author: ral
Date: 2009-02-11 00:38:53 +0100 (Wed, 11 Feb 2009)
New Revision: 1531

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1: new API reengineering
- refman add renaming index old object names to new ones


Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-10 22:25:32 UTC (rev 1530)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-10 23:38:53 UTC (rev 1531)
@@ -49,6 +49,7 @@
 * Message Index::
 * Function Index::
 * Concept Index::
+* Renaming Index::
 @end menu
 
 @node  Running Enigma
@@ -18356,5 +18357,527 @@
 
 @printindex cp
 
+ at node Renaming Index
+ at unnumbered Renaming Index
+ at table @asis 
+ at item @b{ac-blackball} @expansion{} @code{ac_marble_black}, @pxref{ac_marble}
+ at item @b{ac-bug} @expansion{} @ref{ac_bug}
+ at item @b{ac-horse} @expansion{} @ref{ac_horse}
+ at item @b{ac-killerball} @expansion{} @ref{ac_killer}
+ at item @b{ac-rotor} @expansion{} @ref{ac_rotor}
+ at item @b{ac-top} @expansion{} @ref{ac_top}
+ at item @b{ac-whiteball} @expansion{} @code{ac_marble_white}, @pxref{ac_marble}
+ at item @b{ac-whiteball-small} @expansion{} @code{ac_pearl_white, owner=DEFAULT}, @pxref{ac_pearl}
+ at item @b{fl-abyss} @expansion{} @ref{fl_abyss}
+ at item @b{fl-abyss_fake} @expansion{} @code{fl_fake_abyss}, @pxref{fl_fake}
+ at item @b{fl-acblack} @expansion{} @code{fl_yinyang_yin}, @pxref{fl_yinyang}
+ at item @b{fl-acwhite} @expansion{} @code{fl_yinyang_yang}, @pxref{fl_yinyang}
+ at item @b{fl-black} @expansion{} @ref{fl_dark}
+ at item @b{fl-bluegray} @expansion{} @ref{fl_bluegray}
+ at item @b{fl-bluegreen} @expansion{} @ref{}
+ at item @b{fl-bluegreenx} @expansion{} @ref{fl_aquamarine}
+ at item @b{fl-brick} @expansion{} @ref{fl_brick}
+ at item @b{fl-bridge} @expansion{} @ref{fl_bridge}
+ at item @b{fl-bridge-closed} @expansion{} @code{fl_bridge, state=CLOSED}, @pxref{fl_bridge}
+ at item @b{fl-bridge-open} @expansion{} @ref{fl_bridge}
+ at item @b{fl-bumps} @expansion{} @ref{fl_pinkbumps}
+ at item @b{fl-concrete} @expansion{} @ref{fl_concrete}
+ at item @b{fl-darkgray} @expansion{} @ref{fl_darkgray}
+ at item @b{fl-dunes} @expansion{} @ref{fl_dunes}
+ at item @b{fl-floor_001} @expansion{} @ref{fl_bast}
+ at item @b{fl-gradient} @expansion{} @code{fl_slope_ps}, @pxref{fl_slope}
+ at item @b{fl-gradient1} @expansion{} @code{fl_slope_ps}, @pxref{fl_slope}
+ at item @b{fl-gradient2} @expansion{} @code{fl_slope_pn}, @pxref{fl_slope}
+ at item @b{fl-gradient3} @expansion{} @code{fl_slope_pe}, @pxref{fl_slope}
+ at item @b{fl-gradient4} @expansion{} @code{fl_slope_pw}, @pxref{fl_slope}
+ at item @b{fl-gradient5} @expansion{} @code{fl_slope_ose}, @pxref{fl_slope}
+ at item @b{fl-gradient6} @expansion{} @code{fl_slope_osw}, @pxref{fl_slope}
+ at item @b{fl-gradient7} @expansion{} @code{fl_slope_one}, @pxref{fl_slope}
+ at item @b{fl-gradient8} @expansion{} @code{fl_slope_onw}, @pxref{fl_slope}
+ at item @b{fl-gradient9} @expansion{} @code{fl_slope_ise}, @pxref{fl_slope}
+ at item @b{fl-gradient10} @expansion{} @code{fl_slope_ine}, @pxref{fl_slope}
+ at item @b{fl-gradient11} @expansion{} @code{fl_slope_isw}, @pxref{fl_slope}
+ at item @b{fl-gradient12} @expansion{} @code{fl_slope_inw}, @pxref{fl_slope}
+ at item @b{fl-gradient13} @expansion{} @code{fl_slope_tn}, @pxref{fl_slope}
+ at item @b{fl-gradient14} @expansion{} @code{fl_slope_ts}, @pxref{fl_slope}
+ at item @b{fl-gradient15} @expansion{} @code{fl_slope_tw}, @pxref{fl_slope}
+ at item @b{fl-gradient16} @expansion{} @code{fl_slope_te}, @pxref{fl_slope}
+ at item @b{fl-gravel} @expansion{} @ref{fl_gravel}
+ at item @b{fl-gray} @expansion{} @ref{fl_gray}
+ at item @b{fl-hay} @expansion{} @ref{fl_hay}
+ at item @b{fl-himalaya} @expansion{} @ref{fl_himalaya}
+ at item @b{fl-ice} @expansion{} @ref{fl_ice}
+ at item @b{fl-inverse} @expansion{} @code{fl_inverse_white}, @pxref{fl_inverse}
+ at item @b{fl-inverse2} @expansion{} @code{fl_inverse_gray}, @pxref{fl_inverse}
+ at item @b{fl-light} @expansion{} @ref{fl_ivory}
+ at item @b{fl-leaves} @expansion{} @code{fl_lawn_a}, @pxref{fl_lawn}
+ at item @b{fl-leavesb} @expansion{} @code{fl_lawn_b}, @pxref{fl_lawn}
+ at item @b{fl-leavesc1} @expansion{} @code{fl_lawn_c1}, @pxref{fl_lawn}
+ at item @b{fl-leavesc2} @expansion{} @code{fl_lawn_c2}, @pxref{fl_lawn}
+ at item @b{fl-leavesc3} @expansion{} @code{fl_lawn_c3}, @pxref{fl_lawn}
+ at item @b{fl-leavesc4} @expansion{} @code{fl_lawn_c4}, @pxref{fl_lawn}
+ at item @b{fl-leavesd1} @expansion{} @code{fl_lawn_d1}, @pxref{fl_lawn}
+ at item @b{fl-leavesd2} @expansion{} @code{fl_lawn_d2}, @pxref{fl_lawn}
+ at item @b{fl-leavesd3} @expansion{} @code{fl_lawn_d3}, @pxref{fl_lawn}
+ at item @b{fl-leavesd4} @expansion{} @code{fl_lawn_d4}, @pxref{fl_lawn}
+ at item @b{fl-leavese1} @expansion{} @code{fl_lawn_e1}, @pxref{fl_lawn}
+ at item @b{fl-leavese2} @expansion{} @code{fl_lawn_e2}, @pxref{fl_lawn}
+ at item @b{fl-leavese3} @expansion{} @code{fl_lawn_e3}, @pxref{fl_lawn}
+ at item @b{fl-leavese4} @expansion{} @code{fl_lawn_e4}, @pxref{fl_lawn}
+ at item @b{fl-lightgray} @expansion{} @ref{fl_platinum}
+ at item @b{fl-marble} @expansion{} @ref{fl_marble}
+ at item @b{fl-metal} @expansion{} @ref{fl_metal}
+ at item @b{fl-metal1} @expansion{} @code{fl_metal_1}, @pxref{fl_metal}
+ at item @b{fl-metal2} @expansion{} @code{fl_metal_2}, @pxref{fl_metal}
+ at item @b{fl-metal3} @expansion{} @code{fl_metal_3}, @pxref{fl_metal}
+ at item @b{fl-metal4} @expansion{} @code{fl_metal_4}, @pxref{fl_metal}
+ at item @b{fl-metal5} @expansion{} @code{fl_metal_5}, @pxref{fl_metal}
+ at item @b{fl-metal6} @expansion{} @code{fl_metal_6}, @pxref{fl_metal}
+ at item @b{fl-mortar} @expansion{} @ref{fl_mortar}
+ at item @b{fl-nomouse} @expansion{} @ref{fl_adhesionless}
+ at item @b{fl-normal_x} @expansion{} @code{fl_metal_7}, @pxref{fl_metal}
+ at item @b{fl-normal} @expansion{} @code{fl_metal_7n}, @pxref{fl_metal}
+ at item @b{fl-plank} @expansion{} @ref{fl_plank}
+ at item @b{fl-red} @expansion{} @ref{fl_red}
+ at item @b{fl-rock} @expansion{} @ref{fl_rock}
+ at item @b{fl-rough} @expansion{} @ref{fl_rough}
+ at item @b{fl-rough_medium} @expansion{} @code{fl_rough, friction=5.0, adhesion=1.2}, @pxref{fl_rough}
+ at item @b{fl-rough_slow} @expansion{} @code{fl_rough, friction=7.0, adhesion=0.5}, @pxref{fl_rough}
+ at item @b{fl-rough-blue} @expansion{} @ref{fl_blueslab}
+ at item @b{fl-rough-red} @expansion{} @ref{fl_redslab}
+ at item @b{fl-sahara} @expansion{} @ref{fl_sahara}
+ at item @b{fl-samba} @expansion{} @ref{fl_samba}
+ at item @b{fl-samba1} @expansion{} @code{fl_samba_h}, @pxref{fl_samba}
+ at item @b{fl-samba2} @expansion{} @code{fl_samba_v}, @pxref{fl_samba}
+ at item @b{fl-sand} @expansion{} @ref{fl_sand}
+ at item @b{fl-space} @expansion{} @ref{fl_space}
+ at item @b{fl-springboard} @expansion{} @ref{fl_white}
+ at item @b{fl-stone} @expansion{} @ref{fl_stone}
+ at item @b{fl-stwood} @expansion{} @code{fl_wood_framed}, @pxref{fl_wood}
+ at item @b{fl-stwood1} @expansion{} @code{fl_wood_framed_h}, @pxref{fl_wood}
+ at item @b{fl-stwood2} @expansion{} @code{fl_wood_framed_v}, @pxref{fl_wood}
+ at item @b{fl-swamp} @expansion{} @ref{fl_swamp}
+ at item @b{fl-thief} @expansion{} @ref{fl_thief}
+ at item @b{fl-tigris} @expansion{} @ref{fl_tigris}
+ at item @b{fl-trigger} @expansion{} @code{fl_fake_trigger}, @pxref{fl_fake}
+ at item @b{fl-water} @expansion{} @ref{fl_water}
+ at item @b{fl-white} @expansion{} @ref{fl_bright}
+ at item @b{fl-wood} @expansion{} @ref{fl_wood}
+ at item @b{fl-wood1} @expansion{} @code{fl_wood_h}, @pxref{fl_wood}
+ at item @b{fl-wood2} @expansion{} @code{fl_wood_v}, @pxref{fl_wood}
+ at item @b{fl-woven} @expansion{} @ref{fl_woven}
+ at item @b{it-abyss} @expansion{} @ref{it_trap}
+ at item @b{it-bag} @expansion{} @ref{it_bag}
+ at item @b{it-banana} @expansion{} @ref{it_banana}
+ at item @b{it-blackbomb} @expansion{} @code{it_bomb_black}, @pxref{it_bomb}
+ at item @b{it-blocker} @expansion{} @ref{it_blocker}
+ at item @b{it-blocker-new} @expansion{} @code{it_blocker_new}, @pxref{it_blocker}
+ at item @b{it-booze} @expansion{} @ref{it_bottle}
+ at item @b{it-booze-broken} @expansion{} @code{it_bottle_broken}, @pxref{it_bottle}
+ at item @b{it-brake} @expansion{} @ref{it_brake}
+ at item @b{it-brush} @expansion{} @ref{it_brush}
+ at item @b{it-burnable} @expansion{} @ref{it_burnable}
+ at item @b{it-burnable_ash} @expansion{} @code{it_burnable_ash}, @pxref{it_burnable}
+ at item @b{it-burnable_burning} @expansion{} @code{it_burnable_burning}, @pxref{it_burnable}
+ at item @b{it-burnable_fireproof} @expansion{} @code{it_burnable_fireproof}, @pxref{it_burnable}
+ at item @b{it-burnable_ignited} @expansion{} @code{it_burnable_ignited}, @pxref{it_burnable}
+ at item @b{it-burnable_oil} @expansion{} @code{it_burnable_oil}, @pxref{it_burnable}
+ at item @b{it-cherry} @expansion{} @ref{it_cherry}
+ at item @b{it-coffee} @expansion{} @ref{it_coffee}
+ at item @b{it-coin1} @expansion{} @code{it_coin_s}, @pxref{it_coin}
+ at item @b{it-coin2} @expansion{} @code{it_coin_m}, @pxref{it_coin}
+ at item @b{it-coin4} @expansion{} @code{it_coin_l}, @pxref{it_coin}
+ at item @b{it-crack0} @expansion{} @code{it_crack_i}, @pxref{it_crack}
+ at item @b{it-crack1} @expansion{} @code{it_crack_s}, @pxref{it_crack}
+ at item @b{it-crack2} @expansion{} @code{it_crack_m}, @pxref{it_crack}
+ at item @b{it-crack3} @expansion{} @code{it_crack_l}, @pxref{it_crack}
+ at item @b{it-cross} @expansion{} @ref{it_cross}
+ at item @b{it-death} @expansion{} @ref{it_death}
+ at item @b{it-document} @expansion{} @ref{it_document}
+ at item @b{it-drop} @expansion{} @ref{it_drop}
+ at item @b{it-dynamite} @expansion{} @ref{it_dynamite}
+ at item @b{it-explosion1} @expansion{} @code{it_explosion_nil}, @pxref{it_explosion}
+ at item @b{it-explosion2} @expansion{} @code{it_explosion_hollow}, @pxref{it_explosion}
+ at item @b{it-explosion3} @expansion{} @code{it_explosion_debris}, @pxref{it_explosion}
+ at item @b{it-extinguisher} @expansion{} @ref{it_extinguisher}
+ at item @b{it-extinguisher_empty} @expansion{} @code{it_extinguisher_empty}, @pxref{it_extinguisher}
+ at item @b{it-extinguisher_medium} @expansion{} @code{it_extinguisher_medium}, @pxref{it_extinguisher}
+ at item @b{it-extralife} @expansion{} @ref{it_extralife}
+ at item @b{it-flagblack} @expansion{} @code{it_flag_black}, @pxref{it_flag}
+ at item @b{it-flagwhite} @expansion{} @code{it_flag_white}, @pxref{it_flag}
+ at item @b{it-floppy} @expansion{} @ref{it_floppy}
+ at item @b{it-glasses} @expansion{} @ref{it_glasses}
+ at item @b{it-glasses-broken} @expansion{} @code{it_glasses_broken}, @pxref{it_glasses}
+ at item @b{it-hammer} @expansion{} @ref{it_hammer}
+ at item @b{it-hollow} @expansion{} @code{it_meditation_hollow}, @pxref{it_meditation}
+ at item @b{it-hill} @expansion{} @code{it_meditation_hill}, @pxref{it_meditation}
+ at item @b{it-hstrip} @expansion{} @code{it_strip_ew}, @pxref{it_strip}
+ at item @b{it-inversesensor} @expansion{} @code{it_sensor, invisible=true, inverse=true}, @pxref{it_sensor}
+ at item @b{it-key} @expansion{} @code{it_key, code=1}, @pxref{it_key}
+ at item @b{it-key_a} @expansion{} @code{it_key, code=1}, @pxref{it_key}
+ at item @b{it-key_b} @expansion{} @code{it_key, code=2}, @pxref{it_key}
+ at item @b{it-key_c} @expansion{} @code{it_key, code=3}, @pxref{it_key}
+ at item @b{it-landmine} @expansion{} @ref{it_landmine}
+ at item @b{it-magicwand} @expansion{} @ref{it_magicwand}
+ at item @b{it-magnet} @expansion{} @ref{it_magnet}
+ at item @b{it-magnet-on} @expansion{} @code{it_magnet_on}, @pxref{it_magnet}
+ at item @b{it-magnet-off} @expansion{} @code{it_magnet_off}, @pxref{it_magnet}
+ at item @b{it-pencil} @expansion{} @ref{it_pencil}
+ at item @b{it-pin} @expansion{} @ref{it_pin}
+ at item @b{it-pipe-e} @expansion{} @code{it_pipe_e}, @pxref{it_pipe}
+ at item @b{it-pipe-es} @expansion{} @code{it_pipe_es}, @pxref{it_pipe}
+ at item @b{it-pipe-h} @expansion{} @code{it_pipe_ew}, @pxref{it_pipe}
+ at item @b{it-pipe-n} @expansion{} @code{it_pipe_n}, @pxref{it_pipe}
+ at item @b{it-pipe-ne} @expansion{} @code{it_pipe_ne}, @pxref{it_pipe}
+ at item @b{it-pipe-s} @expansion{} @code{it_pipe_s}, @pxref{it_pipe}
+ at item @b{it-pipe-sw} @expansion{} @code{it_pipe_sw}, @pxref{it_pipe}
+ at item @b{it-pipe-v} @expansion{} @code{it_pipe_ns}, @pxref{it_pipe}
+ at item @b{it-pipe-w} @expansion{} @code{it_pipe_w}, @pxref{it_pipe}
+ at item @b{it-pipe-wn} @expansion{} @code{it_pipe_nw}, @pxref{it_pipe}
+ at item @b{it-puller-e} @expansion{} @code{it_puller_e}, @pxref{it_puller}
+ at item @b{it-puller-n} @expansion{} @code{it_puller_n}, @pxref{it_puller}
+ at item @b{it-puller-s} @expansion{} @code{it_puller_s}, @pxref{it_puller}
+ at item @b{it-puller-w} @expansion{} @code{it_puller_w}, @pxref{it_puller}
+ at item @b{it-ring} @expansion{} @ref{it_ring}
+ at item @b{it-rubberband} @expansion{} @ref{it_rubberband}
+ at item @b{it-seed} @expansion{} @code{it_seed_wood}, @pxref{it_seed}
+ at item @b{it-seed_nowood} @expansion{} @code{it_seed_fake}, @pxref{it_seed}
+ at item @b{it-seed_volcano} @expansion{} @code{it_seed_volcano}, @pxref{it_seed}
+ at item @b{it-sensor} @expansion{} @code{it_sensor, invisible=true}, @pxref{it_sensor}
+ at item @b{it-spade} @expansion{} @ref{it_spade}
+ at item @b{it-spoon} @expansion{} @ref{it_spoon}
+ at item @b{it-spring1} @expansion{} @code{it_spring_keep}, @pxref{it_spring}
+ at item @b{it-spring2} @expansion{} @code{it_spring_drop}, @pxref{it_spring}
+ at item @b{it-springboard} @expansion{} @ref{it_springboard}
+ at item @b{it-squashed} @expansion{} @ref{it_squashed}
+ at item @b{it-shogun-s} @expansion{} @code{it_shogun_s}, @pxref{it_shogun}
+ at item @b{it-shogun-m} @expansion{} @code{it_shogun_m}, @pxref{it_shogun}
+ at item @b{it-shogun-l} @expansion{} @code{it_shogun_l}, @pxref{it_shogun}
+ at item @b{it-surprise} @expansion{} @ref{it_surprise}
+ at item @b{it-sword} @expansion{} @ref{it_sword}
+ at item @b{it-tinyhollow} @expansion{} @code{it_meditation_dent}, @pxref{it_meditation}
+ at item @b{it-tinyhill} @expansion{} @code{it_meditation_bump}, @pxref{it_meditation}
+ at item @b{it-trigger} @expansion{} @ref{it_trigger}
+ at item @b{it-umbrella} @expansion{} @ref{it_umbrella}
+ at item @b{it-vortex-open} @expansion{} @code{it_vortex_open, scissor=false}, @pxref{it_vortex}
+ at item @b{it-vortex-closed} @expansion{} @code{it_vortex_closed, autoclose=true, scissor=false}, @pxref{it_vortex}
+ at item @b{it-vstrip} @expansion{} @code{it_strip_ns}, @pxref{it_strip}
+ at item @b{it-weight} @expansion{} @ref{it_weight}
+ at item @b{it-whitebomb} @expansion{} @code{it_bomb_white}, @pxref{it_bomb}
+ at item @b{it-wormhole} @expansion{} @code{it_wormhole_on, scissor=false}, @pxref{it_wormhole}
+ at item @b{it-wormhole-off} @expansion{} @code{it_wormhole_off, scissor=false}, @pxref{it_wormhole}
+ at item @b{it-wrench} @expansion{} @ref{it_wrench}
+ at item @b{it-yinyang} @expansion{} @ref{it_yinyang}
+ at item @b{st-actorimpulse} @expansion{} @ref{st_actorimpulse}
+ at item @b{st-actorimpulse_invisible} @expansion{} @code{st_actorimpulse_invisible}, @pxref{st_actorimpulse}
+ at item @b{st-beads} @expansion{} @ref{st_beads}
+ at item @b{st-bigbluesand-e} @expansion{} @code{st_bluesand_e}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-es} @expansion{} @code{st_bluesand_es}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-esw} @expansion{} @code{st_bluesand_esw}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-ew} @expansion{} @code{st_bluesand_ew}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-n} @expansion{} @code{st_bluesand_n}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-ne} @expansion{} @code{st_bluesand_ne}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-nes} @expansion{} @code{st_bluesand_nes}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-nesw} @expansion{} @code{st_bluesand_nesw}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-new} @expansion{} @code{st_bluesand_new}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-ns} @expansion{} @code{st_bluesand_ns}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-nsw} @expansion{} @code{st_bluesand_nsw}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-nw} @expansion{} @code{st_bluesand_nw}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-s} @expansion{} @code{st_bluesand_s}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-sw} @expansion{} @code{st_bluesand_sw}, @pxref{st_bluesand}
+ at item @b{st-bigbluesand-w} @expansion{} @code{st_bluesand_w}, @pxref{st_bluesand}
+ at item @b{st-blackballs} @expansion{} @code{st_jamb_black}, @pxref{st_jamb}
+ at item @b{st-black1} @expansion{} @code{st_passage_black_square}, @pxref{st_passage}
+ at item @b{st-black2} @expansion{} @code{st_passage_black_slash}, @pxref{st_passage}
+ at item @b{st-black3} @expansion{} @code{st_passage_black_cross}, @pxref{st_passage}
+ at item @b{st-black4} @expansion{} @code{st_passage_black_frame}, @pxref{st_passage}
+ at item @b{st-blocker} @expansion{} @ref{st_blocker}
+ at item @b{st-blocker-growing} @expansion{} @code{st_blocker_new}, @pxref{st_blocker}
+ at item @b{st-bluegray} @expansion{} @ref{st_bluegray}
+ at item @b{st-bluegray_hole} @expansion{} @code{st_bluegray_hollow}, @pxref{st_bluegray}
+ at item @b{st-blue-sand} @expansion{} @ref{st_bluesand}
+ at item @b{st-bolder} @expansion{} @ref{st_boulder}
+ at item @b{st-bolder-e} @expansion{} @code{st_boulder_e}, @pxref{st_boulder}
+ at item @b{st-bolder-n} @expansion{} @code{st_boulder_n}, @pxref{st_boulder}
+ at item @b{st-bolder-s} @expansion{} @code{st_boulder_s}, @pxref{st_boulder}
+ at item @b{st-bolder-w} @expansion{} @code{st_boulder_w}, @pxref{st_boulder}
+ at item @b{st-brake} @expansion{} @ref{st_brake}
+ at item @b{st-break_acblack} @expansion{} @code{st_break_black}, @pxref{st_break}
+ at item @b{st-break_acwhite} @expansion{} @code{st_break_white}, @pxref{st_break}
+ at item @b{st-break_bolder} @expansion{} @code{st_break_boulder}, @pxref{st_break}
+ at item @b{st-break_gray} @expansion{} @code{st_break_plain}, @pxref{st_break}
+ at item @b{st-brick} @expansion{} @ref{st_brick}
+ at item @b{st-bigbrick-e} @expansion{} @code{st_brick_e}, @pxref{st_brick}
+ at item @b{st-bigbrick-es} @expansion{} @code{st_brick_es}, @pxref{st_brick}
+ at item @b{st-bigbrick-esw} @expansion{} @code{st_brick_esw}, @pxref{st_brick}
+ at item @b{st-bigbrick-ew} @expansion{} @code{st_brick_ew}, @pxref{st_brick}
+ at item @b{st-bigbrick-n} @expansion{} @code{st_brick_n}, @pxref{st_brick}
+ at item @b{st-bigbrick-ne} @expansion{} @code{st_brick_ne}, @pxref{st_brick}
+ at item @b{st-bigbrick-nes} @expansion{} @code{st_brick_nes}, @pxref{st_brick}
+ at item @b{st-bigbrick-nesw} @expansion{} @code{st_brick_nesw}, @pxref{st_brick}
+ at item @b{st-bigbrick-new} @expansion{} @code{st_brick_new}, @pxref{st_brick}
+ at item @b{st-bigbrick-ns} @expansion{} @code{st_brick_ns}, @pxref{st_brick}
+ at item @b{st-bigbrick-nsw} @expansion{} @code{st_brick_nsw}, @pxref{st_brick}
+ at item @b{st-bigbrick-nw} @expansion{} @code{st_brick_nw}, @pxref{st_brick}
+ at item @b{st-bigbrick-s} @expansion{} @code{st_brick_s}, @pxref{st_brick}
+ at item @b{st-bigbrick-sw} @expansion{} @code{st_brick_sw}, @pxref{st_brick}
+ at item @b{st-bigbrick-w} @expansion{} @code{st_brick_w}, @pxref{st_brick}
+ at item @b{st-block} @expansion{} @ref{st_plop}
+ at item @b{st-bombs} @expansion{} @code{st_dispenser_bombblack}, @pxref{st_dispenser}
+ at item @b{st-break_invisible} @expansion{} @code{st_ghost_break}, @pxref{st_ghost}
+ at item @b{st-brick_magic} @expansion{} @code{st_magic_brick}, @pxref{st_magic}
+ at item @b{st-brownie} @expansion{} @ref{st_brownie}
+ at item @b{st-bug} @expansion{} @code{st_break_bug}, @pxref{st_break}
+ at item @b{st-bumps} @expansion{} @ref{st_pinkbumps}
+ at item @b{st-camouflage} @expansion{} @ref{st_camouflage}
+ at item @b{st-camouflage_hole} @expansion{} @code{st_camouflage_hollow}, @pxref{st_camouflage}
+ at item @b{st-camouflage_move} @expansion{} @code{st_camouflage_movable}, @pxref{st_camouflage}
+ at item @b{st-chameleon} @expansion{} @ref{st_chameleon}
+ at item @b{st-chargeminus} @expansion{} @code{st_charge_minus}, @pxref{st_charge}
+ at item @b{st-chargeplus} @expansion{} @code{st_charge_plus}, @pxref{st_charge}
+ at item @b{st-chargezero} @expansion{} @code{st_charge_zero}, @pxref{st_charge}
+ at item @b{st-chess} @expansion{} @ref{st_chess}
+ at item @b{st-chess_black} @expansion{} @code{st_chess_black}, @pxref{st_chess}
+ at item @b{st-chess_white} @expansion{} @code{st_chess_white}, @pxref{st_chess}
+ at item @b{st-coffee} @expansion{} @code{st_magic_oxydc}, @pxref{st_magic}
+ at item @b{st-coinslot} @expansion{} @ref{st_coinslot}
+ at item @b{st-death} @expansion{} @ref{st_death}
+ at item @b{st-death_invisible} @expansion{} @code{st_death_invisible}, @pxref{st_death}
+ at item @b{st-disco-dark} @expansion{} @code{st_disco_dark}, @pxref{st_disco}
+ at item @b{st-disco-light} @expansion{} @code{st_disco_light}, @pxref{st_disco}
+ at item @b{st-disco-medium} @expansion{} @code{st_disco_medium}, @pxref{st_disco}
+ at item @b{st-door_a} @expansion{} @code{st_door_a}, @pxref{st_door}
+ at item @b{st-door_b} @expansion{} @code{st_door_b}, @pxref{st_door}
+ at item @b{st-door_c} @expansion{} @code{st_door_c}, @pxref{st_door}
+ at item @b{st-door-h} @expansion{} @code{st_door_d, faces="ns"}, @pxref{st_door}
+ at item @b{st-door-h-open} @expansion{} @code{st_door_d, faces="ns", state=OPEN}, @pxref{st_door}
+ at item @b{st-door-v} @expansion{} @code{st_door_d, faces="ew"}, @pxref{st_door}
+ at item @b{st-door-v-open} @expansion{} @code{st_door_d, faces="ew", state=OPEN}, @pxref{st_door}
+ at item @b{st-fakeoxyd} @expansion{} @code{st_fake_quake}, @pxref{st_fake}
+ at item @b{st-fakeoxyda} @expansion{} @code{st_magic_oxyda}, @pxref{st_magic}
+ at item @b{st-fart} @expansion{} @ref{st_quake}
+ at item @b{st-firebreak} @expansion{} @code{st_flat_burnable}, @pxref{st_flat}
+ at item @b{st-firebreak_move} @expansion{} @code{st_flat_moveburnable}, @pxref{st_flat}
+ at item @b{st-flash} @expansion{} @ref{st_flash}
+ at item @b{st-flhay} @expansion{} @code{st_box_hay}, @pxref{st_box}
+ at item @b{st-floppy} @expansion{} @ref{st_floppy}
+ at item @b{st-flrock} @expansion{} @code{st_box_rock}, @pxref{st_box}
+ at item @b{st-fourswitch} @expansion{} @ref{st_fourswitch}
+ at item @b{st-glass} @expansion{} @ref{st_rawglass}
+ at item @b{st-glass_move} @expansion{} @code{st_rawglass_movable}, @pxref{st_rawglass}
+ at item @b{st-glass1} @expansion{} @ref{st_lightglass}
+ at item @b{st-glass1_hole} @expansion{} @code{st_lightglass_hollow}, @pxref{st_lightglass}
+ at item @b{st-glass1_move} @expansion{} @code{st_lightglass_movable}, @pxref{st_lightglass}
+ at item @b{st-glass2} @expansion{} @ref{st_darkglass}
+ at item @b{st-glass2_hole} @expansion{} @code{st_darkglass_hollow}, @pxref{st_darkglass}
+ at item @b{st-glass2_move} @expansion{} @code{st_darkglass_movable}, @pxref{st_darkglass}
+ at item @b{st-glass3} @expansion{} @ref{st_redfiber}
+ at item @b{st-grate1} @expansion{} @code{st_grate_cross}, @pxref{st_grate}
+ at item @b{st-grate2} @expansion{} @code{st_grate_framed}, @pxref{st_grate}
+ at item @b{st-grate3} @expansion{} @code{st_portal_horse}, @pxref{st_portal}
+ at item @b{st-greenbrown} @expansion{} @ref{st_greenbrown}
+ at item @b{st-greenbrown_hole} @expansion{} @code{st_greenbrown_hollow}, @pxref{st_greenbrown}
+ at item @b{st-greenbrown_move} @expansion{} @code{st_greenbrown_movable}, @pxref{st_greenbrown}
+ at item @b{st-invisible} @expansion{} @ref{st_invisible}
+ at item @b{st-invisible_hole} @expansion{} @code{st_invisible_hollow}, @pxref{st_invisible}
+ at item @b{st-invisible_magic} @expansion{} @code{st_ghost_greenbrown}, @pxref{st_ghost}
+ at item @b{st-invisible_move} @expansion{} @code{st_invisible_movable}, @pxref{st_invisible}
+ at item @b{st-key} @expansion{} @code{st_key, code=0}, @pxref{st_key}
+ at item @b{st-key_a} @expansion{} @code{st_key, code=1}, @pxref{st_key}
+ at item @b{st-key_b} @expansion{} @code{st_key, code=2}, @pxref{st_key}
+ at item @b{st-key_c} @expansion{} @code{st_key, code=3}, @pxref{st_key}
+ at item @b{st-knight} @expansion{} @ref{st_knight}
+ at item @b{st-laserbreak} @expansion{} @code{st_break_laser}, @pxref{st_break}
+ at item @b{st-laserswitch} @expansion{} @ref{st_laserswitch}
+ at item @b{st-lasertimeswitch} @expansion{} @ref{st_laserflop}
+ at item @b{st-laser} @expansion{} @code{st_laser_e}, @pxref{st_laser}
+ at item @b{st-laser-e} @expansion{} @code{st_laser_e}, @pxref{st_laser}
+ at item @b{st-laser-n} @expansion{} @code{st_laser_n}, @pxref{st_laser}
+ at item @b{st-laser-s} @expansion{} @code{st_laser_s}, @pxref{st_laser}
+ at item @b{st-laser-w} @expansion{} @code{st_laser_w}, @pxref{st_laser}
+ at item @b{st-lightpassenger} @expansion{} @ref{st_lightpassenger}
+ at item @b{st-lightpassenger_off} @expansion{} @code{st_lightpassenger_off}, @pxref{st_lightpassenger}
+ at item @b{st-likeoxyda} @expansion{} @code{st_fake_oxyda}, @pxref{st_fake}
+ at item @b{st-likeoxyda-open} @expansion{} @code{st_fake_oxyda, state=OPEN}, @pxref{st_fake}
+ at item @b{st-likeoxydb} @expansion{} @code{st_fake_oxydb}, @pxref{st_fake}
+ at item @b{st-likeoxydb-open} @expansion{} @code{st_fake_oxydb, state=OPEN}, @pxref{st_fake}
+ at item @b{st-likeoxydc} @expansion{} @code{st_fake_oxydc}, @pxref{st_fake}
+ at item @b{st-likeoxydc-open} @expansion{} @code{st_fake_oxydc, state=OPEN}, @pxref{st_fake}
+ at item @b{st-likeoxydd} @expansion{} @code{st_fake_oxydd}, @pxref{st_fake}
+ at item @b{st-likeoxydd-open} @expansion{} @code{st_fake_oxydd, state=OPEN}, @pxref{st_fake}
+ at item @b{st-mail-e} @expansion{} @code{st-mail-e}, @pxref{st-mail}
+ at item @b{st-mail-n} @expansion{} @code{st-mail-n}, @pxref{st-mail}
+ at item @b{st-mail-s} @expansion{} @code{st-mail-s}, @pxref{st-mail}
+ at item @b{st-mail-w} @expansion{} @code{st-mail-w}, @pxref{st-mail}
+ at item @b{st-marble} @expansion{} @ref{st_redbrown}
+ at item @b{st-marble_hole} @expansion{} @code{st_redbrown_hollow}, @pxref{st_redbrown}
+ at item @b{st-marble_move} @expansion{} @code{st_redbrown_movable}, @pxref{st_redbrown}
+ at item @b{st-metal} @expansion{} @ref{st_metal}
+ at item @b{st-metal_hole} @expansion{} @code{st_metal_hollow}, @pxref{st_metal}
+ at item @b{st-mirror-p|} @expansion{} @code{st_mirror_slab_n}, @pxref{st_mirror}
+ at item @b{st-mirror-p/} @expansion{} @code{st_mirror_slab_e}, @pxref{st_mirror}
+ at item @b{st-mirror-p-} @expansion{} @code{st_mirror_slab_s}, @pxref{st_mirror}
+ at item @b{st-mirror-p\\} @expansion{} @code{st_mirror_slab_w}, @pxref{st_mirror}
+ at item @b{st-mirror-p|t} @expansion{} @code{st_mirror_slab_nt}, @pxref{st_mirror}
+ at item @b{st-mirror-p/t} @expansion{} @code{st_mirror_slab_et}, @pxref{st_mirror}
+ at item @b{st-mirror-p-t} @expansion{} @code{st_mirror_slab_st}, @pxref{st_mirror}
+ at item @b{st-mirror-p\\t} @expansion{} @code{st_mirror_slab_wt}, @pxref{st_mirror}
+ at item @b{st-mirror-p|m} @expansion{} @code{st_mirror_slab_nm}, @pxref{st_mirror}
+ at item @b{st-mirror-p/m} @expansion{} @code{st_mirror_slab_em}, @pxref{st_mirror}
+ at item @b{st-mirror-p-m} @expansion{} @code{st_mirror_slab_sm}, @pxref{st_mirror}
+ at item @b{st-mirror-p\\m} @expansion{} @code{st_mirror_slab_wm}, @pxref{st_mirror}
+ at item @b{st-mirror-p|tm} @expansion{} @code{st_mirror_slab_ntm}, @pxref{st_mirror}
+ at item @b{st-mirror-p/tm} @expansion{} @code{st_mirror_slab_etm}, @pxref{st_mirror}
+ at item @b{st-mirror-p-tm} @expansion{} @code{st_mirror_slab_stm}, @pxref{st_mirror}
+ at item @b{st-mirror-p\\tm} @expansion{} @code{st_mirror_slab_wtm}, @pxref{st_mirror}
+ at item @b{st-mirror-3^} @expansion{} @code{st_mirror_triangle_n}, @pxref{st_mirror}
+ at item @b{st-mirror-3>} @expansion{} @code{st_mirror_triangle_e}, @pxref{st_mirror}
+ at item @b{st-mirror-3v} @expansion{} @code{st_mirror_triangle_s}, @pxref{st_mirror}
+ at item @b{st-mirror-3<} @expansion{} @code{st_mirror_triangle_w}, @pxref{st_mirror}
+ at item @b{st-mirror-3^t} @expansion{} @code{st_mirror_triangle_nt}, @pxref{st_mirror}
+ at item @b{st-mirror-3>t} @expansion{} @code{st_mirror_triangle_et}, @pxref{st_mirror}
+ at item @b{st-mirror-3vt} @expansion{} @code{st_mirror_triangle_st}, @pxref{st_mirror}
+ at item @b{st-mirror-3<t} @expansion{} @code{st_mirror_triangle_wt}, @pxref{st_mirror}
+ at item @b{st-mirror-3^m} @expansion{} @code{st_mirror_triangle_nm}, @pxref{st_mirror}
+ at item @b{st-mirror-3>m} @expansion{} @code{st_mirror_triangle_em}, @pxref{st_mirror}
+ at item @b{st-mirror-3vm} @expansion{} @code{st_mirror_triangle_sm}, @pxref{st_mirror}
+ at item @b{st-mirror-3<m} @expansion{} @code{st_mirror_triangle_wm}, @pxref{st_mirror}
+ at item @b{st-mirror-3^tm} @expansion{} @code{st_mirror_triangle_ntm}, @pxref{st_mirror}
+ at item @b{st-mirror-3>tm} @expansion{} @code{st_mirror_triangle_etm}, @pxref{st_mirror}
+ at item @b{st-mirror-3vtm} @expansion{} @code{st_mirror_triangle_stm}, @pxref{st_mirror}
+ at item @b{st-mirror-3<tm} @expansion{} @code{st_mirror_triangle_wtm}, @pxref{st_mirror}
+ at item @b{st-oneway} @expansion{} @ref{st_oneway}
+ at item @b{st-oneway_black"} @expansion{} @code{st_oneway_black}, @pxref{st_oneway}
+ at item @b{st-oneway_black-e"} @expansion{} @code{st_oneway_black_e}, @pxref{st_oneway}
+ at item @b{st-oneway_black-n"} @expansion{} @code{st_oneway_black_n}, @pxref{st_oneway}
+ at item @b{st-oneway_black-s"} @expansion{} @code{st_oneway_black_s}, @pxref{st_oneway}
+ at item @b{st-oneway_black-w"} @expansion{} @code{st_oneway_black_w}, @pxref{st_oneway}
+ at item @b{st-oneway-e"} @expansion{} @code{st_oneway_e}, @pxref{st_oneway}
+ at item @b{st-oneway-n"} @expansion{} @code{st_oneway_n}, @pxref{st_oneway}
+ at item @b{st-oneway-s"} @expansion{} @code{st_oneway_s}, @pxref{st_oneway}
+ at item @b{st-oneway-w"} @expansion{} @code{st_oneway_w}, @pxref{st_oneway}
+ at item @b{st-oneway_white"} @expansion{} @code{st_oneway_white}, @pxref{st_oneway}
+ at item @b{st-oneway_white-e"} @expansion{} @code{st_oneway_white_e}, @pxref{st_oneway}
+ at item @b{st-oneway_white-n"} @expansion{} @code{st_oneway_white_n}, @pxref{st_oneway}
+ at item @b{st-oneway_white-s"} @expansion{} @code{st_oneway_white_s}, @pxref{st_oneway}
+ at item @b{st-oneway_white-w"} @expansion{} @code{st_oneway_white_w}, @pxref{st_oneway}
+ at item @b{st-oxyd} @expansion{} @ref{st_oxyd}
+ at item @b{st-plain} @expansion{} @ref{st_flat}
+ at item @b{st-plain_break} @expansion{} @code{st_flat_breakable}, @pxref{st_flat}
+ at item @b{st-plain_cracked} @expansion{} @code{st_flat_cracked}, @pxref{st_flat}
+ at item @b{st-plain_hole} @expansion{} @code{st_flat_hollow}, @pxref{st_flat}
+ at item @b{st-plain_move} @expansion{} @code{st_flat_movable}, @pxref{st_flat}
+ at item @b{st-pmirror} @expansion{} @code{st_mirror_slab_e}, @pxref{st_mirror}
+ at item @b{st-polarswitch} @expansion{} @ref{st_polarswitch}
+ at item @b{st-pull} @expansion{} @ref{st_pull}
+ at item @b{st-puzzle} @expansion{} @ref{st_puzzle}
+ at item @b{st-puzzle-e} @expansion{} @code{st_puzzle_blue_e}, @pxref{st_puzzle}
+ at item @b{st-puzzle-es} @expansion{} @code{st_puzzle_blue_es}, @pxref{st_puzzle}
+ at item @b{st-puzzle-esw} @expansion{} @code{st_puzzle_blue_esw}, @pxref{st_puzzle}
+ at item @b{st-puzzle-ew} @expansion{} @code{st_puzzle_blue_ew}, @pxref{st_puzzle}
+ at item @b{st-puzzle-hollow} @expansion{} @code{st_puzzle_blue_nesw_hollow}, @pxref{st_puzzle}
+ at item @b{st-puzzle-n} @expansion{} @code{st_puzzle_blue_n}, @pxref{st_puzzle}
+ at item @b{st-puzzle-ne} @expansion{} @code{st_puzzle_blue_ne}, @pxref{st_puzzle}
+ at item @b{st-puzzle-nes} @expansion{} @code{st_puzzle_blue_nes}, @pxref{st_puzzle}
+ at item @b{st-puzzle-nesw} @expansion{} @code{st_puzzle_blue_nesw}, @pxref{st_puzzle}
+ at item @b{st-puzzle-new} @expansion{} @code{st_puzzle_blue_new}, @pxref{st_puzzle}
+ at item @b{st-puzzle-ns} @expansion{} @code{st_puzzle_blue_ns}, @pxref{st_puzzle}
+ at item @b{st-puzzle-nsw} @expansion{} @code{st_puzzle_blue_nsw}, @pxref{st_puzzle}
+ at item @b{st-puzzle-nw} @expansion{} @code{st_puzzle_blue_nw}, @pxref{st_puzzle}
+ at item @b{st-puzzle-s} @expansion{} @code{st_puzzle_blue_s}, @pxref{st_puzzle}
+ at item @b{st-puzzle-sw} @expansion{} @code{st_puzzle_blue_sw}, @pxref{st_puzzle}
+ at item @b{st-puzzle-w} @expansion{} @code{st_puzzle_blue_w}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-e} @expansion{} @code{st_puzzle_yellow_e}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-es} @expansion{} @code{st_puzzle_yellow_es}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-esw} @expansion{} @code{st_puzzle_yellow_esw}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-ew} @expansion{} @code{st_puzzle_yellow_ew}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-hollow} @expansion{} @code{st_puzzle_yellow_nesw_hollow}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-n} @expansion{} @code{st_puzzle_yellow_n}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-ne} @expansion{} @code{st_puzzle_yellow_ne}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-nes} @expansion{} @code{st_puzzle_yellow_nes}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-nesw} @expansion{} @code{st_puzzle_yellow_nesw}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-new} @expansion{} @code{st_puzzle_yellow_new}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-ns} @expansion{} @code{st_puzzle_yellow_ns}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-nsw} @expansion{} @code{st_puzzle_yellow_nsw}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-nw} @expansion{} @code{st_puzzle_yellow_nw}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-s} @expansion{} @code{st_puzzle_yellow_s}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-sw} @expansion{} @code{st_puzzle_yellow_sw}, @pxref{st_puzzle}
+ at item @b{st-puzzle2-w} @expansion{} @code{st_puzzle_yellow_w}, @pxref{st_puzzle}
+ at item @b{st-redrock} @expansion{} @ref{st_redrock}
+ at item @b{st-rock1} @expansion{} @ref{st_granite}
+ at item @b{st-rock1_hole} @expansion{} @code{st_granite_hollow}, @pxref{st_granite}
+ at item @b{st-rock1_move} @expansion{} @code{st_granite_movable}, @pxref{st_granite}
+ at item @b{st-rock2} @expansion{} @ref{st_darkgray}
+ at item @b{st-rock2_hole} @expansion{} @code{st_darkgray_hollow}, @pxref{st_darkgray}
+ at item @b{st-rock3} @expansion{} @ref{st_plaster}
+ at item @b{st-rock3_break} @expansion{} @code{st_plaster_breakable}, @pxref{st_plaster}
+ at item @b{st-rock3_hole} @expansion{} @code{st_plaster_hollow}, @pxref{st_plaster}
+ at item @b{st-rock3_move} @expansion{} @code{st_plaster_movable}, @pxref{st_plaster}
+ at item @b{st-rock3_movebreak} @expansion{} @code{st_plaster_movebreakable}, @pxref{st_plaster}
+ at item @b{st-rock4} @expansion{} @ref{st_purplemarble}
+ at item @b{st-rock5} @expansion{} @ref{st_tigris}
+ at item @b{st-rock6} @expansion{} @ref{st_purplegray}
+ at item @b{st-rock7} @expansion{} @ref{st_greengray}
+ at item @b{st-rock8} @expansion{} @ref{st_concrete}
+ at item @b{st-rock9} @expansion{} @ref{st_ancient}
+ at item @b{st-rock10} @expansion{} @ref{st_brownmarble}
+ at item @b{st-rotator-left} @expansion{} @code{st_rotator_ccw}, @pxref{st_rotator}
+ at item @b{st-rotator_move-left} @expansion{} @code{st_rotator_ccw_movable}, @pxref{st_rotator}
+ at item @b{st-rotator_move-right} @expansion{} @code{st_rotator_cw_movable}, @pxref{st_rotator}
+ at item @b{st-rotator-right} @expansion{} @code{st_rotator_cw}, @pxref{st_rotator}
+ at item @b{st-rubberband} @expansion{} @ref{st_rubberband}
+ at item @b{st-scissors} @expansion{} @code{st_scissors, inverse=true}, @pxref{st_scissors}
+ at item @b{st-shogun} @expansion{} @ref{st_shogun}
+ at item @b{st-shogun-l} @expansion{} @code{st_shogun_l}, @pxref{st_shogun}
+ at item @b{st-shogun-m} @expansion{} @code{st_shogun_m}, @pxref{st_shogun}
+ at item @b{st-shogun-ml} @expansion{} @code{st_shogun_ml}, @pxref{st_shogun}
+ at item @b{st-shogun-s} @expansion{} @code{st_shogun_s}, @pxref{st_shogun}
+ at item @b{st-shogun-sl} @expansion{} @code{st_shogun_sl}, @pxref{st_shogun}
+ at item @b{st-shogun-sm} @expansion{} @code{st_shogun_sm}, @pxref{st_shogun}
+ at item @b{st-shogun-sml} @expansion{} @code{st_shogun_sml}, @pxref{st_shogun}
+ at item @b{st-spitter} @expansion{} @ref{st_spitter}
+ at item @b{st-stonebrush} @expansion{} @code{st_ghost_purplemarble}, @pxref{st_ghost}
+ at item @b{st-stoneimpulse} @expansion{} @ref{st_stoneimpulse}
+ at item @b{st-stoneimpulse-hollow} @expansion{} @code{st_stoneimpulse_hollow}, @pxref{st_stoneimpulse}
+ at item @b{st-stoneimpulse_movable} @expansion{} @code{st_stoneimpulse_movable}, @pxref{st_stoneimpulse}
+ at item @b{st-stone1} @expansion{} @ref{st_brownpyramide}
+ at item @b{st-stone2} @expansion{} @ref{st_redmarble}
+ at item @b{st-stone_break} @expansion{} @code{st_break_oxydc}, @pxref{st_break}
+ at item @b{st-surprise} @expansion{} @ref{st_surprise}
+ at item @b{st-swap} @expansion{} @ref{st_swap}
+ at item @b{st-switch} @expansion{} @code{st_switch, instant=true}, @pxref{st_switch}
+ at item @b{st-switch_black} @expansion{} @code{st_switch_black, instant=true}, @pxref{st_switch}
+ at item @b{st-switch_white} @expansion{} @code{st_switch_white, instant=true}, @pxref{st_switch}
+ at item @b{st-thief} @expansion{} @ref{st_thief}
+ at item @b{st-timer} @expansion{} @ref{st_timer}
+ at item @b{st-timeswitch} @expansion{} @ref{st_monoflop}
+ at item @b{st-turnstile} @expansion{} @code{st_turnstile_red}, @pxref{st_turnstile}
+ at item @b{st-turnstile-green} @expansion{} @code{st_turnstile_green}, @pxref{st_turnstile}
+ at item @b{st-turnstile-e} @expansion{} @code{st_turnstilearm_e}, @pxref{st_turnstilearm}
+ at item @b{st-turnstile-n} @expansion{} @code{st_turnstilearm_n}, @pxref{st_turnstilearm}
+ at item @b{st-turnstile-s} @expansion{} @code{st_turnstilearm_s}, @pxref{st_turnstilearm}
+ at item @b{st-turnstile-w} @expansion{} @code{st_turnstilearm_w}, @pxref{st_turnstilearm}
+ at item @b{st-volcano} @expansion{} @ref{st_volcano}
+ at item @b{st-volcano_active} @expansion{} @code{st_volcano_active}, @pxref{st_volcano}
+ at item @b{st-volcano-growing} @expansion{} @code{st_volcano_new}, @pxref{st_volcano}
+ at item @b{st-volcano_inactive} @expansion{} @code{st_volcano_idle}, @pxref{st_volcano}
+ at item @b{st-whiteballs} @expansion{} @code{st_jamb_white}, @pxref{st_jamb}
+ at item @b{st-white1} @expansion{} @code{st_passage_white_square}, @pxref{st_passage}
+ at item @b{st-white2} @expansion{} @code{st_passage_white_slash}, @pxref{st_passage}
+ at item @b{st-white3} @expansion{} @code{st_passage_white_cross}, @pxref{st_passage}
+ at item @b{st-white4} @expansion{} @code{st_passage_white_frame}, @pxref{st_passage}
+ at item @b{st-window} @expansion{} @ref{st-window}
+ at item @b{st-wood} @expansion{} @code{st_box_wood}, @pxref{st_box}
+ at item @b{st-wood1} @expansion{} @code{st_box_wood_h}, @pxref{st_box}
+ at item @b{st-wood2} @expansion{} @code{st_box_wood_v}, @pxref{st_box}
+ at item @b{st-wood-growing} @expansion{} @code{st_box_wood_growing}, @pxref{st_box}
+ at item @b{st-wood_001} @expansion{} @ref{st_panel}
+ at item @b{st-woven} @expansion{} @ref{st_woven}
+ at item @b{st-yellow} @expansion{} @ref{st_yellow}
+ at item @b{st-yinyang1} @expansion{} @code{st_blur_cross}, @pxref{st_blur}
+ at item @b{st-yinyang2} @expansion{} @code{st_blur_straight}, @pxref{st_blur}
+ at item @b{st-yinyang3} @expansion{} @code{st_blur_magic}, @pxref{st_blur}
+ at item @b{st-3mirror} @expansion{} @code{st_mirror_triangle_s}, @pxref{st_mirror}
+ at end table
 @bye
 



From ral at mail.berlios.de  Thu Feb 12 00:19:44 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Thu, 12 Feb 2009 00:19:44 +0100
Subject: [Enigma-game-svn] r1532 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 data/levels/lib data/schemas doc/reference src
	src/actors src/items src/stones
Message-ID: <200902112319.n1BNJiUp012366@sheep.berlios.de>

Author: ral
Date: 2009-02-12 00:19:41 +0100 (Thu, 12 Feb 2009)
New Revision: 1532

Added:
   trunk/data/gfx32/fl_fake_trigger.png
   trunk/data/gfx40/fl_fake_trigger.png
   trunk/data/gfx48/fl_fake_trigger.png
Removed:
   trunk/data/gfx32/fl_trigger.png
   trunk/data/gfx40/fl_trigger.png
   trunk/data/gfx48/fl_trigger.png
Modified:
   trunk/data/api1init.lua
   trunk/data/levels/lib/libpuzzle_3.xml
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/data/startup.lua
   trunk/doc/reference/enigma-ref.texi
   trunk/src/WorldProxy.cc
   trunk/src/actors/Balls.cc
   trunk/src/items.hh
   trunk/src/items/Bottle.cc
   trunk/src/items/Coin.cc
   trunk/src/items/PullerItem.cc
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/ox_extra.cc
   trunk/src/server.cc
   trunk/src/stones/VolcanoStone.cc
   trunk/src/stones/WindowStone.cc
Log:
Trunk 1.1: new API reengineering
- fix window - missed ring item renaming
- fix puller item - missed explosion renaming
- fix water passibility by marbles due to a too small sink speed default
- fix refman pdf formatting problems by addition of page break hints
- add coin template for "it_coin"
- fix explosion item - shatter actors, old API compatible kind report
- rerename fl_trigger -> fl_fake_trigger
- puzzle lib improve likelyhood for uneven shuffles
- cherry - actors that do not become invisible to drop it squashed
- bottle - actors that do not become drunken do not drop it
- volcano - do not shatter marbles beneath the stone while being inactive
- springboard - activate just if actor is on floor

Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/data/api1init.lua	2009-02-11 23:19:41 UTC (rev 1532)
@@ -68,6 +68,7 @@
     fl_darkgray = "fl-darkgray",
     fl_dunes = "fl-dunes",
     fl_fake_abyss = "fl-abyss_fake",
+    fl_fake_trigger = "fl-trigger",
     fl_gravel = "fl-gravel",
     fl_gray = "fl-gray",
     fl_hay = "fl-hay",
@@ -134,7 +135,6 @@
     fl_swamp = "fl-swamp",
     fl_thief = "fl-thief",
     fl_tigris = "fl-tigris",
-    fl_trigger = "fl-trigger",
     fl_water = "fl-water",
     fl_white = "fl-springboard",
     fl_wood = "fl-wood",

Copied: trunk/data/gfx32/fl_fake_trigger.png (from rev 1531, trunk/data/gfx32/fl_trigger.png)

Deleted: trunk/data/gfx32/fl_trigger.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/fl_fake_trigger.png (from rev 1531, trunk/data/gfx40/fl_trigger.png)

Deleted: trunk/data/gfx40/fl_trigger.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/fl_fake_trigger.png (from rev 1531, trunk/data/gfx48/fl_trigger.png)

Deleted: trunk/data/gfx48/fl_trigger.png
===================================================================
(Binary files differ)

Modified: trunk/data/levels/lib/libpuzzle_3.xml
===================================================================
--- trunk/data/levels/lib/libpuzzle_3.xml	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/data/levels/lib/libpuzzle_3.xml	2009-02-11 23:19:41 UTC (rev 1532)
@@ -83,6 +83,9 @@
             end
         end
         intensity = intensity * #huddle
+        if intensity > 0 then
+            intensity = intensity + math.random(0, 1)
+        end
         while intensity > 0 and #pushes > 0 do
             local pidx = random(#pushes)  -- select a random push pos/dir
             local puzz = st(pushes[pidx][1])

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/data/models-2d.lua	2009-02-11 23:19:41 UTC (rev 1532)
@@ -262,7 +262,7 @@
         {"fl_sand"},
         {"fl_stone"},
         {"fl_white"},
-        {"fl_trigger"},
+        {"fl_fake_trigger"},
         {"fl_bright"},
         -- multiple, with height and width (or 1)
         {"fl_bluegray", 4},

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/data/schemas/objects.xml	2009-02-11 23:19:41 UTC (rev 1532)
@@ -443,16 +443,6 @@
     </object>
     <object name="fl_wood_framed_h" init="true"/>
     <object name="fl_wood_framed_v" init="true"/>
-    <object name="it" abstract="true"/>
-    <object name="it_banana"/>
-    <object name="it_blocker">
-      <attr name="autoclose"/>
-      <msg name="close"/>
-      <msg name="open"/>
-      <msg name="signal"/>
-      <msg name="_init"/>
-      <msg name="_performaction"/>
-    </object>
     <object name="fl_yinyang">
       <attr name="friction" default="5.2"/>
       <attr name="adhesion" default="2.0"/>
@@ -463,7 +453,17 @@
     <object name="fl_yinyang_yang">
       <attr name="state" value="1"/>
     </object>
+    <object name="it" abstract="true"/>
     <object name="it_bag"/>
+    <object name="it_banana"/>
+    <object name="it_blocker">
+      <attr name="autoclose"/>
+      <msg name="close"/>
+      <msg name="open"/>
+      <msg name="signal"/>
+      <msg name="_init"/>
+      <msg name="_performaction"/>
+    </object>
     <object name="it_blocker_new" init="true">
     </object>
     <object name="it_bomb">
@@ -603,9 +603,6 @@
     <object name="it_extralife"/>
     <object name="it_extralife_new" init="true"/>
     <object name="it_floppy"/>
-    <object name="it_glasses">
-      <attr name="state" max="31"/>
-    </object>
     <object name="it_flag">
       <attr name="color"/>
     </object>
@@ -615,6 +612,9 @@
     <object name="it_flag_white">
       <attr name="color" value="1"/>
     </object>
+    <object name="it_glasses">
+      <attr name="state" max="31"/>
+    </object>
     <object name="it_glasses_broken">
       <attr name="state" value="0"/>
     </object>

Modified: trunk/data/startup.lua
===================================================================
--- trunk/data/startup.lua	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/data/startup.lua	2009-02-11 23:19:41 UTC (rev 1532)
@@ -178,6 +178,6 @@
 def_floor("fl_adhesionless", 2.5,   0.0,    true,   "",         false)
 def_floor("fl_dark",         3.0,   1.5,   false,   "",         true)
 def_floor("fl_bright",       3.0,   1.5,   false,   "",         true)
-def_floor("fl_trigger",      3.0,   1.5,    true,   "",         true)
+def_floor("fl_fake_trigger", 3.0,   1.5,    true,   "",         true)
 def_floor("fl_fake_abyss",   3.0,   2.0,   false,   "",         false)
 

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-11 23:19:41 UTC (rev 1532)
@@ -10196,7 +10196,7 @@
 survive but the number of actors of its kind controlled by the player need to be
 larger than the number of actors with value 1. For example, marking 3 out of 5
 small whiteballs with 1 means that the player is dead if 3 small whiteballs are
-no longer alive. See Old API - Variables ?enigma.ConserveLevel? for more details
+no longer alive. See Old API - Variables ???enigma.ConserveLevel??? for more details
 about restart of levels.
 
 @table @asis
@@ -18364,518 +18364,647 @@
 @item @b{ac-bug} @expansion{} @ref{ac_bug}
 @item @b{ac-horse} @expansion{} @ref{ac_horse}
 @item @b{ac-killerball} @expansion{} @ref{ac_killer}
+ at need 200
 @item @b{ac-rotor} @expansion{} @ref{ac_rotor}
 @item @b{ac-top} @expansion{} @ref{ac_top}
 @item @b{ac-whiteball} @expansion{} @code{ac_marble_white}, @pxref{ac_marble}
 @item @b{ac-whiteball-small} @expansion{} @code{ac_pearl_white, owner=DEFAULT}, @pxref{ac_pearl}
+ at need 200
 @item @b{fl-abyss} @expansion{} @ref{fl_abyss}
 @item @b{fl-abyss_fake} @expansion{} @code{fl_fake_abyss}, @pxref{fl_fake}
 @item @b{fl-acblack} @expansion{} @code{fl_yinyang_yin}, @pxref{fl_yinyang}
 @item @b{fl-acwhite} @expansion{} @code{fl_yinyang_yang}, @pxref{fl_yinyang}
+ at need 200
 @item @b{fl-black} @expansion{} @ref{fl_dark}
 @item @b{fl-bluegray} @expansion{} @ref{fl_bluegray}
 @item @b{fl-bluegreen} @expansion{} @ref{}
 @item @b{fl-bluegreenx} @expansion{} @ref{fl_aquamarine}
+ at need 200
 @item @b{fl-brick} @expansion{} @ref{fl_brick}
 @item @b{fl-bridge} @expansion{} @ref{fl_bridge}
 @item @b{fl-bridge-closed} @expansion{} @code{fl_bridge, state=CLOSED}, @pxref{fl_bridge}
 @item @b{fl-bridge-open} @expansion{} @ref{fl_bridge}
+ at need 200
 @item @b{fl-bumps} @expansion{} @ref{fl_pinkbumps}
 @item @b{fl-concrete} @expansion{} @ref{fl_concrete}
 @item @b{fl-darkgray} @expansion{} @ref{fl_darkgray}
 @item @b{fl-dunes} @expansion{} @ref{fl_dunes}
+ at need 200
 @item @b{fl-floor_001} @expansion{} @ref{fl_bast}
 @item @b{fl-gradient} @expansion{} @code{fl_slope_ps}, @pxref{fl_slope}
 @item @b{fl-gradient1} @expansion{} @code{fl_slope_ps}, @pxref{fl_slope}
 @item @b{fl-gradient2} @expansion{} @code{fl_slope_pn}, @pxref{fl_slope}
+ at need 200
 @item @b{fl-gradient3} @expansion{} @code{fl_slope_pe}, @pxref{fl_slope}
 @item @b{fl-gradient4} @expansion{} @code{fl_slope_pw}, @pxref{fl_slope}
 @item @b{fl-gradient5} @expansion{} @code{fl_slope_ose}, @pxref{fl_slope}
 @item @b{fl-gradient6} @expansion{} @code{fl_slope_osw}, @pxref{fl_slope}
+ at need 200
 @item @b{fl-gradient7} @expansion{} @code{fl_slope_one}, @pxref{fl_slope}
 @item @b{fl-gradient8} @expansion{} @code{fl_slope_onw}, @pxref{fl_slope}
 @item @b{fl-gradient9} @expansion{} @code{fl_slope_ise}, @pxref{fl_slope}
 @item @b{fl-gradient10} @expansion{} @code{fl_slope_ine}, @pxref{fl_slope}
+ at need 200
 @item @b{fl-gradient11} @expansion{} @code{fl_slope_isw}, @pxref{fl_slope}
 @item @b{fl-gradient12} @expansion{} @code{fl_slope_inw}, @pxref{fl_slope}
 @item @b{fl-gradient13} @expansion{} @code{fl_slope_tn}, @pxref{fl_slope}
 @item @b{fl-gradient14} @expansion{} @code{fl_slope_ts}, @pxref{fl_slope}
+ at need 200
 @item @b{fl-gradient15} @expansion{} @code{fl_slope_tw}, @pxref{fl_slope}
 @item @b{fl-gradient16} @expansion{} @code{fl_slope_te}, @pxref{fl_slope}
 @item @b{fl-gravel} @expansion{} @ref{fl_gravel}
 @item @b{fl-gray} @expansion{} @ref{fl_gray}
+ at need 200
 @item @b{fl-hay} @expansion{} @ref{fl_hay}
 @item @b{fl-himalaya} @expansion{} @ref{fl_himalaya}
 @item @b{fl-ice} @expansion{} @ref{fl_ice}
 @item @b{fl-inverse} @expansion{} @code{fl_inverse_white}, @pxref{fl_inverse}
+ at need 200
 @item @b{fl-inverse2} @expansion{} @code{fl_inverse_gray}, @pxref{fl_inverse}
- at item @b{fl-light} @expansion{} @ref{fl_ivory}
 @item @b{fl-leaves} @expansion{} @code{fl_lawn_a}, @pxref{fl_lawn}
 @item @b{fl-leavesb} @expansion{} @code{fl_lawn_b}, @pxref{fl_lawn}
 @item @b{fl-leavesc1} @expansion{} @code{fl_lawn_c1}, @pxref{fl_lawn}
+ at need 200
 @item @b{fl-leavesc2} @expansion{} @code{fl_lawn_c2}, @pxref{fl_lawn}
 @item @b{fl-leavesc3} @expansion{} @code{fl_lawn_c3}, @pxref{fl_lawn}
 @item @b{fl-leavesc4} @expansion{} @code{fl_lawn_c4}, @pxref{fl_lawn}
 @item @b{fl-leavesd1} @expansion{} @code{fl_lawn_d1}, @pxref{fl_lawn}
+ at need 200
 @item @b{fl-leavesd2} @expansion{} @code{fl_lawn_d2}, @pxref{fl_lawn}
 @item @b{fl-leavesd3} @expansion{} @code{fl_lawn_d3}, @pxref{fl_lawn}
 @item @b{fl-leavesd4} @expansion{} @code{fl_lawn_d4}, @pxref{fl_lawn}
 @item @b{fl-leavese1} @expansion{} @code{fl_lawn_e1}, @pxref{fl_lawn}
+ at need 200
 @item @b{fl-leavese2} @expansion{} @code{fl_lawn_e2}, @pxref{fl_lawn}
 @item @b{fl-leavese3} @expansion{} @code{fl_lawn_e3}, @pxref{fl_lawn}
 @item @b{fl-leavese4} @expansion{} @code{fl_lawn_e4}, @pxref{fl_lawn}
+ at item @b{fl-light} @expansion{} @ref{fl_ivory}
+ at need 200
 @item @b{fl-lightgray} @expansion{} @ref{fl_platinum}
 @item @b{fl-marble} @expansion{} @ref{fl_marble}
 @item @b{fl-metal} @expansion{} @ref{fl_metal}
 @item @b{fl-metal1} @expansion{} @code{fl_metal_1}, @pxref{fl_metal}
+ at need 200
 @item @b{fl-metal2} @expansion{} @code{fl_metal_2}, @pxref{fl_metal}
 @item @b{fl-metal3} @expansion{} @code{fl_metal_3}, @pxref{fl_metal}
 @item @b{fl-metal4} @expansion{} @code{fl_metal_4}, @pxref{fl_metal}
 @item @b{fl-metal5} @expansion{} @code{fl_metal_5}, @pxref{fl_metal}
+ at need 200
 @item @b{fl-metal6} @expansion{} @code{fl_metal_6}, @pxref{fl_metal}
 @item @b{fl-mortar} @expansion{} @ref{fl_mortar}
 @item @b{fl-nomouse} @expansion{} @ref{fl_adhesionless}
 @item @b{fl-normal_x} @expansion{} @code{fl_metal_7}, @pxref{fl_metal}
+ at need 200
 @item @b{fl-normal} @expansion{} @code{fl_metal_7n}, @pxref{fl_metal}
 @item @b{fl-plank} @expansion{} @ref{fl_plank}
 @item @b{fl-red} @expansion{} @ref{fl_red}
 @item @b{fl-rock} @expansion{} @ref{fl_rock}
+ at need 200
 @item @b{fl-rough} @expansion{} @ref{fl_rough}
 @item @b{fl-rough_medium} @expansion{} @code{fl_rough, friction=5.0, adhesion=1.2}, @pxref{fl_rough}
 @item @b{fl-rough_slow} @expansion{} @code{fl_rough, friction=7.0, adhesion=0.5}, @pxref{fl_rough}
 @item @b{fl-rough-blue} @expansion{} @ref{fl_blueslab}
+ at need 200
 @item @b{fl-rough-red} @expansion{} @ref{fl_redslab}
 @item @b{fl-sahara} @expansion{} @ref{fl_sahara}
 @item @b{fl-samba} @expansion{} @ref{fl_samba}
 @item @b{fl-samba1} @expansion{} @code{fl_samba_h}, @pxref{fl_samba}
+ at need 200
 @item @b{fl-samba2} @expansion{} @code{fl_samba_v}, @pxref{fl_samba}
 @item @b{fl-sand} @expansion{} @ref{fl_sand}
 @item @b{fl-space} @expansion{} @ref{fl_space}
 @item @b{fl-springboard} @expansion{} @ref{fl_white}
+ at need 200
 @item @b{fl-stone} @expansion{} @ref{fl_stone}
 @item @b{fl-stwood} @expansion{} @code{fl_wood_framed}, @pxref{fl_wood}
 @item @b{fl-stwood1} @expansion{} @code{fl_wood_framed_h}, @pxref{fl_wood}
 @item @b{fl-stwood2} @expansion{} @code{fl_wood_framed_v}, @pxref{fl_wood}
+ at need 200
 @item @b{fl-swamp} @expansion{} @ref{fl_swamp}
 @item @b{fl-thief} @expansion{} @ref{fl_thief}
 @item @b{fl-tigris} @expansion{} @ref{fl_tigris}
 @item @b{fl-trigger} @expansion{} @code{fl_fake_trigger}, @pxref{fl_fake}
+ at need 200
 @item @b{fl-water} @expansion{} @ref{fl_water}
 @item @b{fl-white} @expansion{} @ref{fl_bright}
 @item @b{fl-wood} @expansion{} @ref{fl_wood}
 @item @b{fl-wood1} @expansion{} @code{fl_wood_h}, @pxref{fl_wood}
+ at need 200
 @item @b{fl-wood2} @expansion{} @code{fl_wood_v}, @pxref{fl_wood}
 @item @b{fl-woven} @expansion{} @ref{fl_woven}
 @item @b{it-abyss} @expansion{} @ref{it_trap}
 @item @b{it-bag} @expansion{} @ref{it_bag}
+ at need 200
 @item @b{it-banana} @expansion{} @ref{it_banana}
 @item @b{it-blackbomb} @expansion{} @code{it_bomb_black}, @pxref{it_bomb}
 @item @b{it-blocker} @expansion{} @ref{it_blocker}
 @item @b{it-blocker-new} @expansion{} @code{it_blocker_new}, @pxref{it_blocker}
+ at need 200
 @item @b{it-booze} @expansion{} @ref{it_bottle}
 @item @b{it-booze-broken} @expansion{} @code{it_bottle_broken}, @pxref{it_bottle}
 @item @b{it-brake} @expansion{} @ref{it_brake}
 @item @b{it-brush} @expansion{} @ref{it_brush}
+ at need 200
 @item @b{it-burnable} @expansion{} @ref{it_burnable}
 @item @b{it-burnable_ash} @expansion{} @code{it_burnable_ash}, @pxref{it_burnable}
 @item @b{it-burnable_burning} @expansion{} @code{it_burnable_burning}, @pxref{it_burnable}
 @item @b{it-burnable_fireproof} @expansion{} @code{it_burnable_fireproof}, @pxref{it_burnable}
+ at need 200
 @item @b{it-burnable_ignited} @expansion{} @code{it_burnable_ignited}, @pxref{it_burnable}
 @item @b{it-burnable_oil} @expansion{} @code{it_burnable_oil}, @pxref{it_burnable}
 @item @b{it-cherry} @expansion{} @ref{it_cherry}
 @item @b{it-coffee} @expansion{} @ref{it_coffee}
+ at need 200
 @item @b{it-coin1} @expansion{} @code{it_coin_s}, @pxref{it_coin}
 @item @b{it-coin2} @expansion{} @code{it_coin_m}, @pxref{it_coin}
 @item @b{it-coin4} @expansion{} @code{it_coin_l}, @pxref{it_coin}
 @item @b{it-crack0} @expansion{} @code{it_crack_i}, @pxref{it_crack}
+ at need 200
 @item @b{it-crack1} @expansion{} @code{it_crack_s}, @pxref{it_crack}
 @item @b{it-crack2} @expansion{} @code{it_crack_m}, @pxref{it_crack}
 @item @b{it-crack3} @expansion{} @code{it_crack_l}, @pxref{it_crack}
 @item @b{it-cross} @expansion{} @ref{it_cross}
+ at need 200
 @item @b{it-death} @expansion{} @ref{it_death}
 @item @b{it-document} @expansion{} @ref{it_document}
 @item @b{it-drop} @expansion{} @ref{it_drop}
 @item @b{it-dynamite} @expansion{} @ref{it_dynamite}
+ at need 200
 @item @b{it-explosion1} @expansion{} @code{it_explosion_nil}, @pxref{it_explosion}
 @item @b{it-explosion2} @expansion{} @code{it_explosion_hollow}, @pxref{it_explosion}
 @item @b{it-explosion3} @expansion{} @code{it_explosion_debris}, @pxref{it_explosion}
 @item @b{it-extinguisher} @expansion{} @ref{it_extinguisher}
+ at need 200
 @item @b{it-extinguisher_empty} @expansion{} @code{it_extinguisher_empty}, @pxref{it_extinguisher}
 @item @b{it-extinguisher_medium} @expansion{} @code{it_extinguisher_medium}, @pxref{it_extinguisher}
 @item @b{it-extralife} @expansion{} @ref{it_extralife}
 @item @b{it-flagblack} @expansion{} @code{it_flag_black}, @pxref{it_flag}
+ at need 200
 @item @b{it-flagwhite} @expansion{} @code{it_flag_white}, @pxref{it_flag}
 @item @b{it-floppy} @expansion{} @ref{it_floppy}
 @item @b{it-glasses} @expansion{} @ref{it_glasses}
 @item @b{it-glasses-broken} @expansion{} @code{it_glasses_broken}, @pxref{it_glasses}
+ at need 200
 @item @b{it-hammer} @expansion{} @ref{it_hammer}
 @item @b{it-hollow} @expansion{} @code{it_meditation_hollow}, @pxref{it_meditation}
 @item @b{it-hill} @expansion{} @code{it_meditation_hill}, @pxref{it_meditation}
 @item @b{it-hstrip} @expansion{} @code{it_strip_ew}, @pxref{it_strip}
+ at need 200
 @item @b{it-inversesensor} @expansion{} @code{it_sensor, invisible=true, inverse=true}, @pxref{it_sensor}
 @item @b{it-key} @expansion{} @code{it_key, code=1}, @pxref{it_key}
 @item @b{it-key_a} @expansion{} @code{it_key, code=1}, @pxref{it_key}
 @item @b{it-key_b} @expansion{} @code{it_key, code=2}, @pxref{it_key}
+ at need 200
 @item @b{it-key_c} @expansion{} @code{it_key, code=3}, @pxref{it_key}
 @item @b{it-landmine} @expansion{} @ref{it_landmine}
 @item @b{it-magicwand} @expansion{} @ref{it_magicwand}
 @item @b{it-magnet} @expansion{} @ref{it_magnet}
+ at need 200
 @item @b{it-magnet-on} @expansion{} @code{it_magnet_on}, @pxref{it_magnet}
 @item @b{it-magnet-off} @expansion{} @code{it_magnet_off}, @pxref{it_magnet}
 @item @b{it-pencil} @expansion{} @ref{it_pencil}
 @item @b{it-pin} @expansion{} @ref{it_pin}
+ at need 200
 @item @b{it-pipe-e} @expansion{} @code{it_pipe_e}, @pxref{it_pipe}
 @item @b{it-pipe-es} @expansion{} @code{it_pipe_es}, @pxref{it_pipe}
 @item @b{it-pipe-h} @expansion{} @code{it_pipe_ew}, @pxref{it_pipe}
 @item @b{it-pipe-n} @expansion{} @code{it_pipe_n}, @pxref{it_pipe}
+ at need 200
 @item @b{it-pipe-ne} @expansion{} @code{it_pipe_ne}, @pxref{it_pipe}
 @item @b{it-pipe-s} @expansion{} @code{it_pipe_s}, @pxref{it_pipe}
 @item @b{it-pipe-sw} @expansion{} @code{it_pipe_sw}, @pxref{it_pipe}
 @item @b{it-pipe-v} @expansion{} @code{it_pipe_ns}, @pxref{it_pipe}
+ at need 200
 @item @b{it-pipe-w} @expansion{} @code{it_pipe_w}, @pxref{it_pipe}
 @item @b{it-pipe-wn} @expansion{} @code{it_pipe_nw}, @pxref{it_pipe}
 @item @b{it-puller-e} @expansion{} @code{it_puller_e}, @pxref{it_puller}
 @item @b{it-puller-n} @expansion{} @code{it_puller_n}, @pxref{it_puller}
+ at need 200
 @item @b{it-puller-s} @expansion{} @code{it_puller_s}, @pxref{it_puller}
 @item @b{it-puller-w} @expansion{} @code{it_puller_w}, @pxref{it_puller}
 @item @b{it-ring} @expansion{} @ref{it_ring}
 @item @b{it-rubberband} @expansion{} @ref{it_rubberband}
+ at need 200
 @item @b{it-seed} @expansion{} @code{it_seed_wood}, @pxref{it_seed}
 @item @b{it-seed_nowood} @expansion{} @code{it_seed_fake}, @pxref{it_seed}
 @item @b{it-seed_volcano} @expansion{} @code{it_seed_volcano}, @pxref{it_seed}
 @item @b{it-sensor} @expansion{} @code{it_sensor, invisible=true}, @pxref{it_sensor}
+ at need 200
 @item @b{it-spade} @expansion{} @ref{it_spade}
 @item @b{it-spoon} @expansion{} @ref{it_spoon}
 @item @b{it-spring1} @expansion{} @code{it_spring_keep}, @pxref{it_spring}
 @item @b{it-spring2} @expansion{} @code{it_spring_drop}, @pxref{it_spring}
+ at need 200
 @item @b{it-springboard} @expansion{} @ref{it_springboard}
 @item @b{it-squashed} @expansion{} @ref{it_squashed}
 @item @b{it-shogun-s} @expansion{} @code{it_shogun_s}, @pxref{it_shogun}
 @item @b{it-shogun-m} @expansion{} @code{it_shogun_m}, @pxref{it_shogun}
+ at need 200
 @item @b{it-shogun-l} @expansion{} @code{it_shogun_l}, @pxref{it_shogun}
 @item @b{it-surprise} @expansion{} @ref{it_surprise}
 @item @b{it-sword} @expansion{} @ref{it_sword}
 @item @b{it-tinyhollow} @expansion{} @code{it_meditation_dent}, @pxref{it_meditation}
+ at need 200
 @item @b{it-tinyhill} @expansion{} @code{it_meditation_bump}, @pxref{it_meditation}
 @item @b{it-trigger} @expansion{} @ref{it_trigger}
 @item @b{it-umbrella} @expansion{} @ref{it_umbrella}
 @item @b{it-vortex-open} @expansion{} @code{it_vortex_open, scissor=false}, @pxref{it_vortex}
+ at need 200
 @item @b{it-vortex-closed} @expansion{} @code{it_vortex_closed, autoclose=true, scissor=false}, @pxref{it_vortex}
 @item @b{it-vstrip} @expansion{} @code{it_strip_ns}, @pxref{it_strip}
 @item @b{it-weight} @expansion{} @ref{it_weight}
 @item @b{it-whitebomb} @expansion{} @code{it_bomb_white}, @pxref{it_bomb}
+ at need 200
 @item @b{it-wormhole} @expansion{} @code{it_wormhole_on, scissor=false}, @pxref{it_wormhole}
 @item @b{it-wormhole-off} @expansion{} @code{it_wormhole_off, scissor=false}, @pxref{it_wormhole}
 @item @b{it-wrench} @expansion{} @ref{it_wrench}
 @item @b{it-yinyang} @expansion{} @ref{it_yinyang}
+ at need 200
 @item @b{st-actorimpulse} @expansion{} @ref{st_actorimpulse}
 @item @b{st-actorimpulse_invisible} @expansion{} @code{st_actorimpulse_invisible}, @pxref{st_actorimpulse}
 @item @b{st-beads} @expansion{} @ref{st_beads}
 @item @b{st-bigbluesand-e} @expansion{} @code{st_bluesand_e}, @pxref{st_bluesand}
+ at need 200
 @item @b{st-bigbluesand-es} @expansion{} @code{st_bluesand_es}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-esw} @expansion{} @code{st_bluesand_esw}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-ew} @expansion{} @code{st_bluesand_ew}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-n} @expansion{} @code{st_bluesand_n}, @pxref{st_bluesand}
+ at need 200
 @item @b{st-bigbluesand-ne} @expansion{} @code{st_bluesand_ne}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-nes} @expansion{} @code{st_bluesand_nes}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-nesw} @expansion{} @code{st_bluesand_nesw}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-new} @expansion{} @code{st_bluesand_new}, @pxref{st_bluesand}
+ at need 200
 @item @b{st-bigbluesand-ns} @expansion{} @code{st_bluesand_ns}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-nsw} @expansion{} @code{st_bluesand_nsw}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-nw} @expansion{} @code{st_bluesand_nw}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-s} @expansion{} @code{st_bluesand_s}, @pxref{st_bluesand}
+ at need 200
 @item @b{st-bigbluesand-sw} @expansion{} @code{st_bluesand_sw}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-w} @expansion{} @code{st_bluesand_w}, @pxref{st_bluesand}
 @item @b{st-blackballs} @expansion{} @code{st_jamb_black}, @pxref{st_jamb}
 @item @b{st-black1} @expansion{} @code{st_passage_black_square}, @pxref{st_passage}
+ at need 200
 @item @b{st-black2} @expansion{} @code{st_passage_black_slash}, @pxref{st_passage}
 @item @b{st-black3} @expansion{} @code{st_passage_black_cross}, @pxref{st_passage}
 @item @b{st-black4} @expansion{} @code{st_passage_black_frame}, @pxref{st_passage}
 @item @b{st-blocker} @expansion{} @ref{st_blocker}
+ at need 200
 @item @b{st-blocker-growing} @expansion{} @code{st_blocker_new}, @pxref{st_blocker}
 @item @b{st-bluegray} @expansion{} @ref{st_bluegray}
 @item @b{st-bluegray_hole} @expansion{} @code{st_bluegray_hollow}, @pxref{st_bluegray}
 @item @b{st-blue-sand} @expansion{} @ref{st_bluesand}
+ at need 200
 @item @b{st-bolder} @expansion{} @ref{st_boulder}
 @item @b{st-bolder-e} @expansion{} @code{st_boulder_e}, @pxref{st_boulder}
 @item @b{st-bolder-n} @expansion{} @code{st_boulder_n}, @pxref{st_boulder}
 @item @b{st-bolder-s} @expansion{} @code{st_boulder_s}, @pxref{st_boulder}
+ at need 200
 @item @b{st-bolder-w} @expansion{} @code{st_boulder_w}, @pxref{st_boulder}
 @item @b{st-brake} @expansion{} @ref{st_brake}
 @item @b{st-break_acblack} @expansion{} @code{st_break_black}, @pxref{st_break}
 @item @b{st-break_acwhite} @expansion{} @code{st_break_white}, @pxref{st_break}
+ at need 200
 @item @b{st-break_bolder} @expansion{} @code{st_break_boulder}, @pxref{st_break}
 @item @b{st-break_gray} @expansion{} @code{st_break_plain}, @pxref{st_break}
 @item @b{st-brick} @expansion{} @ref{st_brick}
 @item @b{st-bigbrick-e} @expansion{} @code{st_brick_e}, @pxref{st_brick}
+ at need 200
 @item @b{st-bigbrick-es} @expansion{} @code{st_brick_es}, @pxref{st_brick}
 @item @b{st-bigbrick-esw} @expansion{} @code{st_brick_esw}, @pxref{st_brick}
 @item @b{st-bigbrick-ew} @expansion{} @code{st_brick_ew}, @pxref{st_brick}
 @item @b{st-bigbrick-n} @expansion{} @code{st_brick_n}, @pxref{st_brick}
+ at need 200
 @item @b{st-bigbrick-ne} @expansion{} @code{st_brick_ne}, @pxref{st_brick}
 @item @b{st-bigbrick-nes} @expansion{} @code{st_brick_nes}, @pxref{st_brick}
 @item @b{st-bigbrick-nesw} @expansion{} @code{st_brick_nesw}, @pxref{st_brick}
 @item @b{st-bigbrick-new} @expansion{} @code{st_brick_new}, @pxref{st_brick}
+ at need 200
 @item @b{st-bigbrick-ns} @expansion{} @code{st_brick_ns}, @pxref{st_brick}
 @item @b{st-bigbrick-nsw} @expansion{} @code{st_brick_nsw}, @pxref{st_brick}
 @item @b{st-bigbrick-nw} @expansion{} @code{st_brick_nw}, @pxref{st_brick}
 @item @b{st-bigbrick-s} @expansion{} @code{st_brick_s}, @pxref{st_brick}
+ at need 200
 @item @b{st-bigbrick-sw} @expansion{} @code{st_brick_sw}, @pxref{st_brick}
 @item @b{st-bigbrick-w} @expansion{} @code{st_brick_w}, @pxref{st_brick}
 @item @b{st-block} @expansion{} @ref{st_plop}
 @item @b{st-bombs} @expansion{} @code{st_dispenser_bombblack}, @pxref{st_dispenser}
+ at need 200
 @item @b{st-break_invisible} @expansion{} @code{st_ghost_break}, @pxref{st_ghost}
 @item @b{st-brick_magic} @expansion{} @code{st_magic_brick}, @pxref{st_magic}
 @item @b{st-brownie} @expansion{} @ref{st_brownie}
 @item @b{st-bug} @expansion{} @code{st_break_bug}, @pxref{st_break}
+ at need 200
 @item @b{st-bumps} @expansion{} @ref{st_pinkbumps}
 @item @b{st-camouflage} @expansion{} @ref{st_camouflage}
 @item @b{st-camouflage_hole} @expansion{} @code{st_camouflage_hollow}, @pxref{st_camouflage}
 @item @b{st-camouflage_move} @expansion{} @code{st_camouflage_movable}, @pxref{st_camouflage}
+ at need 200
 @item @b{st-chameleon} @expansion{} @ref{st_chameleon}
 @item @b{st-chargeminus} @expansion{} @code{st_charge_minus}, @pxref{st_charge}
 @item @b{st-chargeplus} @expansion{} @code{st_charge_plus}, @pxref{st_charge}
 @item @b{st-chargezero} @expansion{} @code{st_charge_zero}, @pxref{st_charge}
+ at need 200
 @item @b{st-chess} @expansion{} @ref{st_chess}
 @item @b{st-chess_black} @expansion{} @code{st_chess_black}, @pxref{st_chess}
 @item @b{st-chess_white} @expansion{} @code{st_chess_white}, @pxref{st_chess}
 @item @b{st-coffee} @expansion{} @code{st_magic_oxydc}, @pxref{st_magic}
+ at need 200
 @item @b{st-coinslot} @expansion{} @ref{st_coinslot}
 @item @b{st-death} @expansion{} @ref{st_death}
 @item @b{st-death_invisible} @expansion{} @code{st_death_invisible}, @pxref{st_death}
 @item @b{st-disco-dark} @expansion{} @code{st_disco_dark}, @pxref{st_disco}
+ at need 200
 @item @b{st-disco-light} @expansion{} @code{st_disco_light}, @pxref{st_disco}
 @item @b{st-disco-medium} @expansion{} @code{st_disco_medium}, @pxref{st_disco}
 @item @b{st-door_a} @expansion{} @code{st_door_a}, @pxref{st_door}
 @item @b{st-door_b} @expansion{} @code{st_door_b}, @pxref{st_door}
+ at need 200
 @item @b{st-door_c} @expansion{} @code{st_door_c}, @pxref{st_door}
 @item @b{st-door-h} @expansion{} @code{st_door_d, faces="ns"}, @pxref{st_door}
 @item @b{st-door-h-open} @expansion{} @code{st_door_d, faces="ns", state=OPEN}, @pxref{st_door}
 @item @b{st-door-v} @expansion{} @code{st_door_d, faces="ew"}, @pxref{st_door}
+ at need 200
 @item @b{st-door-v-open} @expansion{} @code{st_door_d, faces="ew", state=OPEN}, @pxref{st_door}
 @item @b{st-fakeoxyd} @expansion{} @code{st_fake_quake}, @pxref{st_fake}
 @item @b{st-fakeoxyda} @expansion{} @code{st_magic_oxyda}, @pxref{st_magic}
 @item @b{st-fart} @expansion{} @ref{st_quake}
+ at need 200
 @item @b{st-firebreak} @expansion{} @code{st_flat_burnable}, @pxref{st_flat}
 @item @b{st-firebreak_move} @expansion{} @code{st_flat_moveburnable}, @pxref{st_flat}
 @item @b{st-flash} @expansion{} @ref{st_flash}
 @item @b{st-flhay} @expansion{} @code{st_box_hay}, @pxref{st_box}
+ at need 200
 @item @b{st-floppy} @expansion{} @ref{st_floppy}
 @item @b{st-flrock} @expansion{} @code{st_box_rock}, @pxref{st_box}
 @item @b{st-fourswitch} @expansion{} @ref{st_fourswitch}
 @item @b{st-glass} @expansion{} @ref{st_rawglass}
+ at need 200
 @item @b{st-glass_move} @expansion{} @code{st_rawglass_movable}, @pxref{st_rawglass}
 @item @b{st-glass1} @expansion{} @ref{st_lightglass}
 @item @b{st-glass1_hole} @expansion{} @code{st_lightglass_hollow}, @pxref{st_lightglass}
 @item @b{st-glass1_move} @expansion{} @code{st_lightglass_movable}, @pxref{st_lightglass}
+ at need 200
 @item @b{st-glass2} @expansion{} @ref{st_darkglass}
 @item @b{st-glass2_hole} @expansion{} @code{st_darkglass_hollow}, @pxref{st_darkglass}
 @item @b{st-glass2_move} @expansion{} @code{st_darkglass_movable}, @pxref{st_darkglass}
 @item @b{st-glass3} @expansion{} @ref{st_redfiber}
+ at need 200
 @item @b{st-grate1} @expansion{} @code{st_grate_cross}, @pxref{st_grate}
 @item @b{st-grate2} @expansion{} @code{st_grate_framed}, @pxref{st_grate}
 @item @b{st-grate3} @expansion{} @code{st_portal_horse}, @pxref{st_portal}
 @item @b{st-greenbrown} @expansion{} @ref{st_greenbrown}
+ at need 200
 @item @b{st-greenbrown_hole} @expansion{} @code{st_greenbrown_hollow}, @pxref{st_greenbrown}
 @item @b{st-greenbrown_move} @expansion{} @code{st_greenbrown_movable}, @pxref{st_greenbrown}
 @item @b{st-invisible} @expansion{} @ref{st_invisible}
 @item @b{st-invisible_hole} @expansion{} @code{st_invisible_hollow}, @pxref{st_invisible}
+ at need 200
 @item @b{st-invisible_magic} @expansion{} @code{st_ghost_greenbrown}, @pxref{st_ghost}
 @item @b{st-invisible_move} @expansion{} @code{st_invisible_movable}, @pxref{st_invisible}
 @item @b{st-key} @expansion{} @code{st_key, code=0}, @pxref{st_key}
 @item @b{st-key_a} @expansion{} @code{st_key, code=1}, @pxref{st_key}
+ at need 200
 @item @b{st-key_b} @expansion{} @code{st_key, code=2}, @pxref{st_key}
 @item @b{st-key_c} @expansion{} @code{st_key, code=3}, @pxref{st_key}
 @item @b{st-knight} @expansion{} @ref{st_knight}
 @item @b{st-laserbreak} @expansion{} @code{st_break_laser}, @pxref{st_break}
+ at need 200
 @item @b{st-laserswitch} @expansion{} @ref{st_laserswitch}
 @item @b{st-lasertimeswitch} @expansion{} @ref{st_laserflop}
 @item @b{st-laser} @expansion{} @code{st_laser_e}, @pxref{st_laser}
 @item @b{st-laser-e} @expansion{} @code{st_laser_e}, @pxref{st_laser}
+ at need 200
 @item @b{st-laser-n} @expansion{} @code{st_laser_n}, @pxref{st_laser}
 @item @b{st-laser-s} @expansion{} @code{st_laser_s}, @pxref{st_laser}
 @item @b{st-laser-w} @expansion{} @code{st_laser_w}, @pxref{st_laser}
 @item @b{st-lightpassenger} @expansion{} @ref{st_lightpassenger}
+ at need 200
 @item @b{st-lightpassenger_off} @expansion{} @code{st_lightpassenger_off}, @pxref{st_lightpassenger}
 @item @b{st-likeoxyda} @expansion{} @code{st_fake_oxyda}, @pxref{st_fake}
 @item @b{st-likeoxyda-open} @expansion{} @code{st_fake_oxyda, state=OPEN}, @pxref{st_fake}
 @item @b{st-likeoxydb} @expansion{} @code{st_fake_oxydb}, @pxref{st_fake}
+ at need 200
 @item @b{st-likeoxydb-open} @expansion{} @code{st_fake_oxydb, state=OPEN}, @pxref{st_fake}
 @item @b{st-likeoxydc} @expansion{} @code{st_fake_oxydc}, @pxref{st_fake}
 @item @b{st-likeoxydc-open} @expansion{} @code{st_fake_oxydc, state=OPEN}, @pxref{st_fake}
 @item @b{st-likeoxydd} @expansion{} @code{st_fake_oxydd}, @pxref{st_fake}
+ at need 200
 @item @b{st-likeoxydd-open} @expansion{} @code{st_fake_oxydd, state=OPEN}, @pxref{st_fake}
 @item @b{st-mail-e} @expansion{} @code{st-mail-e}, @pxref{st-mail}
 @item @b{st-mail-n} @expansion{} @code{st-mail-n}, @pxref{st-mail}
 @item @b{st-mail-s} @expansion{} @code{st-mail-s}, @pxref{st-mail}
+ at need 200
 @item @b{st-mail-w} @expansion{} @code{st-mail-w}, @pxref{st-mail}
 @item @b{st-marble} @expansion{} @ref{st_redbrown}
 @item @b{st-marble_hole} @expansion{} @code{st_redbrown_hollow}, @pxref{st_redbrown}
 @item @b{st-marble_move} @expansion{} @code{st_redbrown_movable}, @pxref{st_redbrown}
+ at need 200
 @item @b{st-metal} @expansion{} @ref{st_metal}
 @item @b{st-metal_hole} @expansion{} @code{st_metal_hollow}, @pxref{st_metal}
 @item @b{st-mirror-p|} @expansion{} @code{st_mirror_slab_n}, @pxref{st_mirror}
 @item @b{st-mirror-p/} @expansion{} @code{st_mirror_slab_e}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-p-} @expansion{} @code{st_mirror_slab_s}, @pxref{st_mirror}
 @item @b{st-mirror-p\\} @expansion{} @code{st_mirror_slab_w}, @pxref{st_mirror}
 @item @b{st-mirror-p|t} @expansion{} @code{st_mirror_slab_nt}, @pxref{st_mirror}
 @item @b{st-mirror-p/t} @expansion{} @code{st_mirror_slab_et}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-p-t} @expansion{} @code{st_mirror_slab_st}, @pxref{st_mirror}
 @item @b{st-mirror-p\\t} @expansion{} @code{st_mirror_slab_wt}, @pxref{st_mirror}
 @item @b{st-mirror-p|m} @expansion{} @code{st_mirror_slab_nm}, @pxref{st_mirror}
 @item @b{st-mirror-p/m} @expansion{} @code{st_mirror_slab_em}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-p-m} @expansion{} @code{st_mirror_slab_sm}, @pxref{st_mirror}
 @item @b{st-mirror-p\\m} @expansion{} @code{st_mirror_slab_wm}, @pxref{st_mirror}
 @item @b{st-mirror-p|tm} @expansion{} @code{st_mirror_slab_ntm}, @pxref{st_mirror}
 @item @b{st-mirror-p/tm} @expansion{} @code{st_mirror_slab_etm}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-p-tm} @expansion{} @code{st_mirror_slab_stm}, @pxref{st_mirror}
 @item @b{st-mirror-p\\tm} @expansion{} @code{st_mirror_slab_wtm}, @pxref{st_mirror}
 @item @b{st-mirror-3^} @expansion{} @code{st_mirror_triangle_n}, @pxref{st_mirror}
 @item @b{st-mirror-3>} @expansion{} @code{st_mirror_triangle_e}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-3v} @expansion{} @code{st_mirror_triangle_s}, @pxref{st_mirror}
 @item @b{st-mirror-3<} @expansion{} @code{st_mirror_triangle_w}, @pxref{st_mirror}
 @item @b{st-mirror-3^t} @expansion{} @code{st_mirror_triangle_nt}, @pxref{st_mirror}
 @item @b{st-mirror-3>t} @expansion{} @code{st_mirror_triangle_et}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-3vt} @expansion{} @code{st_mirror_triangle_st}, @pxref{st_mirror}
 @item @b{st-mirror-3<t} @expansion{} @code{st_mirror_triangle_wt}, @pxref{st_mirror}
 @item @b{st-mirror-3^m} @expansion{} @code{st_mirror_triangle_nm}, @pxref{st_mirror}
 @item @b{st-mirror-3>m} @expansion{} @code{st_mirror_triangle_em}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-3vm} @expansion{} @code{st_mirror_triangle_sm}, @pxref{st_mirror}
 @item @b{st-mirror-3<m} @expansion{} @code{st_mirror_triangle_wm}, @pxref{st_mirror}
 @item @b{st-mirror-3^tm} @expansion{} @code{st_mirror_triangle_ntm}, @pxref{st_mirror}
 @item @b{st-mirror-3>tm} @expansion{} @code{st_mirror_triangle_etm}, @pxref{st_mirror}
+ at need 200
 @item @b{st-mirror-3vtm} @expansion{} @code{st_mirror_triangle_stm}, @pxref{st_mirror}
 @item @b{st-mirror-3<tm} @expansion{} @code{st_mirror_triangle_wtm}, @pxref{st_mirror}
 @item @b{st-oneway} @expansion{} @ref{st_oneway}
 @item @b{st-oneway_black"} @expansion{} @code{st_oneway_black}, @pxref{st_oneway}
+ at need 200
 @item @b{st-oneway_black-e"} @expansion{} @code{st_oneway_black_e}, @pxref{st_oneway}
 @item @b{st-oneway_black-n"} @expansion{} @code{st_oneway_black_n}, @pxref{st_oneway}
 @item @b{st-oneway_black-s"} @expansion{} @code{st_oneway_black_s}, @pxref{st_oneway}
 @item @b{st-oneway_black-w"} @expansion{} @code{st_oneway_black_w}, @pxref{st_oneway}
+ at need 200
 @item @b{st-oneway-e"} @expansion{} @code{st_oneway_e}, @pxref{st_oneway}
 @item @b{st-oneway-n"} @expansion{} @code{st_oneway_n}, @pxref{st_oneway}
 @item @b{st-oneway-s"} @expansion{} @code{st_oneway_s}, @pxref{st_oneway}
 @item @b{st-oneway-w"} @expansion{} @code{st_oneway_w}, @pxref{st_oneway}
+ at need 200
 @item @b{st-oneway_white"} @expansion{} @code{st_oneway_white}, @pxref{st_oneway}
 @item @b{st-oneway_white-e"} @expansion{} @code{st_oneway_white_e}, @pxref{st_oneway}
 @item @b{st-oneway_white-n"} @expansion{} @code{st_oneway_white_n}, @pxref{st_oneway}
 @item @b{st-oneway_white-s"} @expansion{} @code{st_oneway_white_s}, @pxref{st_oneway}
+ at need 200
 @item @b{st-oneway_white-w"} @expansion{} @code{st_oneway_white_w}, @pxref{st_oneway}
 @item @b{st-oxyd} @expansion{} @ref{st_oxyd}
 @item @b{st-plain} @expansion{} @ref{st_flat}
 @item @b{st-plain_break} @expansion{} @code{st_flat_breakable}, @pxref{st_flat}
+ at need 200
 @item @b{st-plain_cracked} @expansion{} @code{st_flat_cracked}, @pxref{st_flat}
 @item @b{st-plain_hole} @expansion{} @code{st_flat_hollow}, @pxref{st_flat}
 @item @b{st-plain_move} @expansion{} @code{st_flat_movable}, @pxref{st_flat}
 @item @b{st-pmirror} @expansion{} @code{st_mirror_slab_e}, @pxref{st_mirror}
+ at need 200
 @item @b{st-polarswitch} @expansion{} @ref{st_polarswitch}
 @item @b{st-pull} @expansion{} @ref{st_pull}
 @item @b{st-puzzle} @expansion{} @ref{st_puzzle}
 @item @b{st-puzzle-e} @expansion{} @code{st_puzzle_blue_e}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle-es} @expansion{} @code{st_puzzle_blue_es}, @pxref{st_puzzle}
 @item @b{st-puzzle-esw} @expansion{} @code{st_puzzle_blue_esw}, @pxref{st_puzzle}
 @item @b{st-puzzle-ew} @expansion{} @code{st_puzzle_blue_ew}, @pxref{st_puzzle}
 @item @b{st-puzzle-hollow} @expansion{} @code{st_puzzle_blue_nesw_hollow}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle-n} @expansion{} @code{st_puzzle_blue_n}, @pxref{st_puzzle}
 @item @b{st-puzzle-ne} @expansion{} @code{st_puzzle_blue_ne}, @pxref{st_puzzle}
 @item @b{st-puzzle-nes} @expansion{} @code{st_puzzle_blue_nes}, @pxref{st_puzzle}
 @item @b{st-puzzle-nesw} @expansion{} @code{st_puzzle_blue_nesw}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle-new} @expansion{} @code{st_puzzle_blue_new}, @pxref{st_puzzle}
 @item @b{st-puzzle-ns} @expansion{} @code{st_puzzle_blue_ns}, @pxref{st_puzzle}
 @item @b{st-puzzle-nsw} @expansion{} @code{st_puzzle_blue_nsw}, @pxref{st_puzzle}
 @item @b{st-puzzle-nw} @expansion{} @code{st_puzzle_blue_nw}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle-s} @expansion{} @code{st_puzzle_blue_s}, @pxref{st_puzzle}
 @item @b{st-puzzle-sw} @expansion{} @code{st_puzzle_blue_sw}, @pxref{st_puzzle}
 @item @b{st-puzzle-w} @expansion{} @code{st_puzzle_blue_w}, @pxref{st_puzzle}
 @item @b{st-puzzle2-e} @expansion{} @code{st_puzzle_yellow_e}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle2-es} @expansion{} @code{st_puzzle_yellow_es}, @pxref{st_puzzle}
 @item @b{st-puzzle2-esw} @expansion{} @code{st_puzzle_yellow_esw}, @pxref{st_puzzle}
 @item @b{st-puzzle2-ew} @expansion{} @code{st_puzzle_yellow_ew}, @pxref{st_puzzle}
 @item @b{st-puzzle2-hollow} @expansion{} @code{st_puzzle_yellow_nesw_hollow}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle2-n} @expansion{} @code{st_puzzle_yellow_n}, @pxref{st_puzzle}
 @item @b{st-puzzle2-ne} @expansion{} @code{st_puzzle_yellow_ne}, @pxref{st_puzzle}
 @item @b{st-puzzle2-nes} @expansion{} @code{st_puzzle_yellow_nes}, @pxref{st_puzzle}
 @item @b{st-puzzle2-nesw} @expansion{} @code{st_puzzle_yellow_nesw}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle2-new} @expansion{} @code{st_puzzle_yellow_new}, @pxref{st_puzzle}
 @item @b{st-puzzle2-ns} @expansion{} @code{st_puzzle_yellow_ns}, @pxref{st_puzzle}
 @item @b{st-puzzle2-nsw} @expansion{} @code{st_puzzle_yellow_nsw}, @pxref{st_puzzle}
 @item @b{st-puzzle2-nw} @expansion{} @code{st_puzzle_yellow_nw}, @pxref{st_puzzle}
+ at need 200
 @item @b{st-puzzle2-s} @expansion{} @code{st_puzzle_yellow_s}, @pxref{st_puzzle}
 @item @b{st-puzzle2-sw} @expansion{} @code{st_puzzle_yellow_sw}, @pxref{st_puzzle}
 @item @b{st-puzzle2-w} @expansion{} @code{st_puzzle_yellow_w}, @pxref{st_puzzle}
 @item @b{st-redrock} @expansion{} @ref{st_redrock}
+ at need 200
 @item @b{st-rock1} @expansion{} @ref{st_granite}
 @item @b{st-rock1_hole} @expansion{} @code{st_granite_hollow}, @pxref{st_granite}
 @item @b{st-rock1_move} @expansion{} @code{st_granite_movable}, @pxref{st_granite}
 @item @b{st-rock2} @expansion{} @ref{st_darkgray}
+ at need 200
 @item @b{st-rock2_hole} @expansion{} @code{st_darkgray_hollow}, @pxref{st_darkgray}
 @item @b{st-rock3} @expansion{} @ref{st_plaster}
 @item @b{st-rock3_break} @expansion{} @code{st_plaster_breakable}, @pxref{st_plaster}
 @item @b{st-rock3_hole} @expansion{} @code{st_plaster_hollow}, @pxref{st_plaster}
+ at need 200
 @item @b{st-rock3_move} @expansion{} @code{st_plaster_movable}, @pxref{st_plaster}
 @item @b{st-rock3_movebreak} @expansion{} @code{st_plaster_movebreakable}, @pxref{st_plaster}
 @item @b{st-rock4} @expansion{} @ref{st_purplemarble}
 @item @b{st-rock5} @expansion{} @ref{st_tigris}
+ at need 200
 @item @b{st-rock6} @expansion{} @ref{st_purplegray}
 @item @b{st-rock7} @expansion{} @ref{st_greengray}
 @item @b{st-rock8} @expansion{} @ref{st_concrete}
 @item @b{st-rock9} @expansion{} @ref{st_ancient}
+ at need 200
 @item @b{st-rock10} @expansion{} @ref{st_brownmarble}
 @item @b{st-rotator-left} @expansion{} @code{st_rotator_ccw}, @pxref{st_rotator}
 @item @b{st-rotator_move-left} @expansion{} @code{st_rotator_ccw_movable}, @pxref{st_rotator}
 @item @b{st-rotator_move-right} @expansion{} @code{st_rotator_cw_movable}, @pxref{st_rotator}
+ at need 200
 @item @b{st-rotator-right} @expansion{} @code{st_rotator_cw}, @pxref{st_rotator}
 @item @b{st-rubberband} @expansion{} @ref{st_rubberband}
 @item @b{st-scissors} @expansion{} @code{st_scissors, inverse=true}, @pxref{st_scissors}
 @item @b{st-shogun} @expansion{} @ref{st_shogun}
+ at need 200
 @item @b{st-shogun-l} @expansion{} @code{st_shogun_l}, @pxref{st_shogun}
 @item @b{st-shogun-m} @expansion{} @code{st_shogun_m}, @pxref{st_shogun}
 @item @b{st-shogun-ml} @expansion{} @code{st_shogun_ml}, @pxref{st_shogun}
 @item @b{st-shogun-s} @expansion{} @code{st_shogun_s}, @pxref{st_shogun}
+ at need 200
 @item @b{st-shogun-sl} @expansion{} @code{st_shogun_sl}, @pxref{st_shogun}
 @item @b{st-shogun-sm} @expansion{} @code{st_shogun_sm}, @pxref{st_shogun}
 @item @b{st-shogun-sml} @expansion{} @code{st_shogun_sml}, @pxref{st_shogun}
 @item @b{st-spitter} @expansion{} @ref{st_spitter}
+ at need 200
 @item @b{st-stonebrush} @expansion{} @code{st_ghost_purplemarble}, @pxref{st_ghost}
 @item @b{st-stoneimpulse} @expansion{} @ref{st_stoneimpulse}
 @item @b{st-stoneimpulse-hollow} @expansion{} @code{st_stoneimpulse_hollow}, @pxref{st_stoneimpulse}
 @item @b{st-stoneimpulse_movable} @expansion{} @code{st_stoneimpulse_movable}, @pxref{st_stoneimpulse}
+ at need 200
 @item @b{st-stone1} @expansion{} @ref{st_brownpyramide}
 @item @b{st-stone2} @expansion{} @ref{st_redmarble}
 @item @b{st-stone_break} @expansion{} @code{st_break_oxydc}, @pxref{st_break}
 @item @b{st-surprise} @expansion{} @ref{st_surprise}
+ at need 200
 @item @b{st-swap} @expansion{} @ref{st_swap}
 @item @b{st-switch} @expansion{} @code{st_switch, instant=true}, @pxref{st_switch}
 @item @b{st-switch_black} @expansion{} @code{st_switch_black, instant=true}, @pxref{st_switch}
 @item @b{st-switch_white} @expansion{} @code{st_switch_white, instant=true}, @pxref{st_switch}
+ at need 200
 @item @b{st-thief} @expansion{} @ref{st_thief}
 @item @b{st-timer} @expansion{} @ref{st_timer}
 @item @b{st-timeswitch} @expansion{} @ref{st_monoflop}
 @item @b{st-turnstile} @expansion{} @code{st_turnstile_red}, @pxref{st_turnstile}
+ at need 200
 @item @b{st-turnstile-green} @expansion{} @code{st_turnstile_green}, @pxref{st_turnstile}
 @item @b{st-turnstile-e} @expansion{} @code{st_turnstilearm_e}, @pxref{st_turnstilearm}
 @item @b{st-turnstile-n} @expansion{} @code{st_turnstilearm_n}, @pxref{st_turnstilearm}
 @item @b{st-turnstile-s} @expansion{} @code{st_turnstilearm_s}, @pxref{st_turnstilearm}
+ at need 200
 @item @b{st-turnstile-w} @expansion{} @code{st_turnstilearm_w}, @pxref{st_turnstilearm}
 @item @b{st-volcano} @expansion{} @ref{st_volcano}
 @item @b{st-volcano_active} @expansion{} @code{st_volcano_active}, @pxref{st_volcano}
 @item @b{st-volcano-growing} @expansion{} @code{st_volcano_new}, @pxref{st_volcano}
+ at need 200
 @item @b{st-volcano_inactive} @expansion{} @code{st_volcano_idle}, @pxref{st_volcano}
 @item @b{st-whiteballs} @expansion{} @code{st_jamb_white}, @pxref{st_jamb}
 @item @b{st-white1} @expansion{} @code{st_passage_white_square}, @pxref{st_passage}
 @item @b{st-white2} @expansion{} @code{st_passage_white_slash}, @pxref{st_passage}
+ at need 200
 @item @b{st-white3} @expansion{} @code{st_passage_white_cross}, @pxref{st_passage}
 @item @b{st-white4} @expansion{} @code{st_passage_white_frame}, @pxref{st_passage}
 @item @b{st-window} @expansion{} @ref{st-window}
 @item @b{st-wood} @expansion{} @code{st_box_wood}, @pxref{st_box}
+ at need 200
 @item @b{st-wood1} @expansion{} @code{st_box_wood_h}, @pxref{st_box}
 @item @b{st-wood2} @expansion{} @code{st_box_wood_v}, @pxref{st_box}
 @item @b{st-wood-growing} @expansion{} @code{st_box_wood_growing}, @pxref{st_box}
 @item @b{st-wood_001} @expansion{} @ref{st_panel}
+ at need 200
 @item @b{st-woven} @expansion{} @ref{st_woven}
 @item @b{st-yellow} @expansion{} @ref{st_yellow}
 @item @b{st-yinyang1} @expansion{} @code{st_blur_cross}, @pxref{st_blur}
 @item @b{st-yinyang2} @expansion{} @code{st_blur_straight}, @pxref{st_blur}
+ at need 200
 @item @b{st-yinyang3} @expansion{} @code{st_blur_magic}, @pxref{st_blur}
 @item @b{st-3mirror} @expansion{} @code{st_mirror_triangle_s}, @pxref{st_mirror}
 @end table

Modified: trunk/src/WorldProxy.cc
===================================================================
--- trunk/src/WorldProxy.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/WorldProxy.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -102,7 +102,7 @@
             return server::SlopeForce;
         } else if (key == "SwampSinkTime") {
             if (server::SwampSinkSpeed > 0) {
-                if (server::SwampSinkSpeed >= 1000)
+                if (server::SwampSinkSpeed >= 10000)
                     return 0;
                 else
                     return 7.0 / server::SwampSinkSpeed;
@@ -110,7 +110,7 @@
                 return Value();  // infinite time
         } else if (key == "WaterSinkTime") {
             if (server::WaterSinkSpeed > 0) {
-                if (server::WaterSinkSpeed >= 1000)
+                if (server::WaterSinkSpeed >= 10000)
                     return 0;
                 else
                     return 7.0 / server::WaterSinkSpeed;
@@ -208,7 +208,7 @@
             if (val.getType() == Value::NIL)
                 server::SwampSinkSpeed = 0;
             else if ((double)val == 0)
-                server::SwampSinkSpeed = 1000;
+                server::SwampSinkSpeed = 10000;
             else {
                 ASSERT((double)val > 0, XLevelRuntime, "SwampSinkTime less zero");
                 server::SwampSinkSpeed = 7.0 / (double)val;
@@ -217,7 +217,7 @@
             if (val.getType() == Value::NIL)
                 server::WaterSinkSpeed = 0;
             else if ((double)val == 0)
-                server::WaterSinkSpeed = 1000;
+                server::WaterSinkSpeed = 10000;
             else {
                 ASSERT((double)val > 0, XLevelRuntime, "SwampSinkTime less zero");
                 server::WaterSinkSpeed = 7.0 / (double)val;

Modified: trunk/src/actors/Balls.cc
===================================================================
--- trunk/src/actors/Balls.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/actors/Balls.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -122,15 +122,15 @@
             if (m.message == "_shield" && getAttr("owner") ==  m.value) {
                 m_shield_rest_time += SHIELD_TIME;
                 update_halo();
-                handled = true;
+                return true;
             }
             else if (m.message == "_invisibility") {
                 m_invisible_rest_time += 8.0;
-                handled = true;
+                return true;
             }
             else if (m.message == "_booze") {
                 m_drunk_rest_time += 5.0; // Drunken for 5 more seconds
-                handled = true;
+                return true;
             }
         }
     

Modified: trunk/src/items/Bottle.cc
===================================================================
--- trunk/src/items/Bottle.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/items/Bottle.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -64,7 +64,8 @@
     
     ItemAction Bottle::activate(Actor *a, GridPos) {
         if (state == IDLE) {
-            SendMessage(a, "_booze");
+            if (!SendMessage(a, "_booze").to_bool())
+                return ITEM_KEEP;
         }
         return ITEM_DROP;
     }

Modified: trunk/src/items/Coin.cc
===================================================================
--- trunk/src/items/Coin.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/items/Coin.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -67,6 +67,7 @@
     };
 
     BOOT_REGISTER_START
+        BootRegister(new Coin(0), "it_coin");
         BootRegister(new Coin(0), "it_coin_s");
         BootRegister(new Coin(1), "it_coin_m");
         BootRegister(new Coin(2), "it_coin_l");

Modified: trunk/src/items/PullerItem.cc
===================================================================
--- trunk/src/items/PullerItem.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/items/PullerItem.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -63,7 +63,7 @@
         }
         
         sound_event ("dynamite");
-        replace("it-explosion1");
+        replace("it_explosion_nil");
     }
     
     bool PullerItem::isStatic() const {

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/items/SimpleItems.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -64,13 +64,20 @@
     }
     
     ItemAction Cherry::activate(Actor *actor, GridPos p) {
-        SendMessage(actor, "_invisibility");
-        return ITEM_KILL;
+        if (SendMessage(actor, "_invisibility").to_bool())
+            return ITEM_KILL;
+        else
+            // item not applied - dropped by an actor that does not become invisible
+            return ITEM_DROP;
     }
 
     void Cherry::on_stonehit(Stone *) {
         transform("it_squashed");
     }
+    
+    void Cherry::on_drop(Actor *a) {
+        transform("it_squashed");        
+    }
 
     DEF_ITEMTRAITS(Cherry, "it_cherry", it_cherry);
 
@@ -126,6 +133,10 @@
         // no state writes
     }
     
+    void Explosion::init_model() {
+        set_anim("it_explosion");
+    }
+    
     void Explosion::animcb() { 
         Floor *fl = GetFloor(get_pos());
         if (state != 0 && fl->is_destructible())
@@ -140,12 +151,16 @@
      }
 
     bool Explosion::actor_hit(Actor *actor) {
-        SendMessage(actor, "shatter");
+        SendMessage(actor, "_shatter");
         return false;
     }
      
-    DEF_ITEMTRAITSF(Explosion, "it_explosion", it_explosion, itf_static |
-                itf_animation | itf_indestructible | itf_norespawn | itf_fireproof);
+    ItemTraits Explosion::traits[4] = {
+        {"it_explosion_nil",  it_explosion_nil, itf_static | itf_animation | itf_indestructible | itf_norespawn | itf_fireproof, 0.0},
+        {"it_explosion_hollow",  it_explosion_hollow, itf_static | itf_animation | itf_indestructible | itf_norespawn | itf_fireproof, 0.0},
+        {"it_explosion_crack",  it_explosion_crack, itf_static | itf_animation | itf_indestructible | itf_norespawn | itf_fireproof, 0.0},
+        {"it_explosion_debris",  it_explosion_debris, itf_static | itf_animation | itf_indestructible | itf_norespawn | itf_fireproof, 0.0},
+    };
 
 /* -------------------- Flag -------------------- */
 
@@ -311,7 +326,7 @@
         double ycenter = get_pos().y + 0.5;
         double xcenter = get_pos().x + 0.5;
         ecl::V2 apos = a->get_pos();
-        if ((fabs(apos[1] - ycenter) <= MAXDIST) && (fabs(apos[0] - xcenter) <= MAXDIST)) {
+        if (a->is_on_floor() && (fabs(apos[1] - ycenter) <= MAXDIST) && (fabs(apos[0] - xcenter) <= MAXDIST)) {
             set_anim("it_springboard_anim");
             SendMessage(a, "_jump");
         }
@@ -410,6 +425,7 @@
         BootRegister(new Coffee(), "it_coffee");
         BootRegister(new DeathItem(), "it_death");
         BootRegister(new Debris(), "it_debris");
+        BootRegister(new Explosion(0), "it_explosion");
         BootRegister(new Explosion(0), "it_explosion_nil");
         BootRegister(new Explosion(1), "it_explosion_hollow");
         BootRegister(new Explosion(2), "it_explosion_crack");

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/items/SimpleItems.hh	2009-02-11 23:19:41 UTC (rev 1532)
@@ -70,6 +70,7 @@
         // Item interface
         virtual ItemAction activate(Actor* a, GridPos p);
         virtual void on_stonehit(Stone *st);
+        virtual void on_drop(Actor *a);
     };
     
     /**
@@ -116,7 +117,7 @@
      */
     class Explosion : public Item {
         CLONEOBJ(Explosion);
-        DECL_ITEMTRAITS;
+        DECL_ITEMTRAITS_ARRAY(4, state);
 
     public:
         Explosion(int strength);
@@ -124,6 +125,9 @@
         // StateObject interface
         virtual void setState(int extState);
         
+        // GridObject interface
+        virtual void init_model();
+        
         // ModelCallback interface
         virtual void animcb();
         
@@ -141,8 +145,8 @@
         FlagItem(int type);
         
         // Item interface
-       virtual void on_drop(Actor *a);
-       virtual void on_pickup(Actor *a);
+        virtual void on_drop(Actor *a);
+        virtual void on_pickup(Actor *a);
         
     private:
         int traitsIdx() const;

Modified: trunk/src/items.hh
===================================================================
--- trunk/src/items.hh	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/items.hh	2009-02-11 23:19:41 UTC (rev 1532)
@@ -64,7 +64,10 @@
         it_dummy,
         it_easykeepstone,
         it_easykillstone,
-        it_explosion,
+        it_explosion_nil,
+        it_explosion_hollow,
+        it_explosion_crack,
+        it_explosion_debris,
         it_exitsensor,
         it_extinguisher,
         it_extinguisher_medium,

Modified: trunk/src/ox_extra.cc
===================================================================
--- trunk/src/ox_extra.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/ox_extra.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -123,7 +123,7 @@
     UNUSED,              // OxydExtra floor 0x56
     UNUSED,              // OxydExtra floor 0x57
     UNUSED,              // OxydExtra floor 0x58
-    "fl_trigger",        // OxydExtra floor 0x59
+    "fl_fake_trigger",   // OxydExtra floor 0x59
     UNUSED,              // OxydExtra floor 0x5a
     "fl_gravel",         // OxydExtra floor 0x5b
     // codes >= 0x5c are unused

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/server.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -273,7 +273,7 @@
     server::ExtralifeGlasses  = 19;  // death + hollow + lightpassenger
     server::ElectricForce     = 15.0;
     server::BumperForce       = 200.0;
-    server::WaterSinkSpeed    = 1000;
+    server::WaterSinkSpeed    = 10000;
     server::SwampSinkSpeed    = 4;
     server::MagnetForce       = 30;
     server::MagnetRange       = 10;

Modified: trunk/src/stones/VolcanoStone.cc
===================================================================
--- trunk/src/stones/VolcanoStone.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/stones/VolcanoStone.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -146,7 +146,7 @@
     }
 
     void VolcanoStone::actor_inside(Actor *a) {
-        if (state != NEW)
+        if (state == GROWING || state == ACTIVE || state == BREAKING)
             SendMessage(a, "_shatter");
     }
     

Modified: trunk/src/stones/WindowStone.cc
===================================================================
--- trunk/src/stones/WindowStone.cc	2009-02-10 23:38:53 UTC (rev 1531)
+++ trunk/src/stones/WindowStone.cc	2009-02-11 23:19:41 UTC (rev 1532)
@@ -171,7 +171,7 @@
                 } else if (sc.faces == NORTHBIT && sc.normal[1] < 0) {
                     tryInnerPull(SOUTH, a);
                 }
-            } else if (player::WieldedItemIs (sc.actor, "it-ring")) {
+            } else if (player::WieldedItemIs (sc.actor, "it_ring")) {
                 objFlags |= ((sc.faces & getFaces())<< 24);   // scratch face
                 sound_event("crack");
                 init_model();



From andreasl at mail.berlios.de  Fri Feb 13 22:54:13 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Fri, 13 Feb 2009 22:54:13 +0100
Subject: [Enigma-game-svn] r1533 - in homepage/input: . articles
Message-ID: <200902132154.n1DLsDpP007505@sheep.berlios.de>

Author: andreasl
Date: 2009-02-13 22:54:08 +0100 (Fri, 13 Feb 2009)
New Revision: 1533

Added:
   homepage/input/articles/marbleous_4.html
   homepage/input/articles/marbleous_4_de.html
Modified:
   homepage/input/articles/infobox_marbleous.html
   homepage/input/articles/infobox_marbleous_de.html
   homepage/input/articles/infobox_marbleous_ru.html
   homepage/input/infobox.html
   homepage/input/infobox_de.html
   homepage/input/infobox_ru.html
   homepage/input/menu.html
   homepage/input/menu_de.html
   homepage/input/menu_ru.html
   homepage/input/output-files.lua
Log:
Homepage:
 - Added "Marbleous 4" in German and English
 - New Infobox-entry for first Enigma trailer
Todo:
 - Russian translation (infobox, marbleous_4, infobox_marbleous,
   and menu (entry "trailer"))
 - Rename trailer to "EnigmaTrailer1.flv" (or adapt link in output-files.lua)
 - Correct link to Computer Bild Spiele and add icon (will come soon)
 - Validation, Upload


Modified: homepage/input/articles/infobox_marbleous.html
===================================================================
--- homepage/input/articles/infobox_marbleous.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/articles/infobox_marbleous.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -7,5 +7,7 @@
          <a href="$$marbleous_2$$">Part 2: <br>&quot;Easy?&quot; &mdash; Dragging the Boxes</a>
          <br><br>
          <a href="$$marbleous_3$$">Part 3: <br>&quot;Make the tools you need!&quot; is the motto in &quot;Do it yourself&quot;</a>
+         <br><br>
+         <a href="$$marbleous_4$$">Part 4: <br>Alcatraz: Get out of the straightjackets of this world</a>
        </div>
     </div>

Modified: homepage/input/articles/infobox_marbleous_de.html
===================================================================
--- homepage/input/articles/infobox_marbleous_de.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/articles/infobox_marbleous_de.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -7,5 +7,7 @@
          <a href="$$marbleous_2$$">Teil 2: <br>&quot;Easy?&quot; &mdash; Vom Kistenschleppen</a>
          <br><br>
          <a href="$$marbleous_3$$">Teil 3: <br>&quot;Make the tools you need!&quot; hei&szlig;t es in &quot;Do it yourself&quot;</a>       
+         <br><br>
+         <a href="$$marbleous_4$$">Teil 4: <br>Alcatraz: Raus aus den Zwangsjacken dieser Welt</h3>
        </div>
     </div>

Modified: homepage/input/articles/infobox_marbleous_ru.html
===================================================================
--- homepage/input/articles/infobox_marbleous_ru.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/articles/infobox_marbleous_ru.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -7,5 +7,7 @@
          <a href="$$marbleous_2$$">????? 2: <br>&quot;Easy?&quot; &mdash; ?????????????? ??????</a>
          <br><br>
          <a href="$$marbleous_3$$">????? 3: <br>????? &quot;?????? ???&quot;: &quot;?????? ?????? ???? ???????????!&quot;</a>
+         <br><br>
+         <a href="$$marbleous_4$$">????? 4: <br>Alcatraz: Get out of the straightjackets of this world</a>
        </div>
     </div>

Added: homepage/input/articles/marbleous_4.html
===================================================================
--- homepage/input/articles/marbleous_4.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/articles/marbleous_4.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -0,0 +1,22 @@
+
+<h2>Marbleous!</h2>
+
+<h3>The Novice &mdash; Alcatraz: Get out of the straightjackets of this world</h3>
+
+<p>
+Alcatraz &ndash; symbol of incarceration &ndash; but also for outbreak, release &ndash; here
+in Enigma a wonderful level. Combine the provided stones, until the releasing &quot;hole&quot;
+in the wall lets you out. A nice metapher. Ronald's &quot;Houdini&quot; as another terrific
+example of Enigmian escapology: The marble, tied up and surrounded by thieves, who want to
+take from you even your last belongings: Be an acrobat, dare it, risk the jump. Tame the
+horses, use their jumping powers, get the keys and open the all-obstructive doors: NO
+TRESPASSING! Supply yourself with the freedom you need. Reorder things. In &quot;Map It
+Out&quot;, escape is futile, combination and orientation lead you to success in this
+&quot;faceless&quot; extreme maze. The list of labyrinths, mazes, castles, temples,
+thieves' lairs can be extended: Have fun! And when you succeeded with your way into
+freedom, and reached the oxyds: Level won! Let's get into the next &quot;challenge&quot;.
+</p>
+
+<p><i>
+Mecke
+</i></p>

Added: homepage/input/articles/marbleous_4_de.html
===================================================================
--- homepage/input/articles/marbleous_4_de.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/articles/marbleous_4_de.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -0,0 +1,24 @@
+
+<h2>Gemurmel!</h2>
+
+<h3>Der Neuling &mdash; Alcatraz: Raus aus den Zwangsjacken dieser Welt</h3>
+
+<p>
+Alcatraz &ndash; Symbol der Einkerkerung &ndash; aber auch f&uuml;r Ausbruch, Befreiung &ndash; hier in 
+Enigma ein herrlicher Level. Kombiniere die angebotenen Steine, bis das befreiende &quot;Loch&quot; in 
+der Wand dich herausl&auml;sst. Eine sch&ouml;ne Metapher. Ronalds &quot;Houdini&quot; als weiteres 
+grandioses Beispiel Enigmanischer Entfesselungskunst: die Kugel, festgebunden und von Dieben umzingelt 
+&ndash; die dir auch noch das letzte bi&szlig;chen wegnehmen wollen: Sei ein Akrobat, trau dich, wage 
+den Sprung. Z&auml;hme die Pferde, nutze Ihre Sprungkraft, hole die Schl&uuml;ssel und &ouml;ffne diese 
+alles versperrenden Tore: NO TRESPASSING! Verschaffe Dir die Freiheit, die du brauchst. Ordne die Dinge 
+neu. In &quot;Map It Out&quot; ist jeder Ausbruch zwecklos, Kombinationsgabe und Orientierung
+f&uuml;hren dich zu diesem &quot;gesichtslosen&quot; Extremlabyrinth zum Erfolg. Die Liste von Labyrinthen, Irrg
+&auml;rten, Festungen, Tempeln, Diebesh&ouml;hlen l&auml;sst sich weiter fortsetzen: Viel Spa&szlig;! 
+Und wem der Gang in die &quot;Freiheit&quot; zum Oxyd gegl&uuml;ckt ist &ndash; winkt dann: Level 
+geschafft! Hinein in die n&auml;chste &quot;Herausforderung&quot;. 
+</p>
+
+<p><i>
+Mecke
+</i></p>
+

Modified: homepage/input/infobox.html
===================================================================
--- homepage/input/infobox.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/infobox.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -1,9 +1,13 @@
     <div class="infobody">
        <div class="info">
          <h3>Marbleous!</h3>
-         Read <a href="$$marbleous_3$$">here</a> about the newest adventure of
+         Read <a href="$$marbleous_4$$">here</a> about the newest adventure of
          our &quot;novice&quot;, his experiences and thoughts!
 
+         <h3>First Trailer</h3>
+         Mecke and Clifford created the first trailer for Enigma, 
+         see the video <a href="$$trailer_1$$">here</a>, have fun!
+
          <h3>End-of-Year Awards</h3>
          <a href="$$eoya_2008$$"><img src="images/articles/eoya_2008.png"
          alt="Which might be the Level of the Year?" border="0"></a>
@@ -12,13 +16,15 @@
            has been determined - find out who got the awards
            <a href="$$eoya_2008$$">here</a>!
          </div>
-         
+
+         <!--
          <h3>Level of the Month</h3>
          <a href="$$lotm_current$$"><img src="$$lotm_current_image$$"
          alt="$$lotm_expansion$$" border="0"></a>
          <div class="imagetitle">
            <a href="$$lotm_current$$">&quot;$$lotm_current_name$$&quot;</a>
          </div>
+         -->
 
          <!--
          <h3>Independent Article</h3>

Modified: homepage/input/infobox_de.html
===================================================================
--- homepage/input/infobox_de.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/infobox_de.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -1,9 +1,14 @@
     <div class="infobody">
        <div class="info">
          <h3>Gemurmel!</h3>
-         Lesen Sie <a href="$$marbleous_3$$">hier</a> &uuml;ber das neueste
+         Lesen Sie <a href="$$marbleous_4$$">hier</a> &uuml;ber das neueste
          Abenteuer unseres &quot;Neulings&quot;, seine Erfahrungen und Gedanken!
 
+         <h3>Erster Trailer</h3>
+         Mecke und Clifford haben den ersten Trailer f&uuml;r Enigma
+         entwickelt, das Video gibt es <a href="$$trailer_1$$"
+         >hier</a>, viel Spa&szlig;!
+
          <h3>Jahresend-<br>auszeichnungen</h3>
          <a href="$$eoya_2008$$"><img src="images/articles/eoya_2008.png"
          alt="Welches mag der Level des Jahres sein?" border="0"></a>
@@ -13,12 +18,14 @@
            raus, wer die Preise gewonnen hat!
          </div>
          
+         <!--
          <h3>Level des Monats</h3>
          <a href="$$lotm_current$$"><img src="$$lotm_current_image$$"
          alt="$$lotm_expansion$$" border="0"></a>
          <div class="imagetitle">
            <a href="$$lotm_current$$">&quot;$$lotm_current_name$$&quot;</a>
          </div>
+         -->
 
          <!--
          <h3>Unabh&auml;ngiger Artikel</h3>

Modified: homepage/input/infobox_ru.html
===================================================================
--- homepage/input/infobox_ru.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/infobox_ru.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -1,9 +1,13 @@
     <div class="infobody">
        <div class="info">
          <h3>???????????!</h3>
-         <a href="$$marbleous_3$$">?????</a> ????? ???????? ? ?????????
+         <a href="$$marbleous_4$$">?????</a> ????? ???????? ? ?????????
 	 ???????????? ?????? &quot;???????&quot;, ? ??? ????? ? ????????????!
 	  
+         <h3>First Trailer</h3>
+         Mecke and Clifford created the first trailer for Enigma, 
+         see the video <a href="$$trailer_1$$">here</a>, have fun!
+
          <h3>??????? ????? ????</h3>
          <a href="$$eoya_2008$$"><img src="images/articles/eoya_2008.png"
          alt="????? ????? ???? ??????? ?????" border="0"></a>
@@ -11,13 +15,15 @@
            ?????? ?????? 2008 ???????, ? ??????? ???? 2008 ????????? - ???????,
 	   ??? ??????? ??????? <a href="$$eoya_2008$$">?????</a>!
          </div>
-         
+
+         <!--
          <h3>??????? ??????</h3>
          <a href="$$lotm_current$$"><img src="$$lotm_current_image$$"
          alt="$$lotm_expansion$$" border="0"></a>
          <div class="imagetitle">
            <a href="$$lotm_current$$">&quot;$$lotm_current_name$$&quot;</a>
          </div>
+         -->
 
          <!--
          <h3>????????? ??????</h3>

Modified: homepage/input/menu.html
===================================================================
--- homepage/input/menu.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/menu.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -12,6 +12,7 @@
             <li><a href="$$news$$">News and Olds</a></li>
             <li><a href="$$hp_archive$$">Homepage Archive</a></li>
             <li><a href="$$screenshots$$">Screenshots</a></li>
+            <li><a href="$$trailer_1$$">Trailer</a></li>
             <li><a href="$$credits$$">Credits</a></li>
           </ul>
         </li>

Modified: homepage/input/menu_de.html
===================================================================
--- homepage/input/menu_de.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/menu_de.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -8,6 +8,7 @@
             <li><a href="$$news$$">Neues und Altes</a></li>
             <li><a href="$$hp_archive$$">Homepage-Archiv</a></li>
             <li><a href="$$screenshots$$">Schnappsch&uuml;sse</a></li>
+            <li><a href="$$trailer_1$$">Trailer</a></li>
             <li><a href="$$credits$$">Danksagungen</a></li>
           </ul>
         </li>

Modified: homepage/input/menu_ru.html
===================================================================
--- homepage/input/menu_ru.html	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/menu_ru.html	2009-02-13 21:54:08 UTC (rev 1533)
@@ -8,6 +8,7 @@
             <li><a href="news_ru.html">??????? ? ?????</a></li>
             <li><a href="$$hp_archive$$">????? ???????? ????????</a></li>
             <li><a href="screenshots_ru.html">?????????</a></li>
+            <li><a href="$$trailer_1$$">Trailer</a></li>
             <li><a href="credits_ru.html">?????????????</a></li>
           </ul>
         </li>

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2009-02-11 23:19:41 UTC (rev 1532)
+++ homepage/input/output-files.lua	2009-02-13 21:54:08 UTC (rev 1533)
@@ -38,9 +38,10 @@
     manual = "manual/enigma.html",
     manual_de = "manual/enigma_de.html",
     manual_fr = "manual/enigma_fr.html",
-    manual_ru = "manual/enigma_ru.html", -- existing? - yes, existing (03.11.08)
+    manual_ru = "manual/enigma_ru.html", -- existing? - yes, existing (03.11.08)    
     wiki = "http://enigma.mal2.ch/index.php?title=Main_Page",
     wiki_de = "http://enigma.mal2.ch/index.php?title=Hauptseite",
+    trailer_1 = "http://download.berlios.de/enigma-game/EnigmaTrailer1.flv",
     disclaimer = "http://www.disclaimer.de/disclaimer.htm#2",
     disclaimer_de = "http://www.disclaimer.de/disclaimer.htm#1",
     gpl = "http://www.gnu.org/licenses/licenses.html#GPL",
@@ -574,6 +575,15 @@
     body = {"articles/marbleous_3"},
 }
 
+html.marbleous_4 = {
+    outfile = "marbleous_4.html",
+    title = "Marbleous! &mdash; The Novice, Part 4",
+    title_de = "Gemurmel! &mdash; Der Neuling, Teil 4",
+    title_ru = "???????????! &mdash; ???????? ?? ???????, ????? 4",
+    rightcolumn = {"articles/infobox_marbleous"},
+    body = {"articles/marbleous_4"},
+}
+
 ----------------------------------------------------------------------
 -- Independent Level Articles
 ----------------------------------------------------------------------



From ral at mail.berlios.de  Sat Feb 14 01:14:23 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sat, 14 Feb 2009 01:14:23 +0100
Subject: [Enigma-game-svn] r1534 - trunk/doc/reference
Message-ID: <200902140014.n1E0ENph001421@sheep.berlios.de>

Author: ral
Date: 2009-02-14 01:14:13 +0100 (Sat, 14 Feb 2009)
New Revision: 1534

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1: new API reengineering
- refman:
  - actor completion
  - some additional stone documentation 


Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-13 21:54:08 UTC (rev 1533)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-14 00:14:13 UTC (rev 1534)
@@ -3393,6 +3393,7 @@
 * Object Transformation::         Identity Transfer in case of Transformations
 * Named Positions::               Positions as successors of killed Floors
 * Callbacks and Timers::
+* Level Restart::
 * Ending Conditions::
 @end menu
 
@@ -3509,6 +3510,9 @@
 @node Callbacks and Timers
 @subsection Callbacks and Timers
 
+ at node Level Restart
+ at subsection Level Restart
+
 @node Ending Conditions
 @subsection Ending Conditions
 
@@ -5404,8 +5408,9 @@
 negative values as well what generates an accelerating force that is very
 difficult to control for the player.
 
-Besides all floors some floor covering items like @ref{it_strip}, @ref{it_hollow}
-may provide friction values as well to deviate from the floor friction.
+Besides all floors some floor covering items like @ref{it_strip}, 
+ at ref{it_meditation} may provide friction values as well to deviate from the 
+floor friction.
 
 @table @asis
 @item @b{Type:} @ @ number
@@ -5424,8 +5429,9 @@
 accelerating force in the inverse direction of the mouse movement which is a
 little bit difficult to control for the player.
 
-Besides all floors some floor covering items like @ref{it_strip}, @ref{it_hollow}
-may provide adhesion values as well to deviate from the floor adhesion.
+Besides all floors some floor covering items like @ref{it_strip}, 
+ at ref{it_meditation_hollow} may provide adhesion values as well to deviate from
+the floor adhesion.
 
 @table @asis
 @item @b{Type:} @ @ number
@@ -5720,8 +5726,8 @@
 * ShowMoves::
 * SlopeStrength::
 * SurviveFinish::
-* SwampSinkSpeed::
-* WaterSinkSpeed::
+* SwampSinkTime::
+* WaterSinkTime::
 * Width::
 * WormholeRange::
 * WormholeStrength::
@@ -5767,11 +5773,10 @@
 
 If @code{true}, dead actors attached to a player will be resurrected as long as
 extralives are available. If a player has no living actor to control or is
-missing the actor's essential constraints (see section Actor Attributes),
-the player is dead. The level may still continue if a second player is alive.
-If the gamer has an @ref{it_yinyang} in his inventory in single user mode, the
-control switches to the second player. If all players are dead, a new level game
-is started.
+missing the actor's ref{essential} constraints, the player is 
+dead. The level may still continue if a second player is alive. If the gamer has
+an @ref{it_yinyang} in his inventory in single user mode, the control switches
+to the second player. If all players are dead, a new level game is started.
 
 If the conserve mode is @code{false}, no actors will be resurrected. As soon as
 the player is dead and the control cannot switch to another player, all dead
@@ -5780,8 +5785,7 @@
 
 Use @code{false} if the level can either be not solved in case of resurrected
 actors or would provide a major shortcut. In all other cases, mode @code{true}
-with proper usage of actors essential constraints will be preferable
-(see section Actor Attributes).
+with proper usage of actors ref{essential} constraints will be preferable.
 
 @table @asis
 @item @b{Type:} @ @ bool
@@ -6120,28 +6124,35 @@
 @item @b{Support:} @ @ object independent
 @end table
 
- at node SwampSinkSpeed
- at subsection SwampSinkSpeed
+ at node SwampSinkTime
+ at subsection SwampSinkTime
 
-A global default for the speed at which actors need to move to avoid sinking.
+A global default for the time it takes a static actor to sink in @ref{fl_swamp}.
+Fast moving actors will needs slightly more time than static actors.
 
 @table @asis
- at item @b{Type:} @ @ number
- at item @b{Values:} @ @ positive float number or zero
- at item @b{Default:} @ @ @code{4.0}
+ at item @b{Type:} @ @ number or @code{nil}
+ at item @b{Values:} @ @ positive float number or zero or @code{nil}
+Sink time in seconds or @samp{nil} for an inifinite time aka not sinking. Time
+values smaller than appr. 0.7 ms will be rounded down to 0 ms.
+ at item @b{Default:} @ @ @code{0.57}
+The exact default value is 4/7 seconds due to historic reasons
 @item @b{Access:} @ @ read/write
 @item @b{Support:} @ @ @ref{fl_swamp}
 @end table
 
- at node WaterSinkSpeed
- at subsection WaterSinkSpeed
+ at node WaterSinkTime
+ at subsection WaterSinkTime
 
-A global default for the speed at which actors need to move to avoid sinking.
+A global default for the time it takes a static actor to sink in @ref{fl_water}.
+Fast moving actors will needs slightly more time than static actors.
 
 @table @asis
- at item @b{Type:} @ @ number
- at item @b{Values:} @ @ positive float number or zero
- at item @b{Default:} @ @ @code{4.0}
+ at item @b{Type:} @ @ number or @code{nil}
+ at item @b{Values:} @ @ positive float number or zero or @code{nil}
+Sink time in seconds or @samp{nil} for an inifinite time aka not sinking. Time
+values smaller than appr. 0.7 ms will be rounded down to 0 ms.
+ at item @b{Default:} @ @ @code{0.0}
 @item @b{Access:} @ @ read/write
 @item @b{Support:} @ @ @ref{fl_water}
 @end table
@@ -6617,7 +6628,7 @@
 
 Glasses can make invisible @ref{st_death} visible, can uncover invisible
 passages by making hollow stones transparent, can make inactive
- at ref{st_lightpassenger} be distinguishable from @ref{st_glass}, can make
+ at ref{st_lightpassenger} be distinguishable from @ref{st_darkglass}, can make
 invisble @ref{it_sensor}, @ref{it_trap} and @ref{st_actorimpulse} be visible.
 
 All these features are configurable by the constants @samp{SPOT_DEATH},
@@ -6720,7 +6731,7 @@
 on stones being pushed onto the mine.
 
 The landmine explodes shattering nearby marbles on the same grid and leaves an
- at ref{it_hollow} behind.
+hollow @ref{it_meditation} behind.
 
 Actors can jump over a landmine and pass carefully between two adjacent
 landmines without activating the mines. Landmines do neither react on nearby
@@ -6750,12 +6761,12 @@
 clusters to explode (@ref{st_puzzle}).
 @item Lets a @samp{st_stoneimpulse_movable} not pulse on pushed
 (@ref{st_stoneimpulse})
- at item Makes @code{st_brick_magic} transparent (@ref{st_brick_magic}).
- at item Makes @code{st_invisible_magic} visible and non-transparent
-(@ref{st_invisible}).
+ at item Makes @code{st_magic_brick} transparent (@ref{st_magic}).
+ at item Makes @code{st_ghost_greenbrown} visible and non-transparent
+(@ref{st_ghost}).
 @item Makes rubberband stones movable (@ref{st_rubberband}).
 @item Changes the color of a chess stone (@ref{st_chess}).
- at item Activates @code{st_yinyang3} (@ref{st_yinyang}).
+ at item Activates @code{st_blur_magic} (@ref{st_blur}).
 @end itemize
 
 @table @asis
@@ -7067,9 +7078,10 @@
 @obindex it_sensor
 
 The sensor item is a switch on top of a floor that reacts on actors passing it.
-It just performs actions on actors entering the sensors grid. It will
-send an action value of @samp{true} but of course the @ref{inverse} attribute
-can be used to send an action value of @samp{false} instead.
+It performs actions on actors either entering or exiting the sensors grid 
+depending on its attribute @samp{exit}. It will send an action value of 
+ at samp{true} but of course the @ref{inverse} attribute can be used to send an 
+action value of @samp{false} instead.
 
 Any actors passing the grid, either on the floor or jumping over it will be
 detected.
@@ -7097,16 +7109,23 @@
 @item @b{invisible} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
 An invisible sensor is totally transparent. But the user may notice it, as actors
 cannot drop items onto the same grid position.
-
+ at item @b{exit} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
+React either on an actor exiting or entering the grid.
 @end table
 
 @item @b{Messages:} none
 
 @item @b{Action:} @ @ @xref{target}, @ @ @xref{action}
 
+ at item @b{Variants:}
+ at table @asis
+ at item @b{it_sensor}: exit = @code{false}
+ at item @b{it_sensor_exit}: exit = @code{true}
 @end table
 
+ at end table
 
+
 @c ----------------- Shogun Dot Item --------------------
 @node it_shogun
 @subsection it_shogun
@@ -7298,7 +7317,7 @@
 
 Just solid stones will press the trigger when pushed onto it. Floating, hollow
 stones will generally not press the trigger with the exception of the hollow,
-central puzzle stone (@pxref st_puzzle).
+central puzzle stone (@pxref{st_puzzle}).
 
 There is no way to set the state of a trigger manually. But the state can
 nevertheless be read. At initialization a trigger that is pressed by objects
@@ -7340,10 +7359,10 @@
 
 An activated umbrella temporarily protects a marble from @ref{st_death},
 @ref{st_knight}, @ref{st_thief}, @ref{fl_abyss}, @ref{fl_water},
- at ref{fl_swamp}, @ref{fl_thief}, @ref{it_death}, @ref{it_abyss},
- at ref{it_booze_broken}, explosions, moving stones and the @samp{shatter}
-and @samp{fall} messages; in other words, from all lethal situations and
-thieves.
+ at ref{fl_swamp}, @ref{fl_thief}, @ref{it_death}, @ref{it_trap},
+broken @ref{it_bottle}, explosions, moving stones and all other internal
+ at samp{shatter} and @samp{fall} events; in other words, from all lethal
+situations and thieves.
 
 An umbrella gets destroyed when hit by a laser beam and is itself a
 laser transformation result of an @samp{it_coin_s}(@pxref{it_coin}).
@@ -7732,6 +7751,7 @@
 @menu
 * st_actorimpulse::    Bumper Stone
 * st_blocker::         Shrinkable Blocker
+* st_blur::            Passage of yet undetermined color 
 * st_boulder::         Moving Arrow Boulder
 * st_brake::           Brake for moving Boulders
 * st_chess::           Movable Chess Knight Stone
@@ -7752,6 +7772,7 @@
 * st_monoflop::        Monoflop Switch
 * st_oneway::          Oneway Passage
 * st_oxyd::            Game Target Stone
+* st_passage::         Color dependent Passage
 * st_polarswitch::     Transparency Switch for Light Beams
 * st_pull::            Pullable Stone
 * st_puzzle::          Clusterable Puzzle Stones
@@ -7908,6 +7929,53 @@
 
 @end table
 
+ at c ----------------- Blur Stone --------------------
+ at node st_blur
+ at subsection st_blur
+ at obindex st_blur
+
+A gray stone that transforms on an actor hit into a @ref{st_passage} depending
+on the color of actor. The color of the passage may be the same as
+the color of the actor or be of the opposite color. The flavor of the passage
+is always @code{"square"}.
+
+In the first case the blur stone is pure gray and its  @samp{flavor} is called 
+ at code{"straight"} due to the straight color preserving transformation. The
+touching actor will be able to pass the passage straight away.
+
+In the second case the blur stone has an added white and black symbol to notify
+the player that, on touching the stone with a colored actor, this actor will not
+be able to pass the resulting passage. There are two flavors of such blur stones
+- @code{"cross"} which transform unconditionally on an actor hit to the opposite
+colored @ref{st_passage} and flavor @code{"magic"} which transforms just on
+actors hitting the blur stone with a revealed @ref{it_magicwand} or 
+ at ref{it_brush} in their inventory.
+
+For colorless actors a blur stone is just a standard stone without any special
+features.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{flavor} @ @ @i{values}: @code{"straight"}, @code{"cross"}, @code{"magic"}; @ @ @i{default}: @code{"straight"}
+The blur subkind.
+ at end table
+
+ at item @b{Messages:} none
+ at item @b{Action:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_blur}: flavor = @code{"straight"}
+ at item @b{st_blur_cross}: flavor = @code{"straight"}
+ at item @b{st_blur_cross}: flavor = @code{"cross"}
+ at item @b{st_blur_cross}: flavor = @code{"magic"}
+ at end table
+
+ at end table
+
 @c ----------------- Boulder Stone --------------------
 @node st_boulder
 @subsection st_boulder
@@ -7916,12 +7984,12 @@
 This solid stone moves into the direction shown by the arrow on its picture.
 A marble blocking its way is shattered. When a stone blocks its way, the boulder
 triggers it by a sequence of two internal messages. Some stones give way like
- at ref{st_blocker}, others change their state like @ref{st_oxyd},
- at ref{st_stoneimpulse}, @ref{st_quake}, @ref{st_mirror}, @ref{st_fourswitch},
- at ref{st_volcano}. A third category switches temporarily into another state on the
-first message sent when the boulder reaches a grid and switches back on the
-second message sent when the boulder gives up like @ref{st_[black/white]},
- at ref{st_plain}, @ref{st_lightpassenger}.
+ at ref{st_blocker}, @samp{st_break_boulder} (@pxref{st_break}), others change their
+state like @ref{st_oxyd}, @ref{st_stoneimpulse}, @ref{st_quake}, 
+ at ref{st_mirror}, @ref{st_fourswitch}, @ref{st_volcano}. A third category
+switches temporarily into another state on the first message sent when the
+boulder reaches a grid and switches back on the second message sent when the
+boulder gives up like @ref{st_passage}, @ref{st_flat}, @ref{st_lightpassenger}.
 
 Items getting beneath a moving boulder may react like on any other stone move
 on top of them. Additionally @ref{it_blocker} will be released to grow again
@@ -8280,7 +8348,7 @@
 
 Just doors of type @code{"d"} allow an actor to knock on its closed faces.
 This causes an action that might open the door or do anything else. A common
-target is @ref{st_balls} that evaluated the color of the knocking actor.
+target is @ref{st_jamb} that evaluated the color of the knocking actor.
 
 @table @asis
 
@@ -9012,10 +9080,11 @@
 Only flavor @code{"e"} starts with hidden color, but once opened returns to
 a closed image with a peep hole that lets the player still see the color.
 
-For each flavor exists an identical looking simple stone: @ref{st_fake_oxyda}, 
- at ref{st_fake_oxydb}, @ref{st_fake_oxydc}, @ref{st_fake_oxydd}, 
- at ref{st_fake_oxyde}. If you like an identical looking pseudo stone that takes
-part in the oxyd shuffling you can use an oxyd of color @samp{OXYD_FAKE}.
+For each flavor exists an identical looking simple stone: @samp{st_fake_oxyda}, 
+ at samp{st_fake_oxydb}, @samp{st_fake_oxydc}, @resampf{st_fake_oxydd}, 
+ at samp{st_fake_oxyde} (@pxref{st_fake}). If you like an identical looking pseudo
+stone that takes part in the oxyd shuffling you can use an oxyd of color 
+ at samp{OXYD_FAKE}.
 
 During the game oxyds can be reshuffled. Just those oxyds that are still closed
 will take part in the new shuffle process. Oxyd shuffling rules will still be
@@ -9090,6 +9159,55 @@
 
 @end table
 
+ at c ----------------- Passage Stone --------------------
+ at node st_passage
+ at subsection st_passage
+ at obindex st_passage
+
+A black or white colored stone of different shapes that lets pass only actors of
+matching color.
+
+The shape is described by the attribute @samp{flavor}. The shape does not
+affect the behaviour, but may be important for the visibility of actors and
+items beneath.
+
+Passage stones react on @samp{signal} and @samp{toggle} messages and
+ at ref{st_boulder} arriving on one of its sides. In both cases the passage stone 
+recolors to the opposite color. In case of a boulder the recoloring is of a
+quite short period, as this stone recolors the passage twice. The period in
+between is long enough for an actor to pass or to redirect the boulder before
+sending the second recoloring message.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{color} @ @ @i{values}: @code{BLACK}, @code{WHITE}; @ @ @i{default}: @code{BLACK}
+The color of the passage that determines which actors can pass.
+ at item @b{state}, @ @ @i{values}: @code{BLACK}, @code{WHITE}; @ @ @i{default}: @code{BLACK} @ @ @xref{state}
+The state is a synonym for color.
+ at item @b{flavor} @ @ @i{values}: @code{"square"}, @code{"slash"}, @code{"cross"}, @code{"frame"}; @ @ @i{default}: @code{"square"}
+The passage shape.
+ at end table
+
+ at item @b{Messages:}
+ at table @asis
+ at item @b{signal} @ @ @xref{signal}
+Switch color of the passage.
+ at end table
+
+ at item @b{Action:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_passage}: color = @code{BLACK}
+ at item @b{st_passage_black}: color = @code{BLACK}
+ at item @b{st_passage_black}: color = @code{WHITE}
+ at end table
+
+ at end table
+
 @c ----------------- Polarswitch Stone --------------------
 @node st_polarswitch
 @subsection st_polarswitch
@@ -9102,8 +9220,8 @@
 While the switch is not transparent in its default off state, it switches to
 a transparent on state.
 
-The switch looks like an @ref{st_glass2} in its intransparent off state and like
-an @ref{st_glass1} in its transparent on state. Like other @ref{Glasstones} it
+The switch looks like an @ref{st_darkglass} in its intransparent off state and like
+an @ref{st_lightglass} in its transparent on state. Like other @ref{Glasstones} it
 is passable for invisible actors.
 
 @table @asis
@@ -9155,7 +9273,7 @@
 
 Stone exchanges will not cause item hit transformations as caused by push moved
 stones. But the exchanged stones will react on the new floor, e.g. causing
- at ref{st_wood} and similar stones to sink into water.
+ at ref{st_box} to sink into water.
 
 Furtheron the exchange is atomic concerning @ref{it_trigger} detection and
 laser light transparency. If the exchanged stone is not transparent, the light
@@ -9248,7 +9366,7 @@
 sufficient for a hit operation, the cluster will move instead of an expected
 row rotation.
 
-Like @ref{Cluster Stone}s puzzles accept a @samp{cluster} attribute. A new set
+Like @ref{Cluster Stones} puzzles accept a @samp{cluster} attribute. A new set
 puzzle stone autoconnects to adjacent, same colored puzzle stones belonging to
 the same cluster. But once set the puzzle stone will of course not change its
 connections on subsequent moves or rotations. But as a level author you need to
@@ -9576,8 +9694,8 @@
 actors benath it while pulsing.
 
 Hollow stoneimpulse stones are transparent to laserlight and thus do not react.
-But all other stones do pulse. A standard not @ref{steady} stoneimpulse will
-pulse just one time on each new added light beam. But if you set @ref{steady}
+But all other stones do pulse. A standard not @samp{steady} stoneimpulse will
+pulse just one time on each new added light beam. But if you set @samp{steady}
 to @code{true} the stone will continue pulsing as long as a single beam hits
 one of its sides.
 
@@ -9662,7 +9780,7 @@
 
 Stone exchanges will not cause item hit transformations as caused by push moved
 stones. But the exchanged stones will react on the new floor, e.g. causing
- at ref{st_wood} and similar stones to sink into water.
+ at ref{st_box} to sink into water.
 
 Furtheron the exchange is atomic concerning @ref{it_trigger} detection and
 laser light transparency. If the exchanged stone is transparent, the light
@@ -10115,7 +10233,7 @@
 @section Actor Attributes
 
 @menu
-* adhesion::        Effectiveness of mousemotion
+* adhesion (actor)::        Effectiveness of mousemotion
 * charge::          Initial electrical charge
 * controllers::     Mouse
 * color::           Color
@@ -10127,8 +10245,8 @@
 @end menu
 
 
- at node adhesion
- at subsection adhesion
+ at node adhesion (actor)
+ at subsection adhesion (actor)
 
 The responsiveness of an actor on mouse movements. It is a scalar factor to
 the accelerating force applied to the actor. Note that mouse forces are only
@@ -10140,7 +10258,7 @@
 @table @asis
 @item @b{Type:} @ @ number
 @item @b{Values:} @ @ float number
- at item @b{Default:} @ @ actor dependent
+ at item @b{Default:} @ @ @code{0.0}
 @item @b{Access:} @ @ read/write
 @end table
 
@@ -10166,7 +10284,7 @@
 @table @asis
 @item @b{Type:} @ @ number
 @item @b{Values:} @ @ @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}
- at item @b{Default:} @ @ @code{0}
+ at item @b{Default:} @ @ @code{CTRL_NONE}
 @item @b{Access:} @ @ read/write
 @end table
 
@@ -10188,17 +10306,22 @@
 @subsection essential
 
 Describes the necessity of an actor to be alive in case of multiple actors being
-attached to a player. A value 0 marks an actor as not essential. The player
-may well continue to play with other actors that he controls which are still 
-alive. A value of -1 marks an actor as totally necessary. If such an actor 
-cannot be resurrected after a death, the player is essentially dead. A value 
-of 1 marks an actor as partially essential. Not the actor itself needs to 
-survive but the number of actors of its kind controlled by the player need to be
-larger than the number of actors with value 1. For example, marking 3 out of 5
-small whiteballs with 1 means that the player is dead if 3 small whiteballs are
-no longer alive. See Old API - Variables ?enigma.ConserveLevel? for more details
-about restart of levels.
+attached to a player. A value @samp{DISPENSIBLE} marks an actor as not essential.
+The player may well continue to play with other actors that he controls which
+are still alive. A value of @samp{INDISPENSIBLE} marks an actor as totally 
+necessary. If such an actor cannot be resurrected after a death, the player is
+essentially dead. A value of @samp{PERKIND} marks an actor as partially 
+essential. Not the actor itself needs to survive but the number of actors of 
+its kind controlled by the player need to be larger than the number of actors
+with value @samp{PERKIND}. For example, marking 4 out of 5 @ref{ac_pearl} with
+ at samp{PERKIND} means that the player is dead if 2 pearls are no longer alive.
 
+Of course shattered or sunken actors will first be resurrected if an
+ at ref{it_extralife} is availabe and the global attribute @ref{ConserveLevel}
+allows a resurrection.
+
+For more details about level restart see @ref{Level Restart}.
+
 @table @asis
 @item @b{Type:} @ @ number
 @item @b{Values:} @ @ @code{DISPENSIBLE}, @code{INDISPENSIBLE}, @code{PERKIND}
@@ -10212,7 +10335,8 @@
 Since a player may control actors of different kinds at the same time, the
 essentialness of actors is limited to its kind via this id. It is possible to
 group actors of different kinds into an essential group via this id. The engine 
-keeps this id even if actors are transformed into other kinds.
+keeps this id even if actors are transformed into other kinds like on activation
+of an @ref{it_drop}.
 
 @table @asis
 @item @b{Type:} @ @ string
@@ -10268,6 +10392,7 @@
 @section Actors
 
 @menu
+* ac_bug::
 * ac_horse::
 * ac_killer::
 * ac_marble::     
@@ -10276,6 +10401,34 @@
 * ac_top::
 @end menu
 
+ at c ----------------- Bug --------------------
+ at node ac_bug
+ at subsection ac_bug
+ at obindex ac_bug
+
+An actor that looks like a smalle gray ball with two red dots on it. Bugs are
+harmless actors that do not affect other actors and they are usually passiv.
+
+In contrast to the main actors they can not jump or pass an @ref{it_vortex}, and
+will not sink, fall or shatter. Bugs are immortal.
+
+Note that you need to set @samp{controllers} as well as @samp{adhesion} to proper
+values if you want a player to control a bug directly. If a bug is owned by a
+player @ref{fl_thief} and @ref{st_thief} will steal items from it.
+
+ at table @asis
+ at item @b{Attributes:} common actor attributes 
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_bug}: color = @code{nil}, controllers = @code{CTRL_NONE}, owner = @code{nil}
+ at end table
+
+ at end table
+
 @c ----------------- Horse --------------------
 @node ac_horse
 @subsection ac_horse
@@ -10446,11 +10599,121 @@
 @subsection ac_rotor
 @obindex ac_rotor
 
+A rotating actor build up of 4 greenish cudgels. It is a death bringing actor
+that shatters @ref{ac_marble}s and @ref{ac_pearl}s on contact. Its behaviour
+is identical to an @ref{ac_top}.
+
+In contrast to the main actors it can not jump or pass an @ref{it_vortex}, and
+will not sink, fall or shatter. A rotor is immortal.
+
+Rotors do usually hunt mortal actors trying to shatter them. They accelerate by
+force given by the attribute @samp{strength}, but they limit their hunt to
+actors in the given @samp{range}. If no attackable actor remains in this range
+they return to their initial position if the attribute @samp{gohome} is 
+ at samp{true}.
+
+Note that in case multiple attackable actors are in range the rotor gets
+confused and tries to attack the center of its victims. But if you set the
+attribute @samp{attacknearest} to @samp{true} the rotor will concentrate just
+on the nearest victim. By adjusting the attribute @samp{prefercurrent} you
+can instruct the rotors to prefer victims of the current active player with
+a certain likelihood.
+
+Note that you need to set @samp{controllers} as well as @samp{adhesion} to proper
+values if you want a player to control a rotor directly. If a rotor is owned by a
+player @ref{fl_thief} and @ref{st_thief} will steal items from it.
+
+An @ref{ac_marble} will temporarily transform into a rotor when it activates
+an @ref{it_drop}. During the 5 seconds of transformation the actor is a real
+immortal rotor with the identity inclusive the @samp{essential_id} of the
+former marble. After the period is over it transforms back to its original
+kind.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{range} @ @ @i{values}: float number; @ @ @i{default}: @code{5.0}
+The distance up to which victims are hunted.
+ at item @b{strength} @ @ @i{values}: float number; @ @ @i{default}: @code{+10.0}
+The force that drives the rotor to its victims.
+ at item @b{gohome} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+Behaviour of a rotor without victim in range.
+ at item @b{attacknearest} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+Behaviour of a rotor with multiple victims in range
+ at item @b{prefercurrent} @ @ @i{values}: float number in range [0.0 - 1.0]; @ @ @i{default}: @code{+0.0}
+Likelihood of attack strategy. You will usually use this attribute in
+combination with @samp{attacknearest} set to @samp{true}. The Level 
+ at samp{Toreador} is an example of the behavior of such rotors.
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_rotor}: color = @code{nil}, controllers = @code{CTRL_NONE}, owner = @code{nil}
+ at end table
+
+ at end table
+
 @c ----------------- Top --------------------
 @node ac_top
 @subsection ac_top
 @obindex ac_top
 
+A fast rotating, greenish disk like actor. It is a death bringing actor
+that shatters @ref{ac_marble}s and @ref{ac_pearl}s on contact. Its behaviour
+is identical to an @ref{ac_rotor}.
+
+In contrast to the main actors it can not jump or pass an @ref{it_vortex}, and
+will not sink, fall or shatter. A top is immortal.
+
+Tops do usually hunt mortal actors trying to shatter them. They accelerate by
+force given by the attribute @samp{strength}, but they limit their hunt to
+actors in the given @samp{range}. If no attackable actor remains in this range
+they return to their initial position if the attribute @samp{gohome} is 
+ at samp{true}.
+
+Note that in case multiple attackable actors are in range the top gets
+confused and tries to attack the center of its victims. But if you set the
+attribute @samp{attacknearest} to @samp{true} the top will concentrate just
+on the nearest victim. By adjusting the attribute @samp{prefercurrent} you
+can instruct the top to prefer victims of the current active player with
+a certain likelihood.
+
+Note that you need to set @samp{controllers} as well as @samp{adhesion} to proper
+values if you want a player to control a top directly. If a top is owned by a
+player @ref{fl_thief} and @ref{st_thief} will steal items from it.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{range} @ @ @i{values}: float number; @ @ @i{default}: @code{5.0}
+The distance up to which victims are hunted.
+ at item @b{strength} @ @ @i{values}: float number; @ @ @i{default}: @code{+10.0}
+The force that drives the top to its victims.
+ at item @b{gohome} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+Behaviour of a top without victim in range.
+ at item @b{attacknearest} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+Behaviour of a top with multiple victims in range
+ at item @b{prefercurrent} @ @ @i{values}: float number in range [0.0 - 1.0]; @ @ @i{default}: @code{+0.0}
+Likelihood of attack strategy. You will usually use this attribute in
+combination with @samp{attacknearest} set to @samp{true}. The Level 
+ at samp{Toreador} is an example of the behavior of such rotors.
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{ac_top}: color = @code{nil}, controllers = @code{CTRL_NONE}, owner = @code{nil}
+ at end table
+
+ at end table
+
 @c ===================  Other Objects  =======================
 
 @node Other Objects
@@ -12188,19 +12451,19 @@
 ti[" ="] = @{"fl_tigris"@}
 ti[" ."] = @{"fl_abyss"@}
 ti[" ~"] = @{"fl_water"@}
-ti[" ;"] = @{"fl_leaves"@}
+ti[" ;"] = @{"fl_lawn"@}
 
-ti["# "] = @{"st_rock1"@}
+ti["# "] = @{"st_granite"@}
 ti["W "] = @{"st_wood"@}
 ti["X "] = @{"st_oxyd"@}
-ti["G "] = @{"st_grate1"@}
+ti["G "] = @{"st_grate_cross"@}
 
 ti["2 "] = @{"it_coin_s"@}
 ti["s "] = @{"it_seed"@}
 ti["c "] = @{"it_cherry"@}
 ti["h "] = @{"it_hammer"@}
 
-ti["k "] = @{"it_key"@} .. ti(@{"st_glass1"@})
+ti["k "] = @{"it_key"@} .. ti(@{"st_lightglass"@})
 
 ti["xx"] = @{"#ac_marbel_black"@}
 



From ral at mail.berlios.de  Sat Feb 14 15:22:24 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 14 Feb 2009 15:22:24 +0100
Subject: [Enigma-game-svn] r1535 - in trunk/src: . items
Message-ID: <200902141422.n1EEMOBn007971@sheep.berlios.de>

Author: ral
Date: 2009-02-14 15:22:23 +0100 (Sat, 14 Feb 2009)
New Revision: 1535

Modified:
   trunk/src/items/SimpleItems.hh
   trunk/src/lua.cc
Log:
Trunk 1.1: new API reengineering
- fix and improve to_value convertion in case of illegal arguments


Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-02-14 00:14:13 UTC (rev 1534)
+++ trunk/src/items/SimpleItems.hh	2009-02-14 14:22:23 UTC (rev 1535)
@@ -96,7 +96,7 @@
     };
 
     /**
-     * DeathItem
+     * Debris
      */
     class Debris : public Item {
         CLONEOBJ(Debris);
@@ -262,7 +262,7 @@
     };
     
     /**
-     * Spring
+     * Springboard
      */
     class Springboard : public Item {
         CLONEOBJ(Springboard);

Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2009-02-14 00:14:13 UTC (rev 1534)
+++ trunk/src/lua.cc	2009-02-14 14:22:23 UTC (rev 1535)
@@ -204,6 +204,19 @@
     return lua_isuserdata(L,idx) && checkMetadata(L, idx, LUA_ID_DEFAULT);
 }
 
+static int userType(lua_State *L) {
+    std::string type = "unknown";
+    if (is_object(L, -1)) type = "object";
+    else if (is_position(L, -1)) type = "position";
+    else if (is_tile(L, -1)) type = "tile";
+    else if (is_tiles(L, -1)) type = "tiles";
+    else if (is_group(L, -1)) type = "group";
+    else if (is_world(L, -1)) type = "world";
+    else if (is_polist(L, -1)) type = "polist";
+    
+    lua_pushstring(L, type.c_str());
+    return 1;
+}
 
 static Object *to_object(lua_State *L, int idx) {
     
@@ -453,12 +466,19 @@
         case LUA_TUSERDATA:
             if (is_object(L, idx))
                 return Value(to_object(L, idx));
-            else  if (is_group(L, idx))
+            else if (is_group(L, idx))
                 return Value(toObjectList(L, idx));
-            else  if (is_position(L, idx))
+            else if (is_position(L, idx))
                 return Value(toPosition(L, idx));
-            else  if (is_default(L, idx))
+            else if (is_default(L, idx))
                 return Value();
+            else {
+                lua_pushvalue(L, idx);
+                userType(L);
+                std::string msg = ecl::strf("Cannot convert userdata type '%s' to Value.", lua_tostring(L, -1));
+                throwLuaError(L, msg.c_str());
+            }
+            break;            
         case LUA_TTABLE: {
             TokenList tokens;
             int i = 1;
@@ -473,7 +493,7 @@
             return Value(tokens);
         }
         default: 
-            throwLuaError(L,"Cannot convert type to Value.");
+            throwLuaError(L, "Cannot convert type to Value.");
     }
     return Value();
 }
@@ -961,19 +981,6 @@
     return 1;
 }
 
-static int userType(lua_State *L) {
-    std::string type;
-    if (is_object(L, 1)) type = "object";
-    else if (is_position(L, 1)) type = "position";
-    else if (is_tile(L, 1)) type = "tile";
-    else if (is_tiles(L, 1)) type = "tiles";
-    else if (is_group(L, 1)) type = "group";
-    else if (is_world(L, 1)) type = "world";
-    
-    lua_pushstring(L, type.c_str());
-    return 1;
-}
-
 static int newPosition(lua_State *L) {
     // (pos|obj|table|(num,num))
     if (is_table(L, 1)) {  // table 



From ral at mail.berlios.de  Sat Feb 14 23:13:05 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 14 Feb 2009 23:13:05 +0100
Subject: [Enigma-game-svn] r1536 - trunk/lib-src/enigma-core
Message-ID: <200902142213.n1EMD59I007656@sheep.berlios.de>

Author: ral
Date: 2009-02-14 23:13:04 +0100 (Sat, 14 Feb 2009)
New Revision: 1536

Modified:
   trunk/lib-src/enigma-core/ecl_util.cc
Log:
Trunk 1.1:
- fix crash caused by formatting of long strings due to an instable buffer
  reallocation that did not reinitialize vargs
Note:
- as vargs implementation is very system specific this bug did not cause
  crashes on all systems.
- Fedora 64 bit compilations are reported to be critical in respect to this bug


Modified: trunk/lib-src/enigma-core/ecl_util.cc
===================================================================
--- trunk/lib-src/enigma-core/ecl_util.cc	2009-02-14 14:22:23 UTC (rev 1535)
+++ trunk/lib-src/enigma-core/ecl_util.cc	2009-02-14 22:13:04 UTC (rev 1536)
@@ -63,41 +63,35 @@
     return true;
 }
 
-namespace {
-    string vstrf(const char *format, va_list argPtr) {
-        static size_t  buf_size = 128;
-        static char   *buffer   = new char[buf_size];
+std::string ecl::strf(const char *format, ...) {
+    static size_t  buf_size = 512;
+    static char   *buffer   = new char[buf_size];
+    
+    va_list argPtr;
+    size_t length;
 
-        size_t length;
-        while (1) {
-            if (!buffer) {
-                assert(buffer); // to stop when debugging
-                return "<alloc problem>";
-            }
-
-            length = vsnprintf(buffer, buf_size, format, argPtr);
-            if (length < buf_size) break; // string fits into current buffer
-
-            // otherwise resize buffer :
-            buf_size += buf_size/2;
-            // fprintf(stderr, "Reallocating vstrf-buffer to size=%u\n", buf_size);
-            delete [] buffer;
-            buffer    = new char[buf_size];
+    while (true) {
+        if (!buffer) {
+            assert(buffer); // to stop when debugging
+            return "<alloc problem>";
         }
 
-        return string(buffer, length);
+        va_start(argPtr, format);
+        length = vsnprintf(buffer, buf_size, format, argPtr);
+        va_end(argPtr);
+        
+        if (length >= 0 && length < buf_size - 1) 
+            // string fits into current buffer
+            return std::string(buffer, length);
+
+        // otherwise resize buffer :
+        buf_size *= 2;
+//        fprintf(stderr, "Reallocating vstrf-buffer to size=%u\n", buf_size);
+        delete [] buffer;
+        buffer = new char[buf_size];
     }
 }
 
-string ecl::strf(const char *format, ...) {
-    va_list argPtr;
-    va_start(argPtr, format);
-    string result = vstrf(format, argPtr);
-    va_end(argPtr);
-
-    return result;
-}
-
     // string_match accepts simple wildcards
     // '?' means 'any character'
     // '*' means '0 or more characters'



From andreasl at mail.berlios.de  Sun Feb 15 02:00:22 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Sun, 15 Feb 2009 02:00:22 +0100
Subject: [Enigma-game-svn] r1537 - in homepage: . images input
	input/articles input/lotm input/news
Message-ID: <200902150100.n1F10Mtk005760@sheep.berlios.de>

Author: andreasl
Date: 2009-02-15 02:00:11 +0100 (Sun, 15 Feb 2009)
New Revision: 1537

Added:
   homepage/images/computer-bild_top-250_downloads-logo.jpg
Modified:
   homepage/input/articles/infobox_marbleous_de.html
   homepage/input/articles/level_andreas11.html
   homepage/input/articles/level_andreas11_de.html
   homepage/input/lotm/lotm_200705.html
   homepage/input/lotm/lotm_200705_de.html
   homepage/input/lotm/lotm_200705_ru.html
   homepage/input/lotm/lotm_200709.html
   homepage/input/lotm/lotm_200709_de.html
   homepage/input/lotm/lotm_200709_ru.html
   homepage/input/lotm/lotm_200812.html
   homepage/input/lotm/lotm_200812_ru.html
   homepage/input/news/news_issue25_de.html
   homepage/input/news/news_issue25_en.html
   homepage/input/news/news_issue25_ru.html
   homepage/input/news/news_issue26_de.html
   homepage/input/news/news_issue26_en.html
   homepage/input/news/news_issue26_ru.html
   homepage/input/news/read_news.lua
   homepage/input/output-files.lua
   homepage/input/press.html
   homepage/input/press_de.html
   homepage/input/press_ru.html
   homepage/input/schema.html
   homepage/main.lua
Log:
Homepage:
 - main.lua now has a system to count and replace "&quot;" by language-
   dependend left and right quotation marks.
 - Corrected several instances of "&quot" instead of "&quot;".
 - main.lua now has a "verbose"-switch, which is set to false by default.
 - Finally removed Spanish from the list of translations, as nothing happened.
 - Addenda to news issues 25 and 26: links to EoYA articles
 - Press:
   - correct link to Computer Bild, now with Top 250 download logo
   - removed dead link to Bonnsite
 - Added meta-information "Content-Style-Type" to schema.html, to satisfy
   the validome-validator.
 - Validation (mainly w3c)
Note:
 - Concerning the &quot;-replacements: In contrast to the $$...$$-macros,
   "&quot;" is replaced only once, hence it's possible to use "&quot;" by
   placing it in a $$...$$-macro. The replacements are given in output-files.lua
   as left_quot and right_quot. main.lua only counts the number and chooses
   between left_quot and right_quot based on odd or even number, not on
   word beginnings or endings. If the total number of "&quot;"s is odd, main.lua
   will throw a warning.
Todo:
 - Russian translation of news addenda (news/issue25 and 26).
 - Please enter the html entities to be used as left and right quotation
   marks in Russian into output-file.luas, entry left/right_quot_ru.
 - Upload


Added: homepage/images/computer-bild_top-250_downloads-logo.jpg
===================================================================
(Binary files differ)


Property changes on: homepage/images/computer-bild_top-250_downloads-logo.jpg
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Modified: homepage/input/articles/infobox_marbleous_de.html
===================================================================
--- homepage/input/articles/infobox_marbleous_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/articles/infobox_marbleous_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -8,6 +8,6 @@
          <br><br>
          <a href="$$marbleous_3$$">Teil 3: <br>&quot;Make the tools you need!&quot; hei&szlig;t es in &quot;Do it yourself&quot;</a>       
          <br><br>
-         <a href="$$marbleous_4$$">Teil 4: <br>Alcatraz: Raus aus den Zwangsjacken dieser Welt</h3>
+         <a href="$$marbleous_4$$">Teil 4: <br>Alcatraz: Raus aus den Zwangsjacken dieser Welt</a>
        </div>
     </div>

Modified: homepage/input/articles/level_andreas11.html
===================================================================
--- homepage/input/articles/level_andreas11.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/articles/level_andreas11.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -167,7 +167,7 @@
 
 <div class="quote">
 The first one, my number 1, really was just an experiment. Number 2 already grew
-more interesting: It used reversed friction, like in the &quot;Nightmare&quot
+more interesting: It used reversed friction, like in the &quot;Nightmare&quot;
 series, but without death stones. It was one of those levels which solved
 themselfes. Then I got the idea to realise Lissajous curves in a level. Indeed,
 my first motivation was similar to what I later realised as

Modified: homepage/input/articles/level_andreas11_de.html
===================================================================
--- homepage/input/articles/level_andreas11_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/articles/level_andreas11_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -239,7 +239,7 @@
 kombinierte sie hier mit Timersteinen, um sicherzustellen, dass die T&uuml;ren einen
 Moment warten w&uuml;rden, bevor sie den Weg zu den Oxyds wieder &ouml;ffnen. Es
 funktionierte gro&szlig;artig. Ich dachte &uuml;ber den Titel nach. Zu der Zeit hatte ich
-etwas &uuml;ber eine Star-Trek-Folge namens &quot;Patterns of Force&quot gelesen, zu
+etwas &uuml;ber eine Star-Trek-Folge namens &quot;Patterns of Force&quot; gelesen, zu
 deutsch &quot;Schablonen der Gewalt&quot;. Ich habe die Folge nie gesehen, und
 sie wird als eine der schlechtesten Star-Trek-Folgen &uuml;berhaupt bezeichnet, aber
 der Titel setzte sich in meinem Kopf fest. Ich freundete mich schnell mit

Modified: homepage/input/lotm/lotm_200705.html
===================================================================
--- homepage/input/lotm/lotm_200705.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200705.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -132,7 +132,7 @@
   talks to the gamer for a long time and tells them a story. The first that
   doesn't use the documents only to give hints to the player. But it starts a
   real dialogue and thereby draws the gamer into its mystical world. I think,
-  it is the level with the most &quot;it-documents&quot :-)</p>
+  it is the level with the most &quot;it-documents&quot; :-)</p>
 
   <p class="quote">The level belongs to a seldom and very suspenseful category
   of levels, which I want to call &quot;journey levels&quot; or maybe better

Modified: homepage/input/lotm/lotm_200705_de.html
===================================================================
--- homepage/input/lotm/lotm_200705_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200705_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -76,7 +76,7 @@
   erh&auml;lt. Ich wei&szlig;, dass ich genau wie diese reinherzige, tapfere Murmel in
   meinem wahren Leben sein m&ouml;chte!</p>
 
-  <p class="quote">Wenn ich &quot;Aztec Temple&quot spielte, wurde ich immer
+  <p class="quote">Wenn ich &quot;Aztec Temple&quot; spielte, wurde ich immer
   wieder besiegt; aber ich sp&uuml;rte noch immer diesen Drang, zur&uuml;ckzukommen und
   etwas mehr zu erforschen. Ich erhielt ein paar Mal Zugang zum
   Allerheiligsten, bevor ich alle Z&uuml;ge richtig machte und den Endorphinrausch

Modified: homepage/input/lotm/lotm_200705_ru.html
===================================================================
--- homepage/input/lotm/lotm_200705_ru.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200705_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -127,7 +127,7 @@
   ??????? ?????? ????? ???????????? ?????? ???? ???????. ??????, ???????
   ?????????? ????????? ?? ?????? ??? ????, ????? ???? ?????? ?????????. ???, ?? ???????? ????????? ??????
   ? ????????????? ????????? ?????? ? ???? ?????????? ???. ? ?????,
-  ? ???? ?????? ?????? ????? &quot;it-documents(???????? ???? "????????")&quot :-)</p>
+  ? ???? ?????? ?????? ????? &quot;it-documents(???????? ???? "????????")&quot; :-)</p>
 
   <p class="quote">??????? ????????? ? ?????? ? ????? ????????????? ????????? ???????,
   ??????? ??? ???????? ?? ??????? &quot;??????-???????????&quot; ??? ?????

Modified: homepage/input/lotm/lotm_200709.html
===================================================================
--- homepage/input/lotm/lotm_200709.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200709.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -95,7 +95,7 @@
         <td class="left">biotopa</td></tr>
   </table>
   
-  <p>As of our data from July, 13 users voted for &quot;Tool Time&quot,
+  <p>As of our data from July, 13 users voted for &quot;Tool Time&quot;,
   with an average of <b>8.46</b> which establishes &quot;Tool Time&quot; at
   position 6 in our <a href="$$lotm$$">LotM-highscore</a>, head-to-head with
   &quot;Elaborate&quot;, which lost its slight lead over &quot;Labyrinth of

Modified: homepage/input/lotm/lotm_200709_de.html
===================================================================
--- homepage/input/lotm/lotm_200709_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200709_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -130,7 +130,7 @@
   w&uuml;rdigen.</i></p>
 
   <p><i>Und sagt nicht das alte Sprichwort &quot;In der K&uuml;rze liegt die
-  W&uuml;rze&quot? Wenn der Artikel also dieses Mal etwas k&uuml;rzer
+  W&uuml;rze&quot;? Wenn der Artikel also dieses Mal etwas k&uuml;rzer
   ausf&auml;llt als &uuml;blich, so ist dies sicherlich nicht als ein Anzeichen
   von geringerer Qualit&auml;t zu bewerten.</i></p>
 

Modified: homepage/input/lotm/lotm_200709_ru.html
===================================================================
--- homepage/input/lotm/lotm_200709_ru.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200709_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -95,7 +95,7 @@
         <td class="left">biotopa</td></tr>
   </table>
   
-  <p>?? ????? ?????? ? ???? 13 ????????????? ????????????? ?? &quot;Tool Time&quot,
+  <p>?? ????? ?????? ? ???? 13 ????????????? ????????????? ?? &quot;Tool Time&quot;,
   ? ??????? <b>8.46</b>, ??? ?????????? &quot;Tool Time&quot; 6 ?????
   ? ????? <a href="$$lotm$$">???????? ????</a>, ??????? ? 
   &quot;Elaborate&quot;, ??????? ?? ????????? ??? ?????? ??????? ???? ???????????? ????????? ??? &quot;Labyrinth of

Modified: homepage/input/lotm/lotm_200812.html
===================================================================
--- homepage/input/lotm/lotm_200812.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200812.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -351,7 +351,7 @@
 <div class="imagetitle">Oops &hellip;</div>
 </div>
 
-<p>I'm losing my fears, I'm becoming a &quot;poete de feu&quot;. A vision emerges: &quot;A bridge built from combined puzzle-stones, pushed across a sea of flames, lowered down into the depths of an abyss&quot;. And that'll be the way: &quot;Can you see the magic wand? Puzzle-stones down in the abyss? Combined in the right way a metamorphosis is happening - the combination of puzzle-stones - abracadabra - becomes passable. Conclude, consider the narrowness of the room, the uniqueness of the intermediate as well as of the final product (important!) - and after all, fear of the fire's deadly power has given way to hope, you're ready to become a custom tailor, making the product of puzzle-stones which will be &quot;the way&quot;. You've only got one chance - one small mistake and your prospects for the future are spoiled. Pay close attention to the right use of the wand: Abracadabra - and all you've built crumbles to the floor and turns to dust &hellip;</p>
+<p>I'm losing my fears, I'm becoming a &quot;poete de feu&quot;. A vision emerges: &quot;A bridge built from combined puzzle-stones, pushed across a sea of flames, lowered down into the depths of an abyss&quot;. And that'll be the way: Can you see the magic wand? Puzzle-stones down in the abyss? Combined in the right way a metamorphosis is happening - the combination of puzzle-stones - abracadabra - becomes passable. Conclude, consider the narrowness of the room, the uniqueness of the intermediate as well as of the final product (important!) - and after all, fear of the fire's deadly power has given way to hope, you're ready to become a custom tailor, making the product of puzzle-stones which will be &quot;the way&quot;. You've only got one chance - one small mistake and your prospects for the future are spoiled. Pay close attention to the right use of the wand: Abracadabra - and all you've built crumbles to the floor and turns to dust &hellip;</p>
 
 <h4>&quot;About squashing and stretching&quot;</h4>
 

Modified: homepage/input/lotm/lotm_200812_ru.html
===================================================================
--- homepage/input/lotm/lotm_200812_ru.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/lotm/lotm_200812_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -418,7 +418,7 @@
 
 <p>? ??????? ????? ???????, ? ?????????? &quot;?????? ????&quot; (????. &quot;poete de feu&quot;). ?????????
 ???????: &quot;????, ??????????? ?? ??????-???????????, ???????????? ????? ???? ???????, ????????? ? ???????
-??????&quot;. ??? ??? ??? ????? ?????????: &quot;?????? ????????? ???????? ?????-???????????, ?????????? ?
+??????&quot;. ??? ??? ??? ????? ?????????: ?????? ????????? ???????? ?????-???????????, ?????????? ?
 ??????? ???? ??? ??????? ?????????, ?? ????? ????????? ?????????????? &mdash; ? ???????????? ??????-???????????
 &mdash; ??????????? &mdash; ??????????? ??????. ??????? ??, ???????? ??????? ???????, ???????????? ???
 ????????? ??????, ??? ? ???????? ??????? (??? ?????!) &mdash; ?, ???????, ????? ????? ??????????? ???? ????

Modified: homepage/input/news/news_issue25_de.html
===================================================================
--- homepage/input/news/news_issue25_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/news_issue25_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -13,3 +13,5 @@
 href="http://enigma-game.berlios.de/loty_2007.php">hier</a> f&uuml;r die
 englische (sorry, keine russische Version). M&ouml;gen die besten Levels
 gewinnen! :-)</p>
+
+<p>Nachtrag: Die Ergebnisse finden Sie jetzt <a href="$$eoya_2007$$">hier</a>.

Modified: homepage/input/news/news_issue25_en.html
===================================================================
--- homepage/input/news/news_issue25_en.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/news_issue25_en.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -12,3 +12,5 @@
 for the English version, and
 <a href="http://enigma-game.berlios.de/loty_2007_de.php">here</a> for the
 German (sorry, no Russian version). May the best levels win! :-)</p>
+
+<p>Addendum: You can now find the results <a href="$$eoya_2007$$">here</a>.

Modified: homepage/input/news/news_issue25_ru.html
===================================================================
--- homepage/input/news/news_issue25_ru.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/news_issue25_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -12,3 +12,5 @@
 ????? ??????? ?????????? ?????? ??? 
 <a href="http://enigma-game.berlios.de/loty_2007_de.php">?????</a>, ????? ???????
 ???????? (????????, ??????? ?????? ???). ????? ??????? ??????! :-)</p>
+
+<p>Addendum: You can now find the results <a href="$$eoya_2007$$">here</a>.

Modified: homepage/input/news/news_issue26_de.html
===================================================================
--- homepage/input/news/news_issue26_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/news_issue26_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -17,3 +17,5 @@
 englische Version oder <a
 href="http://enigma.seymutor.de/eoya_2008/eoya_2008_ru.php">hier</a> f&uuml;r die
 russische. M&ouml;gen die besten Levels gewinnen! :-)</p>
+
+<p>Nachtrag: Die Ergebnisse finden Sie jetzt <a href="$$eoya_2008$$">hier</a>.

Modified: homepage/input/news/news_issue26_en.html
===================================================================
--- homepage/input/news/news_issue26_en.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/news_issue26_en.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -17,3 +17,5 @@
 German version, or <a
 href="http://enigma.seymutor.de/eoya_2008/eoya_2008_ru.php">here</a> for the
 Russian version. May the best levels win! :-)</p>
+
+<p>Addendum: You can now find the results <a href="$$eoya_2008$$">here</a>.

Modified: homepage/input/news/news_issue26_ru.html
===================================================================
--- homepage/input/news/news_issue26_ru.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/news_issue26_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -18,3 +18,4 @@
 	href="http://enigma.seymutor.de/eoya_2008/eoya_2008_ru.php">?????</a> ??? ???????
 ??????. ????? ??????? ??????! :-)</p>
 
+<p>Addendum: You can now find the results <a href="$$eoya_2008$$">here</a>.

Modified: homepage/input/news/read_news.lua
===================================================================
--- homepage/input/news/read_news.lua	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/news/read_news.lua	2009-02-15 01:00:11 UTC (rev 1537)
@@ -7,17 +7,24 @@
 -- numbers: an array with the issue-numbers to print
 --          it will be processed from the end to the beginning!
 --
+-- A global variable "verbose" is assumed to be true or false/nil.
+-- It determines the verbosity of the script's messages.
+--
 function write_news_page(dir, outname, lang0, num_array)
     local lang = lang0
     if lang == "" then
         lang = "_en"
     end
-    print("INFO: Lang is "..lang)
+    if verbose then
+        print("INFO: Lang is "..lang)
+    end
     local outfilename = outname
     local outfile = io.open (outfilename, "w")
     outfile:write(parse_news(dir, lang0, num_array).."\n")
     outfile:close()
-    print("INFO: Writing news page(s) finished.")
+    if verbose then
+       print("INFO: Writing news page(s) finished.")
+    end
     return 0
 end
 --------------------------------------------------------------------------------
@@ -43,7 +50,9 @@
     local the_content = ""
 
     local newsfilename = "news_issue"..tostring(n)..lang..".html"
-    print("INFO: Parsing "..newsfilename)
+    if verbose then
+        print("INFO: Parsing "..newsfilename)
+    end
     newsfile = io.open (dir..newsfilename, "r")
 
     if newsfile == nil then -- requested newsfile DOES NOT exist!
@@ -87,7 +96,9 @@
         newsfile = io.open (dir..newsfilename, "r")
     until newsfile == nil 
 
-    print("INFO: "..tostring(num_news-1).." english Newsfiles found")
+    if verbose then
+        print("INFO: "..tostring(num_news-1).." english Newsfiles found")
+    end
     -- We have count one to much!
     table.remove(num_array)
 

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/output-files.lua	2009-02-15 01:00:11 UTC (rev 1537)
@@ -6,7 +6,7 @@
 newsdir = "input/news/"
 suffix = ".html"
 
-language_list = {"", "_de", "_ru", "_es"} -- "_fr"
+language_list = {"", "_de", "_ru"} -- "_es", "_fr"
 
 -- The newsfield declares the news (by number) to be shown on the main page.
 
@@ -139,6 +139,14 @@
     October   = function(v,s,l0)  return  translate_month(l0, {month=10})  end,
     November  = function(v,s,l0)  return  translate_month(l0, {month=11})  end,
     December  = function(v,s,l0)  return  translate_month(l0, {month=12})  end,
+
+    left_quot     = "&ldquo;",
+    right_quot    = "&rdquo;",
+    left_quot_de  = "&bdquo;",
+    right_quot_de = "&ldquo;",
+    left_quot_ru  = "&quot;",
+    right_quot_ru = "&quot;",
+
     imagedir    = "images",
     imagedir_de = "images",
     imagedir_fr = "images",

Modified: homepage/input/press.html
===================================================================
--- homepage/input/press.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/press.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -14,18 +14,21 @@
         >Softpedia</a></li>
   <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker</a></li>
-  <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
-        >Computer Bild (German)</a></li>
   <li><a href="http://www.chip.de/downloads/c1_downloads_19309102.html"
         >Chip Online (German)</a></li>
   <li><a href="http://software-portal.faz.net/ie/64780/"
         >FAZ.net (German)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
         >Opensource-DVD (German)</a></li>
-  <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
-        >Bonnsite (German)</a></li>
+  <!--<li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
+        >Bonnsite (German)</a></li>-->
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
         >Heise (German, 0.81)</a></li>
+  <li><a href="http://www.computerbild.de/download/Enigma-7766.html"
+        >Computer Bild (German)<br>
+        <img src="images/computer-bild_top-250_downloads-logo.jpg"
+             alt="Computer Bild Top 250 Download" border="0">
+        </a></li>
 </ul>
 
 <p>On &quot;Linux Game Tome&quot;, Enigma even is considered to be one of the

Modified: homepage/input/press_de.html
===================================================================
--- homepage/input/press_de.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/press_de.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -14,18 +14,21 @@
         >Softpedia (englisch)</a></li>
   <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker (englisch)</a></li>
-  <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
-        >Computer Bild (deutsch)</a></li>
   <li><a href="http://www.chip.de/downloads/c1_downloads_19309102.html"
         >Chip Online (deutsch)</a></li>
   <li><a href="http://software-portal.faz.net/ie/64780/"
         >FAZ.net (deutsch)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
         >Opensource-DVD (deutsch)</a></li>
-  <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
-        >Bonnsite (deutsch)</a></li>
+  <!--<li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
+        >Bonnsite (deutsch)</a></li>-->
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
         >Heise (deutsch, 0.81)</a></li>
+  <li><a href="http://www.computerbild.de/download/Enigma-7766.html"
+        >Computer Bild (deutsch)<br>
+        <img src="images/computer-bild_top-250_downloads-logo.jpg"
+             alt="Computer Bild Top 250 Download" border="0">
+        </a></li>
 </ul>
 
 <p>Auf &quot;Linux Game Tome&quot; wird Enigma sogar als eines der am

Modified: homepage/input/press_ru.html
===================================================================
--- homepage/input/press_ru.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/press_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -14,18 +14,21 @@
         >Softpedia</a></li>
   <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker</a></li>
-  <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
-        >Computer Bild (????????)</a></li>
   <li><a href="http://www.chip.de/downloads/c1_downloads_19309102.html"
         >Chip Online (????????)</a></li>
   <li><a href="http://software-portal.faz.net/ie/64780/"
         >FAZ.net (????????)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
         >Opensource-DVD (????????)</a></li>
-  <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
-        >Bonnsite (????????)</a></li>
+  <!--<li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
+        >Bonnsite (????????)</a></li>-->
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
         >Heise (????????, 0.81)</a></li>
+  <li><a href="http://www.computerbild.de/download/Enigma-7766.html"
+        >Computer Bild (????????)<br>
+        <img src="images/computer-bild_top-250_downloads-logo.jpg"
+             alt="Computer Bild Top 250 Download" border="0">
+        </a></li>
 </ul>
 
 <p>?? &quot;Linux Game Tome&quot;, Enigma ???? ????????? ????? ?? ?????

Modified: homepage/input/schema.html
===================================================================
--- homepage/input/schema.html	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/input/schema.html	2009-02-15 01:00:11 UTC (rev 1537)
@@ -8,6 +8,7 @@
   <link rel="shortcut icon" href="$$imagedir$$/favicon.png" type="image/png">
   <meta name="keywords" content="enigma,puzzle,game,oxyd,per.oxyd,dongleware,linux,windows,mac">
   <meta http-equiv="Content-Type" content="text/html; charset=$$charset$$">
+  <meta http-equiv="Content-Style-Type" content="text/css">
 </head>
 
 <body link="#777777" vlink="#777777"  alink="#333333"> <!-- fake IE6 to color images -->

Modified: homepage/main.lua
===================================================================
--- homepage/main.lua	2009-02-14 22:13:04 UTC (rev 1536)
+++ homepage/main.lua	2009-02-15 01:00:11 UTC (rev 1537)
@@ -2,6 +2,8 @@
 general = {}
 html = {}
 
+verbose = false
+
 --
 --  Enigma Lua Homepage Gluer - main program
 --  (c) 2007 Enigma Team
@@ -108,7 +110,7 @@
 ----------------------------------------------------------------------
 -- Parsing and Macro-Replacing - The Program's Recursive Heartbeat
 ----------------------------------------------------------------------
- 
+
 function parse_text(v, text, lang, context)
     return string.gsub(text, "%$%$(.-)%$%$", function (s)
         local process = v[s] or general[s]
@@ -128,8 +130,12 @@
             if type(process_with_lang) == "string" then
                 return parse_text(v, process_with_lang, lang, context)
             else
-                scribble("  Missing entry "..s..lang.." for "
-                         ..context..", using fallback.\n")
+                if verbose then
+                    scribble("  Missing entry "..s..lang.." for "
+                             ..context..", using fallback.\n")
+                else
+                    scribble("  Missing entry "..s..lang..", using fallback.\n")
+                end
                 return parse_text(v, process, lang, context)
             end
         end
@@ -141,7 +147,7 @@
             for j,f in pairs(process) do
                 -- remove slash for name- and id-tags
                 fn = string.gsub(f, "/", "_")
-                if f ~= fn then
+                if (f ~= fn) and verbose then
                     scribble("  Note: changed anchors for "..f.." to "..fn..
                              ". Please correct href's.\n")
                 end
@@ -154,6 +160,23 @@
     end)
 end
 
+function replace_quots(v, text, lang, context)
+    local is_left_quot = true
+    local result = string.gsub(text, "&quot;", function (s)
+        if is_left_quot then
+            is_left_quot = not is_left_quot
+            return "$$left_quot$$"
+        else
+            is_left_quot = not is_left_quot
+            return "$$right_quot$$"
+        end
+    end)
+    if not is_left_quot then
+        scribble("  Missing quotation mark in "..context..".\n")
+    end
+    return result
+end
+
 function parse_html(v, infilename0, lang)
     if not infilename0 then
         error("Error during creation of "..v.title..": Expected filename, got nil.")
@@ -167,19 +190,23 @@
         infile = io.open(infilename0, "r")
         if infile == nil then
             error("Error: Neither "..infilename.." nor "..infilename0.." exist.")
-        else        
-            scribble ("No file "..infilename..", using fallback "..infilename0.."...\n")
+        else
+            if verbose then
+                scribble ("No file "..infilename..", using fallback "..infilename0.."...\n")
+            end
             infilename = infilename0
         end
     else
-        scribble ("Reading input from "..infilename.." ...\n")
+        if verbose then
+            scribble ("Reading input from "..infilename.." ...\n")
+        end
     end
 
     -- Read and process infile
 
     local body = infile:read("*a")
     infile:close()
-    return parse_text(v, body, lang, infilename)
+    return parse_text(v, replace_quots(v, body, lang, infilename), lang, infilename)
 end
 
 ----------------------------------------------------------------------



From ged at mail.berlios.de  Sun Feb 15 11:42:26 2009
From: ged at mail.berlios.de (ged at mail.berlios.de)
Date: Sun, 15 Feb 2009 11:42:26 +0100
Subject: [Enigma-game-svn] r1538 - in homepage/input: . articles news
Message-ID: <200902151042.n1FAgQlC013765@sheep.berlios.de>

Author: ged
Date: 2009-02-15 11:42:17 +0100 (Sun, 15 Feb 2009)
New Revision: 1538

Added:
   homepage/input/articles/marbleous_4_ru.html
Modified:
   homepage/input/articles/infobox_marbleous_ru.html
   homepage/input/articles/marbleous_3_ru.html
   homepage/input/infobox_ru.html
   homepage/input/menu_ru.html
   homepage/input/news/news_issue25_ru.html
   homepage/input/news/news_issue26_ru.html
   homepage/input/output-files.lua
Log:
Homepage:
- Russian translation for marbleous4 pages, new menu entry, addendas to news
- Specifying html entities to be used as left and right quotation?\194?\160marks in Russian
- Fix for marbleous3


Modified: homepage/input/articles/infobox_marbleous_ru.html
===================================================================
--- homepage/input/articles/infobox_marbleous_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/articles/infobox_marbleous_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -8,6 +8,6 @@
          <br><br>
          <a href="$$marbleous_3$$">????? 3: <br>????? &quot;?????? ???&quot;: &quot;?????? ?????? ???? ???????????!&quot;</a>
          <br><br>
-         <a href="$$marbleous_4$$">????? 4: <br>Alcatraz: Get out of the straightjackets of this world</a>
+         <a href="$$marbleous_4$$">????? 4: <br>Alcatraz: ??????? ?? ???????????? ??????? ????? ????</a>
        </div>
     </div>

Modified: homepage/input/articles/marbleous_3_ru.html
===================================================================
--- homepage/input/articles/marbleous_3_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/articles/marbleous_3_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -1,7 +1,7 @@
 
 <h2>???????????!</h2>
 
-<h3>The Novice &mdash; ????? &quot;?????? ???&quot;: &quot;?????? ?????? ???? ???????????!&quot;</h3>
+<h3>???????? ?? ??????? &mdash; ????? &quot;?????? ???&quot;: &quot;?????? ?????? ???? ???????????!&quot;</h3>
 
 <p>
 ??????????? &mdash; ?? ??? ??? ??????? ??????????? ? ?????????????

Added: homepage/input/articles/marbleous_4_ru.html
===================================================================
--- homepage/input/articles/marbleous_4_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/articles/marbleous_4_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -0,0 +1,24 @@
+
+<h2>???????????!</h2>
+
+<h3>???????? ?? ??????? &mdash; Alcatraz: ??????? ?? ???????????? ??????? ????? ????</h3>
+
+<p>
+?????, ? ????????????? ?????? Enigma, Alcatraz &ndash; ?????? ?? ?????? ??????? ??????? &ndash;
+?? ? ?????, ????????????. ???????????? ????????? ?????, ???? ??? ?? ??????? ?????????
+????? ??????????? ? ????? &quot;????&quot;. ??????? ????????. &quot;Houdini&quot; Ronald'?
+??? ??? ???? ??????????? ?????? ????????????? ?????? ????????????? ?? ?????: ????????? ?
+?????????? ??????, ??????? ????? ??????? ? ???? ????????? ????, ?????, ?????? ?????????,
+???????????? ?? ??????????? ??????. ????????? ???????, ???????????? ?? ??????? ????????,
+???????? ????? ? ???????? ??? ??????? ?? ????? ???? ????? ? ???????? &quot;????? ???&quot;!
+???????? ???? ???? ? ????? ???????? ??????? ????. ???????? ????????? ?????. ? &quot;Map It
+Out&quot;, ???? ? ???????? ????? ?? ???????????, ?????????? ? ???????????? ???????? ??? ?
+?????? ?? ????? &quot;?????????&quot; ?????????????? ?????????. ?????? ??????????, ?????????,
+??????, ????????? ????? ????? ??????????: ???????? ????! ? ????? ??, ???????, ??????????
+?? ??????? ? ??????????? ? ??????? - ??????? ???????! ??????? ???????? ? ??????????
+&quot;?????????&quot;.
+</p>
+
+<p><i>
+Mecke
+</i></p>

Modified: homepage/input/infobox_ru.html
===================================================================
--- homepage/input/infobox_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/infobox_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -4,9 +4,9 @@
          <a href="$$marbleous_4$$">?????</a> ????? ???????? ? ?????????
 	 ???????????? ?????? &quot;???????&quot;, ? ??? ????? ? ????????????!
 	  
-         <h3>First Trailer</h3>
-         Mecke and Clifford created the first trailer for Enigma, 
-         see the video <a href="$$trailer_1$$">here</a>, have fun!
+         <h3>?????? ???????</h3>
+         Mecke ? Clifford ??????? ??? Enigma ?????? ???????, ????? ?????
+         ?????????? <a href="$$trailer_1$$">?????</a>, ????????? ?????????!
 
          <h3>??????? ????? ????</h3>
          <a href="$$eoya_2008$$"><img src="images/articles/eoya_2008.png"

Modified: homepage/input/menu_ru.html
===================================================================
--- homepage/input/menu_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/menu_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -8,7 +8,7 @@
             <li><a href="news_ru.html">??????? ? ?????</a></li>
             <li><a href="$$hp_archive$$">????? ???????? ????????</a></li>
             <li><a href="screenshots_ru.html">?????????</a></li>
-            <li><a href="$$trailer_1$$">Trailer</a></li>
+            <li><a href="$$trailer_1$$">???????</a></li>
             <li><a href="credits_ru.html">?????????????</a></li>
           </ul>
         </li>

Modified: homepage/input/news/news_issue25_ru.html
===================================================================
--- homepage/input/news/news_issue25_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/news/news_issue25_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -13,4 +13,4 @@
 <a href="http://enigma-game.berlios.de/loty_2007_de.php">?????</a>, ????? ???????
 ???????? (????????, ??????? ?????? ???). ????? ??????? ??????! :-)</p>
 
-<p>Addendum: You can now find the results <a href="$$eoya_2007$$">here</a>.
+<p>??????????: ? ???????????? ?? ?????? ???????????? <a href="$$eoya_2007$$">?????</a>.

Modified: homepage/input/news/news_issue26_ru.html
===================================================================
--- homepage/input/news/news_issue26_ru.html	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/news/news_issue26_ru.html	2009-02-15 10:42:17 UTC (rev 1538)
@@ -18,4 +18,4 @@
 	href="http://enigma.seymutor.de/eoya_2008/eoya_2008_ru.php">?????</a> ??? ???????
 ??????. ????? ??????? ??????! :-)</p>
 
-<p>Addendum: You can now find the results <a href="$$eoya_2008$$">here</a>.
+<p>??????????: ? ???????????? ?? ?????? ???????????? <a href="$$eoya_2008$$">?????</a>.

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2009-02-15 01:00:11 UTC (rev 1537)
+++ homepage/input/output-files.lua	2009-02-15 10:42:17 UTC (rev 1538)
@@ -144,8 +144,8 @@
     right_quot    = "&rdquo;",
     left_quot_de  = "&bdquo;",
     right_quot_de = "&ldquo;",
-    left_quot_ru  = "&quot;",
-    right_quot_ru = "&quot;",
+    left_quot_ru  = "&laquo;",
+    right_quot_ru = "&raquo;",
 
     imagedir    = "images",
     imagedir_de = "images",



From ral at mail.berlios.de  Sun Feb 15 16:25:45 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 15 Feb 2009 16:25:45 +0100
Subject: [Enigma-game-svn] r1539 - in trunk/src: . items
Message-ID: <200902151525.n1FFPjui028332@sheep.berlios.de>

Author: ral
Date: 2009-02-15 16:25:45 +0100 (Sun, 15 Feb 2009)
New Revision: 1539

Modified:
   trunk/src/items/Crack.cc
   trunk/src/items/Meditation.cc
   trunk/src/world.cc
Log:
Trunk 1.1: new API reengineering
- fix meditation INDISPENSIBLE counting
- add registratin of it_crack as it_crack_s

Modified: trunk/src/items/Crack.cc
===================================================================
--- trunk/src/items/Crack.cc	2009-02-15 10:42:17 UTC (rev 1538)
+++ trunk/src/items/Crack.cc	2009-02-15 15:25:45 UTC (rev 1539)
@@ -134,6 +134,7 @@
     };
 
     BOOT_REGISTER_START
+        BootRegister(new Crack(0),  "it_crack");
         BootRegister(new Crack(-1), "it_crack_i");
         BootRegister(new Crack(0),  "it_crack_s");
         BootRegister(new Crack(1),  "it_crack_m");

Modified: trunk/src/items/Meditation.cc
===================================================================
--- trunk/src/items/Meditation.cc	2009-02-15 10:42:17 UTC (rev 1538)
+++ trunk/src/items/Meditation.cc	2009-02-15 15:25:45 UTC (rev 1539)
@@ -204,9 +204,9 @@
     void Meditation::shovel() {
         int newState = (state > 0) ? state - 1 : state + 1;
         if (newState == 0) {
-            // double register indispensible holes as the kill will subtract one essentialness 
-            if (/* state != HILL && state != BUMP && */ (objFlags & OBJBIT_INDISPENSIBLE))
-                ChangeMeditation(0, +1, 0, 0);
+//            // double register indispensible holes as the kill will subtract one essentialness 
+//            if (/* state != HILL && state != BUMP && */ (objFlags & OBJBIT_INDISPENSIBLE))
+//                ChangeMeditation(0, +1, 0, 0);
             kill();
         } else {
             setState(newState);

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-15 10:42:17 UTC (rev 1538)
+++ trunk/src/world.cc	2009-02-15 15:25:45 UTC (rev 1539)
@@ -2355,7 +2355,7 @@
             && (level->engagedIndispensableHollows + level->engagedDispensableHollows) == level->numMeditatists) {
         server::FinishLevel();
     }
-    
+    Log << "chang meditation:  "<< level->numMeditatists << " " << level->indispensableHollows << " "<<level->engagedIndispensableHollows << " " << level->engagedDispensableHollows << "\n";
 }
 
 



From ral at mail.berlios.de  Wed Feb 18 00:23:28 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 18 Feb 2009 00:23:28 +0100
Subject: [Enigma-game-svn] r1540 - trunk/src
Message-ID: <200902172323.n1HNNSnf013178@sheep.berlios.de>

Author: ral
Date: 2009-02-18 00:23:27 +0100 (Wed, 18 Feb 2009)
New Revision: 1540

Modified:
   trunk/src/WorldProxy.cc
   trunk/src/lua.cc
   trunk/src/server.cc
   trunk/src/server.hh
   trunk/src/world.cc
Log:
Trunk 1.1: new API reengineering
- fix GlobalForce now can be set prior world creation

Modified: trunk/src/WorldProxy.cc
===================================================================
--- trunk/src/WorldProxy.cc	2009-02-15 15:25:45 UTC (rev 1539)
+++ trunk/src/WorldProxy.cc	2009-02-17 23:23:27 UTC (rev 1540)
@@ -87,7 +87,7 @@
         } else if (key == "FrictionStrength") {
             return server::FrictionFactor;
         } else if (key == "GlobalForce") {
-            return GetGlobalForce();
+            return server::GlobalForce;
         } else if (key == "MeditationStrength") {
             return server::HoleForce;
         } else if (key == "MagnetStrength") {
@@ -187,7 +187,7 @@
         } else if (key == "FrictionStrength") {
             server::FrictionFactor = val;
         } else if (key == "GlobalForce") {
-            SetGlobalForce(val);
+            server::GlobalForce = val;
         } else if (key == "MeditationStrength") {
             server::HoleForce = val;
         } else if (key == "MagnetStrength") {

Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2009-02-15 15:25:45 UTC (rev 1539)
+++ trunk/src/lua.cc	2009-02-17 23:23:27 UTC (rev 1540)
@@ -829,7 +829,7 @@
     ecl::V2 v;
     v[0] = lua_tonumber(L, 1);
     v[1] = lua_tonumber(L, 2);
-    SetGlobalForce(v);
+    server::GlobalForce = v;
     return 0;
 }
 

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-02-15 15:25:45 UTC (rev 1539)
+++ trunk/src/server.cc	2009-02-17 23:23:27 UTC (rev 1540)
@@ -103,6 +103,7 @@
 double   server::Brittleness;
 double   server::Fragility;
 double   server::CrackSpreading;
+ecl::V2  server::GlobalForce;
 double   server::BumperForce;
 double   server::ElectricForce;
 double   server::EnigmaCompatibility;       // no Lua access
@@ -266,6 +267,7 @@
     server::Brittleness       = 0.5;
     server::Fragility         = 1.0;
     server::CrackSpreading    = 0.5;
+    server::GlobalForce       = ecl::V2(0, 0);
     server::SlopeForce        = 25.0;
     server::FlatForce         = 0.0;
     server::FrictionFactor    = 1.0;

Modified: trunk/src/server.hh
===================================================================
--- trunk/src/server.hh	2009-02-15 15:25:45 UTC (rev 1539)
+++ trunk/src/server.hh	2009-02-17 23:23:27 UTC (rev 1540)
@@ -25,6 +25,7 @@
 
 #include "lev/Proxy.hh"
 #include "Value.hh"
+#include "ecl_math.hh"
 
 #include <stdint.h>
 
@@ -97,6 +98,7 @@
     // 1.10 crack variables
     extern double   Fragility;
     extern double   CrackSpreading;
+    extern ecl::V2  GlobalForce;
     
     extern int      MaxOxydColor;
 

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-15 15:25:45 UTC (rev 1539)
+++ trunk/src/world.cc	2009-02-17 23:23:27 UTC (rev 1540)
@@ -226,7 +226,7 @@
 World::World(int ww, int hh) : fields(ww,hh), preparing_level(true),
         leftmost_actor (NULL), rightmost_actor (NULL), numMeditatists (0), 
         indispensableHollows (0), engagedIndispensableHollows(0), engagedDispensableHollows (0),
-        globalForce (0, 0), registerCriticalPositions (false), scrambleIntensity(10) // difficult default
+        registerCriticalPositions (false), scrambleIntensity(10) // difficult default
         {
     w = ww;
     h = hh;
@@ -593,7 +593,7 @@
     if (a->is_on_floor()) {
         if (Floor *floor = a->m_actorinfo.field->floor) {
             // Constant force
-            f += globalForce;
+            f += server::GlobalForce;
 
             // Mouse force
             if (a->get_controllers() != 0) {
@@ -1796,14 +1796,6 @@
     level->remove (ff);
 }
 
-void SetGlobalForce(V2 force) {
-    level->globalForce = force;
-}
-
-ecl::V2 GetGlobalForce() {
-    return level->globalForce;
-}
-
 /* -------------------- Signals, Messages, Actions -------------------- */
 
 void AddSignal (const GridLoc &srcloc, const GridLoc &dstloc, const string &msg) {



From ral at mail.berlios.de  Wed Feb 18 00:25:13 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 18 Feb 2009 00:25:13 +0100
Subject: [Enigma-game-svn] r1541 - in branches/1.01: lib-src/enigma-core src
Message-ID: <200902172325.n1HNPDCx013326@sheep.berlios.de>

Author: ral
Date: 2009-02-18 00:25:13 +0100 (Wed, 18 Feb 2009)
New Revision: 1541

Modified:
   branches/1.01/lib-src/enigma-core/ecl_util.cc
   branches/1.01/src/Makefile.am
Log:
Branch 1.01: merge trunk fix patch r1536
- fix crash caused by formatting of long strings due to an instable buffer
  reallocation that did not reinitialize vargs
Note:
- as vargs implementation is very system specific this bug did not cause
  crashes on all systems.
- Fedora, Debian 64 bit compilations are reported to be critical in respect to
  this bug



Modified: branches/1.01/lib-src/enigma-core/ecl_util.cc
===================================================================
--- branches/1.01/lib-src/enigma-core/ecl_util.cc	2009-02-17 23:23:27 UTC (rev 1540)
+++ branches/1.01/lib-src/enigma-core/ecl_util.cc	2009-02-17 23:25:13 UTC (rev 1541)
@@ -63,39 +63,32 @@
     return true;
 }
 
-namespace {
-    string vstrf(const char *format, va_list argPtr) {
-        static size_t  buf_size = 128;
-        static char   *buffer   = new char[buf_size];
+std::string ecl::strf(const char *format, ...) {
+    static size_t  buf_size = 512;
+    static char   *buffer   = new char[buf_size];
+    
+    va_list argPtr;
+    size_t length;
 
-        size_t length;
-        while (1) {
-            if (!buffer) {
-                assert(buffer); // to stop when debugging
-                return "<alloc problem>";
-            }
-
-            length = vsnprintf(buffer, buf_size, format, argPtr);
-            if (length < buf_size) break; // string fits into current buffer
-
-            // otherwise resize buffer :
-            buf_size += buf_size/2;
-            // fprintf(stderr, "Reallocating vstrf-buffer to size=%u\n", buf_size);
-            delete [] buffer;
-            buffer    = new char[buf_size];
+    while (true) {
+        if (!buffer) {
+            assert(buffer); // to stop when debugging
+            return "<alloc problem>";
         }
 
-        return string(buffer, length);
+        va_start(argPtr, format);
+        length = vsnprintf(buffer, buf_size, format, argPtr);
+        va_end(argPtr);
+        
+        if (length >= 0 && length < buf_size - 1) 
+            // string fits into current buffer
+            return std::string(buffer, length);
+
+        // otherwise resize buffer :
+        buf_size *= 2;
+//        fprintf(stderr, "Reallocating vstrf-buffer to size=%u\n", buf_size);
+        delete [] buffer;
+        buffer = new char[buf_size];
     }
 }
 
-string ecl::strf(const char *format, ...)
-{
-    va_list argPtr;
-    va_start(argPtr, format);
-    string result = vstrf(format, argPtr);
-    va_end(argPtr);
-
-    return result;
-}
-

Modified: branches/1.01/src/Makefile.am
===================================================================
--- branches/1.01/src/Makefile.am	2009-02-17 23:23:27 UTC (rev 1540)
+++ branches/1.01/src/Makefile.am	2009-02-17 23:25:13 UTC (rev 1541)
@@ -12,7 +12,7 @@
 
 CXXFLAGS = @CXXFLAGS@\
 	-DSYSTEM_DATA_DIR=\"$(datadir)/enigma\" \
-	-DLOCALEDIR=\"$(localedir)\" \
+	-DLOCALEDIR=\"$(localedir_enigma)\" \
 	-I$(top_srcdir)/lib-src/zipios++  \
 	-I$(top_builddir)/lib-src/zipios++ \
 	-I$(top_srcdir)/lib-src/lua \
@@ -186,14 +186,14 @@
 
 if MINGW32
 
-  localedir := data/locale
+  localedir_enigma := data/locale
   mingw_ldadd := enigma_ico.o -lws2_32
   enigma_ico.o: enigma.rc enigma.ico
 	$(WINDRES) $(srcdir)/enigma.rc --include-dir=$(srcdir) -O coff -o enigma_ico.o
 
 else # not MINGW32
 
-  localedir = $(datadir)/locale
+  localedir_enigma := $(datadir)/locale
   mingw_ldadd =
 
 endif



From raoulb at bluewin.ch  Wed Feb 18 17:08:31 2009
From: raoulb at bluewin.ch (Raoul)
Date: Wed, 18 Feb 2009 17:08:31 +0100
Subject: [Enigma-game-svn] r1542
Message-ID: <20090218170832.37af93a5@amarok.loinet.zh>

-> Many new API level rewritings
-> 5 new levels from Andreas and /dev/null


From raoul at mail.berlios.de  Wed Feb 18 19:21:34 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Wed, 18 Feb 2009 19:21:34 +0100
Subject: [Enigma-game-svn] r1543 - in trunk: attic/images-floors data
	data/gfx32 data/gfx40 data/gfx48
Message-ID: <200902181821.n1IILYvw004790@sheep.berlios.de>

Author: raoul
Date: 2009-02-18 19:21:32 +0100 (Wed, 18 Feb 2009)
New Revision: 1543

Added:
   trunk/attic/images-floors/Yinyangfloor_yang_gfx32.xcf
   trunk/attic/images-floors/Yinyangfloor_yang_gfx40.xcf
   trunk/attic/images-floors/Yinyangfloor_yang_gfx48.xcf
   trunk/attic/images-floors/Yinyangfloor_yin_gfx32.xcf
   trunk/attic/images-floors/Yinyangfloor_yin_gfx40.xcf
   trunk/attic/images-floors/Yinyangfloor_yin_gfx48.xcf
   trunk/data/gfx32/fl_yinyang_yang.png
   trunk/data/gfx32/fl_yinyang_yin.png
   trunk/data/gfx40/fl_yinyang_yang.png
   trunk/data/gfx40/fl_yinyang_yin.png
   trunk/data/gfx48/fl_yinyang_yang.png
   trunk/data/gfx48/fl_yinyang_yin.png
Removed:
   trunk/data/gfx32/fl-acblack.png
   trunk/data/gfx32/fl-acwhite.png
   trunk/data/gfx40/fl-acblack.png
   trunk/data/gfx40/fl-acwhite.png
   trunk/data/gfx48/fl-acblack.png
   trunk/data/gfx48/fl-acwhite.png
Modified:
   trunk/data/models-2d.lua
Log:
-> Images for yinyang floor



Added: trunk/attic/images-floors/Yinyangfloor_yang_gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/Yinyangfloor_yang_gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/Yinyangfloor_yang_gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/Yinyangfloor_yang_gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/Yinyangfloor_yang_gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/Yinyangfloor_yang_gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/Yinyangfloor_yin_gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/Yinyangfloor_yin_gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/Yinyangfloor_yin_gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/Yinyangfloor_yin_gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/Yinyangfloor_yin_gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/Yinyangfloor_yin_gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Deleted: trunk/data/gfx32/fl-acblack.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/fl-acwhite.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/fl_yinyang_yang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/fl_yinyang_yang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/fl_yinyang_yin.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/fl_yinyang_yin.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/fl-acblack.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/fl-acwhite.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/fl_yinyang_yang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/fl_yinyang_yang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/fl_yinyang_yin.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/fl_yinyang_yin.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/fl-acblack.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/fl-acwhite.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/fl_yinyang_yang.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/fl_yinyang_yang.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/fl_yinyang_yin.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/fl_yinyang_yin.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-18 16:06:09 UTC (rev 1542)
+++ trunk/data/models-2d.lua	2009-02-18 18:21:32 UTC (rev 1543)
@@ -244,8 +244,8 @@
     floorlist = {
         -- single
         {"fl_abyss", noframe = true},
-        {"fl-acblack", noframe = true},
-        {"fl-acwhite", noframe = true},
+        {"fl_yinyang_yin", noframe = true},
+        {"fl_yinyang_yang", noframe = true},
         {"fl_dark"},
         {"fl_bluegreen"},
         {"fl_darkgray"},
@@ -413,9 +413,6 @@
     DefAlias("fl-space-force", "fl_space")
     DefAlias("fl_samba_h", "fl_samba1")
     DefAlias("fl_samba_v", "fl_samba2")
-    DefAlias("fl_yinyang", "fl-acblack")
-    DefAlias("fl_yinyang_yin", "fl-acblack")
-    DefAlias("fl_yinyang_yang", "fl-acwhite")
 end
 
 ----------------------



From andreasl at mail.berlios.de  Thu Feb 19 02:59:27 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Thu, 19 Feb 2009 02:59:27 +0100
Subject: [Enigma-game-svn] r1544 - in trunk/data: gfx32 gfx40 gfx48
Message-ID: <200902190159.n1J1xRLP005510@sheep.berlios.de>

Author: andreasl
Date: 2009-02-19 02:59:19 +0100 (Thu, 19 Feb 2009)
New Revision: 1544

Added:
   trunk/data/gfx32/st_stoneimpulse_break.png
   trunk/data/gfx40/st_stoneimpulse_break.png
   trunk/data/gfx48/st_stoneimpulse_break.png
Modified:
   trunk/data/gfx40/st-bolder.png
   trunk/data/gfx48/st-bolder.png
Log:
Trunk:
 - Fixed frame of boulder image in gfx40 and 48
 - Proposal for a stoneimpulse break-anim in gfx32, 40, 48:
    - filename is st_stoneimpulse_break.png
    - consists of 8 images


Added: trunk/data/gfx32/st_stoneimpulse_break.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_stoneimpulse_break.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/data/gfx40/st-bolder.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/st_stoneimpulse_break.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_stoneimpulse_break.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/data/gfx48/st-bolder.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/st_stoneimpulse_break.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_stoneimpulse_break.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From raoul at mail.berlios.de  Thu Feb 19 21:58:13 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Thu, 19 Feb 2009 21:58:13 +0100
Subject: [Enigma-game-svn] r1545 - in trunk: attic/images-stones data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200902192058.n1JKwDw5024514@sheep.berlios.de>

Author: raoul
Date: 2009-02-19 21:58:11 +0100 (Thu, 19 Feb 2009)
New Revision: 1545

Added:
   trunk/attic/images-stones/Yinyangswitch_inactive_gfx16.xcf
   trunk/attic/images-stones/Yinyangswitch_inactive_gfx32.xcf
   trunk/attic/images-stones/Yinyangswitch_inactive_gfx40.xcf
   trunk/attic/images-stones/Yinyangswitch_inactive_gfx48.xcf
   trunk/attic/images-stones/Yinyangswitch_inactive_gfx64.xcf
   trunk/data/gfx16/st_yinyang_inactive.png
   trunk/data/gfx32/st_yinyang_inactive.png
   trunk/data/gfx40/st_yinyang_inactive.png
   trunk/data/gfx48/st_yinyang_inactive.png
   trunk/data/gfx64/st_yinyang_inactive.png
Log:
-> Yinyang inactive stone models and templates


Added: trunk/attic/images-stones/Yinyangswitch_inactive_gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/Yinyangswitch_inactive_gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/Yinyangswitch_inactive_gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/Yinyangswitch_inactive_gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/Yinyangswitch_inactive_gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/Yinyangswitch_inactive_gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/Yinyangswitch_inactive_gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/Yinyangswitch_inactive_gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/Yinyangswitch_inactive_gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/Yinyangswitch_inactive_gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/st_yinyang_inactive.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_yinyang_inactive.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_yinyang_inactive.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_yinyang_inactive.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st_yinyang_inactive.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_yinyang_inactive.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st_yinyang_inactive.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_yinyang_inactive.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_yinyang_inactive.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_yinyang_inactive.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From ral at mail.berlios.de  Fri Feb 20 00:18:21 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Fri, 20 Feb 2009 00:18:21 +0100
Subject: [Enigma-game-svn] r1546 - in trunk: data data/schemas src
	src/actors src/stones
Message-ID: <200902192318.n1JNILpm013674@sheep.berlios.de>

Author: ral
Date: 2009-02-20 00:18:20 +0100 (Fri, 20 Feb 2009)
New Revision: 1546

Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Object.cc
   trunk/src/actors/Balls.cc
   trunk/src/actors/Balls.hh
   trunk/src/lua.cc
   trunk/src/stones.hh
   trunk/src/stones/DispenserStone.cc
   trunk/src/stones/SimpleStones.cc
   trunk/src/stones/SimpleStones.hh
   trunk/src/world.cc
Log:
Trunk 1.1: new API reengineering
- fix old API arg check on AddScramble() - bug report #9858
- adjust pearl sink speed to marble sink speed - use common SinkTime variable
- fix pearls should not sink in modes besides Enigma
- st_yinyang improvements:
  - add st_yinyang_inactive - no player switch possible
  - state = 2 represents an inactive st_yinyang
  - attribute "loop", default true for infinite reactivation, false causes
    yinyang to switch to inactive after activation.


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/data/models-2d.lua	2009-02-19 23:18:20 UTC (rev 1546)
@@ -153,9 +153,9 @@
     DefAlias ("ac_pearl_white-sink0", "ac-whiteball-small-fall1")
     DefAlias ("ac_pearl_white-sink1", "ac-whiteball-small-fall2")
     DefAlias ("ac_pearl_white-sink2", "ac-whiteball-small-fall3")
-    DefAlias ("ac_pearl_white-sink3", "ac-whiteball-small-fall4")
-    DefAlias ("ac_pearl_white-sink4", "ac-whiteball-small-fall5")
-    DefAlias ("ac_pearl_white-sink5", "ac-whiteball-small-fall5")
+    DefAlias ("ac_pearl_white-sink3", "ac-whiteball-small-fall3")
+    DefAlias ("ac_pearl_white-sink4", "ac-whiteball-small-fall4")
+    DefAlias ("ac_pearl_white-sink5", "ac-whiteball-small-fall4")
     DefAlias ("ac_pearl_white-sink6", "ac-whiteball-small-fall5")
     DefAlias ("ac_pearl_white-sunk", "invisible")
 
@@ -818,6 +818,7 @@
     DefStone("st_yellow")
     DefStone("st_blur_straight")
     DefStone("st_blur_cross")
+    DefStone("st_yinyang_inactive", "sh-round")
 end
 
 ---------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/data/schemas/objects.xml	2009-02-19 23:18:20 UTC (rev 1546)
@@ -1739,6 +1739,7 @@
       <attr name="orientation"/>
       <attr name="steady"/>
       <msg name="signal"/>
+      <msg name="ignite"/>
       <msg name="_model_reanimated"/>
       <msg name="_init"/>
       <msg name="_trigger"/>
@@ -1888,6 +1889,7 @@
     <object name="st_yellow"/>
     <object name="st_yinyang">
       <attr name="instant"/>
+      <attr name="loop"/>
     </object>
     <object name="st_yinyang_instant">
       <attr name="instant" value="true"/>
@@ -1896,5 +1898,9 @@
       <attr name="state" value="1"/>
       <attr name="instant" value="false"/>
     </object>
+    <object name="st_yinyang_inactive">
+      <attr name="state" value="2"/>
+      <attr name="instant" value="false"/>
+    </object>
   </zoo>
 </objects>

Modified: trunk/src/Object.cc
===================================================================
--- trunk/src/Object.cc	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/Object.cc	2009-02-19 23:18:20 UTC (rev 1546)
@@ -116,7 +116,7 @@
     const char * Object::get_kind() const {      // To be made pure virtual
         AttribMap::const_iterator i = attribs.find("kind");
         ASSERT(i != attribs.end() && i->second.getType() == Value::STRING, XLevelRuntime,
-                "Object: attribute kind not found");
+                ecl::strf("Object: attribute kind not found - class '%s'", getClass().c_str()).c_str());
         return i->second.get_string();
     }
     

Modified: trunk/src/actors/Balls.cc
===================================================================
--- trunk/src/actors/Balls.cc	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/actors/Balls.cc	2009-02-19 23:18:20 UTC (rev 1546)
@@ -29,8 +29,8 @@
 
     const double BasicBall::SHIELD_TIME = 10.0;
 
-    BasicBall::BasicBall(const ActorTraits &tr, int maxSinkDepthValue) : Actor (tr), 
-            maxSinkDepth (maxSinkDepthValue), sinkDepth (minSinkDepth), sinkModel (-1),
+    BasicBall::BasicBall(const ActorTraits &tr) : Actor (tr), 
+            sinkDepth (minSinkDepth), sinkModel (-1),
             lastshinep (false), vortex_normal_time (0), m_halosprite (),
             m_shield_rest_time (0), m_halostate (NOHALO),
             m_drunk_rest_time (0), m_invisible_rest_time (0) {
@@ -537,7 +537,7 @@
     };
 
 /* -------------------- Pearl  -------------------- */
-    Pearl::Pearl(int color) : BasicBall(traits[color], 4) {
+    Pearl::Pearl(int color) : BasicBall(traits[color]) {
         setAttr("adhesion", 1.0);
         setAttr("color", color);
         setAttr("owner", YIN);
@@ -551,6 +551,13 @@
     const char *Pearl::get_kind() const {
         return "ac_pearl_white";
     }
+    
+    void Pearl::sink(double dtime) {
+        if (server::GameCompatibility != GAMET_ENIGMA)
+            return;    // do not sink pearls in oxyd modes
+        else
+            BasicBall::sink(dtime);
+    }
 
     int Pearl::traitsIdx() const {
         return getAttr("color");

Modified: trunk/src/actors/Balls.hh
===================================================================
--- trunk/src/actors/Balls.hh	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/actors/Balls.hh	2009-02-19 23:18:20 UTC (rev 1546)
@@ -52,7 +52,7 @@
         };
 
     public:
-        BasicBall(const ActorTraits &tr, int maxSinkDepthValue = 7);
+        BasicBall(const ActorTraits &tr);
 
         // Object interface.
         virtual Value message(const Message &m);
@@ -83,8 +83,10 @@
         // ModelCallback interface  - Animation callback
         virtual void animcb();
 
+    protected:
+        virtual void sink(double dtime);
+
     private:
-        void sink(double dtime);
         void disable_shield();
         void change_state_noshield(iState newstate);
         void change_state(iState newstate);
@@ -96,7 +98,7 @@
         void update_halo();
 
         static const int minSinkDepth = 0; // normal level
-        int maxSinkDepth;       // actor dies at this depth
+        static const int maxSinkDepth = 7; // actor dies at this depth
         double sinkDepth;       // how deep actor has sunk
         int    sinkModel;       // current model
         bool   lastshinep;
@@ -141,6 +143,8 @@
         virtual std::string getClass() const;
         virtual const char *get_kind() const;
         
+    protected:
+        virtual void sink(double dtime);
     private:
         int traitsIdx() const;
     };

Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/lua.cc	2009-02-19 23:18:20 UTC (rev 1546)
@@ -897,6 +897,9 @@
 {
     int         x       = round_down<int>(lua_tonumber(L, 1));
     int         y       = round_down<int>(lua_tonumber(L, 2));
+    if (!lua_isstring(L, 3))
+        throwLuaError(L, "AddScramble: Third argument must be one character of \"wsen\"");
+
     const char *dir     = lua_tostring(L,3);
     const char *allowed = "wsen";
     char       *found   = strchr(allowed, dir[0]);

Modified: trunk/src/stones/DispenserStone.cc
===================================================================
--- trunk/src/stones/DispenserStone.cc	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/stones/DispenserStone.cc	2009-02-19 23:18:20 UTC (rev 1546)
@@ -113,9 +113,9 @@
     }
 
     StoneTraits DispenserStone::traits[3] = {
-        {"st_dispenser_bombblack", st_INVALID, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
-        {"st_dispenser_bombwhite", st_INVALID, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
-        {"st_dispenser_dynamite", st_INVALID, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
+        {"st_dispenser_bombblack", st_dispenser, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
+        {"st_dispenser_bombwhite", st_dispenser, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
+        {"st_dispenser_dynamite", st_dispenser, stf_none, material_stone, 1.0, MOVABLE_BREAKABLE},
     };
 
     BOOT_REGISTER_START

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/stones/SimpleStones.cc	2009-02-19 23:18:20 UTC (rev 1546)
@@ -290,6 +290,16 @@
         return "st_yinyang";
     }
     
+    int YinyangStone::maxState() const {
+        return 2;
+    }
+    
+    void YinyangStone::toggleState() {
+        // just toggle IDLE states, do not stop ACTIVE, or reactive INACTIVE states
+        if (state == IDLE)
+           setState(ACTIVE);
+    }
+    
     void YinyangStone::setState(int extState) {
         if (!isDisplayable())
            state = extState;
@@ -302,12 +312,14 @@
     void YinyangStone::init_model() {
         if (state == IDLE)
             set_model("st_yinyang");
+        else if (state == INACTIVE)
+            set_model("st_yinyang_inactive");
         else
             set_anim("st_yinyang-anim");
     }
     
     void YinyangStone::animcb() {
-        state = IDLE;
+        state =  (getAttr("loop").to_bool()) ? IDLE : INACTIVE;
         init_model();
         if (!getAttr("instant").to_bool())
             switchPlayer();
@@ -351,6 +363,7 @@
         BootRegister(new YinyangStone(0), "st_yinyang");
         BootRegister(new YinyangStone(0, true), "st_yinyang_instant");
         BootRegister(new YinyangStone(1), "st_yinyang_active");
+        BootRegister(new YinyangStone(2), "st_yinyang_inactive");
     BOOT_REGISTER_END
 
 } // namespace enigma

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/stones/SimpleStones.hh	2009-02-19 23:18:20 UTC (rev 1546)
@@ -184,7 +184,8 @@
     private:
         enum iState {
             IDLE,       ///< 
-            ACTIVE      ///< 
+            ACTIVE,     ///< 
+            INACTIVE    ///< 
         };
     public:
         YinyangStone(int initState, bool isInstant =false);
@@ -193,6 +194,8 @@
         virtual std::string getClass() const;        
         
         // StateObject interface
+        virtual int maxState() const;
+        virtual void toggleState();
         virtual void setState(int extState);
 
         // GridObject interface

Modified: trunk/src/stones.hh
===================================================================
--- trunk/src/stones.hh	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/stones.hh	2009-02-19 23:18:20 UTC (rev 1546)
@@ -58,6 +58,7 @@
         st_death,
         st_death_invisible,
         st_disco,
+        st_dispenser,
         st_door,
         st_easymode,
         st_magic_oxyda,

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-19 20:58:11 UTC (rev 1545)
+++ trunk/src/world.cc	2009-02-19 23:18:20 UTC (rev 1546)
@@ -2347,7 +2347,7 @@
             && (level->engagedIndispensableHollows + level->engagedDispensableHollows) == level->numMeditatists) {
         server::FinishLevel();
     }
-    Log << "chang meditation:  "<< level->numMeditatists << " " << level->indispensableHollows << " "<<level->engagedIndispensableHollows << " " << level->engagedDispensableHollows << "\n";
+//    Log << "chang meditation:  "<< level->numMeditatists << " " << level->indispensableHollows << " "<<level->engagedIndispensableHollows << " " << level->engagedDispensableHollows << "\n";
 }
 
 



From ral at mail.berlios.de  Sat Feb 21 21:07:32 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sat, 21 Feb 2009 21:07:32 +0100
Subject: [Enigma-game-svn] r1547 - trunk/doc/reference
Message-ID: <200902212007.n1LK7Wf5011771@sheep.berlios.de>

Author: ral
Date: 2009-02-21 21:07:22 +0100 (Sat, 21 Feb 2009)
New Revision: 1547

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1: new API reengineering
- refman: further updates

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-19 23:18:20 UTC (rev 1546)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-21 20:07:22 UTC (rev 1547)
@@ -2665,6 +2665,7 @@
 * The Lifecycle of a Level::
 @end menu
 
+ at c ----------------- The World's Structure --------------------
 @node The World's Structure
 @section The World's Structure
 
@@ -2677,11 +2678,11 @@
 * Object Layers::                    Floors, Items, Stones, Actors and Others
 * World as an Object::               Global attributes and handle
 * Unpositioned Objects::             Other objects like rubbers and gadgets
-* Owned Items::                      Players Inventories and other containers
+* Player and Inventory::             Yin and Yang
+* Owned Objects::                    Objects temporary owned by others
 @end menu
 
 @c ----------------- World's Shape and Coordinates --------------------
-
 @node World's Shape and Coordinates
 @subsection World's Shape and Coordinates
 
@@ -2774,11 +2775,13 @@
 placed at any position. Actors that pass a stone will be displayed below the
 stone.
 
+ at c ----------------- World as an Object --------------------
 @node World as an Object
 @subsection World as an Object
 
 Friction, Brittleness, Modes and Co., Scrollmodes
 
+ at c ----------------- Unpositioned Objects --------------------
 @node Unpositioned Objects
 @subsection Unpositioned Objects
 
@@ -2793,12 +2796,77 @@
 @ref{Object Reference} or @ref{Object Naming} to access them lateron, as no
 position driven access does exist.
 
+ at c ----------------- Player and Inventory --------------------
+ at node Player and Inventory
+ at subsection Player and Inventory
 
- at node Owned Items
- at subsection Owned Items
+Enigma is conceptionally a game for 2 players. But nevertheless it can be played
+by one user on a single computer by toggling the control between two virtual
+players. We do call these virtual player's @code{YIN} and @code{YANG}, as the
+first player controls in most cases a black marble, whereas the second 
+controls usually a white marble.
 
+Each virtual player has its own inventory of up to 13 items. The leftmost
+item of the inventory is called @samp{revealed}, as an item activation by a
+mouse click does activate this item and on actor hits this item may cause
+special actions.
+
+The players inventories do exist outside of the rectangular world. Thus
+any item being part of a player's inventory will report an invalid, out of world
+position, that evaluates on an @samp{exists()} request to @samp{false}. You
+can add items directly to inventories by the advanced world method @ref{add}.
+
+Even though the actors are assigned to players they are quite independent 
+objects that live in one of the @ref{Object Layers}. Their relationship to
+players is as follows:
+
+Each virtual player can own and control one or several actors of any kind. That
+means player @code{YIN} is not limited to a black @ref{ac_marble}, but may as
+well control a white @ref{ac_pearl}, an @ref{ac_horse} or any other set of one
+or several arbitrary actors.
+
+Ownership and control of actors are two distinct aspects. Ownership of an actor
+means that every item picked up by an actor ends up in the player's inventory and
+items of the player's inventory can act on all owned actors. The control of an
+actor by a player does just affect the movement of the actor by the users
+force input. An actor may be controlled by a player without parallel ownership.
+Another actor may be owned by a player without being controlled by it, thus
+being a passiv actor that depends on being pushed by others. An actor may even
+be controlled by both players, but it can just be owned by one player or none.
+
+The assignment of actors to players is solely configured by 
+ at ref{Actor Attributes}.
+
+When a single user plays Enigma he starts with the control over the player
+ at code{Yin}. By usage of yinyang objects he can toggle the control to the player
+ at code{Yang} and back again. Items @ref{it_yinyang} are added automatically for
+network levels when played by a single user. They allow an arbitrary switch
+between the players. The stones @ref{st_yinyang} do limit the user's ability to
+switch between the player control.
+
+
+ at c ----------------- Owned Objects --------------------
+ at node Owned Objects
+ at subsection Owned Objects
+
+Besides objects owned by a player and being part of his inventory, objects can
+be temporary part of another object. The most obvious case is an item contained
+in an @ref{it_bag}. Other samples are two @ref{st_shogun} stones pushed onto
+the same grid position or for a short fraction of time a stone swapping the
+position with an @ref{st_swap} or an @ref{st_pull}.
+
+In any case the owned object will report the same position as the owner itself.
+Even in case of some items contained in a bag that is itself part of another bag
+all items will report the same position as the outmost bag. If this bag is part
+of an player's inventory all items report an invalid position.
+
+You can not directly enforce ownership by setting two objects to the same
+position as this standard operation will kill and replace the old object by the
+new one. Where possible, like in the case of an bag, you can add objects to
+a container object by usage of the world advanced method @ref{add}.
+
+
 @c ----------------- Object Description --------------------
-
 @node Object Description
 @section Object Description
 
@@ -6135,8 +6203,7 @@
 @item @b{Values:} @ @ positive float number or zero or @code{nil}
 Sink time in seconds or @samp{nil} for an inifinite time aka not sinking. Time
 values smaller than appr. 0.7 ms will be rounded down to 0 ms.
- at item @b{Default:} @ @ @code{0.57}
-The exact default value is 4/7 seconds due to historic reasons
+ at item @b{Default:} @ @ @code{1.75}
 @item @b{Access:} @ @ read/write
 @item @b{Support:} @ @ @ref{fl_swamp}
 @end table
@@ -6144,8 +6211,7 @@
 @node WaterSinkTime
 @subsection WaterSinkTime
 
-A global default for the time it takes a static actor to sink in @ref{fl_water}.
-Fast moving actors will needs slightly more time than static actors.
+A global default for the time it takes an actor to sink in @ref{fl_water}.
 
 @table @asis
 @item @b{Type:} @ @ number or @code{nil}
@@ -6209,14 +6275,36 @@
 @chapter Floor Objects
 
 @menu
+* Standard Floors::
 * Special Floors::
 @end menu
 
+ at c ----------------- Standard Floor --------------------
+ at node Standard Floors
+ at section Standard Floors
+
+ at menu
+* fl_sahara::         Bright yellow sandstone floor
+ at end menu
+ at c ----------------- Sahara Floor --------------------
+ at node fl_sahara
+ at subsection fl_sahara
+ at obindex fl_sahara
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{fl_sahara}
+ at end table
+ at end table
+
+ at c ----------------- Special Floor --------------------
 @node Special Floors
 @section Special Floors
 
 @menu
 * fl_bridge::         Abyss Bridge
+* fl_slope::          Slopes in various shapes
 @end menu
 
 @c ----------------- Bridge Floor --------------------
@@ -6288,6 +6376,96 @@
 
 @end table
 
+ at c ----------------- Slope Floor --------------------
+ at node fl_slope
+ at subsection fl_slope
+ at obindex fl_slope
+
+A floor suited to build larger hills, gradiented areas, wall brims, staircaises
+or tubes that chanelize actors.
+
+Slope floors are basically described by their @samp{slope} and their @samp{shape}.
+The slope is the direction of the force applied to actors on top. The eight
+main directions and @samp{NODIR}, that causes no force to be applied at all, are
+currently supported.
+
+The shape desribes the intended usage, which causes a proper visual 
+representation. There are planar slopes falling just into a horizontal or 
+vertical direction (@code{"pw"}, @code{"ps"}, @code{"pe"}, @code{"pn"}),
+inner and outer edges falling into a diagonal direction (@code{"inw"}, 
+ at code{"isw"}, @code{"ise"}, @code{"ine"}, @code{"onw"}, @code{"osw"},
+ at code{"ose"}, @code{"one"}), tube center parts falling into a horizontal or
+vertical direction (@code{"tw"}, @code{"ts"}, @code{"te"}, @code{"tn"}) and
+tube left and right sides that accelerate actors into the main tube direction
+and back to the tube center at the same time (@code{"twl"}, @code{"tsl"}, 
+ at code{"tel"}, @code{"tnl"}, @code{"twr"}, @code{"tsr"}, @code{"ter"}, 
+ at code{"tnr"}).
+
+Note that several shapes do currently use an identical visual representation.
+But they differ in their usage and different slope force directions are
+assigned by default when you use the variant suffices. It is strongly 
+recommended to use always the shape of the intended usage as the images might
+be improved in the future and should fit to your level.
+
+The force applied to actors on the floor grid is given per default by the
+global attribute @ref{SlopeStrength}. You may override this default by an
+explicit value for the slope floor attribute @samp{strength}. In very special
+cases you may even define individual force components @samp{force_x} and
+ at samp{force_y}, which will override all other slope force attributes.
+
+ at table @asis
+
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{slope}, @ @ @i{values}: @code{NODIR}, @code{WEST}, @code{SOUTH}, @code{EAST}, @code{NORTH}, @code{NORTHWEST}, @code{SOUTHWEST}, @code{SOUTHEAST}, @code{NORTHEAST}; @ @ @i{default}: @code{NODIR}
+The direction of the force. Note that setting this attribute does not 
+automatically assign a fitting @samp{shape}. This attribute is neglected if
+ at samp{force_x} or @samp{force_y} attributes are set.
+
+ at item @b{shape}, @ @ @i{values}: @code{""}, @code{"pw"}, @code{"ps"}, @code{"pe"}, @code{"pn"}, @code{"inw"}, @code{"isw"}, @code{"ise"}, @code{"ine"}, @code{"onw"}, @code{"osw"}, @code{"ose"}, @code{"one"}, @code{"tw"}, @code{"ts"}, @code{"te"}, @code{"tn"}, @code{"twl"}, @code{"tsl"}, @code{"tel"}, @code{"tnl"}, @code{"twr"}, @code{"tsr"}, @code{"ter"}, @code{"tnr"}; @ @ @i{default}: @code{""}
+The intended usage as described above. Note that setting this attribute does
+not automatically assign the proper @samp{slope}.
+
+ at item @b{strength} @ @ @i{values}: float number; @ @ @i{default}: @code{25.0} @ @ @xref{SlopeStrength}
+ at item @b{force_x} @ @ @i{values}: float number; @ @ @i{default}: @code{0.0}
+ at item @b{force_y} @ @ @i{values}: float number; @ @ @i{default}: @code{0.0}
+
+ at end table
+
+ at item @b{Messages:} None
+
+ at item @b{Variants:}
+ at table @asis
+ at item @b{fl_slope} slope = @samp{NODIR}, shape = @code{""}
+ at item @b{fl_slope_pw} slope = @samp{WEST}, shape = @code{"pw"}
+ at item @b{fl_slope_ps} slope = @samp{SOUTH}, shape = @code{"ps"}
+ at item @b{fl_slope_pe} slope = @samp{EAST}, shape = @code{"pe"}
+ at item @b{fl_slope_pn} slope = @samp{NORTH}, shape = @code{"pn"}
+ at item @b{fl_slope_inw} slope = @samp{NORTHWEST}, shape = @code{"inw"}
+ at item @b{fl_slope_isw} slope = @samp{SOUTHWEST}, shape = @code{"isw"}
+ at item @b{fl_slope_ise} slope = @samp{SOUTHEAST}, shape = @code{"ise"}
+ at item @b{fl_slope_ine} slope = @samp{NORTHEAST}, shape = @code{"ine"}
+ at item @b{fl_slope_onw} slope = @samp{NORTHWEST}, shape = @code{"onw"}
+ at item @b{fl_slope_osw} slope = @samp{SOUTHWEST}, shape = @code{"osw"}
+ at item @b{fl_slope_ose} slope = @samp{SOUTHEAST}, shape = @code{"ose"}
+ at item @b{fl_slope_one} slope = @samp{NORTHEAST}, shape = @code{"one"}
+ at item @b{fl_slope_tw} slope = @samp{WEST}, shape = @code{"tw"}
+ at item @b{fl_slope_ts} slope = @samp{SOUTH}, shape = @code{"ts"}
+ at item @b{fl_slope_te} slope = @samp{EAST}, shape = @code{"te"}
+ at item @b{fl_slope_tn} slope = @samp{NORTH}, shape = @code{"tn"}
+ at item @b{fl_slope_twl} slope = @samp{NORTHWEST}, shape = @code{"twl"}
+ at item @b{fl_slope_tsl} slope = @samp{SOUTHWEST}, shape = @code{"tsl"}
+ at item @b{fl_slope_tel} slope = @samp{SOUTHEAST}, shape = @code{"tel"}
+ at item @b{fl_slope_tnl} slope = @samp{NORTHEAST}, shape = @code{"tnl"}
+ at item @b{fl_slope_twr} slope = @samp{SOUTHWEST}, shape = @code{"twr"}
+ at item @b{fl_slope_tsr} slope = @samp{SOUTHEAST}, shape = @code{"tsr"}
+ at item @b{fl_slope_ter} slope = @samp{NORTHEAST}, shape = @code{"ter"}
+ at item @b{fl_slope_tnr} slope = @samp{NORTHWEST}, shape = @code{"tnr"}
+ at end table
+
+ at end table
+
 @c ===================  Items  =======================
 
 @node Item Objects
@@ -6301,6 +6479,7 @@
 @section Standard Items
 
 @menu
+* it_bag::
 * it_blocker::         Shrinked Blocker Stone
 * it_brake::           Movable Stone Brake
 * it_brush::
@@ -6329,9 +6508,26 @@
 * it_vortex::          Teleport of Marbels
 * it_wormhole::        Teleport of Actors
 * it_wrench::
+* it_yinyang::
 @end menu
 
 
+ at c ----------------- Bag Item --------------------
+ at node it_bag
+ at subsection it_bag
+ at obindex it_bag
+
+
+
+
+ at table @asis
+
+ at item @b{Attributes:} none
+
+ at item @b{Messages:} none
+
+ at end table
+
 @c ----------------- Blocker Item --------------------
 @node it_blocker
 @subsection it_blocker
@@ -7562,22 +7758,386 @@
 
 @end table
 
+ at c ----------------- Yinyang Item --------------------
+ at node it_yinyang
+ at subsection it_yinyang
+ at obindex it_yinyang
+
+A special switch that allows the user to toggle the @ref{Player and Inventory}
+between @code{YIN} and code{YANG}.
+
+On activation this item does not get dropped but remains unchanged in the
+inventory.
+
+If a level has been declared to be a full blown two player network level in
+ at ref{<modes>}, but is currently played on a single computer both players
+get automatically an yinyang item added to their inventory to allow all actors
+to be controlled at every point of time.
+
+ at table @asis
+
+ at item @b{Attributes:} none
+
+ at item @b{Messages:} none
+
+ at end table
+
+
 @c ===================  Stones  =======================
 @node Stone Objects
 @chapter Stone Objects
 
 @menu
-* Simple Stones::
+* Standard Stones::
 * Cluster Stones::
-* Transparent Stones::
-* Breakable Stones::
 * Special Stones::
+* Feature Summaries::     Tables of transparent, breakable, ... stones
 @end menu
 
 
- at node Simple Stones
- at section Simple Stones
+ at c ----------------- Standard Stones --------------------
+ at node Standard Stones
+ at section Standard Stones
 
+A standard stone is a passive wall stone. It might exist in a hollow or
+movable variant but provides no additional features.
+
+ at menu
+* st_ancient::         rough green rock
+* st_bluegray::        light blue gray stone
+* st_brownie::         golden, hay stack like stone
+* st_brownmarble::     brown gray marble
+* st_brownpyramide::   brown gray pyramide shaped stone
+* st_camouflage::      military green camouflage stone
+* st_concrete::        polished light gray stone
+* st_darkgray::        dark gray rock
+* st_granite::         light gray rock
+* st_greengray::       light green gray rock
+* st_invisible::       invisible stone
+* st_metal::           metal stone
+* st_pinkbumps::       pink stone with heavy bumps
+* st_purplegray::      dark purple gray rock
+* st_purplemarble::    purple marble
+* st_redbrown::        brown stone whith light red touches
+* st_redmarble::       red white marbled stone
+* st_redrock::         dark red rock
+* st_tigris::          red sandstone
+* st_woven::           yellow gray woven stone
+* st_yellow::          yellow stone with red green stripes
+
+ at end menu
+
+ at c ----------------- Ancient Stone --------------------
+ at node st_ancient
+ at subsection st_ancient
+ at obindex st_ancient
+
+A rough green gray rock that looks ancient.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_ancient}
+ at end table
+ at end table
+
+ at c ----------------- Bluegray Stone --------------------
+ at node st_bluegray
+ at subsection st_bluegray
+ at obindex st_bluegray
+
+A light blue gray stone that exists in all two variants. This stone is visually
+undistinguishable from a @ref{st_thief}.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_bluegray}
+ at item @b{st_bluegray_hollow}
+ at end table
+ at end table
+
+ at c ----------------- Brownie Stone --------------------
+ at node st_brownie
+ at subsection st_brownie
+ at obindex st_brownie
+
+A golden, hay stack like stone that exists just in a movable variant.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_brownie}
+ at end table
+ at end table
+
+ at c ----------------- Brownmarble Stone --------------------
+ at node st_brownmarble
+ at subsection st_brownmarble
+ at obindex st_brownmarble
+
+A brown gray marble like stone.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_brownmarble}
+ at end table
+ at end table
+
+ at c ----------------- Brownpyramide Stone --------------------
+ at node st_brownpyramide
+ at subsection st_brownpyramide
+ at obindex st_brownpyramide
+
+A brown gray pyramide shaped stone.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_brownpyramide}
+ at end table
+ at end table
+
+ at c ----------------- Camouflage Stone --------------------
+ at node st_camouflage
+ at subsection st_camouflage
+ at obindex st_camouflage
+
+A military green camouflage stone that exists in all three variants.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_camouflage}
+ at item @b{st_camouflage_hollow}
+ at item @b{st_camouflage_movable}
+ at end table
+ at end table
+
+ at c ----------------- Concrete Stone --------------------
+ at node st_concrete
+ at subsection st_concrete
+ at obindex st_concrete
+
+A polished light gray stone.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_concrete}
+ at end table
+ at end table
+
+ at c ----------------- Darkgray Stone --------------------
+ at node st_darkgray
+ at subsection st_darkgray
+ at obindex st_darkgray
+
+A ldark gray rock that exists in all two variants.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_darkgray}
+ at item @b{st_darkgray_hollow}
+ at end table
+ at end table
+
+ at c ----------------- Granite Stone --------------------
+ at node st_granite
+ at subsection st_granite
+ at obindex st_granite
+
+A light gray rock like stone that exists in all three variants.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_granite}
+ at item @b{st_granite_hollow}
+ at item @b{st_granite_movable}
+ at end table
+ at end table
+
+ at c ----------------- Greengray Stone --------------------
+ at node st_greengray
+ at subsection st_greengray
+ at obindex st_greengray
+
+A light green gray rock.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_greengray}
+ at end table
+ at end table
+
+ at c ----------------- Invisble Stone --------------------
+ at node st_invisible
+ at subsection st_invisible
+ at obindex st_invisible
+
+An invisible stone that exists in all three variants. Please make rare usage
+of this stone as it may be very annoying to users to guess that a stone
+exists that he can not see. Use it to maintain the WYSIWYG expected behaviour.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_invisible}
+ at item @b{st_invisible_hollow}
+ at item @b{st_invisible_movable}
+ at end table
+ at end table
+
+ at c ----------------- Metal Stone --------------------
+ at node st_metal
+ at subsection st_metal
+ at obindex st_metal
+
+A metal stone that exists in two variants.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_metal}
+ at item @b{st_metal_hollow}
+ at end table
+ at end table
+
+ at c ----------------- Pinkbump Stone --------------------
+ at node st_pinkbumps
+ at subsection st_pinkbumps
+ at obindex st_pinkbumps
+
+A pink stone with heavy white bumps.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_pinkbumps}
+ at end table
+ at end table
+
+ at c ----------------- Purplegray Stone --------------------
+ at node st_purplegray
+ at subsection st_purplegray
+ at obindex st_purplegray
+
+A dark purple gray rock.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_purplegray}
+ at end table
+ at end table
+
+ at c ----------------- Purplemarble Stone --------------------
+ at node st_purplemarble
+ at subsection st_purplemarble
+ at obindex st_purplemarble
+
+A purple marble stone.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_purplemarble}
+ at end table
+ at end table
+
+ at c ----------------- Redbrown Stone --------------------
+ at node st_redbrown
+ at subsection st_redbrown
+ at obindex st_redbrown
+
+A brown stone whith light red touches that exists in all three variants.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_redbrown}
+ at item @b{st_redbrown_hollow}
+ at item @b{st_redbrown_movable}
+ at end table
+ at end table
+
+ at c ----------------- Redmarble Stone --------------------
+ at node st_redmarble
+ at subsection st_redmarble
+ at obindex st_redmarble
+
+A red white marbled stone.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_redmarble}
+ at end table
+ at end table
+
+ at c ----------------- Redrock Stone --------------------
+ at node st_redrock
+ at subsection st_redrock
+ at obindex st_redrock
+
+A dark red rock.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_redrock}
+ at end table
+ at end table
+
+ at c ----------------- Tigris Stone --------------------
+ at node st_tigris
+ at subsection st_tigris
+ at obindex st_tigris
+
+A red sandstone like @ref{fl_tigris}.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_tigris}
+ at end table
+ at end table
+
+ at c ----------------- Woven Stone --------------------
+ at node st_woven
+ at subsection st_woven
+ at obindex st_woven
+
+A yellow gray woven stone.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_woven}
+ at end table
+ at end table
+
+ at c ----------------- Redmarble Stone --------------------
+ at node st_yellow
+ at subsection st_yellow
+ at obindex st_yellow
+
+A yellow stone with red green stripes. This stone fits visually to the 
+ at ref{st_coinslot}.
+
+ at table @asis
+ at item @b{Variants:}
+ at table @asis
+ at item @b{st_yellow}
+ at end table
+ at end table
+
+
+ at c ----------------- Cluster Stones --------------------
 @node Cluster Stones
 @section Cluster Stones
 
@@ -7741,10 +8301,7 @@
 @end table
 
 
- at node Transparent Stones
- at section Transparent Stones
- at node Breakable Stones
- at section Breakable Stones
+ at c ----------------- Special Stones --------------------
 @node Special Stones
 @section Special Stones
 
@@ -7789,6 +8346,7 @@
 * st_turnstilearm::    Turnstile Arm
 * st_volcano::         Spreading Volcano
 * st_window::          Faced Window
+* st_yinyang::         Player Switch
 @end menu
 
 
@@ -10214,10 +10772,97 @@
 @item @b{st_window_nesw}: faces = @code{"nesw"}
 
 @end table
+ at end table
 
+ at c ----------------- Yinyang Stone --------------------
+ at node st_yinyang
+ at subsection st_yinyang
+ at obindex st_yinyang
+
+A special switch that allows the user to toggle the @ref{Player and Inventory}
+between @code{YIN} and @code{YANG}.
+
+In contrast to @ref{it_yinyang} the player can not switch at any point of time
+but is limited to situations where he can hit the stone by one of the actors
+he controls. Of course other objects can send @code{"toggle"} messages on
+actions to this switch, too.
+
+When being activated the yinyang stone switches from the @samp{IDLE} state to
+the @samp{ACTIVE} state which is animated by a turning yinyang symbol. By
+default the player switch takes place at the end of this animation with the
+stone returning to its @samp{IDLE} state.
+
+If you need a yinyang stone that switches without delay you need to set the
+ at samp{instant} attribute to @samp{true}. The animation is executed after
+the switching. Note that even an instant stone variant can not be reactivated
+until it returns to its @samp{IDLE} state after the completion of the animation.
+
+By default the yinyang stone loops between its two states @samp{IDLE} and
+ at samp{ACTIVE}. This means the user can hit the stone many times causing every
+time a player toggle action. But if you set @samp{loop} to @samp{false} the
+yinyang stone will forward to the state @samp{INACTIVE} after the next
+activation. Thus the user can use this stone just once to toggle the players.
+
+You can use an instance of this stone to toggle the player directly at the
+start of the level. Use an @samp{ACTIVE} yinyang stone to switch after a short
+period of animation, or set additionally @samp{instant} to @samp{true} to switch
+the player before the user can act on @code{YIN}.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{state}, @ @ @i{values}: @code{IDLE}, @code{ACTIVE}, @code{INACTIVE}; @ @ @i{default}: @code{IDLE} @ @ @xref{state}
+An @samp{IDLE} yinyang is ready for activation. An @samp{ACTIVE} yinyang is
+performing its animation and rejects any further attempts to reactivate. An
+ at samp{INACTIVE} yinyang reached its final state and can not be reactivated by
+actor hits or toggle messages.
+ at item @b{instant} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}
+A default yinyang stone toggles the player after a short period of animation.
+An instant yinyang switches directly with start of the animation.
+ at item @b{loop} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+A looping yinyang returns to @samp{IDLE} state after completion of the
+ at samp{ACTIVE} state. A yinyang with a @samp{loop} value of @samp{false} forwards
+to the final @samp{INACTIVE} state
 @end table
 
+ at item @b{Messages:}
 
+ at table @asis
+ at item @b{toggle} @ @ @xref{toggle}
+Activate the yinyang like an actor hitting the stone.
+ at end table
+
+ at item @b{Action:} @ @ @xref{target}, @ @ @xref{action}
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_yinyang}: state = @code{IDLE}
+ at item @b{st_yinyang_active}: state = @code{ACTIVE}
+ at item @b{st_yinyang_inactive}: state = @code{INACTIVE}
+ at item @b{st_yinyang_instant}: instant = @code{true}, state = @code{IDLE}
+ at end table
+ at end table
+
+
+ at c ----------------- Feature Summaries --------------------
+ at node Feature Summaries
+ at section Feature Summaries
+
+ at menu
+* Transparent Stones::
+* Breakable Stones::
+ at end menu
+
+ at c ----------------- Transparent Stones --------------------
+ at node Transparent Stones
+ at subsection Transparent Stones
+
+ at c ----------------- Breakable Stones --------------------
+ at node Breakable Stones
+ at subsection Breakable Stones
+
 @c ===================  Actors  =======================
 
 @node Actor Objects
@@ -11873,19 +12518,27 @@
 @item @b{Syntax:}
 @b{wo:add}(@i{tile_declarations})
 
+ at b{wo:add}(@i{target}, @i{tile_declarations})
+
 @table @asis
 @item @i{tile_declarations}
 One or many other object declarations given as tiles or anonymous tables.
+ at item @i{target}
+ at samp{YIN}, @samp{YANG} or valid @ref{Object Reference}
 @end table
 
 @item @b{Syntax Samples:}
 @example
 wo:add(@{"ot_rubberband", anchor1="a1", anchor2="w", length=2, strength=80, threshold=0@})
 wo:add(ti["r"] .. @{"ot_wire", anchor1="w1", anchor2="w2"@})
+wo:add(YIN, @{"it_magicwand@})
+wo:add(no["mybag"], @{"it_magicwand@} .. ti["h"] .. ti["c"])
 @end example
 
 @item @b{Details:}
-Just @ref{Other Objects} can be added by this method.
+Just @ref{Other Objects} can be directly added to the world. Just non static
+ at ref{Items} can be added to the player's inventories @samp{YIN} and @samp{YANG}
+and to @ref{it_bag}s. No other targets do currently add objects by this method.
 
 @item @b{Full Example:}
 @example
@@ -19054,11 +19707,11 @@
 @item @b{st-likeoxydd} @expansion{} @code{st_fake_oxydd}, @pxref{st_fake}
 @need 200
 @item @b{st-likeoxydd-open} @expansion{} @code{st_fake_oxydd, state=OPEN}, @pxref{st_fake}
- at item @b{st-mail-e} @expansion{} @code{st-mail-e}, @pxref{st-mail}
- at item @b{st-mail-n} @expansion{} @code{st-mail-n}, @pxref{st-mail}
- at item @b{st-mail-s} @expansion{} @code{st-mail-s}, @pxref{st-mail}
+ at item @b{st-mail-e} @expansion{} @code{st_mail_e}, @pxref{st-mail}
+ at item @b{st-mail-n} @expansion{} @code{st_mail_n}, @pxref{st-mail}
+ at item @b{st-mail-s} @expansion{} @code{st_mail_s}, @pxref{st-mail}
 @need 200
- at item @b{st-mail-w} @expansion{} @code{st-mail-w}, @pxref{st-mail}
+ at item @b{st-mail-w} @expansion{} @code{st_mail_w}, @pxref{st-mail}
 @item @b{st-marble} @expansion{} @ref{st_redbrown}
 @item @b{st-marble_hole} @expansion{} @code{st_redbrown_hollow}, @pxref{st_redbrown}
 @item @b{st-marble_move} @expansion{} @code{st_redbrown_movable}, @pxref{st_redbrown}



From raoul at mail.berlios.de  Sun Feb 22 01:57:05 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 22 Feb 2009 01:57:05 +0100
Subject: [Enigma-game-svn] r1548 - trunk/doc/reference
Message-ID: <200902220057.n1M0v5CZ027954@sheep.berlios.de>

Author: raoul
Date: 2009-02-22 01:57:04 +0100 (Sun, 22 Feb 2009)
New Revision: 1548

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
-> Fixed pdf generation for refmanual



Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-21 20:07:22 UTC (rev 1547)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-22 00:57:04 UTC (rev 1548)
@@ -2803,7 +2803,7 @@
 Enigma is conceptionally a game for 2 players. But nevertheless it can be played
 by one user on a single computer by toggling the control between two virtual
 players. We do call these virtual player's @code{YIN} and @code{YANG}, as the
-first player controls in most cases a black marble, whereas the second 
+first player controls in most cases a black marble, whereas the second
 controls usually a white marble.
 
 Each virtual player has its own inventory of up to 13 items. The leftmost
@@ -2816,7 +2816,7 @@
 position, that evaluates on an @samp{exists()} request to @samp{false}. You
 can add items directly to inventories by the advanced world method @ref{add}.
 
-Even though the actors are assigned to players they are quite independent 
+Even though the actors are assigned to players they are quite independent
 objects that live in one of the @ref{Object Layers}. Their relationship to
 players is as follows:
 
@@ -2834,7 +2834,7 @@
 being a passiv actor that depends on being pushed by others. An actor may even
 be controlled by both players, but it can just be owned by one player or none.
 
-The assignment of actors to players is solely configured by 
+The assignment of actors to players is solely configured by
 @ref{Actor Attributes}.
 
 When a single user plays Enigma he starts with the control over the player
@@ -5476,8 +5476,8 @@
 negative values as well what generates an accelerating force that is very
 difficult to control for the player.
 
-Besides all floors some floor covering items like @ref{it_strip}, 
- at ref{it_meditation} may provide friction values as well to deviate from the 
+Besides all floors some floor covering items like @ref{it_strip},
+ at ref{it_meditation} may provide friction values as well to deviate from the
 floor friction.
 
 @table @asis
@@ -5497,7 +5497,7 @@
 accelerating force in the inverse direction of the mouse movement which is a
 little bit difficult to control for the player.
 
-Besides all floors some floor covering items like @ref{it_strip}, 
+Besides all floors some floor covering items like @ref{it_strip},
 @ref{it_meditation_hollow} may provide adhesion values as well to deviate from
 the floor adhesion.
 
@@ -5841,7 +5841,7 @@
 
 If @code{true}, dead actors attached to a player will be resurrected as long as
 extralives are available. If a player has no living actor to control or is
-missing the actor's ref{essential} constraints, the player is 
+missing the actor's ref{essential} constraints, the player is
 dead. The level may still continue if a second player is alive. If the gamer has
 an @ref{it_yinyang} in his inventory in single user mode, the control switches
 to the second player. If all players are dead, a new level game is started.
@@ -5866,7 +5866,7 @@
 @node CrackSpreading
 @subsection CrackSpreading
 
-A global default value denoting the probability that a brittle floor plate 
+A global default value denoting the probability that a brittle floor plate
 causes direct neighboring floors to either start or to desintegrate further when
 an actor enters or leaves this plate at the center of the affected area. A value
 of @code{1.0} ensures that the crack spread to the direct neighbors, a value of
@@ -6136,7 +6136,7 @@
 
 A global scalar default factor for the @ref{ot_rubberband} force that is applied
 to actors if the length of the rubberband exceeds the given min or max limits.
-This can happen due to extraordinary events like actor warping, actor 
+This can happen due to extraordinary events like actor warping, actor
 resurrection, moving anchor stones or simply new rubberbands that are created
 with off limit length.
 
@@ -6165,7 +6165,7 @@
 @node SlopeStrength
 @subsection SlopeStrength
 
-A global scalar default factor for @ref{fl_slope} floor gradient forces. This 
+A global scalar default factor for @ref{fl_slope} floor gradient forces. This
 global value is used if no slope object specific strength factor is supplied.
 
 @table @asis
@@ -6389,21 +6389,21 @@
 main directions and @samp{NODIR}, that causes no force to be applied at all, are
 currently supported.
 
-The shape desribes the intended usage, which causes a proper visual 
-representation. There are planar slopes falling just into a horizontal or 
+The shape desribes the intended usage, which causes a proper visual
+representation. There are planar slopes falling just into a horizontal or
 vertical direction (@code{"pw"}, @code{"ps"}, @code{"pe"}, @code{"pn"}),
-inner and outer edges falling into a diagonal direction (@code{"inw"}, 
+inner and outer edges falling into a diagonal direction (@code{"inw"},
 @code{"isw"}, @code{"ise"}, @code{"ine"}, @code{"onw"}, @code{"osw"},
 @code{"ose"}, @code{"one"}), tube center parts falling into a horizontal or
 vertical direction (@code{"tw"}, @code{"ts"}, @code{"te"}, @code{"tn"}) and
 tube left and right sides that accelerate actors into the main tube direction
-and back to the tube center at the same time (@code{"twl"}, @code{"tsl"}, 
- at code{"tel"}, @code{"tnl"}, @code{"twr"}, @code{"tsr"}, @code{"ter"}, 
+and back to the tube center at the same time (@code{"twl"}, @code{"tsl"},
+ at code{"tel"}, @code{"tnl"}, @code{"twr"}, @code{"tsr"}, @code{"ter"},
 @code{"tnr"}).
 
 Note that several shapes do currently use an identical visual representation.
 But they differ in their usage and different slope force directions are
-assigned by default when you use the variant suffices. It is strongly 
+assigned by default when you use the variant suffices. It is strongly
 recommended to use always the shape of the intended usage as the images might
 be improved in the future and should fit to your level.
 
@@ -6419,7 +6419,7 @@
 
 @table @asis
 @item @b{slope}, @ @ @i{values}: @code{NODIR}, @code{WEST}, @code{SOUTH}, @code{EAST}, @code{NORTH}, @code{NORTHWEST}, @code{SOUTHWEST}, @code{SOUTHEAST}, @code{NORTHEAST}; @ @ @i{default}: @code{NODIR}
-The direction of the force. Note that setting this attribute does not 
+The direction of the force. Note that setting this attribute does not
 automatically assign a fitting @samp{shape}. This attribute is neglected if
 @samp{force_x} or @samp{force_y} attributes are set.
 
@@ -7274,9 +7274,9 @@
 @obindex it_sensor
 
 The sensor item is a switch on top of a floor that reacts on actors passing it.
-It performs actions on actors either entering or exiting the sensors grid 
-depending on its attribute @samp{exit}. It will send an action value of 
- at samp{true} but of course the @ref{inverse} attribute can be used to send an 
+It performs actions on actors either entering or exiting the sensors grid
+depending on its attribute @samp{exit}. It will send an action value of
+ at samp{true} but of course the @ref{inverse} attribute can be used to send an
 action value of @samp{false} instead.
 
 Any actors passing the grid, either on the floor or jumping over it will be
@@ -8126,7 +8126,7 @@
 @subsection st_yellow
 @obindex st_yellow
 
-A yellow stone with red green stripes. This stone fits visually to the 
+A yellow stone with red green stripes. This stone fits visually to the
 @ref{st_coinslot}.
 
 @table @asis
@@ -8308,7 +8308,7 @@
 @menu
 * st_actorimpulse::    Bumper Stone
 * st_blocker::         Shrinkable Blocker
-* st_blur::            Passage of yet undetermined color 
+* st_blur::            Passage of yet undetermined color
 * st_boulder::         Moving Arrow Boulder
 * st_brake::           Brake for moving Boulders
 * st_chess::           Movable Chess Knight Stone
@@ -8497,7 +8497,7 @@
 the color of the actor or be of the opposite color. The flavor of the passage
 is always @code{"square"}.
 
-In the first case the blur stone is pure gray and its  @samp{flavor} is called 
+In the first case the blur stone is pure gray and its  @samp{flavor} is called
 @code{"straight"} due to the straight color preserving transformation. The
 touching actor will be able to pass the passage straight away.
 
@@ -8506,7 +8506,7 @@
 be able to pass the resulting passage. There are two flavors of such blur stones
 - @code{"cross"} which transform unconditionally on an actor hit to the opposite
 colored @ref{st_passage} and flavor @code{"magic"} which transforms just on
-actors hitting the blur stone with a revealed @ref{it_magicwand} or 
+actors hitting the blur stone with a revealed @ref{it_magicwand} or
 @ref{it_brush} in their inventory.
 
 For colorless actors a blur stone is just a standard stone without any special
@@ -8543,7 +8543,7 @@
 A marble blocking its way is shattered. When a stone blocks its way, the boulder
 triggers it by a sequence of two internal messages. Some stones give way like
 @ref{st_blocker}, @samp{st_break_boulder} (@pxref{st_break}), others change their
-state like @ref{st_oxyd}, @ref{st_stoneimpulse}, @ref{st_quake}, 
+state like @ref{st_oxyd}, @ref{st_stoneimpulse}, @ref{st_quake},
 @ref{st_mirror}, @ref{st_fourswitch}, @ref{st_volcano}. A third category
 switches temporarily into another state on the first message sent when the
 boulder reaches a grid and switches back on the second message sent when the
@@ -9602,7 +9602,7 @@
 single color. With the world attribute @ref{MaxOxydColor} you can lower or
 increase this limit. By setting this attribute to @samp{OXYD_GREEN} you can
 enforce the engine to assign just the first three colors. Be careful in usage
-of more than 8 colors as levels can get incredibly difficult. 
+of more than 8 colors as levels can get incredibly difficult.
 
 The number auf auto colored oxyds should usually be even as a single remaining
 oxyd of a color keeps a level from being solvable. In case of an uneven number
@@ -9638,10 +9638,10 @@
 Only flavor @code{"e"} starts with hidden color, but once opened returns to
 a closed image with a peep hole that lets the player still see the color.
 
-For each flavor exists an identical looking simple stone: @samp{st_fake_oxyda}, 
- at samp{st_fake_oxydb}, @samp{st_fake_oxydc}, @resampf{st_fake_oxydd}, 
+For each flavor exists an identical looking simple stone: @samp{st_fake_oxyda},
+ at samp{st_fake_oxydb}, @samp{st_fake_oxydc}, @samp{st_fake_oxydd},
 @samp{st_fake_oxyde} (@pxref{st_fake}). If you like an identical looking pseudo
-stone that takes part in the oxyd shuffling you can use an oxyd of color 
+stone that takes part in the oxyd shuffling you can use an oxyd of color
 @samp{OXYD_FAKE}.
 
 During the game oxyds can be reshuffled. Just those oxyds that are still closed
@@ -9730,7 +9730,7 @@
 items beneath.
 
 Passage stones react on @samp{signal} and @samp{toggle} messages and
- at ref{st_boulder} arriving on one of its sides. In both cases the passage stone 
+ at ref{st_boulder} arriving on one of its sides. In both cases the passage stone
 recolors to the opposite color. In case of a boulder the recoloring is of a
 quite short period, as this stone recolors the passage twice. The period in
 between is long enough for an actor to pass or to redirect the boulder before
@@ -9885,7 +9885,7 @@
 on moves. Moving a blue fragment besides another fragment on abyss so that both
 fragments build a complete cluster will not sink the new cluster. It will sink
 as a whole on the next move. If two or more stones of a cluster are receive
-wire impulses originating from a single event, the whole cluster will move 
+wire impulses originating from a single event, the whole cluster will move
 multiple times. But it will sink on the first opportunity.
 
 Just single unconnected yellow puzzle stones can be moved by actors. Any yellow
@@ -10882,8 +10882,8 @@
 * charge::          Initial electrical charge
 * controllers::     Mouse
 * color::           Color
-* essential::       
-* essential_id::    
+* essential::
+* essential_id::
 * owner::           Inventory owner
 * velocity_x::      Initial velocity
 * velocity_y::      Initial velocity
@@ -10897,7 +10897,7 @@
 the accelerating force applied to the actor. Note that mouse forces are only
 applied to an actor if the @ref{controllers} attribute allows forces at all.
 Vice versa you should exclude an actor from mouse forces by usage of the
- at ref{controllers} attribute instead of setting its adhesion to zero. The 
+ at ref{controllers} attribute instead of setting its adhesion to zero. The
 adhesion may take negativ values, too. Such values correspond to inverse forces.
 
 @table @asis
@@ -10953,10 +10953,10 @@
 Describes the necessity of an actor to be alive in case of multiple actors being
 attached to a player. A value @samp{DISPENSIBLE} marks an actor as not essential.
 The player may well continue to play with other actors that he controls which
-are still alive. A value of @samp{INDISPENSIBLE} marks an actor as totally 
+are still alive. A value of @samp{INDISPENSIBLE} marks an actor as totally
 necessary. If such an actor cannot be resurrected after a death, the player is
-essentially dead. A value of @samp{PERKIND} marks an actor as partially 
-essential. Not the actor itself needs to survive but the number of actors of 
+essentially dead. A value of @samp{PERKIND} marks an actor as partially
+essential. Not the actor itself needs to survive but the number of actors of
 its kind controlled by the player need to be larger than the number of actors
 with value @samp{PERKIND}. For example, marking 4 out of 5 @ref{ac_pearl} with
 @samp{PERKIND} means that the player is dead if 2 pearls are no longer alive.
@@ -10979,7 +10979,7 @@
 
 Since a player may control actors of different kinds at the same time, the
 essentialness of actors is limited to its kind via this id. It is possible to
-group actors of different kinds into an essential group via this id. The engine 
+group actors of different kinds into an essential group via this id. The engine
 keeps this id even if actors are transformed into other kinds like on activation
 of an @ref{it_drop}.
 
@@ -11040,7 +11040,7 @@
 * ac_bug::
 * ac_horse::
 * ac_killer::
-* ac_marble::     
+* ac_marble::
 * ac_pearl::
 * ac_rotor::
 * ac_top::
@@ -11062,7 +11062,7 @@
 player @ref{fl_thief} and @ref{st_thief} will steal items from it.
 
 @table @asis
- at item @b{Attributes:} common actor attributes 
+ at item @b{Attributes:} common actor attributes
 
 @item @b{Messages:} none
 
@@ -11134,7 +11134,7 @@
 control the actor and do assign a higher @samp{adhesion} to it than to
 @ref{ac_pearl}s.
 
-Note that even though a killer looks quite dangerous, @ref{fl_thief} and 
+Note that even though a killer looks quite dangerous, @ref{fl_thief} and
 @ref{st_thief} do steal items from them, if the killer is owned by a player.
 
 @table @asis
@@ -11171,7 +11171,7 @@
 marble will be resurrected. If no extra life is available a dying actor ends
 up in the @samp{state} dead and can no longer be controlled.
 
-The marbles are preset to their standard attribute values. A recoloring of 
+The marbles are preset to their standard attribute values. A recoloring of
 marbles is not possible. The marbles state changes due to events and can be
 read only, too.
 
@@ -11213,7 +11213,7 @@
 marble will be resurrected. If no extra life is available a dying actor ends
 up in the @samp{state} dead and can no longer be controlled.
 
-The pearls are preset to their standard attribute values. The pearls state 
+The pearls are preset to their standard attribute values. The pearls state
 changes due to events and can be read only.
 
 @table @asis
@@ -11254,7 +11254,7 @@
 Rotors do usually hunt mortal actors trying to shatter them. They accelerate by
 force given by the attribute @samp{strength}, but they limit their hunt to
 actors in the given @samp{range}. If no attackable actor remains in this range
-they return to their initial position if the attribute @samp{gohome} is 
+they return to their initial position if the attribute @samp{gohome} is
 @samp{true}.
 
 Note that in case multiple attackable actors are in range the rotor gets
@@ -11288,7 +11288,7 @@
 Behaviour of a rotor with multiple victims in range
 @item @b{prefercurrent} @ @ @i{values}: float number in range [0.0 - 1.0]; @ @ @i{default}: @code{+0.0}
 Likelihood of attack strategy. You will usually use this attribute in
-combination with @samp{attacknearest} set to @samp{true}. The Level 
+combination with @samp{attacknearest} set to @samp{true}. The Level
 @samp{Toreador} is an example of the behavior of such rotors.
 @end table
 
@@ -11317,7 +11317,7 @@
 Tops do usually hunt mortal actors trying to shatter them. They accelerate by
 force given by the attribute @samp{strength}, but they limit their hunt to
 actors in the given @samp{range}. If no attackable actor remains in this range
-they return to their initial position if the attribute @samp{gohome} is 
+they return to their initial position if the attribute @samp{gohome} is
 @samp{true}.
 
 Note that in case multiple attackable actors are in range the top gets
@@ -11345,7 +11345,7 @@
 Behaviour of a top with multiple victims in range
 @item @b{prefercurrent} @ @ @i{values}: float number in range [0.0 - 1.0]; @ @ @i{default}: @code{+0.0}
 Likelihood of attack strategy. You will usually use this attribute in
-combination with @samp{attacknearest} set to @samp{true}. The Level 
+combination with @samp{attacknearest} set to @samp{true}. The Level
 @samp{Toreador} is an example of the behavior of such rotors.
 @end table
 
@@ -11415,19 +11415,19 @@
 ensure length limits, as this could lead to extreme forces causing unexpected and
 unstable actor movements.
 
-If you set @samp{min} or @samp{max} limits, extraordinary events like actor 
+If you set @samp{min} or @samp{max} limits, extraordinary events like actor
 warping, actor resurrection, moving anchor stones or simply rubberbands that are
 created with an off limit length can cause trouble. When such a limit violation
 is detected an action is performed with a value @samp{false}. You may want to kill
 the rubberband or react in another way by a callback function. The default
 handling is an application of a constant force to bring the actors back within
-the limits. This force value is given by @ref{RubberViolationStrength} and 
+the limits. This force value is given by @ref{RubberViolationStrength} and
 defaults to @samp{50.0}. If you really need to asure that the player is not able
 to violate the limits any further you may need to increase this constant.
 
 Rubberbands can be cut by @ref{st_scissors}, by an @ref{it_vortex} or
- at ref{it_wormhole} with a set @samp{scissors} attribute ,by receiving a 
- at ref{kill} message, by one of the anchors receiving a @ref{disconnect} message 
+ at ref{it_wormhole} with a set @samp{scissors} attribute ,by receiving a
+ at ref{kill} message, by one of the anchors receiving a @ref{disconnect} message
 or a stone anchor that ceases to exist.
 
 Rubberbands can be dynamically generated by @ref{it_rubberband} and
@@ -19275,7 +19275,7 @@
 
 @node Renaming Index
 @unnumbered Renaming Index
- at table @asis 
+ at table @asis
 @item @b{ac-blackball} @expansion{} @code{ac_marble_black}, @pxref{ac_marble}
 @item @b{ac-bug} @expansion{} @ref{ac_bug}
 @item @b{ac-horse} @expansion{} @ref{ac_horse}



From ral at mail.berlios.de  Sun Feb 22 14:04:36 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 22 Feb 2009 14:04:36 +0100
Subject: [Enigma-game-svn] r1549 - in trunk: data data/schemas src src/stones
Message-ID: <200902221304.n1MD4apI012106@sheep.berlios.de>

Author: ral
Date: 2009-02-22 14:04:35 +0100 (Sun, 22 Feb 2009)
New Revision: 1549

Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/ox_magnum.cc
   trunk/src/ox_oxyd1.cc
   trunk/src/ox_peroxyd.cc
   trunk/src/stones/StoneImpulse.cc
   trunk/src/stones/StoneImpulse.hh
   trunk/src/world.cc
Log:
Trunk 1.1: new API reengineering
- fix six missed renamings in DAT compatibility
- fix st_actorimpulse missing "signal" message declaration for compatibility
- st_stoneimpulse: add support for new break animation

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/data/models-2d.lua	2009-02-22 13:04:35 UTC (rev 1549)
@@ -1204,6 +1204,11 @@
    DefShModel("st-stoneimpulse-hollow-anim2", "stoneimpulse-hollow-anim2", "sh-floating")
 end
 
+do
+    local images = DefSubimages("st_stoneimpulse_break", {h=8})
+    DefAnim("st_stoneimpulse_breaking", BuildFrames(images,50))
+end
+
 -- st-switch, st-switch_black, st-switch_white --
 do
     function mkswitch(modelname, basename)

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/data/schemas/objects.xml	2009-02-22 13:04:35 UTC (rev 1549)
@@ -915,6 +915,7 @@
       <attr name="hit_distortion_xy"/>
       <attr name="hit_distortion_yx"/>
       <attr name="hit_distortion_yy"/>
+      <msg name="signal"/>
       <msg name="_init"/>
       <msg name="_model_reanimated"/>
       <msg name="_trigger"/>

Modified: trunk/src/ox_magnum.cc
===================================================================
--- trunk/src/ox_magnum.cc	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/src/ox_magnum.cc	2009-02-22 13:04:35 UTC (rev 1549)
@@ -98,7 +98,7 @@
     UNUSED,                     // OxydMagnum floor 0x3d
     UNUSED,                     // OxydMagnum floor 0x3e
     0,                          // OxydMagnum floor 0x3f (Level 121 ?)(in normal Oxyd Magnum Levels unused!)
-    "fl-wood_framed_h",         // OxydMagnum floor 0x40
+    "fl_wood_framed_h",         // OxydMagnum floor 0x40
     "fl_wood",                  // OxydMagnum floor 0x41
     "fl_wood_h",                // OxydMagnum floor 0x42
     UNUSED,                     // OxydMagnum floor 0x43
@@ -332,7 +332,7 @@
     "it_spring_keep",   // OxydMagnum item 0x27
     "it_bag",           // OxydMagnum item 0x28
     "it_magnet_off",    // OxydMagnum item 0x29
-    "it_inversesensor", // OxydMagnum item 0x2a
+    "it_sensor_inverse", // OxydMagnum item 0x2a
     "it_sensor",        // OxydMagnum item 0x2b
     "it_shogun_s",      // OxydMagnum item 0x2c
     "it_vortex_open",   // OxydMagnum item 0x2d

Modified: trunk/src/ox_oxyd1.cc
===================================================================
--- trunk/src/ox_oxyd1.cc	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/src/ox_oxyd1.cc	2009-02-22 13:04:35 UTC (rev 1549)
@@ -348,7 +348,7 @@
     "it_spring_keep",             // 0x27
     "it_bag",                     // 0x28
     "it_magnet_off",              // 0x29
-    "it_inversesensor",           // 0x2a
+    "it_sensor_inverse",          // 0x2a
     "it_sensor",                  // 0x2b
     "it_shogun_s",                // 0x2c
     "it_vortex_open",             // 0x2d

Modified: trunk/src/ox_peroxyd.cc
===================================================================
--- trunk/src/ox_peroxyd.cc	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/src/ox_peroxyd.cc	2009-02-22 13:04:35 UTC (rev 1549)
@@ -182,7 +182,7 @@
     "fl_bridge",                // PerOxyd floor 0x4c
     UNUSED,                     // PerOxyd floor 0x4d
     "fl_gray",                  // PerOxyd floor 0x4e
-    "fl-gradient13",            // PerOxyd floor 0x4f (flat force up, beige)        (maybe gradient22?)
+    "fl_slope_ts",              // PerOxyd floor 0x4f (flat force up, beige)        (maybe gradient22?)
     "fl_dark",                  // PerOxyd floor 0x50 (flat force down, dark olive) (maybe gradient21?)
     "fl_bright",                // PerOxyd floor 0x51 (flat force left, beige)      (maybe gradient24?)
     "fl_dark",                  // PerOxyd floor 0x52 (flat force right, dark olive)(maybe gradient23?)
@@ -211,7 +211,7 @@
     "st_beads",                 // PerOxyd stone 0x14
     "st_tigris",                // PerOxyd stone 0x15
     "st_greengray",             // PerOxyd stone 0x16
-    "st-white1",                // PerOxyd stone 0x17 (Looks a little bit different, but function should be the same.)
+    "st_passage_white_square",  // PerOxyd stone 0x17 (Looks a little bit different, but function should be the same.)
     "st_grate_cross",           // PerOxyd stone 0x18
     UNUSED,                     // PerOxyd stone 0x19
     "st_surprise",              // PerOxyd stone 0x1a
@@ -416,7 +416,7 @@
     "it_surprise",                // 0x22
     "it_pin",                     // 0x23
     "it_seed",                    // 0x24
-    "it_spring_board",            // 0x25
+    "it_spring_drop",             // 0x25
     "it_spring_keep",             // 0x26
     "it_bag",                     // 0x27
     "it_magnet_off",              // 0x28

Modified: trunk/src/stones/StoneImpulse.cc
===================================================================
--- trunk/src/stones/StoneImpulse.cc	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/src/stones/StoneImpulse.cc	2009-02-22 13:04:35 UTC (rev 1549)
@@ -94,7 +94,7 @@
                 (server::EnigmaCompatibility < 1.10 /*&& m.value.getType() == Value::NIL*/))) { // hack for old trigger without value
             setIState(EXPANDING);
             return Value();
-        } else if (m.message == "_model_reanimated") {
+        } else if (m.message == "_model_reanimated" && state != BREAKING) {
             // we are swapped in or out of a laser beam
             if ((objFlags & OBJBIT_STEADY) && (objFlags & OBJBIT_LIGHTNEWDIRS))
                 init_model();     // replace potential bogus model
@@ -108,8 +108,10 @@
                setIState(EXPANDING);     // replace potential bogus model
             return Value();
         } else if (m.message == "ignite") {
-            if (server::GameCompatibility != GAMET_ENIGMA || (objFlags & OBJBIT_LIGHTNEWDIRS))
-                KillStone(get_pos());
+            if (server::GameCompatibility != GAMET_ENIGMA || (objFlags & OBJBIT_LIGHTNEWDIRS)) {
+                state = BREAKING;
+                init_model();
+            }
             return Value();
         } else
             return Stone::message(m);
@@ -123,6 +125,8 @@
     void StoneImpulse::init_model() {
         if (state == IDLE)
             set_model(ecl::strf("st-stoneimpulse%s", isHollow() ? "-hollow" : ((objFlags & OBJBIT_STEADY) ? "-steady" : "")));
+        else if (state == BREAKING)
+            set_anim("st_stoneimpulse_breaking");
         else
             set_anim(ecl::strf("st-stoneimpulse%s-anim%d", isHollow() ? "-hollow" : "",
                     state == EXPANDING ? 1 : 2));
@@ -149,7 +153,9 @@
     }
 
     void StoneImpulse::animcb() {
-        if (state == EXPANDING)
+        if (state == BREAKING)
+            KillStone(get_pos());
+        else if (state == EXPANDING)
             setIState(SHRINKING);
         else {
             setIState(IDLE);
@@ -174,13 +180,18 @@
     }
     
     void StoneImpulse::actor_hit(const StoneContact &sc) {
-        if ((objFlags & OBJBIT_MOVABLE) && maybe_push_stone(sc))
-            return;                                      // stone did move on impulse
-        else if (!isHollow()) 
-            sc.actor->send_impulse(sc.stonepos, NODIR);  // impulse on the slightest touch
+        if (state != BREAKING) {
+            if ((objFlags & OBJBIT_MOVABLE) && maybe_push_stone(sc))
+                return;                                      // stone did move on impulse
+            else if (!isHollow()) 
+                sc.actor->send_impulse(sc.stonepos, NODIR);  // impulse on the slightest touch
+        }
     }
 
     void StoneImpulse::on_impulse(const Impulse& impulse) {
+        if (state == BREAKING)
+            return;
+            
         Actor *hitman = NULL;
         if ((objFlags & OBJBIT_MOVABLE) && (impulse.dir != NODIR)) {
             // move stone without disturbing a running animation
@@ -223,7 +234,7 @@
     }
     
     void StoneImpulse::setIState(int newState, Direction incoming) {
-        if (newState != state && isDisplayable()) {
+        if (newState != state && isDisplayable() && state != BREAKING) {
             switch (newState) {
                 case IDLE:
                     state = newState;

Modified: trunk/src/stones/StoneImpulse.hh
===================================================================
--- trunk/src/stones/StoneImpulse.hh	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/src/stones/StoneImpulse.hh	2009-02-22 13:04:35 UTC (rev 1549)
@@ -41,7 +41,8 @@
         enum iState {
             IDLE,        ///<  
             EXPANDING,   ///<  
-            SHRINKING    ///<
+            SHRINKING,   ///<
+            BREAKING
         };
         
         enum ObjectPrivatFlagsBits {

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-22 00:57:04 UTC (rev 1548)
+++ trunk/src/world.cc	2009-02-22 13:04:35 UTC (rev 1549)
@@ -1872,7 +1872,6 @@
     }
     
     if (src->is_kind("st_actorimpulse")) {
-        Log << "AddSignal for st-actorimpulse\n";
         ObjectList ol = src->getDefaultedAttr("$!oxyd!destinations", Value(Value::GROUP));
         ol.push_back(dstValue);
         src->setAttr("$!oxyd!destinations", ol);
@@ -1911,8 +1910,8 @@
     src->setAttr(target_key, Value(targets));
     TokenList actions = src->getDefaultedAttr(action_key, Value(Value::TOKENS));    
     actions.push_back(Value("signal"));   // add this target to existing ones
-    src->setAttr(action_key, Value(actions));
-}
+    src->setAttr(action_key, actions);
+ }
 
 
 Value SendMessage(Object *obj, const std::string &msg, const Value& value, Object *sender)



From andreasl at mail.berlios.de  Sun Feb 22 18:18:05 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Sun, 22 Feb 2009 18:18:05 +0100
Subject: [Enigma-game-svn] r1550 - in trunk/data: gfx16 gfx32 gfx40 gfx48
	gfx64 levels/lib
Message-ID: <200902221718.n1MHI5A9010134@sheep.berlios.de>

Author: andreasl
Date: 2009-02-22 18:17:59 +0100 (Sun, 22 Feb 2009)
New Revision: 1550

Removed:
   trunk/data/gfx16/st_oxydb.png
   trunk/data/gfx16/st_oxyde.png
   trunk/data/gfx64/st_oxydb.png
   trunk/data/gfx64/st_oxyde.png
Modified:
   trunk/data/gfx32/st_oxydb.png
   trunk/data/gfx32/st_oxyde.png
   trunk/data/gfx40/st_oxydb.png
   trunk/data/gfx40/st_oxyde.png
   trunk/data/gfx48/st_oxydb.png
   trunk/data/gfx48/st_oxyde.png
   trunk/data/levels/lib/libmath.xml
Log:
Trunk:
 - added liblua as dependency to libmath
 - typo in libmath
 - reverted graphics st_oxydb to old version, adapted st_oxyde


Deleted: trunk/data/gfx16/st_oxydb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx16/st_oxyde.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_oxydb.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_oxyde.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_oxydb.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_oxyde.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_oxydb.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_oxyde.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/st_oxydb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/st_oxyde.png
===================================================================
(Binary files differ)

Modified: trunk/data/levels/lib/libmath.xml
===================================================================
--- trunk/data/levels/lib/libmath.xml	2009-02-22 13:04:35 UTC (rev 1549)
+++ trunk/data/levels/lib/libmath.xml	2009-02-22 17:17:59 UTC (rev 1550)
@@ -8,6 +8,7 @@
       <el:copyright>Copyright ? 2007, 2008 Enigma Team</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
+        <el:dependency el:path="lib/liblua" el:id="lib/liblua" el:release="1" el:preload="true"/>
       </el:compatibility>
       <el:modes el:easy="false" el:single="false" el:network="false"/>
       <el:comments>
@@ -33,6 +34,9 @@
 --   lib.lua.mod(value, modul)
 --   lib.lua.cond(condition, iftrue, iffalse)
 --
+-- libmath depends on liblua, as lib.math.combinations makes
+-- use of lib.lua.deep_copy.
+--
 
 lib.math = {}
 setmetatable(lib.math, getmetatable(lib))
@@ -131,9 +135,6 @@
 -- of depth DEPTH. Note that liblua has to be loaded to use
 -- lib.math.combinations.
 function lib.math.combinations(depth, digits)
-  if not lib.lua then
-    error("combinations: Please include the library liblua to use lib.math.combinations.", 2)
-  end
   local all_combinations = {{}}
   local digs = digits
   if (type(depth) ~= "number") or (depth < 1) or (depth ~= math.floor(depth)) then
@@ -157,7 +158,7 @@
       for _, new_digit in pairs(digs) do
         local new_combination = lib.lua.deep_copy(old_combination)
         table.insert(new_combination, new_digit)
-        table.insert(next, new_combination)
+        table.insert(next_step, new_combination)
       end
     end
     all_combinations = next_step



From raoul at mail.berlios.de  Sun Feb 22 19:45:41 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 22 Feb 2009 19:45:41 +0100
Subject: [Enigma-game-svn] r1551 - in trunk/data: gfx32 gfx40 gfx48
Message-ID: <200902221845.n1MIjfnR003240@sheep.berlios.de>

Author: raoul
Date: 2009-02-22 19:45:40 +0100 (Sun, 22 Feb 2009)
New Revision: 1551

Added:
   trunk/data/gfx32/it_sensor_exit.png
   trunk/data/gfx40/it_sensor_exit.png
   trunk/data/gfx48/it_sensor_exit.png
Log:
-> Images for exitsensor models



Added: trunk/data/gfx32/it_sensor_exit.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/it_sensor_exit.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/it_sensor_exit.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/it_sensor_exit.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/it_sensor_exit.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/it_sensor_exit.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Mon Feb 23 14:34:47 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 23 Feb 2009 14:34:47 +0100
Subject: [Enigma-game-svn] r1552 - in trunk/data/levels: enigma_cross
	enigma_demolevels enigma_experimental enigma_vii enigma_viii
Message-ID: <200902231334.n1NDYl3l031271@sheep.berlios.de>

Author: raoul
Date: 2009-02-23 14:34:45 +0100 (Mon, 23 Feb 2009)
New Revision: 1552

Removed:
   trunk/data/levels/enigma_experimental/flood_demo_1.xml
   trunk/data/levels/enigma_experimental/puzzle_testarea_1.xml
Modified:
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_demolevels/index.xml
   trunk/data/levels/enigma_demolevels/ralD001_1.xml
   trunk/data/levels/enigma_demolevels/ralD002_1.xml
   trunk/data/levels/enigma_demolevels/ralD004_1.xml
   trunk/data/levels/enigma_demolevels/ralD005_1.xml
   trunk/data/levels/enigma_demolevels/ralD006_1.xml
   trunk/data/levels/enigma_demolevels/ralD007_1.xml
   trunk/data/levels/enigma_experimental/index.xml
   trunk/data/levels/enigma_vii/index.xml
   trunk/data/levels/enigma_vii/ral09_2.xml
   trunk/data/levels/enigma_viii/andreas56_1.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/ral39_1.xml
   trunk/data/levels/enigma_viii/raoul32_1.xml
Log:
-> Demolevels updated
-> Removed some outdated demos
-> A few other levels updated



Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="40" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="41" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -31,7 +31,7 @@
     <level _seq="23" _title="Wood - Water - Wood" _xpath="enigma_vii/duffy173_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy173" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="Transpositions" _xpath="enigma_vii/duffy174_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy174" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="25" _title="Puppet" _xpath="enigma_vii/pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="10" score="1" target="time" unit="duration"/>
-    <level _seq="26" _title="Restless Meditation" _xpath="enigma_vii/ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="126" score="1" target="time" unit="duration"/>
+    <level _seq="26" _title="Restless Meditation" _xpath="enigma_vii/ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="151" score="1" target="time" unit="duration"/>
     <level _seq="27" _title="Ghost Driver" _xpath="enigma_vii/duffy176_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy176" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Re-entry Circuit" _xpath="enigma_vii/pulley05_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley05" rel="2" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Not Fast Enough" _xpath="enigma_vii/jet04_3" author="James Taylor, Ronald Lamprecht" ctrl="force" easy="true" id="20070413jet001" rel="3" rev="3" score="3" target="time" unit="duration"/>
@@ -139,12 +139,12 @@
     <level _seq="131" _title="Coober Pedy Opals" _xpath="enigma_viii/ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="132" _title="Butterfly Opals" _xpath="enigma_viii/ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="133" _title="Brilliant Opals" _xpath="enigma_viii/ral37_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081212ral162" rel="1" rev="126" score="1" target="time" unit="duration"/>
-    <level _seq="134" _title="Squared Microwire" _xpath="enigma_viii/ral39_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081227ral230" rel="1" rev="131" score="1" target="time" unit="duration"/>
+    <level _seq="134" _title="Squared Microwire" _xpath="enigma_viii/ral39_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081227ral230" rel="1" rev="150" score="1" target="time" unit="duration"/>
     <level _seq="135" _title="More or Less Wired" _xpath="enigma_viii/ral42_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081229ral" rel="1" rev="149" score="1" target="time" unit="duration"/>
     <level _seq="136" _title="Sokopal" _xpath="enigma_viii/andreas55_2" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas55" rel="2" rev="5" score="2" target="time" unit="duration"/>
     <level _seq="137" _title="Minopal" _xpath="enigma_viii/andreas54_1" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas54" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="138" _title="Mole Hill Meditation" _xpath="enigma_viii/ral43_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20090112ral228" rel="1" rev="138" score="1" target="time" unit="duration"/>
-    <level _seq="139" _title="Involution" _xpath="enigma_viii/raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="139" _title="Involution" _xpath="enigma_viii/raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="140" _title="Near Halley I" _xpath="enigma_viii/devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="141" _title="Two Is A Company I" _xpath="enigma_viii/devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="142" _title="Two Is A Company II" _xpath="enigma_viii/devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_demolevels/index.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/index.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/index.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,18 +1,18 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Development" location="69000" network="false" owner="Enigma Team" release="1" revision="3" title="Demolevels"/>
+  <info enigma="1.00" group="Development" location="69000" network="false" owner="Enigma Team" release="1" revision="4" title="Demolevels"/>
 
   <attributes/>
 
   <levels>
-    <level _seq="1" _title="Demo User Resolver" _xpath="./ralD001_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080516ral198" rel="1" rev="1405" score="1" target="time" unit="duration"/>
-    <level _seq="2" _title="Demo Resolver Chain" _xpath="./ralD002_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080516ral274" rel="1" rev="1434" score="1" target="time" unit="duration"/>
+    <level _seq="1" _title="Demo User Resolver" _xpath="./ralD001_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080516ral198" rel="1" rev="1441" score="1" target="time" unit="duration"/>
+    <level _seq="2" _title="Demo Resolver Chain" _xpath="./ralD002_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080516ral274" rel="1" rev="1441" score="1" target="time" unit="duration"/>
     <level _seq="3" _title="Demo Oxyd Shuffling" _xpath="./ralD003_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080530ral108" rel="1" rev="1434" score="1" target="time" unit="duration"/>
-    <level _seq="4" _title="Demo Random Resolver" _xpath="./ralD004_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080608ral108" rel="1" rev="1434" score="1" target="time" unit="duration"/>
-    <level _seq="5" _title="Demo Draw Map" _xpath="./ralD005_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080610ral774" rel="1" rev="1434" score="1" target="time" unit="duration"/>
-    <level _seq="6" _title="Basic Level" _xpath="./ralD006_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080721ral513" rel="1" rev="1405" score="1" target="time" unit="duration"/>
-    <level _seq="7" _title="Demo Puzzle" _xpath="./ralD007_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080920ral228" rel="1" rev="1434" score="1" target="time" unit="duration"/>
+    <level _seq="4" _title="Demo Random Resolver" _xpath="./ralD004_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080608ral108" rel="1" rev="1445" score="1" target="time" unit="duration"/>
+    <level _seq="5" _title="Demo Draw Map" _xpath="./ralD005_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080610ral774" rel="1" rev="1457" score="1" target="time" unit="duration"/>
+    <level _seq="6" _title="Basic Level" _xpath="./ralD006_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080721ral513" rel="1" rev="1457" score="1" target="time" unit="duration"/>
+    <level _seq="7" _title="Demo Puzzle" _xpath="./ralD007_1" author="Ronald Lamprecht" ctrl="force" easy="false" id="20080920ral228" rel="1" rev="1457" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_demolevels/ralD001_1.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/ralD001_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/ralD001_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Demo User Resolver" el:subtitle="" el:id="20080516ral198"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1405 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1441 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2007 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -15,8 +15,8 @@
       <el:score el:easy="-" el:difficult="-"/>
     </el:info>
     <el:luamain><![CDATA[
-ti["r"] = {"fl-rough-red"}
-ti["b"] = {"fl-rough-blue"}
+ti["r"] = {"fl_redslab"}
+ti["b"] = {"fl_blueslab"}
 ti["1"] = {"#ac_marble"}
 
 ti["x"] = {"it_cross"}

Modified: trunk/data/levels/enigma_demolevels/ralD002_1.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/ralD002_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/ralD002_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Demo Resolver Chain" el:subtitle="" el:id="20080516ral274"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1434 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1441 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -17,7 +17,7 @@
     <el:luamain><![CDATA[
 ti["~"] = {"fl_water"}
 ti["s"] = {"fl_sahara"}
-ti["t"] = {"fl-tigris"}
+ti["t"] = {"fl_tigris"}
 ti["1"] = {"ac_marble", 0, 0.5}
 
 ti["template_trigger"] = {"it_trigger", target="myoxyd%%", action="open"}

Modified: trunk/data/levels/enigma_demolevels/ralD004_1.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/ralD004_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/ralD004_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Demo Random Resolver" el:subtitle="" el:id="20080608ral108"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1434 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1445 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -17,10 +17,10 @@
     <el:luamain><![CDATA[
 ti["~"] = {"fl_water"}
 ti["s"] = {"fl_sahara"}
-ti["t"] = {"fl-tigris"}
-ti["i"] = {"fl-inverse2"}
-ti["b"] = {"fl-acblack"}
-ti["w"] = {"fl-acwhite"}
+ti["t"] = {"fl_tigris"}
+ti["i"] = {"fl_inverse_gray"}
+ti["b"] = {"fl_yinyang_yin"}
+ti["w"] = {"fl_yinyang_yang"}
 
 ti["c"] = {"it_coin_s"}
 ti["p"] = {"it_brush"}

Modified: trunk/data/levels/enigma_demolevels/ralD005_1.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/ralD005_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/ralD005_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Demo Draw Map" el:subtitle="" el:id="20080610ral774"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1434 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1457 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -20,7 +20,7 @@
 ti["B"] = {"st_passage_black", flavor="cross"}
 ti["W"] = {"st_passage_white", flavor="cross"}
 
-ti["y"] = {"it-yinyang"}
+ti["y"] = {"it_yinyang"}
 ti["1"] = ti["y"] .. {"#ac_marble_black"}
 ti["2"] = ti["y"] .. {"#ac_marble_white"}
 

Modified: trunk/data/levels/enigma_demolevels/ralD006_1.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/ralD006_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/ralD006_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Basic Level" el:subtitle="" el:id="20080721ral513"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1405 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1457 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -15,10 +15,10 @@
 
 wo["ConserveLevel"] = true
 
-ti[" "] = {"fl-samba"}
+ti[" "] = {"fl_samba"}
 ti["."] = {"fl_abyss"}
 ti["~"] = {"fl_water"}
-ti["#"] = {"st-rock1"}
+ti["#"] = {"st_granite"}
 ti["X"] = {"st_oxyd"}
 
 ti["L"] = {"st_laser", orientation=EAST, state=ON}
@@ -41,7 +41,7 @@
 ti["E"] = {"st_turnstilearm", orientation=EAST}
 ti["N"] = ti["."] .. {"st_turnstilearm_n"}
 
-ti["+"] = {"fl-samba", checkerboard=0} .. ti({"fl_wood", checkerboard=1})
+ti["+"] = {"fl_samba", checkerboard=0} .. ti({"fl_wood", checkerboard=1})
 
 ti["1"] = {"#ac_marble"}
 

Modified: trunk/data/levels/enigma_demolevels/ralD007_1.xml
===================================================================
--- trunk/data/levels/enigma_demolevels/ralD007_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_demolevels/ralD007_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Demo Puzzle" el:subtitle="" el:id="20080920ral228"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 1434 $" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 1457 $" el:status="experimental"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -19,7 +19,7 @@
 wo["ConserveLevel"] = true
 
 ti["  "] = {"fl_sahara"}
-ti["##"] = {"st-rock1"}
+ti["##"] = {"st_granite"}
 
 ti[".."] = {"fl_sahara", push_directions="nesw"}
 

Deleted: trunk/data/levels/enigma_experimental/flood_demo_1.xml
===================================================================
--- trunk/data/levels/enigma_experimental/flood_demo_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_experimental/flood_demo_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,75 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Flood Demo" el:subtitle="Demolevel for libflood" el:id="flood_demo"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="stable"/>
-      <el:author  el:name="Raoul Bourquin" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2007 Raoul Bourquin</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00">
-       <el:dependency el:path="lib/libflood_1" el:id="lib/libflood" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- GENERAL --
-levelh = 13
-levelw = 20
-
-create_world(levelw, levelh)
-
-function renderLine( line, pattern)
-	for i=1, strlen(pattern) do
-		local c = strsub( pattern, i, i)
-  		if c=="x" then
-			oxyd(i-1,line)
-        elseif c=="#" then
-            set_stone("st-glass",i-1,line)
-            set_floor("fl-black",i-1,line)
-        elseif c==" " then
-            set_floor("fl-rough",i-1,line)
-        elseif c=="-" then
-            set_floor("fl-black",i-1,line)
-		end
-	end
-end
-
-renderLine(00 , "####################")
-renderLine(01 , "#------------------#")
-renderLine(02 , "#------------------#")
-renderLine(03 , "#---------------- -#")
-renderLine(04 , "#--      -         #")
-renderLine(05 , "#-     - ----     -#")
-renderLine(06 , "#-          -  ----#")
-renderLine(07 , "#-   ------ -  -  -#")
-renderLine(08 , "#- ---    - --    -#")
-renderLine(09 , "#    -  -      -  -#")
-renderLine(10 , "#- ----------------#")
-renderLine(11 , "#------------------#")
-renderLine(12 , "####################")
-
-oxyd_shuffle()
-set_actor("ac-blackball", 1.5,1.5, {player=0})
-
--- PART FOR THE LIBFLOOD:
-
-init_flood({"################ #",
-            "##      #       ~ ",
-            "# ~   # ####     #",
-            "#          #  ####",
-            "#   ###### #  #  #",
-            "# ###~   # ##   ~#",
-            "    #  #      # ~#",
-            "# ################"},{1,3},1)
-
-set_stone("st-switch_black",2,2,{action="callback", target="do_flood"})
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Modified: trunk/data/levels/enigma_experimental/index.xml
===================================================================
--- trunk/data/levels/enigma_experimental/index.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_experimental/index.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,20 +1,18 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Development" location="70300" network="false" owner="Enigma Team" release="1" revision="6" title="Experimental"/>
+  <info enigma="1.00" group="Development" location="70300" network="false" owner="Enigma Team" release="1" revision="7" title="Experimental"/>
 
   <attributes/>
 
   <levels>
     <level _seq="1" _title="Demo Simple" _xpath="./demo_simple" author="Ronald Lamprecht" ctrl="force" easy="false" id="20060210ral001" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="2" _title="Demo I18N" _xpath="./demo_i18n" author="Ronald Lamprecht" ctrl="force" easy="false" id="20060211ral002" rel="1" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="3" _title="All Stones" _xpath="./stones_1" author="Raoul Bourquin" ctrl="force" easy="false" id="stones" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="4" _title="All Floors" _xpath="./floors_1" author="Raoul Bourquin" ctrl="force" easy="false" id="floors" rel="1" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="5" _title="All Items" _xpath="./items_1" author="Raoul Bourquin" ctrl="force" easy="false" id="items" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="6" _title="Puzzle Labor" _xpath="./puzzle_testarea_1" author="Raoul Bourquin" ctrl="force" easy="false" id="puzzle_testarea" rel="1" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="7" _title="Flood Demo" _xpath="./flood_demo_1" author="Raoul Bourquin" ctrl="force" easy="false" id="flood_demo" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="8" _title="Libsoko - Test" _xpath="./test_libsoko" author="Andreas Lochmann" ctrl="force" easy="true" id="test_libsoko" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="9" _title="New API Template" _xpath="./level_template" author="AUTHOR" ctrl="force" easy="false" id="template" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="3" _title="New API level template" _xpath="./level_template" author="AUTHOR" ctrl="force" easy="false" id="level_template" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="4" _title="All Stones" _xpath="./stones_1" author="Raoul Bourquin" ctrl="force" easy="false" id="stones" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="5" _title="All Floors" _xpath="./floors_1" author="Raoul Bourquin" ctrl="force" easy="false" id="floors" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="6" _title="All Items" _xpath="./items_1" author="Raoul Bourquin" ctrl="force" easy="false" id="items" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="7" _title="Libsoko - Test" _xpath="./test_libsoko" author="Andreas Lochmann" ctrl="force" easy="true" id="test_libsoko" rel="1" rev="3" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Deleted: trunk/data/levels/enigma_experimental/puzzle_testarea_1.xml
===================================================================
--- trunk/data/levels/enigma_experimental/puzzle_testarea_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_experimental/puzzle_testarea_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,207 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Puzzle Labor" el:subtitle="Testlevel to examine new puzzles" el:id="puzzle_testarea"/>
-      <el:version el:score="1" el:release="1" el:revision="2" el:status="stable"/>
-      <el:author  el:name="Raoul Bourquin" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2005, 2007 Raoul Bourquin</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00">
-       <el:dependency el:path="lib/libpuzzle" el:id="lib/libpuzzle" el:release="2" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-levelw = 39
-levelh = 13
-create_world(levelw, levelh)
-enigma.ConserveLevel = FALSE
-
--- Design --
-boden="fl-sahara"
-wand="st-glass"
-boden2="fl-black"
-
--- FLOOR --
-fill_floor(boden, 0,0,levelw,levelh)
-fill_floor(boden2,7,3,8,6)
-
--- STONES --
-draw_border(wand)
-draw_stones(wand,{19,1},{0,1},11)
-
--- ACTORS --
-local ac1=set_actor("ac-blackball", 1.5,1.5, {player=0, essential = 1})
-local ac2=set_actor("ac-whiteball", 21.5,2.5, {player=1, essential = 1})
-
--- ITEMS
-set_item("it-yinyang",1,1)
-set_item("it-yinyang",21,2)
-
-set_item("it-document",2,7,{text="Increment the num_permutation, beginning with 1."})
-set_item("it-document",2,8,{text="Reset the num_permutation to nil (random default)."})
-
-set_item("it-document",17,11,{text="Clear"})
-
-set_item("it-document",21,5,{text="With the switches at the right, you can determine the layout of the desired puzzle."})
-set_item("it-document",21,6,{text="Switch up means stone, switch down means no stone at that position."})
-set_item("it-document",21,7,{text="After you set up the layout, hit the switch at the top and return to the left screen."})
-set_item("it-document",21,1,{text="Store the figure to draw it."})
-set_item("it-document",21,11,{text="Reset all switches."})
-
-set_item("it-document",1,10,{text="Which Stonetype? Possible are: \"st-puzzle\", \"st-puzzle2\", \"st-bigbrick\" or \"st-bigbluesand\"."})
-set_item("it-document",17,1,{text="Draw the puzzle unshuffled. (shuffle_method = \"none\")."})
-set_item("it-document",17,3,{text="Draw the puzzle shuffled with the \"random\" method."})
-set_item("it-document",17,5,{text="Draw the puzzle shuffled with the \"permutation\" method."})
-
-set_item("it-magicwand",2,10)
---------------------------------------------------------------------------------
--- SWITCHES, left room:
--- Switches to draw the puzzle:
-set_stone("st-switch", 18, 1, {action="callback",target="draw_none",name="draw1"})
-set_stone("st-switch", 18, 3, {action="callback",target="draw_random",name="draw2"})
-set_stone("st-switch", 18, 5, {action="callback",target="draw_permutation",name="draw3"})
-
--- Clear the canvas:
-set_stone("st-switch", 18, 11, {action="callback",target="remove_puzzle",name="clear"})
-
-set_stone("st-switch", 1, 7, {action="callback",target="increment_num_permutations",name="num"})
-set_stone("st-switch", 1, 8, {action="callback",target="reset_num_permutations",name="rnum"})
-set_stone("st-switch", 1, 11, {action="callback",target="stone_kind_switch",name="kind"})
-
--- Right room:
-set_stone("st-switch", 20, 1, {action="callback",target="write_values",name="w_v"})
-set_stone("st-switch", 20, 11, {action="callback",target="clear_values",name="c_v"})
-
--- Generate the switches and functions
-nr=0
-array={}
-for i=1,6 do
-    for j=1,8 do
-        nr = nr+1
-        set_stone("st-switch",21+2*j,-1+2*i, {action="callback", target="sw"..nr, name="swi"..nr})
-
-        func = "function sw"..nr.."() k="..nr.."; if array[k]==0 then array[k]=1 else array[k]=0 end end"
-        dostring(func)
-        array[nr] = 0
-   end
-end
---------------------------------------------------------------------------------
----------------------
---WORLD-VALUES:
-defaultmap = {" # # ",
-              "#####",
-              " # # "}
-
-stone_kind = {"redpuzzle","bluepuzzle","bigbrick","bigbluesand"}
-kind_pointer = 1
-
-charmap = defaultmap
-
-local num_permutations = nil
--- Functions to draw the puzzle:
-function draw_none()
-    puzzle(charmap,{7,3},stone_kind[kind_pointer],"none")
-end
-
-function draw_random()
-    puzzle(charmap,{7,3},stone_kind[kind_pointer],"random",num_permutations)
-end
-
-function draw_permutation()
-    puzzle(charmap,{7,3},stone_kind[kind_pointer],"permutation",num_permutations)
-end
-
--- Clear:
-function remove_puzzle()
-    for i=1,8 do
-        for j=1,6 do
-            enigma.KillStone(6+i,2+j)
-        end
-    end
-end
-
--- Chose the kind
-function stone_kind_switch()
-    kind_pointer = kind_pointer +1
-    if kind_pointer > 4 then
-        kind_pointer = 1
-    end
-    set_item("it-document",2,11,{text="Stonekind set to: "..stone_kind[kind_pointer]})
-end
-
-function increment_num_permutations()
-    if num_permutations == nil then
-        num_permutations = 1
-    else
-        num_permutations = num_permutations +1
-    end
-    set_item("it-document",2,7,{text="Num_Permutations set to: "..tostring(num_permutations)})
-end
-
-function reset_num_permutations()
-    num_permutations = nil
-    set_item("it-document",2,7,{text="Num_Permutations set to: "..tostring(num_permutations)})
-end
---------------------------------------------------------------------------------
--- Reset the switches
-function clear_values()
-    matrix={{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}}
-    for o=1,48 do
-        enigma.SendMessage(enigma.GetNamedObject("swi"..o),"off",nil)
-    end
-end
-
--- Store the switchvalues
-function write_values()
-    matrix={{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}}
-    local x = 1
-    local y = 1
-    local h = 0
-    for h=1, 48 do
-        matrix[y][x] = array[h]
-        if x == 8 then
-            x = 0
-            y = y + 1
-        end
-        x = x+1
-    end
-    gen_charmap()
-end
-
--- Generate the charmap
-function gen_charmap()
-    charmap = {}
-    local checker = 0
-    local i, j = 0, 0
-    for i=1, 6 do
-        charmap[i]=""
-        local buffer = ""
-        for j=1, 8 do
-            if matrix[i][j] == 1 then
-                checker = 1
-                buffer = buffer.."#"
-            elseif matrix[i][j] == 0 then
-                buffer = buffer.." "
-            end
-        end
-        charmap[i] = buffer
-    end
-    if checker == 0 then
-        -- If we leave this out, libpuzzle would raise an error!
-        charmap = defaultmap
-    end
-end
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Modified: trunk/data/levels/enigma_vii/index.xml
===================================================================
--- trunk/data/levels/enigma_vii/index.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_vii/index.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="45" title="Enigma VII"/>
+  <info enigma="1.00" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="46" title="Enigma VII"/>
 
   <attributes/>
 
@@ -55,7 +55,7 @@
     <level _seq="47" _title="Wood - Water - Wood" _xpath="./duffy173_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy173" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="48" _title="Transpositions" _xpath="./duffy174_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy174" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="49" _title="Puppet" _xpath="./pulley06_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley06" rel="2" rev="10" score="1" target="time" unit="duration"/>
-    <level _seq="50" _title="Restless Meditation" _xpath="./ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="126" score="1" target="time" unit="duration"/>
+    <level _seq="50" _title="Restless Meditation" _xpath="./ral09_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070623ral914" rel="2" rev="151" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Ghost Driver" _xpath="./duffy176_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy176" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="52" _title="Re-entry Circuit" _xpath="./pulley05_2" author="Mark Pulley" ctrl="force" easy="false" id="pulley05" rel="2" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Not Fast Enough" _xpath="./jet04_3" author="James Taylor, Ronald Lamprecht" ctrl="force" easy="true" id="20070413jet001" rel="3" rev="3" score="3" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_vii/ral09_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/ral09_2.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_vii/ral09_2.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Restless Meditation" el:subtitle="Caution - Quick Sand!" el:id="20070623ral914"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 126 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 151 $" el:status="released"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2007,2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -19,13 +19,13 @@
 ti[" "] = {"fl_swamp"}
 ti["#"] = {"st_box"}
 if wo["IsDifficult"] then
-  wo["SwampSinkSpeed"] = 2.5
+  wo["SwampSinkTime"] = 1.6
   ti["."] = {"it_meditation_hollow"}
   ti["1"] = {"#ac_pearl", essential=1}
   ti["*"] = ti[" "]
   ti["2"] = ti[" "]
 else
-  wo["SwampSinkSpeed"] = 1.5
+  wo["SwampSinkTime"] = 2.67
   ti["*"] = {"it_meditation_hollow"}
   ti["2"] = {"#ac_pearl", essential=1}
   ti["."] = ti[" "]
@@ -49,7 +49,7 @@
     "####################"
 })
 
-    ]]></el:luamain>
+ ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">
         <el:english el:translate="true"/>
@@ -62,4 +62,3 @@
     </el:i18n>
   </el:protected>
 </el:level>
-

Modified: trunk/data/levels/enigma_viii/andreas56_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/andreas56_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_viii/andreas56_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -22,8 +22,7 @@
 ti["#"] = {"st_greengray", "wall#"}
 ti["N"] = {"st_purplegray", "wall#"}
 ti["O"] = {"st_oxyd", flavor = "a", oxydcolor = OXYD_GRAY}
-ti["Y"] = {"st_yinyang", action = {"grow", "callback"},
-            target = {"@@seed#*", "change_design"}} .. ti{"it_seed_fake", "seed#"}
+ti["Y"] = {"st_yinyang", loop = false, target = "change_design"}
 ti["B"] = {"st_blur_cross"}
 ti["S"] = {"st_surprise", selection = {"st_passage_black", "st_passage_white"}}
 ti["@"] = {"#ac_marble", essential = INDISPENSIBLE}
@@ -68,12 +67,6 @@
       <el:string el:key="title">
         <el:english el:translate="false"/>
       </el:string>
-      <el:string el:key="text1">
-        <el:english el:translate="true">Just a hint: Try the easy-mode first ...</el:english>
-      </el:string>
-      <el:string el:key="text2">
-        <el:english el:translate="true">Don't think too long ... it's easy!</el:english>
-      </el:string>
     </el:i18n>
   </el:protected>
 </el:level>

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="35" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="36" title="Enigma VIII"/>
 
   <attributes/>
 
@@ -65,11 +65,11 @@
     <level _seq="57" _title="Coober Pedy Opals" _xpath="./ral35_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral610" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Butterfly Opals" _xpath="./ral36_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081207ral708" rel="1" rev="126" score="1" target="time" unit="duration"/>
     <level _seq="59" _title="Brilliant Opals" _xpath="./ral37_1" author="Ronald Lamprecht, Andreas Lochmann" ctrl="force" easy="true" id="20081212ral162" rel="1" rev="126" score="1" target="time" unit="duration"/>
-    <level _seq="60" _title="Squared Microwire" _xpath="./ral39_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081227ral230" rel="1" rev="131" score="1" target="time" unit="duration"/>
+    <level _seq="60" _title="Squared Microwire" _xpath="./ral39_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081227ral230" rel="1" rev="150" score="1" target="time" unit="duration"/>
     <level _seq="61" _title="More or Less Wired" _xpath="./ral42_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081229ral" rel="1" rev="149" score="1" target="time" unit="duration"/>
     <level _seq="62" _title="Sokopal" _xpath="./andreas55_2" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas55" rel="2" rev="5" score="2" target="time" unit="duration"/>
     <level _seq="63" _title="Mole Hill Meditation" _xpath="./ral43_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20090112ral228" rel="1" rev="138" score="1" target="time" unit="duration"/>
-    <level _seq="64" _title="Involution" _xpath="./raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="64" _title="Involution" _xpath="./raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="Near Halley I" _xpath="./devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="66" _title="Two Is A Company I" _xpath="./devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="67" _title="Two Is A Company II" _xpath="./devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_viii/ral39_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/ral39_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_viii/ral39_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Squared Microwire" el:subtitle="" el:id="20081227ral230"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 131 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 150 $" el:status="released"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -16,7 +16,7 @@
     </el:info>
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = true
-wo["SwampSinkSpeed"] = 2.5
+wo["SwampSinkTime"] = 2.8
 
 ti[" "] = {"fl_water"}
 ti["."] = {"fl_swamp", friction=6.0, adhesion=2.0}
@@ -60,7 +60,7 @@
 
 wo:shuffleOxyd()
 
-    ]]></el:luamain>
+ ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">
         <el:english el:translate="false"/>

Modified: trunk/data/levels/enigma_viii/raoul32_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/raoul32_1.xml	2009-02-22 18:45:40 UTC (rev 1551)
+++ trunk/data/levels/enigma_viii/raoul32_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Involution" el:subtitle="" el:id="raoul32"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="released"/>
       <el:author  el:name="Raoul Bourquin" el:email=""/>
       <el:copyright>Copyright ? 2009 Raoul Bourquin</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -20,7 +20,7 @@
     ti[","] = ti[" "]
 end
 ti["Y"] = {"st_yinyang_active"}
-ti["y"] = ti["."] .. {"st_yinyang", target="onewayw", action="flip"}
+ti["y"] = ti["."] .. {"st_yinyang", loop=false}
 ti["B"] = {"st_passage", flavor="frame", color=BLACK, name="passageb#"}
 ti["W"] = {"st_passage", flavor="frame", color=WHITE, name="passagew#"}
 ti[">"] = {"st_oneway", color=BLACK, orientation=EAST, name="onewaye#"}



From raoul at mail.berlios.de  Mon Feb 23 17:02:51 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 23 Feb 2009 17:02:51 +0100
Subject: [Enigma-game-svn] r1553 - in trunk/data/levels: enigma_cross
	enigma_viii
Message-ID: <200902231602.n1NG2pno014322@sheep.berlios.de>

Author: raoul
Date: 2009-02-23 17:02:50 +0100 (Mon, 23 Feb 2009)
New Revision: 1553

Added:
   trunk/data/levels/enigma_viii/mecke27_1.xml
Modified:
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_viii/index.xml
Log:
-> Added level "Babylon" (mecke27)



Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-23 13:34:45 UTC (rev 1552)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-23 16:02:50 UTC (rev 1553)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="41" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="42" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -150,6 +150,7 @@
     <level _seq="142" _title="Two Is A Company II" _xpath="enigma_viii/devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="143" _title="CrissCross" _xpath="enigma_viii/devnull26_1" author="/dev/null" ctrl="force" easy="true" id="devnull26" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="144" _title="5 Days and 5 Nights" _xpath="enigma_viii/andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="145" _title="Babylon" _xpath="enigma_viii/mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="25" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-23 13:34:45 UTC (rev 1552)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-23 16:02:50 UTC (rev 1553)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="36" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="37" title="Enigma VIII"/>
 
   <attributes/>
 
@@ -75,6 +75,7 @@
     <level _seq="67" _title="Two Is A Company II" _xpath="./devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="68" _title="CrissCross" _xpath="./devnull26_1" author="/dev/null" ctrl="force" easy="true" id="devnull26" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="69" _title="5 Days and 5 Nights" _xpath="./andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="70" _title="Babylon" _xpath="./mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="25" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Added: trunk/data/levels/enigma_viii/mecke27_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke27_1.xml	2009-02-23 13:34:45 UTC (rev 1552)
+++ trunk/data/levels/enigma_viii/mecke27_1.xml	2009-02-23 16:02:50 UTC (rev 1553)
@@ -0,0 +1,298 @@
+<?xml version="1.0" encoding="utf-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"   xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected >
+    <el:info el:type="level">
+      <el:identity el:title="Babylon" el:subtitle="Semiramis' Garden" el:id="mecke27"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision:25 $" el:status="released"/>
+      <el:author  el:name="mecke" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+        <!--<el:dependency el:path="lib/liblua" el:id="lib/liblua" el:release="1" el:preload="true" />-->
+        <el:dependency el:path="lib/libpuzzle" el:id="lib/libpuzzle" el:release="3" el:preload="true"/>
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:credits el:showinfo="true" el:showstart="false">Thanks Ronald for testing and important ideas and Raoul for puzzle and code</el:credits>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="20:43"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["ConserveLevel"] = true
+wo["AllowSingleOxyds"] = true
+
+ti[" ("] = {"fl_abyss"}
+ti[" )"] = {"fl_water"}
+ti[" Q"] = {"fl_bluegray"}
+ti[" $"] = {"fl_metal_7n"}
+ti[" 5"] = {"fl_gravel"}
+ti[" &"] = {"fl_red"}
+ti[" *"] = {"fl_pinkbumps"}
+ti[" +"] = {"fl_himalaya"}
+ti[" l"] = {"fl_ivory"}
+ti[" -"] = {"fl_sand"}
+ti[" /"] = {"fl_sahara"}
+ti[" 0"] = {"fl_concrete"}
+ti[" ."] = {"fl_blueslab"}
+ti["OO"] = {"fl_redslab", eternal=true, initfire=true}
+ti[" !"] = {"fl_stone", burnable=false, friction=3.6}
+ti[" %"] = {"fl_aquamarine", burnable=false}
+
+ti[": "] = {"st_greenbrown"}
+ti["' "] = {"st_greenbrown_hollow"}
+ti["d "] = {"st_greenbrown_movable"}
+ti["E "] = {"st_purplegray"}
+ti["R "] = {"st_yellow"}
+ti["f "] = {"st_plaster_movebreakable"}
+ti["/ "] = {"st_plaster_breakable"}
+ti["! "] = {"st_panel"}
+ti["; "] = {"st_brownie"}
+ti["+ "] = {"st_box_wood"}
+ti["V "] = {"st_plop"}
+ti["O "] = {"st_scissors"}
+ti["~ "] = {"st_chess_black"}
+ti["^ "] = {"st_granite_hollow"}
+ti["D "] = {"st_granite_movable"}
+ti["x "] = {"st_rawglass_movable"}
+ti["0 "] = {"st_swap"}
+ti["t "] = {"st_thief"}
+ti["- "] = {"st_death"}
+ti["= "] = {"st_death_invisible"}
+ti["< "] = {"st_knight"}
+ti["1 "] = {"st_oneway_black_s"}
+ti["2 "] = {"st_passage_white_cross"}
+ti["4 "] = {"st_grate_cross"}
+ti["5 "] = {"st_boulder_s"}
+ti["g "] = {"st_boulder_w"}
+ti["( "] = {"st_polarswitch"}
+ti[") "] = {"st_actorimpulse"}
+ti["7 "] = {"st_stoneimpulse"}
+ti["6 "] = {"st_stoneimpulse_hollow"}
+ti["B "] = {"st_lightpassenger"}
+ti["8 "] = {"st_laser_n"}
+ti["9 "] = {"st_laser_s", state=ON}
+ti["L "] = {"st_laser_w"}
+ti["$ "] = {"st_rotator_ccw"}
+ti["& "] = {"st_rotator_cw"}
+ti["N "] = {"st_rotator_ccw", movable=true}
+ti["Y "] = {"st_rotator_cw", movable=true}
+ti["q "] = {"st_door", state= OPEN, faces="ns"}
+ti["C "] = {"st_mirror", movable=true, transparent=false}
+ti["F "] = {"st_invisible"}
+ti["A "] = {"st_disco_light"}
+ti["% "] = {"st_disco_medium"}
+ti["? "] = {"st_disco_dark"}
+ti["hb"] = ti[" !"] .. {"st_disco_light"}
+ti["o "] = ti[" +"] .. {"st_grate_cross"}
+ti[">!"] = ti[" !"] .. {"st_chameleon"}
+
+ti[". "] = {"st_puzzle", connections="nesw"}
+ti["3 "] = {"st_puzzle", hollow=true, connections="nesw", intensity=0}
+ti["G"] = ti[" !"] .. {"st_puzzle", intensity=0}
+ti["H"] = ti[" )"] .. {"st_puzzle", intensity=0}
+ti["I"] = ti[" !"] .. {"st_puzzle", intensity=0}
+ti["J"] = ti[" )"] .. {"st_puzzle", intensity=0}
+ti["Z"] = ti[" !"] .. {"st_puzzle_yellow"}
+ti["{"] = ti[" )"] .. {"st_puzzle_yellow"}
+ti["M"] = ti[" !"] .. {"st_puzzle_yellow"}
+ti["c"] = ti[" %"] .. {"st_puzzle_yellow"}
+
+ti["_ "] = {"st_swap", name="df1"}
+ti["N1"] = ti[" +"] .. {"st_rotator_ccw", movable=true, name="df2"}
+ti["N2"] = ti[" +"] .. {"st_rotator_ccw", movable=true, name="df3"}
+
+ti["supervortextemplate"] = ti[" +"] .. {"it_vortex_open", name="v%%", destination="b%%"}
+ti["hypervortextemplate"] = ti[" +"] .. {"it_vortex_open", name="b%%", destination="v%%"}
+
+ti["superopentemplate"]  = ti[" +"] .. {"st_laserswitch", target="door%%"}
+ti["superdoortemplate"]  = ti[" !"] .. {"st_door", faces="ns", name="door%%"}
+
+ti["YL"] = ti[" +"] .. {"st_timer", action="toggle", target="laser1#*", interval=3}
+ti["YM"] = ti[" +"] .. {"st_timer", action="toggle", target="laser1#*", interval=15}
+ti["YN"] = ti[" +"] .. {"st_timer", action="toggle", target="laser1#*", interval=22}
+
+ti["XM"] = ti[" +"] .. {"st_laser_n", name="laser1#"}
+ti["XL"] = ti[" +"] .. {"st_laser_s", name="laser1#"}
+
+ti["ntemplate"] = ti[">!"] .. {"it_key", code="%%"}
+ti["etemplate"] = ti[" !"] .. {"st_key", code="%%", target="gate%%"}
+ti["rtemplate"] = ti[" !"] .. {"st_door", faces="ns", name="gate%%"}
+
+ti["Ptemplate"] = ti[" +"] .. {"it_trigger", target="uhu%%"}
+ti["Stemplate"] = ti[" +"] .. {"it_trigger", target="wuhu%%"}
+ti["Utemplate"] = ti[" +"] .. {"st_laser_s", name="uhu%%"}
+ti["Wtemplate"] = ti[" +"] .. {"st_laser_n", name="wuhu%%"}
+
+ti["T0"] = ti[" +"] .. {"it_trigger", target="guru0"}
+ti["G0"] = ti[" !"] .. {"st_door", faces="ns", name="guru0"}
+ti["TZ"] = ti[" +"] .. {"it_trigger", target="guru1"}
+ti["LZ"] = ti[" +"] .. {"st_laser_w", name="guru1"}
+
+ti["k "] = {"it_sword"}
+ti["m "] = {"it_hammer"}
+ti["*3"] = ti[">!"] .. {"it_coin_s"}
+ti["T2"] = ti[" +"] .. {"it_trigger"}
+ti["documents"] = ti[" !"] .. {"it_document", text="text%%"}
+
+ti["z "] = ti[" !"] .. {"st_oxyd_d", target = "oxyd_callback", _seedoxyd=true}
+ti["XX"] = ti[" !"] .. {"st_oxyd_d", target = "oxyd_callback"}
+ti["o1"] = ti[" !"] .. {"st_oxyd_b", name="ox", oxydcolor=OXYD_BOLD, noshuffle=true, target = "shuffle"}
+
+ti["RO"] = ti[" %"] .. {"#ac_rotor", range=5, strength=10}
+ti["Ro"] = ti["hb"] .. {"#ac_rotor", range=10, strength=5}
+ti["y "] = {"#ac_top", range=1, strength=1}
+ti["@ "] = {"#ac_marble_black"}
+
+if wo["IsDifficult"] then
+    ti["RU"] = ti[" !"] .. {"#ac_rotor", range=3, strength=10}
+    ti["RW"] = ti[" !"] .. {"#ac_rotor", range=2, strength=15}
+    ti["h "] = {"it_spring_keep"}
+    ti["i "] = {"it_extralife"}
+else
+    ti["RU"] = ti[" !"] .. {"it_extralife"}
+    ti["RW"] = ti[" !"] .. {"it_extralife"}
+    ti["h "] = {"it_umbrella"}
+    ti["i "] = {"it_spring_keep"}
+end
+
+local puzzler = res.puzzle(ti, "G","H","I","J","c","Z","M","{")
+
+local autotiler = res.autotile(puzzler, {"v", "supervortextemplate"},{"b", "hypervortextemplate"},{"n", "ntemplate"},{"e", "etemplate"},{"r", "rtemplate"}, {"P", "Ptemplate"}, {"S", "Stemplate"}, {"U", "Utemplate"}, {"W", "Wtemplate"}, {"L", "superopentemplate"}, {"D", "superdoortemplate"}, {"p", "documents"})
+
+wo(res.composer(autotiler), "  ", {
+       ":!:!:!:!:!:!:!:!:!:!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!'!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q Q Q Q Q Q Q Q Q Q Q l ! ! ! ! ! !!! ! ! ! ! ! ! l l l l l l l l l l l l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q ! ! ! ! ! ! ! ! ! Q l ! ! ! ! ! !!! ! ! ! ! ! ! l / / / / / / / / / / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q ! ! ! ! ! + ! ! ! Q l ! ! ! ! ! !XX ! ! ! ! ! ! l / / / / / / / / / / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q ! ! ! ! ! + + ! ! Q l ! ! ! !A! ! ( !A! ! ! ! ! l / + + / / / / / / / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!Q Q ! + ! ! + + + + ! Q l ! ! ! ! ! (XX ( ! ! ! ! ! l + + + + / / 0 / / / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!Q Q ! + + + + + ! ! ! Q l ! ! !XX (XX !XX (XX ! ! ! l / / + + + + + + + + l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!Q Q ! ! + + + + + ! ! Q l ! ! ! ! ! (XX ( ! ! ! ! ! l / / / + + + + + + / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q ! + + ! ! ! + ! ! Q l ! ! ! !A! ! ( !A! ! ! ! ! l / / + + + / + + / / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q ! + ! ! ! ! ! + ! Q l ! ! ! ! ! !XX ! ! ! ! ! ! l / / + + / / / + + / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q ! ! + ! ! ! + ! ! Q l ! ! ! ! ! !!! ! ! ! ! ! ! l / / + / / / / / + / l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! Q Q Q Q Q Q Q Q Q QFQFlF!F!F!F! ! !!! ! !F!F!F!F!FlFl l l l l l l l l l l!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!!/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!'!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!/!!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! !~! !~!o! !z  !o!~! !~! ! !o1 ! !~! !~!o! !z  !o!~! !~! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! !~! !~!o! !z  !o!~! !~! ! !YL ! !~! !~!o! !z  !o!~! !~! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!GeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGe3!GeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGe:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!!B!!!!!!!!!!!U1U2U3U4U5U6U7!!!!!!!!!!G0!!!!!!!!!!!!!!!!4!!!!!!!!!!!!!!!!!!!!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!$!4! ! ! ! ! !4!4!4!4!4!4!4! ! ! ! ! !4! ! !P1P2P3P4P5P6P7 ! ! ! ! ! ! !;! !&!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!4!T0 ! ! ! !B!B!B!B!B!B!B! !C!C! !T24! ! !C!4!4!4!4!4!C! ! ! !4!LZTZ !;! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!4! ! ! ! ! !4!4!4!4!4!4!4! ! ! ! ! !4! ! !S1S2S3S4S5S6S7 ! ! ! ! ! ! !;! !$!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!&!4!(!(!(!(!(!W1W2W3W4W5W6W7(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!(!4!(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!'!B!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!'!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!'!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!1! Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q % % % %.% % % % % % % % % % % % % % % % % % % % % % % % % %.% % % % % Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q % % % % %.% % % % % % % % % % % %.% % % % % % % % % % % %.% % % % % % Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q % % % % % %.% % % % % % % % % %.% %.% % % % % % % % % %.% % % % % % % Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!)!(! Q % %(% % % % %.% %RO %(% %RO %.% %(% %.% %RO %(% %RO %.% % % % %(%ca % Q/!cd'!'!'!b2:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q % % % % % % % %.% %.% %.% %.% %.% %.% %.% %.% %.% %.% % % % % % % % % Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q % % % % % % % % %.% % % %.% % % %.% % % %.% % % %.% % % % % % % % % % Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!(! Q % % % % % % % %.% %.% %.% %.% %.% %.% %.% %.% %.% %.% % % % % % % % % Q(!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!'!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!)!)!.!)!)!.!)!)!.!)!)!.!)!)!.!)!)!.!)!3!2!.!2!2!.!2!2!.!2!2!.!2!2!.!2!2!.!2!2!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!'!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!)!'!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!2!'!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! % % % ! % % % ! % % % ! % % %;!;!;!D1;!;!;! % % % ! % % % ! % % % ! % % %%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:! !:!:!:!:!:!%! % ! % ! % ! % ! % ! % ! % ! %;!<!;!D2;!<!;! % ! % ! % ! % ! % ! % ! % ! %%!:!:!:!:! !:!:!:!:!",
+       ":!:!:! !b1 !'!'!'!/!%! % & %9! %<! %9! %<! %9! % & %;!<!;!D3;!<!;! % & %9! %<! %9! %<! %9! % & %%!/!'!'! !b4 !:!:!:!",
+       ":!:!:!:! !:!:!:!:!:!%! % % %;! % ! % ! % ! % ! % % %;!<!;!D4;!<!;! % % % ! % ! % ! % ! %;! % % %%!:!:!:!:! !:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! !<! ! ! % % % ! % % %;! !<! !;!<!;!D5;!<!;! !<! !;! % % % ! % % % ! !<! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! !;! ! ! ! ! ! ! !;!;!;!D6;!;!;! ! ! ! ! ! ! !;! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!L3x!x!x! *x!x!x! *x!x!x! *x!x!x!R!V! - - -V!R!x!x!x! -x!x!x! -x!x!x! -x!x!x!L6:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!2!2!2! *2!2!2! *2!2!2! *2!2!2!R! !V! -V! !R!)!)!)! -)!)!)! -)!)!)! -)!)!)!%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!L2x!x!x! *x!x!x! *x!x!x! *x!x!x!R!V! !^! !V!R!x!x!x! -x!x!x! -x!x!x! -x!x!x!L5:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!2!2!2! *2!2!2! *2!2!2! *2!2!2!R! !V! !V! !R!)!)!)! -)!)!)! -)!)!)! -)!)!)!%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!L1x!x!x!C*x!x!x!C*x!x!x!C*x!x!x!R!V! !V! !V!R!x!x!x!C-x!x!x!C-x!x!x!C-x!x!x!L4:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!'!3&3&3&3&3&3&3&3&3&3&3&3&3&3&3&R! !V!'!V! !R!3&3&3&3&3&3&3&3&3&3&3&3&3&3&3&'!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!+!4!4!4!4*4!4!4!4*4!4!4!4*4!4!3&R!V! . . .V!R!3&4!4!4-4!4!4!4-4!4!4!4-4!4!4!+!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!+!5!5!5!5!5!5!5!5!5!5!5!5!5!4!3&R! ! ! . ! !R!3&4!5!5!5!5!5!5!5!5!5!5!5!5!5!+!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!+!/!/!/!/!/!/!/!/!/!/!/!/!/!/!E!E!E!E! lE!E!E!E!/!/!/!/!/!/!/!/!/!/!/!/!/!/!+!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! ! ( ! ( ! ( ! ( ! ( ! (XLE!<!<!<!<!<!<!<!E!XL ( ! ( ! ( ! ( ! ( ! ( ! !t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! ( ! ( ! ( ! ( ! ( ! ( ! (E!<!Rl<l<l<lRl<!E! ( ! ( ! ( ! ( ! ( ! ( ! ! !t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t!6!6!6(6!6(6!6(6!6(6!6(6!6(7!E!<!<lR&<&R&<l<!E!6!6(6!6(6!6(6!6(6!6(6!6(6!7!t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! ) ) ) ) ) ) ) ) ) ) ) ) ) l<!<l<&Rl<&<l<! l ) ) ) ) ) ) ) ) ) ) ) ) ! )t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! *x!;!x! * ! ! ! *x!;!x! *E!<!<lR&<&R&<l<!E! -d!x!d! - ! ! ! -d!x!d! - !t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t!7!6!6(6!6(6!6(6!6(6!6(6!6(6!E!<!Rl<l<l<lRl<!E!7!6(6!6(6!6(6!6(6!6(6!6(6!6(t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! ( ! ( ! ( ! ( ! ( ! ( ! !E!<!<!<!<!<!<!<!E! ! ! ( ! ( ! ( ! ( ! ( ! ( !t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t!XM ! ( ! ( ! ( ! ( ! ( ! (-!-!E!E!E!r2E!E!E!-!-! ( ! ( ! ( ! ( ! ( ! ( !XMt!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!YM:!:!:!:!:!-!XLXLXLXLXLXLXLXLXLXLXLXLXLXL-!3&3&3&'!3&3&3&-!XLXLXLXLXLXLXLXLXLXLXLXLXLXL-!:!:!:!:!YN:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! ! ! ! ! ! !-!E!E!E!r1E!E!E!-! ! ! ! ! ! ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! !=! !=! !=! !=! !=! !=! !-! ! ! ! ! ! ! ! ! !-! !=! !=! !=! !=! !=! !=! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! ! ! ! !-! ! !E!y&;!V!;!y&E! ! !-! ! ! ! ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! !e1 !-! ! ! !E!!! !V! !!!E! ! ! !-! !e2 ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t!(! !(!(!(!(!(!(! ! !-! ! ! ! !E!y&;! );!y&E! ! ! ! !-! ! !(!(!(!(!(!(! !(!t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! ! ! ! ! ! !(! !-! ! ! ! ! !E!!! !V! !!!E! ! ! ! ! !-! !(! ! ! ! ! ! ! !t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t!(!(!(!(!(!(! ! !-! ! ! ( ! ! !E!y&;! );!y&E! ! ! ! ( ! !-! ! !(!(!(!(!(!(!t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! ! ! ! ! ! ! !-! ! ! ! ! ( ! !E!!! !V! !!!E! ! ! ( ! ! ! !-! ! ! ! ! ! ! !t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!t! !(!(!(!(!(!-! ! ! ! ! ! ! ( !E!y&;!V!;!y&E! ! ( ! ! ! ! ! !-!(!(!(! !(!(!t!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !E!!! ! ! !!!E! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!-!.!:!.!:!.!:!.!:!.!:!.!:!.!-!-!-!-!-! !-!-!-!-!-!.!:!.!:!.!:!.!:!.!:!.!:!.!-!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!.!:!.!:!.!:!.!:!.!:!.!:!;!:!-! ! ! ! !'! ! ! ! !-!:!;!:!.!:!.!:!.!:!.!:!.!:!.!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!-!.!-!.!:!.!:!.!:!.!-!E!-!E!-!Ml-!O!-!Mm-!O!-!Mi-!E!-!E!-!.!:!.!:!.!:!.!-!.!-!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! !h! !h! ! ! !E! ) )HfHeHeHeHeHc ) )Mb ) )JfJeJeJeJeJc ) )E! ! ! !h! !h! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!%!%!%!%!%!%!-!E! ! )Hj )Me4!MbGj )Me !Me )IjMb4!Me )Jj ) !E!-!%!%!%!%!%!%!%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!;!RW;!RW;!%! )E! )HdHk )Me ! !GnHa ) ! )JdIk ! !Me )JnJa )E! )%!;!RW;!RW;!%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! !;!>!;! !%!OOE! ! )Hj )RU ! !Gj ) ! ) ! )Ij ! !RU )Jj ) !E!OO%! !;!>!;! !%!:!:!:!:!A!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!;!>!v1>!;!%! )E! )HdHk )N1 !GdHoHa )_! )JdJoIa !N2 )JnJa )E! )%!;!>!v2>!;!%!:!:!:!A!b3A!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! !;!>!;! !%!OOE! ! )Hj ) ! ! !Gj ) ! ) ! )Ij ! ! ! )Jj ) !E!OO%! !;!>!;! !%!:!:!:!:!*3:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!;!i!;!i!;!%! )E! )HdHk ) ! ! !GnHa ) ! )JdIk ! ! ! )JnJa )E! )%!;!i!;!i!;!%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!%!%!%!%!%!%!-!E! ! )HlHeHeHeHeHi )ZlZmZo )JlJeJeJeJeJi ) !E!-!%!%!%!%!%!%!%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! !E! ) ) )E) ) ) )E) ){cZg{k )E) ) ) )E) ) ) )E! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! !>! !E!E!E!>!E!E!E!>!p2ZiZnZfp3>!E!E!E!>!E!E!E! !>! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!'! ! ! ! ! !>! ! ! ! ! !>! ! ! !>! ! !'! ! !>! ! ! !>! ! ! ! ! !>! ! ! ! ! !'!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! !OO !>!>!>!>!>!>!>!>! ! ! !>!>!>!>!>!>!>! ! ! !>!>!>!>!>!>!>!>! !OO ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! !?!?!?!?!?!?!?!?! ! ! !?!?!?!?!?!?!?! ! ! !?!?!?!?!?!?!?!?! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! !?!A! !A! !A!?! ! ! !?! ! !A! ! !?! ! ! !?!A! !A! !A!?! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! !?!A! !A! !?! ! ! !?! !?!?!?! !?! ! ! !?! !A! !A!?! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! !?!A! !A!?! ! ! !?!A!?!@!?!A!?! ! ! !?!A! !A!?! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!n1:!:!:!:!:!%! !?!?!?! ! ! ! !?!A! !?! ! ! !?! !?!?!?! !?! ! ! !?! !A!?! ! ! ! !?!?!?! !%!:!:!:!:!n2:!:!:!:!",
+       ":!:!:!A!v4A!'!'!'!/!%! !?!Ro?! ! ! ! ! !?!A!?! ! ! !?! ! !A! ! !?! ! ! !?!A!?! ! ! ! ! !?!Ro?! !%!/!'!'!A!v3A!:!:!:!",
+       ":!:!:!:!A!:!:!:!:!:!%! !?!?!?! ! ! ! ! ! !?!?! ! ! !?!?!?!?!?!?!?! ! ! !?!?! ! ! ! ! ! !?!?!?! !%!:!:!:!:!A!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !p1 ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !OO ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !m! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !%!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!'!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!%!:!:!:!:!:!:!:!:!:!"
+       })
+
+wo:add({"ot_wire", anchor1="df1", anchor2="df2"})
+wo:add({"ot_wire", anchor1="df1", anchor2="df3"})
+wo:shuffleOxyd()
+
+local last_oxyd = 0
+
+function oxyd_callback(value, sender)
+    if sender.state == OXYDPAIR and sender["_seedoxyd"] then
+        wo[sender] = {"it_seed"}
+        wo[last_oxyd] = {"it_seed"}
+        it(grp(sender, last_oxyd)):grow()
+    elseif sender.state == OPEN then
+        last_oxyd = sender
+    end
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="subtitle">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="text%1">
+        <el:english el:translate="true">This is Babylon. Be careful, stranger! It's dangerous to go inside.
+          There are some gates, unfortunalety closed, like the famous Gate of Ishtar,
+          and have a look to the lions, the tigers. Semiramis is waiting for you, stranger, ha ha.</el:english>
+      </el:string>
+      <el:string el:key="text%2">
+        <el:english el:translate="true">Try to find the mechanism to open the gate, stranger</el:english>
+      </el:string>
+      <el:string el:key="text%3">
+        <el:english el:translate="true">Be afraid about the ~water~ , it is so deep, *hihi*, isn't it, Yeah???</el:english>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_viii/mecke27_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native



From ral at mail.berlios.de  Tue Feb 24 00:41:55 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Tue, 24 Feb 2009 00:41:55 +0100
Subject: [Enigma-game-svn] r1554 - in trunk: data data/schemas src src/items
	src/others src/stones
Message-ID: <200902232341.n1NNft9A022589@sheep.berlios.de>

Author: ral
Date: 2009-02-24 00:41:52 +0100 (Tue, 24 Feb 2009)
New Revision: 1554

Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/items/BlockerItem.cc
   trunk/src/items/Bomb.cc
   trunk/src/items/Crack.cc
   trunk/src/items/CrossItem.cc
   trunk/src/items/DocumentItem.cc
   trunk/src/items/Dynamite.cc
   trunk/src/items/Sensor.cc
   trunk/src/items/ShogunDot.cc
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/items/SurpriseItem.cc
   trunk/src/items/Umbrella.cc
   trunk/src/items/Vortex.cc
   trunk/src/items/WormHole.cc
   trunk/src/others/CannonBall.cc
   trunk/src/stones/BrakeStone.cc
   trunk/src/stones/BreakStone.cc
   trunk/src/stones/DispenserStone.cc
   trunk/src/stones/FlatStone.cc
   trunk/src/stones/PlasterStone.cc
   trunk/src/stones/StoneImpulse.cc
   trunk/src/world.cc
   trunk/src/world.hh
Log:
Trunk 1.1: new API reengineering
- explosion handling reengineering:
  - make indestructible to bomb, dynamite explosions and cannonballs: 
      it_blocker, it_cross, it_sensor, it_shogun, it_vortex, it_wormhole
  - make it_crack destructible by bomb, cannonball, just crack on ignite
  - make it_bomb explode on cannonball hit
  - make it_dynamite explode on cannonball hit, leaving a meditation hill
  - do not let explosion protect floors of falling cannonballs
  - breakable stones do not explode on st_dispenser destruction
  - black bomb explosions: do not ignite diagonal neighbors if not Enigma mode
  - white bomb explosions: do not explode diagonal neighbors if not Enigma mode
- rename internal message "_bombstone" to "_dispenser"
- fix it_surprise missing renaming on default selection
- fix it_umbrella missing renaming on explosion effect
- use new animation for it_sensor_exit
- it_bomb:
  - do not explode on hit by st_box_hay in Enigma mode
Note:
- the changes of black bomb explosions causes problems on some Enigma LP levels
  that run in oxyd* modes!
- cannonball explosion feature still incomplete


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/data/models-2d.lua	2009-02-23 23:41:52 UTC (rev 1554)
@@ -534,9 +534,6 @@
     DefAlias("it-key_a", "it-key")
     DefAlias("it-key_b", "it-key")
     DefAlias("it-key_c", "it-key")
-    -- DefAlias("it-bridge-oxyd", "invisible")
-    -- DefAlias("it-sensor", "invisible")
-    -- DefAlias("it-inversesensor", "invisible")
 end
 
 --------------------------------------------------------------
@@ -690,6 +687,9 @@
     DefTiles("it_sensor", {"it_sensor","it_sensor1"})
     local frames = BuildFrames({"it_sensor","it_sensor1"}, 300)
     DefAnim("it_sensor_hit", RepeatAnim(frames, 3), false)
+    DefTiles("it_sensor_exit", {"it_sensor_exit","it_sensor_exit1"})
+    local exitframes = BuildFrames({"it_sensor_exit","it_sensor_exit1"}, 300)
+    DefAnim("it_sensor_exit_hit", RepeatAnim(exitframes, 3), false)
 end
 
 -- it-shogun --

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/data/schemas/objects.xml	2009-02-23 23:41:52 UTC (rev 1554)
@@ -130,7 +130,7 @@
     <msg name="turn" type="nil"/>
     <msg name="turnback" type="nil"/>
     <msg name="_appear" type="nil"/>
-    <msg name="_bombstone" type="nil"/>
+    <msg name="_dispenser" type="nil"/>
     <msg name="_booze" type="nil"/>
     <msg name="_brush" type="nil"/>
     <msg name="_capture" type="nil"/>
@@ -472,7 +472,6 @@
       <msg name="heat"/>
       <msg name="explode"/>
       <msg name="_explosion"/>
-      <msg name="_bombstone"/>
     </object>
     <object name="it_bomb_black">
       <attr name="color" value="0"/>
@@ -571,7 +570,7 @@
       <msg name="heat"/>
       <msg name="explode"/>
       <msg name="_explosion"/>
-      <msg name="_bombstone"/>
+      <msg name="_dispenser"/>
     </object>
     <object name="it_dynamite_burning">
       <attr name="state" value="1"/>
@@ -1046,7 +1045,6 @@
     <object name="st_break">
       <attr name="flavor"/>
       <msg name="ignite"/>
-      <msg name="_bombstone"/>
       <msg name="_explosion"/>
       <msg name="_trigger"/>
     </object>
@@ -1207,7 +1205,7 @@
     <object name="st_dispenser">
       <attr name="flavor" default="bombblack" rw="r"/>
       <msg name="_explosion"/>
-      <msg name="_bombstone"/>
+      <msg name="_dispenser"/>
     </object>
     <object name="st_dispenser_bombblack">
       <attr name="flavor" value="bombblack"/>

Modified: trunk/src/items/BlockerItem.cc
===================================================================
--- trunk/src/items/BlockerItem.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/BlockerItem.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -183,7 +183,7 @@
         kill();
     }
 
-    DEF_ITEMTRAITSF(BlockerItem, "it_blocker", it_blocker, itf_static);
+    DEF_ITEMTRAITSF(BlockerItem, "it_blocker", it_blocker, itf_static | itf_indestructible);
 
     BOOT_REGISTER_START
         BootRegister(new BlockerItem(false), "it_blocker");

Modified: trunk/src/items/Bomb.cc
===================================================================
--- trunk/src/items/Bomb.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/Bomb.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -47,7 +47,7 @@
     }
     
     Value Bomb::message(const Message &m) {
-        if (m.message == "ignite"  || m.message == "_explosion") {
+        if (m.message == "ignite"  || m.message == "_explosion"|| m.message == "_spitter") {
             if (isDisplayable())
                 burn();
             return Value();
@@ -101,7 +101,8 @@
                     explode();
                 break;
             default :
-                explode();
+                if (!st->isKind("st_box_hay"))
+                    explode();
                 break;
         }
     }

Modified: trunk/src/items/Crack.cc
===================================================================
--- trunk/src/items/Crack.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/Crack.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -34,12 +34,12 @@
     }
     
     Value Crack::message(const Message &m) {
-        if (m.message == "crack") {
+        if (m.message == "crack" || m.message == "ignite" ) {
             crack();
             return Value();
-        } else if (m.message == "heat") {
+        } else if (m.message == "heat" || m.message == "_explosion" || m.message == "_spitter") {
             sound_event("crack");
-            replace("it-debris");
+            replace("it_debris");
             return true;
         }
         return Item::message(m);
@@ -127,10 +127,10 @@
     }
     
     ItemTraits Crack::traits[4] = {
-        {"it_crack_i",  it_crack_i,  itf_static | itf_indestructible | itf_fireproof, 0.0},
-        {"it_crack_s",  it_crack_s,  itf_static | itf_indestructible | itf_fireproof, 0.0},
-        {"it_crack_m",  it_crack_m,  itf_static | itf_indestructible | itf_fireproof, 0.0},
-        {"it_crack_l",  it_crack_l,  itf_static | itf_indestructible | itf_fireproof, 0.0},
+        {"it_crack_i",  it_crack_i,  itf_static | itf_fireproof | itf_indestructible, 0.0},
+        {"it_crack_s",  it_crack_s,  itf_static | itf_fireproof | itf_indestructible, 0.0},
+        {"it_crack_m",  it_crack_m,  itf_static | itf_fireproof | itf_indestructible, 0.0},
+        {"it_crack_l",  it_crack_l,  itf_static | itf_fireproof | itf_indestructible, 0.0},
     };
 
     BOOT_REGISTER_START

Modified: trunk/src/items/CrossItem.cc
===================================================================
--- trunk/src/items/CrossItem.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/CrossItem.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -70,7 +70,7 @@
         performAction(true);
     }
     
-    DEF_ITEMTRAITSF(CrossItem, "it_cross", it_cross, itf_static);
+    DEF_ITEMTRAITSF(CrossItem, "it_cross", it_cross, itf_static | itf_indestructible);
 
     BOOT_REGISTER_START
         BootRegister(new CrossItem(), "it_cross");

Modified: trunk/src/items/DocumentItem.cc
===================================================================
--- trunk/src/items/DocumentItem.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/DocumentItem.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -37,14 +37,14 @@
         if (m.message == "ignite") {
             // dynamite does not blow up Documents in Oxyd1
             explode = server::GameCompatibility != GAMET_OXYD1;
-        } else if (m.message == "_explosion" || m.message == "_bombstone") {
+        } else if (m.message == "_explosion") {
             explode = true;
         } else {
             return Item::message(m);
         }
 
         if (explode)
-            replace("it-explosion1");
+            replace("it_explosion_nil");
         return Value();
     }
     

Modified: trunk/src/items/Dynamite.cc
===================================================================
--- trunk/src/items/Dynamite.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/Dynamite.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -34,11 +34,11 @@
     }
     
     Value Dynamite::message(const Message &m) {
-        if (m.message == "ignite" || m.message == "_explosion" || m.message == "_bombstone") {
+        if (m.message == "ignite" || m.message == "_explosion" || m.message == "_dispenser") {
             if (isDisplayable())
                 burn();
             return Value();
-        } else if (m.message == "explode") { // currently unused in c++ code
+        } else if (m.message == "explode" || m.message == "_spitter") { // currently unused in c++ code
             if (isDisplayable())
                 explode();
             return Value();

Modified: trunk/src/items/Sensor.cc
===================================================================
--- trunk/src/items/Sensor.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/Sensor.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -64,6 +64,8 @@
             return;
         } else if (key == "exit") {
             objFlags = (objFlags & ~OBJBIT_EXIT) | (val.to_bool() ? OBJBIT_EXIT : 0);
+            if (isDisplayable())
+                init_model();
             return;
         }
         Item::setAttr(key, val);
@@ -81,6 +83,8 @@
     void Sensor::init_model() {
         if ((objFlags & OBJBIT_INVISIBLE) && ((server::GlassesVisibility & Glasses::SENSOR) == 0))
             set_model("invisible");
+        else if (objFlags & OBJBIT_EXIT)
+            set_model("it_sensor_exit");
         else
             set_model("it_sensor");
     }
@@ -96,7 +100,7 @@
     void Sensor::actor_leave(Actor *a) {
         if (objFlags & OBJBIT_EXIT) {        
             if (!(objFlags & OBJBIT_INVISIBLE))
-                set_anim("it_sensor_hit");
+                set_anim("it_sensor_exit_hit");
             performAction(true);
         }
     }
@@ -115,11 +119,11 @@
     }
 
     ItemTraits Sensor::traits[5] = {
-        {"it_sensor",  it_sensor,  itf_static}, 
-        {"it_sensor_inverse",  it_inversesensor,  itf_static},
-        {"it_sensor_filter1", it_signalfilter1, itf_static | itf_invisible, 0.0},  // DAT only
-        {"it_sensor_filter0", it_signalfilter0, itf_static | itf_invisible, 0.0},   // DAT only
-        {"it_sensor_exit",  it_exitsensor,  itf_static}
+        {"it_sensor",  it_sensor,  itf_static | itf_indestructible}, 
+        {"it_sensor_inverse",  it_inversesensor,  itf_static | itf_indestructible},
+        {"it_sensor_filter1", it_signalfilter1, itf_static | itf_invisible | itf_indestructible, 0.0},  // DAT only
+        {"it_sensor_filter0", it_signalfilter0, itf_static | itf_invisible | itf_indestructible, 0.0},   // DAT only
+        {"it_sensor_exit",  it_exitsensor,  itf_static | itf_indestructible}
     };
     
     BOOT_REGISTER_START

Modified: trunk/src/items/ShogunDot.cc
===================================================================
--- trunk/src/items/ShogunDot.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/ShogunDot.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -110,9 +110,9 @@
     
 
     ItemTraits ShogunDot::traits[3] = {
-        { "it_shogun_s", it_shogun_s, itf_static, 0.0 },
-        { "it_shogun_m", it_shogun_m, itf_static, 0.0 },
-        { "it_shogun_l", it_shogun_l, itf_static, 0.0 }
+        { "it_shogun_s", it_shogun_s, itf_static | itf_indestructible, 0.0 },
+        { "it_shogun_m", it_shogun_m, itf_static | itf_indestructible, 0.0 },
+        { "it_shogun_l", it_shogun_l, itf_static | itf_indestructible, 0.0 }
     };
 
     BOOT_REGISTER_START

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/SimpleItems.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -129,6 +129,14 @@
         state = strength;
     }
     
+    Value Explosion::message(const Message &m) {
+        if (m.message == "_spitter") {
+            state = 3;
+            return Value();
+        }
+        return Item::message(m);
+    }
+    
     void Explosion::setState(int extState) {
         // no state writes
     }

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/SimpleItems.hh	2009-02-23 23:41:52 UTC (rev 1554)
@@ -122,6 +122,9 @@
     public:
         Explosion(int strength);
         
+        // Object interface
+        virtual Value message(const Message &m);
+        
         // StateObject interface
         virtual void setState(int extState);
         

Modified: trunk/src/items/SurpriseItem.cc
===================================================================
--- trunk/src/items/SurpriseItem.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/SurpriseItem.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -40,7 +40,7 @@
             static const char *stonename[] = {
                 "it_umbrella",
                 "it_spring_keep",
-                "it-dynamite",
+                "it_dynamite",
                 "it_coffee",
                 "it_hammer"
             };

Modified: trunk/src/items/Umbrella.cc
===================================================================
--- trunk/src/items/Umbrella.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/Umbrella.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -53,7 +53,7 @@
     void Umbrella::lightDirChanged(DirectionBits oldDirs, DirectionBits newDirs) {
         if (added_dirs(oldDirs, newDirs) != 0 && server::GameCompatibility != enigma::GAMET_PEROXYD) {
             sound_event ("itemtransform");
-            replace("it-explosion1");
+            replace("it_explosion_nil");
         }
     }
     

Modified: trunk/src/items/Vortex.cc
===================================================================
--- trunk/src/items/Vortex.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/Vortex.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -259,8 +259,8 @@
     }
 
     ItemTraits Vortex::traits[2] = {
-        {"it_vortex_closed", it_vortex_closed, itf_static | itf_fireproof, 0.0},
-        {"it_vortex_open", it_vortex_open,     itf_static | itf_fireproof, 0.0}
+        {"it_vortex_closed", it_vortex_closed, itf_static | itf_fireproof | itf_indestructible, 0.0},
+        {"it_vortex_open", it_vortex_open,     itf_static | itf_fireproof | itf_indestructible, 0.0}
     };
 
     BOOT_REGISTER_START

Modified: trunk/src/items/WormHole.cc
===================================================================
--- trunk/src/items/WormHole.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/items/WormHole.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -145,8 +145,8 @@
     }
     
     ItemTraits WormHole::traits[2] = {
-        { "it_wormhole_off", it_wormhole_off, itf_static, 0.0 },
-        { "it_wormhole_on",  it_wormhole_on,  itf_static, 0.0 }
+        { "it_wormhole_off", it_wormhole_off, itf_static | itf_indestructible, 0.0 },
+        { "it_wormhole_on",  it_wormhole_on,  itf_static | itf_indestructible, 0.0 }
     };
 
     BOOT_REGISTER_START

Modified: trunk/src/others/CannonBall.cc
===================================================================
--- trunk/src/others/CannonBall.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/others/CannonBall.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -37,12 +37,12 @@
         GridPos p(pos);
         if (Stone *st = GetStone(p)) {
             SendMessage (st, "_spitter");
-        }
-        else if (Item *it = GetItem(p)) {
+        } else if (Item *it = GetItem(p)) {
             if (!has_flags(it, itf_indestructible))
                 SetItem (p, MakeItem("it_explosion_debris"));
-        }
-        else if (Floor *fl = GetFloor(p)) {
+            else
+                SendMessage (it, "_spitter");
+        } else if (Floor *fl = GetFloor(p)) {
             if (fl->is_destructible())
                 SetItem (p, MakeItem("it_explosion_debris"));
         }

Modified: trunk/src/stones/BrakeStone.cc
===================================================================
--- trunk/src/stones/BrakeStone.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/stones/BrakeStone.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -81,7 +81,7 @@
     void BrakeStone::explode() {
         GridPos p = get_pos();
         KillStone(p);
-        SetItem(p, MakeItem("it-explosion1"));
+        SetItem(p, MakeItem("it_explosion_nil"));
     }
             
     DEF_TRAITSM(BrakeStone, "st_brake", st_brake, MOVABLE_BREAKABLE);

Modified: trunk/src/stones/BreakStone.cc
===================================================================
--- trunk/src/stones/BreakStone.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/stones/BreakStone.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -41,7 +41,7 @@
     }
     
     Value BreakStone::message(const Message &m) {
-        if (m.message =="ignite" || m.message == "_explosion" || m.message == "_bombstone") {
+        if (m.message =="ignite" || m.message == "_explosion") {
             if (typ() != BUG)
                 doBreak();
             return Value();

Modified: trunk/src/stones/DispenserStone.cc
===================================================================
--- trunk/src/stones/DispenserStone.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/stones/DispenserStone.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -49,7 +49,7 @@
     }
 
     Value DispenserStone::message(const Message &m) {
-        if (m.message =="_explosion" || m.message =="_bombstone") {
+        if (m.message =="_explosion" || m.message =="_dispenser") {
             if (isDisplayable())
                 doBreak();
             return Value();
@@ -71,7 +71,7 @@
     
     void DispenserStone::animcb() {
         GridPos p = get_pos();
-        SendExplosionEffect(p, EXPLOSION_BOMBSTONE);
+        SendExplosionEffect(p, EXPLOSION_DISPENSER);
         if (Item *it = GetItem(get_pos())) {
             SendMessage(it, "ignite");
         } else

Modified: trunk/src/stones/FlatStone.cc
===================================================================
--- trunk/src/stones/FlatStone.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/stones/FlatStone.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -72,7 +72,7 @@
             }
             return Value();
         } else if (((objFlags & (OBJBIT_BREAKABLE | OBJBIT_MOVABLE)) || state == CRACKED) && 
-                (m.message =="ignite" || m.message == "_explosion" || m.message == "_bombstone")) {
+                (m.message =="ignite" || m.message == "_explosion")) {
             doBreak();
             return Value();
         } else if ((m.message == "_trigger" || m.message == "signal") && state == IDLE) {
@@ -106,7 +106,7 @@
         else if (state == FALLING)
             set_anim("st_flat_falling");
         else if (state == CRACKED)
-            set_anim("st_flat_cracked");
+            set_model("st_flat_cracked");
         else if (objFlags & OBJBIT_BURNABLE)
             set_model("st_flat_fire");
         else

Modified: trunk/src/stones/PlasterStone.cc
===================================================================
--- trunk/src/stones/PlasterStone.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/stones/PlasterStone.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -62,7 +62,7 @@
             }
             return Value();
         } else if ((objFlags & OBJBIT_BREAKABLE) && 
-                (m.message =="ignite" || m.message == "_explosion" || m.message == "_bombstone")) {
+                (m.message =="ignite" || m.message == "_explosion")) {
             doBreak();
             return Value();
         }

Modified: trunk/src/stones/StoneImpulse.cc
===================================================================
--- trunk/src/stones/StoneImpulse.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/stones/StoneImpulse.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -108,7 +108,7 @@
                setIState(EXPANDING);     // replace potential bogus model
             return Value();
         } else if (m.message == "ignite") {
-            if (server::GameCompatibility != GAMET_ENIGMA || (objFlags & OBJBIT_LIGHTNEWDIRS)) {
+            if ((server::GameCompatibility != GAMET_ENIGMA && state == IDLE) || (objFlags & OBJBIT_LIGHTNEWDIRS)) {
                 state = BREAKING;
                 init_model();
             }

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/world.cc	2009-02-23 23:41:52 UTC (rev 1554)
@@ -2017,7 +2017,7 @@
             case EXPLOSION_BLACKBOMB:
                 if (direct_neighbor) {
                     explosion(center, dest, "it_explosion_nil");
-                } else {
+                } else if (server::GameCompatibility == GAMET_ENIGMA) {
                     // Note: should not ignite in non-enigma-mode!
                     if (stone) SendMessage(stone, "ignite");
                     if (item)  SendMessage(item, "ignite");
@@ -2026,16 +2026,18 @@
                 break;
     
             case EXPLOSION_WHITEBOMB:
-                // Note: at least in oxyd1 only direct neighbors
-                // explode, and the others not even ignite
-                explosion(center, dest, "it_explosion_debris");            
+                if (direct_neighbor || server::GameCompatibility == GAMET_ENIGMA) {
+                    // Note: at least in oxyd1 only direct neighbors
+                    // explode, and the others not even ignite
+                    explosion(center, dest, "it_explosion_debris");
+                }
                 break;
     
-            case EXPLOSION_BOMBSTONE:
+            case EXPLOSION_DISPENSER:
                 if (direct_neighbor) {
-                    if (stone) SendMessage(stone, "_bombstone");
-                    if (item) SendMessage(item, "_bombstone");
-                    if (floor) SendMessage(floor, "_bombstone");
+                    if (stone) SendMessage(stone, "_dispenser");
+                    if (item) SendMessage(item, "_dispenser");
+                    if (floor) SendMessage(floor, "_dispenser");
                 }
                 break;
     

Modified: trunk/src/world.hh
===================================================================
--- trunk/src/world.hh	2009-02-23 16:02:50 UTC (rev 1553)
+++ trunk/src/world.hh	2009-02-23 23:41:52 UTC (rev 1554)
@@ -318,7 +318,7 @@
         EXPLOSION_DYNAMITE, 
         EXPLOSION_BLACKBOMB, 
         EXPLOSION_WHITEBOMB, 
-        EXPLOSION_BOMBSTONE,
+        EXPLOSION_DISPENSER,
         EXPLOSION_SPITTER,
     };
     void SendExplosionEffect (GridPos p, ExplosionType type);



From ral at mail.berlios.de  Thu Feb 26 00:44:54 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 26 Feb 2009 00:44:54 +0100
Subject: [Enigma-game-svn] r1555 - in trunk: data doc/reference src/items
Message-ID: <200902252344.n1PNisxR026533@sheep.berlios.de>

Author: ral
Date: 2009-02-26 00:44:43 +0100 (Thu, 26 Feb 2009)
New Revision: 1555

Modified:
   trunk/data/api2init.lua
   trunk/doc/reference/enigma-ref.texi
   trunk/src/items/SurpriseItem.cc
Log:
Trunk 1.1: new API reengineering
- refman: further updates on objects and resolvers
- small fixes and internal renamings


Modified: trunk/data/api2init.lua
===================================================================
--- trunk/data/api2init.lua	2009-02-23 23:41:52 UTC (rev 1554)
+++ trunk/data/api2init.lua	2009-02-25 23:44:43 UTC (rev 1555)
@@ -527,16 +527,16 @@
     if tile ~= nil then
         return tile
     end
-    local template = context[4]
-    if template == nil then
-        template = "123456789"
+    local sequence = context[4]
+    if sequence == nil then
+        sequence = "123456789"
     end
     -- try to compose tile
     for i = 1, #key do
         local subkey = ""
         local ic = "" .. i
         for j = 1, #key do
-            if template:sub(j, j) == ic then
+            if sequence:sub(j, j) == ic then
                 subkey = subkey .. key:sub(j, j)
             else
                 subkey = subkey .. " "
@@ -559,16 +559,16 @@
 
 function res.composer(subresolver, ...)
     local args = {...}
-    local template = nil
+    local sequence = nil
     if #args >  1 then
         error("Resolver composer did not expect more than one argument" ,2)
     elseif #args == 1 then
         if type(args[1]) ~= "string" then
             error("Resolver composer did expect string as first argument" ,2)
         end
-        template = args[1]
+        sequence = args[1]
     end
-    local context = {res.composer_implementation, nil, subresolver, template}
+    local context = {res.composer_implementation, nil, subresolver, sequence}
     return context
 end
 

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-02-23 23:41:52 UTC (rev 1554)
+++ trunk/doc/reference/enigma-ref.texi	2009-02-25 23:44:43 UTC (rev 1555)
@@ -3121,7 +3121,7 @@
 @example
 mySwitch["color"] = nil
 mySwitch["color"] = DEFAULT
-wo[{3,6}] = @{"ac_marble_black", player=DEFAULT@}
+wo[@{3,6@}] = @{"ac_marble_black", player=DEFAULT@}
 @end example
 
 Note that @samp{DEFAULT} is not equal to @samp{nil}. They are different values
@@ -6479,10 +6479,12 @@
 @section Standard Items
 
 @menu
-* it_bag::
+* it_bag::             Portable Item Container
+* it_banana::          Transformable Banana
 * it_blocker::         Shrinked Blocker Stone
 * it_brake::           Movable Stone Brake
 * it_brush::
+* it_cherry::          Source of Invisibility
 * it_coin::            Enigma's currency
 * it_cross::           Floor switch for patient Actors
 * it_death::           Unpassable grid blocker
@@ -6495,20 +6497,24 @@
 * it_magicwand::       Wizards Tools
 * it_magnet::
 * it_meditation::
+* it_pin::             Friction increasing crampon
 * it_pipe::
 * it_rubberband::
 * it_seed::            Seeds for Wood, Volcano Stones
 * it_sensor::          Floor Switch for passing Actors
 * it_shogun::          Dot for Shogun Stones
+* it_squashed::        Remnant of squashed Fruits
 * it_strip::           Narrow Bridge
+* it_surprise::        Random Transforming item
 * it_sword::
 * it_trap::
 * it_trigger::         Floor Switch for Actors and Stones
 * it_umbrella::        Death Protection Item
 * it_vortex::          Teleport of Marbels
+* it_weight::          Portable Mass
 * it_wormhole::        Teleport of Actors
-* it_wrench::
-* it_yinyang::
+* it_wrench::          Tool for mechanical Stones
+* it_yinyang::         Player toggling Switch
 @end menu
 
 
@@ -6517,9 +6523,64 @@
 @subsection it_bag
 @obindex it_bag
 
+A bag is a portable container for other objects. The player can fill it with
+up to 13 other items, including other empty or filled bags.
 
+The bag allows a player to carry in total more than 13 items in his inventory.
+Nevertheless most items carried in a bag can not directly be applied. Just the
+ at ref{it_weight} does apply its mass even when carried in a bag. On the other
+hand bags offer the user the possibility to pick up and drop items that can not
+be dropped otherwise as they would be activated. E.g. an @ref{it_cherry} can
+not be dropped without application, but if it is contained in a bag the bag
+can be dropped and the cherry can be extracted later on. A bag is useful to
+transfer multiple items via @ref{st_mail}, too.
 
+As long as an @code{it_bag} is at the first place in the inventory, new items
+are put into the bag instead of the inventory, until the bag is full (13 items).
+The player can drop an @code{it_bag} anytime.  When picked up again, items from
+the bag are put back into the inventory (until it is full).
 
+The quite complex rules of pick up in detail:
+
+ at enumerate
+ at item
+Inventory and bag are limited concerning pickups to 13 items.
+
+ at item
+Both are generally LIFO (last item picked up is first item out), but the 
+inventory content can be rotated.
+
+ at item
+If you pick up any item besides a bag and your first inventory item is not a bag
+the item is added to the inventory.
+
+ at item
+If you pick up any item besides a non-empty bag and your first inventory item is
+a bag the item is added to the first inventroy bag (this includes non-empty bags
+being added into first inventory bags!)
+
+ at item
+You empty a bag by dropping it and picking it up again with any item at the
+first inventory position but a bag. As many items as possible are taken from the
+bag and added to the inventory.
+
+ at item
+Empty bags are never put into other bags (this would cause unresolvable
+recursion problems). They will only be added as items directly to the inventory.
+
+ at item
+If the "picked up" bag can not empty its contents to the inventory or a bag at
+the first inventory position is full the bag is not picked up and keeps the
+remaining items.
+
+ at end enumerate
+
+You can add items directly to a bag by usage of the world @ref{add} method.
+
+Bags are are used by @ref{st_thief} and @ref{fl_thief} to carry their stolen
+items. When the thiefs are captured by @ref{st_chess} the bag remains on the
+grid position filled up with the stolen items.
+
 @table @asis
 
 @item @b{Attributes:} none
@@ -6528,6 +6589,21 @@
 
 @end table
 
+ at c ----------------- Banana Item --------------------
+ at node it_banana
+ at subsection it_banana
+ at obindex it_banana
+
+A portable item without direct usage. But it transforms into an @ref{it_cherry}
+when it by a laser beam.
+
+When a stone is pushed over it an @ref{it_squashed} remains as remnants.
+
+ at table @asis
+ at item @b{Attributes:} none
+ at item @b{Messages:} none
+ at end table
+
 @c ----------------- Blocker Item --------------------
 @node it_blocker
 @subsection it_blocker
@@ -6650,6 +6726,8 @@
 
 TBD
 
+ at ref{it_squashed}
+
 @table @asis
 
 @item @b{Attributes:} none
@@ -6658,6 +6736,29 @@
 
 @end table
 
+ at c ----------------- Cherry Item --------------------
+ at node it_cherry
+ at subsection it_cherry
+ at obindex it_cherry
+
+A magic item that makes the activating actor for 8 seconds invisible. But not
+all actors become insivible. Just the ball like actors @ref{ac_marble} and
+ at ref{ac_pearl} do vanish. Other actors just drop the cherry on activation.
+
+An invisible actor can walk through most kinds of glass 
+(@pxref{Transparent Stones})and as being invisible
+they do no longer attrackt hostile @ref{ac_rotor} and @ref{ac_top}.
+
+When several cherries are activated in sequence each does prolong the actor's
+time of invisiblity by additional 8 seconds.
+
+When a stone is pushed over a cherry an @ref{it_squashed} remains as remnants.
+
+ at table @asis
+ at item @b{Attributes:} none
+ at item @b{Messages:} none
+ at end table
+
 @c ----------------- Coin Item --------------------
 @node it_coin
 @subsection it_coin
@@ -7119,6 +7220,27 @@
 
 @end table
 
+ at c ----------------- Pin Item --------------------
+ at node it_pin
+ at subsection it_pin
+ at obindex it_pin
+
+A pin is a friction increasing item that can be used as a crampon on @ref{fl_ice}.
+When it is picked up and is added to the inventory it significantly increases
+the floor friction applied to all actors owned by the inventory's owner.
+
+Pins do just increase friction as long as they are directly part of the 
+inventory. A pin contained within an @ref{it_bag}, being part of the inventory,
+has no influence on the friction. Two or more pins do not apply more friction
+than a single pin. As soon as the last pin is dropped the friction returns
+to its standard values.
+
+ at table @asis
+
+ at item @b{Attributes:} none
+ at item @b{Messages:} none
+
+ at end table
 @c ----------------- Pipe Item --------------------
 @node it_pipe
 @subsection it_pipe
@@ -7367,6 +7489,23 @@
 
 @end table
 
+ at c ----------------- Squashed Item --------------------
+ at node it_squashed
+ at subsection it_squashed
+ at obindex it_squashed
+
+The remnants of fruits like @ref{it_cherry} and @ref{it_banana} after pushing
+a stone over it.
+
+The squashed remnants are scarcely visible on some floor types. The player can
+not pick them up. But it can be wiped away by application of an @ref{it_brush}
+or by a nearby exploding @ref{it_bomb}.
+
+ at table @asis
+ at item @b{Attributes:} none
+ at item @b{Messages:} none
+ at end table
+
 @c ----------------- Strip Item --------------------
 @node it_strip
 @subsection it_strip
@@ -7425,6 +7564,50 @@
 
 @end table
 
+ at c ----------------- Surprise Item --------------------
+ at node it_surprise
+ at subsection it_surprise
+ at obindex it_surprise
+
+An item that transforms into a random item as soon as the player drops it.
+
+The replacement item is a random one out of a given selection. You can set
+the @samp{selection} attribute with token of strings. Every string needs either
+to be an @ref{Object Kind} or a tile key prefixed by an equal sign @samp{=}.
+
+ at example
+ti["m"] = @{"it_magicwand"@}
+ti["e"] = @{"it_extralife"@}
+ti["s"] = @{"it_surprise", selection=@{"it_seed", "=m", "=e", "=e"@}@}
+ at end example
+
+The replacement item is randomly chosen out of the given selection. By listing
+an item several times you can take influence on the likelyhood.
+
+The tile declarations referenced by a key may even contain objects besides
+items. But you should make rare and proper usage of this feature.
+
+Prior replacing the surprise item but after droping it the surprise item will
+perform its action. You can use this action to modify the selection or to set
+objects on your own.
+
+The surprise item is killed by any replacement item set to the grid position.
+If your selection does not resolve to an item you may need to add @ref{"it_nil"}
+to the replacement tile declaration.
+
+ at table @asis
+ at item @b{Attributes:}
+ at table @asis
+ at item @b{selection}, @ @ @i{values}: tokens of item kinds and tile keys; @ @ @i{default}: @code{@{"it_umbrella", "it_spring_keep", "it_dynamite", "it_coffee", "it_hammer"@}}
+
+ at end table
+
+ at item @b{Messages:}
+
+ at item @b{Action:} @ @ @xref{target}, @ @ @xref{action}
+
+ at end table
+
 @c ----------------- Sword Item --------------------
 @node it_sword
 @subsection it_sword
@@ -7665,6 +7848,34 @@
 @end table
 @end table
 
+ at c ----------------- Weight Item --------------------
+ at node it_weight
+ at subsection it_weight
+ at obindex it_weight
+
+A weight is an item with a mass, that defaults to the mass of 10 @ref{ac_marble}s.
+When it is picked up it is added to the inventory and increases the mass of
+all actors owned by the inventory's owner.
+
+Weights can easily be picked up, but the player can not drop them. Just indirect
+methods like hitting @ref{st_mail}, @ref{st_thief} or crossing a @ref{fl_thief}
+may remove this item from the inventory.
+
+The inventories mass is always updated to the mass of all weights kept in the
+inventory or contained in any @ref{it_bag} contained in the inventory.
+
+ at table @asis
+
+ at item @b{Attributes:} none
+ at table @asis
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{+10.0}
+Mass unit is the mass of an @ref{ac_marble}
+ at end table
+
+ at item @b{Messages:} none
+
+ at end table
+
 @c ----------------- Wormhole Item --------------------
 @node it_wormhole
 @subsection it_wormhole
@@ -7764,7 +7975,7 @@
 @obindex it_yinyang
 
 A special switch that allows the user to toggle the @ref{Player and Inventory}
-between @code{YIN} and code{YANG}.
+between @code{YIN} and @code{YANG}.
 
 On activation this item does not get dropped but remains unchanged in the
 inventory.
@@ -8307,12 +8518,14 @@
 
 @menu
 * st_actorimpulse::    Bumper Stone
+* st_beads::           Frame of Glass Beads
 * st_blocker::         Shrinkable Blocker
 * st_blur::            Passage of yet undetermined color
 * st_boulder::         Moving Arrow Boulder
 * st_brake::           Brake for moving Boulders
 * st_chess::           Movable Chess Knight Stone
 * st_coinslot::        Coin Driven Switch
+* st_darkglass::       Semitransparent metall framed Glass
 * st_death::           Skull Stone
 * st_disco::           Light shading Stone
 * st_door::            Door of various Flavors
@@ -8323,7 +8536,9 @@
 * st_laser::           Lightemitting Laser
 * st_laserflop::       Lightsensitive Monoflop
 * st_laserswitch::     Lightsensitive Switch
+* st_lightglass::      Transparent metall framed Glass
 * st_lightpassenger::  Stone pushed by Light
+* st_magic::           Magic Tranforming Stone
 * st_mail::            Mail office for Item transportation
 * st_mirror::          Mirrors of all flavors
 * st_monoflop::        Monoflop Switch
@@ -8334,11 +8549,14 @@
 * st_pull::            Pullable Stone
 * st_puzzle::          Clusterable Puzzle Stones
 * st_quake::           Oxyd closing Stone
+* st_rawglass::        Transparent Glass Block
+* st_redfiber::        Woven Fiber in a metall Frame
 * st_rotator::         Rotating Stone Impulser
 * st_rubberband::      Rubberband generator
 * st_scissors::        Scissors cutting rubberbands
 * st_shogun::          Stackable Hole Stones
 * st_stoneimpulse::    Neighbor Pushing pulsing Stone
+* st_surprise::        Random Transforming Stone
 * st_swap::            Neighbor Swapping Stone
 * st_switch::          Classical on/off Switch
 * st_timer::           Animated Timer
@@ -8412,6 +8630,30 @@
 
 @end table
 
+ at c ----------------- Beads Stone --------------------
+ at node st_beads
+ at subsection st_beads
+ at obindex st_beads
+
+A stone framed by glass beads. Like other @ref{Transparent Stones} it is 
+passable for invisible actors, but it is not transparent to laser beams.
+
+Like @ref{st_oneway} the beads stone does not detain visible actors once they
+entered the grid and lets them leave on any side.
+
+ at table @asis
+ at item @b{Attributes:} none
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_beads}
+ at end table
+
+ at end table
+
 @c ----------------- Blocker Stone --------------------
 @node st_blocker
 @subsection st_blocker
@@ -8767,6 +9009,39 @@
 
 @end table
 
+ at c ----------------- Darkglass Stone --------------------
+ at node st_darkglass
+ at subsection st_darkglass
+ at obindex st_darkglass
+
+A metal framed semi transparent glass stone. It exists in static, movable and 
+hollow variants and is just transparent to laser light in its hollow variant.
+Like other @ref{Transparent Stones} it is passable for invisible actors as long
+as it is not @samp{movable}.
+
+A @ref{st_lightpassenger} in state @samp{OFF} looks identical to a darkglass
+stone
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{hollow} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}; @ @ @i{access}: read only @ @ @xref{hollow}
+ at item @b{movable} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}; @ @ @i{access}: read only @ @ @xref{movable}
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_darkglass}: hollow = @code{false}, movable = @code{false}
+ at item @b{st_darkglass_hollow}: hollow = @code{true}, movable = @code{false}
+ at item @b{st_darkglass_movable}: hollow = @code{false}, movable = @code{true}
+ at end table
+
+ at end table
+
 @c ----------------- Death Stone --------------------
 @node st_death
 @subsection st_death
@@ -9254,6 +9529,39 @@
 
 @end table
 
+ at c ----------------- Lightglass Stone --------------------
+ at node st_lightglass
+ at subsection st_lightglass
+ at obindex st_lightglass
+
+A metal framed transparent glass stone. It exists in static, movable and 
+hollow variants and is by its very nature transparent to laser light. Like other
+ at ref{Transparent Stones} it is passable for invisible actors as long as it is
+not @samp{movable}.
+
+A @ref{st_magic} of variant @code{st_magic_oxyda} transforms on actor hits to
+a movable lightglass stone
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{hollow} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}; @ @ @i{access}: read only @ @ @xref{hollow}
+ at item @b{movable} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}; @ @ @i{access}: read only @ @ @xref{movable}
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_lightglass}: hollow = @code{false}, movable = @code{false}
+ at item @b{st_lightglass_hollow}: hollow = @code{true}, movable = @code{false}
+ at item @b{st_lightglass_movable}: hollow = @code{false}, movable = @code{true}
+ at end table
+
+ at end table
+
 @c ----------------- Lightpassenger Stone --------------------
 
 @node st_lightpassenger
@@ -9291,9 +9599,9 @@
 i.e., the sum of gradient-force and @code{force_x/y}-attributes.
 
 The light passenger can be switched on and off by messages (see below), and
-appears as @samp{st_glass2} when inactive. A player with an @ref{it_glasses}
+appears as @samp{st_darkglass} when inactive. A player with an @ref{it_glasses}
 in his inventory that includes the @samp{SPOT_LIGHTPASSENGER} feature is able
-to distinguish the switched off lightpassenger from an @samp{st_glass2}.
+to distinguish the switched off lightpassenger from an @samp{st_darkglass}.
 The variant @samp{st_lightpassenger_off} is deactivated from the beginning.
 A lightpassenger that moves onto an @ref{it_cross} switches off immediatly. A
 switchted off lightpassenger can be switched on by an actor hit with a revealed
@@ -9344,6 +9652,48 @@
 
 @end table
 
+ at c ----------------- Magic Stone --------------------
+ at node st_magic
+ at subsection st_magic
+ at obindex st_magic
+
+A stone that mimics one stone, but transforms on actor hits into another stone.
+
+Like @ref{st_fake} this stone does initially look like another stone of a kind
+given by the attribute @samp{flavor}. But on an actor hit with or without tool
+it transforms to another stone, which provides its own set of features.
+
+The flavor @code{"brick"} just transforms on a hit with a revealed
+ at ref{it_magicwand} into a static @ref{st_rawglass}.
+
+The flavor @code{"oxyda"} transforms on any hit into a movable 
+ at ref{st_lightglass}.
+
+The flavor @code{"oxydc"} transforms on any hit into a movable 
+ at ref{st_rawglass}.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{flavor} @ @ @i{values}: @code{"brick"}, @code{"oxyda"}, @code{"oxydc"}; @ @ @i{default}: @code{"brick"}; @ @ @i{access}: read only
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Action:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_magic}: flavor=@code{"brick"}
+ at item @b{st_magic_brick}: flavor=@code{"brick"}
+ at item @b{st_magic_oxyda}: flavor=@code{"oxyda"}
+ at item @b{st_magic_oxydc}: flavor=@code{"oxydc"}
+ at end table
+
+ at end table
+
 @c ----------------- Mail Stone --------------------
 @node st_mail
 @subsection st_mail
@@ -10032,6 +10382,58 @@
 
 @end table
 
+ at c ----------------- Rawglass Stone --------------------
+ at node st_rawglass
+ at subsection st_rawglass
+ at obindex st_rawglass
+
+A block of raw glass. It exists in static and movable variants and is by its
+very nature transparent to laser light. Like other @ref{Transparent Stones} it
+is passable for invisible actors.
+
+This stone looks identical to @ref{st_ice}, but differs of course in its
+features.
+
+ at table @asis
+ at item @b{Attributes:}
+
+ at table @asis
+ at item @b{movable} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{false}; @ @ @i{access}: read only @ @ @xref{movable}
+ at end table
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_rawglass}: movable = @code{false}
+ at item @b{st_rawglass_movable}: movable = @code{true}
+ at end table
+
+ at end table
+
+ at c ----------------- Redfiber Stone --------------------
+ at node st_redfiber
+ at subsection st_redfiber
+ at obindex st_redfiber
+
+A metal frame with woven red fiber. Like other @ref{Transparent Stones} it is
+passable ransparent to laser light. But the redfiber is not passable to any
+actors.
+
+ at table @asis
+ at item @b{Attributes:} none
+
+ at item @b{Messages:} none
+
+ at item @b{Variants:}
+
+ at table @asis
+ at item @b{st_redfiber}
+ at end table
+
+ at end table
+
 @c ----------------- Rotator Stone --------------------
 @node st_rotator
 @subsection st_rotator
@@ -10317,6 +10719,49 @@
 
 @end table
 
+ at c ----------------- Surprise Stone --------------------
+ at node st_surprise
+ at subsection st_surprise
+ at obindex st_surprise
+
+A stone that transforms into a random stone as soon as an actor hits it.
+
+The replacement stone is a random one out of a given selection. You can set
+the @samp{selection} attribute with token of strings. Every string needs either
+to be an @ref{Object Kind} or a tile key prefixed by an equal sign @samp{=}.
+
+ at example
+ti["b"] = @{"st_brake"@}
+ti["d"] = @{"st_death"@}
+ti["s"] = @{"st_surprise", selection=@{"st_chess", "=b", "=d", "=d"@}@}
+ at end example
+
+The replacement stone is randomly chosen out of the given selection. By listing
+a stone several times you can take influence on the likelyhood.
+
+The tile declarations referenced by a key may even contain objects besides
+stone. But you should make rare and proper usage of this feature.
+
+Prior replacing the surprise stone the surprise stone will perform its action. 
+You can use this action to modify the selection or to set objects on your own.
+
+The surprise stone is killed by any replacement stone set to the grid position.
+If your selection does not resolve to a stone you may need to add @ref{"st_nil"}
+to the replacement tile declaration.
+
+ at table @asis
+ at item @b{Attributes:}
+ at table @asis
+ at item @b{selection}, @ @ @i{values}: tokens of stone kinds and tile keys; @ @ @i{default}: @code{@{"st_grate_cross", "st_death", "st_surprise", "st_lightglass_hollow", "st_knight", "st_thief", "st_flat_breakable", "st_flat_breaking"@}}
+
+ at end table
+
+ at item @b{Messages:}
+
+ at item @b{Action:} @ @ @xref{target}, @ @ @xref{action}
+
+ at end table
+
 @c ----------------- Swap Stone --------------------
 @node st_swap
 @subsection st_swap
@@ -10859,6 +11304,37 @@
 @node Transparent Stones
 @subsection Transparent Stones
 
+Enigma provides a collection of transparent stones, all similar, but with
+different features. Some of them may be passed after the use of an
+ at ref{it-cherry}, others will be just pushed. Some are transparent for lasers,
+but not all! This table shows their exact properties.
+
+ at multitable {st_lightpassenger} {st_lightpassenger_off_plus} {actor is visible:  } {actor is invisible:  } {lasertransparent:  }
+ at headitem class @tab kind: @tab actor is visible: @tab actor is invisible: @tab lasertransparent:
+ at item @ref{st_rawglass} @tab st_rawglass @tab rebound @tab pass @tab yes
+ at item @ref{st_rawglass} @tab st_rawglass_movable @tab push @tab pass @tab yes
+ at item @ref{st_lightglass} @tab st_lightglass @tab rebound @tab pass @tab yes
+ at item @ref{st_lightglass} @tab st_lightglass_movable @tab push @tab push @tab yes
+ at item @ref{st_lightglass} @tab st_lightglass_hollow @tab pass @tab pass @tab yes
+ at item @ref{st_darkglass} @tab st_darkglass @tab rebound @tab pass @tab no
+ at item @ref{st_darkglass} @tab st_darkglass_movable @tab push @tab push @tab no
+ at item @ref{st_darkglass} @tab st_darkglass_hollow @tab pass @tab pass @tab yes
+ at item @ref{st_redfiber} @tab st_redfiber @tab rebound @tab rebound @tab yes
+ at item @ref{st_polarswitch} @tab st_polarswitch_on @tab toggle @tab pass @tab yes
+ at item @ref{st_polarswitch} @tab st_polarswitch_off @tab toggle @tab pass @tab no
+ at item @ref{st_beads} @tab st_beads @tab leave @tab pass @tab no
+ at item @ref{st_lightpassenger} @tab st_lightpassenger_off @tab rebound @tab rebound @tab no
+ at end multitable
+
+These entries can be memorized as follows: A stone is transparent for laser 
+light or if it is hollow, but not if it is dark. Exception is @samp{st_beads},
+whose irregular sides would scatter the beam. A stone can always be passed by 
+invisible actors, with three exceptions: @samp{st_redfiber}, whose inside is 
+filled with red stripes, and the two movables @samp{st_lightglass_movable} and 
+ at samp{st_darkglass_movable} which have a non-glass frame which the actor can
+use to move the stone. @code{st_rawglass_movable} does not have such a frame
+and can not be moved by an invisible actor.
+
 @c ----------------- Breakable Stones --------------------
 @node Breakable Stones
 @subsection Breakable Stones
@@ -13027,9 +13503,16 @@
 "                    "
 @})
 @end example
+A more elaborate example can be found in @ref{Orthogonal Autotiling}.
+
+ at item @b{Caveats:}
+Do not use the hash sign @samp{#} as suffix character for key length 2 and
+above autotiled keys. A key @code{"A#"} could result in an unexpected @samp{%%}
+substitution in the name attribute. A name @code{"sample%%"} would be 
+substituted by @code{"sample%#"} which is a name that will be autonumbered 
+(@pxref{Object Naming}).
 @end table
 
-A more elaborate example can be found in @ref{Orthogonal Autotiling}.
 
 @c ----------------- Composer Resolver --------------------
 
@@ -13037,7 +13520,7 @@
 @subsection res.composer
 
 The composer resolver reduces the number of required tile declarations by
-generating them by composition of base tiles. Small motley levels and nearly
+generating them by composition of base tiles. Even small levels and nearly
 every large level will use many different objects in numerous tile compositions.
 As the usable one character tile key candidates will not suffice you will need
 to use two or three character tile keys. But you will need numerous tile
@@ -13064,10 +13547,15 @@
 
 @b{res.composer}(@i{subresolver})
 
+ at b{res.composer}(@i{subresolver}, @i{sequence})
+
 @table @asis
 @item @i{subresolver}
 Resolver to which unresolved requests should be forwarded. May be @samp{ti}
 as the final resolver of the resolver chain.
+ at item @i{sequence}
+Search sequence for basic tile declarations given as a string of priority 
+numbers. The sequence defaults to @code{"123456789"}.
 @end table
 
 @item @b{Syntax Samples:}
@@ -13077,27 +13565,65 @@
 
 @item @b{Details:}
 For every key in the map the subresolver will be first requested for a tile
-declaration. Thus any given declaration will preceede the auto composition.
+declaration. Thus any given explicit declaration will preceede the auto 
+composition.
 
 Just in case that no declaration exists the search starts for existing subkey
-tiles. Subkeys are keys with some characters replaced by a whitespace @samp{ }.
-For all key lengths the basic subkeys with just one character different from a
-whitespace will be examined. Additionally just for three character key length
-the three keys with just one whitespace replacement and two remaining
-original characters will be examined and these compositions will preced the
-composition of three one character tiles.
+tiles. Subkeys are keys with all but some characters replaced by a whitespace 
+ at samp{ }.
 
-Thus for the key @code{"h~"} the composer will look for @code{"h "} and
- at code{" ~"}. For the three character key @code{"#h~"} The composer will look for
- at code{"#h "} plus @code{"  ~"}, @code{"# ~"} plus @code{" h "}, @code{" h~"}
-plus @code{"#  "} and finally @code{"#  "} plus @code{" h "} plus @code{"  ~"}.
-For the 4 character key @code{"A#h~"} the composer will just look for
- at code{"A   "} plus @code{" #  "} plus @code{"  h "} plus @code{"   ~"}. The
-same holds for any larger key length.
+The search sequence is given by the optional second argument and defaults to
+ at code{"123456789"}. In the first step all character positions marked by a 
+ at samp{1} in the sequence string are maintained in the key string and all others
+are replaced by whitespace. In the second step all  character positions marked
+by a @samp{2} in the sequence string are maintained in the key string and all 
+others are replaced by whitespace. This procedure continues until the number
+equals the key length. All generated subkeys are resolved by the subresolver
+and concatenated in the given sequence.
 
-It is recommended to add the composer resolver behind most other library
-resolvers in the resolver chain.
+With the default sequence @code{"123456789"} a key request for @code{"~mX"} is
+resolved to subkeys @code{"~  "}, @code{" m "} and @code{"  X"}. These subkeys
+are resolved by the subresolver. If the subresolver is @samp{ti} the result is:
 
+ at example
+ti["~  "] .. ti[" m "] .. ti["  X"]
+ at end example
+
+With a key length of 3 or more characters it is sometimes useful to avoid a
+total decomposition into single character based subkeys. E.g. you may want
+to use a @ref{res.autotile} or @ref{res.puzzle} as subresolver. Both have the
+need of essential 2 character subkeys. In this case you can simply define
+the sequence as @code{"122"} for a key length of 3. A key request of 
+ at code{"~Pa"} will be resolved to subkeys @code{"~  "}, @code{" Pa"}. In case
+of a puzzle subresolver this would result in:
+
+ at example
+ti["~  "] .. ti[" P"]
+ at end example
+
+with second tile declaration being a @ref{st_puzzle} declaration with the
+ at samp{connections} attribute being set to @code{"w"} according to the last key
+charcter @samp{a}.
+
+With a @code{"231"} you stick to a total decomposition, but you redefine the
+sequence of evaluation and composition. For the key @code{"~mX"} you would get
+in contrast to the first example:
+
+ at example
+ti["  X"] .. ti["~  "] .. ti[" m "]
+ at end example
+
+In all cases subkeys, that are strings of whitespaces only, will simply be 
+ignored. With the default sequence the key @code{"~ X"} will result just in:
+
+ at example
+ti["~  "] .. ti["  X"]
+ at end example
+
+If you set your floors by usage of the composer you should use the all 
+whitespace key as your default floor as this key does not resolve via the
+composer and needs the backup of the default mechanism.
+
 @item @b{Full Example:}
 @example
 ti["  "] = @{"fl_sahara"@}
@@ -13123,12 +13649,13 @@
 local resolver = res.composer(ti)
 
 w, h = wo(resolver, "  ", @{
-"                                        ",
-"  h= ;W;2;c G~ ~# #.2.X X~k=k;          ",
-"                                        ",
-"  2;s;    2.s.    2=s=                  ",
-"  c;h;    c.h.    c=h=    xx            ",
-"                                        "
+--0001020304050607080910111213141516171819
+ "                                        ",
+ "  h= ;W;2;c G~ ~# #.2.X X~k=k;          ",
+ "                                        ",
+ "  2;s;    2.s.    2=s=                  ",
+ "  c;h;    c.h.    c=h=    xx            ",
+ "                                        "
 @})
 @end example
 

Modified: trunk/src/items/SurpriseItem.cc
===================================================================
--- trunk/src/items/SurpriseItem.cc	2009-02-23 23:41:52 UTC (rev 1554)
+++ trunk/src/items/SurpriseItem.cc	2009-02-25 23:44:43 UTC (rev 1555)
@@ -27,7 +27,7 @@
 
 namespace enigma {
 
-/* -------------------- Surprise stone -------------------- */
+/* -------------------- Surprise item -------------------- */
     SurpriseItem::SurpriseItem() : Item() {
     }
     



From andreasl at mail.berlios.de  Thu Feb 26 01:55:04 2009
From: andreasl at mail.berlios.de (andreasl at mail.berlios.de)
Date: Thu, 26 Feb 2009 01:55:04 +0100
Subject: [Enigma-game-svn] r1556 - in homepage: . input
Message-ID: <200902260055.n1Q0t4MB011345@sheep.berlios.de>

Author: andreasl
Date: 2009-02-26 01:55:00 +0100 (Thu, 26 Feb 2009)
New Revision: 1556

Modified:
   homepage/input/download.html
   homepage/input/download_de.html
   homepage/input/download_ru.html
   homepage/input/output-files.lua
   homepage/main.lua
Log:
Homepage:
 - Corrected download links to Debian (points to "lenny"),
   Gentoo, and Ubuntu (points to "intrepid")
 - Automatic replacing of quotation marks now includes
   news and other, automatically build sites.


Modified: homepage/input/download.html
===================================================================
--- homepage/input/download.html	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/download.html	2009-02-26 00:55:00 UTC (rev 1556)
@@ -88,13 +88,13 @@
   third parties:</p>
 
   <ul>
-  <li><a href="http://packages.debian.org/unstable/games/enigma.html">
+  <li><a href="http://packages.debian.org/lenny/enigma">
 	Debian</a></li>
   <li><a href="http://www.freshports.org/games/enigma/">
 	FreeBSD</a></li>
-  <li><a href="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">
-    Gentoo Linux</a></li>
-  <li><a href="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma">
+  <li><a href="http://packages.gentoo.org/package/games-puzzle/enigma">
+        Gentoo Linux</a></li>
+  <li><a href="http://packages.ubuntu.com/intrepid/enigma">
 	Ubuntu</a></li>
   <li><a href="http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729">
 	GP2X</a>&nbsp;&nbsp;(version 0.92)</li>

Modified: homepage/input/download_de.html
===================================================================
--- homepage/input/download_de.html	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/download_de.html	2009-02-26 00:55:00 UTC (rev 1556)
@@ -96,13 +96,13 @@
   Verf&uuml;gung gestellt:</p>
 
   <ul>
-  <li><a href="http://packages.debian.org/unstable/games/enigma.html">
+  <li><a href="http://packages.debian.org/lenny/enigma">
 	Debian</a></li>
   <li><a href="http://www.freshports.org/games/enigma/">
 	FreeBSD</a></li>
-  <li><a href="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">
-    Gentoo Linux</a></li>
-  <li><a href="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma">
+  <li><a href="http://packages.gentoo.org/package/games-puzzle/enigma">
+        Gentoo Linux</a></li>
+  <li><a href="http://packages.ubuntu.com/intrepid/enigma">
 	Ubuntu</a></li>
   <li><a href="http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729">
 	GP2X</a>&nbsp;&nbsp;(version 0.92)</li>

Modified: homepage/input/download_ru.html
===================================================================
--- homepage/input/download_ru.html	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/download_ru.html	2009-02-26 00:55:00 UTC (rev 1556)
@@ -86,13 +86,13 @@
   <p>?????? ??? ????????? ?????? ???????????? ?????? ??????????????? ???????? ??????:</p>
 
   <ul>
-  <li><a href="http://packages.debian.org/unstable/games/enigma.html">
+  <li><a href="http://packages.debian.org/lenny/enigma">
 	Debian</a></li>
   <li><a href="http://www.freshports.org/games/enigma/">
 	FreeBSD</a></li>
-  <li><a href="http://packages.gentoo.org/ebuilds/?enigma-1.00-r1">
-    Gentoo Linux</a></li>
-  <li><a href="http://packages.ubuntu.com/cgi-bin/search_packages.pl?searchon=names&amp;version=all&amp;exact=1&amp;keywords=enigma">
+  <li><a href="http://packages.gentoo.org/package/games-puzzle/enigma">
+        Gentoo Linux</a></li>
+  <li><a href="http://packages.ubuntu.com/intrepid/enigma">
 	Ubuntu</a></li>
   <li><a href="http://archive.gp2x.de/cgi-bin/cfiles.cgi?0,0,0,0,25,1729">
 	GP2X</a>&nbsp;&nbsp;(?????? 0.92)</li>

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/input/output-files.lua	2009-02-26 00:55:00 UTC (rev 1556)
@@ -56,24 +56,24 @@
     body = {},
     bottombar = {"bottombar"},
     parse_news_1 = function(v,s,l0)
-        return parse_text(v, parse_news(newsdir,l0,newsfield), l0, "news1")
+        return parse_text_quots(v, parse_news(newsdir,l0,newsfield), l0, "news1")
       end,
     parse_news_2 = function(v,s,l0)
-        return parse_text(v, parse_news(newsdir,l0), l0, "news2")
+        return parse_text_quots(v, parse_news(newsdir,l0), l0, "news2")
       end,
     parse_level_archive = function(v,s,l0)
-        return parse_text(v, parse_level_archive(l0), l0, "level_archive")
+        return parse_text_quots(v, parse_level_archive(l0), l0, "level_archive")
       end,
     parse_lotm_by_rating = function(v,s,l0)
-        return parse_text(v, parse_lotm("current_rating", true, l0), l0,
+        return parse_text_quots(v, parse_lotm("current_rating", true, l0), l0,
           add_lang_to_filename(v.outfile, l0))
       end,
     parse_lotm_chronological = function(v,s,l0)
-        return parse_text(v, parse_lotm("chronological", false, l0), l0,
+        return parse_text_quots(v, parse_lotm("chronological", false, l0), l0,
           add_lang_to_filename(v.outfile, l0))
       end,
     parse_lotm_by_position = function(v,s,l0)
-        return parse_text(v, parse_lotm("position_num", false, l0), l0,
+        return parse_text_quots(v, parse_lotm("position_num", false, l0), l0,
           add_lang_to_filename(v.outfile, l0))
     end,
     lotm_archive_data_from = function(v,s,l0)
@@ -116,15 +116,15 @@
     lotm_history_es = "Historia de LotM",
 
     lotm_current = function(v,s,l0)
-        return parse_text(v, "$$"..lotm_macro_name(lotm_current).."$$", l0,
+        return parse_text_quots(v, "$$"..lotm_macro_name(lotm_current).."$$", l0,
           "lotm_current")
       end,
     lotm_current_image = function(v,s,l0)
-        return parse_text(v, "$$imagedir$$/lotm/"
+        return parse_text_quots(v, "$$imagedir$$/lotm/"
           ..lotm_macro_name(lotm_current)..".png", l0, "lotm_current_image")
       end,
     lotm_current_name = function(v,s,l0)
-        return parse_text(v, lotm_current.name, l0, "lotm_current_name")
+        return parse_text_quots(v, lotm_current.name, l0, "lotm_current_name")
       end,
 
     January   = function(v,s,l0)  return  translate_month(l0, {month=1})  end,

Modified: homepage/main.lua
===================================================================
--- homepage/main.lua	2009-02-25 23:44:43 UTC (rev 1555)
+++ homepage/main.lua	2009-02-26 00:55:00 UTC (rev 1556)
@@ -177,6 +177,10 @@
     return result
 end
 
+function parse_text_quots(v, text, lang, context)
+    return parse_text(v, replace_quots(v, text, lang, context), lang, context)
+end
+
 function parse_html(v, infilename0, lang)
     if not infilename0 then
         error("Error during creation of "..v.title..": Expected filename, got nil.")
@@ -206,7 +210,7 @@
 
     local body = infile:read("*a")
     infile:close()
-    return parse_text(v, replace_quots(v, body, lang, infilename), lang, infilename)
+    return parse_text_quots(v, body, lang, infilename)
 end
 
 ----------------------------------------------------------------------



From raoul at mail.berlios.de  Thu Feb 26 22:38:05 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Thu, 26 Feb 2009 22:38:05 +0100
Subject: [Enigma-game-svn] r1557 - in trunk/data/levels: enigma_cross
	enigma_viii
Message-ID: <200902262138.n1QLc5ND005467@sheep.berlios.de>

Author: raoul
Date: 2009-02-26 22:38:04 +0100 (Thu, 26 Feb 2009)
New Revision: 1557

Modified:
   trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
   trunk/data/levels/enigma_viii/devnull24_1.xml
   trunk/data/levels/enigma_viii/devnull25_1.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/mecke27_1.xml
Log:
-> New level "Babylon" (mecke27)
-> Two updates from devnull, removed unnecessary code



Modified: trunk/data/levels/enigma_cross/newlevels_1.1.0.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-26 00:55:00 UTC (rev 1556)
+++ trunk/data/levels/enigma_cross/newlevels_1.1.0.xml	2009-02-26 21:38:04 UTC (rev 1557)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="42" title="Enigma 1.1 new"/>
+  <info enigma="1.00" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="43" title="Enigma 1.1 new"/>
 
   <attributes/>
 
@@ -146,11 +146,11 @@
     <level _seq="138" _title="Mole Hill Meditation" _xpath="enigma_viii/ral43_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20090112ral228" rel="1" rev="138" score="1" target="time" unit="duration"/>
     <level _seq="139" _title="Involution" _xpath="enigma_viii/raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="140" _title="Near Halley I" _xpath="enigma_viii/devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="6" score="1" target="time" unit="duration"/>
-    <level _seq="141" _title="Two Is A Company I" _xpath="enigma_viii/devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="142" _title="Two Is A Company II" _xpath="enigma_viii/devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="141" _title="Two Is A Company I" _xpath="enigma_viii/devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="142" _title="Two Is A Company II" _xpath="enigma_viii/devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="143" _title="CrissCross" _xpath="enigma_viii/devnull26_1" author="/dev/null" ctrl="force" easy="true" id="devnull26" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="144" _title="5 Days and 5 Nights" _xpath="enigma_viii/andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="145" _title="Babylon" _xpath="enigma_viii/mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="25" score="1" target="time" unit="duration"/>
+    <level _seq="145" _title="Babylon" _xpath="enigma_viii/mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="27" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_viii/devnull24_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/devnull24_1.xml	2009-02-26 00:55:00 UTC (rev 1556)
+++ trunk/data/levels/enigma_viii/devnull24_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Two Is A Company I" el:subtitle="" el:id="devnull24"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="released"/>
       <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -14,50 +14,48 @@
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = false
 wo["ProvideExtralifes"] = false
-
-ti["##"] = {"st_redrock"}
-ti["  "] = {"fl_concrete"}
-ti["~~"] = {"fl_water"}
-ti["dd"] = {"st_door", "door4White", faces = "ew"}
-ti["DD"] = {"st_door", "door4Black", faces = "ew"}
-ti["ss"] = {"it_shogun_s", target = "doorWhite", action = "signal"}
-ti["SS"] = {"it_trigger",  target = "doorBlack", action = "signal"}
-ti["tt"] = {"st_shogun_s"}
-ti["TT"] = {"st_granite_movable"}
+ti["#"] = {"st_redrock"}
+ti[" "] = {"fl_concrete"}
+ti["~"] = {"fl_water"}
+ti["d"] = {"st_door", "door4White", faces = "ew"}
+ti["D"] = {"st_door", "door4Black", faces = "ew"}
+ti["s"] = {"it_shogun_s", target = "doorWhite", action = "signal"}
+ti["S"] = {"it_trigger",  target = "doorBlack", action = "signal"}
+ti["t"] = {"st_shogun_s"}
+ti["T"] = {"st_granite_movable"}
 if wo["IsDifficult"] then
-    ti["XX"] = ti["##"]
-    ti["sx"] = {"it_shogun_s", target = "doorWhite", action = "signal"}
-    ti["SX"] = {"it_trigger",  target = "doorBlack", action = "signal"}
-    ti["tx"] = {"st_shogun_s"}
-    ti["TX"] = {"st_granite_movable"}
+    ti["W"] = ti["#"]
+    ti["x"] = {"it_shogun_s", target = "doorWhite", action = "signal"}
+    ti["X"] = {"it_trigger",  target = "doorBlack", action = "signal"}
+    ti["y"] = {"st_shogun_s"}
+    ti["Y"] = {"st_granite_movable"}
 else
-    ti["XX"] = ti["  "]
-    ti["sx"] = ti["  "]
-    ti["SX"] = ti["  "]
-    ti["tx"] = ti["  "]
-    ti["TX"] = ti["  "]
+    ti["W"] = ti[" "]
+    ti["x"] = ti[" "]
+    ti["X"] = ti[" "]
+    ti["y"] = ti[" "]
+    ti["Y"] = ti[" "]
 end
-ti["oo"] ={"st_oxyd_a", name = "north#"}
-ti["OO"] ={"st_oxyd_a", name = "south#"}
-ti["@@"] = {"#ac_marble_black"}
-ti["**"] = {"#ac_marble_white"}
+ti["o"] ={"st_oxyd_a", name = "north#"}
+ti["O"] ={"st_oxyd_a", name = "south#"}
+ti["@"] = {"#ac_marble_black"}
+ti["*"] = {"#ac_marble_white"}
 
-w, h = wo(res.composer(ti), "  ", {
-    "########################################",
-    "##      ##  ##oooooooooooo##ss        ##",
-    "##  ##  tx  ##            dd          ##",
-    "##  SX  tt  ##################TT####  ##",
-    "##  ##  ##  ##    XX      XX  TX      ##",
-    "##      ##  ##ss  ss          TT##sx  ##",
-    "##@@        ##~~########~~##        **##",
-    "##  SX##tt          SS  SS##  ##      ##",
-    "##      tx  XX      XX    ##  ##  ##  ##",
-    "##  ####tt##################  TT  sx  ##",
-    "##          DD            ##  TX  ##  ##",
-    "##        SS##OOOOOOOOOOOO##  ##      ##",
-    "########################################"
+w, h = wo(ti, " ", {
+    "####################",
+    "#   # #oooooo#s    #",
+    "# # y #      d     #",
+    "# X t #########T## #",
+    "# # # #  W   W Y   #",
+    "#   # #s s     T#x #",
+    "#@    #~####~#    *#",
+    "# X#t     S S# #   #",
+    "#   y W   W  # # # #",
+    "# ##t######### T x #",
+    "#     D      # Y # #",
+    "#    S#OOOOOO# #   #",
+    "####################"
 })
-
 wo:shuffleOxyd({"north#*", max = 0}, {"south#*", max = 0})
 if wo["IsDifficult"] then
     wo:add({"ot_counter", "doorBlack", state = 0, target = "door4Black", action_5 = "open", action_4 = "close"})

Modified: trunk/data/levels/enigma_viii/devnull25_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/devnull25_1.xml	2009-02-26 00:55:00 UTC (rev 1556)
+++ trunk/data/levels/enigma_viii/devnull25_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Two Is A Company II" el:subtitle="" el:id="devnull25"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="released"/>
       <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -14,52 +14,50 @@
     <el:luamain><![CDATA[
 wo["ConserveLevel"] = false
 wo["ProvideExtralifes"] = false
-
-ti["##"] = {"st_redrock"}
-ti["  "] = {"fl_concrete"}
-ti["dd"] = {"st_door", "door4White", faces = "ns"}
-ti["DD"] = {"st_door", "door4Black", faces = "ns"}
-ti["ss"] = {"it_shogun_s", target = "doorWhite", action = "signal"}
-ti["tt"] = {"it_shogun_s", target = "doorBlack", action = "signal"}
-ti["SS"] = {"st_shogun_s"}
+ti["#"] = {"st_redrock"}
+ti[" "] = {"fl_concrete"}
+ti["d"] = {"st_door", "door4White", faces = "ns"}
+ti["D"] = {"st_door", "door4Black", faces = "ns"}
+ti["s"] = {"it_shogun_s", target = "doorWhite", action = "signal"}
+ti["t"] = {"it_shogun_s", target = "doorBlack", action = "signal"}
+ti["S"] = {"st_shogun_s"}
 if wo["IsDifficult"] then
-    ti["tx"] = ti["  "]
-    ti["sl"] = {"it_shogun_l", target = "doorWhite", action = "signal"}
-    ti["Sx"] = {"st_shogun_s"}
-    ti["SM"] = {"st_shogun_m"}
-    ti["SL"] = {"st_shogun_l"}
-    ti["BB"] = {"st_passage_black_frame"}
-    ti["WW"] = {"st_passage_white_frame"}
+    ti["x"] = ti[" "]
+    ti["l"] = {"it_shogun_l", target = "doorWhite", action = "signal"}
+    ti["y"] = {"st_shogun_s"}
+    ti["M"] = {"st_shogun_m"}
+    ti["L"] = {"st_shogun_l"}
+    ti["B"] = {"st_passage_black_frame"}
+    ti["W"] = {"st_passage_white_frame"}
 else
-    ti["tx"] = {"it_shogun_s", target = "doorBlack", action = "signal"}
-    ti["sl"] = ti["ss"]
-    ti["Sx"] = ti["  "]
-    ti["SM"] = ti["SS"]
-    ti["SL"] = ti["SS"]
-    ti["BB"] = ti["  "]
-    ti["WW"] = ti["  "]
+    ti["x"] = {"it_shogun_s", target = "doorBlack", action = "signal"}
+    ti["l"] = ti["s"]
+    ti["y"] = ti[" "]
+    ti["M"] = ti["S"]
+    ti["L"] = ti["S"]
+    ti["B"] = ti[" "]
+    ti["W"] = ti[" "]
 end
-ti["oo"] ={"st_oxyd_a", name = "north#"}
-ti["OO"] ={"st_oxyd_a", name = "south#"}
-ti["@@"] = {"#ac_marble_black"}
-ti["**"] = {"#ac_marble_white"}
+ti["o"] ={"st_oxyd_a", name = "north#"}
+ti["O"] ={"st_oxyd_a", name = "south#"}
+ti["@"] = {"#ac_marble_black"}
+ti["*"] = {"#ac_marble_white"}
 
-w, h = wo(res.composer(ti), "  ", {
-    "########################################",
-    "oo  ##@@  tx##              ##tt    sl##",
-    "oo  ######  WW    Sx      ######  ######",
-    "oo  ##      ####SS####SS####  ##  BB  ##",
-    "oo  ##  ######    ##          ##      ##",
-    "oo  ##    WW      ####  ####  ##      ##",
-    "##dd##    ##            ##        ##DD##",
-    "##    SS  ##SS######  ##########  ##  OO",
-    "##  ##        ##ss##  ##  ##  ##  ##  OO",
-    "##  ##  ####  ##  ##  SS  SM  ##  ##  OO",
-    "##  ##  BBSL      ##  ##  ##  ##BB##  OO",
-    "##tt##  ##    ##ss##      ##tt  **##  OO",
-    "########################################",
+w, h = wo(ti, " ", {
+    "####################",
+    "o #@ x#       #t  l#",
+    "o ### W  y   ### ###",
+    "o #   ##S##S## # B #",
+    "o # ###  #     #   #",
+    "o #  W   ## ## #   #",
+    "#d#  #      #    #D#",
+    "#  S #S### ##### # O",
+    "# #    #s# # # # # O",
+    "# # ## # # S M # # O",
+    "# # BL   # # # #B# O",
+    "#t# #  #s#   #t *# O",
+    "####################"
 })
-
 wo:shuffleOxyd({"north#*", max = 0}, {"south#*", max = 0})
 if wo["IsDifficult"] then
     wo:add({"ot_counter", "doorBlack", state = 0, target= "door4Black", action_3 = "open", action_2 = "close"})

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-02-26 00:55:00 UTC (rev 1556)
+++ trunk/data/levels/enigma_viii/index.xml	2009-02-26 21:38:04 UTC (rev 1557)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="37" title="Enigma VIII"/>
+  <info enigma="1.00" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="38" title="Enigma VIII"/>
 
   <attributes/>
 
@@ -71,11 +71,11 @@
     <level _seq="63" _title="Mole Hill Meditation" _xpath="./ral43_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20090112ral228" rel="1" rev="138" score="1" target="time" unit="duration"/>
     <level _seq="64" _title="Involution" _xpath="./raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="Near Halley I" _xpath="./devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="6" score="1" target="time" unit="duration"/>
-    <level _seq="66" _title="Two Is A Company I" _xpath="./devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="67" _title="Two Is A Company II" _xpath="./devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="66" _title="Two Is A Company I" _xpath="./devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="67" _title="Two Is A Company II" _xpath="./devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="68" _title="CrissCross" _xpath="./devnull26_1" author="/dev/null" ctrl="force" easy="true" id="devnull26" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="69" _title="5 Days and 5 Nights" _xpath="./andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="70" _title="Babylon" _xpath="./mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="25" score="1" target="time" unit="duration"/>
+    <level _seq="70" _title="Babylon" _xpath="./mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="27" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_viii/mecke27_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke27_1.xml	2009-02-26 00:55:00 UTC (rev 1556)
+++ trunk/data/levels/enigma_viii/mecke27_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
@@ -3,12 +3,11 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Babylon" el:subtitle="Semiramis' Garden" el:id="mecke27"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision:25 $" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision:27 $" el:status="released"/>
       <el:author  el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
-        <!--<el:dependency el:path="lib/liblua" el:id="lib/liblua" el:release="1" el:preload="true" />-->
         <el:dependency el:path="lib/libpuzzle" el:id="lib/libpuzzle" el:release="3" el:preload="true"/>
       </el:compatibility>
       <el:modes el:easy="true" el:single="true" el:network="false"/>
@@ -78,7 +77,7 @@
 ti["Y "] = {"st_rotator_cw", movable=true}
 ti["q "] = {"st_door", state= OPEN, faces="ns"}
 ti["C "] = {"st_mirror", movable=true, transparent=false}
-ti["F "] = {"st_invisible"}
+ti["F "] = {"st_invisible_hollow"}
 ti["A "] = {"st_disco_light"}
 ti["% "] = {"st_disco_medium"}
 ti["? "] = {"st_disco_dark"}
@@ -160,6 +159,7 @@
 local autotiler = res.autotile(puzzler, {"v", "supervortextemplate"},{"b", "hypervortextemplate"},{"n", "ntemplate"},{"e", "etemplate"},{"r", "rtemplate"}, {"P", "Ptemplate"}, {"S", "Stemplate"}, {"U", "Utemplate"}, {"W", "Wtemplate"}, {"L", "superopentemplate"}, {"D", "superdoortemplate"}, {"p", "documents"})
 
 wo(res.composer(autotiler), "  ", {
+
        ":!:!:!:!:!:!:!:!:!:!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!'!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!! Q Q Q Q Q Q Q Q Q Q Q l ! ! ! ! ! !!! ! ! ! ! ! ! l l l l l l l l l l l l!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!! Q ! ! ! ! ! ! ! ! ! Q l ! ! ! ! ! !!! ! ! ! ! ! ! l / / / / / / / / / / l!!:!:!:!:!:!:!:!:!:!",
@@ -173,10 +173,10 @@
        ":!:!:!:!:!:!:!:!:!:!!! Q ! ! + ! ! ! + ! ! Q l ! ! ! ! ! !!! ! ! ! ! ! ! l / / + / / / / / + / l!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!! Q Q Q Q Q Q Q Q Q QFQFlF!F!F!F! ! !!! ! !F!F!F!F!FlFl l l l l l l l l l l!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!!/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!'!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!/!!!:!:!:!:!:!:!:!:!:!",
-       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! ! !~!>!o! !z  !o! !~! ! ! ! ! ! ! !~! !o! !z  !o!>!~! ! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! !~! !~!o! !z  !o!~! !~! ! !o1 ! !~! !~!o! !z  !o!~! !~! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! !~! !~!o! !z  !o!~! !~! ! !YL ! !~! !~!o! !z  !o!~! !~! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
-       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! ! !~! !o! !z  !o! !~! ! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
+       ":!:!:!:!:!:!:!:!:!:!!! ! ! ! ! ! !~!>!o! !z  !o! !~! ! ! ! ! ! ! !~! !o! !z  !o!>!~! ! ! ! ! ! !!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!GeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGe3!GeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGeGe:!:!:!:!:!:!:!:!:!",
        ":!:!:!:!:!:!:!:!:!:!!!B!!!!!!!!!!!U1U2U3U4U5U6U7!!!!!!!!!!G0!!!!!!!!!!!!!!!!4!!!!!!!!!!!!!!!!!!!!!:!:!:!:!:!:!:!:!:!",



From raoul at mail.berlios.de  Fri Feb 27 18:12:09 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Fri, 27 Feb 2009 18:12:09 +0100
Subject: [Enigma-game-svn] r1558 - in trunk/data/levels: enigma_cross
	enigma_i enigma_ii enigma_v enigma_vi
Message-ID: <200902271712.n1RHC9wd017346@sheep.berlios.de>

Author: raoul
Date: 2009-02-27 18:12:07 +0100 (Fri, 27 Feb 2009)
New Revision: 1558

Added:
   trunk/data/levels/enigma_i/andreas24_2.xml
   trunk/data/levels/enigma_ii/andreas17_2.xml
   trunk/data/levels/enigma_v/andreas25_3.xml
   trunk/data/levels/enigma_v/andreas33_2.xml
   trunk/data/levels/enigma_vi/andreas26_2.xml
   trunk/data/levels/enigma_vi/andreas28_2.xml
   trunk/data/levels/enigma_vi/andreas29_2.xml
   trunk/data/levels/enigma_vi/andreas30_3.xml
   trunk/data/levels/enigma_vi/andreas34_2.xml
   trunk/data/levels/enigma_vi/andreas35_2.xml
   trunk/data/levels/enigma_vi/andreas36_2.xml
   trunk/data/levels/enigma_vi/andreas38_2.xml
   trunk/data/levels/enigma_vi/andreas39_2.xml
Removed:
   trunk/data/levels/enigma_i/andreas24_1.xml
   trunk/data/levels/enigma_ii/andreas17_1.xml
   trunk/data/levels/enigma_v/andreas25_2.xml
   trunk/data/levels/enigma_v/andreas33_1.xml
   trunk/data/levels/enigma_vi/andreas26_1.xml
   trunk/data/levels/enigma_vi/andreas28_1.xml
   trunk/data/levels/enigma_vi/andreas29_1.xml
   trunk/data/levels/enigma_vi/andreas30_2.xml
   trunk/data/levels/enigma_vi/andreas34_1.xml
   trunk/data/levels/enigma_vi/andreas35_1.xml
   trunk/data/levels/enigma_vi/andreas36_1.xml
   trunk/data/levels/enigma_vi/andreas38_1.xml
   trunk/data/levels/enigma_vi/andreas39_1.xml
Modified:
   trunk/data/levels/enigma_cross/newlevels.xml
   trunk/data/levels/enigma_i/index.xml
   trunk/data/levels/enigma_ii/index.xml
   trunk/data/levels/enigma_v/index.xml
   trunk/data/levels/enigma_vi/andreas37_2.xml
   trunk/data/levels/enigma_vi/index.xml
Log:
-> New api levels from Andreas



Modified: trunk/data/levels/enigma_cross/newlevels.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_cross/newlevels.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="35" title="Enigma 1.00 new"/>
+  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="36" title="Enigma 1.00 new"/>
 
   <attributes/>
 
@@ -27,12 +27,12 @@
     <level _seq="19" _title="Laser Arena" _xpath="enigma_i/andreas14_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas14" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="Advanced Lasers" _xpath="enigma_i/luc23_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc23" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="21" _title="Formentera!" _xpath="enigma_i/luc06_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc06" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="22" _title="Floppy Floors" _xpath="enigma_i/andreas24_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas24" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="22" _title="Floppy Floors" _xpath="enigma_i/andreas24_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas24" rel="2" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Balance" _xpath="enigma_i/erich01_1" author="Erich Schubert" ctrl="force" easy="false" id="balance" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="24" _title="- Meditation -" _xpath="enigma_i/raoul04_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul04" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="25" _title="Enignimm" _xpath="enigma_ii/alain02_1" author="Alain Busser" ctrl="force" easy="false" id="alain02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="One Way Ticket" _xpath="enigma_ii/luc25_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc25" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="27" _title="- Meditation -" _xpath="enigma_ii/andreas17_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas17" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="27" _title="- Meditation -" _xpath="enigma_ii/andreas17_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas17" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Growing Boxes" _xpath="enigma_ii/luc26_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc26" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Enigmastermind" _xpath="enigma_ii/alain16_1" author="Alain Busser" ctrl="force" easy="false" id="alain16" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="30" _title="Guitar" _xpath="enigma_ii/guy01_1" author="Guy Busser" ctrl="force" easy="false" id="guy01" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -104,7 +104,7 @@
     <level _seq="96" _title="Table Hockey" _xpath="enigma_v/capkoh01_1" author="capkoh" ctrl="force" easy="false" id="capkoh01" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="97" _title="Jesusbond" _xpath="enigma_v/richi02_1" author="Richi B?tzer" ctrl="force" easy="false" id="richi02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="98" _title="Sentry Duty" _xpath="enigma_v/nat25_1" author="Nat Pryce" ctrl="force" easy="true" id="nat25" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="99" _title="Thievish Alleys" _xpath="enigma_v/andreas33_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas33" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="99" _title="Thievish Alleys" _xpath="enigma_v/andreas33_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas33" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="100" _title="Double play" _xpath="enigma_v/just06_1" author="JuSt" ctrl="force" easy="false" id="just06" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="101" _title="Oxyd-Puzzle" _xpath="enigma_v/raoul05_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul05" rel="2" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="102" _title="Keystone" _xpath="enigma_v/raoul12_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul12" rel="2" rev="9" score="1" target="time" unit="duration"/>
@@ -131,7 +131,7 @@
     <level _seq="123" _title="- Meditation -" _xpath="enigma_v/alain14_1" author="Alain Busser" ctrl="force" easy="false" id="alain14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="124" _title="Frogger" _xpath="enigma_v/luc20_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc20" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="125" _title="Fatal Attraction I" _xpath="enigma_v/spaceman01_2" author="Spaceman" ctrl="force" easy="true" id="spaceman1" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="126" _title="Acoustic Reminiscence" _xpath="enigma_v/andreas25_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="126" _title="Acoustic Reminiscence" _xpath="enigma_v/andreas25_3" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="3" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="127" _title="Fatal Attraction II" _xpath="enigma_v/spaceman02_1" author="Spaceman" ctrl="force" easy="false" id="spaceman2" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="128" _title="Fatal Attraction III" _xpath="enigma_v/spaceman03_1" author="Spaceman" ctrl="force" easy="false" id="spaceman3" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="129" _title="Doors forever" _xpath="enigma_v/just03_1" author="JuSt" ctrl="force" easy="true" id="just03" rel="1" rev="3" score="1" target="time" unit="duration"/>
@@ -154,7 +154,7 @@
     <level _seq="146" _title="Oxydrings" _xpath="enigma_vi/raoul13_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul13" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="147" _title="Pac Marble" _xpath="enigma_vi/andreas22_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas22" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="148" _title="Basketball" _xpath="enigma_vi/ral03_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060213ral005" rel="2" rev="43" score="2" target="time" unit="duration"/>
-    <level _seq="149" _title="Orbitting" _xpath="enigma_vi/andreas26_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas26" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="149" _title="Orbitting" _xpath="enigma_vi/andreas26_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas26" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="150" _title="Evil" _xpath="enigma_vi/spaceman04_1" author="Spaceman" ctrl="force" easy="false" id="spaceman4" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="151" _title="Meditation Disturbance" _xpath="enigma_vi/ral04_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060429ral006" rel="2" rev="143" score="1" target="time" unit="duration"/>
     <level _seq="152" _title="Banana Republic" _xpath="enigma_v/alain26_2" author="Alain Busser" ctrl="force" easy="true" id="alain26" rel="2" rev="2" score="2" target="time" unit="duration"/>
@@ -165,10 +165,10 @@
     <level _seq="157" _title="Laserpowered" _xpath="enigma_vi/raoul20_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul20" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="158" _title="Oxydmoron" _xpath="enigma_vi/raoul14_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul14" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="159" _title="Bomb raider" _xpath="enigma_vi/alain27_1" author="Alain Busser" ctrl="force" easy="true" id="alain27" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="160" _title="Dancing on Light Beams" _xpath="enigma_vi/andreas28_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas28" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="160" _title="Dancing on Light Beams" _xpath="enigma_vi/andreas28_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas28" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="161" _title="- Meditation -" _xpath="enigma_vi/alain25_2" author="Alain Busser + Raoul Bourquin" ctrl="force" easy="true" id="alain25" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="162" _title="Checkmate I" _xpath="enigma_vi/andreas29_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas29" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="163" _title="The Stable" _xpath="enigma_vi/andreas30_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas30" rel="2" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="162" _title="Checkmate I" _xpath="enigma_vi/andreas29_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas29" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="163" _title="The Stable" _xpath="enigma_vi/andreas30_3" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas30" rel="3" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="164" _title="Chess, Bugs &amp; Rock'n'Roll" _xpath="enigma_vi/andreas31_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas31" rel="2" rev="12" score="1" target="time" unit="duration"/>
     <level _seq="165" _title="Chessing Positions" _xpath="enigma_vi/raoul22_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul22" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="166" _title="Twisting by the pool" _xpath="enigma_vi/alain23_1" author="Alain Busser" ctrl="force" easy="true" id="alain23" rel="1" rev="0" score="1" target="time" unit="duration"/>
@@ -191,18 +191,18 @@
     <level _seq="183" _title="Just another pretty level" _xpath="enigma_vi/edward26_1" author="Edward" ctrl="force" easy="true" id="edward26" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="184" _title="- Meditation -" _xpath="enigma_vii/edward30_1" author="Edward" ctrl="force" easy="true" id="edward30" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="185" _title="- Meditation -" _xpath="enigma_vi/raoul24_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul24" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="186" _title="Procrustes" _xpath="enigma_vi/andreas34_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas34" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="187" _title="- Meditation -" _xpath="enigma_vi/andreas36_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas36" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="188" _title="Troy" _xpath="enigma_vi/andreas37_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas37" rel="2" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="186" _title="Procrustes" _xpath="enigma_vi/andreas34_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas34" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="187" _title="- Meditation -" _xpath="enigma_vi/andreas36_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas36" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="188" _title="Troy" _xpath="enigma_vi/andreas37_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas37" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="189" _title="Ben Hur" _xpath="enigma_vi/ral13_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20061011ral390" rel="1" rev="58" score="1" target="time" unit="duration"/>
     <level _seq="190" _title="Bodyguard" _xpath="enigma_vi/ral10_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060730ral012" rel="2" rev="106" score="1" target="time" unit="duration"/>
-    <level _seq="191" _title="Janus" _xpath="enigma_vi/andreas38_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas38" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="192" _title="Phaeton" _xpath="enigma_vi/andreas39_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas39" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="191" _title="Janus" _xpath="enigma_vi/andreas38_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas38" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="192" _title="Phaeton" _xpath="enigma_vi/andreas39_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas39" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="193" _title="Ariadne" _xpath="enigma_vi/andreas40_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas40" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="194" _title="Oiltrace" _xpath="enigma_vi/raoul25_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul25" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="195" _title="The Cube" _xpath="enigma_vi/malaire01_1" author="Markus Laire" ctrl="force" easy="true" id="20061120malaire901" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="196" _title="Puzzle Puzzles" _xpath="enigma_vi/raoul26_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul26" rel="1" rev="26" score="1" target="time" unit="duration"/>
-    <level _seq="197" _title="Checkmate II" _xpath="enigma_vi/andreas35_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas35" rel="1" rev="8" score="1" target="time" unit="duration"/>
+    <level _seq="197" _title="Checkmate II" _xpath="enigma_vi/andreas35_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas35" rel="2" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="198" _title="be quick or be dead" _xpath="enigma_vi/illmind12_1" author="illmind" ctrl="force" easy="true" id="illmind12" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="199" _title="Tarzan" _xpath="enigma_vi/ulf03_1" author="Ulf Stegemann" ctrl="force" easy="true" id="20060629ulf003" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="200" _title="Simple Space" _xpath="enigma_vi/ulf02_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20060628ulf002" rel="1" rev="0" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_i/andreas24_1.xml
===================================================================
--- trunk/data/levels/enigma_i/andreas24_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_i/andreas24_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,171 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Floppy Floors" el:subtitle="" el:id="andreas24"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="00:43" el:difficult="01:11"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-
--- Global variables holding the floor-state
-
-levelh=13
-levelw=20
-myfloor = {}
-myfloor[0] = "fl-abyss"
-myfloor[1] = "fl-samba"
-myfloor[2] = "fl-gray"
-
-enigma.SlopeForce=15
-enigma.ElectricForce=30
-enigma.FrictionFactor=1.5
-local x, y, j, k
-
-way = {}
-for j = 1,5 do
-  way[j] = 0
-end
-
-floornumber = {}
-for x = 0, levelw - 1 do
-  floornumber[x] = {}
-  for y = 0, levelh - 1 do
-    floornumber[x][y] = 0
-  end
-end
-
--- Initialise random connections
-
-trigger = {}
-for j = 1,5 do  trigger[j] = 0  end
-for j = 1,5 do
-  repeat
-    k = random(1,5)
-    if trigger[k] == 0 then
-      trigger[k] = j
-    else
-      k = 0
-    end
-  until k > 0
-end
-
--- Switch and draw functions
-
-function switch(onoff, sender)
-  local j = trigger[enigma.GetAttrib(sender, "_mynumber")]
-  way[j] = 1 - way[j]
-  drawstate(j)
-  oxyd_closeall()
-  oxyd_shuffle()
-end
-
-function drawstate(j)
-  for x = 0, levelw - 1 do
-    for y = 0, levelh - 1 do
-      if (floornumber[x][y] == j) then
-        set_floor(myfloor[way[floornumber[x][y]]], x, y)
-      end
-    end
-  end
-end
-
--- BBE/ant stuff
-
-function file_oxyd(x,y,f)
-  oxyd_default_flavor=f
-  oxyd(x,y)
-end
-function set_myfloor(x,y,k)
-  floornumber[x][y] = k
-  set_floor(myfloor[way[k]], x, y)
-end
-
-cells={}
-items={}
-stones={}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-cells["!"]=cell{floor = myfloor[0]}
-if difficult then
-  cells["#"]=cell{floor = "fl-gradient1"}
-  cells["&"]=cell{floor = "fl-gradient2"}
-  cells["$"]=cell{floor = "fl-gradient3"}
-  cells["%"]=cell{floor = "fl-gradient4"}
-else
-  cells["#"]=cell{floor = myfloor[2]}
-  cells["&"]=cell{floor = myfloor[2]}
-  cells["$"]=cell{floor = myfloor[2]}
-  cells["%"]=cell{floor = myfloor[2]}
-end
-for j = 1, 5 do
-  cells[tostring(j)]=cell{parent={{set_myfloor, j}}}
-  stones[tostring(j)]=cell{stone=
-       {"st-floppy", {action = "callback", target = "switch", _mynumber = j}}}
-end
-stones["#"]=cell{parent={{file_oxyd, "b"}}}
-items["!"]=cell{item="it-floppy"}
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!#%%11111!444422255!",
-       "!#!&!!!!1!4!!4!!!!5!",
-       "!#!&2222122224!!!!5!",
-       "!#!&!!!!1!5!!1!!!!3!",
-       "!#!&!!!!3!5!!1!!!!3!",
-       "!#!&33333!5!!144444!",
-       "!#!&!!!!!!5!!1!!!!1!",
-       "!#!&!!!!!!5!!1!!!!1!",
-       "!#!&444111555333333!",
-       "!#!&!!!!!!!!!2!!!!3!",
-       "!$$&555552222211113!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-itmap={"                    ",
-       "                !   ",
-       "                    ",
-       "                    ",
-       "        !           ",
-       "                    ",
-       "   !                ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "             !      ",
-       "                    ",
-       "                    "}
-stmap={"                    ",
-       "                   #",
-       "  1                 ",
-       "                    ",
-       "  2                 ",
-       "                    ",
-       "  3         #      #",
-       "                    ",
-       "  4                 ",
-       "                    ",
-       "  5                 ",
-       "                   #",
-       "                    "}
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-oxyd_shuffle()
-set_actor("ac-blackball", 1.5, 2.5, {mouseforce = 1.667})
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_i/andreas24_2.xml (from rev 1557, trunk/data/levels/enigma_i/andreas24_1.xml)
===================================================================
--- trunk/data/levels/enigma_i/andreas24_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_i/andreas24_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,88 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Floppy Floors" el:subtitle="" el:id="andreas24"/>
+      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="00:43" el:difficult="01:11"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["SlopeStrength"] = 15
+wo["FrictionStrength"] = 1.5
+
+if wo["IsDifficult"] then
+    ti["v"] = {"fl_slope_ps"}
+    ti["^"] = {"fl_slope_pn"}
+    ti[">"] = {"fl_slope_pe"}
+    ti["<"] = {"fl_slope_pw"}
+else
+    ti["v"] = {"fl_gray"}
+    ti["^"] = {"fl_gray"}
+    ti[">"] = {"fl_gray"}
+    ti["<"] = {"fl_gray"}
+end
+
+ti[" "] = {"fl_abyss"}
+ti["."] = {"fl_samba"}
+ti["1"] = {"fl_abyss", "floor1#"}
+ti["2"] = {"fl_abyss", "floor2#"}
+ti["3"] = {"fl_abyss", "floor3#"}
+ti["4"] = {"fl_abyss", "floor4#"}
+ti["5"] = {"fl_abyss", "floor5#"}
+ti["F"] = {"st_floppy", "floppystone#", target = "floppy_call"}
+ti["O"] = {"st_oxyd", "oxyd#", flavor = "b", oxydcolor = OXYD_CYAN}
+ti["P"] = {"st_oxyd", "oxyd#", flavor = "b", oxydcolor = OXYD_PURPLE}
+ti["a"] = ti["^"] .. {"it_floppy"}
+ti["b"] = ti["1"] .. {"it_floppy"}
+ti["c"] = ti["2"] .. {"it_floppy"}  -- appears twice
+ti["@"] = ti["v"] .. {"#ac_marble", adhesion = 1.667}
+
+wo(ti, " ",
+      {"                    ",
+       " v<<11111 444422c55P",
+       " @F^    1 4  4    5 ",
+       " v ^2222122224    5 ",
+       " vF^    b 5  1    3 ",
+       " v ^    3 5  1    3 ",
+       " vFa33333 5 O144444O",
+       " v ^      5  1    1 ",
+       " vF^      5  1    1 ",
+       " v ^444111555333333 ",
+       " vF^         c    3 ",
+       " >>^555552222211113P",
+       "                    "})
+
+wo:shuffleOxyd()
+
+floppystones = no["floppystone#*"]:shuffle()
+for j = 1, #floppystones do
+    floppystones[j]._myfloors = "floor"..j.."#*"
+end
+
+function floppy_call(is_on, sender)
+     if is_on then
+         wo[po[sender._myfloors]] = ti["."]
+     else
+         wo[po[sender._myfloors]] = ti[" "]
+     end
+     no["oxyd#*"][1]:closeall()
+     wo:shuffleOxyd()
+end
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_i/index.xml
===================================================================
--- trunk/data/levels/enigma_i/index.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_i/index.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10200" network="false" owner="Enigma Team" release="1" revision="17" title="Enigma I"/>
+  <info enigma="1.00" group="Enigma" location="10200" network="false" owner="Enigma Team" release="1" revision="18" title="Enigma I"/>
 
   <attributes/>
 
@@ -91,7 +91,7 @@
     <level _seq="83" _title="Watery Grave" _xpath="./martin37_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin37" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="84" _title="Escher's World" _xpath="./ant09_1" author="Petr Machata" ctrl="force" easy="false" id="ant09" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="85" _title="Balancing Act" _xpath="./nat09_1" author="Nat Pryce" ctrl="force" easy="false" id="nat9" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="86" _title="Floppy Floors" _xpath="./andreas24_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas24" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="86" _title="Floppy Floors" _xpath="./andreas24_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas24" rel="2" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="87" _title="Space Tubes" _xpath="./duffy13_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy13" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="88" _title="Balance" _xpath="./erich01_1" author="Erich Schubert" ctrl="force" easy="false" id="balance" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="89" _title="More Space Tubes" _xpath="./duffy33_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy33" rel="1" rev="2" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_ii/andreas17_1.xml
===================================================================
--- trunk/data/levels/enigma_ii/andreas17_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_ii/andreas17_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,114 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="- Meditation -" el:subtitle="" el:id="andreas17"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="01:41"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- !!BBE105!! Do not delete this line
-
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-levelh=13
-levelw=191
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-cells={}
-items={}
-actors={}
-stones={}
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-cells["!"]=cell{floor="fl-plank"}
-stones["!"]=cell{stone="st-rock8"}
-stones["#"]=cell{stone="it-hollow"}
-function ac_whiteball_small(x,y)
-n=""
-p=0
-f=0
-set_actor("ac-whiteball-small",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-actors["!"]=cell{parent={{ac_whiteball_small}}}
-items["!"]=cell{item="it-hollow"}
-level={"!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"}
-   acmap={"                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "     !!!                                                                                                                                                                                       ",
-          "    !! !!                                                                                                                                                                                      ",
-          "     !!!                                                                                                                                                                                       ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               ",
-          "                                                                                                                                                                                               "}
-  itmap={"                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "              !                 !                 !                 !                 !                 !                 !                 !                 !                 !              ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               ",
-         "                                                                                                                                                                                               "}
- stmap={"!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                                                                                                                                                                                             !",
-        "!                                                                                                                                                                                             !",
-        "!                                                                                                                                                                                             !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!                  !                  !                  !                  !                  !                  !                  !                  !                  !                  !",
-        "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"}
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_ii/andreas17_2.xml (from rev 1557, trunk/data/levels/enigma_ii/andreas17_1.xml)
===================================================================
--- trunk/data/levels/enigma_ii/andreas17_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_ii/andreas17_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,46 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="- Meditation -" el:subtitle="" el:id="andreas17"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="01:41"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_plank"}
+ti["#"] = {"st_concrete"}
+ti["m"] = {"it_meditation"}
+ti["@"] = {"#ac_pearl"}
+
+wo(ti, " ",
+ {"###############################################################################################################################################################################################",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#    @@@                                                                                                                                                                                      #",
+  "#   @@ @@     m                 m                 m                 m                 m                 m                 m                 m                 m                 m             #",
+  "#    @@@                                                                                                                                                                                      #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "#                  #                  #                  #                  #                  #                  #                  #                  #                  #                  #",
+  "###############################################################################################################################################################################################"})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_ii/index.xml
===================================================================
--- trunk/data/levels/enigma_ii/index.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_ii/index.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10300" network="false" owner="Enigma Team" release="1" revision="20" title="Enigma II"/>
+  <info enigma="1.00" group="Enigma" location="10300" network="false" owner="Enigma Team" release="1" revision="21" title="Enigma II"/>
 
   <attributes/>
 
@@ -25,7 +25,7 @@
     <level _seq="17" _title="Dustwalkers" _xpath="./ant06_1" author="Petr Machata" ctrl="force" easy="false" id="ant06" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="18" _title="Send More Money" _xpath="./siegfried18_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level5f" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Stay in the Spotlight" _xpath="./nat24_1" author="Nat Pryce" ctrl="force" easy="false" id="nat24" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="20" _title="- Meditation -" _xpath="./andreas17_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas17" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="20" _title="- Meditation -" _xpath="./andreas17_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas17" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="21" _title="Growing Boxes" _xpath="./luc26_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc26" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="Kaleidoscope" _xpath="./duffy118_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy118" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Enigmastermind" _xpath="./alain16_1" author="Alain Busser" ctrl="force" easy="false" id="alain16" rel="1" rev="2" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_v/andreas25_2.xml
===================================================================
--- trunk/data/levels/enigma_v/andreas25_2.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_v/andreas25_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,328 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Acoustic Reminiscence" el:subtitle="" el:id="andreas25"/>
-      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="01:26" el:difficult="03:00"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
--- Initialisation
-levelh=15
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-oxyd_default_flavor = "b"
-num_diffsounds = 4
-num_diffpulses = 3
-triggerstone = {}
-for j = 0,17 do
-  triggerstone[j] = -1
-end
-choosefrom = "abcdehijlpqrswy"
-chosensound = {}
-for j = 1,strlen(choosefrom) do
-  chosensound[j] = -1
-end
-if difficult then
-  diffsound = {}
-  local diffelem = {}
-  local j, k, c
-  for j = 1,strlen(choosefrom) do
-    diffsound[j] = ""
-  end
-  for j = 1,num_diffsounds do
-    diffelem[j] = -1
-    for c = 1,1000 do   -- try at most 1000 times
-      if diffelem[j] == -1 then
-        diffelem[j] = random(1,strlen(choosefrom))
-        if j > 1 then
-          for k = 1, j - 1 do
-            if diffelem[j] == diffelem[k] then
-              diffelem[j] = -1
-            end
-          end
-        end
-      end
-    end
-    if diffelem[j] == -1 then
-      error("(1) Unexpected probability: "..
-            "Assume to be extraordinarily happy to have found this!")
-    end
-  end
-  for j = 1,strlen(choosefrom) do
-    for c = 1, 1000 do
-      if diffsound[j] == "" then
-        for k = 1,num_diffpulses do 
-          local n = diffelem[random(1,num_diffsounds)]
-          diffsound[j] = diffsound[j]..strsub(choosefrom, n, n)
-        end
-        diffsound[j] = diffsound[j].."."
-        if j > 1 then
-          for k = 1, j - 1 do
-            if diffsound[j] == diffsound[k] then
-              diffsound[j] = ""
-            end
-          end
-        end
-      end
-    end
-    if diffsound[j] == "" then
-      error("Didn't find a combination for number "..tostring(j).."!")
-    end
-  end
-end
-oxydsound = {}
-for j = 0,8 do
-  local c
-  oxydsound[2*j] = -1
-  for c = 1,1000 do  -- try this at most 1000 times
-    if oxydsound[2*j] == -1 then
-      oxydsound[2*j] = random(1,strlen(choosefrom))
-      if chosensound[oxydsound[2*j]] == -1 then
-        chosensound[oxydsound[2*j]] = j
-      else
-        oxydsound[2*j] = -1
-      end
-    end
-  end
-  if oxydsound[2*j] == -1 then
-    error("(2) Unexpected probability: Assume to be extraordinarily happy to have found this!")
-  end
-  oxydsound[2*j+1] = oxydsound[2*j]
-end
-lasttriggered = -1
--- Set a trigger (parent)
-counter = 0
-function settrigger(x,y)
-  local c
-  local found = -1
-  for c = 1,1000 do  -- Find an oxyd/fart: try this at most 1000 times
-    if found == -1 then
-      found = random(0,17)
-      if triggerstone[found] == -1 then
-        triggerstone[found] = counter
-        counter = counter + 1
-      else
-        found = -1
-      end
-    end
-  end
-  if (found == -1) or (sfound == -1) then
-    error("(3) Unexpected probability: Assume to be extraordinarily happy to have found this!")
-  else
-    set_item("it-sensor", x, y, {name = "trigger"..tostring(counter-1),
-      action = "callback", target = "triggerfunc", _mynumber = found, _mystate = 1})
-    set_floor("fl-trigger", x, y)
-  end
-end
-function triggerfunc(onoff, sender)
-  if enigma.GetAttrib(sender, "_mystate") == 1 then
-    local mynumber = enigma.GetAttrib(sender, "_mynumber")
-    local mysound = oxydsound[mynumber]
-    if difficult then
-      soundstring = soundstring..diffsound[mysound]
-    else
-      soundstring = soundstring..strsub(choosefrom,mysound,mysound)
-    end
-    enigma.SetAttrib(sender, "_mystate", 0)
-    set_floor("fl-samba", enigma.GetPos(sender))
-    if lasttriggered == -1 then
-      lasttriggered = mynumber
-    else
-      if        (oxydsound[lasttriggered] == oxydsound[mynumber])
-            and (lasttriggered ~= mynumber) then
-        lasttriggered = -1
-        -- test if all sounds were opened
-        local sum = 0
-        for j = 0, 17 do
-          sum = sum + enigma.GetAttrib(enigma.GetNamedObject(
-                           "trigger"..tostring(j)), "_mystate")
-        end
-        if sum == 0 then
-          for j = 0, 1 do
-            SendMessage("mystone"..tostring(j), "trigger")
-          end
-        end
-      else
-        -- start all over again
-        local j
-        for j = 0, 17 do
-          local trig = enigma.GetNamedObject("trigger"..tostring(j))
-          if trig == nil then
-            error("Um... shouldn't happen: trig == nil.")
-          end        
-          SetAttrib(trig, "_mystate", 1)
-          set_floor("fl-trigger", enigma.GetPos(trig))
-          lasttriggered = -1          
-        end
-      end
-    end
-  end
-end
--- Set stone with name "mystone"..counter2  (mostly an artifact)
-counter2 = 0
-function setmystone(x,y,st)
-  if st == "st-oxyd" then
-    oxyd(x,y)
-  else
-    set_stone(st, x, y)
-  end
-  SetAttrib(enigma.GetStone(x,y), "name", "mystone"..tostring(counter2))
-  counter2 = counter2 + 1
-end
--- Sound-string playing
--- Remark: This timer-callback-function plays a sound defined by its
---         first character, then deletes this. The sound is saved in
---         the global variable "soundstring".
-soundstring = ""
-function soundstring_timercallback()
-  local s = ""
-  if strlen(soundstring) == 1 then
-    s = soundstring
-    soundstring = ""
-  end
-  if strlen(soundstring) > 1 then
-    s = strsub(soundstring, 1, 1)
-    soundstring = strsub(soundstring, 2, strlen(soundstring))
-  end
-  --  choosefrom = "abcdehijlpqrswy"
-  local play = ""
-      if  s == "a"  then  play = "cloth"
-  elseif  s == "b"  then  play = "blackbomb"
-  elseif  s == "c"  then  play = "coinsloton"
-  elseif  s == "d"  then  play = "drown"
-  elseif  s == "e"  then  play = "fakeoxyd"
-  elseif  s == "f"  then  play = "fart"
-  elseif  s == "g"  then  play = ""
-  elseif  s == "h"  then  play = "shatter"
-  elseif  s == "i"  then  play = "itemtransform"
-  elseif  s == "j"  then  play = "jump"
-  elseif  s == "k"  then  play = ""
-  elseif  s == "l"  then  play = "laseron"
-  elseif  s == "m"  then  play = "mirrorturn"
-  elseif  s == "n"  then  play = "stonepaint"
-  elseif  s == "o"  then  play = "oxydopen"
-  elseif  s == "p"  then  play = "pickup"
-  elseif  s == "q"  then  play = "puzzlerotate"
-  elseif  s == "r"  then  play = "rubberband"
-  elseif  s == "s"  then  play = "switchplayer"
-  elseif  s == "t"  then  play = "triggerdown"
-  elseif  s == "u"  then  play = "oxydopened"
-  elseif  s == "v"  then  play = ""
-  elseif  s == "w"  then  play = "swamp"
-  elseif  s == "x"  then  play = ""
-  elseif  s == "y"  then  play = "stonedestroy"
-  elseif  s == "z"  then  play = ""
-  elseif  s == "."  then  play = ""  -- this is a forced pause
-  end
-  if play ~= "" then
-    enigma.EmitSound(soundfloor, play)
-  end
-end
--- The level itself
-function ac_blackball(x,y)
-  set_actor("ac-blackball",x+0.5,y+0.5,{player=0,name="blackball",mouseforce=1})
-end
-cells={}
-items={}
-actors={}
-stones={}
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-cells["!"]=cell{floor="fl-samba"}
-stones["!"]=cell{stone="st-wood"}
-stones["#"]=cell{parent={{setmystone,"st-oxyd"}}}
-stones["$"]=cell{parent={{setmystone,"st-fart"}}}
-stones["f"]=cell{stone="st-fart"}
-items["!"]=cell{parent={{settrigger}}}
-actors["!"]=cell{parent={{ac_blackball}}}
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "         !          ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "  !  !  !  !  !  !  ",
-       "                    ",
-       "                    ",
-       "  !  !  !  !  !  !  ",
-       "                    ",
-       "                    ",
-       "  !  !  !  !  !  !  ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"!!!!!!!!!!!!!!!!!!!!",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!                  !",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "##$$$$$$$$$$$$$$$$!!",   -- those fart-stones are just artifacts...
-       "                    "}
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-set_stone("st-timer", 0, 14, {action="callback",
-  target="soundstring_timercallback", interval=0.3})
-soundfloor = enigma.GetFloor(10, 6)
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_v/andreas25_3.xml (from rev 1557, trunk/data/levels/enigma_v/andreas25_2.xml)
===================================================================
--- trunk/data/levels/enigma_v/andreas25_2.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_v/andreas25_3.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,143 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Acoustic Reminiscence" el:subtitle="" el:id="andreas25"/>
+      <el:version el:score="1" el:release="3" el:revision="5" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+        <el:dependency el:path="lib/liblua" el:id="lib/liblua" el:release="1" el:preload="true"/>
+        <el:dependency el:path="lib/libmath" el:id="lib/libmath" el:release="1" el:preload="true"/>
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="01:26" el:difficult="03:00"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_samba"}
+ti["."] = {"fl_fake_trigger"}
+ti["s"] = {"fl_samba", "soundfloor"}
+ti["#"] = {"st_box"}
+ti["O"] = {"st_oxyd", "oxyd#", flavor = "b", oxydcolor = OXYD_RED}
+ti["t"] = {"it_sensor", "trigger#", target = "trigger_call", _isopen = false,
+           invisible = true} .. ti["."]
+ti["@"] = {"#ac_marble", adhesion = 1}
+ti["T"] = {"st_timer", target = "timer_call", interval = 0.3}
+ti["U"] = {"st_timer"}  -- just design
+
+wo(ti, " ",
+      {"T##################U",
+       "#                  #",
+       "#                  #",
+       "# t  t  t  t  t  t #",
+       "#                  #",
+       "#        @         #",
+       "# t  t  t st  t  t #",
+       "#                  #",
+       "#                  #",
+       "# t  t  t  t  t  t #",
+       "#                  #",
+       "#                  #",
+       "O##################O"})
+
+wo:add({"ot_counter", "counter", action_9 = "open", target_9 = "oxyd#*"})
+
+triggers = no["trigger#*"]:shuffle()
+soundfloor = no["soundfloor"]
+counter = no["counter"]
+
+for j = 1, 9 do
+    triggers[j]._number = j
+    triggers[j + 9]._number = j
+end
+
+soundname = {
+    ["a"] = "cloth",
+    ["b"] = "blackbomb",
+    ["c"] = "coinsloton",
+    ["d"] = "drown",
+    ["e"] = "fakeoxyd",
+    ["f"] = "fart",
+    ["g"] = "",
+    ["h"] = "shatter",
+    ["i"] = "itemtransform",
+    ["j"] = "jump",
+    ["k"] = "",
+    ["l"] = "laseron",
+    ["m"] = "mirrorturn",
+    ["n"] = "stonepaint",
+    ["o"] = "oxydopen",
+    ["p"] = "pickup",
+    ["q"] = "puzzlerotate",
+    ["r"] = "rubberband",
+    ["s"] = "switchplayer",
+    ["t"] = "triggerdown",
+    ["u"] = "oxydopened",
+    ["v"] = "",
+    ["w"] = "swamp",
+    ["x"] = "",
+    ["y"] = "stonedestroy",
+    ["z"] = "",
+    ["."] = ""  -- this is a forced pause
+}
+
+choosefrom = {"a","b","c","d","e","h","i","j","l","p","q","r","s","w","y"}
+
+if wo["IsDifficult"] then
+    diffelem = lib.lua.shuffle(choosefrom)
+    diffelem = {diffelem[1], diffelem[2], diffelem[3], diffelem[4]}
+    diffsound = lib.lua.shuffle(lib.math.combinations(3, diffelem)) -- 64 combinations
+end
+
+soundstack = {}
+function timer_call()
+    if #soundstack == 0 then
+        return
+    end
+    local play = soundname[table.remove(soundstack, 1)] or ""
+    if play ~= "" then
+        soundfloor:sound(play)
+    end
+end
+
+lasttriggered = -1
+function trigger_call(onoff, sender)
+    if sender._isopen then
+        return
+    end
+    wo[sender] = ti[" "]
+    sender._isopen = true
+    if wo["IsDifficult"] then
+        for _, sound in pairs(diffsound[sender._number]) do
+            table.insert(soundstack, sound)
+    end
+    table.insert(soundstack, ".")
+    else
+        table.insert(soundstack, choosefrom[sender._number])
+    end
+    if lasttriggered == -1 then
+        lasttriggered = sender._number
+    elseif lasttriggered == sender._number then
+        lasttriggered = -1
+    counter:signal(1)
+    else
+        -- start all over again
+        wo[triggers] = ti["."]
+    triggers._isopen = false
+        lasttriggered = -1
+    counter.state = 0
+    end
+end
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_v/andreas33_1.xml
===================================================================
--- trunk/data/levels/enigma_v/andreas33_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_v/andreas33_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,143 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Thievish Alleys" el:subtitle="" el:id="andreas33"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="00:31" el:difficult="00:36"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-
-levelh=13
-levelw=39
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-enigma.ConserveLevel=FALSE
-
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-function ac_blackball(x,y)
-    set_actor("ac-blackball",x+0.5,y+0.5,{player=0})
-end
-
-cells={}
-items={}
-actors={}
-stones={}
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{floor="fl-brick"}
-stones["!"]=cell{stone="st-stoneimpulse"}
-stones["#"]=cell{parent={{file_oxyd,"d"}}}
-stones["$"]=cell{stone="st-thief"}
-stones["%"]=cell{stone="st-brownie"}
-stones["&"]=cell{stone="st-stoneimpulse-hollow"}
-stones["'"]=cell{stone="st-floppy"}
-stones["("]=cell{stone="st-door-h"}
-actors["!"]=cell{parent={{ac_blackball}}}
-items["!"]=cell{item="it-floppy"}
-
-level={"!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"}
-acmap={"                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "  !                                    ",
-       "                                       ",
-       "                                       "}
-itmap={"                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "                                       ",
-       "   !                                   ",
-       "   !                                   ",
-       "   !                                   ",
-       "                                       "}
-if difficult then
- stmap={"!!!!!!!!!$$$$$$$$$$$!!!!!$$$!!!!!!!$$#$",
-        "!    $  &&&&&&&&&!&&&   &&  &    $& $ $",
-        "! $  $           $    $$$!$ &&&  $& '($",
-        "! $  !!&&!!!!!$  !&&!!!  &$$$$& !!& '($",
-        "! $ &&$   $  &&&&&   $&  &&&&&& !   '($",
-        "! $ & $$&&!&         $&         !  !% $",
-        "! $$&  $& $!!$ $$!!&&$&&!!!!!&&!!  !!&!",
-        "!% $&& $&   !&&&&&$ &$      $  $      !",
-        "! $$$&&$&   $     $ &!&&&&&&!&&!&&&&&&!",
-        "!   $ &$!$&&!!!$  $  $$$$$  $  $$$$$  $",
-        "#   $ &&&&& $ &&&&!&&&&&&&&&!&&&&&&&& $",
-        "$   $     &       $         $       & $",
-        "$$$$$$$$$$!!!!!!!!!!!!!!!!!!!!!!!!!!!$$"}
-else
- stmap={"!!!!!!!!!$$$$$$$$$$$!!!!!$$$!!!!!!!$$#$",
-        "!    $  &&&&&&&&&!&&&   &&  &    $& $ $",
-        "! $  $           $    $$$!$ &&&  $& '($",
-        "! $  !!&&!!!!!$  !&&!!!  &$$$$& !!& '($",
-        "! $ &&$   $  &&&&&   $&  &&&&&& !   '($",
-        "! $ & $$&&!&         $&         !  !% $",
-        "! $$&  $& $!!$ $$!!&&$&&!!!!!&&!!  !!&!",
-        "!% $&& $&   !&&&&&$ &$      $  $      !",
-        "! $$$&&$&   $     $ &!&&&&&&!&&!&&&&& !",
-        "!   $ &$!$&&!!!$  $  $$$$$  $  $$$$$& !",
-        "#   $ &&& & $ &&&&!&&&&&&&&&!&&&&&&&& !",
-        "$   $     &       $         $         !",
-        "$$$$$$$$$$!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"}
-end
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-Signal ("st(36 2)","st(37 2)")
-Signal ("st(36 3)","st(37 3)")
-Signal ("st(36 4)","st(37 4)")
-oxyd_shuffle()
-
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_v/andreas33_2.xml (from rev 1557, trunk/data/levels/enigma_v/andreas33_1.xml)
===================================================================
--- trunk/data/levels/enigma_v/andreas33_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_v/andreas33_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,71 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Thievish Alleys" el:subtitle="" el:id="andreas33"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="00:31" el:difficult="00:36"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["ConserveLevel"] = false
+
+ti[" "] = {"fl_brick"}
+ti["B"] = {"st_brownie"}
+ti["D"] = {"st_door", "door#", faces = "sn"}
+ti["F"] = {"st_floppy", target = "@@door#*"}
+ti["H"] = {"st_stoneimpulse_hollow"}
+ti["S"] = {"st_stoneimpulse"}
+ti["."] = {"st_thief"}  -- We use "." instead of "T" to make the stoneimpulse chain visible.
+ti["O"] = {"st_oxyd", flavor = "d", oxydcolor = OXYD_RED}
+ti["f"] = {"it_floppy"}
+ti["@"] = {"#ac_marble"}
+
+if wo["IsDifficult"] then
+    map = {"SSSSSSSSS...........SSSSS...SSSSSSS..O.",
+           "S    .  HHHHHHHHHSHHH   HH  H    .H . .",
+           "S .  .           .    ...S. HHH  .H FD.",
+           "S .  SSHHSSSSS.  SHHSSS  H....H SSH FD.",
+           "S . HH.   .  HHHHH   .H  HHHHHH S   FD.",
+           "S . H ..HHSH         .H         S  SB .",
+           "S ..H  .H .SS. ..SSHH.HHSSSSSHHSS  SSHS",
+           "SB .HH .H   SHHHHH. H.      .  .      S",
+           "S ...HH.H   .     . HSHHHHHHSHHSHHHHHHS",
+           "S  f. H.S.HHSSS.  .  .....  .  .....  .",
+           "O @f. HHHHH . HHHHSHHHHHHHHHSHHHHHHHH .",
+           ".  f.     H       .         .       H .",
+           "..........SSSSSSSSSSSSSSSSSSSSSSSSSSS.."}
+else
+    map = {"SSSSSSSSS...........SSSSS...SSSSSSS..O.",
+           "S    .  HHHHHHHHHSHHH   HH  H    .H . .",
+           "S .  .           .    ...S. HHH  .H FD.",
+           "S .  SSHHSSSSS.  SHHSSS  H....H SSH FD.",
+           "S . HH.   .  HHHHH   .H  HHHHHH S   FD.",
+           "S . H ..HHSH         .H         S  SB .",
+           "S ..H  .H .SS. ..SSHH.HHSSSSSHHSS  SSHS",
+           "SB .HH .H   SHHHHH. H.      .  .      S",
+           "S ...HH.H   .     . HSHHHHHHSHHSHHHHH S",
+           "S  f. H.S.HHSSS.  .  .....  .  .....H S",
+           "O @f. HHH H . HHHHSHHHHHHHHHSHHHHHHHH S",
+           ".  f.     H       .         .         S",
+           "..........SSSSSSSSSSSSSSSSSSSSSSSSSSSSS"}
+end
+
+wo(ti, " ", map)
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_v/index.xml
===================================================================
--- trunk/data/levels/enigma_v/index.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_v/index.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10600" network="false" owner="Enigma Team" release="1" revision="30" title="Enigma V"/>
+  <info enigma="1.00" group="Enigma" location="10600" network="false" owner="Enigma Team" release="1" revision="31" title="Enigma V"/>
 
   <attributes/>
 
@@ -19,7 +19,7 @@
     <level _seq="11" _title="The Prison" _xpath="./martin30_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin30" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="Jesusbond" _xpath="./richi02_1" author="Richi B?tzer" ctrl="force" easy="false" id="richi02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="13" _title="Sentry Duty" _xpath="./nat25_1" author="Nat Pryce" ctrl="force" easy="true" id="nat25" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="14" _title="Thievish Alleys" _xpath="./andreas33_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas33" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="14" _title="Thievish Alleys" _xpath="./andreas33_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas33" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="Solvable?" _xpath="./barry01_2" author="Barry &amp; Lori Mead" ctrl="force" easy="false" id="barry01" rel="2" rev="0" score="2" target="time" unit="duration"/>
     <level _seq="16" _title="Draggers" _xpath="./ant21_2" author="Petr Machata" ctrl="force" easy="true" id="ant21" rel="2" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="Break and Enter" _xpath="./siegfried16_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level5b" rel="1" rev="1" score="1" target="time" unit="duration"/>
@@ -78,7 +78,7 @@
     <level _seq="70" _title="- Meditation -" _xpath="./alain14_1" author="Alain Busser" ctrl="force" easy="false" id="alain14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="71" _title="Frogger" _xpath="./luc20_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc20" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="Fatal Attraction I" _xpath="./spaceman01_2" author="Spaceman" ctrl="force" easy="true" id="spaceman1" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="73" _title="Acoustic Reminiscence" _xpath="./andreas25_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="73" _title="Acoustic Reminiscence" _xpath="./andreas25_3" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="3" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="74" _title="Fatal Attraction II" _xpath="./spaceman02_1" author="Spaceman" ctrl="force" easy="false" id="spaceman2" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Stranded" _xpath="./duffy51_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy51" rel="2" rev="4" score="2" target="time" unit="duration"/>
     <level _seq="76" _title="Fatal Attraction III" _xpath="./spaceman03_1" author="Spaceman" ctrl="force" easy="false" id="spaceman3" rel="1" rev="1" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_vi/andreas26_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas26_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas26_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,95 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Orbitting" el:subtitle="" el:id="andreas26"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/andreas_ghosts" el:id="lib/andreas_ghosts" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="01:03" el:difficult="01:04"/>
-    </el:info>
-    <el:luamain><![CDATA[
-levelh=13
-levelw=20
-
-enigma.SlopeForce = 0.0
-enigma.ConserveLevel = FALSE
-
-create_world( levelw, levelh)
-
-draw_border("st-break_acwhite") --"st-likeoxydb-open"
-draw_stones("st-timeswitch", {0,0}, {0,1}, levelh,
-  {action="callback", target="switchfunc"})
-draw_stones("st-timeswitch", {0,0}, {1,0}, levelw-2,
-  {action="callback", target="switchfunc"})
-draw_stones("st-timeswitch", {levelw-3,0}, {0,1}, levelh,
-  {action="callback", target="switchfunc"})
-draw_stones("st-timeswitch", {0,levelh-1}, {1,0}, levelw-2,
-  {action="callback", target="switchfunc"})
-
-set_stone("st-door-h", levelw-2, 1, {name="door1"})
-set_stone("st-door-h", levelw-2, 2, {name="door2"})
-set_stone("st-door-h", levelw-2, 3, {name="door3"})
-set_stone("st-door-h", levelw-2, 4, {name="door4"})
-set_stone("st-door-h", levelw-2, 5, {name="door5"})
-set_stone("st-door-h", levelw-2, 7, {name="door6"})
-set_stone("st-door-h", levelw-2, 8, {name="door7"})
-set_stone("st-door-h", levelw-2, 9, {name="door8"})
-set_stone("st-door-h", levelw-2, 10, {name="door9"})
-set_stone("st-door-h", levelw-2, 11, {name="door10"})
-
-set_stone("st-timer", 0, levelh-1,
-  {action="callback", target="timerfunc", interval=6.0})
-
-ghosts_set_railarea(0,0,levelw,levelh,1,"fl-space")
-
-set_actor("ac-top", 5.5, 5.5, {range=20, force=5, gohome=FALSE})
-if difficult then
-  set_actor("ac-top", 8.5, 4.5, {range=20, force=5, gohome=FALSE})
-end
-
-ghosts_set_ghost(10,10,"ac-blackball", 1, ghosts_direction_intelligent, {player=0})
-ghosts_init(0,0)
-ghosts_check_for_walls = 0
-
-oxyd(levelw-2,0)
-oxyd(levelw-2,levelh-1)
-oxyd_shuffle()
-
-timercount = 0
-function switchfunc()
-  timercount = 0
-  local j
-  for j = 1, 10 do
-    SendMessage("door"..tostring(j), "close")
-  end
-end
-function timerfunc()
-  timercount = timercount + 1
-  if timercount < 11 then
-    SendMessage("door"..tostring(timercount), "open")
-  end
-  if timercount > 9 then  
-    draw_stones("st-break_acwhite", {0,1}, {0,1}, levelh-2)
-    draw_stones("st-break_acwhite", {1,0}, {1,0}, levelw-3)
-    draw_stones("st-break_acwhite", {levelw-3,1}, {0,1}, levelh)
-    draw_stones("st-break_acwhite", {1,levelh-1}, {1,0}, levelw-3)
-    set_stone("st-grate2", levelw-3, 6)
-  end
-end
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas26_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas26_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas26_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas26_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,88 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Orbitting" el:subtitle="" el:id="andreas26"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="01:03" el:difficult="01:04"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["ConserveLevel"] = false
+
+ti[" "] = {"fl_space"}
+ti["."] = {"fl_darkgray", friction = 4.0, adhesion = 2.0}
+ti["#"] = {"st_break_white"}
+ti["M"] = {"st_monoflop", "monoflop#", target = "close_doors"}
+ti["O"] = {"st_oxyd", flavor = "b", oxydcolor = OXYD_WHITE}
+ti["P"] = ti["M"] .. {"fl_space", "passage"}
+ti["T"] = {"st_timer", target = "make_floor_under_marble", interval = 0.1}
+ti["U"] = {"st_timer", target = "open_next_door", interval = 6.0}
+ti["t"] = {"#ac_top", range = 20, strength = 5, gohome = false}
+ti["@"] = {"#ac_marble", "marble"}
+ti["door"] = {"st_door", "door%%", faces = "sn"}
+
+if wo["IsDifficult"] then
+    ti["u"] = ti["t"]
+else
+    ti["u"] = ti[" "]
+end
+
+wo(res.autotile(ti, {"A", "J", "door"}), " ", {
+  "TMMMMMMMMMMMMMMMMMO#",
+  "M                MA#",
+  "M                MB#",
+  "M                MC#",
+  "M       u        MD#",
+  "M    t           ME#",
+  "M                P #",
+  "M                MF#",
+  "M                MG#",
+  "M                MH#",
+  "M         @      MI#",
+  "M                MJ#",
+  "UMMMMMMMMMMMMMMMMMO#"})
+
+timercount = 0  -- ot_counter would be inefficient here.
+
+function close_doors()
+    timercount = 0
+    no["door*"]:close()
+end
+
+function open_next_door()
+    timercount = timercount + 1
+    if timercount < 11 then
+        no["door%"..timercount]:open()
+    end
+    if timercount > 9 then
+        wo[no["monoflop#*"]] = ti["#"]
+        wo[no["passage"]] = {"st_grate_framed"}
+    end
+end
+
+local oldpos = po(0, 0)
+function make_floor_under_marble()
+    if po(no["marble"]) ~= oldpos then
+        wo[no["marble"]] = ti["."]
+        wo[oldpos] = ti[" "]
+        oldpos = po(no["marble"])
+    end
+end
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vi/andreas28_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas28_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas28_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,121 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Dancing on Light Beams" el:subtitle="" el:id="andreas28"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="01:08" el:difficult="01:19"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-function ac_blackball(x,y)
-  set_actor("ac-blackball",x+0.5,y+0.5,{player=0,mouseforce=1.7})
-end
-
-function set_laser(x,y,s)
-  set_stone(s, x, y, {on = TRUE})
-end
-
-cells={}
-actors={}
-stones={}
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-
-cells["!"]=cell{floor="fl-stone"}
-cells["#"]=cell{floor="fl-rough-blue"}
-cells["$"]=cell{floor="fl-bumps"}
-cells["%"]=cell{floor="fl-water"}
-
-stones["!"]=cell{stone="st-rock8"}
-stones["O"]=cell{parent={{file_oxyd,"b"}}}
-stones["$"]=cell{parent={{set_itemfreeze}}}
-stones["S"]=cell{parent={{set_laser, "st-laser-s"}}}
-stones["N"]=cell{parent={{set_laser, "st-laser-n"}}}
-stones["E"]=cell{parent={{set_laser, "st-laser-e"}}}
-stones["W"]=cell{parent={{set_laser, "st-laser-w"}}}
-stones["B"]=cell{stone="st-polarswitch"}
-stones["L"]=cell{stone="st-lightpassenger"}
-stones["M"]=cell{stone="st-stoneimpulse_movable"}
-
-actors["!"]=cell{parent={{ac_blackball}}}
-
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-   acmap={"                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "       !            ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    "}
- stmap={"!!S!!S!!!!!!!!!!!!!!",
-        "! B  B             !",
-        "!          BW  S S !",
-        "!  S B         B B !",
-        "!  B L    EB       !",
-        "EB        B    B   !",
-        "!            B    BW",
-        "!    B  B       BBW!",
-        "!EB           B    !",
-        "!       B   B      !",
-        "!!!!!!!!N!!!N!!!!  !",
-        "!M M M M M M M M  BW",
-        "!!!!!!!!!!OOOOOO!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,acmap,actors)
-oxyd_shuffle()
-
-if not difficult then
-  set_item("it-spring1", 6, 4)
-end
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas28_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas28_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas28_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas28_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,60 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Dancing on Light Beams" el:subtitle="" el:id="andreas28"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="01:08" el:difficult="01:19"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_stone"}
+ti["#"] = {"st_concrete"}
+ti["B"] = {"st_polarswitch"}
+ti["L"] = {"st_lightpassenger"}
+ti["M"] = {"st_stoneimpulse_movable"}
+ti["S"] = {"st_laser", orientation = SOUTH, state = ON}
+ti["N"] = {"st_laser", orientation = NORTH, state = ON}
+ti["E"] = {"st_laser", orientation = EAST, state = ON}
+ti["W"] = {"st_laser", orientation = WEST, state = ON}
+ti["O"] = {"st_oxyd", flavor = "b"}
+ti["@"] = {"#ac_marble", adhesion = 1.7}
+
+if wo["IsDifficult"] then
+    ti["s"] = ti[" "]
+else
+    ti["s"] = {"it_spring_keep"}
+end
+
+wo(ti, " ", {"##S##S##############",
+             "# B  B             #",
+             "#          BW  S S #",
+             "#  S B         B B #",
+             "#  B Ls@  EB       #",
+             "EB        B    B   #",
+             "#            B    BW",
+             "#    B  B       BBW#",
+             "#EB           B    #",
+             "#       B   B      #",
+             "########N###N####  #",
+             "#M M M M M M M M  BW",
+             "##########OOOOOO####"})
+
+wo:shuffleOxyd()
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vi/andreas29_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas29_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas29_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,64 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Checkmate I" el:subtitle="" el:id="andreas29"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="true"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="00:27"/>
-    </el:info>
-    <el:luamain><![CDATA[
-levelw = 20
-levelh = 13
-
-CreateWorld(levelw, levelh)
-
-draw_checkerboard_floor("fl-white", "fl-black", 0,0,levelw,levelh)
-draw_border("st-rock3", 0, 0, levelw, levelh)
-
-set_actor("ac-blackball", 3.5, 6.5, {player=0})
-set_actor("ac-whiteball", levelw - 3.5, 6.5, {player=1})
-set_item("it-yinyang", 3, 6)
-set_item("it-yinyang", levelw - 4, 6)
-
-oxyd(0, 6)
-oxyd(levelw-1, 6)
-oxyd_shuffle()  -- *g*
-set_stone("st-white4", 1, 6)
-set_stone("st-black4", levelw - 2, 6)
-
-for x = 7, levelw-8 do
-  for y = 1, levelh - 2 do
-    if enigma.GetKind(enigma.GetFloor(x,y)) == "fl-black" then
-      set_stone("st-white4", x, y)
-    else
-      set_stone("st-black4", x, y)
-    end
-  end
-end
-
-for x = 7, levelw-8 do
-  for y = 4, levelh-5 do
-    if enigma.GetKind(enigma.GetFloor(x,y)) == "fl-black" then
-      set_stone("st-chess_black", x, y)
-    else
-      set_stone("st-chess_white", x, y)
-    end
-  end
-end
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas29_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas29_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas29_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas29_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,49 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Checkmate I" el:subtitle="" el:id="andreas29"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="true"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="00:27"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = ti{"fl_bright", checkerboard = 0} .. {"fl_dark", checkerboard = 1}
+ti["#"] = {"st_flat"}
+ti["C"] = ti{"st_chess_white", checkerboard = 0} .. {"st_chess_black", checkerboard = 1}
+ti["X"] = ti{"st_passage_black_frame", checkerboard = 0} .. {"st_passage_white_frame", checkerboard = 1}
+ti["O"] = ti{"st_oxyd", oxydcolor = OXYD_YELLOW}
+ti["@"] = ti{"#ac_marble"} .. {"it_yinyang"}
+ti["%"] = ti{"#ac_marble_white"} .. {"it_yinyang"}
+
+wo(ti, " ", {
+  "####################",
+  "#      XXXXXX      #",
+  "#      XXXXXX      #",
+  "#      XXXXXX      #",
+  "#      CCCCCC      #",
+  "#      CCCCCC      #",
+  "OX @   CCCCCC   % XO",
+  "#      CCCCCC      #",
+  "#      CCCCCC      #",
+  "#      XXXXXX      #",
+  "#      XXXXXX      #",
+  "#      XXXXXX      #",
+  "####################"})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vi/andreas30_2.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas30_2.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas30_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,146 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="The Stable" el:subtitle="" el:id="andreas30"/>
-      <el:version el:score="2" el:release="2" el:revision="2" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="02:07"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Constructed with the help of BBE.
--- Solvable in 35 pushes (or less?).
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-enigma.ShowMoves=1
-enigma.ConserveLevel = 0
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{floor="fl-leaves"}
-items[" "]=cell{}
-cells["!"]=cell{floor="fl-leavesb"}
-stones["!"]=cell{stone="st-yellow"}
-stones["#"]=cell{parent={{file_oxyd,"a"}}}
-stones["$"]=cell{stone="st-door-v"}
-items["!"]=cell{item="it-trigger"}
-stones["<"]=cell{stone="st-oneway-w"}
-stones["C"]=cell{stone="st-chess_black"}
-
-function ac_blackball(x,y)
-    n=""
-    p=0
-    f=0
-    if (x==16) and (y==2) then
-        n="ac16x2"
-        p=0
-        mf=1,66666666666667
-    end
-    set_actor("ac-blackball",x+0.5,y+0.5,{player=p,name=n,mouseforce=mf})
-end
-
-actors["!"]=cell{parent={{ac_blackball}}}
-
-level={"                    ",
-       "   !!!!!!     !!!!  ",
-       "   !!!!!!    !!!!!  ",
-       "   !!!!!!   !!!!!!  ",
-       "   !!!!!!  !!!!!!!  ",
-       "     !!!!!!!!!!!!!  ",
-       "     !!!!!!!!!!!!!  ",
-       "     !!!!!!!!!!!!!  ",
-       "     !!!!!!!!!!!!!  ",
-       " !!!!!!!!!!!!!      ",
-       " !!!!!!!!!!!!!      ",
-       " !!!!!!!!!!!!!      ",
-       "                    "}
-acmap={"                    ",
-       "                    ",
-       "                !   ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-itmap={"                    ",
-       "                    ",
-       "    !!      !       ",
-       "    !!              ",
-       "                    ",
-       "                    ",
-       "                  ! ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={"                    ",
-       "   !!!!!!     !!#!  ",
-       "   !    !    !!  !  ",
-       "   !    !   !!   !  ",
-       "   !!!  !  !!  C !  ",
-       "     !  !!!!   C !  ",
-       "     !     <  CC !  ",
-       "     !     !  CC !  ",
-       "     !     !!!!!!!  ",
-       " !!!!!!!     !      ",
-       " #$$$$$$     !      ",
-       " !!!!!!!!!!!!!      ",
-       "                    "}
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-SetAttrib(enigma.GetItem(4,2),"invisible",FALSE)
-SetAttrib(enigma.GetItem(4,3),"invisible",FALSE)
-SetAttrib(enigma.GetItem(5,2),"invisible",FALSE)
-SetAttrib(enigma.GetItem(5,3),"invisible",FALSE)
-SetAttrib(enigma.GetItem(12,2),"invisible",FALSE)
-SetAttrib(enigma.GetItem(18,6),"invisible",FALSE)
-
-Signal ("it(4 2)","st(2 10)")
-Signal ("it(4 3)","st(3 10)")
-Signal ("it(5 2)","st(4 10)")
-Signal ("it(5 3)","st(5 10)")
-Signal ("it(12 2)","st(6 10)")
-Signal ("it(18 6)","st(7 10)")
-
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>
-

Copied: trunk/data/levels/enigma_vi/andreas30_3.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas30_2.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas30_2.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas30_3.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,58 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="The Stable" el:subtitle="" el:id="andreas30"/>
+      <el:version el:score="2" el:release="3" el:revision="3" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="02:07"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+-- Solvable in 35 pushes (or less?).
+
+wo["ShowMoves"] = true
+wo["ConserveLevel"] = false
+
+ti[" "] = {"fl_lawn_b"}
+ti["."] = {"fl_lawn"}
+ti["#"] = {"st_yellow"}
+ti["<"] = {"st_oneway_w"}
+ti["H"] = {"st_chess"}
+ti["O"] = {"st_oxyd", flavor = "a", oxydcolor = OXYD_GREEN}
+ti["door"] = {"st_door", "door%%", faces = "ew"}
+ti["trigger_i"] = {"it_trigger", target = "door%%"}
+ti["trigger_o"] = {"it_trigger", target = "door%%"} .. ti["."]
+ti["@"] = {"#ac_marble", adhesion = 1}
+
+wo(res.autotile(ti, {"A", "F", "door"}, {"a", "f", "trigger_i"}, {"g", "l", "trigger_o"}), " ", {
+       "....................",
+       "...######.....##O#..",
+       "...#ac  #...k## @#..",
+       "...#bd  #...##   #..",
+       "...###  #..##  H #..",
+       ".....#  ####   H #..",
+       ".....#     <  HH #l.",
+       ".....#     #  HH #..",
+       ".....#     #######..",
+       ".#######     #......",
+       ".OABCDEF     #......",
+       ".#############......",
+       "...................."})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>
+

Deleted: trunk/data/levels/enigma_vi/andreas34_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas34_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas34_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,148 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Procrustes" el:subtitle="" el:id="andreas34"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-       <el:dependency el:path="lib/libpuzzle" el:id="lib/libpuzzle" el:release="2" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="05:45"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Constructed with the help of BBE.
-
-levelh=13
-levelw=20
-
-mys="st-rock10"
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-function file_oxyd(x,y,f)
-  oxyd_default_flavor=f
-  oxyd(x,y)
-end
-
-function ac_blackball(x,y)
-  set_actor("ac-blackball",x+0.5,y+0.5)
-end
-
-function set_eternal_fire(x,y)
-  SendMessage(set_floor("fl-dunes", x, y, {eternal=TRUE, burnable=TRUE}), "setfire")
-end
-
-cells={}
-items={}
-actors={}
-stones={}
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-cells["!"]=cell{floor="fl-sand"}
-cells["#"]=cell{floor="fl-abyss"}
-if enigma.CreatingPreview then
-  cells["$"]=cell{floor="fl-hay", item="it-burnable_burning"}
-else
-  cells["$"]=cell{floor={"fl-dunes", {eternal=TRUE, burnable=TRUE, initfire=TRUE}}}
-end
-stones["!"]=cell{stone=mys}
-stones["-"]=cell{stone=mys}
-stones["I"]=cell{stone=mys}
-stones["("]=cell{stone=mys}
-stones[")"]=cell{stone=mys}
-stones["_"]=cell{stone=mys}
-stones["^"]=cell{stone=mys}
-stones["7"]=cell{stone=mys}
-stones["3"]=cell{stone=mys}
-stones["#"]=cell{parent={{file_oxyd,"d"}}}
-items["!"]=cell{item="it-magicwand"}
-items["E"]=cell{item="it-extinguisher"}
-actors["!"]=cell{parent={{ac_blackball}}}
-
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!$#$#$$#!",
-       "!!!!!!!!!!!!##$####!",
-       "!!!!!!!!!!!!$###$#$!",
-       "!!!!!!!!!!!!$$$$$##!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!",
-       "!####$$$$$!!!!!!!!!!",
-       "!$$$#$###$!!!!!!!!!!",
-       "!######$##!!!!!!!!!!",
-       "!#$$$$#$#$!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!!!"}
-   acmap={"                    ",
-          " !                  ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    "}
-  itmap={"                    ",
-         " !                E ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         " E                  ",
-         "                    "}
- stmap={"7-----------)#!#()#!",
-        "I                  #",
-        "I                  _",
-        "I                  ^",
-        "I                  #",
-        "I           7---)  _",
-        "I        7--3      I",
-        "^  (-----3         I",
-        "#                  I",
-        "_                  I",
-        "^                  I",
-        "#                  I",
-        "!#(--)#!#(---------3"}
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-oxyd_shuffle()
-
-puzzle({" # #    #",
-        "## ######",
-        " ### #   ",
-        "     ####"}, {2,2}, "bluepuzzle", "permutation", 2)
-puzzle({"##     ",
-        " # ### ",
-        "#### ##",
-        "#  # # "}, {11,7}, "bluepuzzle", "permutation", 2)
-
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="true"/>
-        <el:translation el:lang="de">Prokrustes</el:translation>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas34_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas34_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas34_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas34_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,64 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Procrustes" el:subtitle="" el:id="andreas34"/>
+      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
+      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="05:45"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_sand"}
+ti["."] = {"fl_abyss"}
+ti["#"] = {"st_brownmarble"}
+ti["O"] = {"st_oxyd", flavor = "d"}
+ti["E"] = {"it_extinguisher"} .. ti["."]
+ti["@"] = {"#ac_marble"} .. ti{"it_magicwand"}
+ti["P"] = {"st_puzzle", cluster = 1}
+ti["markedpuzzle"] = ti["P"] .. {"fl_sand", "puzzles%%#"}
+
+if wo["CreatingPreview"] then
+    ti["f"] = {"fl_hay"} .. ti{"it_burnable_burning"}
+else
+    ti["f"] = {"fl_dunes", eternal = true, burnable = true, initfire = true}
+end
+
+wo(res.autotile(ti, {"1", "4", "markedpuzzle"}), " ", {
+        "#############O#O##O#",
+        "#@          f.f.ffEO",
+        "#  1 1    1 ..f....#",
+        "# 2P 2P1PPP f...f.f#",
+        "#  2PP P    fffff..O",
+        "#      2PPP #####  #",
+        "#        ####      #",
+        "#  ####### P4      #",
+        "O....fffff  P PP4  #",
+        "#fff.f...f P3P4 P4 #",
+        "#......f.. 3  3 3  #",
+        "OEffff.f.f         #",
+        "#O####O#O###########"})
+
+st((no["puzzles%1#*"]:shuffle())[1]):pull_rotate(SOUTH)
+st((no["puzzles%2#*"]:shuffle())[1]):pull_rotate(EAST)
+st((no["puzzles%3#*"]:shuffle())[1]):pull_rotate(NORTH)
+st((no["puzzles%4#*"]:shuffle())[1]):pull_rotate(WEST)
+
+wo:shuffleOxyd()
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="true"/>
+        <el:translation el:lang="de">Prokrustes</el:translation>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vi/andreas35_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas35_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas35_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,53 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Checkmate II" el:subtitle="" el:id="andreas35"/>
-      <el:version el:score="1" el:release="1" el:revision="8" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.10">
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="true"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="01:06"/>
-    </el:info>
-    <el:luamain><![CDATA[
-ti[" "] = ti({"fl_bright", checkerboard = 0}) .. {"fl_dark", checkerboard = 1}
-ti["#"] = {"st_plaster"}
-ti["c"] = ti({"st_chess_white", checkerboard = 0}) .. {"st_chess_black", checkerboard = 1}
-ti["x"] = ti({"st_passage_black_frame", checkerboard = 0}) .. {"st_passage_white_frame", checkerboard = 1}
-ti["y"] = ti["x"] .. {"it_yinyang"}
-ti["o"] = ti({"st_oxyd", oxydcolor = OXYD_WHITE, checkerboard = 0}) .. {"st_oxyd", oxydcolor = OXYD_BLACK, checkerboard = 1}
-
-w, h = wo(ti, " ", {
- -- 01234567890123456789
-   "####################",
-   "#     yxxxxxxy     #",
-   "#     cccccccc     #",
-   "#     cccccccc     #",
-   "#     cccccccc     #",
-   "ox    cccccccc    xo",
-   "ox    cccccccc    xo",
-   "#     cccccccc     #",
-   "#     cccccccc     #",
-   "#     cccccccc     #",
-   "#     yxxxxxxy     #",
-   "####################"
-})
-
-wo:shuffleOxyd()
-
-wo[{4,6}] = {"ac_marble_black", owner=0}
-wo[{w-4, 6}] = {"ac_marble_white", owner=1}
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas35_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas35_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas35_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas35_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,50 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Checkmate II" el:subtitle="" el:id="andreas35"/>
+      <el:version el:score="1" el:release="2" el:revision="10" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="true"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="01:06"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = ti{"fl_bright", checkerboard = 0} .. {"fl_dark", checkerboard = 1}
+ti["#"] = {"st_flat"}
+ti["C"] = ti{"st_chess_white", checkerboard = 0} .. {"st_chess_black", checkerboard = 1}
+ti["X"] = ti{"st_passage_black_frame", checkerboard = 0} .. {"st_passage_white_frame", checkerboard = 1}
+ti["O"] = ti{"st_oxyd", oxydcolor = OXYD_WHITE, checkerboard = 0} .. {"st_oxyd", oxydcolor = OXYD_BLACK, checkerboard = 1}
+ti["@"] = ti{"ac_marble"}
+ti["%"] = ti{"ac_marble_white"}
+
+w, h = wo(ti, " ", {
+ -- 01234567890123456789
+   "####################",
+   "#     XXXXXXXX     #",
+   "#     CCCCCCCC     #",
+   "#     CCCCCCCC     #",
+   "#     CCCCCCCC     #",
+   "OX    CCCCCCCC    XO",
+   "OX  @ CCCCCCCC  % XO",
+   "#     CCCCCCCC     #",
+   "#     CCCCCCCC     #",
+   "#     CCCCCCCC     #",
+   "#     XXXXXXXX     #",
+   "####################"
+})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vi/andreas36_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas36_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas36_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,115 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="- Meditation -" el:subtitle="The Danaides" el:id="andreas36"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="01:00"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-
-function set_fire(x,y)
-    SendMessage(set_floor("fl-hay", x, y, {eternal = TRUE}), "setfire")
-end
-
-levelh=13
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-cells={}
-items={}
-actors={}
-stones={}
-
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-
-cells["!"]=cell{parent={{set_fire}}}
-cells["#"]=cell{floor="fl-gravel"}
-stones["!"]=cell{stone="st-rock6"}
-cells["$"]=cell{floor="fl-wood"}
-stones["#"]=cell{stone="st-greenbrown"}
-stones["$"]=cell{stone="st-oneway-w"}
-items["!"]=cell{item="it-hollow"}
-stones["%"]=cell{stone="st-oneway-s"}
-stones["&"]=cell{stone="st-oneway-e"}
-
-level={"!##################!",
-       "####################",
-       "####################",
-       "####$$$$$$$$$$$$####",
-       "####$$$$$$$$$$$$####",
-       "####$$$$$$$$$$$$####",
-       "####$$$$$$$$$$$$####",
-       "####$$$$$$$$$$$$####",
-       "####$$$$$$$$$$$$####",
-       "####$$$$$$$$$$$$####",
-       "####################",
-       "####################",
-       "!##################!"}
-itmap={"                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "     ! !    ! !     ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    ",
-       "                    "}
-stmap={" !!!!!!!!!!!!!!!!!! ",
-       "!!                !!",
-       "!                  !",
-       "!   #####  #####   !",
-       "!   $          &   !",
-       "!   # # #  # # #   !",
-       "!   # # #  # # #   !",
-       "!   $ # &  $ # &   !",
-       "!   # # #  # # #   !",
-       "!   #%#%#%%#%#%#   !",
-       "!                  !",
-       "!!                !!",
-       " !!!!!!!!!!!!!!!!!! "}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-
-set_actor("ac-whiteball-small",5.5,11.5,{player=0})
-set_actor("ac-whiteball-small",7.5,11.5,{player=0})
-set_actor("ac-whiteball-small",12.5,11.5,{player=0})
-set_actor("ac-whiteball-small",14.5,11.5,{player=0})
-
-enigma.AddConstantForce(0, 30.0)
-enigma.HoleForce = 1.5
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas36_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas36_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas36_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas36_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,55 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="- Meditation -" el:subtitle="The Danaides" el:id="andreas36"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="01:00"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["MeditationStrength"] = 1.5
+wo["GlobalForce"] = po(0, 30)
+
+ti[" "] = {"fl_gravel"}
+ti["."] = {"fl_wood"}
+ti["f"] = {"fl_hay", eternal = true, initfire = true}
+ti["#"] = {"st_purplegray"}
+ti["G"] = {"st_greenbrown"} .. ti["."]
+ti["v"] = {"st_oneway_s"} .. ti["."]
+ti[">"] = {"st_oneway_e"} .. ti["."]
+ti["<"] = {"st_oneway_w"} .. ti["."]
+ti["m"] = {"it_meditation"} .. ti["."]
+ti["@"] = {"#ac_pearl"}
+
+wo(ti, " ", {
+       "f##################f",
+       "##                ##",
+       "#                  #",
+       "#   GGGGG..GGGGG   #",
+       "#   <..........>   #",
+       "#   G.G.G..G.G.G   #",
+       "#   G.G.G..G.G.G   #",
+       "#   <mGm>..<mGm>   #",
+       "#   G.G.G..G.G.G   #",
+       "#   GvGvGvvGvGvG   #",
+       "#                  #",
+       "##   @ @    @ @   ##",
+       "f##################f"})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_vi/andreas37_2.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas37_2.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas37_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -3,21 +3,21 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Troy" el:subtitle="" el:id="andreas37"/>
-      <el:version el:score="2" el:release="2" el:revision="2" el:status="released"/>
+      <el:version el:score="2" el:release="2" el:revision="3" el:status="released"/>
       <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
-       <el:dependency el:path="lib/libmap" el:id="lib/libmap" el:release="1" el:preload="true"/>
       </el:compatibility>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:comments><el:code>Originally created with the help of BBE 1.05</el:code></el:comments>
       <el:score el:easy="-" el:difficult="01:37"/>
     </el:info>
     <el:luamain><![CDATA[
+
 wo["FollowGrid"] = true
 wo["FollowMethod"] = FOLLOW_SCROLL
-wo["SwampSinkSpeed"] = 2.0
+wo["SwampSinkTime"] = 3.5
 wo["ShowMoves"] = true
 
 ti[" "] = {"fl_bluegray"}
@@ -61,6 +61,7 @@
     "~~~~~~~~~~~~~~~~~~~~"})
 
 wo:shuffleOxyd()
+
  ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">

Deleted: trunk/data/levels/enigma_vi/andreas38_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas38_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas38_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,197 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Janus" el:subtitle="" el:id="andreas38"/>
-      <el:version el:score="1" el:release="1" el:revision="1" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="true"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="02:25"/>
-    </el:info>
-    <el:luamain><![CDATA[
--- Created with the help of BBE 1.05
-
-levelh=25
-levelw=20
-
-enigma.SlopeForce=30
-enigma.ElectricForce=30
-
-function file_oxyd(x,y,f)
-    oxyd_default_flavor=f
-    oxyd(x,y)
-end
-function ac_whiteball(x,y)
-  set_actor("ac-whiteball", x+0.5, y+0.5, {player=1})
-  set_item("it-yinyang", x, y)
-end
-function ac_blackball(x,y)
-  set_actor("ac-blackball", x+0.5, y+0.5, {player=0})
-  set_item("it-yinyang", x, y)
-end
-
-cells={}
-items={}
-actors={}
-stones={}
-actors[" "]=cell{}
-stones[" "]=cell{}
-cells[" "]=cell{}
-items[" "]=cell{}
-cells["!"]=cell{floor="fl-black"}
-cells["#"]=cell{floor="fl-rock"}
-cells["$"]=cell{floor="fl-white"}
-stones["!"]=cell{stone="st-rock2"}
-stones["#"]=cell{stone="st-door-h"}
-stones["$"]=cell{parent={{file_oxyd,"b"}}}
-stones["%"]=cell{stone="st-wood"}
-items[" "]=cell{item={"it-trigger", {invisible=TRUE}}}
-items["!"]=cell{item={"it-trigger", {invisible=TRUE}}}
-items["t"]=cell{item={"it-trigger", {invisible=FALSE}}}
-actors["#"]=cell{parent={{ac_blackball}}}
-actors["!"]=cell{parent={{ac_whiteball}}}
-
-level={"!!!!!!!!!!!!!!!!!!!!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "!!!!!!!!!!!!!!!!!!$!",
-       "#!################$#",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$!$$$$$$$$$$$$$$$$$$",
-       "$$$$$$$$$$$$$$$$$$$$"}
-   acmap={"                    ",
-          "                    ",
-          "  !                 ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                    ",
-          "                 #  ",
-          "                    ",
-          "                    "}
-  itmap={"                    ",
-         "       t!           ",
-         "             !      ",
-         "     t!  t          ",
-         "         !          ",
-         "   t   t   t!       ",
-         "                    ",
-         "     t   t!  !      ",
-         "       !    !       ",
-         "       t            ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "                    ",
-         "        !           ",
-         "     !      t       ",
-         "         !          ",
-         "          t   t     ",
-         "    !        !      ",
-         "      ! t ! t   t   ",
-         "         !          ",
-         "          t   t     ",
-         "                    ",
-         "        !   t       ",
-         "                    "}
- stmap={"!!!!!!!!!!!!!!!!!!!!",
-        "!          %     !$!",
-        "!                ! !",
-        "!                ! !",
-        "!         %      !#!",
-        "!        %   %   !#!",
-        "!     %        % !#!",
-        "!                !#!",
-        "!         %      !#!",
-        "!             %  !#!",
-        "!          %     !#!",
-        "!                !#!",
-        "!#!!!!!!!!!!!!!!!!#!",
-        "!#!                !",
-        "!#!                !",
-        "!#!                !",
-        "!#!    %    %      !",
-        "!#!   %  %         !",
-        "!#!                !",
-        "!#!    %           !",
-        "!#!       %        !",
-        "! !          %     !",
-        "! !   %            !",
-        "!$!        %       !",
-        "!!!!!!!!!!!!!!!!!!!!"}
-
-create_world_by_map(level)
-draw_map(0,0,stmap,stones)
-draw_map(0,0,itmap,items)
-draw_map(0,0,acmap,actors)
-
-Signal ("it(8 14)","st(1 12)")
-Signal ("it(5 15)","st(1 13)")
-Signal ("it(9 16)","st(1 14)")
-Signal ("it(4 18)","st(1 15)")
-Signal ("it(13 18)","st(1 16)")
-Signal ("it(6 19)","st(1 17)")
-Signal ("it(10 19)","st(1 18)")
-Signal ("it(9 20)","st(1 19)")
-Signal ("it(8 23)","st(1 20)")
-Signal ("it(8 1)","st(18 4)")
-Signal ("it(13 2)","st(18 5)")
-Signal ("it(6 3)","st(18 6)")
-Signal ("it(9 4)","st(18 7)")
-Signal ("it(12 5)","st(18 8)")
-Signal ("it(13 7)","st(18 9)")
-Signal ("it(10 7)","st(18 10)")
-Signal ("it(12 8)","st(18 11)")
-Signal ("it(7 8)","st(18 12)")
-
-oxyd_shuffle()
-
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>
-

Copied: trunk/data/levels/enigma_vi/andreas38_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas38_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas38_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas38_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,66 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Janus" el:subtitle="" el:id="andreas38"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="true"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="02:25"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti["  "] = {"fl_rock"} .. ti{"it_trigger", invisible = true}
+ti[". "] = {"fl_dark"} .. ti{"it_trigger", invisible = true}
+ti[", "] = {"fl_bright"} .. ti{"it_trigger", invisible = true}
+ti[" #"] = {"st_darkgray"}
+ti[" W"] = {"st_box"}
+ti[" X"] = {"st_oxyd", flavor = "b", oxydcolor = OXYD_PURPLE}
+ti[" t"] = {"it_trigger"}
+ti[" @"] = {"#ac_marble"} .. ti{"it_yinyang"}
+ti[" %"] = {"#ac_marble_white"} .. ti{"it_yinyang"}
+ti["door"] = {"st_door", "door%%", faces = "sn"}
+ti["trigger"] = {"it_trigger", target = "door%%", invisible = true}
+
+wo(res.composer(res.autotile(ti, {" a", " r", "trigger"}, {" A", " R", "door"})), "  ", {
+  ".#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#",
+  ".#. . . . . . .t.j. . .W. . . . . .#,X.#",
+  ".#. .%. . . . . . . . . . .k. . . .#, .#",
+  ".#. . . . .t.l. . .t. . . . . . . .#, .#",
+  ".#. . . . . . . . .m.W. . . . . . .#,J.#",
+  ".#. . .t. . . .t. .W. .t.n.W. . . .#,K.#",
+  ".#. . . . . .W. . . . . . . . .W. .#,L.#",
+  ".#. . . . .t. . . .t.p. . .o. . . .#,M.#",
+  ".#. . . . . . .r. . .W. .q. . . . .#,N.#",
+  ".#. . . . . . .t. . . . . . .W. . .#,O.#",
+  ".#. . . . . . . . . . .W. . . . . .#,P.#",
+  ".#. . . . . . . . . . . . . . . . .#,Q.#",
+  " #.A # # # # # # # # # # # # # # # #,R #",
+  ",#.B,#, , , , , , , , , , , , , , , , ,#",
+  ",#.C,#, , , , , ,a, , , , , , , , , , ,#",
+  ",#.D,#, , ,b, , , , , , ,t, , , , , , ,#",
+  ",#.E,#, , , , ,W, ,c, , ,W, , , , , , ,#",
+  ",#.F,#, , , ,W, , ,W,t, , , ,t, , , , ,#",
+  ",#.G,#, ,d, , , , , , , , ,e, , , , , ,#",
+  ",#.H,#, , , ,f,W,t, ,g, ,t, , , ,t, , ,#",
+  ",#.I,#, , , , , , ,h,W, , , , , , , , ,#",
+  ",#. ,#, , , , , , , ,t, , ,W,t, , , , ,#",
+  ",#. ,#, , , ,W, , , , , , , , , , ,@, ,#",
+  ",#.X,#, , , , , ,i, , ,W,t, , , , , , ,#",
+  ",#,#,#,#,#,#,#,#,#,#,#,#,#,#,#,#,#,#,#,#"})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>
+

Deleted: trunk/data/levels/enigma_vi/andreas39_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/andreas39_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas39_1.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,82 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Phaeton" el:subtitle="" el:id="andreas39"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.0">
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="00:39" el:difficult="00:40"/>
-    </el:info>
-    <el:luamain><![CDATA[
-
-levelh=13
-levelw=191
-
-create_world(levelw, levelh)
-
-draw_border("st-rock5")
-fill_floor("fl-bluegray",0,0,levelw,levelh)
-fill_stones("st-yellow", 0, 0, levelw, 5)
-fill_stones("st-blue-sand", 0, 8, levelw, 5)
-fill_stones("st-rock5", 7, 6, levelw - 8, 1)
-fill_stones("st-rock5", 0, 4, 8, 1)
-fill_stones("st-rock5", 0, 8, 8, 1)
-fill_floor("fl-marble", 0, 4, 8, 5)
-
-passenger = set_stone("st-lightpassenger", 3, 5, {interval = 0.04})
-set_stone("st-laser-e", 0, 5, {name="laser1"})
-if difficult then
-  set_stone("st-switch", 0, 7, {action="on", target="laser1"})
-else
-  set_stone("st-switch", 0, 7, {action="onoff", target="laser1"})
-end
-mainactor = set_actor("ac-blackball", 3.5, 6.5, {player=0})
-AddRubberBand(mainactor, passenger, 30, 1)
-set_item("it-coin1", 1, 7)
-set_item("it-magicwand", 2, 7)
-set_item("it-cherry", 3, 7)
-set_item("it-wrench", 4, 7)
-set_item("it-coin1", 5, 7)
-set_item("it-spring2", 6, 7)
-
-fill_floor("fl-water", 86, 7, 7, 1)
-
-set_stone("st-laser-w", levelw - 1, 5, {on = TRUE, name = "laser2"})
-if difficult then
-  set_stone("st-switch", levelw - 1, 7, {action = "off", target = "laser2"})
-else
-  set_stone("st-switch", levelw - 1, 7, {action = "onoff", target = "laser2"})
-end
-set_stone("st-turnstile", levelw - 6, 4)
-set_stone("st-turnstile-s", levelw - 6, 5)
-kill_stone(levelw - 5, 4)
-kill_stone(levelw - 6, 6)
-kill_stone(levelw - 7, 4)
-kill_stone(levelw - 7, 3)
-kill_stone(levelw - 6, 3)
-kill_stone(levelw - 5, 3)
-set_stone("st-knight", 89, 4)
-set_stone("st-knight", 89, 3)
-set_stone("st-knight", 89, 2)
-
-set_stone("st-oxyd", 89, 1, {flavor = "d", color = "3"})
-set_stone("st-oxyd",  0, 6, {flavor = "d", color = "3"})
-
-enigma.ConserveLevel = FALSE
-
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/andreas39_2.xml (from rev 1557, trunk/data/levels/enigma_vi/andreas39_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/andreas39_1.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/andreas39_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -0,0 +1,76 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Phaeton" el:subtitle="" el:id="andreas39"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
+      <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2006, 2009 Andreas Lochmann</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="00:39" el:difficult="00:40"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+wo["ConserveLevel"] = false
+
+ti[" "] = {"fl_bluegray"}
+ti["."] = {"fl_marble"}
+ti["~"] = {"fl_water"}
+ti["A"] = {"st_yellow"}
+ti["B"] = {"st_bluesand"}
+ti["#"] = {"st_tigris"}
+ti["C"] = {"st_tigris"} .. ti["."]
+ti["P"] = {"st_lightpassenger", "passenger", interval = 0.04} .. ti["."]
+ti[">"] = {"st_laser", "laser1", orientation = EAST} .. ti["."]
+ti["<"] = {"st_laser", "laser2", orientation = WEST, state = ON}
+ti["O"] = {"st_oxyd", flavor = "d", oxydcolor = OXYD_YELLOW} .. ti["."]
+ti["Q"] = {"st_oxyd", flavor = "d", oxydcolor = OXYD_YELLOW}
+ti["T"] = {"st_turnstile"}
+ti["S"] = {"st_turnstilearm_s"}
+ti["K"] = {"st_knight"}
+
+if wo["IsDifficult"] then
+    ti["1"] = {"st_switch", action = "on", target = "laser1"} .. ti["."]
+    ti["2"] = {"st_switch", action = "off", target = "laser2"}
+else
+    ti["1"] = {"st_switch", target = "laser1"} .. ti["."]
+    ti["2"] = {"st_switch", target = "laser2"}
+end
+
+ti["@"] = {"#ac_marble", "mainactor"} .. ti["."]
+ti["c"] = {"it_coin_s"} .. ti["."]
+ti["m"] = {"it_magicwand"} .. ti["."]
+ti["h"] = {"it_cherry"} .. ti["."]
+ti["w"] = {"it_wrench"} .. ti["."]
+ti["s"] = {"it_spring_drop"} .. ti["."]
+
+wo(ti, " ", {
+  "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
+  "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
+  "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
+  "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA   AAAA",
+  "CCCCCCCCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA T AAAA",
+  ">..P....                                                                                                                                                                                 S    <",
+  "O.. at ....################################################################################################################################################################################# #####",
+  "1cmhwcs.                                                                              ~~~~~~~                                                                                                 2",
+  "CCCCCCCCBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",
+  "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",
+  "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",
+  "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",
+  "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB"})
+
+wo:add({"ot_rubberband", anchor1 = "mainactor", anchor2 = "passenger", strength = 30, length = 1})
+
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_vi/index.xml
===================================================================
--- trunk/data/levels/enigma_vi/index.xml	2009-02-26 21:38:04 UTC (rev 1557)
+++ trunk/data/levels/enigma_vi/index.xml	2009-02-27 17:12:07 UTC (rev 1558)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="37" title="Enigma VI"/>
+  <info enigma="1.00" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="38" title="Enigma VI"/>
 
   <attributes/>
 
@@ -13,7 +13,7 @@
     <level _seq="5" _title="Pac Marble" _xpath="./andreas22_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas22" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="6" _title="Laser Splitting" _xpath="./luc29_2" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc29" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="7" _title="No Memory" _xpath="./edward01_1" author="Edward" ctrl="force" easy="false" id="edward01" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="8" _title="Orbitting" _xpath="./andreas26_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas26" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="8" _title="Orbitting" _xpath="./andreas26_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas26" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="9" _title="Im-pull-se" _xpath="./ralf07_2" author="Ralf Westram" ctrl="force" easy="false" id="ralf07" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="10" _title="Meditation Disturbance" _xpath="./ral04_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060429ral006" rel="2" rev="143" score="1" target="time" unit="duration"/>
     <level _seq="11" _title="Cold Way" _xpath="./raoul21_1" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul21" rel="1" rev="1" score="1" target="time" unit="duration"/>
@@ -26,10 +26,10 @@
     <level _seq="18" _title="Evil" _xpath="./spaceman04_1" author="Spaceman" ctrl="force" easy="false" id="spaceman4" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Random space" _xpath="./edward21_1" author="Edward" ctrl="force" easy="true" id="edward21" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="- Meditation -" _xpath="./alain25_2" author="Alain Busser + Raoul Bourquin" ctrl="force" easy="true" id="alain25" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="21" _title="Checkmate I" _xpath="./andreas29_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas29" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="21" _title="Checkmate I" _xpath="./andreas29_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas29" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="22" _title="Edwards Second Level" _xpath="./edward02_1" author="Edward" ctrl="force" easy="false" id="edward02" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="23" _title="Prepare Your Defense" _xpath="./duffy132_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy132" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="24" _title="The Stable" _xpath="./andreas30_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas30" rel="2" rev="2" score="2" target="time" unit="duration"/>
+    <level _seq="24" _title="The Stable" _xpath="./andreas30_3" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas30" rel="3" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="25" _title="Oxydrings" _xpath="./raoul13_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul13" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="26" _title="Dialers" _xpath="./edward05_1" author="Edward" ctrl="force" easy="true" id="edward05" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="27" _title="Persecution Mania" _xpath="./ral12_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060911ral294" rel="2" rev="142" score="1" target="time" unit="duration"/>
@@ -39,17 +39,17 @@
     <level _seq="31" _title="Zeus" _xpath="./raoul19_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul19" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Sisyphus" _xpath="./nat13_1" author="Nat Pryce" ctrl="force" easy="false" id="nat13" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Ben Hur" _xpath="./ral13_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20061011ral390" rel="1" rev="58" score="1" target="time" unit="duration"/>
-    <level _seq="34" _title="Troy" _xpath="./andreas37_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas37" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="35" _title="Phaeton" _xpath="./andreas39_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas39" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="36" _title="Procrustes" _xpath="./andreas34_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas34" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="34" _title="Troy" _xpath="./andreas37_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas37" rel="2" rev="3" score="2" target="time" unit="duration"/>
+    <level _seq="35" _title="Phaeton" _xpath="./andreas39_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas39" rel="2" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="36" _title="Procrustes" _xpath="./andreas34_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas34" rel="2" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Ariadne" _xpath="./andreas40_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas40" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="38" _title="Janus" _xpath="./andreas38_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas38" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="38" _title="Janus" _xpath="./andreas38_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas38" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="39" _title="Odyssey" _xpath="./ant39_1" author="Petr Machata" ctrl="force" easy="false" id="ant39" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="40" _title="- Meditation -" _xpath="./andreas36_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas36" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="40" _title="- Meditation -" _xpath="./andreas36_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas36" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="41" _title="Laserpowered" _xpath="./raoul20_2" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul20" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="42" _title="Basketball" _xpath="./ral03_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060213ral005" rel="2" rev="43" score="2" target="time" unit="duration"/>
     <level _seq="43" _title="Edwards Mountain" _xpath="./edward11_1" author="Edward" ctrl="force" easy="true" id="edward11" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="44" _title="Dancing on Light Beams" _xpath="./andreas28_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas28" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="44" _title="Dancing on Light Beams" _xpath="./andreas28_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas28" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="45" _title="Wormhole Madness!" _xpath="./edward24_1" author="Edward" ctrl="force" easy="false" id="edward24" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="46" _title="Alcatraz" _xpath="./ralf14_1" author="Ralf Westram" ctrl="force" easy="true" id="ralf14" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="47" _title="Chess, Bugs &amp; Rock'n'Roll" _xpath="./andreas31_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas31" rel="2" rev="12" score="1" target="time" unit="duration"/>
@@ -57,7 +57,7 @@
     <level _seq="49" _title="Simple Space" _xpath="./ulf02_1" author="Ulf Stegemann" ctrl="force" easy="false" id="20060628ulf002" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="50" _title="Hot Meditation" _xpath="./ral08_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060527ral010" rel="1" rev="42" score="1" target="time" unit="duration"/>
     <level _seq="51" _title="Just a Maze?" _xpath="./duffy12_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy12" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="52" _title="Checkmate II" _xpath="./andreas35_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas35" rel="1" rev="8" score="1" target="time" unit="duration"/>
+    <level _seq="52" _title="Checkmate II" _xpath="./andreas35_2" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas35" rel="2" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="53" _title="Bodyguard" _xpath="./ral10_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060730ral012" rel="2" rev="106" score="1" target="time" unit="duration"/>
     <level _seq="54" _title="be quick or be dead" _xpath="./illmind12_1" author="illmind" ctrl="force" easy="true" id="illmind12" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="55" _title="Puzzle Puzzles" _xpath="./raoul26_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul26" rel="1" rev="26" score="1" target="time" unit="duration"/>



From raoul at mail.berlios.de  Fri Feb 27 18:18:22 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Fri, 27 Feb 2009 18:18:22 +0100
Subject: [Enigma-game-svn] r1559 - in trunk/data/levels: enigma_cross
	enigma_iv
Message-ID: <200902271718.n1RHIMHH017878@sheep.berlios.de>

Author: raoul
Date: 2009-02-27 18:18:21 +0100 (Fri, 27 Feb 2009)
New Revision: 1559

Modified:
   trunk/data/levels/enigma_cross/newlevels.xml
   trunk/data/levels/enigma_iv/index.xml
   trunk/data/levels/enigma_iv/raoul10_2.xml
Log:
-> Missing SinkTime update for level raoul10



Modified: trunk/data/levels/enigma_cross/newlevels.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels.xml	2009-02-27 17:12:07 UTC (rev 1558)
+++ trunk/data/levels/enigma_cross/newlevels.xml	2009-02-27 17:18:21 UTC (rev 1559)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="36" title="Enigma 1.00 new"/>
+  <info enigma="1.00" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="37" title="Enigma 1.00 new"/>
 
   <attributes/>
 
@@ -86,7 +86,7 @@
     <level _seq="78" _title="Limited Supplies" _xpath="enigma_iv/duffy130_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy130" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="79" _title="Patterns of Impulse" _xpath="enigma_iv/andreas11_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas11" rel="2" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="Pull it!" _xpath="enigma_iv/luc14_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc14" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="81" _title="Sleeping Serpent" _xpath="enigma_iv/raoul10_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul10" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="81" _title="Sleeping Serpent" _xpath="enigma_iv/raoul10_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul10" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="82" _title="How solid?" _xpath="enigma_iv/andreas03_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas03" rel="2" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="83" _title="Cluenigma" _xpath="enigma_iv/alain12_1" author="Alain Busser" ctrl="force" easy="false" id="alain12" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="84" _title="The Flagstone Reaper" _xpath="enigma_iv/andreas09_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas09" rel="2" rev="5" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/index.xml
===================================================================
--- trunk/data/levels/enigma_iv/index.xml	2009-02-27 17:12:07 UTC (rev 1558)
+++ trunk/data/levels/enigma_iv/index.xml	2009-02-27 17:18:21 UTC (rev 1559)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="33" title="Enigma IV"/>
+  <info enigma="1.00" group="Enigma" location="10500" network="false" owner="Enigma Team" release="1" revision="34" title="Enigma IV"/>
 
   <attributes/>
 
@@ -64,7 +64,7 @@
     <level _seq="56" _title="The Builder" _xpath="./ss09_2" author="Sven Siggelkow" ctrl="force" easy="false" id="ss9" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="57" _title="Run Like Hell" _xpath="./ralf09_2" author="Ralf Westram" ctrl="force" easy="false" id="ralf09" rel="2" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="What a Mess" _xpath="./duffy68_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy68" rel="2" rev="3" score="2" target="time" unit="duration"/>
-    <level _seq="59" _title="Sleeping Serpent" _xpath="./raoul10_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul10" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="59" _title="Sleeping Serpent" _xpath="./raoul10_2" author="Raoul Bourquin" ctrl="force" easy="false" id="raoul10" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="60" _title="- No Meditation -" _xpath="./ralf08_2" author="Ralf Westram" ctrl="force" easy="false" id="ralf08" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="61" _title="Go!" _xpath="./ant02_1" author="Petr Machata" ctrl="force" easy="false" id="ant02" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="62" _title="How solid?" _xpath="./andreas03_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas03" rel="2" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/raoul10_2.xml
===================================================================
--- trunk/data/levels/enigma_iv/raoul10_2.xml	2009-02-27 17:12:07 UTC (rev 1558)
+++ trunk/data/levels/enigma_iv/raoul10_2.xml	2009-02-27 17:18:21 UTC (rev 1559)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Sleeping Serpent" el:subtitle="" el:id="raoul10"/>
-      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
       <el:author  el:name="Raoul Bourquin" el:email="raoul at users.berlios.de" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Raoul Bourquin</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -14,7 +14,7 @@
     <el:luamain><![CDATA[
 wo["FollowMethod"] = FOLLOW_SCROLL
 wo["ConserveLevel"] = false
-wo["WaterSinkSpeed"] = 5.0
+wo["WaterSinkTime"] = 1.4
 
 ti[" "] = {"fl_dark", name="the_floor#"}
 ti["*"] = {"st_puzzle", cluster=1}



From ral at mail.berlios.de  Sat Feb 28 01:38:28 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 28 Feb 2009 01:38:28 +0100
Subject: [Enigma-game-svn] r1560 - in trunk: data data/schemas src src/items
	src/others src/stones
Message-ID: <200902280038.n1S0cSQS005068@sheep.berlios.de>

Author: ral
Date: 2009-02-28 01:38:27 +0100 (Sat, 28 Feb 2009)
New Revision: 1560

Modified:
   trunk/data/api1init.lua
   trunk/data/schemas/objects.xml
   trunk/src/items/Bomb.cc
   trunk/src/items/Crack.cc
   trunk/src/items/Dynamite.cc
   trunk/src/items/SimpleItems.cc
   trunk/src/others/CannonBall.cc
   trunk/src/stones/BoulderStone.cc
   trunk/src/stones/FakeStone.cc
   trunk/src/stones/FakeStone.hh
   trunk/src/stones/GlassStones.cc
   trunk/src/stones/JambStone.cc
   trunk/src/stones/OxydStone.cc
   trunk/src/stones/SimpleStones.cc
   trunk/src/stones/SimpleStones.hh
   trunk/src/stones/StandardStones.cc
   trunk/src/stones/StandardStones.hh
   trunk/src/stones/StoneImpulse.cc
   trunk/src/world.cc
Log:
Trunk 1.1: new API reengineering
- support old API get_kind for fake stone
- st_beads: no more sticky (similar to oneway)
- drunken algorithm: add a smaller 5 Hz randomness
- rename internal message "_spitter" -> "_cannonball"
- st_spitter:
  - add attribute "secure", default false
  - break on cannonball if not secure, and leave an it_meditation
- st_jamb: react on matching colors instead of matching marble id
- st_brownpyramide add feature: "break" on cannonball
- st_yinyang add feature: activate on cannonball
- st_stoneimpulse add feature:
  - break on cannonball in non Enigma modes
  - pulse on cannonball in Enigma mode
- st_boulder add feature: just in PerOxyd mode break on cannonball


Modified: trunk/data/api1init.lua
===================================================================
--- trunk/data/api1init.lua	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/data/api1init.lua	2009-02-28 00:38:27 UTC (rev 1560)
@@ -682,6 +682,10 @@
         local obj = enigma._MakeObject("st_fake_oxydd")
         enigma._SetAttrib(obj, "state", 1)
         return obj
+    elseif name == "st-spitter" then
+        local obj = enigma._MakeObject("st_spitter")
+        enigma._SetAttrib(obj, "secure", true)
+        return obj
     end
     newname = RenamingObjectsOld2New[name]
 
@@ -754,6 +758,14 @@
     if _newname == "fl_slope" then
         return "fl-gradient"
     end
+    if _newname == "st_fake_oxydc" then
+        local state = enigma._GetAttrib(obj, "state")
+        if state == 0 then
+            return "st-likeoxydc"
+        else
+            return "st-likeoxydc-open"
+        end
+    end
     if _oldname ~= nil then
         return _oldname
     else

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/data/schemas/objects.xml	2009-02-28 00:38:27 UTC (rev 1560)
@@ -133,6 +133,7 @@
     <msg name="_dispenser" type="nil"/>
     <msg name="_booze" type="nil"/>
     <msg name="_brush" type="nil"/>
+    <msg name="_cannonball" type="nil"/>
     <msg name="_capture" type="nil"/>
     <msg name="_checkflood" type="nil"/>
     <msg name="_disappear" type="nil"/>
@@ -159,7 +160,6 @@
     <msg name="_shatter" type="nil"/>
     <msg name="_shield" type="nil"/>
     <msg name="_shogun" type="int"/>
-    <msg name="_spitter" type="nil"/>
     <msg name="_start" type="nil"/>
     <msg name="_suicide" type="nil"/>
     <msg name="_trigger" type="bool"/>
@@ -1005,6 +1005,7 @@
       <msg name="turn"/>
       <msg name="turnback"/>
       <msg name="flip"/>
+      <msg name="_cannonball"/>
     </object>
     <object name="st_boulder_w">
       <attr name="orientation" value="0"/>
@@ -1117,7 +1118,9 @@
     </object>
     <object name="st_brownie"/>
     <object name="st_brownmarble"/>
-    <object name="st_brownpyramide"/>
+    <object name="st_brownpyramide">
+      <msg name="_cannonball"/>
+    </object>
     <object name="st_camouflage">
       <attr name="hollow" rw="r"/>
     </object>
@@ -1500,7 +1503,7 @@
       <msg name="peepall"/>
       <msg name="shuffle"/>
       <msg name="_trigger"/>
-      <msg name="_spitter"/>
+      <msg name="_cannonball"/>
       <msg name="_init"/>
       <msg name="open"/>
       <msg name="close"/>
@@ -1731,6 +1734,8 @@
       <attr name="hit_distortion_xy"/>
       <attr name="hit_distortion_yx"/>
       <attr name="hit_distortion_yy"/>
+      <attr name="secure"/>
+      <msg name="_cannonball"/>
     </object>
     <object name="st_stoneimpulse">
       <attr name="hollow"/>
@@ -1740,6 +1745,7 @@
       <msg name="signal"/>
       <msg name="ignite"/>
       <msg name="_model_reanimated"/>
+      <msg name="_cannonball"/>
       <msg name="_init"/>
       <msg name="_trigger"/>
     </object>
@@ -1889,6 +1895,7 @@
     <object name="st_yinyang">
       <attr name="instant"/>
       <attr name="loop"/>
+      <msg name="_cannonball"/>
     </object>
     <object name="st_yinyang_instant">
       <attr name="instant" value="true"/>

Modified: trunk/src/items/Bomb.cc
===================================================================
--- trunk/src/items/Bomb.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/items/Bomb.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -47,7 +47,7 @@
     }
     
     Value Bomb::message(const Message &m) {
-        if (m.message == "ignite"  || m.message == "_explosion"|| m.message == "_spitter") {
+        if (m.message == "ignite"  || m.message == "_explosion"|| m.message == "_cannonball") {
             if (isDisplayable())
                 burn();
             return Value();

Modified: trunk/src/items/Crack.cc
===================================================================
--- trunk/src/items/Crack.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/items/Crack.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -37,7 +37,7 @@
         if (m.message == "crack" || m.message == "ignite" ) {
             crack();
             return Value();
-        } else if (m.message == "heat" || m.message == "_explosion" || m.message == "_spitter") {
+        } else if (m.message == "heat" || m.message == "_explosion" || m.message == "_cannonball") {
             sound_event("crack");
             replace("it_debris");
             return true;

Modified: trunk/src/items/Dynamite.cc
===================================================================
--- trunk/src/items/Dynamite.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/items/Dynamite.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -38,7 +38,7 @@
             if (isDisplayable())
                 burn();
             return Value();
-        } else if (m.message == "explode" || m.message == "_spitter") { // currently unused in c++ code
+        } else if (m.message == "explode" || m.message == "_cannonball") { // currently unused in c++ code
             if (isDisplayable())
                 explode();
             return Value();

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/items/SimpleItems.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -130,7 +130,7 @@
     }
     
     Value Explosion::message(const Message &m) {
-        if (m.message == "_spitter") {
+        if (m.message == "_cannonball") {
             state = 3;
             return Value();
         }

Modified: trunk/src/others/CannonBall.cc
===================================================================
--- trunk/src/others/CannonBall.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/others/CannonBall.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -36,12 +36,12 @@
     void CannonBall::animcb() {
         GridPos p(pos);
         if (Stone *st = GetStone(p)) {
-            SendMessage (st, "_spitter");
+            SendMessage (st, "_cannonball");
         } else if (Item *it = GetItem(p)) {
             if (!has_flags(it, itf_indestructible))
                 SetItem (p, MakeItem("it_explosion_debris"));
             else
-                SendMessage (it, "_spitter");
+                SendMessage (it, "_cannonball");
         } else if (Floor *fl = GetFloor(p)) {
             if (fl->is_destructible())
                 SetItem (p, MakeItem("it_explosion_debris"));

Modified: trunk/src/stones/BoulderStone.cc
===================================================================
--- trunk/src/stones/BoulderStone.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/BoulderStone.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -54,6 +54,9 @@
         } else if (m.message == "flip" && state != FALLING && isDisplayable()) {
             setDir(reverse(getDir()));
             return Value();
+        } else if (m.message == "_cannonball" && server::GameCompatibility == enigma::GAMET_PEROXYD) {
+            KillStone(get_pos());
+            return Value();
         }
         return Stone::message(m);
     }

Modified: trunk/src/stones/FakeStone.cc
===================================================================
--- trunk/src/stones/FakeStone.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/FakeStone.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -32,6 +32,16 @@
         return "st_fake";
     }
     
+    const char *FakeStone::get_kind() const {
+        std::string fl = getAttr("flavor").to_string();
+        if (fl == "quake") return "st_fake_quake";
+        else if (fl == "oxyda") return "st_fake_oxyda";
+        else if (fl == "oxydb") return "st_fake_oxydb";
+        else if (fl == "oxydc") return "st_fake_oxydc";
+        else if (fl == "oxydd") return "st_fake_oxydd";
+        else if (fl == "oxyde") return "st_fake_oxyde";
+    }
+    
     void FakeStone::setAttr(const string& key, const Value &val) {
         if (key == "flavor") {
             std::string fl = val.to_string();

Modified: trunk/src/stones/FakeStone.hh
===================================================================
--- trunk/src/stones/FakeStone.hh	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/FakeStone.hh	2009-02-28 00:38:27 UTC (rev 1560)
@@ -54,6 +54,7 @@
         
         // Object interface
         virtual std::string getClass() const;
+        virtual const char *get_kind() const;
         virtual void setAttr(const string& key, const Value &val);
         virtual Value getAttr(const std::string &key) const;
         

Modified: trunk/src/stones/GlassStones.cc
===================================================================
--- trunk/src/stones/GlassStones.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/GlassStones.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -84,7 +84,7 @@
     }
     
     bool GlassStone::is_sticky(const Actor *a) const {
-        return !is_floating() && !a->is_invisible();
+        return !is_floating() && !a->is_invisible() && state != BEADS;
     }
     
     bool GlassStone::is_transparent(Direction d) const {

Modified: trunk/src/stones/JambStone.cc
===================================================================
--- trunk/src/stones/JambStone.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/JambStone.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -42,8 +42,7 @@
                 
                 Actor *a = dynamic_cast<Actor *>(o);
                 int c = getAttr("color");
-                if ((c == BLACK && a && get_id(a) == ac_marble_black) || 
-                        (c == WHITE && a && get_id(a) == ac_marble_white) ||
+                if ((a && a->getAttr("color") && a->getAttr("color") == c) || 
                         (m.sender->getObjectType() != Object::ITEM && m.message == "signal")) {
                     if (p.y == sender->get_pos().y) {
                         SendMessage (GetStone (move (p, EAST)),  "signal", 1.0);

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/OxydStone.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -869,7 +869,7 @@
         } else if (m.message == "shuffle") {
             shuffleColors();
             return Value();
-        } else if ((m.message == "_trigger"  && m.value.to_bool()) || m.message == "_spitter") {
+        } else if ((m.message == "_trigger"  && m.value.to_bool()) || m.message == "_cannonball") {
             tryOpen();   // just internal messages on displayable oxyds
             return Value();
         } else if (m.message == "_init") {

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/SimpleStones.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -83,6 +83,22 @@
         }
     }
 
+/* -------------------- BrownPyramide stone -------------------- */
+    BrownPyramide::BrownPyramide() : Stone ("st_brownpyramide") {
+    }
+    
+    std::string BrownPyramide::getClass() const {
+        return "st_brownpyramide";
+    }
+
+    Value BrownPyramide::message(const Message &m) {
+        if (m.message == "_cannonball") {
+            KillStone(get_pos());
+            return Value();
+        }
+        return Stone::message(m);
+    }
+    
 /* -------------------- Charge stone -------------------- */
 
     ChargeStone::ChargeStone(double charge) : Stone ("st_charge") {
@@ -230,20 +246,33 @@
         // block any calls
     }
     
+    Value SpitterStone::message(const Message &m) {
+        if (m.message == "_cannonball") {
+            if (!getAttr("secure").to_bool() || server::GameCompatibility == enigma::GAMET_PEROXYD) {
+                state = BREAKING;
+                init_model();
+            }
+            return Value();
+        }
+        return Stone::message(m);
+    }
+    
     void SpitterStone::init_model() {
         if (state == IDLE)
             set_model("st_spitter");
         else if (state == LOADING)
             set_anim("st_spitter_loading");
+        else if (state == SPITTING)
+            set_anim("st_spitter_spitting");
         else
-            set_anim("st_spitter_spitting");
+            set_anim("st_break_plain-anim");
     }
     
     void SpitterStone::animcb() {
         switch (state) {
-            case IDLE:
+            case IDLE :
                 ASSERT(false, XLevelRuntime, "SpitterStone: animcb called with inconsistent state"); 
-            case LOADING: {
+            case LOADING : {
                 Other *cb = dynamic_cast<Other *>(MakeObject("ot_cannonball"));
                 ecl::V2 center  = get_pos().center();
                 cb->setAttr("$position", center);
@@ -254,11 +283,15 @@
                 init_model();
                 break;
             }
-            case SPITTING:
+            case SPITTING : 
                 state = IDLE;
                 init_model();
                 break;
-            }
+            case BREAKING :
+                SetItem(get_pos(), MakeItem("it_meditation"));
+                KillStone(get_pos());
+                break;
+        }
     }
 
     void SpitterStone::actor_hit (const StoneContact &sc) {
@@ -290,6 +323,19 @@
         return "st_yinyang";
     }
     
+    Value YinyangStone::message(const Message &m) {
+        if (m.message == "_cannonball") {
+            if (state == IDLE) {
+                state = ACTIVE;
+                init_model();
+                if (getAttr("instant").to_bool())
+                    switchPlayer();
+            }
+            return Value();
+        }
+        return Stone::message(m);
+    }
+    
     int YinyangStone::maxState() const {
         return 2;
     }
@@ -349,6 +395,7 @@
         BootRegister(new BlurStone(0), "st_blur_straight");
         BootRegister(new BlurStone(1), "st_blur_cross");
         BootRegister(new BlurStone(2), "st_blur_magic");
+        BootRegister(new BrownPyramide(), "st_brownpyramide");
         BootRegister(new ChargeStone(0.0), "st_charge");
         BootRegister(new ChargeStone(0.0), "st_charge_zero");
         BootRegister(new ChargeStone(1.0), "st_charge_plus");

Modified: trunk/src/stones/SimpleStones.hh
===================================================================
--- trunk/src/stones/SimpleStones.hh	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/SimpleStones.hh	2009-02-28 00:38:27 UTC (rev 1560)
@@ -56,6 +56,19 @@
     };
     
     /** 
+     * BrownPyramide
+     */
+    class BrownPyramide : public Stone {
+        CLONEOBJ(BrownPyramide);
+    public:
+        BrownPyramide();
+        
+         // Object interface
+        virtual std::string getClass() const;
+        virtual Value message(const Message &m);
+    };
+    
+    /** 
      * ChargeStone
      */
     class ChargeStone : public Stone {
@@ -156,7 +169,8 @@
         enum iState {
             IDLE, 
             LOADING,
-            SPITTING
+            SPITTING,
+            BREAKING
         };
 
     public:
@@ -164,6 +178,7 @@
         
         // StateObject interface
         virtual void setState(int extState);
+        virtual Value message(const Message &m);
 
         // GridObject interface
         virtual void init_model();
@@ -192,6 +207,7 @@
         
          // Object interface
         virtual std::string getClass() const;        
+        virtual Value message(const Message &m);
         
         // StateObject interface
         virtual int maxState() const;

Modified: trunk/src/stones/StandardStones.cc
===================================================================
--- trunk/src/stones/StandardStones.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/StandardStones.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -92,7 +92,7 @@
         return state;
     }
         
-    StoneTraits StandardStone::traits[25] = {
+    StoneTraits StandardStone::traits[24] = {
         {"st_granite", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
         {"st_granite", st_standard, stf_none, material_stone, 1.0, MOVABLE_STANDARD},
         {"st_darkgray", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
@@ -103,7 +103,6 @@
         {"st_concrete", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
         {"st_ancient", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
         {"st_brownmarble", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
-        {"st_brownpyramide", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
         {"st_redmarble", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
         {"st_bluegray", st_standard, stf_none, material_stone, 1.0, MOVABLE_PERSISTENT},
         {"st_brownie", st_standard, stf_none, material_stone, 1.0, MOVABLE_STANDARD},
@@ -133,26 +132,25 @@
         BootRegister(new StandardStone(7, false, false), "st_concrete");
         BootRegister(new StandardStone(8, false, false), "st_ancient");
         BootRegister(new StandardStone(9, false, false), "st_brownmarble");
-        BootRegister(new StandardStone(10, false, false), "st_brownpyramide");
-        BootRegister(new StandardStone(11, false, false), "st_redmarble");
-        BootRegister(new StandardStone(12, false, false), "st_bluegray");
-        BootRegister(new StandardStone(12, true, false),  "st_bluegray_hollow");
-        BootRegister(new StandardStone(13, false, true, true),  "st_brownie");
-        BootRegister(new StandardStone(14, false, false), "st_pinkbumps");
-        BootRegister(new StandardStone(15, false, false, true), "st_camouflage");
-        BootRegister(new StandardStone(15, true, false),  "st_camouflage_hollow");
-        BootRegister(new StandardStone(16, false, true, true),  "st_camouflage_movable");
-        BootRegister(new StandardStone(17, false, false), "st_redbrown");
-        BootRegister(new StandardStone(17, true, false),  "st_redbrown_hollow");
-        BootRegister(new StandardStone(18, false, true),  "st_redbrown_movable");
-        BootRegister(new StandardStone(19, false, false), "st_metal");
-        BootRegister(new StandardStone(19, true, false),  "st_metal_hollow");
-        BootRegister(new StandardStone(20, false, false), "st_redrock");
-        BootRegister(new StandardStone(21, false, false), "st_woven");
-        BootRegister(new StandardStone(22, false, false), "st_yellow");
-        BootRegister(new StandardStone(23, false, false), "st_invisible");
-        BootRegister(new StandardStone(23, true, false),  "st_invisible_hollow");
-        BootRegister(new StandardStone(24, false, true),  "st_invisible_movable");
+        BootRegister(new StandardStone(10, false, false), "st_redmarble");
+        BootRegister(new StandardStone(11, false, false), "st_bluegray");
+        BootRegister(new StandardStone(11, true, false),  "st_bluegray_hollow");
+        BootRegister(new StandardStone(12, false, true, true),  "st_brownie");
+        BootRegister(new StandardStone(13, false, false), "st_pinkbumps");
+        BootRegister(new StandardStone(14, false, false, true), "st_camouflage");
+        BootRegister(new StandardStone(14, true, false),  "st_camouflage_hollow");
+        BootRegister(new StandardStone(15, false, true, true),  "st_camouflage_movable");
+        BootRegister(new StandardStone(16, false, false), "st_redbrown");
+        BootRegister(new StandardStone(16, true, false),  "st_redbrown_hollow");
+        BootRegister(new StandardStone(17, false, true),  "st_redbrown_movable");
+        BootRegister(new StandardStone(18, false, false), "st_metal");
+        BootRegister(new StandardStone(18, true, false),  "st_metal_hollow");
+        BootRegister(new StandardStone(19, false, false), "st_redrock");
+        BootRegister(new StandardStone(20, false, false), "st_woven");
+        BootRegister(new StandardStone(21, false, false), "st_yellow");
+        BootRegister(new StandardStone(22, false, false), "st_invisible");
+        BootRegister(new StandardStone(22, true, false),  "st_invisible_hollow");
+        BootRegister(new StandardStone(23, false, true),  "st_invisible_movable");
     BOOT_REGISTER_END
 
 } // namespace enigma

Modified: trunk/src/stones/StandardStones.hh
===================================================================
--- trunk/src/stones/StandardStones.hh	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/StandardStones.hh	2009-02-28 00:38:27 UTC (rev 1560)
@@ -30,7 +30,7 @@
      */
     class StandardStone : public Stone {
         CLONEOBJ(StandardStone);
-        DECL_TRAITS_ARRAY(25, traitsIdx());
+        DECL_TRAITS_ARRAY(24, traitsIdx());
     private:
         enum iState {
             GRANITE,         ///< 

Modified: trunk/src/stones/StoneImpulse.cc
===================================================================
--- trunk/src/stones/StoneImpulse.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/stones/StoneImpulse.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -113,6 +113,15 @@
                 init_model();
             }
             return Value();
+        } else if (m.message == "_cannonball") {
+            if ((server::GameCompatibility != GAMET_ENIGMA && state == IDLE)) {
+                state = BREAKING;
+                init_model();
+            } else {
+                // Enigma mode do pulse
+                setIState(EXPANDING);
+            }
+            return Value();
         } else
             return Stone::message(m);
     }

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-02-27 17:18:21 UTC (rev 1559)
+++ trunk/src/world.cc	2009-02-28 00:38:27 UTC (rev 1560)
@@ -566,13 +566,12 @@
     V2 f = mforce;
     if (a->get_controllers() != 0) {
         if (a->is_drunken()) {
-//            double time = fmod(server::LevelTime, 2.0) - 1.0;
-            int t = (int)server::LevelTime;
-            double time = fmod(t * M_PI, 2.0) - 1.0;
+            int t1 = (int)server::LevelTime;
+            double base1 = fmod(t1 * M_PI, 2.0) - 1.0;
+            int t2 = (int)(5.0 * server::LevelTime);
+            double base2 = fmod(t2 * M_PI, 2.0) - 1.0;
             // rotate mouse force by random angle
-            double maxangle = M_PI * 0.4;
-            double angle = maxangle * time;
-//            double angle = DoubleRand (-maxangle, maxangle);
+            double angle = M_PI * (0.3 * base1 + 0.15 * base2);
             f = V2(f[0]*cos(angle) - f[1]*sin(angle),
                    f[0]*sin(angle) + f[1]*cos(angle));
         }



From ral at mail.berlios.de  Sat Feb 28 23:19:14 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sat, 28 Feb 2009 23:19:14 +0100
Subject: [Enigma-game-svn] r1561 - team_levelpacks/team_test_new_api
Message-ID: <200902282219.n1SMJEIm027107@sheep.berlios.de>

Author: ral
Date: 2009-02-28 23:18:54 +0100 (Sat, 28 Feb 2009)
New Revision: 1561

Modified:
   team_levelpacks/team_test_new_api/ralT041_1.xml
   team_levelpacks/team_test_new_api/ralT059_1.xml
   team_levelpacks/team_test_new_api/ralT079_1.xml
Log:
Test Level new API:
- updates for exit sensor, spitter, jamb

Modified: team_levelpacks/team_test_new_api/ralT041_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT041_1.xml	2009-02-28 00:38:27 UTC (rev 1560)
+++ team_levelpacks/team_test_new_api/ralT041_1.xml	2009-02-28 22:18:54 UTC (rev 1561)
@@ -32,6 +32,10 @@
 ti["F"] = {"it_sensor", inverse=true, target="sensorlaser", action="signal"}
 ti["L"] = {"st_laser_n", "sensorlaser"}
 
+ti["G"] = {"it_sensor_exit", target="esensorlaser", action="signal"} .. ti{"fl_lawn"}
+ti["H"] = {"it_sensor_exit", inverse=true, target="esensorlaser", action="signal"}
+ti["K"] = {"st_laser_n", "esensorlaser"}
+
 ti["C"] = {"it_cross", target="crosslaser1"}
 ti["M"] = {"st_laser_n", "crosslaser1"}
 
@@ -62,10 +66,10 @@
 
 w, h = wo(ti, " ", {
 "                    ",
-" l   L     M   m    ",
+" l   L K   M   m    ",
 "                    ",
-"Ie   E     C   c    ",
-" f   F              ",
+"Ie   E G   C   c    ",
+" f   F H            ",
 "          1 2  b w  ",
 "S   X               ",
 "t         W         ",

Modified: team_levelpacks/team_test_new_api/ralT059_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT059_1.xml	2009-02-28 00:38:27 UTC (rev 1560)
+++ team_levelpacks/team_test_new_api/ralT059_1.xml	2009-02-28 22:18:54 UTC (rev 1561)
@@ -18,6 +18,7 @@
 wo["ConserveLevel"] = true
 
 ti[" "] = {"fl_sahara"}
+ti["#"] = {"st_tigris"}
 
 ti["="] = {"st_door_d", "door#", faces="ns"}
 ti["|"] = {"st_door_d", "door#", faces="ew"}
@@ -46,7 +47,13 @@
 
 ti["@"] = {"#ac_marble"} 
 
+ti["M"] = {"st_door_d", target="ww", action="hit"}
+ti["N"] = {"st_door_d", target="ww", action="hit", faces="ew"}
+ti["O"] = {"st_jamb_white", "ww"}
 
+ti["2"] = {"#ac_killer"} 
+ti["X"] = {"st_passage"}
+
 w, h = wo(ti, " ", {
 "                    ",
 "                    ",
@@ -60,7 +67,12 @@
 "  KJK           L   ",
 "   j     @ s        ",
 "                k   ",
-"                    "
+"#######             ",
+"   N  #             ",
+"  MOM #             ",
+"   N  #             ",
+"2     #             ",
+"      X              "
 })
 
   ]]></el:luamain>

Modified: team_levelpacks/team_test_new_api/ralT079_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT079_1.xml	2009-02-28 00:38:27 UTC (rev 1560)
+++ team_levelpacks/team_test_new_api/ralT079_1.xml	2009-02-28 22:18:54 UTC (rev 1561)
@@ -31,28 +31,55 @@
 ti["e"] = {"it_extinguisher"}
 ti["t"] = {"it_document"}
 ti["c"] = {"it_banana"}
+ti["C"] = {"it_crack"}
+ti["x"] = {"it_cross"}
+ti["+"] = {"it_extralife"}
 
 ti["y"] = {"st_yinyang"}
 ti["Y"] = {"st_yinyang_active"}
+ti["z"] = {"st_yinyang_inactive"}
+ti["Z"] = {"st_yinyang", loop=false}
 
 ti["4"] = {"st_dispenser_bombblack"}
 ti["5"] = {"st_dispenser_bombwhite"}
 ti["6"] = {"st_dispenser_dynamite"}
 
+ti["L"] = {"st_laser_s", state=ON}
+ti["P"] = {"st_polarswitch"}
+ti["I"] = {"st_stoneimpulse"}
+
+ti["O"] = {"st_spitter"}
+ti["o"] = {"st_spitter", secure=true}
+ti["W"] = {"st_window_w"}
+ti["B"] = {"st_brownpyramide"}
+
+
 w, h = wo(ti, " ", {
-"        ddd         ",
-"        ddd         ",
-"   b    ddd     w   ",
+"L       ddd        C",
+"P       ddd         ",
+"   b    ddd     w  x",
 "          e         ",
-"       1      2    4",
-"                    ",
-"                   5",
+"I      1      2    4",
+"I                   ",
+"I                  5",
 "            t       ",
 "   b               6",
 "   w                ",
 "           c        ",
 "               .. ~~",
-"Y      y       .. ~~"
+"Y   y   z  Z   .. ~~",
+"                    ",
+"+++++++             ",
+"+++++++             ",
+"+++++++       L     ",
+"+++++++       P     ",
+"                    ",
+"                    ",
+"                  BB",
+"d dox  x      O   BB",
+"   C                ",
+"y     II          W  ",
+"y  C  II            "
 })
 
   ]]></el:luamain>



