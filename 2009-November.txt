From ral at mail.berlios.de  Mon Nov  2 13:34:13 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Mon, 2 Nov 2009 13:34:13 +0100
Subject: [Enigma-game-svn] r1836 - homepage/input
Message-ID: <200911021234.nA2CYDjY012973@sheep.berlios.de>

Author: ral
Date: 2009-11-02 13:34:01 +0100 (Mon, 02 Nov 2009)
New Revision: 1836

Modified:
   homepage/input/stat-other.html
   homepage/input/table-hcp.html
   homepage/input/table-rat.html
   homepage/input/table-solved.html
   homepage/input/table-wr.html
   homepage/input/userlist.html
Log:
Homepage:
- statistics October 2009


Modified: homepage/input/stat-other.html
===================================================================
--- homepage/input/stat-other.html	2009-10-19 16:18:57 UTC (rev 1835)
+++ homepage/input/stat-other.html	2009-11-02 12:34:01 UTC (rev 1836)
@@ -1,22 +1,22 @@
   <div class="stat-help">
     <h3>$$Other_Statistics$$</h3>
     <h4>$$Scores$$</h4>
-      96298 $$single_level_scores$$.
+      97042 $$single_level_scores$$.
     <h4>$$Ratings$$</h4>
-      17927 $$single_level_ratings$$ 4.93 $$and_distribution$$: 
+      17939 $$single_level_ratings$$ 4.93 $$and_distribution$$: 
       <table>
         <colgroup><col width="80"><col width="80"></colgroup>
         <tr><th>$$rating$$</th><th>$$count$$</th></tr>
         <tr><td class="num">0</td><td class="num">119</td></tr>
         <tr><td class="num">1</td><td class="num">322</td></tr>
-        <tr><td class="num">2</td><td class="num">919</td></tr>
-        <tr><td class="num">3</td><td class="num">2463</td></tr>
-        <tr><td class="num">4</td><td class="num">3405</td></tr>
+        <tr><td class="num">2</td><td class="num">921</td></tr>
+        <tr><td class="num">3</td><td class="num">2465</td></tr>
+        <tr><td class="num">4</td><td class="num">3407</td></tr>
         <tr><td class="num">5</td><td class="num">4276</td></tr>
         <tr><td class="num">6</td><td class="num">3068</td></tr>
-        <tr><td class="num">7</td><td class="num">2040</td></tr>
-        <tr><td class="num">8</td><td class="num">810</td></tr>
-        <tr><td class="num">9</td><td class="num">334</td></tr>
+        <tr><td class="num">7</td><td class="num">2044</td></tr>
+        <tr><td class="num">8</td><td class="num">811</td></tr>
+        <tr><td class="num">9</td><td class="num">335</td></tr>
         <tr><td class="num">10</td><td class="num">171</td></tr>
       </table>
   </div>

Modified: homepage/input/table-hcp.html
===================================================================
--- homepage/input/table-hcp.html	2009-10-19 16:18:57 UTC (rev 1835)
+++ homepage/input/table-hcp.html	2009-11-02 12:34:01 UTC (rev 1836)
@@ -1,183 +1,186 @@
   <table>
-    <caption>$$Handicap_Statistics$$ $$September$$ 2009</caption>
+    <caption>$$Handicap_Statistics$$ $$October$$ 2009</caption>
     <colgroup><col width="130"><col width="220"></colgroup>
     <tr><th>$$solved_hcp$$</th><th class="left">$$user$$</th></tr>
-     <tr><td class="num">-152.0</td><td class="left">'Moneymaker'</td></tr>
-     <tr><td class="num">-131.9</td><td class="left">'Medimaster'</td></tr>
-     <tr><td class="num">-107.2</td><td class="left">'daydreamer'</td></tr>
-     <tr><td class="num"> -73.7</td><td class="left">'Stupid'</td></tr>
-     <tr><td class="num"> -72.9</td><td class="left">'Johannes'</td></tr>
-     <tr><td class="num"> -65.2</td><td class="left">'Mentist'</td></tr>
-     <tr><td class="num"> -63.4</td><td class="left">'dev0'</td></tr>
+     <tr><td class="num">-151.6</td><td class="left">'Moneymaker'</td></tr>
+     <tr><td class="num">-132.5</td><td class="left">'Medimaster'</td></tr>
+     <tr><td class="num">-106.8</td><td class="left">'daydreamer'</td></tr>
+     <tr><td class="num"> -73.4</td><td class="left">'Stupid'</td></tr>
+     <tr><td class="num"> -72.5</td><td class="left">'Johannes'</td></tr>
+     <tr><td class="num"> -64.8</td><td class="left">'Mentist'</td></tr>
+     <tr><td class="num"> -63.3</td><td class="left">'dev0'</td></tr>
      <tr><td class="num"> -62.3</td><td class="left">'Daisy'</td></tr>
-     <tr><td class="num"> -61.5</td><td class="left">'Great Scott'</td></tr>
-     <tr><td class="num"> -53.4</td><td class="left">'Crystalicum'</td></tr>
-     <tr><td class="num"> -52.5</td><td class="left">'Duffy'</td></tr>
-     <tr><td class="num"> -51.2</td><td class="left">'Malla'</td></tr>
-     <tr><td class="num"> -47.8</td><td class="left">'ryujun'</td></tr>
-     <tr><td class="num"> -46.0</td><td class="left">'Alexandros'</td></tr>
-     <tr><td class="num"> -40.4</td><td class="left">'Django'</td></tr>
-     <tr><td class="num"> -40.3</td><td class="left">'Emmanuel'</td></tr>
-     <tr><td class="num"> -37.8</td><td class="left">'Gloop'</td></tr>
-     <tr><td class="num"> -34.0</td><td class="left">'Angolino'</td></tr>
-     <tr><td class="num"> -31.1</td><td class="left">'Taztunes'</td></tr>
-     <tr><td class="num"> -28.9</td><td class="left">'Safalra'</td></tr>
-     <tr><td class="num"> -26.1</td><td class="left">'Ludmian'</td></tr>
-     <tr><td class="num"> -23.1</td><td class="left">'B-Huff'</td></tr>
-     <tr><td class="num"> -22.2</td><td class="left">'dpl'</td></tr>
-     <tr><td class="num"> -20.4</td><td class="left">'Zekobah'</td></tr>
-     <tr><td class="num"> -20.3</td><td class="left">'bojster'</td></tr>
-     <tr><td class="num"> -19.6</td><td class="left">'Ghatotkacha'</td></tr>
-     <tr><td class="num"> -16.2</td><td class="left">'ged'</td></tr>
-     <tr><td class="num"> -14.9</td><td class="left">'hendrik'</td></tr>
-     <tr><td class="num"> -14.6</td><td class="left">'Raoul'</td></tr>
-     <tr><td class="num"> -14.5</td><td class="left">'ABS'</td></tr>
-     <tr><td class="num"> -12.0</td><td class="left">'H-J.Epting'</td></tr>
-     <tr><td class="num"> -11.7</td><td class="left">'Ronald'</td></tr>
-     <tr><td class="num"> -11.3</td><td class="left">'Dime'</td></tr>
-     <tr><td class="num"> -10.4</td><td class="left">'cuoha'</td></tr>
-     <tr><td class="num">  -6.6</td><td class="left">'Lukas'</td></tr>
-     <tr><td class="num">  -5.5</td><td class="left">'HuB34'</td></tr>
-     <tr><td class="num">  -2.3</td><td class="left">'Timo'</td></tr>
-     <tr><td class="num">  -2.0</td><td class="left">'Iceshark7'</td></tr>
-     <tr><td class="num">  -1.2</td><td class="left">'joseba'</td></tr>
-     <tr><td class="num">   0.8</td><td class="left">'mecke'</td></tr>
-     <tr><td class="num">   1.9</td><td class="left">'Daniel'</td></tr>
-     <tr><td class="num">   2.2</td><td class="left">'fabian'</td></tr>
-     <tr><td class="num">   2.7</td><td class="left">'U-Punkt'</td></tr>
-     <tr><td class="num">   3.4</td><td class="left">'Hairball'</td></tr>
-     <tr><td class="num">   3.4</td><td class="left">'Craven'</td></tr>
-     <tr><td class="num">   3.5</td><td class="left">'JuSt'</td></tr>
+     <tr><td class="num"> -61.2</td><td class="left">'Great Scott'</td></tr>
+     <tr><td class="num"> -53.1</td><td class="left">'Crystalicum'</td></tr>
+     <tr><td class="num"> -52.2</td><td class="left">'Duffy'</td></tr>
+     <tr><td class="num"> -50.9</td><td class="left">'Malla'</td></tr>
+     <tr><td class="num"> -47.5</td><td class="left">'ryujun'</td></tr>
+     <tr><td class="num"> -45.6</td><td class="left">'Alexandros'</td></tr>
+     <tr><td class="num"> -40.1</td><td class="left">'Django'</td></tr>
+     <tr><td class="num"> -39.9</td><td class="left">'Emmanuel'</td></tr>
+     <tr><td class="num"> -37.5</td><td class="left">'Gloop'</td></tr>
+     <tr><td class="num"> -36.2</td><td class="left">'Angolino'</td></tr>
+     <tr><td class="num"> -30.8</td><td class="left">'Taztunes'</td></tr>
+     <tr><td class="num"> -28.9</td><td class="left">'Zekobah'</td></tr>
+     <tr><td class="num"> -28.6</td><td class="left">'Safalra'</td></tr>
+     <tr><td class="num"> -26.3</td><td class="left">'Ludmian'</td></tr>
+     <tr><td class="num"> -22.7</td><td class="left">'B-Huff'</td></tr>
+     <tr><td class="num"> -21.9</td><td class="left">'dpl'</td></tr>
+     <tr><td class="num"> -20.0</td><td class="left">'bojster'</td></tr>
+     <tr><td class="num"> -19.3</td><td class="left">'Ghatotkacha'</td></tr>
+     <tr><td class="num"> -16.0</td><td class="left">'ged'</td></tr>
+     <tr><td class="num"> -14.7</td><td class="left">'hendrik'</td></tr>
+     <tr><td class="num"> -14.3</td><td class="left">'Raoul'</td></tr>
+     <tr><td class="num"> -14.2</td><td class="left">'ABS'</td></tr>
+     <tr><td class="num"> -14.0</td><td class="left">'H-J.Epting'</td></tr>
+     <tr><td class="num"> -11.5</td><td class="left">'Ronald'</td></tr>
+     <tr><td class="num"> -11.0</td><td class="left">'Dime'</td></tr>
+     <tr><td class="num"> -10.2</td><td class="left">'cuoha'</td></tr>
+     <tr><td class="num">  -6.3</td><td class="left">'Lukas'</td></tr>
+     <tr><td class="num">  -5.3</td><td class="left">'HuB34'</td></tr>
+     <tr><td class="num">  -2.2</td><td class="left">'Timo'</td></tr>
+     <tr><td class="num">  -1.8</td><td class="left">'Iceshark7'</td></tr>
+     <tr><td class="num">  -1.0</td><td class="left">'joseba'</td></tr>
+     <tr><td class="num">   1.0</td><td class="left">'mecke'</td></tr>
+     <tr><td class="num">   1.0</td><td class="left">'Another'</td></tr>
+     <tr><td class="num">   2.1</td><td class="left">'Daniel'</td></tr>
+     <tr><td class="num">   2.4</td><td class="left">'fabian'</td></tr>
+     <tr><td class="num">   2.5</td><td class="left">'U-Punkt'</td></tr>
+     <tr><td class="num">   3.0</td><td class="left">'l'ane'</td></tr>
+     <tr><td class="num">   3.5</td><td class="left">'Craven'</td></tr>
+     <tr><td class="num">   3.6</td><td class="left">'Hairball'</td></tr>
      <tr><td class="num">   3.7</td><td class="left">'Kevin'</td></tr>
-     <tr><td class="num">   4.2</td><td class="left">'Another'</td></tr>
-     <tr><td class="num">   4.2</td><td class="left">'Wuzzy'</td></tr>
-     <tr><td class="num">   4.4</td><td class="left">'Freshman'</td></tr>
-     <tr><td class="num">   4.7</td><td class="left">'Tiza'</td></tr>
-     <tr><td class="num">   5.2</td><td class="left">'mrduke'</td></tr>
-     <tr><td class="num">   6.2</td><td class="left">'para_doks'</td></tr>
-     <tr><td class="num">   6.6</td><td class="left">'Tobias'</td></tr>
-     <tr><td class="num">   7.7</td><td class="left">'alfred69'</td></tr>
-     <tr><td class="num">   8.1</td><td class="left">'Guglielmo'</td></tr>
-     <tr><td class="num">   9.0</td><td class="left">'serpent'</td></tr>
-     <tr><td class="num">   9.1</td><td class="left">'Sigma'</td></tr>
-     <tr><td class="num">   9.2</td><td class="left">'Andy'</td></tr>
-     <tr><td class="num">  11.2</td><td class="left">'oxyd4ever'</td></tr>
-     <tr><td class="num">  11.4</td><td class="left">'Austin'</td></tr>
-     <tr><td class="num">  12.4</td><td class="left">'shoki'</td></tr>
-     <tr><td class="num">  15.1</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-     <tr><td class="num">  17.1</td><td class="left">'Mark P.'</td></tr>
-     <tr><td class="num">  17.3</td><td class="left">'Andreas'</td></tr>
-     <tr><td class="num">  17.9</td><td class="left">'AlephD'</td></tr>
-     <tr><td class="num">  18.2</td><td class="left">'Sim_Ed'</td></tr>
-     <tr><td class="num">  18.9</td><td class="left">'Agnieszka'</td></tr>
-     <tr><td class="num">  19.1</td><td class="left">'Chocolate Zero'</td></tr>
-     <tr><td class="num">  19.9</td><td class="left">'casmith_789'</td></tr>
-     <tr><td class="num">  20.5</td><td class="left">'ais523'</td></tr>
-     <tr><td class="num">  22.2</td><td class="left">'Ale'</td></tr>
-     <tr><td class="num">  22.5</td><td class="left">'Alex'</td></tr>
-     <tr><td class="num">  25.1</td><td class="left">'Antonio EE'</td></tr>
-     <tr><td class="num">  25.2</td><td class="left">'Klaus'</td></tr>
-     <tr><td class="num">  25.5</td><td class="left">'Jinajon'</td></tr>
-     <tr><td class="num">  25.8</td><td class="left">'Marc-Hendrik'</td></tr>
-     <tr><td class="num">  26.8</td><td class="left">'Thomas'</td></tr>
-     <tr><td class="num">  26.8</td><td class="left">'Chris'</td></tr>
-     <tr><td class="num">  27.0</td><td class="left">'Feynman'</td></tr>
-     <tr><td class="num">  27.5</td><td class="left">'hdwow'</td></tr>
-     <tr><td class="num">  27.7</td><td class="left">'Gottseinsohn'</td></tr>
-     <tr><td class="num">  28.7</td><td class="left">'Bent'</td></tr>
-     <tr><td class="num">  28.7</td><td class="left">'Hans-HD'</td></tr>
-     <tr><td class="num">  29.6</td><td class="left">'un_guru'</td></tr>
-     <tr><td class="num">  30.0</td><td class="left">'Little_Mole'</td></tr>
-     <tr><td class="num">  30.5</td><td class="left">'J3FF'</td></tr>
-     <tr><td class="num">  31.2</td><td class="left">'biotopa'</td></tr>
-     <tr><td class="num">  31.2</td><td class="left">'Vinksu'</td></tr>
-     <tr><td class="num">  31.5</td><td class="left">'evane'</td></tr>
-     <tr><td class="num">  31.7</td><td class="left">'oblo'</td></tr>
-     <tr><td class="num">  31.8</td><td class="left">'GiannuzzITA'</td></tr>
+     <tr><td class="num">   3.7</td><td class="left">'JuSt'</td></tr>
+     <tr><td class="num">   4.4</td><td class="left">'Wuzzy'</td></tr>
+     <tr><td class="num">   4.6</td><td class="left">'Freshman'</td></tr>
+     <tr><td class="num">   4.9</td><td class="left">'Tiza'</td></tr>
+     <tr><td class="num">   5.3</td><td class="left">'mrduke'</td></tr>
+     <tr><td class="num">   6.3</td><td class="left">'para_doks'</td></tr>
+     <tr><td class="num">   6.8</td><td class="left">'Tobias'</td></tr>
+     <tr><td class="num">   7.9</td><td class="left">'alfred69'</td></tr>
+     <tr><td class="num">   8.3</td><td class="left">'Guglielmo'</td></tr>
+     <tr><td class="num">   9.2</td><td class="left">'serpent'</td></tr>
+     <tr><td class="num">   9.3</td><td class="left">'Sigma'</td></tr>
+     <tr><td class="num">   9.4</td><td class="left">'Andy'</td></tr>
+     <tr><td class="num">  11.3</td><td class="left">'oxyd4ever'</td></tr>
+     <tr><td class="num">  11.6</td><td class="left">'Austin'</td></tr>
+     <tr><td class="num">  12.6</td><td class="left">'shoki'</td></tr>
+     <tr><td class="num">  15.3</td><td class="left">'ShadowPhrogg32642342'</td></tr>
+     <tr><td class="num">  17.3</td><td class="left">'Mark P.'</td></tr>
+     <tr><td class="num">  17.4</td><td class="left">'Andreas'</td></tr>
+     <tr><td class="num">  18.0</td><td class="left">'AlephD'</td></tr>
+     <tr><td class="num">  18.3</td><td class="left">'Sim_Ed'</td></tr>
+     <tr><td class="num">  19.1</td><td class="left">'Agnieszka'</td></tr>
+     <tr><td class="num">  19.2</td><td class="left">'Chocolate Zero'</td></tr>
+     <tr><td class="num">  20.1</td><td class="left">'casmith_789'</td></tr>
+     <tr><td class="num">  20.6</td><td class="left">'ais523'</td></tr>
+     <tr><td class="num">  21.2</td><td class="left">'Zephyr'</td></tr>
+     <tr><td class="num">  22.3</td><td class="left">'Ale'</td></tr>
+     <tr><td class="num">  22.6</td><td class="left">'Alex'</td></tr>
+     <tr><td class="num">  25.2</td><td class="left">'Antonio EE'</td></tr>
+     <tr><td class="num">  25.3</td><td class="left">'Klaus'</td></tr>
+     <tr><td class="num">  25.6</td><td class="left">'Jinajon'</td></tr>
+     <tr><td class="num">  25.9</td><td class="left">'Marc-Hendrik'</td></tr>
+     <tr><td class="num">  26.9</td><td class="left">'Thomas'</td></tr>
+     <tr><td class="num">  27.0</td><td class="left">'Chris'</td></tr>
+     <tr><td class="num">  27.1</td><td class="left">'Feynman'</td></tr>
+     <tr><td class="num">  27.7</td><td class="left">'hdwow'</td></tr>
+     <tr><td class="num">  27.8</td><td class="left">'Gottseinsohn'</td></tr>
+     <tr><td class="num">  28.8</td><td class="left">'Hans-HD'</td></tr>
+     <tr><td class="num">  28.9</td><td class="left">'Bent'</td></tr>
+     <tr><td class="num">  29.7</td><td class="left">'un_guru'</td></tr>
+     <tr><td class="num">  30.1</td><td class="left">'Little_Mole'</td></tr>
+     <tr><td class="num">  30.6</td><td class="left">'J3FF'</td></tr>
+     <tr><td class="num">  31.3</td><td class="left">'biotopa'</td></tr>
+     <tr><td class="num">  31.3</td><td class="left">'Vinksu'</td></tr>
+     <tr><td class="num">  31.6</td><td class="left">'evane'</td></tr>
+     <tr><td class="num">  31.8</td><td class="left">'oblo'</td></tr>
+     <tr><td class="num">  31.9</td><td class="left">'GiannuzzITA'</td></tr>
      <tr><td class="num">  32.2</td><td class="left">'redsantz'</td></tr>
-     <tr><td class="num">  33.5</td><td class="left">'geembo_90'</td></tr>
-     <tr><td class="num">  33.5</td><td class="left">'Edgar_Flesk'</td></tr>
-     <tr><td class="num">  33.6</td><td class="left">'Melanie'</td></tr>
-     <tr><td class="num">  33.8</td><td class="left">'NorthForty'</td></tr>
-     <tr><td class="num">  34.2</td><td class="left">'IChrisI'</td></tr>
-     <tr><td class="num">  34.5</td><td class="left">'Gorn'</td></tr>
-     <tr><td class="num">  34.6</td><td class="left">'erich'</td></tr>
-     <tr><td class="num">  37.2</td><td class="left">'niebie'</td></tr>
-     <tr><td class="num">  37.4</td><td class="left">'MicWa'</td></tr>
-     <tr><td class="num">  37.5</td><td class="left">'WP319'</td></tr>
-     <tr><td class="num">  37.8</td><td class="left">'Kosby'</td></tr>
-     <tr><td class="num">  38.5</td><td class="left">'alain'</td></tr>
-     <tr><td class="num">  39.5</td><td class="left">'Liam Sheehan'</td></tr>
-     <tr><td class="num">  40.1</td><td class="left">'Rugby4ever'</td></tr>
-     <tr><td class="num">  40.9</td><td class="left">'WesleyCrusher'</td></tr>
+     <tr><td class="num">  33.6</td><td class="left">'Edgar_Flesk'</td></tr>
+     <tr><td class="num">  33.6</td><td class="left">'geembo_90'</td></tr>
+     <tr><td class="num">  33.7</td><td class="left">'Melanie'</td></tr>
+     <tr><td class="num">  33.9</td><td class="left">'NorthForty'</td></tr>
+     <tr><td class="num">  34.3</td><td class="left">'IChrisI'</td></tr>
+     <tr><td class="num">  34.6</td><td class="left">'Gorn'</td></tr>
+     <tr><td class="num">  34.7</td><td class="left">'erich'</td></tr>
+     <tr><td class="num">  37.3</td><td class="left">'niebie'</td></tr>
+     <tr><td class="num">  37.5</td><td class="left">'MicWa'</td></tr>
+     <tr><td class="num">  37.6</td><td class="left">'WP319'</td></tr>
+     <tr><td class="num">  37.9</td><td class="left">'Kosby'</td></tr>
+     <tr><td class="num">  38.6</td><td class="left">'alain'</td></tr>
+     <tr><td class="num">  39.6</td><td class="left">'Liam Sheehan'</td></tr>
+     <tr><td class="num">  40.3</td><td class="left">'Rugby4ever'</td></tr>
      <tr><td class="num">  41.0</td><td class="left">'Drotten'</td></tr>
-     <tr><td class="num">  41.3</td><td class="left">'Archcorenth'</td></tr>
-     <tr><td class="num">  41.4</td><td class="left">'Harry Lim'</td></tr>
+     <tr><td class="num">  41.0</td><td class="left">'WesleyCrusher'</td></tr>
+     <tr><td class="num">  41.4</td><td class="left">'Archcorenth'</td></tr>
+     <tr><td class="num">  41.5</td><td class="left">'Harry Lim'</td></tr>
      <tr><td class="num">  41.6</td><td class="left">'purplerainbow'</td></tr>
-     <tr><td class="num">  41.9</td><td class="left">'B-man'</td></tr>
+     <tr><td class="num">  42.0</td><td class="left">'B-man'</td></tr>
      <tr><td class="num">  42.4</td><td class="left">'Nfol'</td></tr>
      <tr><td class="num">  43.1</td><td class="left">'Tiger'</td></tr>
-     <tr><td class="num">  43.1</td><td class="left">'gringer'</td></tr>
-     <tr><td class="num">  43.7</td><td class="left">'Vlad'</td></tr>
-     <tr><td class="num">  44.0</td><td class="left">'Snaily'</td></tr>
+     <tr><td class="num">  43.2</td><td class="left">'gringer'</td></tr>
+     <tr><td class="num">  43.8</td><td class="left">'Vlad'</td></tr>
+     <tr><td class="num">  44.1</td><td class="left">'Snaily'</td></tr>
      <tr><td class="num">  44.8</td><td class="left">'Momcat'</td></tr>
-     <tr><td class="num">  45.4</td><td class="left">'Breezy'</td></tr>
-     <tr><td class="num">  45.8</td><td class="left">'Paulus'</td></tr>
-     <tr><td class="num">  46.2</td><td class="left">'Uli'</td></tr>
-     <tr><td class="num">  46.9</td><td class="left">'Tarim'</td></tr>
-     <tr><td class="num">  48.0</td><td class="left">'IntKecsk'</td></tr>
-     <tr><td class="num">  48.3</td><td class="left">'tjRaven'</td></tr>
-     <tr><td class="num">  48.5</td><td class="left">'Jonyzz'</td></tr>
-     <tr><td class="num">  48.8</td><td class="left">'Valkyrie2'</td></tr>
-     <tr><td class="num">  49.2</td><td class="left">'mhatta'</td></tr>
-     <tr><td class="num">  49.3</td><td class="left">'ntaeijr'</td></tr>
-     <tr><td class="num">  51.2</td><td class="left">'Zak'</td></tr>
-     <tr><td class="num">  51.3</td><td class="left">'rima'</td></tr>
+     <tr><td class="num">  45.5</td><td class="left">'Breezy'</td></tr>
+     <tr><td class="num">  45.9</td><td class="left">'Paulus'</td></tr>
+     <tr><td class="num">  46.3</td><td class="left">'Uli'</td></tr>
+     <tr><td class="num">  47.0</td><td class="left">'Tarim'</td></tr>
+     <tr><td class="num">  48.1</td><td class="left">'IntKecsk'</td></tr>
+     <tr><td class="num">  48.4</td><td class="left">'tjRaven'</td></tr>
+     <tr><td class="num">  48.6</td><td class="left">'Jonyzz'</td></tr>
+     <tr><td class="num">  48.9</td><td class="left">'Valkyrie2'</td></tr>
+     <tr><td class="num">  49.3</td><td class="left">'mhatta'</td></tr>
+     <tr><td class="num">  49.4</td><td class="left">'ntaeijr'</td></tr>
+     <tr><td class="num">  51.3</td><td class="left">'Zak'</td></tr>
      <tr><td class="num">  51.4</td><td class="left">'Tomson'</td></tr>
+     <tr><td class="num">  51.4</td><td class="left">'rima'</td></tr>
      <tr><td class="num">  51.5</td><td class="left">'Mecki'</td></tr>
-     <tr><td class="num">  51.6</td><td class="left">'brynn'</td></tr>
-     <tr><td class="num">  51.7</td><td class="left">'Sandra'</td></tr>
+     <tr><td class="num">  51.7</td><td class="left">'brynn'</td></tr>
      <tr><td class="num">  51.7</td><td class="left">'Jeffrey S'</td></tr>
+     <tr><td class="num">  51.8</td><td class="left">'Sandra'</td></tr>
      <tr><td class="num">  52.6</td><td class="left">'jdcampo'</td></tr>
-     <tr><td class="num">  52.9</td><td class="left">'ReasonAnce'</td></tr>
-     <tr><td class="num">  53.5</td><td class="left">'AkRa'</td></tr>
-     <tr><td class="num">  54.2</td><td class="left">'Vaily'</td></tr>
-     <tr><td class="num">  54.4</td><td class="left">'Pascal'</td></tr>
-     <tr><td class="num">  54.6</td><td class="left">'Slav'</td></tr>
-     <tr><td class="num">  55.2</td><td class="left">'Cyphase'</td></tr>
+     <tr><td class="num">  53.0</td><td class="left">'ReasonAnce'</td></tr>
+     <tr><td class="num">  53.6</td><td class="left">'AkRa'</td></tr>
+     <tr><td class="num">  54.3</td><td class="left">'Vaily'</td></tr>
+     <tr><td class="num">  54.5</td><td class="left">'Pascal'</td></tr>
+     <tr><td class="num">  54.7</td><td class="left">'Slav'</td></tr>
+     <tr><td class="num">  55.3</td><td class="left">'Cyphase'</td></tr>
      <tr><td class="num">  55.5</td><td class="left">'Neophilus'</td></tr>
-     <tr><td class="num">  55.7</td><td class="left">'Turbogurk'</td></tr>
+     <tr><td class="num">  55.8</td><td class="left">'Turbogurk'</td></tr>
      <tr><td class="num">  57.2</td><td class="left">'krazy62'</td></tr>
      <tr><td class="num">  58.5</td><td class="left">'Adonica'</td></tr>
-     <tr><td class="num">  58.8</td><td class="left">'Kadu'</td></tr>
-     <tr><td class="num">  60.4</td><td class="left">'Enrymather'</td></tr>
+     <tr><td class="num">  58.9</td><td class="left">'Kadu'</td></tr>
+     <tr><td class="num">  60.3</td><td class="left">'Alexander J'</td></tr>
+     <tr><td class="num">  60.5</td><td class="left">'Enrymather'</td></tr>
      <tr><td class="num">  61.8</td><td class="left">'Sopoforic'</td></tr>
-     <tr><td class="num">  62.1</td><td class="left">'jumbo'</td></tr>
-     <tr><td class="num">  62.7</td><td class="left">'jdrexler'</td></tr>
+     <tr><td class="num">  62.2</td><td class="left">'jumbo'</td></tr>
+     <tr><td class="num">  62.8</td><td class="left">'jdrexler'</td></tr>
      <tr><td class="num">  62.9</td><td class="left">'Jan'</td></tr>
-     <tr><td class="num">  63.5</td><td class="left">'Asbel'</td></tr>
-     <tr><td class="num">  65.0</td><td class="left">'tasker'</td></tr>
-     <tr><td class="num">  65.5</td><td class="left">'Meeve'</td></tr>
-     <tr><td class="num">  67.3</td><td class="left">'ael'</td></tr>
+     <tr><td class="num">  63.6</td><td class="left">'Asbel'</td></tr>
+     <tr><td class="num">  65.1</td><td class="left">'tasker'</td></tr>
+     <tr><td class="num">  65.6</td><td class="left">'Meeve'</td></tr>
+     <tr><td class="num">  67.4</td><td class="left">'ael'</td></tr>
      <tr><td class="num">  68.1</td><td class="left">'Samuel'</td></tr>
-     <tr><td class="num">  68.3</td><td class="left">'Fred_the_wise'</td></tr>
      <tr><td class="num">  68.4</td><td class="left">'Alf'</td></tr>
      <tr><td class="num">  68.4</td><td class="left">'schmusi20'</td></tr>
+     <tr><td class="num">  68.4</td><td class="left">'Fred_the_wise'</td></tr>
      <tr><td class="num">  68.5</td><td class="left">'Sparkey'</td></tr>
-     <tr><td class="num">  69.9</td><td class="left">'Shaez'</td></tr>
-     <tr><td class="num">  70.2</td><td class="left">'Magnus and Susi'</td></tr>
-     <tr><td class="num">  70.9</td><td class="left">'Zhura'</td></tr>
-     <tr><td class="num">  71.8</td><td class="left">'xmouse'</td></tr>
+     <tr><td class="num">  70.0</td><td class="left">'Shaez'</td></tr>
+     <tr><td class="num">  70.3</td><td class="left">'Magnus and Susi'</td></tr>
+     <tr><td class="num">  71.0</td><td class="left">'Zhura'</td></tr>
+     <tr><td class="num">  71.9</td><td class="left">'xmouse'</td></tr>
      <tr><td class="num">  73.0</td><td class="left">'Joona'</td></tr>
      <tr><td class="num">  73.2</td><td class="left">'AQZ'</td></tr>
      <tr><td class="num">  74.9</td><td class="left">'crypto_rsa'</td></tr>
      <tr><td class="num">  75.0</td><td class="left">'Dvorhagen'</td></tr>
      <tr><td class="num">  75.8</td><td class="left">'Eselchen'</td></tr>
-     <tr><td class="num">  76.1</td><td class="left">'AsuCaga'</td></tr>
-     <tr><td class="num">  76.2</td><td class="left">'jojo'</td></tr>
-     <tr><td class="num">  76.3</td><td class="left">'Nicol?s'</td></tr>
+     <tr><td class="num">  76.2</td><td class="left">'AsuCaga'</td></tr>
+     <tr><td class="num">  76.3</td><td class="left">'jojo'</td></tr>
+     <tr><td class="num">  76.4</td><td class="left">'Nicol?s'</td></tr>
      <tr><td class="num">  79.3</td><td class="left">'colonel crayon'</td></tr>
-     <tr><td class="num">  80.0</td><td class="left">'Kroetchen'</td></tr>
+     <tr><td class="num">  80.1</td><td class="left">'Kroetchen'</td></tr>
      <tr><td class="num">  81.0</td><td class="left">'Agares'</td></tr>
      <tr><td class="num">  82.0</td><td class="left">'IIkka'</td></tr>
      <tr><td class="num">  85.7</td><td class="left">'Miel56'</td></tr>

Modified: homepage/input/table-rat.html
===================================================================
--- homepage/input/table-rat.html	2009-10-19 16:18:57 UTC (rev 1835)
+++ homepage/input/table-rat.html	2009-11-02 12:34:01 UTC (rev 1836)
@@ -1,5 +1,5 @@
   <table>
-    <caption>$$Rating_Statistics$$ $$September$$ 2009</caption>
+    <caption>$$Rating_Statistics$$ $$October$$ 2009</caption>
     <colgroup><col width="80"><col width="80"><col width="220"></colgroup>
     <tr><th>$$count$$</th><th>$$average$$</th><th class="left">$$user$$</th></tr>    <tr><td class="num">1062</td><td class="num"> 5.06</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num">1056</td><td class="num"> 4.83</td><td class="left">'Taztunes'</td></tr>
@@ -8,7 +8,7 @@
     <tr><td class="num">900</td><td class="num"> 4.80</td><td class="left">'daydreamer'</td></tr>
     <tr><td class="num">871</td><td class="num"> 5.09</td><td class="left">'Stupid'</td></tr>
     <tr><td class="num">653</td><td class="num"> 5.01</td><td class="left">'Duffy'</td></tr>
-    <tr><td class="num">647</td><td class="num"> 4.79</td><td class="left">'U-Punkt'</td></tr>
+    <tr><td class="num">653</td><td class="num"> 4.79</td><td class="left">'U-Punkt'</td></tr>
     <tr><td class="num">631</td><td class="num"> 4.99</td><td class="left">'Moneymaker'</td></tr>
     <tr><td class="num">622</td><td class="num"> 4.22</td><td class="left">'shoki'</td></tr>
     <tr><td class="num">604</td><td class="num"> 5.31</td><td class="left">'Mentist'</td></tr>
@@ -33,7 +33,7 @@
     <tr><td class="num">129</td><td class="num"> 5.64</td><td class="left">'Raoul'</td></tr>
     <tr><td class="num">126</td><td class="num"> 5.79</td><td class="left">'Ghatotkacha'</td></tr>
     <tr><td class="num">124</td><td class="num"> 4.44</td><td class="left">'Sigma'</td></tr>
-    <tr><td class="num">121</td><td class="num"> 5.14</td><td class="left">'Angolino'</td></tr>
+    <tr><td class="num">123</td><td class="num"> 5.13</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num">110</td><td class="num"> 4.27</td><td class="left">'Medimaster'</td></tr>
     <tr><td class="num"> 97</td><td class="num"> 4.16</td><td class="left">'Safalra'</td></tr>
     <tr><td class="num"> 91</td><td class="num"> 4.41</td><td class="left">'Zhura'</td></tr>
@@ -45,8 +45,8 @@
     <tr><td class="num"> 52</td><td class="num"> 6.56</td><td class="left">'Hairball'</td></tr>
     <tr><td class="num"> 51</td><td class="num"> 6.39</td><td class="left">'Little_Mole'</td></tr>
     <tr><td class="num"> 50</td><td class="num"> 5.26</td><td class="left">'Daniel'</td></tr>
+    <tr><td class="num"> 49</td><td class="num"> 4.90</td><td class="left">'hendrik'</td></tr>
     <tr><td class="num"> 49</td><td class="num"> 6.02</td><td class="left">'oblo'</td></tr>
-    <tr><td class="num"> 49</td><td class="num"> 4.90</td><td class="left">'hendrik'</td></tr>
     <tr><td class="num"> 49</td><td class="num"> 6.31</td><td class="left">'Dime'</td></tr>
     <tr><td class="num"> 47</td><td class="num"> 6.62</td><td class="left">'Ale'</td></tr>
     <tr><td class="num"> 43</td><td class="num"> 3.74</td><td class="left">'Iceshark7'</td></tr>
@@ -63,43 +63,43 @@
     <tr><td class="num"> 18</td><td class="num"> 4.22</td><td class="left">'Mecki'</td></tr>
     <tr><td class="num"> 16</td><td class="num"> 3.25</td><td class="left">'tasker'</td></tr>
     <tr><td class="num"> 13</td><td class="num"> 5.23</td><td class="left">'Samuel'</td></tr>
+    <tr><td class="num"> 13</td><td class="num"> 5.38</td><td class="left">'oxyd4ever'</td></tr>
     <tr><td class="num"> 13</td><td class="num"> 8.15</td><td class="left">'Ludmian'</td></tr>
-    <tr><td class="num"> 13</td><td class="num"> 5.38</td><td class="left">'oxyd4ever'</td></tr>
     <tr><td class="num"> 11</td><td class="num"> 6.36</td><td class="left">'ShadowPhrogg32642342'</td></tr>
     <tr><td class="num"> 11</td><td class="num"> 7.73</td><td class="left">'evane'</td></tr>
     <tr><td class="num"> 10</td><td class="num"> 7.80</td><td class="left">'hdwow'</td></tr>
     <tr><td class="num"> 10</td><td class="num"> 4.90</td><td class="left">'ais523'</td></tr>
+    <tr><td class="num">  8</td><td class="num"> 7.63</td><td class="left">'Antonio EE'</td></tr>
     <tr><td class="num">  8</td><td class="num"> 3.25</td><td class="left">'Vlad'</td></tr>
-    <tr><td class="num">  8</td><td class="num"> 7.63</td><td class="left">'Antonio EE'</td></tr>
+    <tr><td class="num">  7</td><td class="num"> 7.00</td><td class="left">'Zekobah'</td></tr>
     <tr><td class="num">  7</td><td class="num"> 4.29</td><td class="left">'Snaily'</td></tr>
     <tr><td class="num">  6</td><td class="num"> 5.17</td><td class="left">'Emmanuel'</td></tr>
     <tr><td class="num">  5</td><td class="num"> 6.80</td><td class="left">'Breezy'</td></tr>
     <tr><td class="num">  5</td><td class="num"> 9.20</td><td class="left">'HuB34'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 6.75</td><td class="left">'Agares'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 2.00</td><td class="left">'casmith_789'</td></tr>
+    <tr><td class="num">  4</td><td class="num"> 5.75</td><td class="left">'joseba'</td></tr>
+    <tr><td class="num">  4</td><td class="num"> 7.00</td><td class="left">'redsantz'</td></tr>
     <tr><td class="num">  4</td><td class="num">10.00</td><td class="left">'Kevin'</td></tr>
-    <tr><td class="num">  4</td><td class="num"> 5.75</td><td class="left">'joseba'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 1.00</td><td class="left">'Hans-HD'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 6.50</td><td class="left">'serpent'</td></tr>
-    <tr><td class="num">  4</td><td class="num"> 7.00</td><td class="left">'redsantz'</td></tr>
     <tr><td class="num">  3</td><td class="num"> 0.67</td><td class="left">'Turbogurk'</td></tr>
-    <tr><td class="num">  3</td><td class="num"> 7.67</td><td class="left">'Zekobah'</td></tr>
     <tr><td class="num">  3</td><td class="num"> 7.67</td><td class="left">'Joona'</td></tr>
     <tr><td class="num">  3</td><td class="num"> 3.00</td><td class="left">'Rugby4ever'</td></tr>
     <tr><td class="num">  3</td><td class="num"> 4.33</td><td class="left">'krazy62'</td></tr>
+    <tr><td class="num">  2</td><td class="num"> 8.00</td><td class="left">'cuoha'</td></tr>
+    <tr><td class="num">  2</td><td class="num"> 0.00</td><td class="left">'mhatta'</td></tr>
     <tr><td class="num">  2</td><td class="num"> 6.50</td><td class="left">'tjRaven'</td></tr>
-    <tr><td class="num">  2</td><td class="num"> 8.00</td><td class="left">'cuoha'</td></tr>
     <tr><td class="num">  2</td><td class="num"> 2.50</td><td class="left">'Enrymather'</td></tr>
-    <tr><td class="num">  2</td><td class="num"> 0.00</td><td class="left">'mhatta'</td></tr>
-    <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'jumbo'</td></tr>
-    <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'ael'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 9.00</td><td class="left">'purplerainbow'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 6.00</td><td class="left">'Slav'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'Uli'</td></tr>
-    <tr><td class="num">  1</td><td class="num"> 0.00</td><td class="left">'Fred_the_wise'</td></tr>
     <tr><td class="num">  1</td><td class="num">10.00</td><td class="left">'Cyphase'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'Harry Lim'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 2.00</td><td class="left">'Sequoyah'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 4.00</td><td class="left">'jojo'</td></tr>
     <tr><td class="num">  1</td><td class="num"> 6.00</td><td class="left">'Sopoforic'</td></tr>
+    <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'jumbo'</td></tr>
+    <tr><td class="num">  1</td><td class="num"> 5.00</td><td class="left">'ael'</td></tr>
+    <tr><td class="num">  1</td><td class="num"> 0.00</td><td class="left">'Fred_the_wise'</td></tr>
   </table>

Modified: homepage/input/table-solved.html
===================================================================
--- homepage/input/table-solved.html	2009-10-19 16:18:57 UTC (rev 1835)
+++ homepage/input/table-solved.html	2009-11-02 12:34:01 UTC (rev 1836)
@@ -1,5 +1,5 @@
   <table>
-    <caption>$$Solved_Level_Statistics$$ $$September$$ 2009</caption>
+    <caption>$$Solved_Level_Statistics$$ $$October$$ 2009</caption>
     <colgroup><col width="130"><col width="130"><col width="130"><col width="240"></colgroup>
     <tr><th>$$difficult$$</th><th>$$easy$$</th><th>$$total$$</th><th class="left">$$user$$</th></tr>
     <tr><td class="num">1045/1045</td><td class="num">189/189</td><td class="num">100.00%</td><td class="left">'ryujun'</td></tr>
@@ -15,8 +15,8 @@
     <tr><td class="num">1021/1045</td><td class="num">177/189</td><td class="num"> 97.08%</td><td class="left">'Malla'</td></tr>
     <tr><td class="num">1014/1045</td><td class="num">175/189</td><td class="num"> 96.35%</td><td class="left">'Stupid'</td></tr>
     <tr><td class="num"> 999/1045</td><td class="num">177/189</td><td class="num"> 95.30%</td><td class="left">'biotopa'</td></tr>
-    <tr><td class="num"> 991/1045</td><td class="num">177/189</td><td class="num"> 94.65%</td><td class="left">'Daisy'</td></tr>
-    <tr><td class="num"> 977/1045</td><td class="num">168/189</td><td class="num"> 92.79%</td><td class="left">'H-J.Epting'</td></tr>
+    <tr><td class="num"> 993/1045</td><td class="num">177/189</td><td class="num"> 94.81%</td><td class="left">'Daisy'</td></tr>
+    <tr><td class="num"> 985/1045</td><td class="num">169/189</td><td class="num"> 93.52%</td><td class="left">'H-J.Epting'</td></tr>
     <tr><td class="num"> 970/1045</td><td class="num">166/189</td><td class="num"> 92.06%</td><td class="left">'Andy'</td></tr>
     <tr><td class="num"> 962/1045</td><td class="num">173/189</td><td class="num"> 91.98%</td><td class="left">'mecke'</td></tr>
     <tr><td class="num"> 949/1045</td><td class="num">170/189</td><td class="num"> 90.68%</td><td class="left">'para_doks'</td></tr>
@@ -36,19 +36,20 @@
     <tr><td class="num"> 898/1045</td><td class="num"> 54/189</td><td class="num"> 77.15%</td><td class="left">'evane'</td></tr>
     <tr><td class="num"> 950/1045</td><td class="num">  0/189</td><td class="num"> 76.99%</td><td class="left">'Tarim'</td></tr>
     <tr><td class="num"> 804/1045</td><td class="num">142/189</td><td class="num"> 76.66%</td><td class="left">'Safalra'</td></tr>
+    <tr><td class="num"> 808/1045</td><td class="num">132/189</td><td class="num"> 76.18%</td><td class="left">'Ludmian'</td></tr>
     <tr><td class="num"> 800/1045</td><td class="num">135/189</td><td class="num"> 75.77%</td><td class="left">'dpl'</td></tr>
-    <tr><td class="num"> 802/1045</td><td class="num">129/189</td><td class="num"> 75.45%</td><td class="left">'Ludmian'</td></tr>
     <tr><td class="num"> 812/1045</td><td class="num">114/189</td><td class="num"> 75.04%</td><td class="left">'brynn'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num">132/189</td><td class="num"> 74.07%</td><td class="left">'AlephD'</td></tr>
-    <tr><td class="num"> 781/1045</td><td class="num">123/189</td><td class="num"> 73.26%</td><td class="left">'U-Punkt'</td></tr>
+    <tr><td class="num"> 786/1045</td><td class="num">125/189</td><td class="num"> 73.82%</td><td class="left">'U-Punkt'</td></tr>
+    <tr><td class="num"> 765/1045</td><td class="num">135/189</td><td class="num"> 72.93%</td><td class="left">'Another'</td></tr>
     <tr><td class="num"> 739/1045</td><td class="num">131/189</td><td class="num"> 70.50%</td><td class="left">'ABS'</td></tr>
-    <tr><td class="num"> 752/1045</td><td class="num">115/189</td><td class="num"> 70.26%</td><td class="left">'Another'</td></tr>
     <tr><td class="num"> 728/1045</td><td class="num">126/189</td><td class="num"> 69.21%</td><td class="left">'B-Huff'</td></tr>
     <tr><td class="num"> 762/1045</td><td class="num"> 73/189</td><td class="num"> 67.67%</td><td class="left">'redsantz'</td></tr>
     <tr><td class="num"> 791/1045</td><td class="num"> 38/189</td><td class="num"> 67.18%</td><td class="left">'alfred69'</td></tr>
     <tr><td class="num"> 694/1045</td><td class="num">133/189</td><td class="num"> 67.02%</td><td class="left">'Alexandros'</td></tr>
     <tr><td class="num"> 734/1045</td><td class="num"> 82/189</td><td class="num"> 66.13%</td><td class="left">'bojster'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num"> 33/189</td><td class="num"> 66.05%</td><td class="left">'Sim_Ed'</td></tr>
+    <tr><td class="num"> 684/1045</td><td class="num">130/189</td><td class="num"> 65.96%</td><td class="left">'Zekobah'</td></tr>
     <tr><td class="num"> 675/1045</td><td class="num">109/189</td><td class="num"> 63.53%</td><td class="left">'Tiza'</td></tr>
     <tr><td class="num"> 656/1045</td><td class="num">123/189</td><td class="num"> 63.13%</td><td class="left">'oxyd4ever'</td></tr>
     <tr><td class="num"> 651/1045</td><td class="num">111/189</td><td class="num"> 61.75%</td><td class="left">'Raoul'</td></tr>
@@ -65,12 +66,11 @@
     <tr><td class="num"> 575/1045</td><td class="num">115/189</td><td class="num"> 55.92%</td><td class="left">'Mark P.'</td></tr>
     <tr><td class="num"> 647/1045</td><td class="num"> 38/189</td><td class="num"> 55.51%</td><td class="left">'Valkyrie2'</td></tr>
     <tr><td class="num"> 599/1045</td><td class="num"> 80/189</td><td class="num"> 55.02%</td><td class="left">'serpent'</td></tr>
-    <tr><td class="num"> 577/1045</td><td class="num">100/189</td><td class="num"> 54.86%</td><td class="left">'Zekobah'</td></tr>
     <tr><td class="num"> 634/1045</td><td class="num"> 43/189</td><td class="num"> 54.86%</td><td class="left">'Klaus'</td></tr>
     <tr><td class="num"> 576/1045</td><td class="num"> 93/189</td><td class="num"> 54.21%</td><td class="left">'Guglielmo'</td></tr>
     <tr><td class="num"> 556/1045</td><td class="num">111/189</td><td class="num"> 54.05%</td><td class="left">'cuoha'</td></tr>
+    <tr><td class="num"> 555/1045</td><td class="num"> 77/189</td><td class="num"> 51.22%</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num"> 525/1045</td><td class="num"> 95/189</td><td class="num"> 50.24%</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-    <tr><td class="num"> 542/1045</td><td class="num"> 75/189</td><td class="num"> 50.00%</td><td class="left">'Angolino'</td></tr>
     <tr><td class="num"> 589/1045</td><td class="num"> 26/189</td><td class="num"> 49.84%</td><td class="left">'hdwow'</td></tr>
     <tr><td class="num"> 533/1045</td><td class="num"> 82/189</td><td class="num"> 49.84%</td><td class="left">'Wuzzy'</td></tr>
     <tr><td class="num"> 506/1045</td><td class="num">108/189</td><td class="num"> 49.76%</td><td class="left">'Agnieszka'</td></tr>
@@ -84,13 +84,13 @@
     <tr><td class="num"> 541/1045</td><td class="num">  6/189</td><td class="num"> 44.33%</td><td class="left">'Vinksu'</td></tr>
     <tr><td class="num"> 516/1045</td><td class="num"> 24/189</td><td class="num"> 43.76%</td><td class="left">'niebie'</td></tr>
     <tr><td class="num"> 508/1045</td><td class="num"> 26/189</td><td class="num"> 43.27%</td><td class="left">'Feynman'</td></tr>
-    <tr><td class="num"> 451/1045</td><td class="num"> 76/189</td><td class="num"> 42.71%</td><td class="left">'Medimaster'</td></tr>
+    <tr><td class="num"> 454/1045</td><td class="num"> 77/189</td><td class="num"> 43.03%</td><td class="left">'Medimaster'</td></tr>
     <tr><td class="num"> 462/1045</td><td class="num"> 63/189</td><td class="num"> 42.54%</td><td class="left">'Liam Sheehan'</td></tr>
     <tr><td class="num"> 494/1045</td><td class="num"> 26/189</td><td class="num"> 42.14%</td><td class="left">'Daniel'</td></tr>
     <tr><td class="num"> 506/1045</td><td class="num"> 12/189</td><td class="num"> 41.98%</td><td class="left">'Duffy'</td></tr>
     <tr><td class="num"> 503/1045</td><td class="num">  7/189</td><td class="num"> 41.33%</td><td class="left">'Edgar_Flesk'</td></tr>
+    <tr><td class="num"> 440/1045</td><td class="num"> 50/189</td><td class="num"> 39.71%</td><td class="left">'ged'</td></tr>
     <tr><td class="num"> 397/1045</td><td class="num"> 93/189</td><td class="num"> 39.71%</td><td class="left">'Hairball'</td></tr>
-    <tr><td class="num"> 440/1045</td><td class="num"> 50/189</td><td class="num"> 39.71%</td><td class="left">'ged'</td></tr>
     <tr><td class="num"> 369/1045</td><td class="num">112/189</td><td class="num"> 38.98%</td><td class="left">'Jinajon'</td></tr>
     <tr><td class="num"> 438/1045</td><td class="num">  3/189</td><td class="num"> 35.74%</td><td class="left">'oblo'</td></tr>
     <tr><td class="num"> 396/1045</td><td class="num"> 43/189</td><td class="num"> 35.58%</td><td class="left">'Jeffrey S'</td></tr>
@@ -114,8 +114,8 @@
     <tr><td class="num"> 347/1045</td><td class="num"> 15/189</td><td class="num"> 29.34%</td><td class="left">'WesleyCrusher'</td></tr>
     <tr><td class="num"> 331/1045</td><td class="num"> 14/189</td><td class="num"> 27.96%</td><td class="left">'Archcorenth'</td></tr>
     <tr><td class="num"> 281/1045</td><td class="num"> 63/189</td><td class="num"> 27.88%</td><td class="left">'erich'</td></tr>
+    <tr><td class="num"> 288/1045</td><td class="num"> 36/189</td><td class="num"> 26.26%</td><td class="left">'Drotten'</td></tr>
     <tr><td class="num"> 295/1045</td><td class="num"> 29/189</td><td class="num"> 26.26%</td><td class="left">'Tiger'</td></tr>
-    <tr><td class="num"> 288/1045</td><td class="num"> 36/189</td><td class="num"> 26.26%</td><td class="left">'Drotten'</td></tr>
     <tr><td class="num"> 300/1045</td><td class="num"> 19/189</td><td class="num"> 25.85%</td><td class="left">'Nfol'</td></tr>
     <tr><td class="num"> 261/1045</td><td class="num"> 53/189</td><td class="num"> 25.45%</td><td class="left">'Andreas'</td></tr>
     <tr><td class="num"> 276/1045</td><td class="num"> 15/189</td><td class="num"> 23.58%</td><td class="left">'Thomas'</td></tr>
@@ -137,6 +137,7 @@
     <tr><td class="num"> 165/1045</td><td class="num"> 37/189</td><td class="num"> 16.37%</td><td class="left">'Jan'</td></tr>
     <tr><td class="num"> 181/1045</td><td class="num"> 20/189</td><td class="num"> 16.29%</td><td class="left">'Vaily'</td></tr>
     <tr><td class="num"> 170/1045</td><td class="num"> 26/189</td><td class="num"> 15.88%</td><td class="left">'jumbo'</td></tr>
+    <tr><td class="num"> 146/1045</td><td class="num"> 40/189</td><td class="num"> 15.07%</td><td class="left">'l'ane'</td></tr>
     <tr><td class="num"> 156/1045</td><td class="num"> 24/189</td><td class="num"> 14.59%</td><td class="left">'jdcampo'</td></tr>
     <tr><td class="num"> 125/1045</td><td class="num"> 55/189</td><td class="num"> 14.59%</td><td class="left">'Vlad'</td></tr>
     <tr><td class="num"> 149/1045</td><td class="num"> 30/189</td><td class="num"> 14.51%</td><td class="left">'Chris'</td></tr>
@@ -144,6 +145,8 @@
     <tr><td class="num"> 160/1045</td><td class="num"> 15/189</td><td class="num"> 14.18%</td><td class="left">'AkRa'</td></tr>
     <tr><td class="num"> 156/1045</td><td class="num"> 17/189</td><td class="num"> 14.02%</td><td class="left">'Zak'</td></tr>
     <tr><td class="num"> 163/1045</td><td class="num"> 10/189</td><td class="num"> 14.02%</td><td class="left">'tjRaven'</td></tr>
+    <tr><td class="num"> 129/1045</td><td class="num"> 41/189</td><td class="num"> 13.78%</td><td class="left">'Alexander J'</td></tr>
+    <tr><td class="num"> 149/1045</td><td class="num"> 19/189</td><td class="num"> 13.61%</td><td class="left">'Zephyr'</td></tr>
     <tr><td class="num"> 131/1045</td><td class="num"> 36/189</td><td class="num"> 13.53%</td><td class="left">'Enrymather'</td></tr>
     <tr><td class="num"> 164/1045</td><td class="num">  0/189</td><td class="num"> 13.29%</td><td class="left">'Bent'</td></tr>
     <tr><td class="num"> 124/1045</td><td class="num"> 33/189</td><td class="num"> 12.72%</td><td class="left">'joseba'</td></tr>

Modified: homepage/input/table-wr.html
===================================================================
--- homepage/input/table-wr.html	2009-10-19 16:18:57 UTC (rev 1835)
+++ homepage/input/table-wr.html	2009-11-02 12:34:01 UTC (rev 1836)
@@ -1,48 +1,49 @@
   <table>
-    <caption>$$Worldrecord_Statistics$$ $$September$$ 2009</caption>
+    <caption>$$Worldrecord_Statistics$$ $$October$$ 2009</caption>
     <colgroup><col width="80"><col width="80"><col width="470"></colgroup>
     <tr><th>$$total$$</th><th>$$shared$$</th><th class="left">$$user$$</th></tr>
-    <tr><td class="num">868</td><td class="num">241</td><td class="left">'Moneymaker'</td></tr>
-    <tr><td class="num">381</td><td class="num">180</td><td class="left">'Medimaster'</td></tr>
-    <tr><td class="num">139</td><td class="num">112</td><td class="left">'daydreamer'</td></tr>
-    <tr><td class="num">114</td><td class="num">112</td><td class="left">'Crystalicum'</td></tr>
+    <tr><td class="num">862</td><td class="num">239</td><td class="left">'Moneymaker'</td></tr>
+    <tr><td class="num">383</td><td class="num">180</td><td class="left">'Medimaster'</td></tr>
+    <tr><td class="num">138</td><td class="num">111</td><td class="left">'daydreamer'</td></tr>
+    <tr><td class="num">113</td><td class="num">111</td><td class="left">'Crystalicum'</td></tr>
     <tr><td class="num"> 97</td><td class="num"> 65</td><td class="left">'Stupid'</td></tr>
-    <tr><td class="num"> 69</td><td class="num"> 64</td><td class="left">'Johannes'</td></tr>
-    <tr><td class="num"> 61</td><td class="num"> 56</td><td class="left">'dev0'</td></tr>
+    <tr><td class="num"> 68</td><td class="num"> 63</td><td class="left">'Johannes'</td></tr>
+    <tr><td class="num"> 64</td><td class="num"> 58</td><td class="left">'dev0'</td></tr>
     <tr><td class="num"> 57</td><td class="num"> 56</td><td class="left">'Mentist'</td></tr>
-    <tr><td class="num"> 48</td><td class="num"> 40</td><td class="left">'Daisy'</td></tr>
+    <tr><td class="num"> 47</td><td class="num"> 39</td><td class="left">'Daisy'</td></tr>
     <tr><td class="num"> 33</td><td class="num"> 29</td><td class="left">'Alexandros'</td></tr>
     <tr><td class="num"> 31</td><td class="num"> 22</td><td class="left">'Emmanuel'</td></tr>
     <tr><td class="num"> 30</td><td class="num"> 22</td><td class="left">'Malla'</td></tr>
-    <tr><td class="num"> 30</td><td class="num"> 25</td><td class="left">'Duffy'</td></tr>
+    <tr><td class="num"> 30</td><td class="num"> 29</td><td class="left">'Angolino'</td></tr>
+    <tr><td class="num"> 29</td><td class="num"> 24</td><td class="left">'Duffy'</td></tr>
     <tr><td class="num"> 29</td><td class="num"> 29</td><td class="left">'Ghatotkacha'</td></tr>
-    <tr><td class="num"> 25</td><td class="num"> 24</td><td class="left">'Angolino'</td></tr>
-    <tr><td class="num"> 22</td><td class="num"> 22</td><td class="left">'Great Scott'</td></tr>
-    <tr><td class="num"> 21</td><td class="num"> 19</td><td class="left">'Zekobah'</td></tr>
-    <tr><td class="num"> 21</td><td class="num"> 21</td><td class="left">'joseba' + 'Iceshark7'</td></tr>
+    <tr><td class="num"> 26</td><td class="num"> 24</td><td class="left">'Zekobah'</td></tr>
+    <tr><td class="num"> 21</td><td class="num"> 21</td><td class="left">'joseba' + 'Iceshark7' + 'Great Scott'</td></tr>
     <tr><td class="num"> 19</td><td class="num"> 18</td><td class="left">'Django'</td></tr>
     <tr><td class="num"> 18</td><td class="num"> 18</td><td class="left">'ryujun'</td></tr>
-    <tr><td class="num"> 14</td><td class="num"> 14</td><td class="left">'ged'</td></tr>
+    <tr><td class="num"> 15</td><td class="num"> 14</td><td class="left">'Another'</td></tr>
+    <tr><td class="num"> 14</td><td class="num"> 14</td><td class="left">'ged' + 'Ludmian'</td></tr>
     <tr><td class="num"> 13</td><td class="num">  9</td><td class="left">'Ronald'</td></tr>
-    <tr><td class="num"> 13</td><td class="num"> 12</td><td class="left">'Another' + 'HuB34'</td></tr>
-    <tr><td class="num"> 13</td><td class="num"> 13</td><td class="left">'Safalra' + 'Ludmian'</td></tr>
+    <tr><td class="num"> 13</td><td class="num"> 12</td><td class="left">'HuB34'</td></tr>
+    <tr><td class="num"> 13</td><td class="num"> 13</td><td class="left">'Safalra'</td></tr>
     <tr><td class="num"> 12</td><td class="num"> 10</td><td class="left">'B-Huff'</td></tr>
     <tr><td class="num"> 12</td><td class="num"> 11</td><td class="left">'H-J.Epting'</td></tr>
+    <tr><td class="num"> 10</td><td class="num">  9</td><td class="left">'l'ane'</td></tr>
     <tr><td class="num">  9</td><td class="num">  9</td><td class="left">'fabian'</td></tr>
     <tr><td class="num">  8</td><td class="num">  6</td><td class="left">'ShadowPhrogg32642342'</td></tr>
     <tr><td class="num">  8</td><td class="num">  7</td><td class="left">'Chocolate Zero'</td></tr>
-    <tr><td class="num">  8</td><td class="num">  8</td><td class="left">'bojster' + 'casmith_789' + 'dpl'</td></tr>
+    <tr><td class="num">  8</td><td class="num">  8</td><td class="left">'casmith_789' + 'Zephyr' + 'dpl' + 'bojster'</td></tr>
     <tr><td class="num">  7</td><td class="num">  6</td><td class="left">'Dime'</td></tr>
     <tr><td class="num">  7</td><td class="num">  7</td><td class="left">'Gloop'</td></tr>
     <tr><td class="num">  6</td><td class="num">  5</td><td class="left">'Edgar_Flesk'</td></tr>
     <tr><td class="num">  6</td><td class="num">  6</td><td class="left">'ABS'</td></tr>
     <tr><td class="num">  5</td><td class="num">  3</td><td class="left">'Breezy'</td></tr>
-    <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Guglielmo' + 'Thomas' + 'Chris' + 'Ralf'</td></tr>
-    <tr><td class="num">  4</td><td class="num">  4</td><td class="left">'Taztunes' + 'U-Punkt' + 'Raoul' + 'J3FF' + 'para_doks' + 'mecke' + 'Tobias' + 'Lukas'</td></tr>
+    <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Chris' + 'Guglielmo' + 'Thomas' + 'Ralf'</td></tr>
+    <tr><td class="num">  4</td><td class="num">  4</td><td class="left">'J3FF' + 'mecke' + 'Taztunes' + 'U-Punkt' + 'Raoul' + 'para_doks' + 'Tobias' + 'Lukas'</td></tr>
     <tr><td class="num">  3</td><td class="num">  2</td><td class="left">'Hairball' + 'Stephanie'</td></tr>
     <tr><td class="num">  3</td><td class="num">  3</td><td class="left">'GiannuzzITA' + 'Wuzzy'</td></tr>
-    <tr><td class="num">  2</td><td class="num">  2</td><td class="left">'alfred69' + 'ReasonAnce' + 'mrduke' + 'Sigma' + 'geembo_90' + 'Tiza' + 'Drotten' + 'Neophilus' + 'Sim_Ed' + 'Nicol?s' + 'Cyphase' + 'Andy' + 'hendrik' + 'Austin' + 'Snaily' + 'Craven' + 'Sopoforic' + 'Ingo' + 'serpent'</td></tr>
+    <tr><td class="num">  2</td><td class="num">  2</td><td class="left">'ReasonAnce' + 'mrduke' + 'Drotten' + 'Cyphase' + 'hendrik' + 'Sopoforic' + 'alfred69' + 'Sigma' + 'geembo_90' + 'Tiza' + 'Neophilus' + 'Sim_Ed' + 'Nicol?s' + 'Andy' + 'Austin' + 'Snaily' + 'Craven' + 'Ingo' + 'serpent'</td></tr>
     <tr><td class="num">  1</td><td class="num">  0</td><td class="left">'Feynman' + 'alain' + 'colonel crayon' + 'Gorn' + 'Nat'</td></tr>
-    <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'Agares' + 'Tiger' + 'Zak' + 'Daniel' + 'Slav' + 'niebie' + 'Andreas' + 'AlephD' + 'Samuel' + 'tjRaven' + 'Mark P.' + 'oblo' + 'Pascal' + 'hdwow' + 'B-man' + 'Asbel' + 'Vlad' + 'cuoha' + 'Bent' + 'Vaily' + 'Antonio EE' + 'JuSt' + 'Timo'</td></tr>
-    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'AQZ' + 'tasker' + 'jumbo' + 'Miel56' + 'Zhura' + 'Alf' + 'Turbogurk' + 'Gottseinsohn' + 'ntaeijr' + 'Eselchen' + 'ael' + 'biotopa' + 'Ale' + 'brynn' + 'IntKecsk' + 'purplerainbow' + 'Adonica' + 'Joona' + 'Sandra' + 'schmusi20' + 'Kosby' + 'Magnus and Susi' + 'WP319' + 'Kevin' + 'Shaez' + 'jdrexler' + 'xmouse' + 'erich' + 'Vinksu' + 'Uli' + 'Alex' + 'Valkyrie2' + 'Fred_the_wise' + 'Jan' + 'jdcampo' + 'Freshman' + 'Little_Mole' + 'Kroetchen' + 'crypto_rsa' + 'Harry Lim' + 'Sequoyah' + 'AkRa' + 'Momcat' + 'Tomson' + 'NorthForty' + 'Mecki' + 'The red O' + 'gringer' + 'IIkka' + 'Jeffrey S' + 'Nfol' + 'Marc-Hendrik' + 'Kadu' + 'shoki' + 'Enrymather' + 'jojo' + 'WesleyCrusher' + 'evane' + 'Jinajon' + 'rima' + 'Klaus' + 'MicWa' + 'AsuCaga' + 'oxyd4ever' + 'Jonyzz' + 'Rugby4ever' + 'Archcorenth' + 'Meeve' + 'mhatta' + 'Hans-HD' + 'un_guru' + 'Paulus' + 'krazy62' + 'Dvorhagen' + 'Sparkey' + 'ais523' + 'Holger' !
 + 'Ingo_K' + 'Ant' + 'Melanie' + 'IChrisI' + 'redsantz' + 'Markus' + 'Michael' + 'Liam Sheehan' + 'Tarim' + 'Agnieszka'</td></tr>
+    <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'Agares' + 'Slav' + 'Andreas' + 'Samuel' + 'Pascal' + 'hdwow' + 'Asbel' + 'B-man' + 'cuoha' + 'Vaily' + 'Antonio EE' + 'Tiger' + 'Zak' + 'Daniel' + 'niebie' + 'AlephD' + 'tjRaven' + 'Mark P.' + 'oblo' + 'Vlad' + 'Bent' + 'JuSt' + 'Timo'</td></tr>
+    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'tasker' + 'Miel56' + 'Alf' + 'Turbogurk' + 'Gottseinsohn' + 'Eselchen' + 'Ale' + 'IntKecsk' + 'brynn' + 'purplerainbow' + 'Alexander J' + 'Adonica' + 'Joona' + 'Kosby' + 'schmusi20' + 'WP319' + 'Shaez' + 'erich' + 'Uli' + 'Alex' + 'jdcampo' + 'Kroetchen' + 'Harry Lim' + 'Sequoyah' + 'AkRa' + 'NorthForty' + 'Jeffrey S' + 'Marc-Hendrik' + 'Kadu' + 'jojo' + 'WesleyCrusher' + 'oxyd4ever' + 'Archcorenth' + 'mhatta' + 'Paulus' + 'Dvorhagen' + 'redsantz' + 'Liam Sheehan' + 'Agnieszka' + 'AQZ' + 'jumbo' + 'Zhura' + 'ntaeijr' + 'ael' + 'biotopa' + 'Sandra' + 'Magnus and Susi' + 'Kevin' + 'jdrexler' + 'xmouse' + 'Vinksu' + 'Valkyrie2' + 'Fred_the_wise' + 'Jan' + 'Little_Mole' + 'Freshman' + 'crypto_rsa' + 'Momcat' + 'Tomson' + 'Mecki' + 'The red O' + 'gringer' + 'IIkka' + 'Nfol' + 'shoki' + 'Enrymather' + 'evane' + 'Jinajon' + 'rima' + 'Klaus' + 'MicWa' + 'AsuCaga' + 'Jonyzz' + 'Rugby4ever' + 'Meeve' + 'Hans-HD!
 ' + 'un_guru' + 'krazy62' + 'Sparkey' + 'Holger' + 'ais523' + 'Ingo_K' + 'Ant' + 'Melanie' + 'IChrisI' + 'Markus' + 'Michael' + 'Tarim'</td></tr>
   </table>

Modified: homepage/input/userlist.html
===================================================================
--- homepage/input/userlist.html	2009-10-19 16:18:57 UTC (rev 1835)
+++ homepage/input/userlist.html	2009-11-02 12:34:01 UTC (rev 1836)
@@ -12,6 +12,7 @@
     <li>Ale</li>
     <li>AlephD</li>
     <li>Alex</li>
+    <li>Alexander J</li>
     <li>Alexandros</li>
     <li>Alf</li>
     <li>alfred69</li>
@@ -105,6 +106,7 @@
     <li>Kosby</li>
     <li>krazy62</li>
     <li>Kroetchen</li>
+    <li>l'ane</li>
     <li>Liam Sheehan</li>
     <li>Little_Mole</li>
     <li>Ludmian</li>
@@ -190,6 +192,7 @@
     <li>xmouse</li>
     <li>Zak</li>
     <li>Zekobah</li>
+    <li>Zephyr</li>
     <li>Zhura</li>
   </ul>
 </div>



From ral at mail.berlios.de  Mon Nov  2 14:11:38 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 2 Nov 2009 14:11:38 +0100
Subject: [Enigma-game-svn] r1837 - in trunk: data/levels/enigma_experimental
	src/gui
Message-ID: <200911021311.nA2DBcmI028147@sheep.berlios.de>

Author: ral
Date: 2009-11-02 14:11:34 +0100 (Mon, 02 Nov 2009)
New Revision: 1837

Modified:
   trunk/data/levels/enigma_experimental/floors_1.xml
   trunk/src/gui/OptionsMenu.cc
   trunk/src/gui/OptionsMenu.hh
Log:
Trunk 1.1:
- fix gamma button CPU dependent failures
- add missing samba floor to all floor sample level

Modified: trunk/data/levels/enigma_experimental/floors_1.xml
===================================================================
--- trunk/data/levels/enigma_experimental/floors_1.xml	2009-11-02 12:34:01 UTC (rev 1836)
+++ trunk/data/levels/enigma_experimental/floors_1.xml	2009-11-02 13:11:34 UTC (rev 1837)
@@ -96,6 +96,8 @@
 {"fl_sahara_framed", _text="fl_sahara_framed"},
 {"fl_sand", _text="fl_sand"},
 {"fl_sand_framed", _text="fl_sand_framed"},
+{"fl_samba", _text="fl_samba"},
+{"fl_samba_framed", _text="fl_samba_framed"},
 {"fl_space", _text="fl_space"},
 {"fl_stone", _text="fl_stone"},
 {"fl_stone_framed", _text="fl_stone_framed"},

Modified: trunk/src/gui/OptionsMenu.cc
===================================================================
--- trunk/src/gui/OptionsMenu.cc	2009-11-02 12:34:01 UTC (rev 1836)
+++ trunk/src/gui/OptionsMenu.cc	2009-11-02 13:11:34 UTC (rev 1837)
@@ -323,7 +323,7 @@
     int GammaButton::get_value() const
     { 
         double gamma = options::GetDouble ("Gamma");
-        int value = round_down<int>(gamma * 5.0);
+        int value = round_down<int>(gamma * 5.0 + 0.1);
         return value;
     }
     

Modified: trunk/src/gui/OptionsMenu.hh
===================================================================
--- trunk/src/gui/OptionsMenu.hh	2009-11-02 12:34:01 UTC (rev 1836)
+++ trunk/src/gui/OptionsMenu.hh	2009-11-02 13:11:34 UTC (rev 1837)
@@ -126,7 +126,7 @@
         void set_value(int value);
         std::string get_text(int value) const;
     public:
-        GammaButton ();        
+        GammaButton();        
     };
     
 /* -------------------- Functions -------------------- */



From ral at mail.berlios.de  Tue Nov  3 00:24:08 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Tue, 3 Nov 2009 00:24:08 +0100
Subject: [Enigma-game-svn] r1838 - in trunk: doc/reference/images src/gui
	src/lev
Message-ID: <200911022324.nA2NO82X014908@sheep.berlios.de>

Author: ral
Date: 2009-11-03 00:24:05 +0100 (Tue, 03 Nov 2009)
New Revision: 1838

Modified:
   trunk/doc/reference/images/
   trunk/src/gui/LevelPackConfig.cc
   trunk/src/lev/PersistentIndex.cc
   trunk/src/lev/PersistentIndex.hh
   trunk/src/lev/Proxy.cc
Log:
Trunk 1.1: 
- svn ignore refman generated images
- levelpack registration: handle system updates on user path
  - handle normal packs as well as enigma_cross packs
  - evaluate releases and revisions of indices
  - just load matching updates
  - handle wizard mode and composer for level admins
Note:
- deinstall any enigma_cross indices that you installed of unofficial trunk
  enigma versions between release 1.01 and now. They do not suit the naming
  conventions.



Property changes on: trunk/doc/reference/images
___________________________________________________________________
Name: svn:ignore
   - Makefile
Makefile.in
*.pdf

   + Makefile
Makefile.in
*.pdf
ac_bug.png
ac_horse.png
ac_marble_black.png
ac_marble_white.png
ac_pearl_white.png
ac_rotor.png
ac_top.png
fl_abyss.png
fl_adhesionless.png
fl_aquamarine.png
fl_aquamarine_framed.png
fl_bast.png
fl_bast_framed.png
fl_bluegray.png
fl_bluegray_framed.png
fl_bluegreen.png
fl_bluegreen_framed.png
fl_blueslab.png
fl_blueslab_framed.png
fl_brick.png
fl_brick_framed.png
fl_bridge_bw_closed.png
fl_bridge_gc_closed.png
fl_bright.png
fl_bright_framed.png
fl_concrete.png
fl_concrete_framed.png
fl_dark.png
fl_dark_framed.png
fl_darkgray.png
fl_darkgray_framed.png
fl_dunes.png
fl_dunes_framed.png
fl_fake_trigger.png
fl_fake_trigger_framed.png
fl_gravel.png
fl_gravel_framed.png
fl_gray.png
fl_gray_framed.png
fl_hay.png
fl_hay_framed.png
fl_himalaya.png
fl_himalaya_framed.png
fl_ice.png
fl_ice_heating.png
fl_inverse_gray.png
fl_inverse_white.png
fl_ivory.png
fl_ivory_framed.png
fl_lawn.png
fl_lawn_c.png
fl_lawn_e.png
fl_lawn_e2.png
fl_lawn_f.png
fl_lawn_f2.png
fl_lawn_g.png
fl_lawn_g2.png
fl_lawn_h.png
fl_lawn_h2.png
fl_lawn_i.png
fl_lawn_i2.png
fl_lawn_j.png
fl_lawn_j2.png
fl_marble.png
fl_marble_framed.png
fl_metal.png
fl_metal_2.png
fl_metal_3.png
fl_metal_4.png
fl_metal_5.png
fl_metal_6.png
fl_metal_7.png
fl_metal_framed.png
fl_mortar.png
fl_mortar_framed.png
fl_pinkbumps.png
fl_pinkbumps_framed.png
fl_plank.png
fl_plank_framed.png
fl_platinum.png
fl_platinum_framed.png
fl_red.png
fl_red_framed.png
fl_redslab.png
fl_redslab_framed.png
fl_rock.png
fl_rock_framed.png
fl_rough.png
fl_rough_framed.png
fl_sahara.png
fl_sahara_framed.png
fl_samba.png
fl_samba_2.png
fl_samba_framed.png
fl_sand.png
fl_sand_framed.png
fl_slope.png
fl_slope_2.png
fl_slope_3.png
fl_slope_4.png
fl_slope_b.png
fl_slope_b2.png
fl_slope_b3.png
fl_slope_b4.png
fl_slope_c.png
fl_slope_c2.png
fl_slope_c3.png
fl_slope_c4.png
fl_slope_f.png
fl_space.png
fl_stone.png
fl_stone_framed.png
fl_swamp.png
fl_swamp_heating.png
fl_thief.png
fl_thief_capture.png
fl_thief_drunken.png
fl_tigris.png
fl_tigris_framed.png
fl_water.png
fl_water_heating.png
fl_white.png
fl_white_framed.png
fl_wood.png
fl_wood_3.png
fl_wood_framed.png
fl_wood_framed_2.png
fl_woven.png
fl_woven_framed.png
fl_yinyang_yang.png
fl_yinyang_yin.png
it_bag.png
it_banana.png
it_blocker.png
it_bomb_black.png
it_bomb_white.png
it_bottle_broken.png
it_bottle_idle.png
it_brush.png
it_burnable_ash.png
it_burnable_burning.png
it_burnable_fireproof.png
it_burnable_oil.png
it_cherry.png
it_coffee.png
it_coin_l.png
it_coin_m.png
it_coin_s.png
it_crack_abyss.png
it_crack_abyss_2.png
it_crack_abyss_3.png
it_crack_water.png
it_crack_water_2.png
it_crack_water_3.png
it_cross.png
it_death.png
it_document.png
it_drop.png
it_dynamite.png
it_dynamite_burning.png
it_explosion.png
it_extinguisher.png
it_extinguisher_2.png
it_extinguisher_3.png
it_extralife.png
it_flag_black.png
it_flag_white.png
it_floppy.png
it_glasses.png
it_glasses_broken.png
it_hammer.png
it_key.png
it_landmine.png
it_laser.png
it_magicwand.png
it_magnet_off.png
it_magnet_on.png
it_meditation_bump.png
it_meditation_caldera.png
it_meditation_dent.png
it_meditation_hill.png
it_meditation_hollow.png
it_meditation_volcano.png
it_pencil.png
it_pin.png
it_pipe.png
it_pipe_b.png
it_pipe_c.png
it_pipe_d.png
it_pipe_e.png
it_pipe_f.png
it_pipe_g.png
it_pipe_h.png
it_pipe_i.png
it_pipe_j.png
it_puller.png
it_puller_2.png
it_puller_3.png
it_puller_4.png
it_ring.png
it_rubberband.png
it_seed.png
it_sensor.png
it_sensor_exit.png
it_shogun_l.png
it_shogun_m.png
it_shogun_s.png
it_spade.png
it_spoon.png
it_spring_drop.png
it_spring_keep.png
it_springboard.png
it_squashed.png
it_strip.png
it_strip_2.png
it_strip_3.png
it_strip_4.png
it_strip_b.png
it_strip_b2.png
it_strip_b3.png
it_strip_b4.png
it_strip_c.png
it_strip_c2.png
it_strip_c3.png
it_strip_c4.png
it_strip_d.png
it_strip_d2.png
it_strip_d3.png
it_strip_d4.png
it_surprise.png
it_sword.png
it_trap.png
it_trigger.png
it_umbrella.png
it_vortex.png
it_vortex_4.png
it_weight.png
it_wormhole.png
it_wrench.png
it_yinyang.png
st_actorimpulse.png
st_ancient.png
st_beads.png
st_blocker.png
st_bluegray.png
st_bluesand.png
st_bluesand_2.png
st_bluesand_3.png
st_bluesand_4.png
st_bluesand_b.png
st_bluesand_b2.png
st_bluesand_b3.png
st_bluesand_b4.png
st_bluesand_c.png
st_bluesand_c2.png
st_bluesand_c3.png
st_bluesand_c4.png
st_bluesand_d.png
st_bluesand_d2.png
st_bluesand_d3.png
st_bluesand_d4.png
st_blur_cross.png
st_blur_straight.png
st_boulder.png
st_boulder_b.png
st_boulder_c.png
st_boulder_d.png
st_box_hay.png
st_box_hay_growing.png
st_box_rock.png
st_box_wood.png
st_box_wood_2.png
st_box_wood_growing.png
st_brake.png
st_break_black.png
st_break_boulder.png
st_break_bug.png
st_break_oxydc.png
st_break_plain.png
st_break_white.png
st_brick.png
st_brick_2.png
st_brick_3.png
st_brick_4.png
st_brick_b.png
st_brick_b2.png
st_brick_b3.png
st_brick_b4.png
st_brick_c.png
st_brick_c2.png
st_brick_c3.png
st_brick_c4.png
st_brick_d.png
st_brick_d2.png
st_brick_d3.png
st_brick_d4.png
st_brownie.png
st_brownmarble.png
st_brownpyramide.png
st_camouflage.png
st_charge_minus.png
st_charge_plus.png
st_charge_zero.png
st_chess_black.png
st_chess_white.png
st_coinslot.png
st_concrete.png
st_darkglass.png
st_darkgray.png
st_death.png
st_death_light.png
st_disco.png
st_disco_2.png
st_disco_3.png
st_dispenser_bombblack.png
st_dispenser_bombwhite.png
st_dispenser_dynamite.png
st_dispenser_extralife.png
st_door_d_ew.png
st_door_d_ew_g.png
st_door_d_ns.png
st_door_d_ns_7.png
st_fakeoxyd_blink_0003.png
st_flash.png
st_flat.png
st_flat_break.png
st_flat_cracked.png
st_flat_fire.png
st_floppy_off.png
st_floppy_on.png
st_fourswitch.png
st_granite.png
st_grate_cross.png
st_grate_framed.png
st_greenbrown.png
st_greenbrown_growing.png
st_greengray.png
st_ice.png
st_jamb_black.png
st_jamb_white.png
st_key_off.png
st_key_on.png
st_knight.png
st_laser_e_0001.png
st_laser_e_0006.png
st_laser_n_0001.png
st_laser_n_0006.png
st_laser_s_0001.png
st_laser_s_0006.png
st_laser_w_0001.png
st_laser_w_0006.png
st_lightglass.png
st_lightpassenger.png
st_mail.png
st_mail_2.png
st_mail_3.png
st_mail_4.png
st_metal.png
st_mirror_movable_01.png
st_mirror_movable_02.png
st_mirror_movable_03.png
st_mirror_movable_04.png
st_mirror_movable_05.png
st_mirror_movable_06.png
st_mirror_movable_07.png
st_mirror_movable_08.png
st_mirror_movable_09.png
st_mirror_movable_10.png
st_mirror_movable_11.png
st_mirror_movable_12.png
st_mirror_movable_13.png
st_mirror_movable_14.png
st_mirror_movable_15.png
st_mirror_movable_16.png
st_mirror_movable_17.png
st_mirror_movable_18.png
st_mirror_movable_19.png
st_mirror_movable_20.png
st_mirror_static_01.png
st_mirror_static_02.png
st_mirror_static_03.png
st_mirror_static_04.png
st_mirror_static_05.png
st_mirror_static_06.png
st_mirror_static_07.png
st_mirror_static_08.png
st_mirror_static_09.png
st_mirror_static_10.png
st_mirror_static_11.png
st_mirror_static_12.png
st_mirror_static_13.png
st_mirror_static_14.png
st_mirror_static_15.png
st_mirror_static_16.png
st_mirror_static_17.png
st_mirror_static_18.png
st_mirror_static_19.png
st_mirror_static_20.png
st_monoflop.png
st_monoflop_2.png
st_oneway.png
st_oneway_2.png
st_oneway_3.png
st_oneway_4.png
st_oneway_b.png
st_oneway_b2.png
st_oneway_b3.png
st_oneway_b4.png
st_oneway_c.png
st_oneway_c2.png
st_oneway_c3.png
st_oneway_c4.png
st_oxyd_color_0001.png
st_oxyd_color_0002.png
st_oxyd_color_0003.png
st_oxyd_color_0004.png
st_oxyd_color_0005.png
st_oxyd_color_0006.png
st_oxyd_color_0007.png
st_oxyd_color_0008.png
st_oxyd_color_0009.png
st_oxyd_color_0010.png
st_oxyd_color_0011.png
st_oxyd_color_0012.png
st_oxyd_color_0096.png
st_oxyd_color_0097.png
st_oxyda.png
st_oxyda_open.png
st_oxydb.png
st_oxydb_open.png
st_oxydc.png
st_oxydc_open.png
st_oxydd.png
st_oxyde.png
st_panel.png
st_panel_2.png
st_panel_3.png
st_panel_4.png
st_panel_b.png
st_panel_b2.png
st_panel_b3.png
st_panel_b4.png
st_panel_c.png
st_panel_c2.png
st_panel_c3.png
st_panel_c4.png
st_panel_d.png
st_panel_d2.png
st_panel_d3.png
st_panel_d4.png
st_passage_black_cross.png
st_passage_black_frame.png
st_passage_black_slash.png
st_passage_black_square.png
st_passage_white_cross.png
st_passage_white_frame.png
st_passage_white_slash.png
st_passage_white_square.png
st_pinkbumps.png
st_plaster.png
st_plop_slate.png
st_portal_horse.png
st_pull.png
st_purplegray.png
st_purplemarble.png
st_puzzle_blue.png
st_puzzle_blue_2.png
st_puzzle_blue_3.png
st_puzzle_blue_4.png
st_puzzle_blue_b.png
st_puzzle_blue_b2.png
st_puzzle_blue_b3.png
st_puzzle_blue_b4.png
st_puzzle_blue_c.png
st_puzzle_blue_c2.png
st_puzzle_blue_c3.png
st_puzzle_blue_c4.png
st_puzzle_blue_d.png
st_puzzle_blue_d2.png
st_puzzle_blue_d3.png
st_puzzle_blue_d4.png
st_puzzle_blue_hollow.png
st_puzzle_blue_hollow_2.png
st_puzzle_blue_hollow_3.png
st_puzzle_blue_hollow_4.png
st_puzzle_blue_hollow_b.png
st_puzzle_blue_hollow_b2.png
st_puzzle_blue_hollow_b3.png
st_puzzle_blue_hollow_b4.png
st_puzzle_blue_hollow_c.png
st_puzzle_blue_hollow_c2.png
st_puzzle_blue_hollow_c3.png
st_puzzle_blue_hollow_c4.png
st_puzzle_blue_hollow_d.png
st_puzzle_blue_hollow_d2.png
st_puzzle_blue_hollow_d3.png
st_puzzle_blue_hollow_d4.png
st_puzzle_yellow.png
st_puzzle_yellow_2.png
st_puzzle_yellow_3.png
st_puzzle_yellow_4.png
st_puzzle_yellow_b.png
st_puzzle_yellow_b2.png
st_puzzle_yellow_b3.png
st_puzzle_yellow_b4.png
st_puzzle_yellow_c.png
st_puzzle_yellow_c2.png
st_puzzle_yellow_c3.png
st_puzzle_yellow_c4.png
st_puzzle_yellow_d.png
st_puzzle_yellow_d2.png
st_puzzle_yellow_d3.png
st_puzzle_yellow_d4.png
st_puzzle_yellow_hollow.png
st_puzzle_yellow_hollow_2.png
st_puzzle_yellow_hollow_3.png
st_puzzle_yellow_hollow_4.png
st_puzzle_yellow_hollow_b.png
st_puzzle_yellow_hollow_b2.png
st_puzzle_yellow_hollow_b3.png
st_puzzle_yellow_hollow_b4.png
st_puzzle_yellow_hollow_c.png
st_puzzle_yellow_hollow_c2.png
st_puzzle_yellow_hollow_c3.png
st_puzzle_yellow_hollow_c4.png
st_puzzle_yellow_hollow_d.png
st_puzzle_yellow_hollow_d2.png
st_puzzle_yellow_hollow_d3.png
st_puzzle_yellow_hollow_d4.png
st_quake_break.png
st_rawglass.png
st_rawglass_quad.png
st_redbrown.png
st_redfiber.png
st_redmarble.png
st_redrock.png
st_rotator_ccw.png
st_rotator_cw.png
st_rubberband.png
st_scissors.png
st_shogun.png
st_shogun_2.png
st_shogun_3.png
st_shogun_4.png
st_shogun_5.png
st_shogun_6.png
st_shogun_7.png
st_spitter_idle.png
st_stoneimpulse.png
st_stoneimpulse_6.png
st_stoneimpulse_hollow.png
st_surprise.png
st_swap.png
st_switch.png
st_switch_black.png
st_switch_white.png
st_thief.png
st_thief_capture.png
st_thief_drunken.png
st_tigris.png
st_timer.png
st_timer_2.png
st_turnstile.png
st_turnstile_green.png
st_volcano_growing.png
st_window_blue_2.png
st_window_blue_3.png
st_window_blue_4.png
st_window_blue_b.png
st_window_blue_b2.png
st_window_blue_b3.png
st_window_blue_b4.png
st_window_blue_c.png
st_window_blue_c2.png
st_window_blue_c3.png
st_window_blue_c4.png
st_window_blue_d.png
st_window_blue_d2.png
st_window_blue_d3.png
st_window_blue_d4.png
st_window_green_2.png
st_window_green_3.png
st_window_green_4.png
st_window_green_b.png
st_window_green_b2.png
st_window_green_b3.png
st_window_green_b4.png
st_window_green_c.png
st_window_green_c2.png
st_window_green_c3.png
st_window_green_c4.png
st_window_green_d.png
st_window_green_d2.png
st_window_green_d3.png
st_window_green_d4.png
st_woven.png
st_yellow.png
st_yinyang.png
st_yinyang_inactive.png


Modified: trunk/src/gui/LevelPackConfig.cc
===================================================================
--- trunk/src/gui/LevelPackConfig.cc	2009-11-02 13:11:34 UTC (rev 1837)
+++ trunk/src/gui/LevelPackConfig.cc	2009-11-02 23:24:05 UTC (rev 1838)
@@ -108,7 +108,7 @@
         
         if (indexName.empty())
             // new levelpack
-            packIndex = new lev::PersistentIndex(" ", false, false,
+            packIndex = new lev::PersistentIndex(" ", false, true, false,
                     INDEX_DEFAULT_PACK_LOCATION,  "", 
                     INDEX_STD_FILENAME, lev::Index::getCurrentGroup()); // mark as incomplete
         else

Modified: trunk/src/lev/PersistentIndex.cc
===================================================================
--- trunk/src/lev/PersistentIndex.cc	2009-11-02 13:11:34 UTC (rev 1837)
+++ trunk/src/lev/PersistentIndex.cc	2009-11-02 23:24:05 UTC (rev 1838)
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2006, 2007 Ronald Lamprecht
+ * Copyright (C) 2006,2007,2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -65,27 +65,88 @@
     PersistentIndex * PersistentIndex::historyIndex = NULL;
     std::vector<PersistentIndex *> PersistentIndex::indexCandidates;
     
-    void PersistentIndex::checkCandidate(PersistentIndex * candidate) {
-        if (candidate->getName().empty() ||
-        	candidate->getCompatibility() > ENIGMACOMPATIBITLITY) {
+    void PersistentIndex::checkCandidate(std::string thePackPath, bool systemOnly, bool userOwned,
+            bool isAuto, bool isSystemCross, double defaultLocation, std::string anIndexName, 
+            std::string theIndexFilename, std::string aGroupName) {
+        int minRevision = 0;
+        int systemPackIndex = -1;
+        if (!isAuto) {
+            for (int i = 0; i < indexCandidates.size(); i++) {
+                if (indexCandidates[i]->packPath == thePackPath) {
+                    if (!systemOnly && isSystemCross) {   // a system cross index update like enigma_cross
+//                        Log << "cross update check : " << theIndexFilename << "\n";
+                        std::string::size_type p = theIndexFilename.find_last_of('_');
+                        if (p == std::string::npos)  // ignore wizard saves of system cross indices 
+                            return;
+                        std::string indexBase = theIndexFilename.substr(0, p);
+                        if ( indexBase + ".xml" == indexCandidates[i]->indexFilename) {
+                            if (theIndexFilename == indexBase + ecl::strf("_%d.xml", indexCandidates[i]->release)) {
+                                // it is an update to an already loaded system pack
+                                systemPackIndex = i;
+                                minRevision = indexCandidates[i]->revision + 1;
+                                break;
+                            } else {
+                                // wrong release - reject
+                                return;
+                            }
+                        } else {
+                            // update to another system index
+                            continue;
+                        }
+                    } else if (systemOnly && isSystemCross && theIndexFilename == indexCandidates[i]->indexFilename) {
+//                        Log << "cross second copy check : " << theIndexFilename << "\n";
+                        systemPackIndex = i;
+                        minRevision = indexCandidates[i]->revision + 1;
+                        break;                        
+                    } else if (!isSystemCross) {
+//                        Log << "other update check : " << thePackPath << "\n";
+                        // it is an update to an already loaded system pack
+                        systemPackIndex = i;
+                        userOwned = false;
+                        if (!systemOnly) {  // no changes for multiple sys paths like ./data shadowing installed version
+                            // add release to index name to retrieve matching version, e.g. "index_2.xml"
+                            theIndexFilename = theIndexFilename.insert(theIndexFilename.size() - 4, 
+                                    ecl::strf("_%d", indexCandidates[i]->release));
+                        }
+                        minRevision = indexCandidates[i]->revision + 1;
+                        break;
+                    }
+                }
+            }
+        }
+        PersistentIndex * candidate = new PersistentIndex(thePackPath, systemOnly, userOwned, isAuto,
+                defaultLocation, anIndexName, theIndexFilename, aGroupName);
+        if (candidate->getName().empty() || candidate->getCompatibility() > ENIGMACOMPATIBITLITY) {
             delete candidate;
+//    Log << "candidate check : " << thePackPath << " -- " << theIndexFilename << " -- deleted\n";
         } else {
             // check if new Index is an update of another
-            for (int i = 0; i < indexCandidates.size(); i++) {
-                if (indexCandidates[i]->getName() != candidate->getName()) {
-                    continue;
-                } else if (indexCandidates[i]->getRelease() != candidate->getRelease() ||
-                	indexCandidates[i]->getRevision() >= candidate->getRevision()) {
+            if (systemPackIndex >= 0) {
+                if (indexCandidates[systemPackIndex]->getRevision() >= candidate->getRevision()) {
+//    Log << "candidate check : " << thePackPath << " -- " << theIndexFilename << " -- old revision\n";
                     delete candidate;
                     return;
                 } else {
                     // it is an update
-                    delete indexCandidates[i];
-                    indexCandidates[i] = candidate;
+//    Log << "candidate check : " << thePackPath << " -- " << theIndexFilename << " -- an update\n";
+                    delete indexCandidates[systemPackIndex];
+                    indexCandidates[systemPackIndex] = candidate;
                     return;
                 }
+            } else {
+                // check for levelpacks that would be overriden by the button name
+                for (int i = 0; i < indexCandidates.size(); i++) {
+                    if (indexCandidates[i]->getName() == candidate->getName()) {
+                        // always prefer the first one, the one with more official background
+//    Log << "candidate check : " << thePackPath << " -- " << theIndexFilename << " -- name duplicate\n";
+                        delete candidate;
+                        return;
+                    }
+                }
+                
+//    Log << "candidate check : " << thePackPath << " -- " << theIndexFilename << " -- first one\n";
+                indexCandidates.push_back(candidate);
             }
-            indexCandidates.push_back(candidate);
         }
     }
     
@@ -93,7 +154,7 @@
         DirIter * dirIter;
         DirEntry dirEntry;
         
-        // SysemPath: register dirs and zips with xml-indices 
+        // SystemPath: register dirs and zips with xml-indices 
         std::vector<std::string> sysPaths = app.systemFS->getPaths();
         std::set<std::string> candidates;
         std::set<std::string> candidates2;
@@ -135,10 +196,8 @@
             // register the index just on the system path even if the
             // user has an update on his path. We need to know the release to
             // decide if a user copy is an update
-            PersistentIndex * anIndex = new PersistentIndex(*i, true);
-            anIndex->isUserOwned = false;
+            checkCandidate(*i, true, false);
 //            Log << "precheck: " << *i << "\n";
-            checkCandidate(anIndex);
         }
 
         //add system cross indices
@@ -147,10 +206,9 @@
             while (dirIter->get_next(dirEntry)) {
                 if (!dirEntry.is_dir && dirEntry.name.size() > 4 && 
                         (dirEntry.name.rfind(".xml") == dirEntry.name.size() - 4)) {
-                    PersistentIndex * anIndex = new PersistentIndex("enigma_cross", true, false,
+//                            Log << "enigma cross check: " << dirEntry.name << "\n"; 
+                    checkCandidate("enigma_cross", true, false, false, true,
                             INDEX_DEFAULT_PACK_LOCATION, "", dirEntry.name);
-                    anIndex->isUserOwned = false;
-                    checkCandidate(anIndex);
                 }
             }
         }
@@ -161,13 +219,13 @@
         
         // register index free auto folder
         // this needs to be done prior history registration to avoid outdated proxies
-        PersistentIndex * autoIndex = new PersistentIndex("auto", false, true,
+        PersistentIndex * autoIndex = new PersistentIndex("auto", false, true, true,
                 INDEX_AUTO_PACK_LOCATION, INDEX_AUTO_PACK_NAME);
         autoIndex->isEditable = false;
         Index::registerIndex(autoIndex);
         
         // register team auto not yet registered new files
-        PersistentIndex * teamautoIndex = new PersistentIndex("team_test_new_api", false, true,
+        PersistentIndex * teamautoIndex = new PersistentIndex("team_test_new_api", false, true, true,
                 75000, "test_new_api");
         if (teamautoIndex->size() > 0) {
             teamautoIndex->isEditable = false;
@@ -219,18 +277,27 @@
         for (std::set<std::string>::iterator i = candidates2.begin(); 
                 i != candidates2.end(); i++) {
 //            Log << "sokoball candidate2 " << *i << " - check \n";
-            PersistentIndex * anIndex = new PersistentIndex(*i, false);
-            checkCandidate(anIndex);
+            checkCandidate(*i, false,true);
         }
        
+        //add system cross indices updates
+        dirIter = DirIter::instance(app.userPath + "/levels/enigma_cross");
+        while (dirIter->get_next(dirEntry)) {
+            if (!dirEntry.is_dir && dirEntry.name.size() > 4 && 
+                    (dirEntry.name.rfind(".xml") == dirEntry.name.size() - 4)) {
+                checkCandidate("enigma_cross", false, false, false, true,
+                        INDEX_DEFAULT_PACK_LOCATION, "", dirEntry.name);
+            }
+        }
+        delete dirIter;
+        
         //add user cross indices
         dirIter = DirIter::instance(app.userPath + "/levels/cross");
         while (dirIter->get_next(dirEntry)) {
             if (!dirEntry.is_dir && dirEntry.name.size() > 4 && 
                     (dirEntry.name.rfind(".xml") == dirEntry.name.size() - 4)) {
-                PersistentIndex * anIndex = new PersistentIndex("cross", false, false,
+                checkCandidate("cross", false, true, false, false,
                         INDEX_DEFAULT_PACK_LOCATION, "", dirEntry.name);
-                checkCandidate(anIndex);
             }
         }
         delete dirIter;
@@ -244,7 +311,7 @@
         if ( foundHistory != NULL) {
             historyIndex = dynamic_cast<PersistentIndex *>(foundHistory);
         } else {
-            historyIndex = new PersistentIndex("cross", false, false, INDEX_HISTORY_PACK_LOCATION, 
+            historyIndex = new PersistentIndex("cross", false, true, false, INDEX_HISTORY_PACK_LOCATION, 
                     INDEX_HISTORY_PACK_NAME, "history.xml");
             Index::registerIndex(historyIndex);
         }
@@ -267,22 +334,22 @@
         }
     }
 
-    PersistentIndex::PersistentIndex(std::string thePackPath, bool systemOnly, bool autoLoading,
-            double defaultLocation, std::string anIndexName, 
+    PersistentIndex::PersistentIndex(std::string thePackPath, bool loadSystemFS, bool userOwned, 
+            bool autoLoading, double defaultLocation, std::string anIndexName, 
             std::string theIndexFilename, std::string aGroupName) : 
             Index(anIndexName, aGroupName, defaultLocation), packPath (thePackPath), isAuto (autoLoading),
             indexFilename(theIndexFilename), isModified (false),
-            isUserOwned (true), isEditable (true), release (1), revision (1),
+            isUserOwned (userOwned), isEditable (true), release (1), revision (1),
             compatibility (1.00), doc(NULL) {
 //        Log << "PersistentIndex AddLevelPack " << thePackPath << " - " << anIndexName <<  " - " << indexDefaultLocation <<"\n";
-        load(systemOnly);
+        load(loadSystemFS);
     }
     
     int autoIndexProxyCompare(Proxy * first, Proxy * second) {
         return first->getNormLevelPath() < second->getNormLevelPath();
     }
     
-    void PersistentIndex::load(bool systemOnly, bool update) {
+    void PersistentIndex::load(bool loadSystemFS, bool update) {
         if (doc != NULL) {
             doc->release();
             doc = NULL;
@@ -330,8 +397,8 @@
         std::string errMessage;
         absIndexPath = "";
         std::string relIndexPath = "levels/" + packPath + "/" + indexFilename;
-        if ((!systemOnly && app.resourceFS->findFile(relIndexPath, absIndexPath, isptr)) ||
-                (systemOnly && app.systemFS->findFile(relIndexPath, absIndexPath, isptr))) {
+        if ((!loadSystemFS && app.resourceFS->findFile(relIndexPath, absIndexPath, isptr)) ||
+                (loadSystemFS && app.systemFS->findFile(relIndexPath, absIndexPath, isptr))) {
             // preload index file or zipped index
             if (isptr.get() != NULL) {
                 // zipped file
@@ -406,7 +473,7 @@
                 gui::ErrorMenu m(message, N_("Continue"));
                 m.manage();
                 if (update) {
-                    load(systemOnly, false);  // reload local version                    
+                    load(loadSystemFS, false);  // reload local version                    
                 }
                 return;
             } else if (doc != NULL) {
@@ -822,23 +889,23 @@
                     Utf8ToXML(level->hasEasyMode() ? "true" : "false").x_str());
             std::string control;
             switch (variations[i].ctrl) {
-            case lev::force:
-                control = "force"; break;
-            case lev::balance:
-                control = "balance"; break;
-            case lev::key:
-                control = "key"; break;
-            default:
-                control = "other"; break;
+                case lev::force:
+                    control = "force"; break;
+                case lev::balance:
+                    control = "balance"; break;
+                case lev::key:
+                    control = "key"; break;
+                default:
+                    control = "other"; break;
             }
             levelElem->setAttribute( Utf8ToXML("ctrl").x_str(),
                     Utf8ToXML(control).x_str());
             std::string unit;
             switch (variations[i].unit) {
-            case lev::duration:
-                unit = "duration"; break;
-            case lev::number:
-                unit = "number"; break;
+                case lev::duration:
+                    unit = "duration"; break;
+                case lev::number:
+                    unit = "number"; break;
             }
             levelElem->setAttribute( Utf8ToXML("unit").x_str(),
                     Utf8ToXML(unit).x_str());
@@ -868,7 +935,7 @@
             try {
                 // auto-create the directory if necessary
                 std::string directory;
-                if (ecl::split_path (path, &directory, 0) && !ecl::FolderExists(directory)) {
+                if (ecl::split_path(path, &directory, 0) && !ecl::FolderExists(directory)) {
                     ecl::FolderCreate (directory);
                 }
     

Modified: trunk/src/lev/PersistentIndex.hh
===================================================================
--- trunk/src/lev/PersistentIndex.hh	2009-11-02 13:11:34 UTC (rev 1837)
+++ trunk/src/lev/PersistentIndex.hh	2009-11-02 23:24:05 UTC (rev 1838)
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2006 Ronald Lamprecht
+ * Copyright (C) 2006,2007,2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -60,7 +60,7 @@
          * 
          * thePackPath " " for a new not yet defined path
          */
-        PersistentIndex(std::string thePackPath, bool systemOnly, bool isAuto =false,
+        PersistentIndex(std::string thePackPath, bool systemOnly, bool userOwned = true, bool isAuto =false,
                 double defaultLocation = INDEX_DEFAULT_PACK_LOCATION,
                 std::string anIndexName = "",
                 std::string theIndexFilename = INDEX_STD_FILENAME, 
@@ -73,7 +73,11 @@
         PersistentIndex(std::istream *legacyIndex, std::string thePackPath,  bool isZip = false,
                 std::string anIndexName = "", std::string theIndexFilename = INDEX_STD_FILENAME);
         ~PersistentIndex();
-        void load(bool systemOnly, bool update = false);
+        
+        /**
+         * 
+         */
+        void load(bool loadSystemFS = false, bool update = false);
         void loadDoc();
         std::string getPackPath();
         bool setName(std::string newName, bool isSokoball);
@@ -104,7 +108,7 @@
         virtual void updateFromFolder();
         bool save(bool allowOverwrite = true);
     protected:
-        std::string packPath;  // "auto", "",...
+        std::string packPath;  // "auto", "", "enigma_i", ...
         std::string indexFilename;
         std::string owner;
         int release;
@@ -124,7 +128,11 @@
         XERCES_CPP_NAMESPACE_QUALIFIER DOMElement *updateElem;
         XERCES_CPP_NAMESPACE_QUALIFIER DOMElement *levelsElem;
         
-        static void checkCandidate(PersistentIndex * candidate);
+//        static void checkCandidate(PersistentIndex * candidate);
+        static void checkCandidate(std::string thePackPath, bool systemOnly, bool userOwned =true, 
+                bool isAuto =false, bool isSystemCross =false, 
+                double defaultLocation =INDEX_DEFAULT_PACK_LOCATION, std::string anIndexName ="",
+                std::string theIndexFilename =INDEX_STD_FILENAME, std::string aGroupName =INDEX_DEFAULT_GROUP);
         // legacy 0.92
         void parsePar(const string& par, int& par_value, std::string& par_text);
     };

Modified: trunk/src/lev/Proxy.cc
===================================================================
--- trunk/src/lev/Proxy.cc	2009-11-02 13:11:34 UTC (rev 1837)
+++ trunk/src/lev/Proxy.cc	2009-11-02 23:24:05 UTC (rev 1838)
@@ -449,7 +449,11 @@
                 basic_ifstream<char> ifs(absLevelPath.c_str(), ios::binary | ios::in);
                 Readfile(ifs, levelCode);
             }
-            std::string oPath = newBasePath + "/" + newPackPath + "/" + filename;
+            // auto-create the destination directory if necessary
+            std::string directory = newBasePath + "/" + newPackPath;
+            if (!ecl::FolderExists(directory))
+                ecl::FolderCreate (directory);
+            std::string oPath =  directory + "/" + filename;
             if (backup) {
                 std::remove((oPath + "~").c_str());
                 std::rename(oPath.c_str(), (oPath + "~").c_str());
@@ -554,7 +558,7 @@
                 throw XLevelLoading("Unknown file extension in " + absLevelPath);
             }
         } else {
-                throw XLevelLoading("Unknown file extension in " + absLevelPath);
+            throw XLevelLoading("Unknown file extension in " + absLevelPath);
         }
 
         // preload file into buffer



From ral at mail.berlios.de  Thu Nov  5 23:33:40 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Thu, 5 Nov 2009 23:33:40 +0100
Subject: [Enigma-game-svn] r1839 - in trunk/src: . gui
Message-ID: <200911052233.nA5MXe4T020101@sheep.berlios.de>

Author: ral
Date: 2009-11-05 23:33:40 +0100 (Thu, 05 Nov 2009)
New Revision: 1839

Modified:
   trunk/src/gui/LevelMenu.cc
   trunk/src/gui/LevelMenu.hh
   trunk/src/server.cc
Log:
Trunk 1.1: (should apply to 1.00, 1.01, too)
- fix broken console commands "time", "notime"


Modified: trunk/src/gui/LevelMenu.cc
===================================================================
--- trunk/src/gui/LevelMenu.cc	2009-11-02 23:24:05 UTC (rev 1838)
+++ trunk/src/gui/LevelMenu.cc	2009-11-05 22:33:40 UTC (rev 1839)
@@ -493,40 +493,44 @@
         
     void AdvanceModeButton::update() {
         switch (app.state->getInt("NextLevelMode")) {
-        case lev::NEXT_LEVEL_UNSOLVED :
-            ImageButton::set_images("ic-unsolved", "par");
-            break;
-        case lev::NEXT_LEVEL_OVER_PAR :
-            ImageButton::set_images("par", "ic-worldrecord");
-            break;
-        case lev::NEXT_LEVEL_NOT_BEST :
-            ImageButton::set_images("ic-worldrecord", "ic-strictlynext");
-            break;
-        case lev::NEXT_LEVEL_STRICTLY : // use as default, too
-        default:
-            ImageButton::set_images("ic-strictlynext","ic-unsolved");
-            break;        
+            case lev::NEXT_LEVEL_UNSOLVED :
+                ImageButton::set_images("ic-unsolved", "par");
+                break;
+            case lev::NEXT_LEVEL_OVER_PAR :
+                ImageButton::set_images("par", "ic-worldrecord");
+                break;
+            case lev::NEXT_LEVEL_NOT_BEST :
+                ImageButton::set_images("ic-worldrecord", "ic-strictlynext");
+                break;
+            case lev::NEXT_LEVEL_STRICTLY : // use as default, too
+            default:
+                ImageButton::set_images("ic-strictlynext","ic-unsolved");
+                break;        
         }
     }
     
-    void AdvanceModeButton::on_action(Widget *) 
-    {
+    void AdvanceModeButton::on_action(Widget *) {
         switch (app.state->getInt("NextLevelMode")) {
-        case lev::NEXT_LEVEL_STRICTLY :
-            app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_UNSOLVED);
-            break;        
-        case lev::NEXT_LEVEL_UNSOLVED :
-            app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_OVER_PAR);
-            break;
-        case lev::NEXT_LEVEL_OVER_PAR :
-            app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_NOT_BEST);
-            break;
-        case lev::NEXT_LEVEL_NOT_BEST :
-        default:
-            app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_STRICTLY);
+            case lev::NEXT_LEVEL_STRICTLY :
+                app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_UNSOLVED);
+                break;        
+            case lev::NEXT_LEVEL_UNSOLVED :
+                app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_OVER_PAR);
+                break;
+            case lev::NEXT_LEVEL_OVER_PAR :
+                app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_NOT_BEST);
+                break;
+            case lev::NEXT_LEVEL_NOT_BEST :
+            default:
+                app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_STRICTLY);
         }
         update();
         invalidate();
     }
     
+    void AdvanceModeButton::draw(ecl::GC &gc, const ecl::Rect &r) {
+        update();
+        ImageButton::draw(gc, r);
+    }
+    
 }} // namespace enigma::gui

Modified: trunk/src/gui/LevelMenu.hh
===================================================================
--- trunk/src/gui/LevelMenu.hh	2009-11-02 23:24:05 UTC (rev 1838)
+++ trunk/src/gui/LevelMenu.hh	2009-11-05 22:33:40 UTC (rev 1839)
@@ -91,6 +91,7 @@
         void on_action(Widget *);
     public:
         AdvanceModeButton();
+        virtual void draw(ecl::GC &gc, const ecl::Rect &r);
     private:
         void update();
     };

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-11-02 23:24:05 UTC (rev 1838)
+++ trunk/src/server.cc	2009-11-05 22:33:40 UTC (rev 1839)
@@ -560,7 +560,7 @@
         else
             client::Msg_ShowText("Already in easy mode.", false, 2);
     }
-    else if (cmd == "noeasy") {
+    else if (cmd == "regular" || cmd == "noeasy") {
         if (app.state->getInt("Difficulty") == DIFFICULTY_EASY) {
             app.state->setProperty("Difficulty", DIFFICULTY_HARD);
             if (curProxy->hasEasyMode()) {
@@ -575,22 +575,22 @@
             client::Msg_ShowText("Already in normal mode.", false, 2);
     }
     else if (cmd == "time") {
-        if (options::GetBool("TimeHunting") == false) {
+        if (app.state->getInt("NextLevelMode") != lev::NEXT_LEVEL_NOT_BEST) {
             client::Msg_ShowText("Restarting in time-hunt mode", false, 2);
-            options::SetOption("TimeHunting", true);
+            app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_NOT_BEST);
             server::Msg_Command("restart");
         }
         else
             client::Msg_ShowText("Already in time-hunt mode.", false, 2);
     }
     else if (cmd == "notime") {
-        if (options::GetBool("TimeHunting")) {
-            client::Msg_ShowText("Switched to easy-going mode", false, 2);
-            options::SetOption("TimeHunting", false);
+        if (app.state->getInt("NextLevelMode") == lev::NEXT_LEVEL_NOT_BEST) {
+            client::Msg_ShowText("Switched to normal mode", false, 2);
+            app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_STRICTLY);
             client::Msg_Command("easy_going");
         }
         else
-            client::Msg_ShowText("Already in easy-going mode.", false, 2);
+            client::Msg_ShowText("Already in normal mode.", false, 2);
     }
     else if (cmd == "info") {
         string infotext       = 



From ral at mail.berlios.de  Sat Nov  7 00:06:20 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 7 Nov 2009 00:06:20 +0100
Subject: [Enigma-game-svn] r1840 - trunk/src
Message-ID: <200911062306.nA6N6Kgh032124@sheep.berlios.de>

Author: ral
Date: 2009-11-07 00:06:19 +0100 (Sat, 07 Nov 2009)
New Revision: 1840

Modified:
   trunk/src/server.cc
Log:
Trunk 1.1: (should apply to 1.00, 1.01, too)
- rename console commands "time", "notime" to "hunt", "nohunt"
- rename console command "noeasy" to "regular"
- improve and adjust console messages


Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-11-05 22:33:40 UTC (rev 1839)
+++ trunk/src/server.cc	2009-11-06 23:06:19 UTC (rev 1840)
@@ -555,7 +555,7 @@
                 server::Msg_Command("restart");
             }
             else
-                client::Msg_ShowText("No easymode available.", false, 2);
+                client::Msg_ShowText("No easy mode available.", false, 2);
         }
         else
             client::Msg_ShowText("Already in easy mode.", false, 2);
@@ -564,33 +564,33 @@
         if (app.state->getInt("Difficulty") == DIFFICULTY_EASY) {
             app.state->setProperty("Difficulty", DIFFICULTY_HARD);
             if (curProxy->hasEasyMode()) {
-                client::Msg_ShowText("Restarting in normal mode", false, 2);
+                client::Msg_ShowText("Restarting in regular difficulty mode", false, 2);
                 server::Msg_Command("restart");
             }
             else {
-                client::Msg_ShowText("No difference between easy and normal.", false, 2);
+                client::Msg_ShowText("No difference between easy and regular difficulty.", false, 2);
             }
         }
         else
             client::Msg_ShowText("Already in normal mode.", false, 2);
     }
-    else if (cmd == "time") {
+    else if (cmd == "hunt") {
         if (app.state->getInt("NextLevelMode") != lev::NEXT_LEVEL_NOT_BEST) {
-            client::Msg_ShowText("Restarting in time-hunt mode", false, 2);
+            client::Msg_ShowText("Restarting in world record hunt mode", false, 2);
             app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_NOT_BEST);
             server::Msg_Command("restart");
         }
         else
-            client::Msg_ShowText("Already in time-hunt mode.", false, 2);
+            client::Msg_ShowText("Already in world record hunt mode.", false, 2);
     }
-    else if (cmd == "notime") {
+    else if (cmd == "nohunt") {
         if (app.state->getInt("NextLevelMode") == lev::NEXT_LEVEL_NOT_BEST) {
-            client::Msg_ShowText("Switched to normal mode", false, 2);
+            client::Msg_ShowText("Switched back to standard mode", false, 2);
             app.state->setProperty("NextLevelMode", lev::NEXT_LEVEL_STRICTLY);
             client::Msg_Command("easy_going");
         }
         else
-            client::Msg_ShowText("Already in normal mode.", false, 2);
+            client::Msg_ShowText("Already in standard mode.", false, 2);
     }
     else if (cmd == "info") {
         string infotext       = 
@@ -611,7 +611,7 @@
         server::Msg_Command_jumpto(args);
     }
     else if (cmd == "help") {
-        client::Msg_ShowText("suicide, restart, abort, easy, noeasy, time, notime, jumpto, find, info", true);
+        client::Msg_ShowText("suicide, restart, abort, easy, regular, hunt, nohunt, jumpto, find, info", true);
     }
     else if (cmd == "cheats") {
         client::Msg_ShowText("god, collision  -- Be aware: you'll get no medals!", true);



From ral at mail.berlios.de  Sat Nov  7 00:13:12 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 7 Nov 2009 00:13:12 +0100
Subject: [Enigma-game-svn] r1841 - trunk/src/lev
Message-ID: <200911062313.nA6NDCW9000150@sheep.berlios.de>

Author: ral
Date: 2009-11-07 00:13:11 +0100 (Sat, 07 Nov 2009)
New Revision: 1841

Modified:
   trunk/src/lev/PersistentIndex.cc
   trunk/src/lev/PersistentIndex.hh
Log:
Trunk 1.1: 
- fix r1838: reenable user cross indices again


Modified: trunk/src/lev/PersistentIndex.cc
===================================================================
--- trunk/src/lev/PersistentIndex.cc	2009-11-06 23:06:19 UTC (rev 1840)
+++ trunk/src/lev/PersistentIndex.cc	2009-11-06 23:13:11 UTC (rev 1841)
@@ -66,11 +66,11 @@
     std::vector<PersistentIndex *> PersistentIndex::indexCandidates;
     
     void PersistentIndex::checkCandidate(std::string thePackPath, bool systemOnly, bool userOwned,
-            bool isAuto, bool isSystemCross, double defaultLocation, std::string anIndexName, 
-            std::string theIndexFilename, std::string aGroupName) {
+            bool isAuto, bool isSystemCross, bool isUserCross, double defaultLocation, 
+            std::string anIndexName, std::string theIndexFilename, std::string aGroupName) {
         int minRevision = 0;
         int systemPackIndex = -1;
-        if (!isAuto) {
+        if (!isAuto && !isUserCross) {
             for (int i = 0; i < indexCandidates.size(); i++) {
                 if (indexCandidates[i]->packPath == thePackPath) {
                     if (!systemOnly && isSystemCross) {   // a system cross index update like enigma_cross
@@ -207,7 +207,7 @@
                 if (!dirEntry.is_dir && dirEntry.name.size() > 4 && 
                         (dirEntry.name.rfind(".xml") == dirEntry.name.size() - 4)) {
 //                            Log << "enigma cross check: " << dirEntry.name << "\n"; 
-                    checkCandidate("enigma_cross", true, false, false, true,
+                    checkCandidate("enigma_cross", true, false, false, true, false,
                             INDEX_DEFAULT_PACK_LOCATION, "", dirEntry.name);
                 }
             }
@@ -285,7 +285,7 @@
         while (dirIter->get_next(dirEntry)) {
             if (!dirEntry.is_dir && dirEntry.name.size() > 4 && 
                     (dirEntry.name.rfind(".xml") == dirEntry.name.size() - 4)) {
-                checkCandidate("enigma_cross", false, false, false, true,
+                checkCandidate("enigma_cross", false, false, false, true, false,
                         INDEX_DEFAULT_PACK_LOCATION, "", dirEntry.name);
             }
         }
@@ -296,7 +296,7 @@
         while (dirIter->get_next(dirEntry)) {
             if (!dirEntry.is_dir && dirEntry.name.size() > 4 && 
                     (dirEntry.name.rfind(".xml") == dirEntry.name.size() - 4)) {
-                checkCandidate("cross", false, true, false, false,
+                checkCandidate("cross", false, true, false, false, true,
                         INDEX_DEFAULT_PACK_LOCATION, "", dirEntry.name);
             }
         }

Modified: trunk/src/lev/PersistentIndex.hh
===================================================================
--- trunk/src/lev/PersistentIndex.hh	2009-11-06 23:06:19 UTC (rev 1840)
+++ trunk/src/lev/PersistentIndex.hh	2009-11-06 23:13:11 UTC (rev 1841)
@@ -130,7 +130,7 @@
         
 //        static void checkCandidate(PersistentIndex * candidate);
         static void checkCandidate(std::string thePackPath, bool systemOnly, bool userOwned =true, 
-                bool isAuto =false, bool isSystemCross =false, 
+                bool isAuto =false, bool isSystemCross =false, bool isUserCross =false, 
                 double defaultLocation =INDEX_DEFAULT_PACK_LOCATION, std::string anIndexName ="",
                 std::string theIndexFilename =INDEX_STD_FILENAME, std::string aGroupName =INDEX_DEFAULT_GROUP);
         // legacy 0.92



From raoul at mail.berlios.de  Sat Nov  7 02:36:48 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 7 Nov 2009 02:36:48 +0100
Subject: [Enigma-game-svn] r1842 - in trunk/data: gfx16 gfx64
Message-ID: <200911070136.nA71amfo031185@sheep.berlios.de>

Author: raoul
Date: 2009-11-07 02:36:47 +0100 (Sat, 07 Nov 2009)
New Revision: 1842

Added:
   trunk/data/gfx16/st_window_blue.png
   trunk/data/gfx16/st_window_green.png
   trunk/data/gfx64/st_window_blue.png
   trunk/data/gfx64/st_window_green.png
Removed:
   trunk/data/gfx64/st-window.png
Modified:
   trunk/data/gfx16/sh_window.png
   trunk/data/gfx64/sh_window.png
Log:
-> Fix window stone models and shadows for gfx{16,64}



Modified: trunk/data/gfx16/sh_window.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx16/st_window_blue.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_window_blue.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_window_green.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_window_green.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx64/sh_window.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/st-window.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/st_window_blue.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_window_blue.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_window_green.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_window_green.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From ral at mail.berlios.de  Sun Nov  8 00:21:07 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 8 Nov 2009 00:21:07 +0100
Subject: [Enigma-game-svn] r1843 - in trunk: data data/schemas src
	src/floors src/items
Message-ID: <200911072321.nA7NL75B019373@sheep.berlios.de>

Author: ral
Date: 2009-11-08 00:21:05 +0100 (Sun, 08 Nov 2009)
New Revision: 1843

Added:
   trunk/src/floors/ScalesFloor.cc
   trunk/src/floors/ScalesFloor.hh
Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/Makefile.am
   trunk/src/actors.cc
   trunk/src/items/BagItem.cc
   trunk/src/items/BagItem.hh
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
Log:
Trunk 1.1:
- new object: floor scales - a trigger, that is a floor
  - fl_scales with test flavors gray, brick, platinum
  - scales react on a stone like triggers
  - scales react on a mass greater a "min" values, default 1.8
  - the mass of actors and items is summed up
Note:
- flavors are not final
- the image is in progress, this commit reuses the frame image


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/data/models-2d.lua	2009-11-07 23:21:05 UTC (rev 1843)
@@ -441,6 +441,17 @@
     end
 end
 
+
+-- scales
+
+do
+    DefAlias("fl_scales_platinum_released", "fl_platinum_framed")
+    DefAlias("fl_scales_platinum_pressed", "fl_platinum")
+    DefAlias("fl_scales_gray_released", "fl_gray_framed")
+    DefAlias("fl_scales_gray_pressed", "fl_gray")
+    DefAlias("fl_scales_brick_released", "fl_brick_framed")
+    DefAlias("fl_scales_brick_pressed", "fl_brick")
+end
 ------------------------
 -- Heating animations --
 ------------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/data/schemas/objects.xml	2009-11-07 23:21:05 UTC (rev 1843)
@@ -658,6 +658,22 @@
     <object name="fl_sand_framed">
       <attr name="faces" value="nesw"/>
     </object>
+    <object name="fl_scales">
+      <attr name="flavor" default="platinum"/>
+      <attr name="min" default="1.8"/>
+      <attr name="friction" default="4.0"/>
+      <attr name="adhesion" default="2.0"/>
+      <msg name="_init"/>
+    </object>
+    <object name="fl_scales_brick">
+      <attr name="flavor" value="brick"/>
+    </object>
+    <object name="fl_scales_gray">
+      <attr name="flavor" value="gray"/>
+    </object>
+    <object name="fl_scales_platinum">
+      <attr name="flavor" value="platinum"/>
+    </object>
     <object name="fl_slope_pw">
       <attr name="shape" value="pw"/>
     </object>
@@ -813,7 +829,9 @@
       <attr name="freezable"/>
       <msg name="_freeze"/>
     </object>
-    <object name="it_bag"/>
+    <object name="it_bag">
+      <attr name="mass" default="0.0" rw="r"/>
+    </object>
     <object name="it_banana"/>
     <object name="it_blocker">
       <attr name="autoclose"/>

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/Makefile.am	2009-11-07 23:21:05 UTC (rev 1843)
@@ -158,6 +158,8 @@
 	floors/BridgeFloor.hh	\
 	floors/FloodStream.cc	\
 	floors/FloodStream.hh	\
+	floors/ScalesFloor.cc	\
+	floors/ScalesFloor.hh	\
 	floors/SimpleFloors.cc	\
 	floors/SimpleFloors.hh	\
 	floors/SlopeFloor.cc	\

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/actors.cc	2009-11-07 23:21:05 UTC (rev 1843)
@@ -135,12 +135,13 @@
                 m_actorinfo.mass = get_traits().default_mass + 
                         (double)(player::GetInventory(this)->getAttr("mass"));
                 ASSERT(m_actorinfo.mass > 0, XLevelRuntime, "Actor mass <= 0!");
-                Log << "Actor new mass " << m_actorinfo.mass << "\n";
+                SendMessage(GetFloor(get_gridpos()), "_update_mass", true, this);
+//                Log << "Actor new mass " << m_actorinfo.mass << "\n";
             }
         } else if (m.message == "_update_pin") {
             if (getAttr("owner") == m.value) {
                 spikes = (player::GetInventory(this)->find("it_pin")) != -1;
-                Log << "Actor has spikes " << spikes << "\n";
+//                Log << "Actor has spikes " << spikes << "\n";
             }
         }
         return StateObject::message(m);

Added: trunk/src/floors/ScalesFloor.cc
===================================================================
--- trunk/src/floors/ScalesFloor.cc	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/floors/ScalesFloor.cc	2009-11-07 23:21:05 UTC (rev 1843)
@@ -0,0 +1,164 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *  
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+
+#include "floors/ScalesFloor.hh"
+
+#include "errors.hh"
+#include "main.hh"
+#include "stones.hh"
+#include "world.hh"
+
+namespace enigma {
+    
+    ScalesFloor::ScalesFloor(std::string flavor) : Floor("fl_scales")  {
+        Floor::setAttr("flavor", flavor);
+        Floor::setAttr("$mass", 0.0);
+//        Floor::setAttr("burnable", flavor != "gc");
+        state = OFF;
+    }
+    
+    std::string ScalesFloor::getClass() const {
+        return "fl_scales";
+    }
+        
+    void ScalesFloor::setAttr(const string& key, const Value &val) {
+        if (key == "flavor") {
+            std::string flavor = val.to_string();
+            ASSERT(flavor == "brick" || flavor == "gray" || flavor == "platinum", XLevelRuntime, "ScalesFloor illegal flavor value");
+            Floor::setAttr("flavor", val);
+//            Floor::setAttr("burnable", flavor != "gc");
+            if (isDisplayable()) {
+                init_model();    // need to redisplay after attribute set
+            }
+            return;
+        }
+        Floor::setAttr(key, val);
+    }
+    
+    Value ScalesFloor::message(const Message &m) {
+        if (m.message == "_init") {
+            // the state  at init is wrong as some actors on the grid may
+            // already have existed on_creation, but all are reported via
+            // actor_enter due to actors on_creation.
+            // Thus we need to reset and reweight the actors:
+            if (Item *it = GetItem(get_pos())) {
+                Value v = it->getAttr("mass");
+                if (v.getType() == Value::DOUBLE)
+                    Floor::setAttr("$mass", v);
+            }
+            updateIState(true);
+            return Value();
+        } else if (m.message == "_jumping" ) {
+            updateIState();
+        } else if (m.message == "_dying" ) {
+            Actor *ac = dynamic_cast<Actor *>(m.sender);
+            if (ac != NULL) {
+                updateIState();
+            }
+        } else if (m.message == "_update_mass" ) {
+            updateIState();
+        } else if (m.message == "_add_mass" ) {
+            if (server::WorldInitialized) {
+                double mass = (double)getAttr("$mass") + (double)m.value;
+                Floor::setAttr("$mass", mass);
+                updateIState();
+            }
+        }
+        return Floor::message(m);
+    }
+
+    void ScalesFloor::setState(int extState) {
+        return;   // ignore any write attempts
+    }
+    
+    std::string ScalesFloor::getModelName() const {
+        return "fl_scales_" + getAttr("flavor").to_string() + ((state==ON) ? "_pressed" : "_released");
+    }
+    
+    void ScalesFloor::on_creation(GridPos p) {
+        state = OFF;
+        updateIState(true);
+        Floor::on_creation(p);
+    }
+
+    void ScalesFloor::actor_enter(Actor *a) {
+        if (!(a->is_flying() || a->isMoribund()))
+            updateIState(!server::WorldInitialized);
+    }
+    
+    void ScalesFloor::actor_leave(Actor *a) {
+        if (!(a->is_flying() || a->isMoribund()))
+            updateIState(!server::WorldInitialized);
+    }
+    
+    void ScalesFloor::stone_change(Stone *st) {
+        updateIState();
+    }
+    
+    bool ScalesFloor::weightActors() {
+        double mass = getAttr("$mass");
+        std::vector<Actor *> actors;
+        GetActorsInsideField(get_pos(), actors);
+        for (std::vector<Actor *>::iterator itr = actors.begin(); itr != actors.end(); ++itr) {
+            if (!((*itr)->is_flying() || (*itr)->isMoribund())) {
+                mass += (*itr)->get_actorinfo()->mass;
+            }
+        }
+        return mass >= (double)getAttr("min");
+    }
+    
+    void ScalesFloor::updateIState(bool refuseAction) {
+        int oldState = state;
+        state = OFF; 
+        
+        Stone *st = GetStone(get_pos());
+        objFlags &= ~OBJBIT_STONE;
+        if (st != NULL && (!st->is_floating() || st->getClass() == "st_puzzle")) {
+            // Hack to make hollow puzzle stones press triggers
+            objFlags |= OBJBIT_STONE;
+            state = ON;
+        }
+        if (weightActors()) {
+            state = ON;
+        }
+
+Log << "Scales update old state " << oldState << " - new state " << state << " refuse action " << refuseAction << "\n";
+    
+        if (oldState != state) {
+            init_model();
+            if (!refuseAction) {
+                if (state != OFF) {
+                    sound_event ("triggerdown");
+                    performAction(true);
+                } else {
+                    sound_event ("triggerup");
+                    performAction(false);
+                }
+            }
+        }
+    }
+
+    BOOT_REGISTER_START
+        BootRegister(new ScalesFloor("platinum"), "fl_scales");
+        BootRegister(new ScalesFloor("platinum"), "fl_scales_platinum");
+        BootRegister(new ScalesFloor("brick"), "fl_scales_brick");
+        BootRegister(new ScalesFloor("gray"), "fl_scales_gray");
+    BOOT_REGISTER_END
+
+} // namespace enigma


Property changes on: trunk/src/floors/ScalesFloor.cc
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/src/floors/ScalesFloor.hh
===================================================================
--- trunk/src/floors/ScalesFloor.hh	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/floors/ScalesFloor.hh	2009-11-07 23:21:05 UTC (rev 1843)
@@ -0,0 +1,69 @@
+/*
+ * Copyright (C) 2009 Ronald Lamprecht
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+ *
+ */
+#ifndef SCALESFLOOR_HH
+#define SCALESFLOOR_HH
+
+#include "floors.hh"
+
+namespace enigma {
+
+    /** 
+     * 
+     */
+    class ScalesFloor : public Floor {
+        CLONEOBJ(ScalesFloor);
+        
+    private:
+        enum iState {
+            OFF,    ///< 
+            ON      ///< 
+        };
+
+        enum ObjectPrivatFlagsBits {
+            OBJBIT_STONE =   1<<24,   ///< pressed by a stone
+        };
+    public:
+        ScalesFloor(std::string flavor);
+
+        // Object interface
+        virtual std::string getClass() const;
+        virtual void setAttr(const string& key, const Value &val);
+        virtual Value message(const Message &m);
+        
+        // StateObject interface
+        virtual void setState(int extState);
+
+        // GridObject interface
+        virtual std::string getModelName() const;
+        virtual void on_creation(GridPos p);
+        virtual void actor_enter(Actor *a);
+        virtual void actor_leave(Actor *a);
+                
+        // Floor interface
+        virtual void stone_change(Stone *st);
+
+    private:
+        // Methods
+        bool weightActors();
+        void updateIState(bool refuseAction = false);
+    };
+
+} // namespace enigma
+
+#endif


Property changes on: trunk/src/floors/ScalesFloor.hh
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/src/items/BagItem.cc
===================================================================
--- trunk/src/items/BagItem.cc	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/items/BagItem.cc	2009-11-07 23:21:05 UTC (rev 1843)
@@ -55,6 +55,29 @@
         return "it_bag";
     }
     
+    Value BagItem::getAttr(const std::string &key) const {
+        if (key == "mass") {
+            double mass = 0.0;
+            std::vector<Item *> contents = m_contents;
+            for (std::vector<Item *>::iterator itr = contents.begin(); itr != contents.end(); ++itr) {
+                Value v = (*itr)->getAttr("mass");
+                if (v.getType() == Value::DOUBLE)
+                    mass += (double)v; 
+            }
+            return mass;
+        } else
+            return Item::getAttr(key);
+    }
+
+    Value BagItem::message(const Message &m) {
+        if (m.message == "_init") {
+            for (std::vector<Item *>::iterator itr = m_contents.begin(); itr != m_contents.end(); ++itr) {
+                SendMessage(*itr, "_init", Value());
+            }
+        }
+        return Item::message(m);
+    }
+    
     void BagItem::on_creation(GridPos p) {
         GridObject::on_creation(p);
         for (std::vector<Item *>::iterator itr = m_contents.begin(); itr != m_contents.end(); ++itr)

Modified: trunk/src/items/BagItem.hh
===================================================================
--- trunk/src/items/BagItem.hh	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/items/BagItem.hh	2009-11-07 23:21:05 UTC (rev 1843)
@@ -40,6 +40,8 @@
         virtual BagItem *clone();
         virtual void dispose();
         virtual std::string getClass() const;
+        virtual Value getAttr(const std::string &key) const;
+        virtual Value message(const Message &m);
  
         // GridObject interface
         virtual void on_creation(GridPos p);

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/items/SimpleItems.cc	2009-11-07 23:21:05 UTC (rev 1843)
@@ -438,6 +438,11 @@
         
     void Weight::setOwner(int player) {
         Value oldPlayer = getOwner();
+        if (player == -1) {
+            GridPos p = getOwnerPos();
+            if (p.x >= 0)
+                SendMessage(GetFloor(p), "_add_mass", -(double)getAttr("mass"), this);
+        }
         Item::setOwner(player);
         if (oldPlayer.getType() != Value::NIL && oldPlayer != -1 ) {
             Inventory *i = player::GetInventory(oldPlayer);
@@ -451,6 +456,26 @@
         }
     }
 
+    void Weight::on_creation(GridPos p) {
+        Item::on_creation(p);
+        SendMessage(GetFloor(p), "_add_mass", getAttr("mass"), this);
+    }
+    
+    void Weight::on_removal(GridPos p) {
+        SendMessage(GetFloor(get_pos()), "_add_mass", -(double)getAttr("mass"), this);
+        Item::on_removal(p);
+    }
+    
+    void Weight::setOwnerPos(GridPos po) {
+        if (po == GridPos(-1, -1)) {
+            GridPos p = getOwnerPos();
+            if (p.x >= 0)
+                SendMessage(GetFloor(p), "_add_mass", -(double)getAttr("mass"), this);
+        }
+        Item::setOwnerPos(po);
+        SendMessage(GetFloor(po), "_add_mass", getAttr("mass"), this);        
+    }
+    
     ItemAction Weight::activate(Actor *, GridPos p) {
         return ITEM_KEEP;
     }

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-11-07 01:36:47 UTC (rev 1842)
+++ trunk/src/items/SimpleItems.hh	2009-11-07 23:21:05 UTC (rev 1843)
@@ -323,6 +323,9 @@
         
         // GridObject interface
         virtual void setOwner(int player);
+        virtual void on_creation(GridPos p);
+        virtual void on_removal(GridPos p);
+        virtual void setOwnerPos(GridPos po);
 
         // Item interface
         virtual ItemAction activate(Actor* a, GridPos p);



From ral at mail.berlios.de  Sun Nov  8 00:26:53 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 8 Nov 2009 00:26:53 +0100
Subject: [Enigma-game-svn] r1844 - team_levelpacks/team_test_new_api
Message-ID: <200911072326.nA7NQrt1019740@sheep.berlios.de>

Author: ral
Date: 2009-11-08 00:26:44 +0100 (Sun, 08 Nov 2009)
New Revision: 1844

Added:
   team_levelpacks/team_test_new_api/ralT094_1.xml
   team_levelpacks/team_test_new_api/ralT095_1.xml
Modified:
   team_levelpacks/team_test_new_api/ralT027_1.xml
Log:
Test Level new API:
- another train testlevel
- floor scales testlevel

Modified: team_levelpacks/team_test_new_api/ralT027_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT027_1.xml	2009-11-07 23:21:05 UTC (rev 1843)
+++ team_levelpacks/team_test_new_api/ralT027_1.xml	2009-11-07 23:26:44 UTC (rev 1844)
@@ -40,8 +40,6 @@
 ti["H"] = {"st_box", "wood1"}
 ti["t"] = {"it_trigger", target="blocker"} .. ti({"st_box", "wood2"})
 
-
-
 ti["1"] = (ti[" "] .. {"#ac_marble"}) .. {"it_magicwand"}
 
 w, h = wo(ti, " ", {

Added: team_levelpacks/team_test_new_api/ralT094_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT094_1.xml	2009-11-07 23:21:05 UTC (rev 1843)
+++ team_levelpacks/team_test_new_api/ralT094_1.xml	2009-11-07 23:26:44 UTC (rev 1844)
@@ -0,0 +1,53 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test Train2 new API" el:subtitle="" el:id="20090926ral534"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision$" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+        <el:dependency el:path="lib/libtrain" el:id="lib/libtrain" el:release="1" el:preload="true"/>
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti["  "] = {"fl_sahara"}
+ti[" ~"] = {"fl_water"}
+ti[" w"] = {"fl_wood"}
+ti["# "] = {"st_rawglass"}
+ti[" @"] = {"#ac_marble"}
+
+railway1 = res.train(ti, ".", {"1^", train={" ~", " w", orientation=NORTH, length=6}})
+railway2 = res.train(railway1, {"2e", edge=true}, {"2^", train={" ~", " w", orientation=NORTH, length=5}})
+
+wo(railway2, "  ", {
+    "             .        ",
+    "   .                  ",
+    "              1^      ",
+    "                     @",
+    "              #       ",
+    "          2e          ",
+    "                      ",
+    "                      ",
+    "  # #.            2^  ",
+    "       .              ",
+    "                  2e  ",
+    "               .      ",
+    "         .            "
+})
+
+  ]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT094_1.xml
___________________________________________________________________
Name: svn:keywords
   + Revision
Name: svn:eol-style
   + native

Added: team_levelpacks/team_test_new_api/ralT095_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT095_1.xml	2009-11-07 23:21:05 UTC (rev 1843)
+++ team_levelpacks/team_test_new_api/ralT095_1.xml	2009-11-07 23:26:44 UTC (rev 1844)
@@ -0,0 +1,73 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Test Scales new API" el:subtitle="" el:id="20091102ral431"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision$" el:status="experimental"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+
+ti[" "] = {"fl_sahara"}
+
+ti["."] = {"fl_scales", target="laser1"}
+ti["_"] = {"fl_scales_brick", target="laser2"} 
+ti["="] = {"fl_scales_gray", target="laser3"}
+
+ti["x"] = ti{"it_weight", mass=1.9} ..{"fl_scales_brick"} 
+ti["y"] = ti{"it_bag", "mybag"} ..{"fl_scales_brick"} 
+
+
+ti["1"] = {"st_laser_e", "laser1"}
+ti["2"] = {"st_laser_e", "laser2"}
+ti["3"] = {"st_laser_e", "laser3"}
+
+ti["*"] = {"st_rawglass_movable"}
+ti["$"] = {"st_lightglass_movable"}
+ti["E"] = {"st_puzzle", connections="w"}
+ti["W"] = {"st_puzzle", connections="e", hollow=true}
+
+ti["m"] = {"it_weight", mass=1.9}
+ti["w"] = {"it_weight", mass=0.4}
+ti["M"] = {"st_mail", orientation=SOUTH}
+ti["b"] = {"it_bag"}
+
+ti["@"] = {"#ac_marble_black"}
+ti["&"] = {"#ac_marble_white"}
+ti["%"] = {"#ac_pearl", owner=YANG, controllers=CTRL_YANG}
+
+w, h = wo(ti, " ", {
+"                    ",
+"                 x  ",
+"                 y  ",
+"          M         ",
+"      *   .        1",
+"                    ",
+"  @   $   _    WE  2",
+"                    ",
+"      *   =      b 3",
+"  &       M      b  ",
+"                   m",
+"  %%%           ww  ",
+"                    "
+})
+
+wo:add(no["mybag"], ti["m"])
+
+  ]]></el:luamain>
+    <el:i18n>
+	 <el:string el:key="title">
+	   <el:english el:translate="false"/>
+	 </el:string>
+   </el:i18n>
+  </el:protected>
+</el:level>
+


Property changes on: team_levelpacks/team_test_new_api/ralT095_1.xml
___________________________________________________________________
Name: svn:keywords
   + Revision
Name: svn:eol-style
   + native



From raoul at mail.berlios.de  Sun Nov  8 14:10:49 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 8 Nov 2009 14:10:49 +0100
Subject: [Enigma-game-svn] r1845 - team_levelpacks/team_test_new_api
Message-ID: <200911081310.nA8DAntw019638@sheep.berlios.de>

Author: raoul
Date: 2009-11-08 14:10:49 +0100 (Sun, 08 Nov 2009)
New Revision: 1845

Modified:
   team_levelpacks/team_test_new_api/ralT095_1.xml
Log:
-> Improved floor scales testlevel


Modified: team_levelpacks/team_test_new_api/ralT095_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT095_1.xml	2009-11-07 23:26:44 UTC (rev 1844)
+++ team_levelpacks/team_test_new_api/ralT095_1.xml	2009-11-08 13:10:49 UTC (rev 1845)
@@ -45,9 +45,9 @@
 ti["%"] = {"#ac_pearl", owner=YANG, controllers=CTRL_YANG}
 
 w, h = wo(ti, " ", {
-"                    ",
-"                 x  ",
-"                 y  ",
+"...___===           ",
+"...___===        x  ",
+"...___===        y  ",
 "          M         ",
 "      *   .        1",
 "                    ",



From raoul at mail.berlios.de  Sun Nov  8 19:38:07 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 8 Nov 2009 19:38:07 +0100
Subject: [Enigma-game-svn] r1846 - in trunk: attic/images-actors
	attic/images-other attic/images-stones data/gfx16 data/gfx32
	data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911081838.nA8Ic7wZ001917@sheep.berlios.de>

Author: raoul
Date: 2009-11-08 19:37:30 +0100 (Sun, 08 Nov 2009)
New Revision: 1846

Added:
   trunk/attic/images-actors/ac_pearl-gfx16.xcf
   trunk/attic/images-actors/ac_pearl-gfx32.xcf
   trunk/attic/images-actors/ac_pearl-gfx40.xcf
   trunk/attic/images-actors/ac_pearl-gfx48.xcf
   trunk/attic/images-actors/ac_pearl-gfx64.xcf
   trunk/attic/images-actors/ac_pearl_fall-gfx16.xcf
   trunk/attic/images-actors/ac_pearl_fall-gfx32.xcf
   trunk/attic/images-actors/ac_pearl_fall-gfx40.xcf
   trunk/attic/images-actors/ac_pearl_fall-gfx48.xcf
   trunk/attic/images-actors/ac_pearl_fall-gfx64.xcf
   trunk/attic/images-other/marble.psd
   trunk/attic/images-stones/st_swap-gfx16.xcf
   trunk/attic/images-stones/st_swap-gfx40.xcf
   trunk/attic/images-stones/st_swap-gfx48.xcf
   trunk/attic/images-stones/st_swap-gfx64.xcf
   trunk/data/gfx16/ac_pearl_black.png
   trunk/data/gfx16/ac_pearl_black_fall.png
   trunk/data/gfx16/ac_pearl_white.png
   trunk/data/gfx16/ac_pearl_white_fall.png
   trunk/data/gfx16/st_swap.png
   trunk/data/gfx32/ac_pearl_black.png
   trunk/data/gfx32/ac_pearl_black_fall.png
   trunk/data/gfx32/ac_pearl_white_fall.png
   trunk/data/gfx40/ac_pearl_black.png
   trunk/data/gfx40/ac_pearl_black_fall.png
   trunk/data/gfx40/ac_pearl_white_fall.png
   trunk/data/gfx48/ac_pearl_black.png
   trunk/data/gfx48/ac_pearl_black_fall.png
   trunk/data/gfx48/ac_pearl_white_fall.png
   trunk/data/gfx64/ac_pearl_black.png
   trunk/data/gfx64/ac_pearl_black_fall.png
   trunk/data/gfx64/ac_pearl_white.png
   trunk/data/gfx64/ac_pearl_white_fall.png
   trunk/data/gfx64/st_swap.png
Modified:
   trunk/data/gfx32/ac_pearl_white.png
   trunk/data/gfx40/ac_pearl_white.png
   trunk/data/gfx40/st_swap.png
   trunk/data/gfx48/ac_pearl_white.png
   trunk/data/gfx48/st_swap.png
Log:
-> Improved images for st_swap inclusive new resolutions gfx{16,64}
-> Improved images for white pearl, part i
-> First images for black pearl



Added: trunk/attic/images-actors/ac_pearl-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_fall-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_fall-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_fall-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_fall-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_fall-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_fall-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_fall-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_fall-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_fall-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_fall-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-other/marble.psd
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-other/marble.psd
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/attic/images-stones/st_swap-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_swap-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_swap-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_swap-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_swap-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_swap-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_swap-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_swap-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/ac_pearl_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_pearl_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/ac_pearl_black_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_pearl_black_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/ac_pearl_white.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_pearl_white.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/ac_pearl_white_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_pearl_white_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_swap.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_swap.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/ac_pearl_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/ac_pearl_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/ac_pearl_black_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/ac_pearl_black_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/ac_pearl_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/ac_pearl_white_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/ac_pearl_white_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/ac_pearl_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/ac_pearl_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/ac_pearl_black_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/ac_pearl_black_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx40/ac_pearl_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/ac_pearl_white_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/ac_pearl_white_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx40/st_swap.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/ac_pearl_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/ac_pearl_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/ac_pearl_black_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/ac_pearl_black_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx48/ac_pearl_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/ac_pearl_white_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/ac_pearl_white_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx48/st_swap.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/ac_pearl_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_pearl_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_pearl_black_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_pearl_black_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_pearl_white.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_pearl_white.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_pearl_white_fall.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_pearl_white_fall.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_swap.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_swap.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Sun Nov  8 21:09:11 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 8 Nov 2009 21:09:11 +0100
Subject: [Enigma-game-svn] r1847 - in trunk: attic/images-floors data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911082009.nA8K9BDZ031438@sheep.berlios.de>

Author: raoul
Date: 2009-11-08 21:09:09 +0100 (Sun, 08 Nov 2009)
New Revision: 1847

Added:
   trunk/attic/images-floors/Floorscales.svg
   trunk/attic/images-floors/fl_scales-gfx16.xcf
   trunk/attic/images-floors/fl_scales-gfx32.xcf
   trunk/attic/images-floors/fl_scales-gfx40.xcf
   trunk/attic/images-floors/fl_scales-gfx48.xcf
   trunk/attic/images-floors/fl_scales-gfx64.xcf
   trunk/data/gfx16/fl_scales.png
   trunk/data/gfx16/floor_frame.png
   trunk/data/gfx32/fl_scales.png
   trunk/data/gfx40/fl_scales.png
   trunk/data/gfx48/fl_scales.png
   trunk/data/gfx64/fl_scales.png
Log:
-> Images for floor scales for all resolutions
-> Floor frame for gfx16



Added: trunk/attic/images-floors/Floorscales.svg
===================================================================
--- trunk/attic/images-floors/Floorscales.svg	2009-11-08 18:37:30 UTC (rev 1846)
+++ trunk/attic/images-floors/Floorscales.svg	2009-11-08 20:09:09 UTC (rev 1847)
@@ -0,0 +1,2306 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="40"
+   height="40"
+   id="svg2"
+   sodipodi:version="0.32"
+   inkscape:version="0.47pre2 r22153"
+   version="1.0"
+   sodipodi:docname="floorscale.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape"
+   inkscape:export-filename="/home/raoul/Desktop/flsc/floorscale2.png"
+   inkscape:export-xdpi="87.804878"
+   inkscape:export-ydpi="87.804878">
+  <defs
+     id="defs4">
+    <linearGradient
+       id="linearGradient3961">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3945">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3941" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3943" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3933">
+      <stop
+         id="stop3935"
+         offset="0"
+         style="stop-color:#787878;stop-opacity:1;" />
+      <stop
+         id="stop3937"
+         offset="1"
+         style="stop-color:#787878;stop-opacity:0;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3925">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3927" />
+      <stop
+         style="stop-color:#787878;stop-opacity:0;"
+         offset="1"
+         id="stop3929" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3179">
+      <stop
+         style="stop-color:#333333;stop-opacity:1;"
+         offset="0"
+         id="stop3181" />
+      <stop
+         style="stop-color:#676770;stop-opacity:1"
+         offset="1"
+         id="stop3183" />
+    </linearGradient>
+    <inkscape:perspective
+       sodipodi:type="inkscape:persp3d"
+       inkscape:vp_x="0 : 526.18109 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_z="744.09448 : 526.18109 : 1"
+       inkscape:persp3d-origin="372.04724 : 350.78739 : 1"
+       id="perspective10" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3185"
+       x1="39"
+       y1="39"
+       x2="1"
+       y2="1"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3234"
+       gradientUnits="userSpaceOnUse"
+       x1="39"
+       y1="39"
+       x2="1"
+       y2="1" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3242"
+       gradientUnits="userSpaceOnUse"
+       x1="39"
+       y1="39"
+       x2="1"
+       y2="1"
+       gradientTransform="translate(0,60)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3265"
+       gradientUnits="userSpaceOnUse"
+       x1="39"
+       y1="39"
+       x2="1"
+       y2="1" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3273"
+       gradientUnits="userSpaceOnUse"
+       x1="39"
+       y1="39"
+       x2="1"
+       y2="1"
+       gradientTransform="translate(519.25,294.25)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3301"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0,60)"
+       x1="39"
+       y1="39"
+       x2="1"
+       y2="1" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3309"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0.25,110.25)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3357"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0.25,110.25)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179"
+       id="linearGradient3377"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0.25,110.25)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <inkscape:perspective
+       id="perspective2875"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3179-8">
+      <stop
+         style="stop-color:#333333;stop-opacity:1;"
+         offset="0"
+         id="stop3181-9" />
+      <stop
+         style="stop-color:#676770;stop-opacity:1"
+         offset="1"
+         id="stop3183-3" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective2875-4"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3179-2">
+      <stop
+         style="stop-color:#333333;stop-opacity:1;"
+         offset="0"
+         id="stop3181-5" />
+      <stop
+         style="stop-color:#676770;stop-opacity:1"
+         offset="1"
+         id="stop3183-8" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective2875-0"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179-1"
+       id="linearGradient3309-8"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0.25,110.25)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <linearGradient
+       id="linearGradient3179-1">
+      <stop
+         style="stop-color:#333333;stop-opacity:1;"
+         offset="0"
+         id="stop3181-3" />
+      <stop
+         style="stop-color:#676770;stop-opacity:1"
+         offset="1"
+         id="stop3183-1" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179-8"
+       id="linearGradient3003"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(-180,305)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <inkscape:perspective
+       id="perspective3839"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <inkscape:perspective
+       id="perspective3839-8"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <inkscape:perspective
+       id="perspective3999"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179-8-6"
+       id="linearGradient3003-5"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(-180,305)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <linearGradient
+       id="linearGradient3179-8-6">
+      <stop
+         style="stop-color:#333333;stop-opacity:1;"
+         offset="0"
+         id="stop3181-9-9" />
+      <stop
+         style="stop-color:#676770;stop-opacity:1"
+         offset="1"
+         id="stop3183-3-3" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179-8-6"
+       id="linearGradient4048"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(-180,360)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <filter
+       inkscape:collect="always"
+       id="filter4063">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="0.12"
+         id="feGaussianBlur4065" />
+    </filter>
+    <filter
+       inkscape:collect="always"
+       id="filter4075">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="0.12"
+         id="feGaussianBlur4077" />
+    </filter>
+    <filter
+       inkscape:collect="always"
+       id="filter4087">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="0.12"
+         id="feGaussianBlur4089" />
+    </filter>
+    <filter
+       inkscape:collect="always"
+       id="filter4099">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="0.12"
+         id="feGaussianBlur4101" />
+    </filter>
+    <inkscape:perspective
+       id="perspective4120"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3179-8-1"
+       id="linearGradient3003-7"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(-180,305)"
+       x1="39.75"
+       y1="39.75"
+       x2="0.055520125"
+       y2="0" />
+    <linearGradient
+       id="linearGradient3179-8-1">
+      <stop
+         style="stop-color:#333333;stop-opacity:1;"
+         offset="0"
+         id="stop3181-9-0" />
+      <stop
+         style="stop-color:#676770;stop-opacity:1"
+         offset="1"
+         id="stop3183-3-6" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4175"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <inkscape:perspective
+       id="perspective2980"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3945-6">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939-1">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3961-9">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953-7">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1"
+       id="radialGradient3916"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961-9"
+       id="radialGradient3918"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953-7"
+       id="radialGradient3920"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945-6"
+       id="radialGradient3922"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945"
+       id="radialGradient3801"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.65" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939"
+       id="radialGradient3803"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961"
+       id="radialGradient3805"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.65" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953"
+       id="radialGradient3807"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.65" />
+    <inkscape:perspective
+       id="perspective3817"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945-6-9"
+       id="radialGradient3922-8"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3945-6-9">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-0" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-7" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-0"
+       id="radialGradient3916-8"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-1-0">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-3" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-1" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961-9-3"
+       id="radialGradient3918-0"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3961-9-3">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-6" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-7" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953-7-2"
+       id="radialGradient3920-3"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3953-7-2">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-2" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-1" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective3040"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3945-6-0">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-9" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-6" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939-1-8">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-5" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-6" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3961-9-1">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-5" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-9" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953-7-4">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-8" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-10" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective3918"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945-6-9-6"
+       id="radialGradient3922-8-7"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3945-6-9-6">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-0-3" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-7-5" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-0-8"
+       id="radialGradient3916-8-0"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-1-0-8">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-3-0" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-1-4" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961-9-3-1"
+       id="radialGradient3918-0-1"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3961-9-3-1">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-6-3" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-7-5" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953-7-2-3"
+       id="radialGradient3920-3-9"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3953-7-2-3">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-2-4" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-1-1" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4035"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945-6-9-6-4"
+       id="radialGradient3922-8-7-0"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3945-6-9-6-4">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-0-3-9" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-7-5-6" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-0-8-4"
+       id="radialGradient3916-8-0-5"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-1-0-8-4">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-3-0-6" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-1-4-4" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961-9-3-1-5"
+       id="radialGradient3918-0-1-2"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3961-9-3-1-5">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-6-3-1" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-7-5-6" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953-7-2-3-3"
+       id="radialGradient3920-3-9-1"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3953-7-2-3-3">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-2-4-7" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-1-1-7" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4152"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3945-6-9-6-4-5">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-0-3-9-4" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-7-5-6-6" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939-1-0-8-4-1">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-3-0-6-2" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-1-4-4-0" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3961-9-3-1-5-5">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-6-3-1-1" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-7-5-6-9" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953-7-2-3-3-4">
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-2-4-7-6" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-1-1-7-8" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945-6-9-6-4-5"
+       id="radialGradient4261"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-0-8-4-1"
+       id="radialGradient4263"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961-9-3-1-5-5"
+       id="radialGradient4265"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953-7-2-3-3-4"
+       id="radialGradient4267"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.6500001" />
+    <inkscape:perspective
+       id="perspective3132"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3945-6-1">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-8" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-5" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939-1-7">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-53" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-8" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3961-9-31">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-8" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-96" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953-7-3">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-3" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-3" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3945-60">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947-4" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949-8" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939-8">
+      <stop
+         style="stop-color:#b4b4b4;stop-opacity:1;"
+         offset="0"
+         id="stop3941-9" />
+      <stop
+         style="stop-color:#646464;stop-opacity:1;"
+         offset="1"
+         id="stop3943-7" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3961-6">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963-4" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965-3" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953-3">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955-0" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957-9" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4221"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient4153-9"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-8-9">
+      <stop
+         style="stop-color:#a5a5a5;stop-opacity:1;"
+         offset="0"
+         id="stop3941-9-3" />
+      <stop
+         style="stop-color:#4b4b4b;stop-opacity:1;"
+         offset="1"
+         id="stop3943-7-4" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient4229"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4231">
+      <stop
+         style="stop-color:#b4b4b4;stop-opacity:1;"
+         offset="0"
+         id="stop4233" />
+      <stop
+         style="stop-color:#646464;stop-opacity:1;"
+         offset="1"
+         id="stop4235" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient4237"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4239">
+      <stop
+         style="stop-color:#b4b4b4;stop-opacity:1;"
+         offset="0"
+         id="stop4241" />
+      <stop
+         style="stop-color:#646464;stop-opacity:1;"
+         offset="1"
+         id="stop4243" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient4245"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4247">
+      <stop
+         style="stop-color:#b4b4b4;stop-opacity:1;"
+         offset="0"
+         id="stop4249" />
+      <stop
+         style="stop-color:#646464;stop-opacity:1;"
+         offset="1"
+         id="stop4251" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4435"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3939-1-7-6">
+      <stop
+         style="stop-color:#323232;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-53-6" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-8-6" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4444">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop4446" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop4448" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4451">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop4453" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop4455" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4458">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop4460" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop4462" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4806"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3945-6-4"
+       id="radialGradient3922-1"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="66"
+       fx="34"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3945-6-4">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-91" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-8" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-4"
+       id="radialGradient3916-4"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-1-4">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-55" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-0" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3961-9-13"
+       id="radialGradient3918-1"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="94"
+       fx="6"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3961-9-13">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-3" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-8" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3953-7-9"
+       id="radialGradient3920-2"
+       gradientUnits="userSpaceOnUse"
+       cx="34"
+       cy="94"
+       fx="34"
+       fy="94"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3953-7-9">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-21" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-5" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4179"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4181"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4183"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4185"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <inkscape:perspective
+       id="perspective4195"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <linearGradient
+       id="linearGradient3945-6-04">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3947-1-3" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3949-0-1" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3939-1-5">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-33" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-65" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3961-9-9">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3963-0-38" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3965-9-5" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3953-7-6">
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="0"
+         id="stop3955-7-0" />
+      <stop
+         style="stop-color:#353535;stop-opacity:1;"
+         offset="1"
+         id="stop3957-1-7" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4301"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9-1"
+       id="radialGradient4098-2"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-8-9-1">
+      <stop
+         style="stop-color:#a5a5a5;stop-opacity:1;"
+         offset="0"
+         id="stop3941-9-3-9" />
+      <stop
+         style="stop-color:#4b4b4b;stop-opacity:1;"
+         offset="1"
+         id="stop3943-7-4-3" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9-1"
+       id="radialGradient4309"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4311">
+      <stop
+         style="stop-color:#a5a5a5;stop-opacity:1;"
+         offset="0"
+         id="stop4313" />
+      <stop
+         style="stop-color:#4b4b4b;stop-opacity:1;"
+         offset="1"
+         id="stop4315" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9-1"
+       id="radialGradient4317"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4319">
+      <stop
+         style="stop-color:#a5a5a5;stop-opacity:1;"
+         offset="0"
+         id="stop4321" />
+      <stop
+         style="stop-color:#4b4b4b;stop-opacity:1;"
+         offset="1"
+         id="stop4323" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9-1"
+       id="radialGradient4325"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4327">
+      <stop
+         style="stop-color:#a5a5a5;stop-opacity:1;"
+         offset="0"
+         id="stop4329" />
+      <stop
+         style="stop-color:#4b4b4b;stop-opacity:1;"
+         offset="1"
+         id="stop4331" />
+    </linearGradient>
+    <inkscape:perspective
+       id="perspective4579"
+       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
+       inkscape:vp_z="1 : 0.5 : 1"
+       inkscape:vp_y="0 : 1000 : 0"
+       inkscape:vp_x="0 : 0.5 : 1"
+       sodipodi:type="inkscape:persp3d" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4179-4"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient3939-1-7-6-2">
+      <stop
+         style="stop-color:#323232;stop-opacity:1;"
+         offset="0"
+         id="stop3941-5-53-6-5" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop3943-9-8-6-3" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4181-0"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4588">
+      <stop
+         style="stop-color:#323232;stop-opacity:1;"
+         offset="0"
+         id="stop4590" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop4592" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4183-9"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4595">
+      <stop
+         style="stop-color:#323232;stop-opacity:1;"
+         offset="0"
+         id="stop4597" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop4599" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4185-2"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <linearGradient
+       id="linearGradient4602">
+      <stop
+         style="stop-color:#323232;stop-opacity:1;"
+         offset="0"
+         id="stop4604" />
+      <stop
+         style="stop-color:#787878;stop-opacity:1;"
+         offset="1"
+         id="stop4606" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4690"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4692"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4694"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4696"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4711"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4715"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4719"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4731"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4746"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4762"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient4780"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9-1"
+       id="radialGradient4818"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4864"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4866"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4868"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4870"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4890"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4892"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4894"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4896"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4910"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4912"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4914"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4916"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4928"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4930"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4932"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4934"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4954"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4956"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4958"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6"
+       id="radialGradient4960"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient4964"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient4980"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient5002"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9"
+       id="radialGradient3340"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-8-9-1"
+       id="radialGradient3342"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient3939-1-7-6-2"
+       id="radialGradient3344"
+       gradientUnits="userSpaceOnUse"
+       cx="6"
+       cy="66"
+       fx="6"
+       fy="66"
+       r="4.6500001" />
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="1.0"
+     gridtolerance="10"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="3.2659494"
+     inkscape:cx="47.891833"
+     inkscape:cy="-10.342393"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     showgrid="true"
+     inkscape:snap-bbox="true"
+     inkscape:object-paths="true"
+     inkscape:object-nodes="true"
+     inkscape:bbox-paths="false"
+     inkscape:bbox-nodes="false"
+     inkscape:snap-intersection-line-segments="true"
+     inkscape:snap-center="true"
+     inkscape:window-width="1269"
+     inkscape:window-height="947"
+     inkscape:window-x="0"
+     inkscape:window-y="25"
+     inkscape:snap-nodes="false"
+     inkscape:snap-bbox-edge-midpoints="false"
+     inkscape:snap-bbox-midpoints="false"
+     inkscape:snap-intersection-paths="true"
+     inkscape:snap-midpoints="true"
+     inkscape:snap-smooth-nodes="true"
+     inkscape:snap-object-midpoints="true"
+     showguides="true"
+     inkscape:guide-bbox="true"
+     inkscape:window-maximized="1"
+     inkscape:snap-global="true">
+    <inkscape:grid
+       type="xygrid"
+       id="grid2383"
+       visible="true"
+       enabled="true" />
+  </sodipodi:namedview>
+  <metadata
+     id="metadata7">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:title />
+      </cc:Work>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <g
+       id="g5004"
+       transform="translate(195,-665)">
+      <rect
+         y="666.75"
+         x="-193.25"
+         height="38"
+         width="38"
+         id="rect3289-9-75-6-7"
+         style="fill:#000000;fill-opacity:0;stroke:none" />
+      <rect
+         y="665.75"
+         x="-194.25"
+         height="40"
+         width="40"
+         id="rect3287-7-5-54-1"
+         style="fill:none;stroke:#323232;stroke-width:1.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
+      <g
+         transform="translate(-5e-6,-5)"
+         id="g4996">
+        <path
+           style="fill:none;stroke:#4b4b4b;stroke-width:1.20000005;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -155.21923,671.74289 0,38.01422 -38.06153,0 0,0"
+           id="path3809-6-9-5" />
+        <path
+           style="fill:none;stroke:#7d7d7d;stroke-width:1.20000005;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -155.2508,671.80603 -37.99839,0 0,37.88794"
+           id="path3807-57-2-3" />
+      </g>
+      <g
+         transform="translate(-6.6999985,-12.799994)"
+         id="g4987">
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-5-8"
+           id="use4128-1"
+           transform="translate(-3.5762767e-8,27.8)"
+           width="40"
+           height="40" />
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-5-8"
+           id="use4126-1"
+           width="40"
+           height="40"
+           transform="translate(27.8,-3.576281e-8)" />
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-5-8"
+           id="use4130-0"
+           transform="translate(27.8,27.8)"
+           width="40"
+           height="40" />
+        <path
+           sodipodi:type="arc"
+           style="fill:url(#radialGradient3340);fill-opacity:1;stroke:#505050;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="path3295-0-4-5-8"
+           sodipodi:cx="6"
+           sodipodi:cy="66"
+           sodipodi:rx="4"
+           sodipodi:ry="4"
+           d="m 10,66 a 4,4 0 1 1 -8,0 4,4 0 1 1 8,0 z"
+           transform="translate(-187.45,618.65)" />
+        <rect
+           style="fill:none;stroke:#5f5f5f;stroke-width:1.10000002;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="rect3291-9-6-2-0"
+           width="36"
+           height="36"
+           x="-185.55"
+           y="680.54999" />
+      </g>
+    </g>
+    <g
+       id="g4942"
+       transform="translate(200.2829,-671.7829)">
+      <g
+         id="g4938">
+        <path
+           style="fill:none;stroke:#464646;stroke-width:1.39999998;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -160.50213,723.52579 0,38.01421 -38.06153,0 0,0"
+           id="path3809-6-3-89-4" />
+        <path
+           style="fill:none;stroke:#6e6e6e;stroke-width:1.39999998;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -160.5337,723.58893 -37.99839,0 0,37.88794"
+           id="path3807-57-6-3-7" />
+      </g>
+      <g
+         transform="translate(15.000001,-17.999989)"
+         id="g4883">
+        <path
+           transform="translate(-186.65,680.65)"
+           d="m 10,66 c 0,2.209139 -1.790861,4 -4,4 -2.209139,0 -4,-1.790861 -4,-4 0,-2.209139 1.790861,-4 4,-4 2.209139,0 4,1.790861 4,4 z"
+           sodipodi:ry="4"
+           sodipodi:rx="4"
+           sodipodi:cy="66"
+           sodipodi:cx="6"
+           id="path4377-1"
+           style="fill:url(#radialGradient4954);fill-opacity:1;stroke:#3c3c3c;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           sodipodi:type="arc" />
+        <path
+           transform="translate(-186.65,708.41578)"
+           d="m 10,66 c 0,2.209139 -1.790861,4 -4,4 -2.209139,0 -4,-1.790861 -4,-4 0,-2.209139 1.790861,-4 4,-4 2.209139,0 4,1.790861 4,4 z"
+           sodipodi:ry="4"
+           sodipodi:rx="4"
+           sodipodi:cy="66"
+           sodipodi:cx="6"
+           id="path4387-0"
+           style="fill:url(#radialGradient4956);fill-opacity:1;stroke:#3c3c3c;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           sodipodi:type="arc" />
+        <path
+           transform="translate(-214.41579,708.41578)"
+           d="m 10,66 c 0,2.209139 -1.790861,4 -4,4 -2.209139,0 -4,-1.790861 -4,-4 0,-2.209139 1.790861,-4 4,-4 2.209139,0 4,1.790861 4,4 z"
+           sodipodi:ry="4"
+           sodipodi:rx="4"
+           sodipodi:cy="66"
+           sodipodi:cx="6"
+           id="path4383-0"
+           style="fill:url(#radialGradient4958);fill-opacity:1;stroke:#3c3c3c;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           sodipodi:type="arc" />
+        <path
+           sodipodi:type="arc"
+           style="fill:url(#radialGradient4960);fill-opacity:1;stroke:#3c3c3c;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="path3295-0-4-7-5-0"
+           sodipodi:cx="6"
+           sodipodi:cy="66"
+           sodipodi:rx="4"
+           sodipodi:ry="4"
+           d="m 10,66 c 0,2.209139 -1.790861,4 -4,4 -2.209139,0 -4,-1.790861 -4,-4 0,-2.209139 1.790861,-4 4,-4 2.209139,0 4,1.790861 4,4 z"
+           transform="translate(-214.41579,680.65)" />
+        <rect
+           style="fill:none;stroke:#505050;stroke-width:1.10000002;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="rect3291-9-6-5-6-4"
+           width="35.965786"
+           height="35.965786"
+           x="-212.51579"
+           y="742.54999" />
+      </g>
+      <rect
+         y="722.5329"
+         x="-199.5329"
+         height="40"
+         width="40"
+         id="rect3287-7-5-5-7-2"
+         style="fill:none;stroke:#141414;stroke-width:1.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
+    </g>
+    <g
+       id="g4842"
+       transform="translate(205,-670)">
+      <rect
+         y="670.75"
+         x="-144.25"
+         height="40"
+         width="40"
+         id="rect3287-7-5-54-1-7"
+         style="fill:none;stroke:#323232;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
+      <g
+         transform="translate(0.54919,11.00603)"
+         id="g4834">
+        <path
+           style="fill:none;stroke:#4b4b4b;stroke-width:1.60000002;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -105.76843,660.73686 0,38.01422 -38.06152,0 0,0"
+           id="path3809-6-9-5-6" />
+        <path
+           style="fill:none;stroke:#7d7d7d;stroke-width:1.60000002;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -105.8,660.8 -37.99838,0 0,37.88794"
+           id="path3807-57-2-3-5" />
+      </g>
+      <g
+         transform="translate(-15,-50)"
+         id="g4534">
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-5-8-6"
+           id="use4128-1-7"
+           transform="translate(-1.1920928e-8,27.1)"
+           width="40"
+           height="40" />
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-5-8-6"
+           id="use4126-1-4"
+           width="40"
+           height="40"
+           transform="translate(27.1,-1.1921024e-8)" />
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-5-8-6"
+           id="use4130-0-3"
+           transform="translate(27.1,27.1)"
+           width="40"
+           height="40" />
+        <path
+           sodipodi:type="arc"
+           style="fill:url(#radialGradient3342);fill-opacity:1;stroke:#505050;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="path3295-0-4-5-8-6"
+           sodipodi:cx="6"
+           sodipodi:cy="66"
+           sodipodi:rx="4"
+           sodipodi:ry="4"
+           d="m 10,66 a 4,4 0 1 1 -8,0 4,4 0 1 1 8,0 z"
+           transform="translate(-128.8,661.2)" />
+        <rect
+           style="fill:none;stroke:#5f5f5f;stroke-width:1.60000002;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="rect3291-9-6-2-0-3"
+           width="36"
+           height="36"
+           x="-127.25"
+           y="722.75" />
+      </g>
+    </g>
+    <g
+       id="g4804"
+       inkscape:export-filename="/home/raoul/Desktop/flsc/flsc_pre_64.png"
+       inkscape:export-xdpi="138.79518"
+       inkscape:export-ydpi="138.79518"
+       transform="translate(205,-670)">
+      <rect
+         y="720.75"
+         x="-144.25"
+         height="40"
+         width="40"
+         id="rect3287-7-5-5-7-2-2"
+         style="fill:none;stroke:#141414;stroke-width:1.5;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
+      <g
+         transform="translate(-5e-6,-1e-5)"
+         id="g4796">
+        <path
+           style="fill:none;stroke:#464646;stroke-width:1.60000002;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -105.21923,721.7429 0,38.01422 -38.06153,0 0,0"
+           id="path3809-6-3-89-4-6" />
+        <path
+           style="fill:none;stroke:#6e6e6e;stroke-width:1.60000002;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           d="m -105.25081,721.80604 -37.99838,0 0,37.88794"
+           id="path3807-57-6-3-7-7" />
+      </g>
+      <g
+         transform="translate(-1.4192333,-0.05711174)"
+         id="g4753">
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-7-5-0-4"
+           id="use4723"
+           transform="translate(27.065789,-2.2189522e-6)"
+           width="40"
+           height="40" />
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-7-5-0-4"
+           id="use4725"
+           transform="translate(3.0398369e-6,27.065784)"
+           width="40"
+           height="40" />
+        <use
+           x="0"
+           y="0"
+           xlink:href="#path3295-0-4-7-5-0-4"
+           id="use4727"
+           transform="translate(27.065789,27.065784)"
+           width="40"
+           height="40" />
+        <path
+           sodipodi:type="arc"
+           style="fill:url(#radialGradient3344);fill-opacity:1;stroke:#3c3c3c;stroke-width:1.29999995;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="path3295-0-4-7-5-0-4"
+           sodipodi:cx="6"
+           sodipodi:cy="66"
+           sodipodi:rx="4"
+           sodipodi:ry="4"
+           d="m 10,66 a 4,4 0 1 1 -8,0 4,4 0 1 1 8,0 z"
+           transform="translate(-142.36366,661.27421)" />
+        <rect
+           style="fill:none;stroke:#505050;stroke-width:1.60000002;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+           id="rect3291-9-6-5-6-4-5"
+           width="35.965786"
+           height="35.965786"
+           x="-140.81366"
+           y="722.82422" />
+      </g>
+    </g>
+    <text
+       xml:space="preserve"
+       style="font-size:10px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
+       x="123.94043"
+       y="27.597656"
+       id="text3346"><tspan
+         sodipodi:role="line"
+         id="tspan3348"
+         x="123.94043"
+         y="27.597656">&lt;- Released</tspan></text>
+    <text
+       xml:space="preserve"
+       style="font-size:10px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
+       x="123.94043"
+       y="77.597656"
+       id="text3350"><tspan
+         sodipodi:role="line"
+         id="tspan3352"
+         x="123.94043"
+         y="77.597656">&lt;- Pressed</tspan></text>
+    <text
+       xml:space="preserve"
+       style="font-size:10px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
+       x="59.438477"
+       y="-16.630859"
+       id="text3354"><tspan
+         sodipodi:role="line"
+         id="tspan3356"
+         x="59.438477"
+         y="-16.630859">Gfx{16,32}</tspan></text>
+    <text
+       xml:space="preserve"
+       style="font-size:10px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
+       x="-35.551758"
+       y="-17.080078"
+       id="text3358"><tspan
+         sodipodi:role="line"
+         id="tspan3360"
+         x="-35.551758"
+         y="-17.080078">gfx{40,48,64}</tspan></text>
+  </g>
+</svg>

Added: trunk/attic/images-floors/fl_scales-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/fl_scales-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/fl_scales-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/fl_scales-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/fl_scales-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/fl_scales-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/fl_scales-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/fl_scales-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-floors/fl_scales-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/fl_scales-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/fl_scales.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/fl_scales.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/floor_frame.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/floor_frame.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/fl_scales.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/fl_scales.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/fl_scales.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/fl_scales.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/fl_scales.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/fl_scales.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/fl_scales.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/fl_scales.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Sun Nov  8 23:36:10 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 8 Nov 2009 23:36:10 +0100
Subject: [Enigma-game-svn] r1848 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 data/schemas src/actors
Message-ID: <200911082236.nA8MaAV6009708@sheep.berlios.de>

Author: raoul
Date: 2009-11-08 23:36:07 +0100 (Sun, 08 Nov 2009)
New Revision: 1848

Removed:
   trunk/data/gfx32/ac-whiteball-small-fall.png
   trunk/data/gfx40/ac-whiteball-small-fall.png
   trunk/data/gfx48/ac-whiteball-small-fall.png
Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/actors/Balls.cc
Log:
-> Code for black pearls
-> Removed some unused images

Note: The model loading code uses images from white pearl as fallback.



Deleted: trunk/data/gfx32/ac-whiteball-small-fall.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/ac-whiteball-small-fall.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/ac-whiteball-small-fall.png
===================================================================
(Binary files differ)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-08 20:09:09 UTC (rev 1847)
+++ trunk/data/models-2d.lua	2009-11-08 22:36:07 UTC (rev 1848)
@@ -32,46 +32,46 @@
 -- ball-shaped actors --
 ------------------------
 
--- ac-blackball and ac-whiteball--
+-- ac_marble --
 do
     local images,frames,shadows
 
-    -- Normal Blackball
+    -- Normal black marble
     images = SpriteImages("ac_marble_black", 2, 0.5, 0.32)
     shadows = SpriteImage("sh-blackball", 0.4, 0.29)
     DefShModel("ac_marble_black", "ac_marble_black1", "sh-blackball")
     DefShModel("ac_marble_black-shine", "ac_marble_black2", "sh-blackball")
 
-    -- Normal Whiteball
-    -- Use shadow from black ball
+    -- Normal white marble
+    -- Use shadow from black marble
     DefAlias("sh-whiteball", "sh-blackball")
     images = SpriteImages("ac_marble_white", 2, 0.5, 0.32)
     DefShModel("ac_marble_white", "ac_marble_white1", "sh-whiteball")
     DefShModel("ac_marble_white-shine", "ac_marble_white2", "sh-whiteball")
 
-    -- Falling Blackball
+    -- Falling black marble
     images = SpriteImages("ac-blackball-fall", 10)
     frames = ComposeFrames(images,{70,65,60,55,50,50,50,50,50,50,50})
     DefAnim("ac_marble_black-fall", frames)
     DefAlias("ac_marble_black-fallen", "invisible")
 
-    -- Appearing / disappearing Blackball
-    -- use the images from falling
+    -- Appearing / disappearing black marble
+    -- use the images from falling black marble
     DefAnim("ac_marble_black-appear", ReverseFrames(BuildFrames(images, 25)))
     DefAnim("ac_marble_black-disappear", BuildFrames(images, 25))
 
-    -- Falling Whiteball
+    -- Falling white marble
     images = SpriteImages("ac-whiteball-fall", 10)
     frames = ComposeFrames(images,{70,65,60,55,50,50,50,50,50,50,50})
     DefAnim("ac_marble_white-fall", frames)
     DefAlias("ac_marble_white-fallen", "invisible")
 
-    -- Appearing / disappearing Whiteball
-    -- use the images from falling
+    -- Appearing / disappearing white marble
+    -- use the images from falling white marble
     DefAnim("ac_marble_white-appear", ReverseFrames(BuildFrames(images, 25)))
     DefAnim("ac_marble_white-disappear", BuildFrames(images, 25))
 
-    -- Jumping Blackball
+    -- Jumping black marble
     images  = SpriteImages("ac-blackball-jump", 4)
     shadows = SpriteImages("sh-blackball-jump", 4, 0.4)
     frames  = {}
@@ -81,8 +81,8 @@
     end
     DefAnim("ac_marble_black-jump", PingPong(BuildFrames(frames, 70)))
 
-    -- Jumping Whiteball
-    -- Use shadow from black ball
+    -- Jumping white marble
+    -- Use shadow from black marble
     images  = SpriteImages("ac-whiteball-jump", 4)
     frames  = {}
     for i=1,4 do
@@ -91,7 +91,7 @@
     end
     DefAnim("ac_marble_white-jump", PingPong(BuildFrames(frames, 70)))
 
-    -- Sinking Blackball
+    -- Sinking black marble
     shadows = SpriteImages("sh-blackball-sink", 7, 0.4)
     images = SpriteImages("fg-blackball-sink", 7)
     for i=1,table.getn(images) do
@@ -99,47 +99,64 @@
     end
     DefAlias("ac_marble_black-sunk", "invisible")
 
-    -- Sinking Whiteball
-    -- Use shadow from black ball
+    -- Sinking white marble
+    -- Use shadow from black marble
     images = SpriteImages("fg-whiteball-sink", 7)
     for i=1,table.getn(images) do
         DefShModel("ac_marble_white-sink"..(i-1), images[i], shadows[i])
     end
     DefAlias("ac_marble_white-sunk", "invisible")
 
-    -- Shattering Blackball
+    -- Shattering black marble
     Sprite({name="ac-blackball-shatter", nimages=5, framelen=60})
     DefAlias("ac_marble_black-shatter", "ac-blackball-shatter")
     DefAlias("ac_marble_black-shattered", "ac-blackball-shatter5")
 
-    -- Shattering Whiteball
+    -- Shattering white marble
     Sprite({name="ac-whiteball-shatter", nimages=5, framelen=60})
     DefAlias("ac_marble_white-shatter", "ac-whiteball-shatter")
     DefAlias("ac_marble_white-shattered", "ac-whiteball-shatter5")
 end
 
--- ac-whiteball-small --
+-- ac_pearl --
 do
     local images, frames, shadows
 
-    -- Normal
+    -- Normal white pearl
     SpriteImage ("sh-whiteball-small", 0.4, 0.41)
     SpriteImage ("ac_pearl_white", 0.5, 0.43)
     DefShModel("ac_pearl_white", "ac_pearl_white", "sh-whiteball-small")
     DefAlias ("ac_pearl_white-shine", "ac_pearl_white")
 
-    -- Falling
-    images = SpriteImages ("ac-whiteball-small-fall", 5, 0.5, 0.43)
+    -- Normal black pearl
+    -- Use shadow from black pearl
+    SpriteImage ("ac_pearl_black", 0.5, 0.43)
+    DefShModel("ac_pearl_black", "ac_pearl_black", "sh-whiteball-small")
+    DefAlias ("ac_pearl_black-shine", "ac_pearl_black")
+
+    -- Falling white pearl
+    images = SpriteImages ("ac_pearl_white_fall", 5, 0.5, 0.43)
     table.insert(images, "invisible")
     DefAnim("ac_pearl_white-fall", ComposeFrames(images,{70,65,60,55,50,30}))
     DefAlias("ac_pearl_white-fallen", "invisible")
 
-    -- Appearing / disappearing
-    -- use the images from falling
+    -- Appearing / disappearing white pearl
+    -- use the images from falling white pearl
     DefAnim("ac_pearl_white-appear", ReverseFrames(BuildFrames(images, 25)))
     DefAnim("ac_pearl_white-disappear", BuildFrames(images, 25))
 
-    -- Jumping
+    -- Falling black pearl
+    images = SpriteImages ("ac_pearl_black_fall", 5, 0.5, 0.43)
+    table.insert(images, "invisible")
+    DefAnim("ac_pearl_black-fall", ComposeFrames(images,{70,65,60,55,50,30}))
+    DefAlias("ac_pearl_black-fallen", "invisible")
+
+    -- Appearing / disappearing black pearl
+    -- use the images from falling black pearl
+    DefAnim("ac_pearl_black-appear", ReverseFrames(BuildFrames(images, 25)))
+    DefAnim("ac_pearl_black-disappear", BuildFrames(images, 25))
+
+    -- Jumping white pearl
     images  = SpriteImages("ac-whiteball-small-jump", 4)
     shadows = SpriteImages("sh-whiteball-small-jump", 4, 0.4)
     frames  = {}
@@ -149,21 +166,47 @@
     end
     DefAnim("ac_pearl_white-jump", PingPong(BuildFrames(frames, 70)))
 
-    -- sinking
-    DefAlias ("ac_pearl_white-sink0", "ac-whiteball-small-fall1")
-    DefAlias ("ac_pearl_white-sink1", "ac-whiteball-small-fall2")
-    DefAlias ("ac_pearl_white-sink2", "ac-whiteball-small-fall3")
-    DefAlias ("ac_pearl_white-sink3", "ac-whiteball-small-fall3")
-    DefAlias ("ac_pearl_white-sink4", "ac-whiteball-small-fall4")
-    DefAlias ("ac_pearl_white-sink5", "ac-whiteball-small-fall4")
-    DefAlias ("ac_pearl_white-sink6", "ac-whiteball-small-fall5")
+    -- Jumping black pearl
+    -- Use shadow from white pearl
+    images  = SpriteImages("ac-whiteball-small-jump", 4)
+    frames  = {}
+    for i=1,4 do
+        DefShModel("sb-jump"..i, images[i], shadows[i])
+        table.insert(frames, "sb-jump"..i)
+    end
+    DefAnim("ac_pearl_black-jump", PingPong(BuildFrames(frames, 70)))
+
+    -- Sinking white pearl
+    DefAlias ("ac_pearl_white-sink0", "ac_pearl_white_fall1")
+    DefAlias ("ac_pearl_white-sink1", "ac_pearl_white_fall2")
+    DefAlias ("ac_pearl_white-sink2", "ac_pearl_white_fall3")
+    DefAlias ("ac_pearl_white-sink3", "ac_pearl_white_fall3")
+    DefAlias ("ac_pearl_white-sink4", "ac_pearl_white_fall4")
+    DefAlias ("ac_pearl_white-sink5", "ac_pearl_white_fall4")
+    DefAlias ("ac_pearl_white-sink6", "ac_pearl_white_fall5")
     DefAlias ("ac_pearl_white-sunk", "invisible")
 
-    -- Shattering
+    -- Sinking black pearl
+    DefAlias ("ac_pearl_black-sink0", "ac_pearl_black-fall1")
+    DefAlias ("ac_pearl_black-sink1", "ac_pearl_black-fall2")
+    DefAlias ("ac_pearl_black-sink2", "ac_pearl_black-fall3")
+    DefAlias ("ac_pearl_black-sink3", "ac_pearl_black-fall3")
+    DefAlias ("ac_pearl_black-sink4", "ac_pearl_black-fall4")
+    DefAlias ("ac_pearl_black-sink5", "ac_pearl_black-fall4")
+    DefAlias ("ac_pearl_black-sink6", "ac_pearl_black-fall5")
+    DefAlias ("ac_pearl_black-sunk", "invisible")
+
+    -- Shattering white pearl
     images = SpriteImages ("ac-whiteball-small-shatter", 5)
     DefAnim("ac_pearl_white-shatter", BuildFrames(images, 60))
     SpriteImage ("ac-whiteball-small-shattered")
     DefAlias("ac_pearl_white-shattered", "ac-whiteball-small-shattered")
+
+    -- Shattering black pearl
+    images = SpriteImages ("ac-whiteball-small-shatter", 5)
+    DefAnim("ac_pearl_black-shatter", BuildFrames(images, 60))
+    SpriteImage ("ac-whiteball-small-shattered")
+    DefAlias("ac_pearl_black-shattered", "ac-whiteball-small-shattered")
 end
 
 -- ac-killerball --
@@ -171,7 +214,6 @@
     DefAlias("ac_killer", "ac_pearl_white")
 end
 
-
 ----------------------------
 -- not ball-shaped actors --
 ----------------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-11-08 20:09:09 UTC (rev 1847)
+++ trunk/data/schemas/objects.xml	2009-11-08 22:36:07 UTC (rev 1848)
@@ -256,6 +256,9 @@
       <msg name="_shield"/>
       <msg name="_suicide"/>
     </object>
+    <object name="ac_pearl_black">
+      <attr name="color" value="0"/>
+    </object>
     <object name="ac_pearl_white">
       <attr name="color" value="1"/>
     </object>

Modified: trunk/src/actors/Balls.cc
===================================================================
--- trunk/src/actors/Balls.cc	2009-11-08 20:09:09 UTC (rev 1847)
+++ trunk/src/actors/Balls.cc	2009-11-08 22:36:07 UTC (rev 1848)
@@ -586,7 +586,7 @@
         BootRegister(new Marble(1), "ac_marble_white");
         BootRegister(new Pearl(1), "ac_pearl");
         BootRegister(new Pearl(1), "ac_pearl_white");
+        BootRegister(new Pearl(0), "ac_pearl_black");
     BOOT_REGISTER_END
 
 } // namespace enigma
-



From ral at mail.berlios.de  Mon Nov  9 00:07:48 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 9 Nov 2009 00:07:48 +0100
Subject: [Enigma-game-svn] r1849 - in trunk/src: . actors items
Message-ID: <200911082307.nA8N7mVF011548@sheep.berlios.de>

Author: ral
Date: 2009-11-09 00:07:47 +0100 (Mon, 09 Nov 2009)
New Revision: 1849

Modified:
   trunk/src/actors.cc
   trunk/src/actors/Rotors.cc
   trunk/src/items/Meditation.cc
   trunk/src/world.cc
Log:
Trunk 1.1:
- black pearl: activate meditation feature


Modified: trunk/src/actors/Rotors.cc
===================================================================
--- trunk/src/actors/Rotors.cc	2009-11-08 22:36:07 UTC (rev 1848)
+++ trunk/src/actors/Rotors.cc	2009-11-08 23:07:47 UTC (rev 1849)
@@ -67,7 +67,7 @@
         }
     
         ActorsInRangeIterator air_it = ActorsInRangeIterator(this, range,
-                1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white);
+                1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white | 1<<ac_pearl_black);
         Actor *a;
         while((a = air_it.next()) != NULL) {
             if (a->is_movable() && !a->is_invisible()) {

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2009-11-08 22:36:07 UTC (rev 1848)
+++ trunk/src/actors.cc	2009-11-08 23:07:47 UTC (rev 1849)
@@ -309,7 +309,7 @@
 bool Actor::can_move() const { 
     if (Stone *st = GetStone (get_gridpos())) {
         if (!server::NoCollisions || !(get_traits().id_mask &
-                        (1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white)))
+                        (1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white | 1<<ac_pearl_black)))
             return !st->is_sticky(this);
     }
     return true;

Modified: trunk/src/items/Meditation.cc
===================================================================
--- trunk/src/items/Meditation.cc	2009-11-08 22:36:07 UTC (rev 1848)
+++ trunk/src/items/Meditation.cc	2009-11-08 23:07:47 UTC (rev 1849)
@@ -138,7 +138,8 @@
         static const double MINTIME = 1.0;
         ItemID id = get_id(this);
     
-        if (whiteball == NULL && !a->is_flying() && !a->is_dead() && get_id(a) == ac_pearl_white && isMeditating(a)) {
+        if (whiteball == NULL && !a->is_flying() && !a->is_dead() 
+                && (get_id(a) == ac_pearl_white || get_id(a) == ac_pearl_black) && isMeditating(a)) {
             // meditatist entered a free hollow
             whiteball  = a;
             enter_time = server::LevelTime;
@@ -222,7 +223,8 @@
         std::vector<Actor*> actors;
         GetActorsInsideField(get_pos(), actors);
         for (std::vector<Actor*>::iterator itr = actors.begin(); itr != actors.end(); ++itr) {
-            if (!(*itr)->is_flying() &&  whiteball==NULL && get_id(*itr)==ac_pearl_white && isMeditating(*itr)) {
+            if (!(*itr)->is_flying() &&  whiteball==NULL 
+                    && (get_id(*itr)==ac_pearl_white || get_id(*itr)==ac_pearl_black) && isMeditating(*itr)) {
                  // meditatist entered a free hollow
                 whiteball  = *itr;
                 enter_time = server::LevelTime;

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-11-08 22:36:07 UTC (rev 1848)
+++ trunk/src/world.cc	2009-11-08 23:07:47 UTC (rev 1849)
@@ -438,7 +438,7 @@
         a->on_creation(pos);
     }
     
-    if (get_id(a) == ac_pearl_white)
+    if (get_id(a) == ac_pearl_white || get_id(a) == ac_pearl_black)
         ChangeMeditation(+1, 0, 0, 0);
 }
 
@@ -1008,7 +1008,7 @@
     double x = ai.pos[0];
     double y = ai.pos[1];
     bool noCollisions = server::NoCollisions  && 
-                (a->get_traits().id_mask & (1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white));
+                (a->get_traits().id_mask & (1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white | 1<<ac_pearl_black));
     
     // info about a Window stone on the Gridpos of the actor that may cause
     // contacts within the grid
@@ -1153,7 +1153,7 @@
     double     restitution = 1.0; //0.85;
 
     if (server::NoCollisions && (sc.stoneid != st_borderstone) && 
-                a->get_traits().id_mask & (1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white))
+                a->get_traits().id_mask & (1<<ac_marble_white | 1<<ac_marble_black | 1<<ac_pearl_white | 1<<ac_pearl_black))
         return;
 
     Contact contact (sc.contact_point, sc.normal);



From ral at mail.berlios.de  Mon Nov  9 00:47:07 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 9 Nov 2009 00:47:07 +0100
Subject: [Enigma-game-svn] r1850 - in trunk: data data/schemas src src/actors
Message-ID: <200911082347.nA8Nl7LN020939@sheep.berlios.de>

Author: ral
Date: 2009-11-09 00:47:05 +0100 (Mon, 09 Nov 2009)
New Revision: 1850

Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/actors.hh
   trunk/src/actors/KillerActor.cc
   trunk/src/actors/KillerActor.hh
   trunk/src/oxyd.cc
Log:
Trunk 1.1:
- killer: add "color" attribute, kinds "ac_killer_white", "ac_killer_black"


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-08 23:07:47 UTC (rev 1849)
+++ trunk/data/models-2d.lua	2009-11-08 23:47:05 UTC (rev 1850)
@@ -211,7 +211,8 @@
 
 -- ac-killerball --
 do
-    DefAlias("ac_killer", "ac_pearl_white")
+    DefAlias("ac_killer_black", "ac_pearl_black")
+    DefAlias("ac_killer_white", "ac_pearl_white")
 end
 
 ----------------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-11-08 23:07:47 UTC (rev 1849)
+++ trunk/data/schemas/objects.xml	2009-11-08 23:47:05 UTC (rev 1850)
@@ -211,9 +211,14 @@
       <attr name="strength" default="10.0"/>
     </object>
     <object name="ac_killer">
-      <attr name="destination"/>
-      <attr name="strength" default="10.0"/>
+      <attr name="color" default="1"/>
     </object>
+    <object name="ac_killer_black">
+      <attr name="color" value="0"/>
+    </object>
+    <object name="ac_killer_white">
+      <attr name="color" value="1"/>
+    </object>
     <object name="ac_marble">
       <attr name="color" default="0"/>
       <msg name="_appear"/>
@@ -239,7 +244,7 @@
       <attr name="color" value="1"/>
     </object>
     <object name="ac_pearl">
-      <attr name="color" default="1" min="1"/>
+      <attr name="color" default="1"/>
       <msg name="_appear"/>
       <msg name="_booze"/>
       <msg name="_disappear"/>

Modified: trunk/src/actors/KillerActor.cc
===================================================================
--- trunk/src/actors/KillerActor.cc	2009-11-08 23:07:47 UTC (rev 1849)
+++ trunk/src/actors/KillerActor.cc	2009-11-08 23:47:05 UTC (rev 1850)
@@ -27,9 +27,9 @@
 
 /* -------------------- Killer  -------------------- */
 
-    Killer::Killer() : Actor (traits) {
+    Killer::Killer(int color) : Actor (traits[color]) {
         setAttr("adhesion", Value(2.0));
-        setAttr("color", Value(WHITE));
+        setAttr("color", Value(color));
         setAttr("controllers", Value(3));
     }
 
@@ -47,10 +47,19 @@
         return false;
     }
     
-    ActorTraits Killer::traits = {"ac_killer", ac_killer, 1<<ac_killer, 13.0/64, 0.7};
+    int Killer::traitsIdx() const {
+        return getAttr("color");
+    }
+
+    ActorTraits Killer::traits[2] = {
+        {"ac_killer_white", ac_killer_white, 1<<ac_killer_white, 13.0/64, 0.7},
+        {"ac_killer_black", ac_killer_black, 1<<ac_killer_black, 13.0/64, 0.7}
+    };
     
     BOOT_REGISTER_START
-        BootRegister(new Killer(), "ac_killer");
+        BootRegister(new Killer(1), "ac_killer");
+        BootRegister(new Killer(1), "ac_killer_white");
+        BootRegister(new Killer(0), "ac_killer_black");
     BOOT_REGISTER_END
 
 } // namespace enigma

Modified: trunk/src/actors/KillerActor.hh
===================================================================
--- trunk/src/actors/KillerActor.hh	2009-11-08 23:07:47 UTC (rev 1849)
+++ trunk/src/actors/KillerActor.hh	2009-11-08 23:47:05 UTC (rev 1850)
@@ -29,10 +29,10 @@
      */
     class Killer : public Actor {
         CLONEACTOR(Killer);
-        DECL_ACTORTRAITS;
+        DECL_ACTORTRAITS_ARRAY(2, traitsIdx());
  
    public:
-        Killer();
+        Killer(int color);
         
         // Object interface.
         virtual std::string getClass() const;
@@ -40,6 +40,8 @@
         // Actor interface
         virtual bool is_dead() const;
         virtual bool on_collision(Actor *a);
+    private:
+        int traitsIdx() const;
     };
 
 } // namespace enigma

Modified: trunk/src/actors.hh
===================================================================
--- trunk/src/actors.hh	2009-11-08 23:07:47 UTC (rev 1849)
+++ trunk/src/actors.hh	2009-11-08 23:47:05 UTC (rev 1850)
@@ -30,14 +30,15 @@
         ac_marble_white  = 1,
         ac_pearl_black   = 2,
         ac_pearl_white   = 3,
-        ac_killer     = 4,
-        ac_rotor      = 5,
-        ac_top        = 6,
-        ac_horse      = 7,
-        ac_bug        = 8,
-        ac_cannonball = 9,
-        ac_spermbird  = 10,
-        ac_LAST       = 10,
+        ac_killer_black  = 4,
+        ac_killer_white  = 5,
+        ac_rotor      = 6,
+        ac_top        = 7,
+        ac_horse      = 8,
+        ac_bug        = 9,
+        ac_cannonball = 10,
+        ac_spermbird  = 11,
+        ac_LAST       = 11,
         ac_COUNT
     };
 

Modified: trunk/src/oxyd.cc
===================================================================
--- trunk/src/oxyd.cc	2009-11-08 23:07:47 UTC (rev 1849)
+++ trunk/src/oxyd.cc	2009-11-08 23:47:05 UTC (rev 1850)
@@ -515,7 +515,7 @@
         case MarbleType_Meditation:
             if (have_black_marble && !level.getHarmlessMeditationMarbles()) {
                 // # example: Oxyd Extra #28
-                ac = MakeActor ("ac_killer");
+                ac = MakeActor("ac_killer");
                 ac->setAttr("adhesion", 1.0);
                 ac->setAttr("controllers", 3);
             }



From raoul at mail.berlios.de  Mon Nov  9 15:57:17 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 9 Nov 2009 15:57:17 +0100
Subject: [Enigma-game-svn] r1851 - in trunk: attic/images-actors data
	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911091457.nA9EvHVW025480@sheep.berlios.de>

Author: raoul
Date: 2009-11-09 15:57:11 +0100 (Mon, 09 Nov 2009)
New Revision: 1851

Added:
   trunk/attic/images-actors/ac_pearl_jump-gfx16.xcf
   trunk/attic/images-actors/ac_pearl_jump-gfx32.xcf
   trunk/attic/images-actors/ac_pearl_jump-gfx40.xcf
   trunk/attic/images-actors/ac_pearl_jump-gfx48.xcf
   trunk/attic/images-actors/ac_pearl_jump-gfx64.xcf
   trunk/attic/images-actors/ac_pearl_sizes.txt
   trunk/data/gfx16/ac_pearl_black_jump.png
   trunk/data/gfx16/ac_pearl_white_jump.png
   trunk/data/gfx32/ac_pearl_black_jump.png
   trunk/data/gfx32/ac_pearl_white_jump.png
   trunk/data/gfx40/ac_pearl_black_jump.png
   trunk/data/gfx40/ac_pearl_white_jump.png
   trunk/data/gfx48/ac_pearl_black_jump.png
   trunk/data/gfx48/ac_pearl_white_jump.png
   trunk/data/gfx64/ac_pearl_black_jump.png
   trunk/data/gfx64/ac_pearl_white_jump.png
Removed:
   trunk/data/gfx32/ac-whiteball-small-jump.png
   trunk/data/gfx40/ac-whiteball-small-jump.png
   trunk/data/gfx48/ac-whiteball-small-jump.png
Modified:
   trunk/data/models-2d.lua
Log:
-> Models for jumping black pearl
-> Table with pearl sizes in different model images



Added: trunk/attic/images-actors/ac_pearl_jump-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_jump-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_jump-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_jump-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_jump-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_jump-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_jump-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_jump-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_jump-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_pearl_jump-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_pearl_sizes.txt
===================================================================
--- trunk/attic/images-actors/ac_pearl_sizes.txt	2009-11-08 23:47:05 UTC (rev 1850)
+++ trunk/attic/images-actors/ac_pearl_sizes.txt	2009-11-09 14:57:11 UTC (rev 1851)
@@ -0,0 +1,43 @@
+Sizes for pearl actor models
+============================
+	
+Physical radius of pearls is 13/64 tiles.
+
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|                                                  | gfx16     | gfx32      | gfx40     | gfx48     | gfx64     |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Sprite image size [px]                           | 20        | 40         | 50        | 60        | 80        |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Physical pearl size (diameter) [px]              | 6.5       | 13.0       | 16.25     | 19.5      | 26.0      |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for steady models                           |           |            |           |           |           |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Pearl size in steady models [px] and [% of tile] | 8  40.0%  | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for fall models                             |           |            |           |           |           |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Model image size [px]                            | 20 x 100  | 40 x 200   | 50 x 250  | 60 x 300  | 80 x 400  |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Pearl size in fall models [px] and [% of tile]   |           |            |           |           |           |
+| frame 1                                          | 8  50.0%  | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+| frame 2                                          | 6  37.5%  | 10  31.25% | 14  35.0% | 16  33.3% | 22  34.3% |
+| frame 3                                          | 4  25.0%  | 8   25.0%  | 12  30.0% | 14  29.1% | 18  28.1% |
+| frame 4                                          | 2  12.5%  | 6   18.75% | 10  25.0% | 10  20.8% | 14  21.8% |
+| frame 5                                          | 0  0.0%   | 4   12.5%  | 8   20.0% | 8   16.6% | 10  15.6% |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for jump models                             |           |            |           |           |           |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Model image size [px]                            | 20 x 100  | 40 x 200   | 50 x 250  | 60 x 300  | 80 x 400  |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Pearl size if jump models [px] and [% of tile]   |           |            |           |           |           |
+| frame 1                                          | 8   50.0% | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+| frame 2                                          | 10  62.5% | 14  43.7%  | 18  45.0% | 20  41.6% | 30  46.8% |
+| frame 3                                          | 12  75.0% | 16  50.0%  | 20  50.0% | 22  45.8% | 34  53.1% |
+| frame 4                                          | 14  87.5% | 18  56.2%  | 22  55.0% | 24  50.0% | 38  59.3% |
+| frame 5                                          | 16  100%  | 20  62.5%  | 24  60.0% | 26  54.1% | 42  65.6% |
+|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+
+// EOF


Property changes on: trunk/attic/images-actors/ac_pearl_sizes.txt
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/gfx16/ac_pearl_black_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_pearl_black_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/ac_pearl_white_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_pearl_white_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx32/ac-whiteball-small-jump.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/ac_pearl_black_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/ac_pearl_black_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/ac_pearl_white_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/ac_pearl_white_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/ac-whiteball-small-jump.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/ac_pearl_black_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/ac_pearl_black_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/ac_pearl_white_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/ac_pearl_white_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/ac-whiteball-small-jump.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/ac_pearl_black_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/ac_pearl_black_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/ac_pearl_white_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/ac_pearl_white_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_pearl_black_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_pearl_black_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_pearl_white_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_pearl_white_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-08 23:47:05 UTC (rev 1850)
+++ trunk/data/models-2d.lua	2009-11-09 14:57:11 UTC (rev 1851)
@@ -123,19 +123,19 @@
     local images, frames, shadows
 
     -- Normal white pearl
-    SpriteImage ("sh-whiteball-small", 0.4, 0.41)
-    SpriteImage ("ac_pearl_white", 0.5, 0.43)
+    SpriteImage("sh-whiteball-small", 0.4, 0.41)
+    SpriteImage("ac_pearl_white", 0.5, 0.43)
     DefShModel("ac_pearl_white", "ac_pearl_white", "sh-whiteball-small")
-    DefAlias ("ac_pearl_white-shine", "ac_pearl_white")
+    DefAlias("ac_pearl_white-shine", "ac_pearl_white")
 
     -- Normal black pearl
     -- Use shadow from black pearl
-    SpriteImage ("ac_pearl_black", 0.5, 0.43)
+    SpriteImage("ac_pearl_black", 0.5, 0.43)
     DefShModel("ac_pearl_black", "ac_pearl_black", "sh-whiteball-small")
-    DefAlias ("ac_pearl_black-shine", "ac_pearl_black")
+    DefAlias("ac_pearl_black-shine", "ac_pearl_black")
 
     -- Falling white pearl
-    images = SpriteImages ("ac_pearl_white_fall", 5, 0.5, 0.43)
+    images = SpriteImages("ac_pearl_white_fall", 5, 0.5, 0.43)
     table.insert(images, "invisible")
     DefAnim("ac_pearl_white-fall", ComposeFrames(images,{70,65,60,55,50,30}))
     DefAlias("ac_pearl_white-fallen", "invisible")
@@ -146,7 +146,7 @@
     DefAnim("ac_pearl_white-disappear", BuildFrames(images, 25))
 
     -- Falling black pearl
-    images = SpriteImages ("ac_pearl_black_fall", 5, 0.5, 0.43)
+    images = SpriteImages("ac_pearl_black_fall", 5, 0.5, 0.43)
     table.insert(images, "invisible")
     DefAnim("ac_pearl_black-fall", ComposeFrames(images,{70,65,60,55,50,30}))
     DefAlias("ac_pearl_black-fallen", "invisible")
@@ -157,7 +157,7 @@
     DefAnim("ac_pearl_black-disappear", BuildFrames(images, 25))
 
     -- Jumping white pearl
-    images  = SpriteImages("ac-whiteball-small-jump", 4)
+    images  = SpriteImages("ac_pearl_white_jump", 4)
     shadows = SpriteImages("sh-whiteball-small-jump", 4, 0.4)
     frames  = {}
     for i=1,4 do
@@ -168,7 +168,7 @@
 
     -- Jumping black pearl
     -- Use shadow from white pearl
-    images  = SpriteImages("ac-whiteball-small-jump", 4)
+    images  = SpriteImages("ac_pearl_black_jump", 4)
     frames  = {}
     for i=1,4 do
         DefShModel("sb-jump"..i, images[i], shadows[i])
@@ -177,35 +177,35 @@
     DefAnim("ac_pearl_black-jump", PingPong(BuildFrames(frames, 70)))
 
     -- Sinking white pearl
-    DefAlias ("ac_pearl_white-sink0", "ac_pearl_white_fall1")
-    DefAlias ("ac_pearl_white-sink1", "ac_pearl_white_fall2")
-    DefAlias ("ac_pearl_white-sink2", "ac_pearl_white_fall3")
-    DefAlias ("ac_pearl_white-sink3", "ac_pearl_white_fall3")
-    DefAlias ("ac_pearl_white-sink4", "ac_pearl_white_fall4")
-    DefAlias ("ac_pearl_white-sink5", "ac_pearl_white_fall4")
-    DefAlias ("ac_pearl_white-sink6", "ac_pearl_white_fall5")
-    DefAlias ("ac_pearl_white-sunk", "invisible")
+    DefAlias("ac_pearl_white-sink0", "ac_pearl_white_fall1")
+    DefAlias("ac_pearl_white-sink1", "ac_pearl_white_fall2")
+    DefAlias("ac_pearl_white-sink2", "ac_pearl_white_fall3")
+    DefAlias("ac_pearl_white-sink3", "ac_pearl_white_fall3")
+    DefAlias("ac_pearl_white-sink4", "ac_pearl_white_fall4")
+    DefAlias("ac_pearl_white-sink5", "ac_pearl_white_fall4")
+    DefAlias("ac_pearl_white-sink6", "ac_pearl_white_fall5")
+    DefAlias("ac_pearl_white-sunk", "invisible")
 
     -- Sinking black pearl
-    DefAlias ("ac_pearl_black-sink0", "ac_pearl_black-fall1")
-    DefAlias ("ac_pearl_black-sink1", "ac_pearl_black-fall2")
-    DefAlias ("ac_pearl_black-sink2", "ac_pearl_black-fall3")
-    DefAlias ("ac_pearl_black-sink3", "ac_pearl_black-fall3")
-    DefAlias ("ac_pearl_black-sink4", "ac_pearl_black-fall4")
-    DefAlias ("ac_pearl_black-sink5", "ac_pearl_black-fall4")
-    DefAlias ("ac_pearl_black-sink6", "ac_pearl_black-fall5")
-    DefAlias ("ac_pearl_black-sunk", "invisible")
+    DefAlias("ac_pearl_black-sink0", "ac_pearl_black_fall1")
+    DefAlias("ac_pearl_black-sink1", "ac_pearl_black_fall2")
+    DefAlias("ac_pearl_black-sink2", "ac_pearl_black_fall3")
+    DefAlias("ac_pearl_black-sink3", "ac_pearl_black_fall3")
+    DefAlias("ac_pearl_black-sink4", "ac_pearl_black_fall4")
+    DefAlias("ac_pearl_black-sink5", "ac_pearl_black_fall4")
+    DefAlias("ac_pearl_black-sink6", "ac_pearl_black_fall5")
+    DefAlias("ac_pearl_black-sunk", "invisible")
 
     -- Shattering white pearl
-    images = SpriteImages ("ac-whiteball-small-shatter", 5)
+    images = SpriteImages("ac-whiteball-small-shatter", 5)
     DefAnim("ac_pearl_white-shatter", BuildFrames(images, 60))
-    SpriteImage ("ac-whiteball-small-shattered")
+    SpriteImage("ac-whiteball-small-shattered")
     DefAlias("ac_pearl_white-shattered", "ac-whiteball-small-shattered")
 
     -- Shattering black pearl
-    images = SpriteImages ("ac-whiteball-small-shatter", 5)
+    images = SpriteImages("ac-whiteball-small-shatter", 5)
     DefAnim("ac_pearl_black-shatter", BuildFrames(images, 60))
-    SpriteImage ("ac-whiteball-small-shattered")
+    SpriteImage("ac-whiteball-small-shattered")
     DefAlias("ac_pearl_black-shattered", "ac-whiteball-small-shattered")
 end
 



From raoul at mail.berlios.de  Mon Nov  9 23:14:57 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 9 Nov 2009 23:14:57 +0100
Subject: [Enigma-game-svn] r1852 - in trunk: attic/images-actors data
	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911092214.nA9MEvxK016601@sheep.berlios.de>

Author: raoul
Date: 2009-11-09 23:14:56 +0100 (Mon, 09 Nov 2009)
New Revision: 1852

Added:
   trunk/attic/images-actors/sh_pearl_jump-gfx16.xcf
   trunk/attic/images-actors/sh_pearl_jump-gfx32.xcf
   trunk/attic/images-actors/sh_pearl_jump-gfx40.xcf
   trunk/attic/images-actors/sh_pearl_jump-gfx48.xcf
   trunk/attic/images-actors/sh_pearl_jump-gfx64.xcf
   trunk/data/gfx16/sh_pearl.png
   trunk/data/gfx16/sh_pearl_jump.png
   trunk/data/gfx32/sh_pearl.png
   trunk/data/gfx32/sh_pearl_jump.png
   trunk/data/gfx40/sh_pearl.png
   trunk/data/gfx40/sh_pearl_jump.png
   trunk/data/gfx48/sh_pearl.png
   trunk/data/gfx48/sh_pearl_jump.png
   trunk/data/gfx64/sh_pearl.png
   trunk/data/gfx64/sh_pearl_jump.png
Removed:
   trunk/data/gfx32/sh-whiteball-small-jump.png
   trunk/data/gfx32/sh-whiteball-small.png
   trunk/data/gfx40/sh-whiteball-small-jump.png
   trunk/data/gfx40/sh-whiteball-small.png
   trunk/data/gfx48/sh-whiteball-small-jump.png
   trunk/data/gfx48/sh-whiteball-small.png
Modified:
   trunk/data/models-2d.lua
Log:
-> Shadow models for pearls and jumping pearls for all resolutions
-> Entries for floor scales in models-2d



Added: trunk/attic/images-actors/sh_pearl_jump-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl_jump-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl_jump-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl_jump-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl_jump-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl_jump-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl_jump-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl_jump-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl_jump-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl_jump-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/sh_pearl.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_pearl.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/sh_pearl_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_pearl_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx32/sh-whiteball-small-jump.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/sh-whiteball-small.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/sh_pearl.png (from rev 1851, trunk/data/gfx32/sh-whiteball-small.png)
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/sh_pearl_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/sh_pearl_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/sh-whiteball-small-jump.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/sh-whiteball-small.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/sh_pearl.png (from rev 1851, trunk/data/gfx40/sh-whiteball-small.png)
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/sh_pearl_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/sh_pearl_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/sh-whiteball-small-jump.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/sh-whiteball-small.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/sh_pearl.png (from rev 1851, trunk/data/gfx48/sh-whiteball-small.png)
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/sh_pearl_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/sh_pearl_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/sh_pearl.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_pearl.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/sh_pearl_jump.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_pearl_jump.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-09 14:57:11 UTC (rev 1851)
+++ trunk/data/models-2d.lua	2009-11-09 22:14:56 UTC (rev 1852)
@@ -123,15 +123,15 @@
     local images, frames, shadows
 
     -- Normal white pearl
-    SpriteImage("sh-whiteball-small", 0.4, 0.41)
+    SpriteImage("sh_pearl", 0.4, 0.41)
     SpriteImage("ac_pearl_white", 0.5, 0.43)
-    DefShModel("ac_pearl_white", "ac_pearl_white", "sh-whiteball-small")
+    DefShModel("ac_pearl_white", "ac_pearl_white", "sh_pearl")
     DefAlias("ac_pearl_white-shine", "ac_pearl_white")
 
     -- Normal black pearl
     -- Use shadow from black pearl
     SpriteImage("ac_pearl_black", 0.5, 0.43)
-    DefShModel("ac_pearl_black", "ac_pearl_black", "sh-whiteball-small")
+    DefShModel("ac_pearl_black", "ac_pearl_black", "sh_pearl")
     DefAlias("ac_pearl_black-shine", "ac_pearl_black")
 
     -- Falling white pearl
@@ -158,7 +158,7 @@
 
     -- Jumping white pearl
     images  = SpriteImages("ac_pearl_white_jump", 4)
-    shadows = SpriteImages("sh-whiteball-small-jump", 4, 0.4)
+    shadows = SpriteImages("sh_pearl_jump", 4, 0.4)
     frames  = {}
     for i=1,4 do
         DefShModel("sb-jump"..i, images[i], shadows[i])
@@ -222,7 +222,7 @@
 -- ac-bug --
 do
     SpriteImage("ac_bug",0.5,0.44)
-    DefShModel("ac_bug", "ac_bug", "sh-whiteball-small")
+    DefShModel("ac_bug", "ac_bug", "sh_pearl")
 end
 
 -- ac-cannonball --
@@ -486,15 +486,19 @@
 
 
 -- scales
+do
+    local scales = DefSubimages("fl_scales", {h=2})
 
-do
-    DefAlias("fl_scales_platinum_released", "fl_platinum_framed")
-    DefAlias("fl_scales_platinum_pressed", "fl_platinum")
-    DefAlias("fl_scales_gray_released", "fl_gray_framed")
-    DefAlias("fl_scales_gray_pressed", "fl_gray")
-    DefAlias("fl_scales_brick_released", "fl_brick_framed")
-    DefAlias("fl_scales_brick_pressed", "fl_brick")
+    display.DefineComposite("fl_scales_platinum_released", "fl_platinum", scales[1])
+    display.DefineComposite("fl_scales_platinum_pressed", "fl_platinum", scales[2])
+
+    display.DefineComposite("fl_scales_gray_released", "fl_gray", scales[1])
+    display.DefineComposite("fl_scales_gray_pressed", "fl_gray", scales[2])
+
+    display.DefineComposite("fl_scales_brick_released", "fl_brick", scales[1])
+    display.DefineComposite("fl_scales_brick_pressed", "fl_brick", scales[2])
 end
+
 ------------------------
 -- Heating animations --
 ------------------------



From raoul at mail.berlios.de  Tue Nov 10 21:36:28 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Tue, 10 Nov 2009 21:36:28 +0100
Subject: [Enigma-game-svn] r1853 - trunk/attic/images-actors
Message-ID: <200911102036.nAAKaSSx015714@sheep.berlios.de>

Author: raoul
Date: 2009-11-10 21:36:27 +0100 (Tue, 10 Nov 2009)
New Revision: 1853

Added:
   trunk/attic/images-actors/sh_pearl-gfx16.xcf
   trunk/attic/images-actors/sh_pearl-gfx32.xcf
   trunk/attic/images-actors/sh_pearl-gfx40.xcf
   trunk/attic/images-actors/sh_pearl-gfx48.xcf
   trunk/attic/images-actors/sh_pearl-gfx64.xcf
Modified:
   trunk/attic/images-actors/ac_pearl_sizes.txt
Log:
-> Some missing gfx templates
-> Shadow sizes for pearls added to table



Modified: trunk/attic/images-actors/ac_pearl_sizes.txt
===================================================================
--- trunk/attic/images-actors/ac_pearl_sizes.txt	2009-11-09 22:14:56 UTC (rev 1852)
+++ trunk/attic/images-actors/ac_pearl_sizes.txt	2009-11-10 20:36:27 UTC (rev 1853)
@@ -3,41 +3,54 @@
 	
 Physical radius of pearls is 13/64 tiles.
 
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-|                                                  | gfx16     | gfx32      | gfx40     | gfx48     | gfx64     |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Sprite image size [px]                           | 20        | 40         | 50        | 60        | 80        |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Physical pearl size (diameter) [px]              | 6.5       | 13.0       | 16.25     | 19.5      | 26.0      |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Data for steady models                           |           |            |           |           |           |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Pearl size in steady models [px] and [% of tile] | 8  40.0%  | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Data for fall models                             |           |            |           |           |           |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Model image size [px]                            | 20 x 100  | 40 x 200   | 50 x 250  | 60 x 300  | 80 x 400  |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Pearl size in fall models [px] and [% of tile]   |           |            |           |           |           |
-| frame 1                                          | 8  50.0%  | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
-| frame 2                                          | 6  37.5%  | 10  31.25% | 14  35.0% | 16  33.3% | 22  34.3% |
-| frame 3                                          | 4  25.0%  | 8   25.0%  | 12  30.0% | 14  29.1% | 18  28.1% |
-| frame 4                                          | 2  12.5%  | 6   18.75% | 10  25.0% | 10  20.8% | 14  21.8% |
-| frame 5                                          | 0  0.0%   | 4   12.5%  | 8   20.0% | 8   16.6% | 10  15.6% |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Data for jump models                             |           |            |           |           |           |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Model image size [px]                            | 20 x 100  | 40 x 200   | 50 x 250  | 60 x 300  | 80 x 400  |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
-| Pearl size if jump models [px] and [% of tile]   |           |            |           |           |           |
-| frame 1                                          | 8   50.0% | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
-| frame 2                                          | 10  62.5% | 14  43.7%  | 18  45.0% | 20  41.6% | 30  46.8% |
-| frame 3                                          | 12  75.0% | 16  50.0%  | 20  50.0% | 22  45.8% | 34  53.1% |
-| frame 4                                          | 14  87.5% | 18  56.2%  | 22  55.0% | 24  50.0% | 38  59.3% |
-| frame 5                                          | 16  100%  | 20  62.5%  | 24  60.0% | 26  54.1% | 42  65.6% |
-|--------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|                                                   | gfx16     | gfx32      | gfx40     | gfx48     | gfx64     |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Sprite image size [px]                            | 20        | 40         | 50        | 60        | 80        |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Physical pearl size (diameter) [px]               | 6.5       | 13.0       | 16.25     | 19.5      | 26.0      |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for steady models                            |           |            |           |           |           |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Pearl size in steady models [px] and [% of tile]  | 8  40.0%  | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for fall models                              |           |            |           |           |           |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Model image size [px]                             | 20 x 100  | 40 x 200   | 50 x 250  | 60 x 300  | 80 x 400  |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Pearl size in fall models [px] and [% of tile]    |           |            |           |           |           |
+| frame 1                                           | 8  50.0%  | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+| frame 2                                           | 6  37.5%  | 10  31.25% | 14  35.0% | 16  33.3% | 22  34.3% |
+| frame 3                                           | 4  25.0%  | 8   25.0%  | 12  30.0% | 14  29.1% | 18  28.1% |
+| frame 4                                           | 2  12.5%  | 6   18.75% | 10  25.0% | 10  20.8% | 14  21.8% |
+| frame 5                                           | 0  0.0%   | 4   12.5%  | 8   20.0% | 8   16.6% | 10  15.6% |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for jump models                              |           |            |           |           |           |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Model image size [px]                             | 20 x 100  | 40 x 200   | 50 x 250  | 60 x 300  | 80 x 400  |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Pearl size in jump models [px] and [% of tile]    |           |            |           |           |           |
+| frame 1                                           | 8   50.0% | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+| frame 2                                           | 10  62.5% | 14  43.7%  | 18  45.0% | 20  41.6% | 30  46.8% |
+| frame 3                                           | 12  75.0% | 16  50.0%  | 20  50.0% | 22  45.8% | 34  53.1% |
+| frame 4                                           | 14  87.5% | 18  56.2%  | 22  55.0% | 24  50.0% | 38  59.3% |
+| frame 5                                           | 16  100%  | 20  62.5%  | 24  60.0% | 26  54.1% | 42  65.6% |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for steady shadow models                     |           |            |           |           |           |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Shadow size in steady models [px] and [% of tile] | 8   50.0% | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Data for jump models                              |           |            |           |           |           |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
+| Shadow size in jump models [px] and [% of tile]   |           |            |           |           |           |
+| frame 1                                           | 8   50.0% | 12  37.5%  | 16  40.0% | 18  37.5% | 26  40.6% |
+| frame 2                                           | 10  62.5% | 14  43.7%  | 18  45.0% | 20  41.6% | 30  46.8% |
+| frame 3                                           | 12  75.0% | 16  50.0%  | 20  50.0% | 22  45.8% | 34  53.1% |
+| frame 4                                           | 14  87.5% | 18  56.2%  | 22  55.0% | 24  50.0% | 38  59.3% |
+| frame 5                                           | 16  100%  | 20  62.5%  | 24  60.0% | 26  54.1% | 42  65.6% |
+|---------------------------------------------------+-----------+------------+-----------+-----------+-----------|
 
 // EOF

Added: trunk/attic/images-actors/sh_pearl-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_pearl-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_pearl-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf



From ral at mail.berlios.de  Wed Nov 11 00:18:08 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 11 Nov 2009 00:18:08 +0100
Subject: [Enigma-game-svn] r1854 - in trunk: data data/schemas src src/floors
Message-ID: <200911102318.nAANI897027490@sheep.berlios.de>

Author: ral
Date: 2009-11-11 00:18:08 +0100 (Wed, 11 Nov 2009)
New Revision: 1854

Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/actors.cc
   trunk/src/floors/ScalesFloor.cc
Log:
Trunk 1.1:
- fl_scales 
  - 6 flavors: "brick", "bridgewood", "concrete", "darkgray", "gray", "platinum"
  - just "bridgewood" is burnable, but does not dissolve to abyss
- actors: add read only attribute "mass" - basic actor mass without items


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-10 20:36:27 UTC (rev 1853)
+++ trunk/data/models-2d.lua	2009-11-10 23:18:08 UTC (rev 1854)
@@ -489,14 +489,24 @@
 do
     local scales = DefSubimages("fl_scales", {h=2})
 
-    display.DefineComposite("fl_scales_platinum_released", "fl_platinum", scales[1])
-    display.DefineComposite("fl_scales_platinum_pressed", "fl_platinum", scales[2])
+    display.DefineComposite("fl_scales_brick_released", "fl_brick", scales[1])
+    display.DefineComposite("fl_scales_brick_pressed", "fl_brick", scales[2])
 
+    display.DefineComposite("fl_scales_bridgewood_released", "fl_bridge_bw_closed", scales[1])
+    display.DefineComposite("fl_scales_bridgewood_pressed", "fl_bridge_bw_closed", scales[2])
+
+    display.DefineComposite("fl_scales_concrete_released", "fl_concrete", scales[1])
+    display.DefineComposite("fl_scales_concrete_pressed", "fl_concrete", scales[2])
+
+    display.DefineComposite("fl_scales_darkgray_released", "fl_darkgray", scales[1])
+    display.DefineComposite("fl_scales_darkgray_pressed", "fl_darkgray", scales[2])
+
     display.DefineComposite("fl_scales_gray_released", "fl_gray", scales[1])
     display.DefineComposite("fl_scales_gray_pressed", "fl_gray", scales[2])
 
-    display.DefineComposite("fl_scales_brick_released", "fl_brick", scales[1])
-    display.DefineComposite("fl_scales_brick_pressed", "fl_brick", scales[2])
+    display.DefineComposite("fl_scales_platinum_released", "fl_platinum", scales[1])
+    display.DefineComposite("fl_scales_platinum_pressed", "fl_platinum", scales[2])
+
 end
 
 ------------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-11-10 20:36:27 UTC (rev 1853)
+++ trunk/data/schemas/objects.xml	2009-11-10 23:18:08 UTC (rev 1854)
@@ -199,6 +199,7 @@
       <attr name="essential"/>
       <attr name="essential_id"/>
       <attr name="charge"/>
+      <attr name="mass" rw="r"/>
       <attr name="velocity_x"/>
       <attr name="velocity_y"/>
       <msg name="_freeze"/>
@@ -676,6 +677,15 @@
     <object name="fl_scales_brick">
       <attr name="flavor" value="brick"/>
     </object>
+    <object name="fl_scales_bridgewood">
+      <attr name="flavor" value="bridgewood"/>
+    </object>
+    <object name="fl_scales_concrete">
+      <attr name="flavor" value="concrete"/>
+    </object>
+    <object name="fl_scales_darkgray">
+      <attr name="flavor" value="darkgray"/>
+    </object>
     <object name="fl_scales_gray">
       <attr name="flavor" value="gray"/>
     </object>

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2009-11-10 20:36:27 UTC (rev 1853)
+++ trunk/src/actors.cc	2009-11-10 23:18:08 UTC (rev 1854)
@@ -120,6 +120,8 @@
             return adhesion;
         } else if (key == "charge") {
             return m_actorinfo.charge;
+        } else if (key == "mass") {
+            return m_actorinfo.mass;
         } else
             return StateObject::getAttr(key);
     }

Modified: trunk/src/floors/ScalesFloor.cc
===================================================================
--- trunk/src/floors/ScalesFloor.cc	2009-11-10 20:36:27 UTC (rev 1853)
+++ trunk/src/floors/ScalesFloor.cc	2009-11-10 23:18:08 UTC (rev 1854)
@@ -29,7 +29,7 @@
     ScalesFloor::ScalesFloor(std::string flavor) : Floor("fl_scales")  {
         Floor::setAttr("flavor", flavor);
         Floor::setAttr("$mass", 0.0);
-//        Floor::setAttr("burnable", flavor != "gc");
+        Floor::setAttr("burnable", flavor == "bridgewood");
         state = OFF;
     }
     
@@ -40,9 +40,9 @@
     void ScalesFloor::setAttr(const string& key, const Value &val) {
         if (key == "flavor") {
             std::string flavor = val.to_string();
-            ASSERT(flavor == "brick" || flavor == "gray" || flavor == "platinum", XLevelRuntime, "ScalesFloor illegal flavor value");
+            ASSERT(flavor == "brick" || flavor == "bridgewood" || flavor == "concrete" || flavor == "darkgray" || flavor == "gray" || flavor == "platinum", XLevelRuntime, "ScalesFloor illegal flavor value");
             Floor::setAttr("flavor", val);
-//            Floor::setAttr("burnable", flavor != "gc");
+            Floor::setAttr("burnable", flavor == "bridgewood");
             if (isDisplayable()) {
                 init_model();    // need to redisplay after attribute set
             }
@@ -138,7 +138,7 @@
             state = ON;
         }
 
-Log << "Scales update old state " << oldState << " - new state " << state << " refuse action " << refuseAction << "\n";
+//Log << "Scales update old state " << oldState << " - new state " << state << " refuse action " << refuseAction << "\n";
     
         if (oldState != state) {
             init_model();
@@ -155,10 +155,13 @@
     }
 
     BOOT_REGISTER_START
-        BootRegister(new ScalesFloor("platinum"), "fl_scales");
-        BootRegister(new ScalesFloor("platinum"), "fl_scales_platinum");
+        BootRegister(new ScalesFloor("darkgray"), "fl_scales");
         BootRegister(new ScalesFloor("brick"), "fl_scales_brick");
+        BootRegister(new ScalesFloor("bridgewood"), "fl_scales_bridgewood");
+        BootRegister(new ScalesFloor("concrete"), "fl_scales_concrete");
+        BootRegister(new ScalesFloor("darkgray"), "fl_scales_darkgray");
         BootRegister(new ScalesFloor("gray"), "fl_scales_gray");
+        BootRegister(new ScalesFloor("platinum"), "fl_scales_platinum");
     BOOT_REGISTER_END
 
 } // namespace enigma



From ral at mail.berlios.de  Thu Nov 12 00:26:12 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 12 Nov 2009 00:26:12 +0100
Subject: [Enigma-game-svn] r1855 - in trunk: doc doc/reference
	doc/reference/images etc src
Message-ID: <200911112326.nABNQC85019807@sheep.berlios.de>

Author: ral
Date: 2009-11-12 00:25:58 +0100 (Thu, 12 Nov 2009)
New Revision: 1855

Modified:
   trunk/doc/README.mingw32
   trunk/doc/REQUIREMENTS
   trunk/doc/reference/enigma-ref.texi
   trunk/doc/reference/images/Makefile.am
   trunk/etc/mingw32-dist.sh.in
   trunk/src/main.cc
   trunk/src/video.cc
Log:
Trunk 1.1:
- updates on SDL 1.2.14
- fix Windows gamma problems due to min gamma value
- refman updates:
  - 1.4. Inventory Console
  - 4.4.8 Ending Conditions
  - fl_scales, ac_killer, ac_pearl


Modified: trunk/doc/README.mingw32
===================================================================
--- trunk/doc/README.mingw32	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/doc/README.mingw32	2009-11-11 23:25:58 UTC (rev 1855)
@@ -103,15 +103,14 @@
 
 Install upx anywhere in PATH
 
-SDL-devel-1.2.11-mingw32.tar.gz ls -l
+SDL-devel-1.2.14-mingw32.tar.gz
   extract to a workdir
-  cp -rv bin lib share /mingw/
-  cp -rv include /mingw/include/SDL
+  cp -rv bin lib share include /mingw/
   sed 's|^prefix=.*|prefix=/minw/|' <bin/sdl-config > /mingw/bin/i386-mingw32msvc-sdl-config
-  cp /mingw/share/aclocal/sdl.m4 /msys/1.0/share/aclocal/
+  cp /mingw/share/aclocal/sdl.m4 /share/aclocal/
   cp bin/*.dll to enigma/etc
 
-SDL_ttf-devel-2.0.9-VC8.zip, SDL_mixer-devel-1.2.8-VC8.zip, SDL_image-devel-1.2.6-VC8.zip
+SDL_ttf-devel-2.0.9-VC8.zip, SDL_mixer-devel-1.2.9-VC.zip, SDL_image-devel-1.2.8-VC.zip
   extract
   cp includes to /mingw/include/SDL
   cp lib/*.lib to /mingw/lib

Modified: trunk/doc/REQUIREMENTS
===================================================================
--- trunk/doc/REQUIREMENTS	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/doc/REQUIREMENTS	2009-11-11 23:25:58 UTC (rev 1855)
@@ -15,19 +15,19 @@
 
 Libraries:
 ----------
-SDL-devel       1.2.11 -  1.2.9		   (no 1.2.10 on Mac, no 1.2.12 on Win!) 
+SDL-devel       1.2.14 - 1.2.9	(no 1.2.10 on Mac, no 1.2.12,1.2.13 on Win!) 
                 http://www.libsdl.org/download-1.2.php
-                SDL-devel-1.2.11-mingw32.tar.gz (Mingw32)
+                SDL-devel-1.2.14-mingw32.tar.gz (Mingw32)
                 
 SDL_ttf-devel   2.0.9 -  2.0.7
                 http://www.libsdl.org/projects/SDL_ttf/
                 SDL_ttf-devel-2.0.7-VC8.zip (W)
                 
-SDL_mixer-devel 1.2.8 - 1.2.7
+SDL_mixer-devel 1.2.9 - 1.2.7
                 http://www.libsdl.org/projects/SDL_mixer/
                 SDL_mixer-devel-1.2.8-VC8.zip (W)
                 
-SDL_image-devel 1.2.6
+SDL_image-devel 1.2.8
                 http://www.libsdl.org/projects/SDL_image/
                 SDL_image-devel-1.2.6-VC8.zip (W)
 
@@ -86,7 +86,7 @@
 AT&T            http://www.graphviz.org/About.php
                 (for source documentation)
 
-upx             3.00 -  1.2.5
+upx             3.04 -  1.2.5
                 http://upx.sourceforge.net/
 
 ccache          2.4 (L)

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/doc/reference/enigma-ref.texi	2009-11-11 23:25:58 UTC (rev 1855)
@@ -70,6 +70,7 @@
 * Locating Resources::
 * Startup Switches::
 * User Options::
+* Inventory Console::          Command and document text history
 * Level Info::
 * Handicap and PAR::           Background to score evaluation and HCP
 * User Sound Sets::            How to create and install sound themes
@@ -296,6 +297,94 @@
 
 @end table
 
+
+ at node Inventory Console
+ at section Inventory Console
+
+The lower right window area that usually shows the inventory items and scrolls
+the texts of activated document items allows the user to reread previous 
+document texts, to enter textual commands and to reissue previous commands.
+
+You can issue a command by usage of the keyboard. Just enter the command string
+and activate the command by a finishing @key{return} stroke. The following
+commands are supported:
+
+ at table @asis
+ at item @b{help}
+List all public available commands.
+ at item @b{abort}
+Abort level and return to level selection menu. Same as @key{Alt X}
+ at item @b{April 1st}
+Just a joke.
+ at item @b{cheats}
+List level developer cheat commands for fast testing.
+ at item @b{collision}
+Developer cheat that disables collisions between stones and marbles or pearls.
+Once used no score will be recorded if the level is successfully finished.
+ at item @b{easy}
+Restart level in easy difficulty mode.
+ at item @b{find} search_string
+Searches levels in all levelpacks that contain matching string in either
+the level's title, author's name or the file name.
+ at item @b{god}
+Developer cheat that protects the actors assigned to the current player like
+the activation of an @ref{it_umbrella} does. Once used no score will be 
+recorded if the level is successfully finished.
+ at item @b{hunt}
+Switch to world record hunting mode. Same as toggling the left most button
+in the level selection menu to the world icon.
+ at item @b{info}
+Show info about level like the levelpack, position within levelpack, the file
+location, the title, author, version and the level internal id.
+ at item @b{jumpto} levelpack,position
+Directly start the given level. The levelpack is identified by its title. The
+position is the number within the levelpack. E.g. @code{jumpto Enigma IV,33}.
+ at item @b{nohunt}
+Switch off the world record hunting mode. Same as toggling the left most button
+in the level selection menu to the marble icon.
+ at item @b{regular}
+Restart level in regular difficulty mode
+ at item @b{restart}
+Restart level in currently selected difficulty mode.
+ at item @b{suicide}
+Kill actors, but continue level if possible. Same as @key{F3}.
+ at end table
+
+Both, the commands and the displayed document text have a history. You recall
+the history by usage of the up and down arrows. 
+
+ at itemize @bullet
+ at item @b{inventory} --> jump to start
+ at item @b{command #10}, oldest command in history
+ at item @b{command #9}
+ at item @dots{}
+ at item @b{command #2}
+ at item @b{command #1}, last executed command
+ at item @b{command under edition}, just if the last edited command has not been executed
+ at item @b{inventory} <-- start
+ at item @b{document #1}, last viewed document
+ at item @b{document #2}, previous viewed document
+ at item @dots{}
+ at item @b{document #n}, first viewed document
+ at item @b{level title, subtitle, author}, as shown on level start
+ at item @b{inventory} --> jump to start
+ at end itemize
+
+Starting with the inventory item display the up arrow shows the previously
+submitted commands. Just by another @key{return} you can reissue a command.
+The history will be resorted with the last command at the position direktly 
+above the inventory. You can edit history commands anytime like you can insert 
+a new command. If you do not finish a command by a @key{return} the string will
+still be recorded and presented as the first command above the inventory. The
+command history is persistent.
+
+The document history can be recalled by usage of the down arrow. All level 
+documents previously displayed can be redisplayed. Additionally the initial
+level info displayed on the level start can be read again.
+
+Both histories revolve to the item inventory when the up or down keys are
+used beyond the oldest command or message.
+
 @node Level Info
 @section Level Info
 
@@ -3587,7 +3676,7 @@
 * Named Positions::               Positions as successors of killed Floors
 * Callbacks and Load Balancing::
 * Level Restart::
-* Ending Conditions::
+* Ending Conditions::             Meditation vs. Oxydpairs
 @end menu
 
 @c ----------------- Library Preloading --------------------
@@ -3770,7 +3859,70 @@
 @node Ending Conditions
 @subsection Ending Conditions
 
+Two essential questions remain to be answered. When and under which conditions
+is a level successfully finished. How do I declare a level as being a
+meditation level in opposite to a standard oxyd pair opening level.
 
+In fact there is no 'meditation' flag, neither within the XML Level 
+ at ref{Info metadata} nor as one of the @ref{Global Attributes}. That means there
+is no formal distinction between both level 'types'. But there are two different
+types of ending conditions. Both are checked permanently and whichever
+is fulfilled first wins. Thus Enigma allows you to write true hybrid levels
+that provide @ref{st_oxyd} as well as @ref{it_meditation} allowing the user
+to solve the level by two totally different means.
+
+The main way to end the game is to fulfill the oxyd pair opening condition:
+
+The game is over when the user succeeds in opening all regular colored 
+ at ref{st_oxyd}s by pairs.
+
+This implies that there is at least one pair of regular colored oxyd stones
+and that all oxyd colors appear in even number of instances. Whereas you will
+always add at least one pair of oxyds for a standard level, you may simply loose
+track of the number of instances. Therefore the engine will permanently check at
+runtime that every oxyd color appears in an even number of instances. Any 
+violation causes an error. In case you will add or delete oxyd stones you
+need to disable this checking by setting the global attribute 
+ at ref{AllowSingleOxyds} to @code{true}. Now it is your reponsibility as an
+author to ensure that the level remains solvable by adding or removing pairs
+only. 
+
+The second way to end the game is to fulfill the meditation condition:
+
+All @ref{ac_pearl}s must reside for at least one second within the uneven area
+of an @ref{it_meditation}, all @ref{it_meditation} marked as @code{essential}
+must be occupied and the number of @ref{ac_pearl}s must be equal to the number
+of occupied @ref{it_meditation}s.
+
+This implies again that there exists at least one @ref{ac_pearl} and that
+no two pearls can reside within the same @ref{it_meditation}. There must be at
+least the same number of @ref{it_meditation} as of @ref{ac_pearl}, but there may
+be more @ref{it_meditation}s as long as they are not marked as being essential.
+A surplus of @ref{it_meditation} can easily occur due to explosions of
+ at ref{it_dynamite}.
+
+A level that should be solved by fulfillment of the meditation condition can
+contain @ref{st_oxyd} and by setting @ref{AllowSingleOxyds} to @code{true} you
+can add odd numbers of oxyd stones of a color. On the other hand you can add
+ at ref{ac_pearl} to a level that should be solved by fulfillment of the oxyd pair
+condition. But you must carefully check that the user can not rest the pearls in
+given @ref{it_meditation} or can create @ref{it_meditation} by @ref{it_dynamite}.
+Marking more @ref{it_meditation} as @code{essential} than existing 
+ at ref{ac_pearl}s can avoid shortcuts.
+
+A level that is set up to allow the user to fulfill both conditions is called
+a hybrid level. Of course it is a difficult task to provide equivalent solutions
+for both approaches.
+
+Independent of the condition type all actors marked as @code{essential} need to
+be alive at the moment the condition is fulfilled. Mainly in existing legacy 
+levels but may in some very carefully designed future levels the author may
+allow the user to sacrify an actor to fulfill the condition by setting the 
+global attribute @ref{SurviveFinish} to @code{false}. In this case a mable
+may shatter while the condition is fulfilled. Of course the essential actor
+may not shatter in advance, because as soon as the shattering is over the
+essential actor will cause a level restart, if it can not be resurrected.
+
 @c ===================  Lua API  =======================
 @node Lua API
 @chapter Lua API
@@ -9753,6 +9905,12 @@
 @tab @image{images/fl_sahara, 12mm} @tab @yref{fl_sahara}
 @item @image{images/fl_samba, 12mm} @tab @yref{fl_samba}
 @tab @image{images/fl_sand, 12mm} @tab @yref{fl_sand}
+ at tab @image{images/fl_scales_brick, 12mm} @tab @yref{fl_scales}_brick
+ at item @image{images/fl_scales_bridge_bw_closed, 12mm} @tab @yref{fl_scales}_bridgewood
+ at tab @image{images/fl_scales_concrete, 12mm} @tab @yref{fl_scales}_concrete
+ at tab @image{images/fl_scales_darkgray, 12mm} @tab @yref{fl_scales}_darkgray
+ at item @image{images/fl_scales_gray, 12mm} @tab @yref{fl_scales}_gray
+ at tab @image{images/fl_scales_platinum, 12mm} @tab @yref{fl_scales}_platinum
 @tab @image{images/fl_slope_f, 12mm} @tab @yref{fl_slope}
 @item @image{images/fl_slope, 12mm} @tab @yref{fl_slope}_ps
 @tab @image{images/fl_slope_c, 12mm} @tab @yref{fl_slope}_ise
@@ -10922,6 +11080,7 @@
 * fl_ice::            Slippery frozen water
 * fl_inverse::        Accelerate into the inverse direction
 * fl_rock::           Floodable Rock Floor
+* fl_scales::         Weight dependent Trigger
 * fl_slope::          Slopes in various shapes
 * fl_swamp::          Sticky sinkable Floor
 * fl_thief::          Hidden Thief
@@ -11195,6 +11354,76 @@
 @end table
 @end table
 
+ at c ----------------- Scales Floor --------------------
+ at node fl_scales
+ at subsection fl_scales
+ at obindex fl_scales
+
+The scales floor is a trigger that reacts on the mass load of actors and items
+atop or any stones that may press it. It performs actions when it is initially
+pressed and again when it releases. A pressed trigger is in state @samp{ON} and
+will send an action value of @samp{true}, a released trigger is in state 
+ at samp{OFF} and will send an action value of @samp{false}.
+
+Only actors moving on the floor can press scales. An actor jumping over a
+scale will not press it. An actor jumping on a scale will release and press
+it again. But anyway the mass of all actors and items atop will be measured and
+compared to the given @code{min} attribute. The default triggering mass is 1.8.
+This mass is given by two @ref{ac_marble} or three @ref{ac_pearl}. Any item
+like @ref{it_weight} or weights in an @ref{it_bag} that are either dropped on
+top of scales or carried by any actor in the players inventory is added to the
+actors basic mass.
+
+Just solid stones will press the scales when pushed onto it. Floating, hollow
+stones will generally not press the scales with the exception of the hollow,
+central puzzle stone (@pxref{st_puzzle}).
+
+There is no way to set the state of a trigger manually. But the state can
+nevertheless be read. At initialization a scales floor that is pressed by 
+objects will start in state @samp{ON} without sending actions due to the
+ at ref{Snapshot Principle}.
+
+Scales trigger with a click sound.
+
+Scales are given in several flavors. They are similar to the @ref{it_trigger}
+in respect to their features. Visually they look similar to frames, but are
+well distinguishable. It is deprecated to use invisible @ref{it_trigger} on
+a framed floor as a substitution for scales.
+
+Alternative items that react just on actors are @ref{it_sensor} and
+ at ref{it_cross}. 
+
+ at table @asis
+ at item @b{Attributes:}
+ at table @asis
+ at item @b{state}, @ @ @i{values}: @code{ON}, @code{OFF}; @ @ @i{default}: @code{OFF} @ @ @xref{state}
+The current switch state - @samp{ON} for pressed scales, @samp{OFF} for a
+released scales.
+ at item @b{flavor}, @ @ @i{values}: @code{"brick"}, @code{"bridgewood"}, @code{"concrete"}, @code{"darkgray"}, @code{"gray"}, @code{"platinum"}; @ @ @i{default}: @code{"darkgray"}
+The base floor type of the scales.
+ at item @b{adhesion}, @ @ @i{values}: number; @ @ @i{default}: 2.0 @ @ @xref{adhesion}
+ at item @b{friction}, @ @ @i{values}: number; @ @ @i{default}: 4.0 @ @ @xref{friction}
+ at item @b{burnable}, @ @ @i{values}: boolean; @ @ @i{default}: depends on @code{flavor} @ @ @xref{burnable}
+True if flavor is @code{"bridgewood"}, false otherwise.
+ at item @b{min} @ @ @i{values}: positive float number; @ @ @i{default}: @code{+1.8}
+Mass unit is the mass of an @ref{ac_marble}
+ at end table
+
+ at item @b{Messages:} none
+ at item @b{Action:} @ @ @xref{target}, @ @ @xref{action}
+
+ at item @b{Variants:}
+ at table @asis
+ at item @image{images/fl_scales_brick, 12mm} @b{fl_scales_brick}: flavor = @code{"brick"}
+ at item @image{images/fl_scales_bridge_bw_closed, 12mm} @b{fl_scales_bridgewood}: flavor = @code{"bridgewood"}
+ at item @image{images/fl_scales_concrete, 12mm} @b{fl_scales_concrete}: flavor = @code{"concrete"}
+ at item @image{images/fl_scales_darkgray, 12mm} @b{fl_scales_darkgray}: flavor = @code{"darkgray"}
+ at item @image{images/fl_scales_gray, 12mm} @b{fl_scales_gray}: flavor = @code{"gray"}
+ at item @image{images/fl_scales_platinum, 12mm} @b{fl_scales_platinum}: flavor = @code{"platinum"}
+ at end table
+
+ at end table
+
 @c ----------------- Slope Floor --------------------
 @node fl_slope
 @subsection fl_slope
@@ -11771,6 +12000,9 @@
 @item @b{freezable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}; @ @ @i{access}: @code{read only} @ @ @xref{freezable}
 @item @b{liftable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}; @ @ @i{access}: @code{read only} @ @ @xref{liftable}
 @item @b{portable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}; @ @ @i{access}: @code{read only} @ @ @xref{portable}
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.0}; @ @ @i{access}: @code{read only}
+Sum of masses of all contained items. Currently just the @ref{it_weight} has a
+mass.
 @end table
 
 @item @b{Messages:} none
@@ -14044,8 +14276,9 @@
 still produces its click-sounds and the user will notice that actors cannot drop
 items onto the same grid position.
 
-Alternative objects that react just on actors are @ref{it_sensor} and
- at ref{it_cross}.
+Alternative items that react just on actors are @ref{it_sensor} and
+ at ref{it_cross}. Another switch that reacts on the actors mass and stones are
+the @ref{fl_scales}.
 
 @table @asis
 @item @b{Attributes:}
@@ -19281,6 +19514,12 @@
 
 @table @asis
 @item @b{Attributes:} common actor attributes
+ at table @asis
+ at item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{0.0}; @ @ @xref{adhesion}
+ at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
+ at item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.7}; @ @ @i{access}: read only
+ at end table
 
 @item @b{Messages:} none
 
@@ -19325,6 +19564,7 @@
 A path given by a sequence of positions.
 @item @b{strength} @ @ @i{values}: float number; @ @ @i{default}: @code{+10.0}
 A scalar factor for the horse force that drive it to the next destination.
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{1.2}; @ @ @i{access}: read only
 @end table
 
 @item @b{Messages:} none
@@ -19359,11 +19599,12 @@
 @item @b{Attributes:}
 
 @table @asis
- at item @b{color} @ @ @i{values}: @code{WHITE}; @ @ @i{default}: @code{WHITE}; @ @ @i{access}: read only
+ at item @b{color} @ @ @i{values}: @code{BLACK}, @code{WHITE}; @ @ @i{default}: @code{WHITE}; @ @ @i{access}: read only
 The color of the killer.
 @item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{2.0}; @ @ @xref{adhesion}
- at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
+ at item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_YINYANG}; @ @ @xref{controllers}
 @item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.7}; @ @ @i{access}: read only
 @end table
 
 @item @b{Messages:} none
@@ -19372,6 +19613,8 @@
 
 @table @asis
 @item @image{images/ac_pearl_white, 14mm} @b{ac_killer}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{nil}
+ at item @image{images/ac_pearl_black, 14mm} @b{ac_killer_black}: color = @code{BLACK}, controllers = @code{CTRL_YINYANG}, owner = @code{nil}
+ at item @image{images/ac_pearl_white, 14mm} @b{ac_killer_white}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{nil}
 @end table
 
 @end table
@@ -19404,6 +19647,7 @@
 @item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
 @item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
 @end table
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{1.0}; @ @ @i{access}: read only
 
 @item @b{Messages:} none
 
@@ -19439,12 +19683,13 @@
 
 @table @asis
 @item @b{state}, @ @ @i{values}: @code{ALIVE}, @code{DEAD}; @ @ @i{default}: @code{ALIVE}; @ @ @xref{state}; @ @ @i{access}: read only
- at item @b{color} @ @ @i{values}: @code{WHITE}; @ @ @i{default}: @code{WHITE}; @ @ @i{access}: read only
+ at item @b{color} @ @ @i{values}: @code{BLACK}, @code{WHITE}; @ @ @i{default}: @code{WHITE}; @ @ @i{access}: read only
 The color of the pearl.
 @item @b{adhesion} @ @ @i{values}: number; @ @ @i{default}: @code{1.0}; @ @ @xref{adhesion}
 @item @b{controllers} @ @ @i{values}: @code{CTRL_NONE}, @code{CTRL_YIN}, @code{CTRL_YANG}, @code{CTRL_YINYANG}; @ @ @i{default}: @code{CTRL_NONE}; @ @ @xref{controllers}
 @item @b{owner} @ @ @i{values}: @code{YIN}, @code{YANG}, @code{nil}; @ @ @i{default}: @code{nil}; @ @ @xref{owner}
 @end table
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.7}; @ @ @i{access}: read only
 
 @item @b{Messages:} none
 
@@ -19452,6 +19697,7 @@
 
 @table @asis
 @item @image{images/ac_pearl_white, 14mm} @b{ac_pearl}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{YIN}
+ at item @image{images/ac_pearl_black, 14mm} @b{ac_pearl_black}: color = @code{BLACK}, controllers = @code{CTRL_YINYANG}, owner = @code{YIN}
 @item @image{images/ac_pearl_white, 14mm} @b{ac_pearl_white}: color = @code{WHITE}, controllers = @code{CTRL_YINYANG}, owner = @code{YIN}
 @end table
 
@@ -19508,6 +19754,7 @@
 Likelihood of attack strategy. You will usually use this attribute in
 combination with @samp{attacknearest} set to @samp{true}. The Level
 @samp{Toreador} is an example of the behavior of such rotors.
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.8}; @ @ @i{access}: read only
 @end table
 
 @item @b{Messages:} none
@@ -19565,6 +19812,7 @@
 Likelihood of attack strategy. You will usually use this attribute in
 combination with @samp{attacknearest} set to @samp{true}. The Level
 @samp{Toreador} is an example of the behavior of such rotors.
+ at item @b{mass} @ @ @i{values}: positive float number; @ @ @i{default}: @code{0.8}; @ @ @i{access}: read only
 @end table
 
 @item @b{Messages:} none
@@ -20125,7 +20373,7 @@
 
 @item @b{Syntax Samples:}
 @example
-a = @{1, 5=2, "Hello", other_table = @{x = 4, y = 5, z = "World"@}@}
+a = @{1, [5]=2, "Hello", other_table = @{x = 4, y = 5, z = "World"@}@}
 lib.lua.print_table(a, nil, -1)
 lib.lua.print_table(a, "--> ")
 @end example
@@ -24849,12 +25097,32 @@
 @need 200
 @item @b{st-bigbluesand-sw} @expansion{} @code{st_bluesand_sw}, @pxref{st_bluesand}
 @item @b{st-bigbluesand-w} @expansion{} @code{st_bluesand_w}, @pxref{st_bluesand}
+ at item @b{st-bigbrick-e} @expansion{} @code{st_brick_e}, @pxref{st_brick}
+ at item @b{st-bigbrick-es} @expansion{} @code{st_brick_es}, @pxref{st_brick}
+ at need 200
+ at item @b{st-bigbrick-esw} @expansion{} @code{st_brick_esw}, @pxref{st_brick}
+ at item @b{st-bigbrick-ew} @expansion{} @code{st_brick_ew}, @pxref{st_brick}
+ at item @b{st-bigbrick-n} @expansion{} @code{st_brick_n}, @pxref{st_brick}
+ at item @b{st-bigbrick-ne} @expansion{} @code{st_brick_ne}, @pxref{st_brick}
+ at need 200
+ at item @b{st-bigbrick-nes} @expansion{} @code{st_brick_nes}, @pxref{st_brick}
+ at item @b{st-bigbrick-nesw} @expansion{} @code{st_brick_nesw}, @pxref{st_brick}
+ at item @b{st-bigbrick-new} @expansion{} @code{st_brick_new}, @pxref{st_brick}
+ at item @b{st-bigbrick-ns} @expansion{} @code{st_brick_ns}, @pxref{st_brick}
+ at need 200
+ at item @b{st-bigbrick-nsw} @expansion{} @code{st_brick_nsw}, @pxref{st_brick}
+ at item @b{st-bigbrick-nw} @expansion{} @code{st_brick_nw}, @pxref{st_brick}
+ at item @b{st-bigbrick-s} @expansion{} @code{st_brick_s}, @pxref{st_brick}
+ at item @b{st-bigbrick-sw} @expansion{} @code{st_brick_sw}, @pxref{st_brick}
+ at need 200
+ at item @b{st-bigbrick-w} @expansion{} @code{st_brick_w}, @pxref{st_brick}
 @item @b{st-blackballs} @expansion{} @code{st_jamb_black}, @pxref{st_jamb}
 @item @b{st-black1} @expansion{} @code{st_passage_black_square}, @pxref{st_passage}
+ at item @b{st-black2} @expansion{} @code{st_passage_black_slash}, @pxref{st_passage}
 @need 200
- at item @b{st-black2} @expansion{} @code{st_passage_black_slash}, @pxref{st_passage}
 @item @b{st-black3} @expansion{} @code{st_passage_black_cross}, @pxref{st_passage}
 @item @b{st-black4} @expansion{} @code{st_passage_black_frame}, @pxref{st_passage}
+ at item @b{st-block} @expansion{} @ref{st_plop}
 @item @b{st-blocker} @expansion{} @ref{st_blocker}
 @need 200
 @item @b{st-blocker-growing} @expansion{} @code{st_blocker_new}, @pxref{st_blocker}
@@ -24868,36 +25136,16 @@
 @item @b{st-bolder-s} @expansion{} @code{st_boulder_s}, @pxref{st_boulder}
 @need 200
 @item @b{st-bolder-w} @expansion{} @code{st_boulder_w}, @pxref{st_boulder}
+ at item @b{st-bombs} @expansion{} @code{st_dispenser_bombblack}, @pxref{st_dispenser}
 @item @b{st-brake} @expansion{} @ref{st_brake}
 @item @b{st-break_acblack} @expansion{} @code{st_break_black}, @pxref{st_break}
+ at need 200
 @item @b{st-break_acwhite} @expansion{} @code{st_break_white}, @pxref{st_break}
- at need 200
 @item @b{st-break_bolder} @expansion{} @code{st_break_boulder}, @pxref{st_break}
 @item @b{st-break_gray} @expansion{} @code{st_break_plain}, @pxref{st_break}
+ at item @b{st-break_invisible} @expansion{} @code{st_ghost_break}, @pxref{st_ghost}
+ at need 200
 @item @b{st-brick} @expansion{} @ref{st_brick}
- at item @b{st-bigbrick-e} @expansion{} @code{st_brick_e}, @pxref{st_brick}
- at need 200
- at item @b{st-bigbrick-es} @expansion{} @code{st_brick_es}, @pxref{st_brick}
- at item @b{st-bigbrick-esw} @expansion{} @code{st_brick_esw}, @pxref{st_brick}
- at item @b{st-bigbrick-ew} @expansion{} @code{st_brick_ew}, @pxref{st_brick}
- at item @b{st-bigbrick-n} @expansion{} @code{st_brick_n}, @pxref{st_brick}
- at need 200
- at item @b{st-bigbrick-ne} @expansion{} @code{st_brick_ne}, @pxref{st_brick}
- at item @b{st-bigbrick-nes} @expansion{} @code{st_brick_nes}, @pxref{st_brick}
- at item @b{st-bigbrick-nesw} @expansion{} @code{st_brick_nesw}, @pxref{st_brick}
- at item @b{st-bigbrick-new} @expansion{} @code{st_brick_new}, @pxref{st_brick}
- at need 200
- at item @b{st-bigbrick-ns} @expansion{} @code{st_brick_ns}, @pxref{st_brick}
- at item @b{st-bigbrick-nsw} @expansion{} @code{st_brick_nsw}, @pxref{st_brick}
- at item @b{st-bigbrick-nw} @expansion{} @code{st_brick_nw}, @pxref{st_brick}
- at item @b{st-bigbrick-s} @expansion{} @code{st_brick_s}, @pxref{st_brick}
- at need 200
- at item @b{st-bigbrick-sw} @expansion{} @code{st_brick_sw}, @pxref{st_brick}
- at item @b{st-bigbrick-w} @expansion{} @code{st_brick_w}, @pxref{st_brick}
- at item @b{st-block} @expansion{} @ref{st_plop}
- at item @b{st-bombs} @expansion{} @code{st_dispenser_bombblack}, @pxref{st_dispenser}
- at need 200
- at item @b{st-break_invisible} @expansion{} @code{st_ghost_break}, @pxref{st_ghost}
 @item @b{st-brick_magic} @expansion{} @code{st_magic_brick}, @pxref{st_magic}
 @item @b{st-brownie} @expansion{} @ref{st_brownie}
 @item @b{st-bug} @expansion{} @code{st_break_bug}, @pxref{st_break}

Modified: trunk/doc/reference/images/Makefile.am
===================================================================
--- trunk/doc/reference/images/Makefile.am	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/doc/reference/images/Makefile.am	2009-11-11 23:25:58 UTC (rev 1855)
@@ -9,6 +9,7 @@
 	ac_horse.png \
 	ac_marble_black.png \
 	ac_marble_white.png \
+	ac_pearl_black.png \
 	ac_pearl_white.png \
 	ac_rotor.png \
 	ac_top.png \
@@ -26,6 +27,8 @@
 	fl_metal_2.png fl_metal_3.png fl_metal_4.png fl_metal_5.png \
 	fl_metal_6.png fl_metal_7.png \
 	fl_samba_2.png \
+	fl_scales_bridge_bw_closed.png fl_scales_brick.png fl_scales_concrete.png \
+	fl_scales_darkgray.png fl_scales_gray.png fl_scales_platinum.png \
 	fl_slope.png fl_slope_2.png fl_slope_3.png fl_slope_4.png \
 	fl_slope_b.png fl_slope_b2.png fl_slope_b3.png fl_slope_b4.png \
 	fl_slope_c.png fl_slope_c2.png fl_slope_c3.png fl_slope_c4.png \
@@ -345,6 +348,9 @@
 %_framed.png: $(GFXDIR)/%.png $(GFXDIR)/floor_frame.png
 	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 -composite $< $(GFXDIR)/floor_frame.png $@
 
+fl_scales_%.png: $(GFXDIR)/fl_%.png $(GFXDIR)/fl_scales.png
+	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 -composite $< $(GFXDIR)/fl_scales.png  $@
+
 st_laser_%.png: $(GFXDIR)/st-laser-%.png $(GFXDIR)/st-laser-base.png
 	$(CONVERT) -density 112x112 -units PixelsPerCentimeter -crop 48x48+0+0 -composite $(GFXDIR)/st-laser-base.png $< $@
 

Modified: trunk/etc/mingw32-dist.sh.in
===================================================================
--- trunk/etc/mingw32-dist.sh.in	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/etc/mingw32-dist.sh.in	2009-11-11 23:25:58 UTC (rev 1855)
@@ -6,7 +6,7 @@
 DDIR="`pwd`/Enigma-$VERSION"
 SDIR=@top_srcdir@
 BDIR=@top_builddir@
-DLLDEFAULTS="SDL SDL_image SDL_mixer SDL_ttf jpeg zlib1 libfreetype-6 libogg-0 libpng12-0 libtiff-3 libvorbis-0 libvorbisfile-3 smpeg libcurl-4"
+DLLDEFAULTS="SDL SDL_image SDL_mixer SDL_ttf jpeg zlib1 libfreetype-6 libogg-0 libpng12-0 libtiff-3 libvorbis-0 libvorbisfile-3 smpeg mikmod libcurl-4"
 
 if [ "$ENIGMADEVDLLS" != "" ]; then
   DLLS=$ENIGMADEVDLLS

Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/src/main.cc	2009-11-11 23:25:58 UTC (rev 1855)
@@ -59,6 +59,7 @@
 #include <xercesc/util/XMLUniDefs.hpp>
 #include <xercesc/util/PlatformUtils.hpp>
 #include <xercesc/util/XercesVersion.hpp>
+#include <SDL_image.h>
 
 
 #ifdef MACOSX
@@ -345,6 +346,10 @@
     }
     atexit(SDL_Quit);
     SDL_EnableUNICODE(1);
+    SDL_version* vi = SDL_Linked_Version();
+    Log << ecl::strf("SDL Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+    vi = IMG_Linked_Version();
+    Log <<  ecl::strf("SDL <Image Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
 
     // ----- Initialize video subsystem
     video::Init();

Modified: trunk/src/video.cc
===================================================================
--- trunk/src/video.cc	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/src/video.cc	2009-11-11 23:25:58 UTC (rev 1855)
@@ -861,7 +861,9 @@
 void video::UpdateGamma()
 {
     float gamma = static_cast<float> (app.prefs->getDouble ("Gamma"));
-    SDL_SetGamma (gamma, gamma, gamma);
+    if (gamma < 0.25)  
+        gamma = 0.25;  // Windows does not set gamma for values < 0.2271
+    int result = SDL_SetGamma (gamma, gamma, gamma);
 }
 
 void video::Screenshot (const std::string &fname) 



From ral at mail.berlios.de  Thu Nov 12 00:28:43 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 12 Nov 2009 00:28:43 +0100
Subject: [Enigma-game-svn] r1856 - team_levelpacks/team_test_new_api
Message-ID: <200911112328.nABNShTx019911@sheep.berlios.de>

Author: ral
Date: 2009-11-12 00:28:37 +0100 (Thu, 12 Nov 2009)
New Revision: 1856

Modified:
   team_levelpacks/team_test_new_api/ralT076_1.xml
   team_levelpacks/team_test_new_api/ralT095_1.xml
Log:
Test Level new API:
- update on fl_scales
- update with balck killer

Modified: team_levelpacks/team_test_new_api/ralT076_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT076_1.xml	2009-11-11 23:25:58 UTC (rev 1855)
+++ team_levelpacks/team_test_new_api/ralT076_1.xml	2009-11-11 23:28:37 UTC (rev 1856)
@@ -29,6 +29,7 @@
 
 ti["@"] = {"#ac_marble"} 
 ti["o"] = {"#ac_killer", controllers=1, owner=YIN} 
+ti["p"] = {"#ac_killer_black", controllers=1, owner=YIN} 
 ti["O"] = {"#ac_horse", controllers=1, owner=YIN, adhesion=1} 
 
 ti["y"] = {"it_yinyang"}
@@ -37,7 +38,7 @@
 w, h = wo(ti, " ", {
 "   # Y y            ",
 "   #         ....C  ",
-"   #bb      x....   ",
+"p  #bb      x....   ",
 "o  #bb      x....   ",
 "   #bb       ....   ",
 "O  #   @            ",

Modified: team_levelpacks/team_test_new_api/ralT095_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/ralT095_1.xml	2009-11-11 23:25:58 UTC (rev 1855)
+++ team_levelpacks/team_test_new_api/ralT095_1.xml	2009-11-11 23:28:37 UTC (rev 1856)
@@ -17,10 +17,14 @@
     <el:luamain><![CDATA[
 
 ti[" "] = {"fl_sahara"}
+ti["h"] = {"fl_wood", ignitable=true}
 
 ti["."] = {"fl_scales", target="laser1"}
 ti["_"] = {"fl_scales_brick", target="laser2"} 
 ti["="] = {"fl_scales_gray", target="laser3"}
+ti["?"] = {"fl_scales_concrete", target="laser4"}
+ti[":"] = {"fl_scales_bridgewood", target="laser5"}
+ti["+"] = {"fl_scales_platinum", target="laser6"}
 
 ti["x"] = ti{"it_weight", mass=1.9} ..{"fl_scales_brick"} 
 ti["y"] = ti{"it_bag", "mybag"} ..{"fl_scales_brick"} 
@@ -29,6 +33,9 @@
 ti["1"] = {"st_laser_e", "laser1"}
 ti["2"] = {"st_laser_e", "laser2"}
 ti["3"] = {"st_laser_e", "laser3"}
+ti["4"] = {"st_laser_e", "laser4"}
+ti["5"] = {"st_laser_e", "laser5"}
+ti["6"] = {"st_laser_e", "laser6"}
 
 ti["*"] = {"st_rawglass_movable"}
 ti["$"] = {"st_lightglass_movable"}
@@ -40,27 +47,27 @@
 ti["M"] = {"st_mail", orientation=SOUTH}
 ti["b"] = {"it_bag"}
 
-ti["@"] = {"#ac_marble_black"}
+ti["@"] = {"#ac_marble_black"} .. ti{"it_dynamite"}
 ti["&"] = {"#ac_marble_white"}
 ti["%"] = {"#ac_pearl", owner=YANG, controllers=CTRL_YANG}
 
 w, h = wo(ti, " ", {
-"...___===           ",
-"...___===        x  ",
-"...___===        y  ",
-"          M         ",
+"hhhhhhhhhhhhhhhhhh  ",
+"...___===+++???:::  ",
+"...___===+++???::: x",
+"...___===+++???::: y",
 "      *   .        1",
-"                    ",
+"          M        4",
 "  @   $   _    WE  2",
-"                    ",
+"                   5",
 "      *   =      b 3",
-"  &       M      b  ",
+"  &       M      b 6",
 "                   m",
 "  %%%           ww  ",
 "                    "
 })
 
-wo:add(no["mybag"], ti["m"])
+wo:add(no["mybag"], ti["m"] .. {"it_bomb"})
 
   ]]></el:luamain>
     <el:i18n>



From ral at mail.berlios.de  Sat Nov 14 00:49:40 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 14 Nov 2009 00:49:40 +0100
Subject: [Enigma-game-svn] r1857 - in trunk: data src
Message-ID: <200911132349.nADNneiU014092@sheep.berlios.de>

Author: ral
Date: 2009-11-14 00:49:32 +0100 (Sat, 14 Nov 2009)
New Revision: 1857

Modified:
   trunk/data/models-16.lua
   trunk/data/models-32.lua
   trunk/data/models-40.lua
   trunk/data/models-48.lua
   trunk/data/models-64.lua
   trunk/src/display.cc
   trunk/src/display.hh
   trunk/src/display_internal.hh
   trunk/src/main.cc
   trunk/src/server.cc
   trunk/src/video.cc
   trunk/src/video.hh
   trunk/src/world.cc
Log:
Trunk 1.1:
- fix 1855 compile problems
- adjust time area for 320x240 mode
- add mode indicators in time area for easy, oxyd*, collision modes


Modified: trunk/data/models-16.lua
===================================================================
--- trunk/data/models-16.lua	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/data/models-16.lua	2009-11-13 23:49:32 UTC (rev 1857)
@@ -3,6 +3,7 @@
 ShadowSize = 21
 DefineFont ("timefont", "vera_sans.ttf", 18, "timefont", 180, 180, 180)
 DefineFont ("smallalternative", "DejaVuSansCondensed.ttf", 7, "menufont")
+DefineFont ("modesfont", "DejaVuSansCondensed.ttf", 9, "menufont", 70, 120, 255)
 DefineFont ("menufont", "DejaVuSansCondensed.ttf", 9, "menufont")
 DefineFont ("levelmenu", "DejaVuSansCondensed.ttf", 9, "levelmenu")
 DefineFont ("menufontsel", "DejaVuSansCondensed.ttf", 10, "menufont", 180, 180, 180)

Modified: trunk/data/models-32.lua
===================================================================
--- trunk/data/models-32.lua	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/data/models-32.lua	2009-11-13 23:49:32 UTC (rev 1857)
@@ -3,6 +3,7 @@
 ShadowSize = 41
 DefineFont ("timefont", "vera_sans.ttf", 36, "timefont", 180, 180, 180)
 DefineFont ("smallalternative", "DejaVuSansCondensed.ttf", 14, "menufont")
+DefineFont ("modesfont", "DejaVuSansCondensed.ttf", 16, "menufont", 70, 120, 255)
 DefineFont ("menufont", "DejaVuSansCondensed.ttf", 16, "menufont")
 DefineFont ("menufontsel", "DejaVuSansCondensed.ttf", 16, "menufont", 180, 180, 180)
 DefineFont ("statusbarfont", "DejaVuSansCondensed.ttf", 18, "dreamorp24")

Modified: trunk/data/models-40.lua
===================================================================
--- trunk/data/models-40.lua	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/data/models-40.lua	2009-11-13 23:49:32 UTC (rev 1857)
@@ -4,6 +4,7 @@
 
 DefineFont ("timefont", "vera_sans.ttf", 36, "timefont", 180, 180, 180)
 DefineFont ("smallalternative", "DejaVuSansCondensed.ttf", 14, "menufont")
+DefineFont ("modesfont", "DejaVuSansCondensed.ttf", 16, "menufont", 70, 120, 255)
 DefineFont ("menufont", "DejaVuSansCondensed.ttf", 16, "menufont")
 DefineFont ("menufontsel", "DejaVuSansCondensed.ttf", 16, "menufont", 180, 180, 180)
 DefineFont ("statusbarfont", "DejaVuSansCondensed.ttf", 20, "dreamorp24")

Modified: trunk/data/models-48.lua
===================================================================
--- trunk/data/models-48.lua	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/data/models-48.lua	2009-11-13 23:49:32 UTC (rev 1857)
@@ -4,6 +4,7 @@
 
 DefineFont ("timefont", "vera_sans.ttf", 40, "timefont", 180, 180, 180)
 DefineFont ("smallalternative", "DejaVuSansCondensed.ttf", 14, "menufont")
+DefineFont ("modesfont", "DejaVuSansCondensed.ttf", 16, "menufont", 70, 120, 255)
 DefineFont ("menufont", "DejaVuSansCondensed.ttf", 16, "menufont")
 DefineFont ("menufontsel", "DejaVuSansCondensed.ttf", 16, "menufont", 180, 180, 180)
 DefineFont ("statusbarfont", "DejaVuSansCondensed.ttf", 24, "dreamorp24")

Modified: trunk/data/models-64.lua
===================================================================
--- trunk/data/models-64.lua	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/data/models-64.lua	2009-11-13 23:49:32 UTC (rev 1857)
@@ -4,6 +4,7 @@
 
 DefineFont ("timefont", "vera_sans.ttf", 40, "timefont", 180, 180, 180)
 DefineFont ("smallalternative", "DejaVuSansCondensed.ttf", 14, "menufont")
+DefineFont ("modesfont", "DejaVuSansCondensed.ttf", 16, "menufont", 70, 120, 255)
 DefineFont ("menufont", "DejaVuSansCondensed.ttf", 16, "menufont")
 DefineFont ("menufontsel", "DejaVuSansCondensed.ttf", 16, "menufont", 180, 180, 180)
 DefineFont ("statusbarfont", "DejaVuSansCondensed.ttf", 24, "dreamorp24")

Modified: trunk/src/display.cc
===================================================================
--- trunk/src/display.cc	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/display.cc	2009-11-13 23:49:32 UTC (rev 1857)
@@ -66,7 +66,6 @@
     return s;
 }
 
-
 /* -------------------- Local variables -------------------- */
 
 namespace
@@ -81,7 +80,6 @@
 
 }
 
-
 //======================================================================
 // STATUS BAR
 //======================================================================
@@ -96,7 +94,6 @@
   m_showtime_p (true),
   m_counter (0),
   m_showcounter_p(false),
-  m_showodometer_p(false),
   m_interruptible(true),
   m_text_active(false)
 {
@@ -147,20 +144,16 @@
         m_changedp      = true;
     }
 }
+void StatusBarImpl::setCMode(bool flag) {
+    cMode = flag;
+    m_changedp = true;
+}
 
-void StatusBarImpl::show_odometer (bool active) 
-{
-    if (active != m_showodometer_p) {
-        m_showodometer_p = active;
-        m_changedp = true;
-    }
+void StatusBarImpl::setBasicModes(std::string flags) {
+    basicModes = flags;
+    m_changedp = true;
 }
 
-#ifdef _MSC_VER
-#define snprintf _snprintf
-#endif
-
-
 void StatusBarImpl::redraw (ecl::GC &gc, const ScreenArea &r) {
     const video::VMInfo *vminfo = video::GetInfo();
     ScreenArea a = get_area();
@@ -176,18 +169,30 @@
 //     frame (gc, vminfo->sb_movesarea);
 //     frame (gc, vminfo->sb_itemarea);
 
+    int        x;
+    int        y;
+    std::string text;
+    int        xsize_time  = 0;
+    int        xsize_moves = 0;
+    int        xsize_modes = 0;
+    Surface   *s_time      = 0;
+    Surface   *s_moves     = 0;
+    Surface   *s_modes     = 0;
+    Font      *timefont    = enigma::GetFont("timefont");
+    Font      *movesfont   = enigma::GetFont("smallfont");
+    Font      *modesfont   = enigma::GetFont("modesfont");
+    ScreenArea timearea    = vminfo->sb_timearea;
+    ScreenArea modesarea   = vminfo->sb_modesarea;
+    ScreenArea movesarea   = vminfo->sb_movesarea;
+
+    // draw modes indicators
+    s_modes = modesfont->render(((cMode ? "c" : "") + basicModes).c_str());
+    xsize_modes = s_modes->width();
+    x = modesarea.x + modesarea.w - xsize_modes;
+    y = modesarea.y;
+    blit(gc, x, y, s_modes);
+    
     if (m_showtime_p || m_showcounter_p) {
-        const int  BUFSIZE     = 8;
-        char       buf[BUFSIZE];
-        int        xsize_time  = 0;
-        int        xsize_moves = 0;
-        Surface   *s_time      = 0;
-        Surface   *s_moves     = 0;
-        Font      *timefont    = enigma::GetFont ("timefont");
-        Font      *movesfont   = enigma::GetFont ("smallfont");
-        ScreenArea timearea    = vminfo->sb_timearea;
-        ScreenArea movesarea   = vminfo->sb_movesarea;
-
         if (m_showtime_p) {
             double     abstime       = m_leveltime >= 0 ? m_leveltime : fabs(floor(m_leveltime));
             int        minutes       = static_cast<int>(abstime/60);
@@ -197,24 +202,21 @@
                 minutes = 99;
                 seconds = 59;
             }
-            snprintf(buf, BUFSIZE,
-                     m_leveltime >= 0 ? "%d:%02d" : "-%d:%02d",
-                     minutes, seconds);
-            s_time = timefont->render(buf);
+            text = ecl::strf(m_leveltime >= 0 ? "%d:%02d" : "-%d:%02d", minutes, seconds);
+            s_time = timefont->render(text.c_str());
             xsize_time = s_time->width();
         }
 
         if (m_showcounter_p) {
-            int len = snprintf(buf, BUFSIZE, "%d", m_counter);
-            s_moves     = movesfont->render(buf);
+            text = ecl::strf("%d", m_counter);
+            s_moves     = movesfont->render(text.c_str());
             xsize_moves = s_moves->width();
         }
 
-
         if (m_showtime_p) {
             if (m_showcounter_p) { // time + moves
-                int x = timearea.x + (movesarea.x - timearea.x - xsize_time)/2;
-                int y = timearea.y + (timearea.h - timefont->get_lineskip())/2;
+                x = timearea.x + (movesarea.x - timearea.x - xsize_time)/2;
+                y = timearea.y + (timearea.h - timefont->get_lineskip())/2;
                 blit(gc, x, y, s_time);
                 
                 x = movesarea.x + (movesarea.w - xsize_moves)/2;
@@ -222,8 +224,8 @@
                 blit(gc, x, y, s_moves);
             }
             else { // only time
-                int x = timearea.x + (timearea.w - xsize_time)/2;
-                int y = timearea.y + (timearea.h - timefont->get_lineskip())/2;
+                x = timearea.x + (timearea.w - xsize_time)/2;
+                y = timearea.y + (timearea.h - timefont->get_lineskip())/2;
                 blit(gc, x, y, s_time);
             }
         }
@@ -297,7 +299,6 @@
     m_changedp    = true;
 }
 
-
 /* -------------------- TextDisplay implementation -------------------- */
 
 TextDisplay::TextDisplay (Font &f)
@@ -409,7 +410,6 @@
 
 
 
-
 //======================================================================
 // DISPLAY ENGINE
 //======================================================================

Modified: trunk/src/display.hh
===================================================================
--- trunk/src/display.hh	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/display.hh	2009-11-13 23:49:32 UTC (rev 1857)
@@ -208,7 +208,8 @@
         virtual void hide_text() = 0;
 
         virtual void show_move_counter (bool active) = 0;
-        virtual void show_odometer (bool active)     = 0;
+        virtual void setCMode(bool flag) = 0;
+        virtual void setBasicModes(std::string flags) = 0;
 
         virtual void set_time (double time) = 0;
         virtual void set_speed (double speed) = 0;
@@ -220,7 +221,6 @@
 
 #define STATUSBAR display::GetStatusBar()
 
-
 /* -------------------- Constants -------------------- */
 
     const int MIN_TextSpeed = 1;
@@ -237,8 +237,8 @@
         SHOW_ITEMS     = 0x04,
         SHOW_SHADES    = 0x08,
         SHOW_SPRITES   = 0x10,
-	SHOW_TIME      = 0x20,
-	SHOW_INVENTORY = 0x40,
+        SHOW_TIME      = 0x20,
+        SHOW_INVENTORY = 0x40,
         SHOW_ALL       = 0x7f
     };
 

Modified: trunk/src/display_internal.hh
===================================================================
--- trunk/src/display_internal.hh	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/display_internal.hh	2009-11-13 23:49:32 UTC (rev 1857)
@@ -69,7 +69,8 @@
         void hide_text();
 
         void show_move_counter (bool active);
-        void show_odometer (bool active);
+        void setCMode(bool flag);
+        void setBasicModes(std::string flags);
 
         void set_speed (double speed);
         void set_travelled_distance (double distance);
@@ -85,9 +86,10 @@
         bool   m_showtime_p;
         int    m_counter;
         bool   m_showcounter_p;
-        bool   m_showodometer_p;
         bool   m_interruptible; // Current text message may be interrupted
         bool m_text_active;
+        bool cMode;  // collision mode flag
+        std::string basicModes;  // set by world on start of level
     };
 
 

Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/main.cc	2009-11-13 23:49:32 UTC (rev 1857)
@@ -346,7 +346,7 @@
     }
     atexit(SDL_Quit);
     SDL_EnableUNICODE(1);
-    SDL_version* vi = SDL_Linked_Version();
+    const SDL_version* vi = SDL_Linked_Version();
     Log << ecl::strf("SDL Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
     vi = IMG_Linked_Version();
     Log <<  ecl::strf("SDL <Image Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/server.cc	2009-11-13 23:49:32 UTC (rev 1857)
@@ -544,6 +544,7 @@
         else
             client::Msg_ShowText ("collision handling enabled", false, 2);
         client::Msg_Command("cheater");
+        STATUSBAR->setCMode(server::NoCollisions);
     }
 
     // ------------------------------ quick options

Modified: trunk/src/video.cc
===================================================================
--- trunk/src/video.cc	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/video.cc	2009-11-13 23:49:32 UTC (rev 1857)
@@ -341,6 +341,7 @@
             Rect (0, 0, 640, 416),           // game area
             Rect (0, 416, 640, 64),          // statusbar area
             Rect (10, 425, 117, 43),         // time area
+            Rect (100, 419, 28, 43),         // modes area
             Rect (100, 425, 30, 43),         // moves area
             Rect (152, 433, 490, 52),        // inventory area
             Rect (150, 434, 475, 35),        // text area
@@ -358,6 +359,7 @@
             Rect (0, 0, 640, 416),           // game area
             Rect (0, 416, 640, 64),          // statusbar area
             Rect (15, 420, 110, 40),         // time area
+            Rect (100, 420, 31, 40),         // modes area
             Rect (100, 420, 30, 40),         // moves area
             Rect (152, 433, 490, 52),        // inventory area
             Rect (150, 434, 475, 35),        // text area
@@ -375,6 +377,7 @@
             Rect (0, 0, 800, 520),           // game area
             Rect (0, 520, 800, 80),          // statusbar area
             Rect (15, 540, 140, 40),         // time area
+            Rect (125, 529, 31, 40),         // modes area
             Rect (125, 540, 30, 40),         // moves area
             Rect (192, 539, 610, 46),        // inventory area
             Rect (185, 545, 600, 39),        // text area
@@ -392,6 +395,7 @@
             Rect (32, 0, 960, 624),          // game area
             Rect (32, 624, 960, 96),         // statusbar area
             Rect (50, 640, 170, 60),         // time area
+            Rect (185, 634, 34, 60),         // modes area
             Rect (185, 640, 30, 60),         // moves area
             Rect (260, 650, 710, 46),        // inventory area
             Rect (260, 655, 710, 40),        // text area
@@ -409,6 +413,7 @@
             Rect (0, 0, 960, 624),           // game area
             Rect (0, 624, 960, 96),          // statusbar area
             Rect (18, 640, 170, 60),         // time area
+            Rect (153, 634, 34, 60),         // modes area
             Rect (153, 640, 30, 60),         // moves area
             Rect (228, 650, 710, 46),        // inventory area
             Rect (228, 655, 710, 40),        // text area
@@ -426,6 +431,7 @@
             Rect (160, 0, 960, 624),         // game area
             Rect (160, 624, 960, 96),        // statusbar area
             Rect (178, 640, 170, 60),        // time area
+            Rect (313, 640, 30, 60),         // modes area
             Rect (313, 640, 30, 60),         // moves area
             Rect (388, 650, 710, 46),        // inventory area
             Rect (388, 655, 710, 40),        // text area
@@ -443,6 +449,7 @@
             Rect (0, 0, 1280, 832),          // game area
             Rect (0, 832, 1280, 128),        // statusbar area
             Rect (24, 853, 227, 80),         // time area //TODO
+            Rect (204, 853, 40, 80),         // modes area //TODO
             Rect (204, 853, 40, 80),         // moves area //TODO
             Rect (304, 867, 947, 61),        // inventory area //TODO
             Rect (304, 873, 947, 53),        // text area //TODO
@@ -460,6 +467,7 @@
             Rect (80, 0, 1280, 832),         // game area
             Rect (80, 832, 1280, 128),       // statusbar area
             Rect (104, 853, 227, 80),        // time area //TODO
+            Rect (284, 853, 40, 80),         // modes area //TODO
             Rect (284, 853, 40, 80),         // moves area //TODO
             Rect (384, 867, 947, 61),        // inventory area //TODO
             Rect (384, 873, 947, 53),        // text area //TODO
@@ -477,6 +485,7 @@
             Rect (0, 0, 1280, 832),          // game area
             Rect (0, 832, 1280, 128),        // statusbar area
             Rect (18, 640, 170, 60),         // time area //TODO
+            Rect (153, 640, 30, 60),         // modes area //TODO
             Rect (153, 640, 30, 60),         // moves area //TODO
             Rect (228, 650, 710, 46),        // inventory area //TODO
             Rect (228, 655, 710, 40),        // text area //TODO
@@ -494,6 +503,7 @@
             Rect (200, 0, 1280, 832),        // game area
             Rect (200, 832, 1280, 128),      // statusbar area
             Rect (224, 853, 227, 80),        // time area //TODO
+            Rect (404, 853, 40, 80),         // modes area //TODO
             Rect (404, 853, 40, 80),         // moves area //TODO
             Rect (504, 867, 947, 61),        // inventory area //TODO
             Rect (504, 873, 947, 53),        // text area //TODO
@@ -510,8 +520,9 @@
             60, 39, "-60x39",                // thumbnail size/extension
             Rect (0, 0, 320, 208),           // game area
             Rect (0, 208, 320, 32),          // statusbar area
-            Rect (5, 212, 587, 21),          // time area
-            Rect (50, 212, 15, 21),          // moves area
+            Rect (5, 212, 65, 21),           // time area
+            Rect (50, 210, 14, 21),          // modes area
+            Rect (50, 220, 15, 21),          // moves area
             Rect (76, 216, 245, 26),         // inventory area
             Rect (75, 217, 237, 17),         // text area
             true, true,                      // available window, fullscreen

Modified: trunk/src/video.hh
===================================================================
--- trunk/src/video.hh	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/video.hh	2009-11-13 23:49:32 UTC (rev 1857)
@@ -70,6 +70,7 @@
         ecl::Rect      gamearea;
         ecl::Rect      statusbararea;
         ecl::Rect      sb_timearea;
+        ecl::Rect      sb_modesarea;
         ecl::Rect      sb_movesarea;
         ecl::Rect      sb_itemarea;
         ecl::Rect      sb_textarea;

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-11-11 23:28:37 UTC (rev 1856)
+++ trunk/src/world.cc	2009-11-13 23:49:32 UTC (rev 1857)
@@ -1711,7 +1711,10 @@
     }
         
     server::InitMoveCounter();
-    STATUSBAR->show_move_counter (server::ShowMoves);
+    STATUSBAR->show_move_counter(server::ShowMoves);
+    STATUSBAR->setCMode(server::NoCollisions);
+    STATUSBAR->setBasicModes(std::string() + (server::GameCompatibility == GAMET_ENIGMA ? "" : "x") 
+            + (server::IsDifficult ? "" : "e"));
 
     display::FocusReferencePoint();
 



From raoul at mail.berlios.de  Sun Nov 15 14:52:34 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 15 Nov 2009 14:52:34 +0100
Subject: [Enigma-game-svn] r1858 - in trunk/data/levels: enigma_cross
	enigma_i enigma_iv enigma_ix enigma_tutorial enigma_vi
	enigma_vii enigma_viii
Message-ID: <200911151352.nAFDqY2D008512@sheep.berlios.de>

Author: raoul
Date: 2009-11-15 14:52:31 +0100 (Sun, 15 Nov 2009)
New Revision: 1858

Added:
   trunk/data/levels/enigma_ix/duffy184_1.xml
   trunk/data/levels/enigma_ix/mecke04_1.xml
   trunk/data/levels/enigma_ix/mecke38_1.xml
   trunk/data/levels/enigma_ix/wesley02_1.xml
   trunk/data/levels/enigma_vi/ral07_2.xml
   trunk/data/levels/enigma_vi/ral17_3.xml
   trunk/data/levels/enigma_vii/duffy163_2.xml
   trunk/data/levels/enigma_vii/joe09_2.xml
   trunk/data/levels/enigma_vii/joe13_2.xml
Removed:
   trunk/data/levels/enigma_vi/ral07_1.xml
   trunk/data/levels/enigma_vi/ral17_2.xml
   trunk/data/levels/enigma_vii/duffy163_1.xml
   trunk/data/levels/enigma_vii/joe09_1.xml
   trunk/data/levels/enigma_vii/joe13_1.xml
Modified:
   trunk/data/levels/enigma_cross/newlevels-0-92a.xml
   trunk/data/levels/enigma_cross/newlevels-1-00.xml
   trunk/data/levels/enigma_cross/newlevels-1-01.xml
   trunk/data/levels/enigma_cross/newlevels-1-10.xml
   trunk/data/levels/enigma_i/ant24_2.xml
   trunk/data/levels/enigma_i/index.xml
   trunk/data/levels/enigma_iv/duffy105_2.xml
   trunk/data/levels/enigma_ix/devnull31_1.xml
   trunk/data/levels/enigma_ix/devnull38_1.xml
   trunk/data/levels/enigma_ix/index.xml
   trunk/data/levels/enigma_tutorial/adv_tutorial.xml
   trunk/data/levels/enigma_tutorial/index.xml
   trunk/data/levels/enigma_vi/index.xml
   trunk/data/levels/enigma_vii/index.xml
   trunk/data/levels/enigma_vii/mecke09_2.xml
   trunk/data/levels/enigma_viii/andreas56_1.xml
   trunk/data/levels/enigma_viii/cel2_1.xml
   trunk/data/levels/enigma_viii/devnull19_1.xml
   trunk/data/levels/enigma_viii/index.xml
   trunk/data/levels/enigma_viii/ral30_1.xml
Log:
-> New levels:
    duffy184 ("Escape in Chains")
    mecke04 ("Tour de France")
    mecke38 ("Reflections I")
    wesley02 ("Meditation Sorting")

-> New API Rewritings:
    duffy163
    joe09
    joe13
    ral07
    ral17 and new API oxydrules

-> Various other little things:
    andreas56: replaced marble by black pearl
    ant24: INDISPENSABLE fix
    devnull19, devnull31, devnull38: fallen puzzle floor variable
    duffy105: status -> released
    mecke09: interchanged some targets/actions
    ral30: improved necklage and messages




Modified: trunk/data/levels/enigma_cross/newlevels-0-92a.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels-0-92a.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_cross/newlevels-0-92a.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Facets" location="15100" network="false" owner="Enigma Team" release="1" revision="41" title="Enigma 0.92 - 1"/>
+  <info enigma="1.10" group="Facets" location="15100" network="false" owner="Enigma Team" release="1" revision="42" title="Enigma 0.92 - 1"/>
 
   <attributes/>
 
@@ -104,7 +104,7 @@
     <level _seq="96" _title="Where am I?" _xpath="enigma_i/martin68_1" author="Martin Hawlisch" ctrl="force" easy="false" id="martin68" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="97" _title="Space Travels" _xpath="enigma_i/siegfried30_1" author="Siegfried Fennig" ctrl="force" easy="false" id="level10b" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="98" _title="Gopher It" _xpath="enigma_ii/nat34_2" author="Nat Pryce" ctrl="force" easy="false" id="natmaze3" rel="2" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="99" _title="- Meditation -" _xpath="enigma_i/ant24_2" author="Petr Machata" ctrl="force" easy="false" id="ant24" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="99" _title="- Meditation -" _xpath="enigma_i/ant24_2" author="Petr Machata" ctrl="force" easy="false" id="ant24" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="100" _title="Spiders" _xpath="enigma_v/ant26_2" author="Petr Machata" ctrl="force" easy="false" id="ant26" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="101" _title="Meditation Puzzle" _xpath="enigma_iv/duffy01_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy1" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="102" _title="Come To Me" _xpath="enigma_ii/ant20_2" author="Petr Machata" ctrl="force" easy="false" id="ant20" rel="2" rev="2" score="2" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels-1-00.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels-1-00.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_cross/newlevels-1-00.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="61" title="Enigma 1.00 new"/>
+  <info enigma="1.10" group="Facets" location="15400" network="false" owner="Enigma Team" release="1" revision="62" title="Enigma 1.00 new"/>
 
   <attributes/>
 
@@ -174,7 +174,7 @@
     <level _seq="166" _title="Twisting by the pool" _xpath="enigma_vi/alain23_1" author="Alain Busser" ctrl="force" easy="true" id="alain23" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="167" _title="Hot Meditation" _xpath="enigma_vi/ral08_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060527ral010" rel="2" rev="167" score="1" target="time" unit="duration"/>
     <level _seq="168" _title="Pool with a pole" _xpath="enigma_vii/alain28_2" author="Alain Busser" ctrl="force" easy="false" id="alain28" rel="2" rev="4" score="1" target="time" unit="duration"/>
-    <level _seq="169" _title="Jump into Meditation" _xpath="enigma_vi/ral07_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060525ral009" rel="1" rev="42" score="1" target="time" unit="duration"/>
+    <level _seq="169" _title="Jump into Meditation" _xpath="enigma_vi/ral07_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060525ral009" rel="2" rev="190" score="1" target="time" unit="duration"/>
     <level _seq="170" _title="- Meditation -" _xpath="enigma_vi/raoul18_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul18" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="171" _title="Step gently!" _xpath="enigma_vi/malla03_2" author="Manuel K?nig" ctrl="force" easy="true" id="malla03" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="172" _title="Houdini" _xpath="enigma_vi/ral11_3" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060816ral719" rel="3" rev="147" score="2" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels-1-01.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels-1-01.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_cross/newlevels-1-01.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Facets" location="15500" network="false" owner="Enigma Team" release="1" revision="41" title="Enigma 1.01 new"/>
+  <info enigma="1.10" group="Facets" location="15500" network="false" owner="Enigma Team" release="1" revision="42" title="Enigma 1.01 new"/>
 
   <attributes/>
 
@@ -21,7 +21,7 @@
     <level _seq="13" _title="Magic Triangle" _xpath="enigma_vi/just13_1" author="JuSt" ctrl="force" easy="false" id="just13" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="Revolver" _xpath="enigma_vi/ral16_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070214ral703" rel="2" rev="186" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="Devil's Bolder" _xpath="enigma_vi/just14_1" author="JuSt" ctrl="force" easy="true" id="just14" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="16" _title="Turnstiles for Two" _xpath="enigma_vi/ral17_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070314ral189" rel="2" rev="94" score="2" target="time" unit="duration"/>
+    <level _seq="16" _title="Turnstiles for Two" _xpath="enigma_vi/ral17_3" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070314ral189" rel="3" rev="190" score="2" target="time" unit="duration"/>
     <level _seq="17" _title="The wrong Place?" _xpath="enigma_vi/just17_2" author="JuSt" ctrl="force" easy="false" id="just17" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="18" _title="Your Friend, the Light" _xpath="enigma_vi/just15_1" author="JuSt" ctrl="force" easy="true" id="just15" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="jumping ball flash" _xpath="enigma_vi/illmind13_1" author="illmind" ctrl="force" easy="false" id="2007ill001" rel="1" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_cross/newlevels-1-10.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels-1-10.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_cross/newlevels-1-10.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="71" title="Enigma 1.10 new"/>
+  <info enigma="1.10" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="72" title="Enigma 1.10 new"/>
 
   <attributes/>
 
@@ -15,10 +15,10 @@
     <level _seq="7" _title="Pantograph" _xpath="enigma_vii/duffy160_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy160" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="8" _title="Advanced Space Tubes" _xpath="enigma_vii/duffy161_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy161" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="9" _title="Deserted Island" _xpath="enigma_vii/joe08_2" author="Joseph Dunne" ctrl="force" easy="false" id="joe8" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="10" _title="The Fortress" _xpath="enigma_vii/joe09_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe9" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="11" _title="Manuevre" _xpath="enigma_vii/joe13_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe13" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="10" _title="The Fortress" _xpath="enigma_vii/joe09_2" author="Joseph Dunne" ctrl="force" easy="false" id="joe9" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="11" _title="Manuevre" _xpath="enigma_vii/joe13_2" author="Joseph Dunne" ctrl="force" easy="true" id="joe13" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="12" _title="Mayan Meditation" _xpath="enigma_vii/duffy162_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy162" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="13" _title="Horseshoes" _xpath="enigma_vii/duffy163_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy163" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="13" _title="Horseshoes" _xpath="enigma_vii/duffy163_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy163" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="Knot Garden" _xpath="enigma_vii/duffy165_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy165" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="Impulse-phobia" _xpath="enigma_vii/duffy166_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy166" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="16" _title="Slopes, Jumps &amp; Falls" _xpath="enigma_vii/duffy167_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy167" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -78,7 +78,7 @@
     <level _seq="70" _title="Pick-Up" _xpath="enigma_vii/joe27_2" author="Joseph Dunne" ctrl="force" easy="false" id="joe27" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="71" _title="A Kind of Magic" _xpath="enigma_vii/just37_2" author="JuSt" ctrl="force" easy="true" id="JuStA Kind of Magic" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="Blue Screen Of Death" _xpath="enigma_vii/pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="73" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="41" score="1" target="time" unit="duration"/>
+    <level _seq="73" _title="Audience in Venice" _xpath="enigma_vii/mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="42" score="1" target="time" unit="duration"/>
     <level _seq="74" _title="Black Liberation" _xpath="enigma_vii/mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="44" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Jack-Of-All-Trades" _xpath="enigma_vii/mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="49" score="1" target="time" unit="duration"/>
     <level _seq="76" _title="Enigmaparcour I" _xpath="enigma_viii/mecke15_1" author="mecke" ctrl="force" easy="true" id="mecke15" rel="1" rev="36" score="1" target="time" unit="duration"/>
@@ -113,7 +113,7 @@
     <level _seq="105" _title="Colored Turnstiles" _xpath="enigma_viii/andreas51_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas51" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="106" _title="Sanssouci" _xpath="enigma_viii/mecke05_1" author="mecke" ctrl="force" easy="true" id="mecke05" rel="1" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="107" _title="Wired Shogun" _xpath="enigma_viii/ral34_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080828ral417" rel="1" rev="129" score="1" target="time" unit="duration"/>
-    <level _seq="108" _title="Scarlet's Necklace" _xpath="enigma_viii/ral30_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080814ral422" rel="1" rev="166" score="1" target="time" unit="duration"/>
+    <level _seq="108" _title="Scarlett's Necklace" _xpath="enigma_viii/ral30_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080814ral422" rel="1" rev="191" score="1" target="time" unit="duration"/>
     <level _seq="109" _title="- Meditation -" _xpath="enigma_viii/raoul31_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul31" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="110" _title=" - Meditation - " _xpath="enigma_viii/devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="111" _title=" - Meditation - " _xpath="enigma_viii/devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
@@ -144,11 +144,11 @@
     <level _seq="136" _title="Minopal" _xpath="enigma_viii/andreas54_1" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas54" rel="1" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="137" _title="Mole Hill Meditation" _xpath="enigma_viii/ral43_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20090112ral228" rel="1" rev="139" score="1" target="time" unit="duration"/>
     <level _seq="138" _title="Involution" _xpath="enigma_viii/raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="139" _title="Near Halley I" _xpath="enigma_viii/devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="7" score="1" target="time" unit="duration"/>
+    <level _seq="139" _title="Near Halley I" _xpath="enigma_viii/devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="140" _title="Two Is A Company I" _xpath="enigma_viii/devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="141" _title="Two Is A Company II" _xpath="enigma_viii/devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="142" _title="CrissCross" _xpath="enigma_viii/devnull26_1" author="/dev/null" ctrl="force" easy="true" id="devnull26" rel="1" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="143" _title="5 Days and 5 Nights" _xpath="enigma_viii/andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="143" _title="5 Days and 5 Nights" _xpath="enigma_viii/andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="144" _title="Babylon" _xpath="enigma_viii/mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="29" score="1" target="time" unit="duration"/>
     <level _seq="145" _title="Two Is A Company III" _xpath="enigma_viii/devnull27_1" author="/dev/null" ctrl="force" easy="false" id="devnull27" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="146" _title="Panelled Puzzle I" _xpath="enigma_viii/ral32_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080820ral639" rel="1" rev="179" score="1" target="time" unit="duration"/>
@@ -187,10 +187,10 @@
     <level _seq="179" _title="Behind Glass" _xpath="enigma_ix/rudolf01_1" author="Rudolf" ctrl="force" easy="false" id="rudolf01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="180" _title="Perennial Creek" _xpath="enigma_ix/pulley20_2" author="Mark Pulley" ctrl="force" easy="true" id="20080614pulley001" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="181" _title="Wired Strips" _xpath="enigma_viii/ral38_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081223ral510" rel="1" rev="151" score="1" target="time" unit="duration"/>
-    <level _seq="182" _title="Pentachromos" _xpath="enigma_viii/cel2_1" author="Joseph Dunne, Ronald Lamprecht, Dominik Lehmann, Mark Pulley, Lukas Sch?ller" ctrl="force" easy="false" id="cel2" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="182" _title="Pentachromos" _xpath="enigma_viii/cel2_1" author="J.Dunne, R.Lamprecht, D.Lehmann, M.Pulley, L.Sch?ller" ctrl="force" easy="false" id="cel2" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="183" _title="Wired Pulls" _xpath="enigma_ix/raoul36_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul36" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="184" _title="Crabwise III" _xpath="enigma_ix/devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="185" _title="Bicolor" _xpath="enigma_ix/devnull31_1" author="/dev/null" ctrl="force" easy="false" id="devnull31" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="184" _title="Crabwise III" _xpath="enigma_ix/devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="185" _title="Bicolor" _xpath="enigma_ix/devnull31_1" author="/dev/null" ctrl="force" easy="false" id="devnull31" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="186" _title="lower i" _xpath="enigma_ix/devnull39_1" author="/dev/null" ctrl="force" easy="true" id="devnull39" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="187" _title="At the Pool" _xpath="enigma_ix/devnull36_1" author="/dev/null" ctrl="force" easy="true" id="devnull36" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="188" _title="Hide them" _xpath="enigma_ix/devnull44_1" author="/dev/null" ctrl="force" easy="false" id="devnull44" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -217,6 +217,10 @@
     <level _seq="209" _title="Oh nO" _xpath="enigma_ix/devnull43_1" author="/dev/null" ctrl="force" easy="false" id="devnull43" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="210" _title="FizzBuzz" _xpath="enigma_ix/ais10_1" author="Alex Smith" ctrl="force" easy="true" id="ais10" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="211" _title="Changing conditions" _xpath="enigma_ix/devnull01_2" author="/dev/null" ctrl="force" easy="false" id="devnull01" rel="2" rev="5" score="1" target="time" unit="duration"/>
+    <level _seq="212" _title="Reflections I" _xpath="enigma_ix/mecke38_1" author="mecke" ctrl="force" easy="true" id="mecke_sess01" rel="1" rev="13" score="1" target="time" unit="duration"/>
+    <level _seq="213" _title="Tour de France" _xpath="enigma_ix/mecke04_1" author="mecke" ctrl="force" easy="false" id="mecke04" rel="1" rev="12" score="1" target="time" unit="duration"/>
+    <level _seq="214" _title="Escape in Chains" _xpath="enigma_ix/duffy184_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy184" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="215" _title="Meditation Sorting" _xpath="enigma_ix/wesley02_1" author="Helge Blohmer" ctrl="force" easy="true" id="20080821wcr001" rel="1" rev="3" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_i/ant24_2.xml
===================================================================
--- trunk/data/levels/enigma_i/ant24_2.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_i/ant24_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="- Meditation -" el:subtitle="" el:id="ant24"/>
-      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
       <el:author  el:name="Petr Machata" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2003 Petr Machata</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -21,8 +21,8 @@
 ti["*"] = {"st_puzzle", cluster=1}
 ti["w"] = {"it_wormhole", range=1, strength=10, destination="spot"}
 ti["O"] = {"it_meditation_hollow"}
-ti["1"] = ti["_"] .. {"#ac_pearl", essential=-1}
-ti["2"] = {"#ac_pearl", essential=-1}
+ti["1"] = ti["_"] .. {"#ac_pearl", essential=INDISPENSABLE}
+ti["2"] = {"#ac_pearl", essential=INDISPENSABLE}
 
 wo(ti, " ", {
     "####################",

Modified: trunk/data/levels/enigma_i/index.xml
===================================================================
--- trunk/data/levels/enigma_i/index.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_i/index.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="10200" network="false" owner="Enigma Team" release="1" revision="32" title="Enigma I"/>
+  <info enigma="1.10" group="Enigma" location="10200" network="false" owner="Enigma Team" release="1" revision="33" title="Enigma I"/>
 
   <attributes/>
 
@@ -75,7 +75,7 @@
     <level _seq="67" _title="Black Lava" _xpath="./ant12_2" author="Petr Machata" ctrl="force" easy="false" id="ant12" rel="2" rev="1" score="2" target="time" unit="duration"/>
     <level _seq="68" _title="Laser Arena" _xpath="./andreas14_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas14" rel="2" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="69" _title="Advanced Lasers" _xpath="./luc23_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc23" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="70" _title="- Meditation -" _xpath="./ant24_2" author="Petr Machata" ctrl="force" easy="false" id="ant24" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="70" _title="- Meditation -" _xpath="./ant24_2" author="Petr Machata" ctrl="force" easy="false" id="ant24" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="71" _title="Spiral Race" _xpath="./wb06_2" author="Jon 'WB' Sneyers" ctrl="force" easy="false" id="wb6" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="Way To Go" _xpath="./daniel09_1" author="Daniel Heck" ctrl="force" easy="false" id="mirrors" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="73" _title="Formentera!" _xpath="./luc06_2" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc06" rel="2" rev="1" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_iv/duffy105_2.xml
===================================================================
--- trunk/data/levels/enigma_iv/duffy105_2.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_iv/duffy105_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Drunkard's Walk" el:subtitle="" el:id="duffy105"/>
-      <el:version el:score="2" el:release="2" el:revision="2" el:status="stable"/>
+      <el:version el:score="2" el:release="2" el:revision="2" el:status="released"/>
       <el:author el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>

Modified: trunk/data/levels/enigma_ix/devnull31_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/devnull31_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/devnull31_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,8 +3,8 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Bicolor" el:subtitle="" el:id="devnull31"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
-      <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="released"/>
+      <el:author el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2009 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
@@ -16,6 +16,7 @@
     <el:luamain><![CDATA[
 wo["ProvideExtralifes"] = false
 wo["FrictionStrength"] = 2.0
+wo["FallenPuzzle"] = "=  "
 
 ti["##"] = {"st_granite"}
 ti["  "] = {"fl_red", friction = 5.0, adhesion = 3.0}

Modified: trunk/data/levels/enigma_ix/devnull38_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/devnull38_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/devnull38_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,8 +3,8 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Crabwise III" el:subtitle="" el:id="devnull38"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
-      <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="released"/>
+      <el:author el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2009 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
@@ -16,6 +16,7 @@
     <el:luamain><![CDATA[
 wo["AllowSuicide"] = false
 wo["ProvideExtralifes"] = not wo["IsDifficult"]
+wo["FallenPuzzle"] = "= "
 
 ti[" "] = {"fl_rock"}
 ti["~"] = {"fl_water"}

Added: trunk/data/levels/enigma_ix/duffy184_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/duffy184_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/duffy184_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,110 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Escape in Chains" el:subtitle="Beware of shady mates!" el:id="duffy184"/>
+      <el:version el:score="1" el:release="1" el:revision="2" el:status="released"/>
+      <el:author el:name="Jacob Scott" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2007 Jacob Scott</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>New API converted by R. Lamprecht</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["ConserveLevel"] = false
+wo["SlopeStrength"] = 35
+
+ti[" "] = {"fl_hay"}
+ti["I"] = {"fl_ice"}
+ti["="] = {"fl_space"}
+ti["D"] = {"fl_dunes"}
+ti["i"] = {"fl_inverse"}
+ti["f"] = {"fl_bast"}
+ti["C"] = {"fl_metal_7n"}
+ti["#"] = {"st_tigris"}
+ti["P"] = {"st_charge_plus"}
+ti["M"] = {"st_charge_minus"}
+ti["S"] = {"st_scissors"}
+ti["B"] = {"st_window_s", secure=true} .. ti["f"]
+ti["X"] = {"st_death"}
+ti["H"] = {"st_break_black"}
+ti["F"] = {"st_actorimpulse"}
+ti[","] = ti["F"]  .. ti["I"]
+ti["o"] = {"st_oxyd"}
+ti["J"] = {"it_landmine"}
+ti[":"] = ti["f"]  .. ti["J"]
+ti[";"] = ti["I"]  .. ti["J"]
+ti["h"] = {"it_hammer"} .. ti["D"]
+ti["z"] = {"#ac_marble", "me"}
+ti["k"] = {"#ac_killer", "killer", controllers=CTRL_NONE}
+ti["d"] = {"fl_slope_ps"}
+ti["u"] = {"fl_slope_pn"}
+ti["r"] = {"fl_slope_pe"}
+ti["l"] = {"fl_slope_pw"}
+ti["1"] = {"fl_slope_isw"}
+ti["3"] = {"fl_slope_ise"}
+ti["7"] = {"fl_slope_inw"}
+ti["9"] = {"fl_slope_ine"}
+ti["a"] = {"it_trigger", target="cutcounter", action="signal"}
+ti["A"] = {"st_door_a", "cutter", state = OPEN}
+ti["p"] = cond(wo["IsDifficult"], ti["F"], ti["P"])
+ti["m"] = cond(wo["IsDifficult"], ti["F"], ti["M"])
+
+wo(ti, " ", {
+    "##########################################################",
+    "#o    X            #IIIIIIIIIIIIIIIIII#    ===     J     #",
+    "#     X   XX  XXX  #IIIIIIIIIIII;IIIII#    ===           #",
+    "#  X  X    X       #IIIIIIIIIIIIIIIIII#    ===     J     #",
+    "#  X  XX   X   BBBB#IIIIIIIIIIIIIIIIII#    ===     ###A###",
+    "#  X  X    X   B   #  IIIIII##IIIIII  #    ===     #aBfBa#",
+    "#  X  H   JX   B      IIIIII##IIIIII       ===     #fffff#",
+    "#  X  X    X   B   #IIIIIIII##IIIIIIII#    ===     #XXXaa#",
+    "#  X  XX   X   BBBB#IIIIIIIIIIIIIIII###    ===     #aaaaa#",
+    "#  X  X    X       #IIIIIIIIIIIIIIIIII#    ===     #aaXXX#",
+    "#     X   XX  XXX  #III;IIIIIIIIIIII  #    ===     #aaaaaS",
+    "#o    X            #IIIIIIIIIIIIIIII  #    ===     #aaaXaM",
+    "##################################### ####################",
+    "#  F            F  #     iiiii    X # #   DDDDDDDD J==   #",
+    "#J    J X  X J    J#     iiiii X      #   DDDDDDDD  == J #",
+    "#                  #     iiiii  31    #   DDDDDDDDJ ==   #",
+    "#  3d1  J  J  3d1  #     iiiii  9731  #   DDDDDDDD  ==J  #",
+    "#  rCl        rCl        iiiii    97  #   DDDDDDDD J==   #",
+    "# prCl   zk   rClm       iiiii  79        DDDDDDDD  == J #",
+    "#  rCl        rCl        iiiii  lr   X#   DDDDDDDD J==   #",
+    "#  9u7  J  J  9u7  #     iiiii  lr    #   DDDDDDDD  ==J  #",
+    "#                  #     iiiii  13 79 #   DDDDDDDDJ ==   #",
+    "#J    J X  X J    J#     iiiii     13 #   DDDDDDDD  == J #",
+    "#  F            F  #     iiiii  X     #   DDDDDDDD J==   #",
+    "#######################################################  #",
+    "#       F      F   #   ffffff#fffff       #    rrll   #  #",
+    "#  F III    F      #   ffff:fffffff   JJ  #J  ######  #uu#",
+    "#    III       ff  #   ffffffffffff   #  ## J ###### ##dd#",
+    "#F J IIIF DDD  ff  #   ffffffffffff   #  #   J#      #B  #",
+    "#      J  DhD J    #   f#fffff:ffff   ## #  ###JJJ## #B  #",
+    "#PFFM   J DDD Fii  J   ffffffffffff   #  #uu#     #  #   #",
+    "#   ====F  31  ii  #   fffffff#ffff   #  #dd#  #### ##   #",
+    "#F  ====   97  ii  #   ffffffffffff   # ##  #X #    #IIII#",
+    "#    F31 IIF CCC  F#   fff:fffff#ff   #CCCC #  #    #IIII#",
+    "#  J  97 II  CCC J #   ffffffffffff   #CCCC## X#   ##IIII#",
+    "#F      F     F    #   f#ffffffffff   #CCCC    #    ;IIII,",
+    "##########################################################"
+})
+
+wo:add({"ot_rubberband", anchor1="me", anchor2="killer", length=1.2, strength=15, max=5})
+wo:add({"ot_counter", "cutcounter", state=0, target="cutter", action_0="open", action_1="close"})
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="subtitle">
+        <el:english el:translate="true"/>
+        <el:translation el:lang="de">H?te dich vor fragw?rdigen Gef?hrten!</el:translation>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/duffy184_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/data/levels/enigma_ix/index.xml
===================================================================
--- trunk/data/levels/enigma_ix/index.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/index.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="11100" network="false" owner="Enigma Team" release="1" revision="14" title="Enigma IX"/>
+  <info enigma="1.10" group="Enigma" location="11100" network="false" owner="Enigma Team" release="1" revision="15" title="Enigma IX"/>
 
   <attributes/>
 
@@ -17,8 +17,8 @@
     <level _seq="9" _title="Behind Glass" _xpath="./rudolf01_1" author="Rudolf" ctrl="force" easy="false" id="rudolf01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="10" _title="Perennial Creek" _xpath="./pulley20_2" author="Mark Pulley" ctrl="force" easy="true" id="20080614pulley001" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="11" _title="Wired Pulls" _xpath="./raoul36_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul36" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="12" _title="Crabwise III" _xpath="./devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="3" score="1" target="time" unit="duration"/>
-    <level _seq="13" _title="Bicolor" _xpath="./devnull31_1" author="/dev/null" ctrl="force" easy="false" id="devnull31" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="12" _title="Crabwise III" _xpath="./devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="13" _title="Bicolor" _xpath="./devnull31_1" author="/dev/null" ctrl="force" easy="false" id="devnull31" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="lower i" _xpath="./devnull39_1" author="/dev/null" ctrl="force" easy="true" id="devnull39" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="At the Pool" _xpath="./devnull36_1" author="/dev/null" ctrl="force" easy="true" id="devnull36" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="16" _title="Hide them" _xpath="./devnull44_1" author="/dev/null" ctrl="force" easy="false" id="devnull44" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -45,6 +45,10 @@
     <level _seq="37" _title="Oh nO" _xpath="./devnull43_1" author="/dev/null" ctrl="force" easy="false" id="devnull43" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="38" _title="FizzBuzz" _xpath="./ais10_1" author="Alex Smith" ctrl="force" easy="true" id="ais10" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="39" _title="Changing conditions" _xpath="./devnull01_2" author="/dev/null" ctrl="force" easy="false" id="devnull01" rel="2" rev="5" score="1" target="time" unit="duration"/>
+    <level _seq="40" _title="Reflections I" _xpath="./mecke38_1" author="mecke" ctrl="force" easy="true" id="mecke_sess01" rel="1" rev="13" score="1" target="time" unit="duration"/>
+    <level _seq="41" _title="Tour de France" _xpath="./mecke04_1" author="mecke" ctrl="force" easy="false" id="mecke04" rel="1" rev="12" score="1" target="time" unit="duration"/>
+    <level _seq="42" _title="Escape in Chains" _xpath="./duffy184_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy184" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="43" _title="Meditation Sorting" _xpath="./wesley02_1" author="Helge Blohmer" ctrl="force" easy="true" id="20080821wcr001" rel="1" rev="3" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Added: trunk/data/levels/enigma_ix/mecke04_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/mecke04_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/mecke04_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,318 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Tour de France" el:subtitle="Marbleix and Pearlix I" el:id="mecke04"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision:12 $" el:status="released"/>
+      <el:author el:name="mecke" el:email=""/>
+      <el:copyright>Copyright ? 2009 Thomas Bernhardt</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+        <el:dependency el:path="lib/libtrain" el:id="lib/libtrain" el:release="1" el:preload="true"/>
+      </el:compatibility>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:credits el:showinfo="true" el:showstart="false">Thanks to Ronald Lamprecht for important ideas and testing</el:credits>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+ti["  "] = {"fl_red"}
+ti[" _"] = {"fl_thief"}
+ti[" 0"] = {"fl_wood"}
+ti[" !"] = {"fl_lawn_a"}
+ti[" -"] = {"fl_sahara"}
+ti[" &"] = {"fl_samba"}
+ti[" '"] = {"fl_red"}
+ti[" #"] = {"fl_water"}
+ti[" $"] = {"fl_sand"}
+ti[" ("] = {"fl_swamp"}
+ti[" )"] = {"fl_abyss"}
+ti[" ,"] = {"fl_slope_pw"}
+ti[" ."] = {"fl_hay", secure=true}
+ti[" +"] = {"fl_himalaya"}
+ti[" *"] = {"fl_slope_inw"}
+ti["$ "] = {"st_break_boulder"}
+ti["% "] = {"st_actorimpulse_invisible"}
+ti["& "] = {"st_magic"}
+ti["' "] = {"st_brownie"}
+ti["( "] = {"st_fourswitch"}
+ti["* "] = {"st_woven"}
+ti["+ "] = {"st_camouflage"}
+ti["! "] = {"st_metal"}
+ti["# "] = {"st_disco_medium"}
+ti[", "] = {"st_box_wood"}
+ti["- "] = {"st_granite_hollow"}
+ti["~ "] = {"st_chess_black"}
+ti[". "] = {"st_beads"}
+ti["/ "] = {"st_pull"}
+ti["0 "] = {"st_greengray"}
+ti["1 "] = {"st_knight"}
+ti["2 "] = {"st_rubberband"}
+ti["3 "] = {"st_death"}
+ti["4 "] = {"st_rawglass"}
+ti["5 "] = {"st_actorimpulse"}
+ti["6 "] = {"st_key"}
+ti["7 "] = {"st_oneway_n"}
+ti["8 "] = {"st_granite"}
+ti[";0"] = ti[" !"] .. {"st_switch", target="rouen1"}
+ti[";1"] = ti[" !"] .. {"st_coinslot", target="lutetia1", action="open"}
+ti[";2"] = ti[" !"] .. {"st_coinslot", target="lutetia2", action="open"}
+ti[";3"] = ti[" !"] .. {"st_switch", target="reims1", action="toggle"}
+ti[";4"] = ti[" +"] .. {"st_switch", target="nice1", action="toggle"}
+ti[";5"] = ti[" +"] .. {"st_switch", target="nice2", action="toggle"}
+ti[";7"] = ti[" +"] .. {"st_fourswitch", state=EAST,name="ff1",
+                         target_3="romans", action_3="toggle",
+                         target_1="loser", action_1="toggle"}
+ti[";8"] = ti[" +"] .. {"st_timer", action="callback", target="fire", interval=12}
+ti[";9"] = ti[" +"] .. {"st_timer", action="toggle", target="lasertunier#*", interval=4}
+ti["90"] = ti[" )"] .. {"fl_bridge_bw", name="rouen1"}
+ti["91"] = ti[" +"] .. {"st_door_a", name="lutetia1"}
+ti["92"] = ti[" +"] .. {"st_door_a", name="lutetia2"}
+ti["93"] = ti[" +"] .. {"st_door_a", name="reims1"}
+ti["94"] = ti[" +"] .. {"st_door_a", name="nice1"}
+ti["95"] = ti[" +"] .. {"st_door_a", name="nice2"}
+ti["96"] = ti[" +"] .. {"st_fourswitch", state=WEST, target_2="transfer", name="nice3", action_2="flip"}
+ti["97"] = ti[" +"] .. {"st_oneway_black", state=WEST, name="transfer"}
+ti["98"] = ti[" +"] .. {"st_laserswitch"}
+ti["99"] = ti[" +"] .. {"st_laser_n", name="lasertunier#"}
+ti["_1"] = ti[" !"] .. {"st_switch", target="sea1"}
+ti["_2"] = ti[" +"] .. {"st_door_a", name="sea1"}
+ti[": "] = {"st_plaster"}
+ti["< "] = {"st_yellow"}
+ti["= "] = {"st_oxyd_d"}
+ti["> "] = {"st_panel"}
+ti["? "] = {"st_passage_black_cross"} .. ti{"it_document", text="text13"}
+ti["@ "] = {"st_oneway_w"}
+ti["A "] = {"st_oneway_e"}
+ti["B "] = {"st_oneway_s"}
+ti["C "] = {"st_redmarble"}
+ti["E "] = {"st_scissors"}
+ti["D "] = {"st_door", faces="ew"}
+ti["F1"] = ti[" !"] .. {"st_door", faces="ns", name="romans"}
+ti["F2"] = ti[" !"] .. {"st_door", faces="ns", name="loser"}
+ti["G "] = {"st_grate_cross"}
+ti["H "] = {"st_ghost_break"}
+ti["I "] = {"st_disco_dark"}
+ti["J "] = {"st_rotator_ccw"}
+ti["K "] = {"st_boulder_n"}
+ti["P "] = {"st_boulder_s"}
+ti["L "] = {"st_boulder_e"}
+ti["M "] = {"st_boulder_w"}
+ti["O "] = {"st_oneway_black", state=WEST}
+ti["a "] = {"it_bottle"}
+ti["i0"] = ti[" !"] .. {"st_granite_hollow"}
+ti["i3"] = ti[" '"] .. {"it_weight"}
+ti["i4"] = ti["i0"] .. {"it_coin_l"}
+ti["i5"] = ti[" !"] .. {"it_sword"}
+ti["i6"] = ti["i5"] .. {"st_window_s", secure=true}
+ti["i7"] = ti["i5"] .. {"st_window_n", secure=true}
+ti["i8"] = ti[" !"] .. {"st_window_s", secure=true}
+ti["i9"] = ti[" !"] .. {"st_window_n", secure=true}
+ti["c "] = {"it_glasses"}
+ti["e "] = {"it_glasses_broken"}
+ti["g "] = {"it_hill_s"}
+ti["f "] = {"it_flag_white"}
+ti["h "] = {"it_hammer"}
+ti["j "] = {"it_sword"}
+ti["k "] = {"it_magicwand"}
+ti["l "] = {"it_cherry"}
+ti["n "] = {"it_shogun_s"}
+ti["t "] = {"it_strip", connections="ew"}
+ti["u0"] = ti[" !"] .. {"it_burnable_burning"}
+ti["u1"] = ti[" !"] .. {"it_drop"}
+ti["u2"] = ti[" !"] .. {"it_seed"}
+ti["u3"] = ti[" !"] .. {"it_burnable_oil"}
+ti["u4"] = ti[" $"] .. {"it_coffee"}
+ti["u5"] = ti[" #"] .. {"it_umbrella"}
+ti["u6"] = ti[" #"] .. {"it_blocker"}
+ti["i2"] = ti[" #"] .. {"it_trigger", action={"turn", "turn"}, target={"lilli1","mizzi1"}}
+ti["u7"] = ti[" &"] .. {"it_springboard"}
+ti["u8"] = ti[" !"] .. {"it_bag"}
+ti["u9"] = ti[" !"] .. {"it_spoon"}
+ti["ua"] = ti[" !"] .. {"it_ring"}
+ti["p "] = ti[" !"] .. {"st_disco_light"}
+ti["q "] = ti[" !"] .. {"st_brownie"}
+ti["kk"] = ti[" !"] .. {"st_knight"}
+ti["mm"] = ti[" !"] .. {"st_thief"}
+ti["dd"] = ti[" #"] .. {"st_death"}
+ti["di"] = ti[" #"] .. {"st_death_invisible"}
+ti["ll"] = ti[" $"] .. {"st_disco_light"}
+ti["i1"] = ti["p "] .. {"it_cherry"}
+ti["N "] = {"st_laser_w", name="lilli1", state=ON}
+ti[") "] = {"st_laser_e", name="mizzi1", state=ON}
+ti["superwormy"] = ti[" !"] .. {"it_wormhole", name="s%%", destination="y%%", range=1, strength=1}
+ti["hyperwormy"] = ti[" !"] .. {"it_squashed", name="y%%"}
+ti["superkey"] = ti[" !"] .. {"it_key", name="w%%", code="z%%"}
+ti["hyperkey"] = ti[" !"] .. {"st_key", code="z%%", action="toggle", target="j%%"}
+ti["festival"] = ti[" !"] .. {"st_door", faces="ew", name="j%%"}
+ti["supervortex"] = ti["p "] .. {"it_vortex_open", name="v%%", destination="b%%"}
+ti["hypervortex"] = ti["q "] .. {"it_vortex_open", name="b%%", destination="v%%"}
+ti["d1"] = ti[" !"] .. {"it_document", text="text1"}
+ti["d2"] = ti[" !"] .. {"it_document", text="text2"}
+ti["d3"] = ti[" !"] .. {"it_document", text="text3"}
+ti["d4"] = ti[" !"] .. {"it_document", text="text4"}
+ti["d5"] = ti[" !"] .. {"it_document", text="text5"}
+ti["d6"] = ti[" !"] .. {"it_document", text="text6"}
+ti["d7"] = ti[" !"] .. {"it_document", text="text7"}
+ti["d8"] = ti[" !"] .. {"it_document", text="text8"}
+ti["d9"] = ti[" !"] .. {"it_document", text="text9"}
+ti["^1"] = ti[" !"] .. {"it_document", text="text11"}
+ti["^2"] = ti[" !"] .. {"it_document", text="text12"}
+ti["d0"] = ti[" !"] .. {"it_document", text="text10"}
+ti["dg"] = ti["  "] .. {"it_flag_white"}
+ti["^4"] = ti[" !"] .. {"st_fake_oxydd"}
+ti["^5"] = {"fl_slope_ps"}
+ti["^9"] = {"fl_slope_pn"}
+ti["^0"] = {"fl_slope_pw"}
+ti["^6"] = ti["^5"] .. {"st_break"}
+ti["^3"] = {"fl_ice"}
+ti["^7"] = {"it_extralife"} .. ti["^3"]
+ti["^8"] = ti["^3"] .. {"it_document", text="text14"}
+ti["X "] = {"#ac_marble_black"}
+ti["r "] = {"#ac_top", range=1, strength=7}
+ti["^r"] = ti["r "] .. ti["^3"]
+
+railway1 = res.train(ti,{"ee", edge=true}, {"ea", train={" #", " 0", orientation=WEST, length=5}})
+railway2 = res.train(railway1,{"eh"}, {"ed", train={" #", " 0", orientation=EAST, length=6, interval=0.3}})
+railway3 = res.train(railway2,{"ei", edge=true}, {"ej", train={" #", " 0", orientation=WEST, length=3}})
+railway4 = res.train(railway3,{"ek", edge=true}, {"el", train={" #", " 0", orientation=SOUTH, length=3}})
+
+local autotiler = res.autotile(railway4, {"v", "supervortex"} ,{"b", "hypervortex"} ,{"s", "superwormy"}, {"y", "hyperwormy"}, {"w", "superkey"}, {"z", "hyperkey"}, {"j", "festival"})
+
+wo(res.composer(autotiler), "  ", {
+    "!! ! ! ! ! ! !+! ! ! !0! !#!#!0!0!+!0!!!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!",
+    " ! ! ! ! ! !#!+! !ei0###ej0#0#####+# #0! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !0! ! ! #1! !1! !1! !1! !1! !1! !1! !0!0!",
+    " ! ! ! ! ! ! ! !+! #+!0!+!+!*!0!+!####0! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !0! ! ! #l(l(l(l(l(l(l(l(l(l(l(l(l( !0!0!",
+    " ! ! ! ! ! ! !+! ! # # # # # # # # #ei # # # # # # # # # # # # # # # ! ! ! !0! ! !1#l(.!.!.!.!.!.!.!.!.!.!.!l(1!0!0!",
+    " ! ! ! ! !ek+#0# # #+!#!#!1! !0!+! & & & &d3 ! ! #:!:!:!:!:!:!:!:! # !b2 ! !0! ! ! #l(.!~!~!~!~!~!~!~!~!~!~!l( !0!0!",
+    " ! !#! ! !+# !0!#! # !+! !#! !+!0! ! !0! & !1!1! #2! !;1<!<!<! !2! # ! ! ! !0! ! !1#l(.!~!~!~!~!~!~!~!~!~!~!l(1!0!0!",
+    " ! !#! ! !## !0!0! #0!w0.).).).).).) !0! & &1&u7 # ! !91w1 !92 ! !t#t! & & & & &t(t#l(.!~!~!~!~!~!w2~!~!~!~!l(4's20!",
+    " ! ! ! ! !el ! !0! #+! !.) & & & &.)0!0! ! !1!1! #2! !;2<!<!<! !2! # ! ! ! !0! ! !1#l(.!~!~!~!~!~!~!~!~!~!~!l(1!0!0!",
+    " ! ! ! !#!0#*#+#+#ek+! !.) &'! ! &.) !0! ! ! ! ! #:!:!:!:!:!:!:!:! # ! ! ! !0! ! ! #l(.!~!~!~!~!~!~!~!~!~!~!l( !0!0!",
+    "#!#! ! !#! !'! ! ! # (#!.) &'!,! &.)0!0! ! ! ! ! # # # # # # # # # # # # # # # # #1#l(.!.!.!.!.!.!.!.!.!.!.!l(1!0!0!",
+    " ! ! ! !#! !,!'! ! # # & & &'! ! &.) !0! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !0! ! !d4l(l(l(l(l(l(l(l(l(l(l(l(l( !0!0!",
+    " ! ! ! ! #b1 ! ! ! # # !.) &'! ! &.) !0! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !0! ! ! !1! !1! !1! !1! !1! !1! !1! !0!0!",
+    " # # # # # # # # # # # !.) &'! ! &.) !!!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!",
+    " # # # # # # # ! ! ! # !.) &'!>! &.) !0!/!/(/!/!/!/!#! ! ! ! ! ! !0!0!0!0!0!0!+!+!+! # # # # # # # # # # # #+!+!+!0!",
+    " # # !#!#! ! ! ! ! ! #2!.) &'! ! &.)0! #/! !;3 (/! !#! ! ! ! ! ! ! ! !0!0!0!0!+!+! #.)J).).).).).).).).#.).).).)+!0!",
+    " # !#! !#!#! !d2 &1&90 & & &'! ! &.) !0!/!/!/!/!2!2!2!2!2!2!2!2!2!2! ! ! !0!0!+!+! #.)i2u6u6u6u6u6L#u6u6L#u6i2J)+!0!",
+    " # !#!'! ! ! !#!#! # #2!.) &'! ! &.) !+!#!/!#! !2! ! ! ! ! ! ! ! ! !2! ! ! !0!+! # !.)u6A!B!7!7!7!7!7! #B!w4u6.)+!0!",
+    " ##!'! !'!#! ! ! # # ! !.) &'!,! &.)+!0!y2#! (2!1!2! + + + + !:! ! ! !2! ! !+!+! #d6.)u6A!B!@!@!@!!!@! #A!A!u6.)+!0!",
+    " ##!'!;0'!#! ! ! # ! ! !.) & & & &.) !0!0!d5 !1!931! + + + +:!>!:!:!w3E!2!e!u21! , ,,,u6A!!!7! # #N# # #A!1!u6.)+!0!",
+    " # ##!'! !y1 ! ! # ! ! !.).).).).).) ! #0! ! !2!1!2! + + + + !:! ! ! !2! ! !+!+! # !.)u6A!B!@! #@!!!@!@!A!A!u6.)+!0!",
+    " # ##! !#!#! ! # # ! ! ! ! !0!0! !+! # #0! ! ! !2! ! ! ! ! ! ! ! ! !2! ! ! !+!+! # !.)u6A!B!7! #7!7!7!7!A!A!P#.)+!0!",
+    " # # ! ! ! ! # # ! ! ! ! ! ! ! !0! ! # #0!0!5! !2!2!2!2!2!2!2!2!2!2! ! ! ! !+!+! # !.)K#A!B!@! # !A!A!A!A!A!u6.)+!0!",
+    " # # ! ! # # # ! ! ! ! ! ! ! !0! ! # # #0!0!0! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !+!+!+! #J)i2u6u6u6 &M#u6u6u6u6u6i2.)+!0!",
+    " # # # # # # # # # # # # # # #%# # # # #0!0!0!0!0! ! ! ! ! ! ! ! ! ! ! !b3 !+!+!+! #.).).).).)G&.).).).).).)J).)+!0!",
+    " #%#%#%#%#%#%#%#%#%#%#%#%#%#%#%# # # #0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!+!+!+!+! # # # # # & # # # # # #+!+!+!0!8!8!8!8!8!8!8!8!8!8!8!8!8!8!8!8!8!8!8!",
+    " # # # ! # ! # ! # # !,!,!,!,!%! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !+!0! ! ! ! ! ! ! ! 0 ! ! !I! , ! ! !I!0!8!8!8!8!8! *^0 *8! * ! *8!^3^3^3^3^38!",
+    " # # # # # # # ! ! ! ! ! !,!,!,!,! ! !b8 ! ! ! !1!1! ! ! !1!1! ! ! !1!1! ! !+!0! ! !%! ! ! ! ! 0 0I!mm !%!8!I!8! !0!8! * ! *8!^5r!^98!^58!^98!^3^3^3^r^38!",
+    " # # # ! # # ! !*!*!*! ! ! ! !,!,!,!,! ! ! ! ! !1!1! ! ! !1!1! ! ! !1!1! ! !+!0! !I! ! !%!2! ! !%! ! ! ! ! !%!8!I!0!8!^58!^98!^5r!^98!^68!^98!^38!^3^3^38!",
+    " # ! ! ! ! ! !i1*!i4*!.!*!*!v0 !v6,!,!,!,! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !+!0!%! !I! ! ! ! !I! 0H!%! !I!%!8! # !0!8!^58!^98!^58!^98!^58!^98!^38!^3^38!8!",
+    " ! ! ! !*!*!.! !.!/!X!/!-!*! ! !v5 !i1,!,!,!,! ! ! ! ! ! ! ! ! ! !5! ! ! ! !+!0! ! !H! !I! ! ! ! ! !mmI!E! ! ! ! !0!8!^58!^98!^68!^98!^58!^98!^58!^3^3^38!",
+    " ! ! ! !*!-!/! !i3u1^2.!*!*! ! ! ! ! !.!.!,!,!,!,!,!,! ! ! !r!r!5!=!5!r!r! !+!0! ! !+!%! ! !H! 0 0I! ! !%!I!8!8!8!0!8!^58!^98!^58!^98!^58!^98!^58!^r^3^3^4",
+    " !v3v2 !*!*!.! ! ! !v1 !/! !i1 ! ! ! !.!.!u8 !,!,!,! !,! ! !r!?!7!A!B!?!r! !+!0!u1mm ! ! ! ! !d0 ! ! !%!8! ! * !I!0!8!^58!^98!^58!^98!^58!^98!^58!^3^3^38!",
+    " ! ! ! ! ! ! !.!/!.!v4*!-!*! ! !v7v8 !,!,!,!,!,!r!r!,!,! ! !5!@!7!A!B!7!5! !+!0!%! !%! ! !%!I! 0H! ! ! !I!8!8!8!I!0!8!^58!^98!^58! * ! *8!^98!^58!8!^3^38!",
+    " ! !v9 ! ! ! !*!i4*! !*!*!*! ! ! !,!,!,!,! !s17!r!i5,!,! !5!=!@!7!?!B!7!=!5!+!0! !8!I!+!H! !mm 0 0%! !2! !%!h!8! !0!8!^58!^98!^58!r!r!r!8!^98!^58!^3^3^3^4",
+    " # ! ! ! ! ! !*!*!*! ! ! ! ! !,!,!,!,! !,!,!,!,!,!,! !,! ! !5!@!7!A!B!7!5! !+!0! ! !H! !%! !%! ! !H!%! ! ! ! !8!dg^0 ! *8!^9r!^58!8!8!8!8!^98!^58!^7^3^38!",
+    " # # # # # ! ! ! ! ! ! ! !,!,!,!,!%!%!,!,!,!,!,!,!,!,!,! ! !r!?!7!A!B!?!r! !+!0! !H!I! !ua ! !H!H0 ! ! !I!mm !8!I!0!8!8!8! *^0 *^0 #d1 #^6 *^0 *8!^3^3^88!",
+    " #%#%#%#%#%#%#%#%#%#%#%#%#%#%#%!%!%!%!*! ! ! ! ! ! ! ! ! ! !r!r!5!=!5!r!r! !+!0!H!H!H!H!H!H!H!H! 0n!H!H!H!H!H!8!8!0!8!8!8!8!8!8!8!8!8!8!8!8!8!8!8!^48!^48!",
+    " # # # # # # # # # # # # # # # # # # #*! ! ! ! ! ! ! ! ! ! ! ! ! !5! ! ! ! !+!0! !C!C!C! !<!<!<! + ! # - # # - # # #",
+    " # # # # # # # # # # # # # # # # # # #*! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !+!0!+!;4 (@! !<!w594 +n! # # # # # # # #",
+    " # # # # # #dd # # # # # # # # # # # #*! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !+!0! !C!C!C! !<!<!<! + ! # - # # - # # #",
+    " # # #ehed # # # # # # # # # # # # # #*!3!98z198z29898z39898z598z698+!C!F1C!+!0! ! !b4 ! ! ! !d7 +n! # # # # # # # #",
+    " # # # # # # # # #ehdi # #eheh # # # #*!C! !i5 !i6i8i6i8i6i8i6i8i6i8C! ! ! !C!0! !C!C!C! !<!<!<! + !C!C!C!C!C! # # #",
+    " # # #di # # # # # #eh # # # # # # #eh ! ! !;9 !j1j2j3j4j5j6j7j8j9j0 , !;7 !b0 !+!;5 (@! !<!9695 +n!A!k!97s3_1 # # #",
+    " # #eh # # # # # # # # # # # # #dd # #*!C! !i5 !i7i9i7i9i7i9i7i9i7i9C! ! ! !C!0! !C!C!C! !<!<!<! + !C!C!C!C!C! # # #",
+    " # # # # # # # # # # # # # # # # #eh #*!3!99z099z99999z49999z899z799+!C!F2C!+!0! ! ! ! ! ! ! ! ! +n! ! ! ! ! ! # # #",
+    " $ # # #dd # # # ! # # # #dd # # # # #*!u9u9u9u9u9u9u9u9u9u9u9u9u9u9u9 ! ! !*!0!u4u4u4u4u4u4u4u4y3u4u4u4u4u4u4 # # #",
+    " $ $ $ $ $ $ $r$ $ $r$ $ $ $ $ $ # # #*!b7 ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !*! #u5u5u5u5u5u5u5u5_2u5u5u5u5u5u5 # # #",
+    " $ $ $ $r$ $ $ $ $ $ $ $ $r$ $ $ # # #*! ! !r! !r! !r! !r! !r! !r! ! ! ! ! !*! #ee # #ea # # # # # # # # # # # # # #",
+    " # # # # # # # # ! # # # # # # # # # #*!*!*!*!*!*!*!*!*!*!*!*!*!*!*!*!*!*!*!*! # # # # # # # # # # # # # # # # # # #",
+    " # #a!)!a!a!a!a!e! # # # # # # # # !&! ! !0!i1b5 !8!8!8!8!8!8!8!1! !1!8! ! !:! # # # # # # # # #ee # # # # # # # # #",
+    " # # ! ! ! ! # # # # # # ! !&! !&! !&! !0!0! !8!8!8!8!8!8!8!8! ! !1! !8! ! !:! # # # # # # # # # # # # # # # # # # #",
+    " # # !b6 ! # # # # # ! !,! !&!&!&! !&! !0! ! ! !8! !8!8!8! !8! * !8! ! !8! !:!u3 ( (u3u3u3u3u3u3u3u3u3u3u0 (b9w62!0!",
+    " # #w9 # # # # ! ! !,! !&! !&! !&!&!&! !0! ! !8! !8!8! ! ! !8! ! *8!1! !8! !:!:!:!:!:!:!:!:!:!:!:!:!:!:!:!G!:!1!:!0!",
+    " # # # # # ! ! !,! !&! !&!&!&! !&! !&! ! ! ! !8! !8! ! !1! !8! ! !8!8! *8!8!:!:!:!a.G.a.G.a.:!a.:.a.:.a.:.a.a! !:!0!",
+    " # # ! ! ! ! ! !&!$! !$!&!&!&!&!&!&!&! ! ! !0!8!8! ! !8! ! ! !8!1! !8! ! !8!8! !:! .:.:.:.G.:. .G. .:. . . . ! !:!0!",
+    "$!$!$!&!&!&!&!&! ! !&! !&! !&!&!&!w8&! ! ! !0!8!8! ! !8!8! ! *8!8! ! *8!1! !G! !:!G.G. .:. .G. _:. .:. .:. .:!:!:!0!",
+    " ! !a! ! ! ! !$! ! !$! !$! !$!h!&!$!&! ! !*!*!*!8!i1 * !8! ! ! !8!8! ! !8!8!8!G!:! .:. _:!:.:. .:.G.:. .:. . ! !:!0!",
+    " ! !&!&!&!&!&!&!&!&!&!&!&!1!&!1!&!1!&! ! !*!4!*!d9 !*!/!8!8! !1! !8!8! * ! !:! _G!:.:. .G. .:.:.:. _G. .:. .:!G!:!0!",
+    " ! !a!a!a!a!a!a!e! ! !^1 ! !/! !/! !/! ! !*!/!/! * !*!4!8!8!8!8! * !8!8! !1!:!:!G! .G.:.:. .:. .:. .:. .:. _ !d8:!0!",
+    " !&!&!&!&!&!&!&!&!&!&!&!&!&!&!&!&!&!&! ! ! */!/! !*!*!8!8!8! !8!8! ! !-! ! !:! !:! .G. .G.G.:. .:. .:. .:. .:!r!:!0!",
+    "!! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !!! !4!/!4!w7 *8!8!8!8!8! !8!8!8!8!8!8!:!:!;8:!:!:!:!:!:!:!:!:!:!:!:!:!:!:!:!0!"})
+
+wo:shuffleOxyd()
+
+function fire()
+    wo:drawMap(ti, po(42, 51), "  ",{"u3u3u3u3u3u3u3u3u3u3u0"})
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="subtitle">
+        <el:english el:translate="true" el:comment="not translate the names from Marbleix and Pearlix"/>
+        <el:translation el:lang="de">Marbleix und Pearlix I</el:translation>
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true" el:comment="not translate 'en Tour'">Doping 'en Tour' not allowed for taking shortcuts, doping just allowed for self defence!</el:english>
+        <el:translation el:lang="de">Doping 'en Tour' nicht erlaubt f?r ein Abk?rzen, Doping ist nur erlaubt zur Selbstverteidigung!</el:translation>
+      </el:string>
+      <el:string el:key="text2">
+        <el:english el:translate="true" el:comment="not translate Rotomagus">Rotomagus - Rouen</el:english>
+        <el:translation el:lang="de">Rotomagus - Rouen</el:translation>
+      </el:string>
+      <el:string el:key="text3">
+        <el:english el:translate="true" el:comment="not translate Lutetia">Lutetia - Paris</el:english>
+        <el:translation el:lang="de">Lutetia - Paris</el:translation>
+      </el:string>
+      <el:string el:key="text4">
+        <el:english el:translate="true" el:comment="not translate Camaracum">Camaracum - Cambrai</el:english>
+        <el:translation el:lang="de">Camaracum - Cambrai</el:translation>
+      </el:string>
+      <el:string el:key="text5">
+        <el:english el:translate="true" el:comment="not translate Durocortorum">Durocortorum - Rheims</el:english>
+        <el:translation el:lang="de">Durocortorum - Reims</el:translation>
+      </el:string>
+      <el:string el:key="text6">
+        <el:english el:translate="true" el:comment="not translate Lugdunum">Lugdunum - Lyons</el:english>
+        <el:translation el:lang="de">Lugdunum - Lyon</el:translation>
+      </el:string>
+      <el:string el:key="text7">
+        <el:english el:translate="true" el:comment="not translate Nicae">Nicae - Nice</el:english>
+        <el:translation el:lang="de">Nicae - Nizza</el:translation>
+      </el:string>
+      <el:string el:key="text8">
+        <el:english el:translate="true" el:comment="not translate Massilia">Massilia - Marseilles</el:english>
+        <el:translation el:lang="de">Massilia - Marseille</el:translation>
+      </el:string>
+      <el:string el:key="text9">
+        <el:english el:translate="true" el:comment="not translate Aginum">Aginum - Agen</el:english>
+        <el:translation el:lang="de">Aginum - Agen</el:translation>
+      </el:string>
+      <el:string el:key="text10">
+        <el:english el:translate="true" el:comment="not translate Detour de Tour">Detour de Tour - Detour of the Tour</el:english>
+        <el:translation el:lang="de">Detour de Tour - Umleitung der Tour</el:translation>
+      </el:string>
+      <el:string el:key="text11">
+        <el:english el:translate="true" el:comment="not translate Burdigala">Burdigala - Bordeaux</el:english>
+        <el:translation el:lang="de">Burdigala - Bordeaux</el:translation>
+      </el:string>
+      <el:string el:key="text12">
+        <el:english el:translate="true" el:comment="not translate Gallia est omnis">Gallia est ommnis ... - Whole Gaul is ...</el:english>
+        <el:translation el:lang="de">Gallia est ommnis ... - Ganz Gallien ist ...</el:translation>
+      </el:string>
+      <el:string el:key="text13">
+        <el:english el:translate="true" el:comment="not translate Veni Vidi Vici">Veni, vidi, vici - I came, I saw, I conquered</el:english>
+        <el:translation el:lang="de">Veni, vidi, vici - Ich kam, ich sah, ich siegte</el:translation>
+      </el:string>
+      <el:string el:key="text14">
+        <el:english el:translate="true">Welcome in L?Alpe d?Huez. Sorry, it is not yet stage of the Tour</el:english>
+        <el:translation el:lang="de">Willkommen in L?Alpe d?Huez. Schade, es ist noch kein Etappenziel der Tour</el:translation>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/mecke04_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_ix/mecke38_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/mecke38_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/mecke38_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,96 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Reflections I" el:subtitle="" el:id="mecke_sess01"/>
+      <el:version el:score="1" el:release="1" el:revision="13" el:status="released"/>
+      <el:author  el:name="mecke" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2009 mecke, dev0</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="true"/>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["AllowSuicide"] = false
+
+ti[" "] = {"fl_rock"}
+ti["~"] = {"fl_water"}
+ti["_"] = {"fl_swamp"}
+ti["."] = {"st_flat_breakable"}
+ti["x"] = {"st_rawglass_quad"}
+ti["#"] = {"st_granite"}
+ti["N"] = {"st_laser_n", "laserN"}
+ti["n"] = {"st_switch_white", target = {"laserN", "whitesource"}}
+ti["S"] = {"st_laser_s", "laserS"}
+ti["s"] = {"st_switch_black", target = "laserS"}
+ti["B"] = {"st_passage_black_frame"}
+ti["W"] = {"st_passage_white_frame"}
+ti["M"] = {"st_mirror_slab_s", movable = true}
+ti["m"] = ti["_"] .. ti["M"]
+ti["T"] = {"st_thief", "thieves#"}
+ti["t"] = {"st_thief"}
+ti["C"] = {"st_chess_black"}
+ti["a"] = {"it_magicwand"}
+ti[";"] = {"it_dynamite"}
+ti[":"] = ti["."] .. ti[";"]
+ti["O"] = {"st_oxyd_a", oxydcolor = OXYD_RED}
+ti["@"] = {"#ac_marble_black"}
+ti["*"] = {"#ac_marble_white"}
+ti["w"] = ti["*"] .. {"it_vortex_closed", "whitesource", destination = "whitegate"}
+ti["u"] = {"it_vortex_closed", "whitegate", autoclose=true}
+if wo["IsDifficult"] then
+    ti["I"] = {"st_stoneimpulse_movable"}
+    ti["+"] = {"st_flat_movable"}
+    ti["-"] = {"fl_water"}
+    ti["<"] = {"fl_inverse"}
+    ti["D"] = ti[";"]
+    ti["!"] = ti[" "]
+    ti["y"] = ti["~"] .. ti["w"]
+    ti["v"] = ti["u"]
+    ti["d"] = ti[";"]
+    ti["A"] = ti["a"]
+    ti["="] = {"it_burnable_oil"}
+    ti["e"] = ti[" "]
+else
+    ti["I"] = {"st_stoneimpulse"}
+    ti["+"] = {"st_flat_breakable"}
+    ti["-"] = ti[" "]
+    ti["D"] = {"st_dispenser_dynamite"}
+    ti["<"] = {"fl_yinyang_yang_invisible"}
+    ti["!"] = ti[";"]
+    ti["y"] = ti["*"]
+    ti["v"] = ti[" "]
+    ti["d"] = ti[" "]
+    ti["A"] = ti[" "]
+    ti["="] = ti[" "]
+    ti["e"] = {"it_spade"}
+end
+
+wo(ti, " ", {
+    "##S###############O#",
+    "#;........#D.#  e#W#",
+    "#........M##.#!# B #",
+    "#.:..M...:.....# xI#",
+    "#.x:..#....##.M..#=#",
+    "s at .-.;.+.x.+.....#A#",
+    "################## #",
+    "ny   a   ~      v#d#",
+    "#     <     <<_  #=#",
+    "# TTTmTTTTTTTTTTTxI#",
+    "# ~a     _<< <a< W #",
+    "#at       <C < < #B#",
+    "##N##II###########O#"})
+
+local thieves = no["thieves#*"]:shuffle()
+if wo["IsDifficult"] then
+    wo[thieves:sub(2)] = ti[";"]
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/mecke38_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_ix/wesley02_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/wesley02_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_ix/wesley02_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,55 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Meditation Sorting" el:subtitle="" el:id="20080821wcr001"/>
+      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
+      <el:author  el:name="Helge Blohmer" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2008 Helge Blohmer</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:code>New API converted by R. Lamprecht</el:code>
+      </el:comments>
+      <el:score el:easy="-" el:difficult="11:00"/>
+    </el:info>
+    <el:luamain><![CDATA[
+ti[" "] = {"fl_metal_7", friction=4.0}
+ti["#"] = {"st_granite"}
+ti["o"] = {"it_meditation"}
+ti["+"] = {"#ac_pearl", essential=INDISPENSABLE}
+
+if wo["IsDifficult"] then
+    ti["x"] = {"#ac_killer_white", adhesion=0.95}
+    ti["X"] = ti["x"]
+    ti["*"] = ti["+"]
+    ti["O"] = ti["o"]
+    ti["E"] = ti[" "]
+else
+    ti["x"] = {"#ac_killer_black", adhesion=0.95}
+    ti["X"] = ti[" "]
+    ti["*"] = ti[" "]
+    ti["O"] = ti[" "]
+    ti["E"] = ti["o"]
+end
+
+wo(ti, " ", {
+    "####################",
+    "#                  #",
+    "# o              o #",
+    "#                  #",
+    "#  OE   *x+X   EO  #",
+    "#       x+x+       #",
+    "#   O   +x+x   O   #",
+    "#       x+x+       #",
+    "#  OE   *x+X   EO  #",
+    "#                  #",
+    "# o              o #",
+    "#                  #",
+    "####################"})
+ ]]></el:luamain>
+    <el:i18n>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/wesley02_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/data/levels/enigma_tutorial/adv_tutorial.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_tutorial/adv_tutorial.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Advanced Tutorial" el:subtitle="" el:id="m_tutor/adv_tutorial"/>
-      <el:version el:score="1" el:release="2" el:revision="4" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="8" el:status="stable"/>
       <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2004 Jacob Scott</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -56,7 +56,7 @@
 ti["BS"] = {"st_boulder", orientation = SOUTH}  -- but it's not a must.
 ti["D1"] = {"st_door", "d1", faces = "ew"}  -- As another aided recall, the number in the name of
 ti["D2"] = {"st_door", "d2", faces = "sn"}  -- each door is used in the tilekey.
-ti["D3"] = {"st_door", "d3", faces = "sn"}
+ti["D3"] = {"st_door", "d3", faces = "we"}
 ti["D4"] = {"st_door", "d4", faces = "sn"} .. ti[". "]
 ti["D5"] = {"st_door", "d5", faces = "sn"} .. ti[". "]
 ti["D6"] = {"st_door", "d6", faces = "sn"}
@@ -66,14 +66,14 @@
 ti["I "] = {"st_actorimpulse"} .. ti[". "]
 ti["K "] = {"st_knight"}
 ti["L "] = {"st_laser", "l1", state = OFF, orientation = WEST}
-ti["N1"] = {"st_oneway", color = WHITE, orientation = WEST} .. ti[". "]
+ti["N1"] = {"st_oneway", color = WHITE, orientation = WEST} .. ti["4 "]
 ti["N2"] = {"st_oneway", color = BLACK, orientation = NORTH} .. ti[". "]
 ti["N3"] = {"st_oneway", orientation = SOUTH} .. ti[". "]
-ti["N4"] = {"st_oneway", color = WHITE, orientation = SOUTH} .. ti[". "]
+ti["N4"] = {"st_oneway", color = WHITE, orientation = SOUTH} .. ti["2 "]
 ti["O "] = {"st_oxyd", flavor = "a"}
 ti["P "] = {"st_purplegray"}
 ti["Q "] = {"st_quake"}
-ti["R "] = {"st_brownie"} .. ti({"#ac_rotor", gohome = false, strength = 20, range = 8}) .. ti[". "]
+ti["R "] = {"st_brownie"} .. ti({"#ac_rotor", gohome = false, strength = 12, range = 8, prefercurrent=1.0}) .. ti[". "]
 ti["S "] = {"st_plop"}
 ti["S3"] = {"st_switch", target = "d3"}
 ti["SB"] = {"st_laserswitch", target = "b1"}
@@ -86,6 +86,7 @@
 ti["e*"] = {"it_document", text = "text%%"} .. ti[". "]
 ti["l "] = {"it_extralife"}
 ti[".l"] = ti["l "] .. ti[". "]
+ti[".F"] = ti["F "] .. ti[". "]
 ti["p "] = {"#ac_pearl", owner = DEFAULT, controllers = DEFAULT} .. ti[". "]
 ti["s "] = {"it_spade"}
 ti["t "] = {"#ac_top", strength = 10, range = 7}
@@ -94,7 +95,8 @@
 ti["t4"] = {"it_trigger", target = "d4"} .. ti[". "]
 ti["t5"] = {"it_trigger", target = "d5"} .. ti[". "]
 ti["t6"] = {"it_trigger", target = "d6"} .. ti[". "]
-ti["tR"] = {"it_trigger", invisible = true, target = "call_rotor"} .. ti[". "]  -- See below for callback function.
+ti["tR"] = {"it_sensor_exit", invisible = true, target = "call_rotor"} .. ti["R "]  -- See below for callback function.
+ti[".R"] = {"fl_hay", "rotortext"}
 ti["w "] = {"it_magicwand"}
 ti["x "] = {"it_spoon"} .. ti[". "]
 ti["y "] = {"it_dynamite"}
@@ -125,24 +127,24 @@
     "# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # D6# # # # # # # # # # # # # # # # # # # # # # # # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # # # # # # # # # # # # # # # # # # # # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#D5.#. . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # Q                                 Q # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
     "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#.#.#.#D4.#. . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #               O     O               # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#I .#.#.#.#.#~ ~ ~ ~ ~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . t6. . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #           O             O           # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#eQ. . . . I ~ ~ ~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #       O                     O       # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#. .#.#.#. .#~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . .G. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #   O                             O   # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#. .#~ .#. .#.#.#. . . . . . . . . . . . . . . . . . . . . . . .GR tR. . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #                                     # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#N4.#~ .#. 4 N1. . . . . . . . . . . . . . . . . . . . . . . . . .G. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #   O                             O   # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#2 .#~ .#N2.#.#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !         O                     O       # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ .#.#.#.#.#.#.#.#.#.#I 2 .#~ I p 4 . . . eX. . . . . . . . . . . . . . . . .l. . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #           O             O           # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ .#3 4 4 4 4 4 4 4 4 4 7 .#.#.#.#.#x . . . . . . . . . . . . . . . . . . . . . . eR. . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #     dV        O     O               # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ .#2 I .#.#.#.#.#.#.#.#.#.#. 4 4 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # Q                                 Q # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
-    "~ ~ ~ ~ ~ .#2 .#~ ~ ~ ~ ~ ~ ~ ~ ~ .#. # # # D3# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # ",
-    "~ ~ ~ ~ ~ .#2 .#~ ~ ~ ~ ~ ~ ~ ~ ~ .#. #                                     #                   X                 #             ~ ~ ~ ~         dGS ~ ~                               # ! ! ! #                     r r r r r r r r # ",
-    "~ ~ ~ ~ ~ .#2 .#~ ~ ~ ~ ~ ~ ~ ~ ~ .#. #                                     #                                     #             ~ ~ ~ ~           S ~ ~                               # ! ! ! #                     r r r r r r r r # ",
-    "~ ~ ~ ~ ~ .#2 I .#.#.#.#.#.#~ ~ ~ .#! #                                     #                                     #   +         ~ ~ ~ ~     B G   S ~ ~                               # ! ! ! # m m m m m m m m m # r r r r r r r r # ",
-    "~ ~ ~ ~ ~ .#9 6 6 6 6 6 1 .#~ ~ ~ .#! #               dA                    #             X                       #       +     ~ ~ ~ ~     + B   S ~ ~             P P P             # ! ! ! # m m m m m m m m m #                 # ",
-    "~ ~ ~ ~ ~ .#.#.#.#.#.#I 2 .#~ ~ ~ .#N3#                           #         #             X                       #             ~ ~ ~ ~           S ~ ~           P P ! P P           # # # # #             dJ    #                 # ",
-    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#2 .#~ ~ ~ .#t5#                   @       #               dC      X                 dD    F       +     ~ ~ ~ ~   dF      S ~ ~       dH  P ! ! ! P           t       F   dI              # i i i i i i i i # ",
-    "~ ~ ~ .#.#.#~ ~ ~ ~ ~ .#2 .#~ ~ ~ .#.##                           #   dW    #                         X           #     +       ~ ~ ~ ~           S ~ ~           P P ! P P           # # # # #                   # i i i i i i i i # ",
-    "~ ~ ~ .#t4.#~ ~ ~ ~ ~ .#2 .#~ ~ ~ ~ ~ #                                     #                         X           #             ~ ~ ~ ~     + B   S ~ ~             P P P             # ! ! ! #                   # i i i i i i i i # ",
+    "~ .#.#.#.#.#.#.#.#.#.#.#.#.#.#I .#.#.#.#.#.#~ .#I .#~ .#.#.#. . . . . . . . . . . . . . . . . . . . . . t6. . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #           O             O           # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ I . . . . . . . . . . . . . eQ. . . . . I ~ .#p .#.#.#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #       O                     O       # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#.#.#.#.#.#.#.#.#.#.#.#. .#.#.#.#. .#~ .#8 .#. . . . . . . . . . . . . . . . . . . . . . .G. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #   O                             O   # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#. .#~ ~ .#. .#.#.#. . . . . . . . . . . . . . . . . . . . . . . .GtR. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #                                     # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#N4.#~ ~ .#. 4 N1. . . . . . . . . . . . . . . . . . . . . . . . . .G. . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #   O                             O   # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#2 .#~ ~ .#N2.#.#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !         O                     O       # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ .#.#.#.#.#.#.#.#.#.#2 .#~ ~ I . 4 . . . eX. . . . . . . . . . . . . . . . .l. . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #           O             O           # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ .#3 4 4 4 4 4 4 4 4 7 .#.#.#.#.#.#x . . . . . . . . . . . . . . . . . . . .R. . eR. . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! #     dV        O     O               # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ .#2 I .#.#.#.#.#.#.#.#.#. . 4 . 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! # Q                                 Q # ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ",
+    "~ .#. .#~ .#2 .#~ ~ ~ ~ ~ ~ ~ .#. . . # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # ",
+    "~ .#. .#~ .#2 .#~ ~ ~ ~ ~ ~ ~ .#. .#.##                                     #                   X                 #             ~ ~ ~ ~         dGS ~ ~                               # ! ! ! #                     r r r r r r r r # ",
+    "~ .#I .#~ .#2 .#~ ~ ~ ~ ~ ~ ~ .#. .#.##                                     #                                     #             ~ ~ ~ ~           S ~ ~                               # ! ! ! #                     r r r r r r r r # ",
+    "~ ~ ~ ~ ~ .#2 I .#.#.#.#.#.#~ .#. .F. D3                                    #                                     #   +         ~ ~ ~ ~     B G   S ~ ~                               # ! ! ! # m m m m m m m m m # r r r r r r r r # ",
+    "~ ~ ~ ~ ~ .#9 6 6 6 6 6 1 .#~ .#. .#. #               dA                    #             X                       #       +     ~ ~ ~ ~     + B   S ~ ~             P P P             # ! ! ! # m m m m m m m m m #                 # ",
+    "~ ~ ~ ~ ~ .#.#.#.#.#.#I 2 .#~ .#! .#. #                           #         #             X                       #             ~ ~ ~ ~           S ~ ~           P P ! P P           # # # # #             dJ    #                 # ",
+    "~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ .#2 .#~ .#N3.#. #                   @       #               dC      X                 dD    F       +     ~ ~ ~ ~   dF      S ~ ~       dH  P ! ! ! P           t       F   dI              # i i i i i i i i # ",
+    "~ ~ ~ .#.#.#~ ~ ~ ~ ~ .#2 .#~ .#t5.#. #                           #   dW    #                         X           #     +       ~ ~ ~ ~           S ~ ~           P P ! P P           # # # # #                   # i i i i i i i i # ",
+    "~ ~ ~ .#t4.#~ ~ ~ ~ ~ .#2 .#~ .#.#.#.##                                     #                         X           #             ~ ~ ~ ~     + B   S ~ ~             P P P             # ! ! ! #                   # i i i i i i i i # ",
     "~ ~ ~ .#8 I .#.#.#.#.#I 2 .#~ ~ ~ ~ ~ #     dB                              #                         X           #   dE        ~ ~ ~ ~     B G   S ~ ~                               # ! ! ! # # # # # # # # # # # i i i i i i i i # ",
     "~ ~ ~ .#9 4 4 4 4 4 4 4 7 .#~ ~ ~ ~ ~ #                                     #                                     #             ~ ~ ~ ~           S ~ ~                               # ! ! ! # X           = = =                   # ",
     "~ ~ ~ .#.#.#.#.#.#.#.#.#.#.#~ ~ ~ ~ ~ #                                     #               X                     #             ~ ~ ~ ~           S ~ ~                               # ! ! ! # X           = = =                   # ",
@@ -181,8 +183,8 @@
 --    document set, no matter how often call_rotor is called.
 
 function call_rotor(is_on, sender)
-    if st(sender):exists() and (not sender._done) then
-        wo[no["d3"]] = {"it_document", text = "text%Z"}
+    if (not sender._done) then
+        wo[no["rotortext"]] = {"it_document", text = "text%Z"}
         sender._done = true
     end
 end

Modified: trunk/data/levels/enigma_tutorial/index.xml
===================================================================
--- trunk/data/levels/enigma_tutorial/index.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_tutorial/index.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="10100" network="false" owner="Enigma Team" release="1" revision="29" title="Tutorial"/>
+  <info enigma="1.10" group="Enigma" location="10100" network="false" owner="Enigma Team" release="1" revision="30" title="Tutorial"/>
 
   <attributes/>
 
@@ -71,7 +71,7 @@
     <level _seq="63" _title="Slalom Skiing" _xpath="enigma_ii/martin93_1" author="Martin Hawlisch" ctrl="force" easy="true" id="martin93" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="64" _title="Chess Stones" _xpath="./a_tut07_1" author="Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" ctrl="force" easy="false" id="c_tut01" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="65" _title="Bye!" _xpath="./a_tut06_2" author="Andreas Lochmann" ctrl="force" easy="false" id="a_tut06" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="66" _title="Advanced Tutorial" _xpath="./adv_tutorial" author="Jacob Scott" ctrl="force" easy="false" id="m_tutor/adv_tutorial" rel="2" rev="8" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_vi/index.xml
===================================================================
--- trunk/data/levels/enigma_vi/index.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vi/index.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="57" title="Enigma VI"/>
+  <info enigma="1.10" group="Enigma" location="10700" network="false" owner="Enigma Team" release="1" revision="58" title="Enigma VI"/>
 
   <attributes/>
 
@@ -65,7 +65,7 @@
     <level _seq="57" _title="Counterclockwise" _xpath="./ulf05_2" author="Ulf Stegemann" ctrl="force" easy="true" id="20070126ulf020" rel="2" rev="98" score="1" target="time" unit="duration"/>
     <level _seq="58" _title="Chess and Boxes" _xpath="./johannes01_2" author="Johannes Laire" ctrl="force" easy="false" id="20061201johannes313" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="59" _title="Walk the line" _xpath="./erich02_1" author="Erich Schubert" ctrl="force" easy="true" id="erich02" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="60" _title="Jump into Meditation" _xpath="./ral07_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060525ral009" rel="1" rev="42" score="1" target="time" unit="duration"/>
+    <level _seq="60" _title="Jump into Meditation" _xpath="./ral07_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060525ral009" rel="2" rev="190" score="1" target="time" unit="duration"/>
     <level _seq="61" _title="River of Challenges" _xpath="./luc33_1" author="Lukas Sch?ller" ctrl="force" easy="true" id="luc332006" rel="1" rev="5" score="1" target="time" unit="duration"/>
     <level _seq="62" _title="Hot Hurdle Race" _xpath="./ulf04_1" author="Ulf Stegemann" ctrl="force" easy="true" id="20070124ulf019" rel="1" rev="93" score="1" target="time" unit="duration"/>
     <level _seq="63" _title="Playing with Lasers" _xpath="./just09_2" author="JuSt" ctrl="force" easy="false" id="just09_1" rel="2" rev="3" score="1" target="time" unit="duration"/>
@@ -82,7 +82,7 @@
     <level _seq="74" _title="Houdini" _xpath="./ral11_3" author="Ronald Lamprecht" ctrl="force" easy="true" id="20060816ral719" rel="3" rev="147" score="2" target="time" unit="duration"/>
     <level _seq="75" _title="The wrong Place?" _xpath="./just17_2" author="JuSt" ctrl="force" easy="false" id="just17" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="76" _title="Idempotency" _xpath="./duffy145_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy145" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="77" _title="Turnstiles for Two" _xpath="./ral17_2" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070314ral189" rel="2" rev="94" score="2" target="time" unit="duration"/>
+    <level _seq="77" _title="Turnstiles for Two" _xpath="./ral17_3" author="Ronald Lamprecht" ctrl="force" easy="true" id="20070314ral189" rel="3" rev="190" score="2" target="time" unit="duration"/>
     <level _seq="78" _title="jumping ball flash" _xpath="./illmind13_1" author="illmind" ctrl="force" easy="false" id="2007ill001" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="79" _title="Quadropolis" _xpath="./cel1_1" author="Johannes Laire, Jacob Scott, Raoul Bourquin, Andreas Lochmann" ctrl="force" easy="false" id="cel2007_364" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="80" _title="- Meditation -" _xpath="./raoul18_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul18" rel="1" rev="0" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_vi/ral07_1.xml
===================================================================
--- trunk/data/levels/enigma_vi/ral07_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vi/ral07_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,163 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected >
-    <el:info el:type="level">
-      <el:identity el:title ="Jump into Meditation" el:id="20060525ral009"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 42 $" el:status="released"/>
-      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
-      <el:copyright>Copyright ? 2006 Ronald Lamprecht</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00"/>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:score el:easy="0:03" el:difficult="0:19"/>
-    </el:info>
-    <el:luamain><![CDATA[
-enigma.ConserveLevel = FALSE
-
-function oxyd( x, y, tiles )
-    return set_oxyd( x, y )
-end
-
-function nothing(x, y, tiles)
-    -- create nothing
-end
-
-function horizontal_bolder(x,y,tiles)
-    if random() >= 0.5 then
-        return set_stone( "st-bolder-w", x, y )
-    else
-        return set_stone( "st-bolder-e", x, y )
-    end
-end
-
-function vertical_bolder(x,y,tiles)
-    if random() >= 0.5 then
-        return set_stone( "st-bolder-n", x, y )
-    else
-        return set_stone( "st-bolder-s", x, y )
-    end
-end
-
-function checkerboard_floor( type1, type2, attribs1, attribs2 )
-    return function( x, y, tiles )
-        if mod(x,2) == mod(y,2) then
-            return set_floor( type1, x, y, attribs1 or {} )
-        else
-            return set_floor( type2, x, y, attribs2 or {} )
-        end
-    end
-end
-
-function floor( floor_type, attribs )
-    return function( x, y, tiles )
-        return set_floor( floor_type, x, y, attribs or {} )
-    end
-end
-
-function stone( stone_type, attribs )
-    return function( x, y, tiles )
-        return set_stone( stone_type, x, y, attribs or {} )
-    end
-end
-
-function item( item_type, attribs )
-    return function( x, y, tiles )
-        return set_item( item_type, x, y, attribs or {} )
-    end
-end
-
-function actor( actor_type, attribs )
-    return function( x, y, tiles )
-        return set_actor( actor_type, x+0.5, y+0.5, attribs or {} )
-    end
-end
-
-function gradient( gradient_type )
-    return function( x, y, tiles )
-        return set_floor( "fl-gradient", x, y, {type=gradient_type} )
-    end
-end
-
-function inherit(tile_type)
-    return function( x, y, tiles )
-        return create_tile( tiles, x, y, tile_type )
-    end
-end
-
-function group( array, constructor )
-    return function( x, y, tiles )
-        object = constructor( x, y, tiles )
-        tinsert( array, object )
-        return object
-    end
-end
-
-function difficulty( d, constructor )
-    if options.Difficulty == d then
-        return constructor
-    else
-        return nothing
-    end
-end
-
-function create_world_from_map( tiles, map )
-    create_world( strlen(map[1]), getn(map) )
-    
-    for y = 1,getn(map) do
-        local line = map[y]
-        for x = 1,strlen(line) do
-            local tile = strchar(strbyte(line,x))
-            create_tile( tiles, x-1, y-1, tile )
-        end
-    end
-end
-
-function create_tile( tiles, x, y, tile_type )
-    local constructors = tiles[tile_type]
-
-    if constructors then
-    for i = 1,getn(constructors) do
-        constructors[i](x,y,tiles)
-    end
-    else
-    error("invalid tile identifier " .. tile_type )
-    end
-end
-
-tiles = {}
-tiles["."] = {floor("fl-rock")}
-tiles[" "] = {floor("fl-abyss")}
-tiles["s"] = {inherit("."), item("it-springboard")}
-tiles["#"] = {inherit(" "), stone("st-marble")}
-
-tiles["o"] = {inherit("."), item("it-hollow")}
-
-if difficult then
-    tiles["1"] = {inherit("."), actor("ac-whiteball-small", {player=0, essential=1})}
-    tiles["2"] = tiles["."]
-else
-    tiles["1"] = tiles["."]
-    tiles["2"] = {inherit("."), actor("ac-whiteball-small", {player=0, essential=1})}
-end
-
-create_world_from_map( tiles, {
-"####################",
-"#                  #",
-"# ... ...  ... ... #",
-"# .o. .o.  .o. .o. #",
-"# ... ...  ... ... #",
-"#                  #",
-"# .s...s....s...s. #",
-"# .2.............. #",
-"# .....2.......... #",
-"# ......11112..... #",
-"# ..............2. #",
-"#                  #",
-"####################"
-})
-    ]]></el:luamain>
-    <el:i18n>
-    </el:i18n>
-  </el:protected>
-</el:level>
-

Copied: trunk/data/levels/enigma_vi/ral07_2.xml (from rev 1835, trunk/data/levels/enigma_vi/ral07_1.xml)
===================================================================
--- trunk/data/levels/enigma_vi/ral07_1.xml	2009-10-19 16:18:57 UTC (rev 1835)
+++ trunk/data/levels/enigma_vi/ral07_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,47 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected >
+    <el:info el:type="level">
+      <el:identity el:title ="Jump into Meditation" el:id="20060525ral009"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 190 $" el:status="released"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2006 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:score el:easy="0:03" el:difficult="0:19"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["ConserveLevel"] = false
+
+ti[" "] = {"fl_abyss"}
+ti["."] = {"fl_rock"}
+ti["s"] = {"it_springboard"} .. ti["."]
+ti["#"] = {"st_redbrown"}
+ti["o"] = {"it_meditation"} .. ti["."]
+ti["@"] = {"#ac_pearl", essential=INDISPENSABLE} .. ti["."]
+
+ti["1"] = cond(wo["IsDifficult"], ti["@"], ti["."])
+ti["2"] = cond(wo["IsDifficult"], ti["."], ti["@"])
+
+wo(ti, " ", {
+    "####################",
+    "#                  #",
+    "# ... ...  ... ... #",
+    "# .o. .o.  .o. .o. #",
+    "# ... ...  ... ... #",
+    "#                  #",
+    "# .s...s....s...s. #",
+    "# .2.............. #",
+    "# .....2.......... #",
+    "# ......11112..... #",
+    "# ..............2. #",
+    "#                  #",
+    "####################"
+})
+    ]]></el:luamain>
+    <el:i18n>
+    </el:i18n>
+  </el:protected>
+</el:level>
+

Deleted: trunk/data/levels/enigma_vi/ral17_2.xml
===================================================================
--- trunk/data/levels/enigma_vi/ral17_2.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vi/ral17_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,289 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected >
-    <el:info el:type="level">
-      <el:identity el:title="Turnstiles for Two" el:subtitle="Rhapsody on Turnstiles in Blue and Green" el:id="20070314ral189"/>
-      <el:version el:score="2" el:release="2" el:revision="$Revision: 94 $" el:status="released"/>
-      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
-      <el:copyright>Copyright ? 2006, 2007, 2008 Ronald Lamprecht</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00"/>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:credits el:showinfo="true" el:showstart="false">Thanks to Clifford and NObby for valuable feedback</el:credits>
-        <el:code>Lua 5.1</el:code>
-      </el:comments>
-      <el:score el:easy="10:36" el:difficult="19:56"/>
-    </el:info>
-    <el:luamain><![CDATA[
-enigma.ConserveLevel = FALSE
-math_floor = floor
-
-set_oxyd = oxyd
-oxyds = {}
-oxyd_num = 0
-
-function oxyd( x, y, tiles )
-    local o = set_oxyd( x, y )
-    oxyd_num = oxyd_num + 1
-    oxyds[oxyd_num] = o
-    return o
-end
-
-function nothing(x, y, tiles)
-    -- create nothing
-end
-
-function horizontal_bolder(x,y,tiles)
-    if random() >= 0.5 then
-        return set_stone( "st-bolder-w", x, y )
-    else
-        return set_stone( "st-bolder-e", x, y )
-    end
-end
-
-function vertical_bolder(x,y,tiles)
-    if random() >= 0.5 then
-        return set_stone( "st-bolder-n", x, y )
-    else
-        return set_stone( "st-bolder-s", x, y )
-    end
-end
-
-function checkerboard_floor( type1, type2, attribs1, attribs2 )
-    return function( x, y, tiles )
-        if mod(x,2) == mod(y,2) then
-            return set_floor( type1, x, y, attribs1 or {} )
-        else
-            return set_floor( type2, x, y, attribs2 or {} )
-        end
-    end
-end
-
-function floor( floor_type, attribs )
-    return function( x, y, tiles )
-        return set_floor( floor_type, x, y, attribs or {} )
-    end
-end
-
-function stone( stone_type, attribs )
-    return function( x, y, tiles )
-        return set_stone( stone_type, x, y, attribs or {} )
-    end
-end
-
-function item( item_type, attribs )
-    return function( x, y, tiles )
-        return set_item( item_type, x, y, attribs or {} )
-    end
-end
-
-function actor( actor_type, attribs )
-    return function( x, y, tiles )
-        return set_actor( actor_type, x+0.5, y+0.5, attribs or {} )
-    end
-end
-
-function gradient( gradient_type )
-    return function( x, y, tiles )
-        return set_floor( "fl-gradient", x, y, {type=gradient_type} )
-    end
-end
-
-function inherit(tile_type)
-    return function( x, y, tiles )
-        return create_tile( tiles, x, y, tile_type )
-    end
-end
-
-function group( array, constructor )
-    return function( x, y, tiles )
-        object = constructor( x, y, tiles )
-        tinsert( array, object )
-        return object
-    end
-end
-
-function difficulty( d, constructor )
-    if options.Difficulty == d then
-        return constructor
-    else
-        return nothing
-    end
-end
-
-function create_world_from_map( tiles, map )
-    create_world( strlen(map[1]), getn(map) )
-    
-    for y = 1,getn(map) do
-        local line = map[y]
-        for x = 1,strlen(line) do
-            local tile = strchar(strbyte(line,x))
-            create_tile( tiles, x-1, y-1, tile )
-        end
-    end
-end
-
-function create_tile( tiles, x, y, tile_type )
-    local constructors = tiles[tile_type]
-
-    if constructors then
-    for i = 1,getn(constructors) do
-        constructors[i](x,y,tiles)
-    end
-    else
-    error("invalid tile identifier " .. tile_type )
-    end
-end
-
-oxyd_default_flavor = "a"
-
-tiles = {}
-tiles[" "] = {floor("fl-sahara")}
-tiles["."] = {floor("fl-sahara",{friction=18, mousefactor=3.0})}
-tiles["!"] = {floor("fl-sahara",{force_y=30})}
-tiles["~"] = {floor("fl-water")}
-tiles["v"] = {floor("fl-acwhite")}
-tiles["b"] = {floor("fl-acblack")}
-tiles["#"] = {inherit(" "), stone("st-wood_001")}
-tiles["H"] = {inherit(" "), stone("st-wood")}
-tiles["x"] = {inherit(" "), oxyd}
-tiles["N"] = {inherit("~"), stone("st-turnstile-n")}
-tiles["n"] = {inherit(" "), stone("st-turnstile-n")}
-tiles["S"] = {inherit("~"), stone("st-turnstile-s")}
-tiles["s"] = {inherit(" "), stone("st-turnstile-s")}
-tiles["W"] = {inherit("~"), stone("st-turnstile-w")}
-tiles["w"] = {inherit(" "), stone("st-turnstile-w")}
-tiles["E"] = {inherit("~"), stone("st-turnstile-e")}
-tiles["e"] = {inherit(" "), stone("st-turnstile-e")}
-tiles["T"] = {inherit("~"), stone("st-turnstile-green")}
-tiles["J"] = {inherit(" "), stone("st-oneway_white-e")}
-tiles["I"] = {inherit(" "), stone("st-oneway_white-n")}
-tiles["K"] = {inherit(" "), stone("st-oneway_white-s")}
-tiles["k"] = {inherit(" "), stone("st-oneway_black-s")}
-tiles["B"] = {inherit(" "), stone("st-black3")}
-tiles["C"] = {inherit("."), stone("st-black3")}
-tiles["V"] = {inherit(" "), stone("st-white3")}
-tiles["X"] = {inherit("."), stone("st-white3")}
-tiles["R"] = {inherit("~"), stone("st-rotator-right")}
-tiles["r"] = {inherit(" "), stone("st-rotator_move-right")}
-tiles["L"] = {inherit("~"), stone("st-rotator-left")}
-tiles["ch"] = {inherit(" "), item("it-cherry")}
-tiles["G"] = {inherit("ch"), stone("st-glass")}
-tiles["ba"] = {inherit("~"), item("it-cherry")}
-tiles["g"] = {inherit("ba"), stone("st-glass_move")}
-
-
-tiles["yb"] = {inherit(" "), item("it-yinyang")}
-tiles["yw"] = {inherit(" "), item("it-yinyang")}
-
-tiles["1"] = {inherit("yb"), actor("ac-blackball", {essential=1})}
-tiles["2"] = {inherit("yw"), actor("ac-whiteball", {essential=1})}
-tiles["8"] = {inherit(" "), actor("ac-top",{force=0, range=0})}
-
-if difficult then
-    tiles["P"] = tiles[" "]
-    tiles["p"] = tiles[" "]
-    tiles["U"] = {inherit(" "), stone("st-grate1")}
-    tiles["u"] = tiles["r"]
-    tiles["t"] = tiles[" "]
-    tiles["A"] = {inherit("!"), item("it-blocker")}
-    tiles["a"] = {inherit(" "), item("it-trigger",{target="doblock", action="callback"})}
-    tiles["="] = tiles["~"]
-    tiles["i"] = tiles["~"]
-    tiles["m"] = {inherit("~"), stone("st-mail-e")}
-else
-    tiles["P"] = {inherit(" "), item("it-pin")}
-    tiles["p"] = {inherit(" "), stone("st-brake")}
-    tiles["U"] = tiles[" "]
-    tiles["u"] = tiles[" "]
-    tiles["t"] = tiles["r"]
-    tiles["A"] = tiles[" "]
-    tiles["a"] = tiles[" "]
-    tiles["="] = tiles[" "]
-    tiles["i"] = {inherit("~"), stone("st-invisible")}
-    tiles["m"] = tiles["~"]
-end
-
-function doblock(value, sender)
-    if value == TRUE then
-        enigma.SendMessage(enigma.GetItem(8, 10), "close", nil)
-    else
-        enigma.SendMessage(enigma.GetStone(8, 10), "open", nil)
-    end
-end
-
-
-create_world_from_map( tiles, {
-"####################",
-"#x m  x  JJ  x  ~ x#",
-"#  ~     ~~     ~  #",
-"#  ~     ~~  n  ~  #",
-"#BB~~~T~~~~~~T~~~BB#",
-"#  R  s      s  ~  #",
-"# b~b  P2  1P  vNv #",
-"# wTe          wTe #",
-"# vSv    n     vSv #",
-"#~~~~I~~~T~R~~k~~~~#",
-"#     ~ A~a  ~     #",
-"# ~~~~~      ~~~~~ #",
-"# ~ B ~ r p  ~ V ~ #",
-"# ~xBwTe UU wTeVx~ #",
-"# ~ B ~    u ~ V ~ #",
-"# ~~~~~      ~~~~~ #",
-"# N   ~~R~T~~~   N #",
-"#wT x ~   s  ~ x Te#",
-"# S   ~   U  ~   S #",
-"# ~~~~~R=  =L~~~~~ #",
-"# ~   ~      ~   ~ #",
-"# ~   Te UtUwT   ~ #",
-"# ~   ~      ~   ~ #",
-"#V~~~~~  n   ~~~~~B#",
-"#     ~~WTE~~~     #",
-"#~~      s      ####",
-"#x~      ~~~  ###x##",
-"# ~      ~x~  #VVVV#",
-"# ~  ~~iXiBi  #GGGG#",
-"#wTe ~xB.N.X  R    #",
-"# ~~ ~~i~T~i~~ g w #",
-"# ~~   C.S.Vx~  r  #",
-"# L~~  iViCi~~     #",
-"# ~8~  ~x~  N   G  #",
-"L T~L  ~~~  T    T #",
-"# s B       S      #",
-"####################"
-})
-
-repeat
-    local good_oxyds = 0
-    oxyd_shuffle()
-    for i = 1, 4 do
-        local c = enigma.GetAttrib(oxyds[i], "color")
-        for j = 9, 14 do
-            if (c == enigma.GetAttrib(oxyds[j], "color")) then
-                good_oxyds = good_oxyds + 1
-            end
-        end
-    end
-until good_oxyds >= 2
-
-c = math.random(8) - 1
-set_oxyd( 4, 21, oxyd_default_flavor, c)
-set_oxyd(15, 21, oxyd_default_flavor, c)
-if (c < 7) then
-    for i = 1, 14 do
-        if (c == (enigma.GetAttrib(oxyds[i], "color") + 0)) then
-            enigma.SetAttrib(oxyds[i], "color", "7")
-        end
-    end
-end
-
-display.SetFollowMode (display.FOLLOW_SCROLLING )
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_vi/ral17_3.xml (from rev 1835, trunk/data/levels/enigma_vi/ral17_2.xml)
===================================================================
--- trunk/data/levels/enigma_vi/ral17_2.xml	2009-10-19 16:18:57 UTC (rev 1835)
+++ trunk/data/levels/enigma_vi/ral17_3.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,138 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected >
+    <el:info el:type="level">
+      <el:identity el:title="Turnstiles for Two" el:subtitle="Rhapsody on Turnstiles in Blue and Green" el:id="20070314ral189"/>
+      <el:version el:score="2" el:release="3" el:revision="$Revision: 190 $" el:status="released"/>
+      <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
+      <el:copyright>Copyright ? 2006,2007,2008,2009 Ronald Lamprecht</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:credits el:showinfo="true" el:showstart="false">Thanks to Clifford and NObby for valuable feedback</el:credits>
+      </el:comments>
+      <el:score el:easy="10:36" el:difficult="19:56"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["ConserveLevel"] = false
+wo["ProvideExtralifes"] = false
+wo["FollowGrid"] = true
+wo["FollowMethod"] = FOLLOW_SCROLL
+wo["FollowAction"] = FOLLOW_HALFSCREEN
+
+ti[" "] = {"fl_sahara"}
+ti["."] = {"fl_sahara", friction=18, adhesion=3.0}
+ti["!"] = {"fl_sahara", force_y=30}
+ti["~"] = {"fl_water"}
+ti["v"] = {"fl_yinyang_yang"}
+ti["b"] = {"fl_yinyang_yin"}
+ti["#"] = {"st_panel"}
+ti["H"] = {"st_box"}
+ti["N"] = {"st_turnstilearm_n"} .. ti["~"]
+ti["n"] = {"st_turnstilearm_n"}
+ti["S"] = {"st_turnstilearm_s"} .. ti["~"]
+ti["s"] = {"st_turnstilearm_s"}
+ti["W"] = {"st_turnstilearm_w"} .. ti["~"]
+ti["w"] = {"st_turnstilearm_w"}
+ti["E"] = {"st_turnstilearm_e"} .. ti["~"]
+ti["e"] = {"st_turnstilearm_e"}
+ti["T"] = {"st_turnstile_green"} .. ti["~"]
+ti["J"] = {"st_oneway_white", orientation = EAST}
+ti["I"] = {"st_oneway_white", orientation = NORTH}
+ti["K"] = {"st_oneway_white", orientation = SOUTH}
+ti["k"] = {"st_oneway_black", orientation = SOUTH}
+ti["B"] = {"st_passage_black", flavor = "cross"}
+ti["C"] = {"st_passage_black", flavor = "cross"} .. ti["."]
+ti["V"] = {"st_passage_white", flavor = "cross"}
+ti["X"] = {"st_passage_white", flavor = "cross"} .. ti["."]
+ti["R"] = {"st_rotator_cw"} .. ti["~"]
+ti["r"] = {"st_rotator_cw", movable=true}
+ti["L"] = {"st_rotator_ccw"} .. ti["~"]
+ti["ch"] = {"it_cherry"}
+ti["G"] = {"st_rawglass"} .. ti["ch"]
+ti["g"] = {"st_rawglass_movable"} .. ti["ch"] .. ti["~"]
+
+ti["x"] = {"st_oxyd_a", "top#"}
+ti["*"] = {"st_oxyd_a", "middle#"}
+ti["o"] = {"st_oxyd_a", "last#"}
+ti["O"] = {"st_oxyd_a", "bottom#"}
+
+ti["yy"] = {"it_yinyang"}
+ti["1"] = {"#ac_marble_black", essential=INDISPENSABLE} .. ti["yy"]
+ti["2"] = {"#ac_marble_white", essential=INDISPENSABLE} .. ti["yy"]
+ti["8"] = {"#ac_top", strength=0, range=0}
+
+if wo["IsDifficult"] then
+    ti["P"] = ti[" "]
+    ti["p"] = ti[" "]
+    ti["U"] = {"st_grate"}
+    ti["u"] = ti["r"]
+    ti["t"] = ti[" "]
+    ti["A"] = {"it_blocker", "blocker"} .. ti["!"]
+    ti["a"] = {"it_trigger", target="blocker"}
+    ti["="] = ti["~"]
+    ti["i"] = ti["~"]
+    ti["m"] = {"st_mail_e"} .. ti["~"]
+else
+    ti["P"] = {"it_pin"}
+    ti["p"] = {"st_brake"}
+    ti["U"] = ti[" "]
+    ti["u"] = ti[" "]
+    ti["t"] = ti["r"]
+    ti["A"] = ti[" "]
+    ti["a"] = ti[" "]
+    ti["="] = ti[" "]
+    ti["i"] = {"st_invisible"} .. ti["~"]
+    ti["m"] = ti["~"]
+end
+
+wo(ti, " ", {
+    "####################",
+    "#x m  x  JJ  x  ~ x#",
+    "#  ~     ~~     ~  #",
+    "#  ~     ~~  n  ~  #",
+    "#BB~~~T~~~~~~T~~~BB#",
+    "#  R  s      s  ~  #",
+    "# b~b  P2  1P  vNv #",
+    "# wTe          wTe #",
+    "# vSv    n     vSv #",
+    "#~~~~I~~~T~R~~k~~~~#",
+    "#     ~ A~a  ~     #",
+    "# ~~~~~      ~~~~~ #",
+    "# ~ B ~ r p  ~ V ~ #",
+    "# ~*BwTe UU wTeV*~ #",
+    "# ~ B ~    u ~ V ~ #",
+    "# ~~~~~      ~~~~~ #",
+    "# N   ~~R~T~~~   N #",
+    "#wT * ~   s  ~ * Te#",
+    "# S   ~   U  ~   S #",
+    "# ~~~~~R=  =L~~~~~ #",
+    "# ~   ~      ~   ~ #",
+    "# ~ o Te UtUwT o ~ #",
+    "# ~   ~      ~   ~ #",
+    "#V~~~~~  n   ~~~~~B#",
+    "#     ~~WTE~~~     #",
+    "#~~      s      ####",
+    "#O~      ~~~  ###O##",
+    "# ~      ~O~  #VVVV#",
+    "# ~  ~~iXiBi  #GGGG#",
+    "#wTe ~OB.N.X  R    #",
+    "# ~~ ~~i~T~i~~ g w #",
+    "# ~~   C.S.VO~  r  #",
+    "# L~~  iViCi~~     #",
+    "# ~8~  ~O~  N   G  #",
+    "L T~L  ~~~  T    T #",
+    "# s B       S      #",
+    "####################"
+})
+
+wo:shuffleOxyd({"last#*", min=1}, {"top#*", "bottom#*", min=2})
+    ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vii/duffy163_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/duffy163_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vii/duffy163_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,280 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Horseshoes" el:subtitle="" el:id="duffy163"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Jacob Scott" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2007 Jacob Scott</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="0.92">
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-rooms_wide=3
-rooms_high=3
-
-levelw=1+(19*rooms_wide)
-levelh=1+(12*rooms_high)
-
-create_world( levelw, levelh)
-display.SetFollowMode(display.FOLLOW_SCROLLING)
-
-fill_floor("fl-abyss",0,0,levelw,levelh)
-
-function renderLine( line, pattern)
-    for i=1, strlen(pattern) do
-        local c = strsub( pattern, i, i)
-        if c =="#" then
-            set_stone( "st-death", i-1, line)
-            abyss(i-1,line)
-        elseif c =="*" then
-            set_stone( "st-greenbrown", i-1, line)
-            abyss(i-1,line)
-        elseif c == "!" then
-            abyss(i-1,line)
-        elseif c == "o" then
-            oxyd( i-1, line)
-        elseif c=="z" then
-            set_actor("ac-blackball", i,line+.5, {player=0, mouseforce=1})
-            set_floor("fl-hay",i-1,line)
-        elseif c == "@" then
-            set_stone( "st-brownie", i-1, line)
-        elseif c == "!" then
-            abyss(i-1,line)
-        elseif c == "~" then
-            fill_floor("fl-water", i-1,line, 1,1)
-        elseif c=="z" then
-            set_actor("ac-blackball", i-.5,line+.5, {player=0})
-            set_floor("fl-hay",i-1,line)
-        elseif c == "S" then
-            set_item("it-spring1",i-1,line)
-            set_floor("fl-hay",i-1,line)
-        elseif c == "s" then
-            set_item("it-spring2",i-1,line)
-            set_floor("fl-hay",i-1,line)
-        elseif c=="+" then
-            set_stone( "st-wood", i-1, line)
-        elseif c=="." then
-            set_floor("fl-hay",i-1,line)
-        elseif c=="=" then
-            set_floor("fl-space",i-1,line)
-        elseif c=="L" then
-            oneway(i-1,line, enigma.WEST)
-            set_floor("fl-hay",i-1,line)
-        elseif c=="U" then
-            oneway(i-1,line, enigma.NORTH)
-            set_floor("fl-hay",i-1,line)
-        elseif c=="R" then
-            oneway(i-1,line, enigma.EAST)
-            set_floor("fl-hay",i-1,line)
-        elseif c=="D" then
-            oneway(i-1,line, enigma.SOUTH)
-        elseif c=="W" then
-            oneway(i-1,line, enigma.WEST)
-            set_floor("fl-space",i-1,line)
-        elseif c=="M" then
-            set_item("it-magnet",i-1,line,{name="magnet"})
-            magnet=enigma.GetNamedObject("magnet")
-            enigma.SendMessage(magnet,"on",nil)
-        elseif c=="N" then
-            set_item("it-magnet",i-1,line,{name="magnet2"})
-            set_floor("fl-space",i-1,line)
-        elseif c=="P" then
-            set_item("it-magnet",i-1,line,{name="magnet3"})
-        elseif c=="Q" then
-            set_item("it-magnet",i-1,line,{name="magnet4"})
-        elseif c=="n" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc5"})
-        elseif c=="p" then
-            set_stone("st-switch", i-1,line, {action="onoff",target="magnet3"})
-        elseif c=="q" then
-            set_stone("st-switch", i-1,line, {action="onoff",target="magnet4"})
-        elseif c=="r" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc1"})
-        elseif c=="l" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc6"})
-        elseif c=="u" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc2"})
-        elseif c=="v" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc3"})
-        elseif c=="w" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc4"})
-        elseif c=="y" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc7"})
-        elseif c=="x" then
-            set_stone("st-switch", i-1,line, {action="callback",target="funcc8"})
-        elseif c=="1" then
-            set_item("it-magnet",i-1,line,{name="magnetx1"})
-        elseif c=="2" then
-            set_item("it-magnet",i-1,line,{name="magnetx2"})
-        elseif c=="3" then
-            set_item("it-magnet",i-1,line,{name="magnetx3"})
-        elseif c=="4" then
-            set_item("it-magnet",i-1,line,{name="magnetx4"})
-        elseif c=="5" then
-            set_item("it-magnet",i-1,line,{name="magnetx5"})
-        elseif c=="6" then
-            set_item("it-magnet",i-1,line,{name="magnetx6"})
-        elseif c=="7" then
-            set_item("it-magnet",i-1,line,{name="magnetx7"})
-        elseif c=="8" then
-            set_item("it-magnet",i-1,line,{name="magnetx8"})
-        elseif c=="9" then
-            set_item("it-magnet",i-1,line,{name="magnetx9"})
-        elseif c=="0" then
-            set_item("it-magnet",i-1,line,{name="magnetx0"})
-        elseif c=="J" then
-            set_item("it-extralife",i-1,line)
-            set_floor("fl-hay",i-1,line)
-        elseif c=="B" then
-            set_floor("fl-bridge", i-1,line, {name="bridge1", type="yy"})
-        end
-    end
-end
-
--- Floor:  " "
--- Border: "#"
--- Oxyd:   "o"
-
-renderLine(00,"######***##****###*****####****###***####*******##########")
-renderLine(01,"# .....=....==.....===......==.....=....J*vJ.....        #")
-renderLine(02,"# . ***D****DD*****DDD******DD*****D****.*******........ #")
-renderLine(03,"# . *......    ...s......===..L...     n.#      B      . #")
-renderLine(04,"# . *.J.***                    ...     *.# ........... . #")
-renderLine(05,"# . *...*    ############      === *****.# ...1....... . #")
-renderLine(06,"# . * .   M         #p..#==========W==...# ..!....2.!. . #")
-renderLine(07,"# M   ..    .....   #q..#==========WN=...# .....3..... . #")
-renderLine(08,"# .    .. ...   .   #####      === #     # .4.......5. . #")
-renderLine(09,"# .     ...     .              === ####### .....!..... = #")
-renderLine(10,"# .             .              ... #       ...6...7... . #")
-renderLine(11,"# ..==.J       ... r***        ... # ===.v !.......... . #")
-renderLine(12,"# ..  .  .............*         .  # ===.. .....!!...! . #")
-renderLine(13,"#     .  .     ... **.*         . ## ===.. ..8........ = #")
-renderLine(14,"# ..  .  .      =   *.*   M     . #  ===.. ..........9 . #")
-renderLine(15,"# ..==.. .      =   *.*         . #  =   . 0!...!....! . #")
-renderLine(16,"# =   ..R.     ==   *.*  ****** . #  .   .   .......   . #")
-renderLine(17,"# =   w  .     ==   *.****....* . *  . o...o .......   = #")
-renderLine(18,"# .      .    ===   *....R.z......L...*******.......   . #")
-renderLine(19,"# .     ... M ===   ******....*   *  ............     l. #")
-renderLine(20,"# .     ...   ===        **U***   *  y                 . #")
-renderLine(21,"# ..... ...  ====         *.* ************************x. #")
-renderLine(22,"#   ...      ..           *.*    .............L......... #")
-renderLine(23,"#   ...      ..           *.*    .*********************. #")
-renderLine(24,"#   ===      ..           *.*    .* M   M              = #")
-renderLine(25,"#    ===     ..            .     .                     . #")
-renderLine(26,"#    ===     ..======    u...   ...=========...        . #")
-renderLine(27,"#     ===    ..=======    .J.......=========.......... . #")
-renderLine(28,"#     ===    .    ======  ...   ...=========...      . . #")
-renderLine(29,"#      ==    .     =====   .                         . . #")
-renderLine(30,"#      =...  .  P    ====  .          M   M          . . #")
-renderLine(31,"# ....  ...  .        ===  .    * * * * * * *        . . #")
-renderLine(32,"# .  ......  .    Q   ===  . ......................... . #")
-renderLine(33,"# .          .        ...... . *****************       . #")
-renderLine(34,"# ...=..=..=..        ...... ....s     ................J #")
-renderLine(35,"#                             * * * * * * *              #")
-renderLine(36,"##########################################################")
-
-oxyd_shuffle()
-
-set_floor("fl-hay",2,7)
-
-magnet2 = enigma.GetNamedObject("magnet2")
-
-function funcc1()
-    oneway(25,18, enigma.WEST)
-end
-
-function funcc2()
-    oneway(27,20, enigma.SOUTH)
-end
-
-enigma.SendMessage(magnet2,"on",nil)
-
-magnetx1=enigma.GetNamedObject("magnetx1")
-magnetx2=enigma.GetNamedObject("magnetx2")
-magnetx3=enigma.GetNamedObject("magnetx3")
-magnetx4=enigma.GetNamedObject("magnetx4")
-magnetx5=enigma.GetNamedObject("magnetx5")
-magnetx6=enigma.GetNamedObject("magnetx6")
-magnetx7=enigma.GetNamedObject("magnetx7")
-magnetx8=enigma.GetNamedObject("magnetx8")
-magnetx9=enigma.GetNamedObject("magnetx9")
-magnetx0=enigma.GetNamedObject("magnetx0")
-
-bridge1=enigma.GetNamedObject("bridge1")
-
-function funcc3()
-    enigma.SendMessage(magnetx1,"onoff",nil)
-    enigma.SendMessage(magnetx2,"onoff",nil)
-    enigma.SendMessage(magnetx3,"onoff",nil)
-    enigma.SendMessage(magnetx4,"onoff",nil)
-    enigma.SendMessage(magnetx5,"onoff",nil)
-    enigma.SendMessage(magnetx6,"onoff",nil)
-    enigma.SendMessage(magnetx7,"onoff",nil)
-    enigma.SendMessage(magnetx8,"onoff",nil)
-    enigma.SendMessage(magnetx9,"onoff",nil)
-    enigma.SendMessage(magnetx0,"onoff",nil)
-    enigma.SendMessage(bridge1,"openclose",nil)
-end
-
-function funcc4()
-    oneway(8,16, enigma.WEST)
-end
-
-function funcc5()
-    enigma.SendMessage(magnet2,"onoff",nil)
-    set_stone("st-greenbrown",23,5)
-    set_stone("st-greenbrown",24,5)
-    set_stone("st-greenbrown",23,8)
-    set_stone("st-greenbrown",24,8)
-    set_stone("st-greenbrown",25,8)
-    set_stone("st-greenbrown",26,8)
-    set_stone("st-greenbrown",27,8)
-    set_stone("st-greenbrown",28,8)
-    set_stone("st-greenbrown",29,8)
-    set_stone("st-greenbrown",30,8)
-    set_stone("st-greenbrown",34,8)
-    set_stone("st-greenbrown",35,8)
-    set_stone("st-greenbrown",36,8)
-    set_stone("st-greenbrown",37,8)
-    enigma.KillStone(24,6)
-    enigma.KillStone(24,7)
-    set_floor("fl-hay",24,6)
-    set_floor("fl-hay",24,7)
-    set_floor("fl-hay",15,22)
-    set_floor("fl-hay",15,23)
-end
-
-function funcc6()
-    oneway(46,22, enigma.EAST)
-end
-
-function funcc7()
-    oneway(34,18, enigma.EAST)
-end
-
-function funcc8()
-    enigma.SendMessage(magnetx1,"off",nil)
-    enigma.SendMessage(magnetx2,"off",nil)
-    enigma.SendMessage(magnetx3,"off",nil)
-    enigma.SendMessage(magnetx4,"off",nil)
-    enigma.SendMessage(magnetx5,"off",nil)
-    enigma.SendMessage(magnetx6,"off",nil)
-    enigma.SendMessage(magnetx7,"off",nil)
-    enigma.SendMessage(magnetx8,"off",nil)
-    enigma.SendMessage(magnetx9,"off",nil)
-    enigma.SendMessage(magnetx0,"off",nil)
-    enigma.SendMessage(bridge1,"open",nil)
-end
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>
-

Copied: trunk/data/levels/enigma_vii/duffy163_2.xml (from rev 1835, trunk/data/levels/enigma_vii/duffy163_1.xml)
===================================================================
--- trunk/data/levels/enigma_vii/duffy163_1.xml	2009-10-19 16:18:57 UTC (rev 1835)
+++ trunk/data/levels/enigma_vii/duffy163_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,99 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Horseshoes" el:subtitle="" el:id="duffy163"/>
+      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
+      <el:author el:name="Jacob Scott" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2007 Jacob Scott</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments><el:code>New API converted by R. Bourquin</el:code></el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["FollowGrid"] = true
+wo["FollowMethod"] = FOLLOW_SCROLL
+wo["FollowAction"] = FOLLOW_HALFSCREEN
+
+ti[" "] = {"fl_abyss"}
+ti["."] = {"fl_hay"}
+ti["="] = {"fl_space"}
+ti["-"] = {"fl_bridge", flavor="gc", name="bridge", state=OPEN}
+ti["#"] = {"st_death"}
+ti["*"] = {"st_greenbrown"}
+ti["^"] = ti["."] .. {"st_oneway", orientation=NORTH, name="oneways#"}
+ti[">"] = ti["."] .. {"st_oneway", orientation=EAST, name="oneways#"}
+ti["<"] = ti["."] .. {"st_oneway", orientation=WEST, name="oneways#"}
+ti["V"] = {"st_oneway", orientation=SOUTH}
+ti["W"] = ti["="] .. {"st_oneway", orientation=WEST}
+ti["+"] = ti["."] .. {"it_extralife"}
+ti["s"] = ti["."] .. {"it_spring_drop"}
+ti["m"] = {"it_magnet", state=ON}
+ti["n"] = ti["."] .. ti["m"]
+ti["o"] = ti["="] .. {"it_magnet", state=ON, name="magneto"}
+ti["p"] = {"it_magnet", state=OFF, name="magnetp"}
+ti["q"] = {"it_magnet", state=OFF, name="magnetq"}
+ti["r"] = {"it_magnet", name="magnets#"}
+ti["P"] = {"st_switch", target="magnetp", name="anchor"}
+ti["Q"] = {"st_switch", target="magnetq"}
+ti["S"] = {"st_switch", target="@oneways#*", action="flip"}
+ti["T"] = {"st_switch", target={"magnets#*", "bridge"}}
+ti["U"] = {"st_switch", target={"magnets#*", "bridge"}, action={"off", "open"}}
+ti["R"] = {"st_switch", target={"magneto", "passage"}, action={"off", "callback"}}
+ti["!"] = ti["."] .. {"st_nil"}
+ti["O"] = {"st_oxyd"}
+ti["@"] = ti["."] .. {"#ac_marble_black"}
+
+wo(ti, " ", {
+    "######***##****###*****####****###***####*******##########",
+    "# .....=....==.....===......==.....=....+*T+.....        #",
+    "# . ***V****VV*****VVV******VV*****V****.*******........ #",
+    "# . *......    ...s......===..<...     R.#      -      . #",
+    "# . *.+.***                    ...     *.# ........... . #",
+    "# . *...*    ############      === *****.# ...r....... . #",
+    "# . * .   m         #P..#==========W==...# .. ....r. . . #",
+    "# n   ..    .....   #Q..#==========Wo=...# .....r..... . #",
+    "# .    .. ...   .   #####      === #     # .r.......r. . #",
+    "# .     ...     .              === ####### ..... ..... = #",
+    "# .             .              ... #       ...r...r... . #",
+    "# ..==.+       ... S***        ... # ===.T  .......... . #",
+    "# ..  .  .............*         .  # ===.. .....  ...  . #",
+    "#     .  .     ... **.*         . ## ===.. ..r........ = #",
+    "# ..  .  .      =   *.*   m     . #  ===.. ..........r . #",
+    "# ..==.. .      =   *.*         . #  =   . r ... ....  . #",
+    "# =   ..>.     ==   *.*  ****** . #  .   .   .......   . #",
+    "# =   S  .     ==   *.****....* . *  . O...O .......   = #",
+    "# .      .    ===   *....>. at ......<...*******.......   . #",
+    "# .     ... m ===   ******....*   *  ............     S. #",
+    "# .     ...   ===        **^***   *  S                 . #",
+    "# ..... ...  ====         *.* ************************U. #",
+    "#   ...      ..           *.*    .............<......... #",
+    "#   ...      ..           *.*    .*********************. #",
+    "#   ===      ..           *.*    .* m   m              = #",
+    "#    ===     ..            .     .                     . #",
+    "#    ===     ..======    S...   ...=========...        . #",
+    "#     ===    ..=======    .+.......=========.......... . #",
+    "#     ===    .    ======  ...   ...=========...      . . #",
+    "#      ==    .     =====   .                         . . #",
+    "#      =...  .  p    ====  .          m   m          . . #",
+    "# ....  ...  .        ===  .    * * * * * * *        . . #",
+    "# .  ......  .    q   ===  . ......................... . #",
+    "# .          .        ...... . *****************       . #",
+    "# ...=..=..=..        ...... ....s     ................+ #",
+    "#                             * * * * * * *              #",
+    "##########################################################"})
+
+function passage(value, sender)
+    sender["target"] = DEFAULT
+    wo:drawMap(ti, no["anchor"]+ENE, " ", {"**", " !", " !", "********   ****"})
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_vii/index.xml
===================================================================
--- trunk/data/levels/enigma_vii/index.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vii/index.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="64" title="Enigma VII"/>
+  <info enigma="1.10" group="Enigma" location="10800" network="false" owner="Enigma Team" release="1" revision="65" title="Enigma VII"/>
 
   <attributes/>
 
@@ -39,10 +39,10 @@
     <level _seq="31" _title="Pantograph" _xpath="./duffy160_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy160" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Advanced Space Tubes" _xpath="./duffy161_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy161" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Deserted Island" _xpath="./joe08_2" author="Joseph Dunne" ctrl="force" easy="false" id="joe8" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="34" _title="The Fortress" _xpath="./joe09_1" author="Joseph Dunne" ctrl="force" easy="false" id="joe9" rel="1" rev="0" score="1" target="time" unit="duration"/>
-    <level _seq="35" _title="Manuevre" _xpath="./joe13_1" author="Joseph Dunne" ctrl="force" easy="true" id="joe13" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="34" _title="The Fortress" _xpath="./joe09_2" author="Joseph Dunne" ctrl="force" easy="false" id="joe9" rel="2" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="35" _title="Manuevre" _xpath="./joe13_2" author="Joseph Dunne" ctrl="force" easy="true" id="joe13" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Mayan Meditation" _xpath="./duffy162_2" author="Jacob Scott" ctrl="force" easy="true" id="duffy162" rel="2" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="37" _title="Horseshoes" _xpath="./duffy163_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy163" rel="1" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="37" _title="Horseshoes" _xpath="./duffy163_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy163" rel="2" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="38" _title="Knot Garden" _xpath="./duffy165_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy165" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="39" _title="Impulse-phobia" _xpath="./duffy166_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy166" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="40" _title="Slopes, Jumps &amp; Falls" _xpath="./duffy167_1" author="Jacob Scott" ctrl="force" easy="false" id="duffy167" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -102,7 +102,7 @@
     <level _seq="94" _title="Pick-Up" _xpath="./joe27_2" author="Joseph Dunne" ctrl="force" easy="false" id="joe27" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="95" _title="A Kind of Magic" _xpath="./just37_2" author="JuSt" ctrl="force" easy="true" id="JuStA Kind of Magic" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="96" _title="Blue Screen Of Death" _xpath="./pulley10_2" author="Mark Pulley" ctrl="force" easy="true" id="pulley10" rel="2" rev="1" score="2" target="time" unit="duration"/>
-    <level _seq="97" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="41" score="1" target="time" unit="duration"/>
+    <level _seq="97" _title="Audience in Venice" _xpath="./mecke09_2" author="mecke" ctrl="force" easy="true" id="mecke9" rel="2" rev="42" score="1" target="time" unit="duration"/>
     <level _seq="98" _title="Black Liberation" _xpath="./mecke11_2" author="mecke" ctrl="force" easy="true" id="mecke11" rel="2" rev="44" score="1" target="time" unit="duration"/>
     <level _seq="99" _title="Jack-Of-All-Trades" _xpath="./mecke12_2" author="mecke" ctrl="force" easy="true" id="mecke12" rel="2" rev="49" score="1" target="time" unit="duration"/>
     <level _seq="100" _title="TODO" _xpath="lib/todo" author="Martin Hawlisch" ctrl="force" easy="false" id="todo" rel="1" rev="1" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_vii/joe09_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/joe09_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vii/joe09_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,135 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="The Fortress" el:subtitle="" el:id="joe9"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Joseph Dunne" el:email="josephdunne1993 at hotmail.com" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Joseph Dunne</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="false" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="1:00"/>
-    </el:info>
-    <el:luamain><![CDATA[
-cells={}
-
-cells[" "]=cell{floor="fl-sahara"}
-cells[","]=cell{floor="fl-leaves"}
-cells["-"]=cell{floor="fl-abyss"}
-cells["'"]=cell{floor="fl-water"}
-cells["8"]=cell{stone="st-yellow"}
-cells["#"]=cell{stone="st-blue-sand"}
-cells["%"]=cell{stone="st-brick"}
-cells["9"]=cell{stone="st-actorimpulse"}
-cells["S"]=cell{stone="st-puzzle-nes"}
-cells["D"]=cell{stone="st-puzzle-n"}
-cells["A"]=cell{stone="st-puzzle-s"}
-cells["M"]=cell{stone="st-puzzle-ew"}
-cells["B"]=cell{stone="st-break_gray"}
-cells["O"]=cell{stone="st-puzzle-e"}
-cells["L"]=cell{stone="st-puzzle-w"} 	
cells["K"]=cell{stone="st-puzzle-sw"}
-cells["J"]=cell{stone="st-puzzle-nw"}
-cells["$"]=cell{stone="st-wood"}
-cells["o"]=cell{actor={"ac-whiteball-small", {player=0, essential=1}}}
-cells["T"]=cell{actor="ac-top"}
-cells["+"]=cell{item="it-hollow"}
-cells["H"]=cell{item="it-hammer"}
-cells["F"]=cell{item="it-flagwhite"}
-cells["*"]=cell{item="it-tinyhollow"}
-cells["["]=cell{item="it-tinyhill"}
-cells["]"]=cell{item="it-hill"}
-cells[">"]=cell{item="it-dynamite"}
-
-level = {
-"-----------------------------------------------------------------------------",
-"-----------------------------------------------------------------------------",
-"--######%%%%%%%--------------------------------------------------------------",
-"--#o,,,#o%   o%--------------------------------------------------------------",
-"--####,# % %%%%--------------------------------------------------------------",
-"--%o         o%--------------------------------------------------------------",
-"--%%%% %%  %%%%--------------------------------------------------------------",
-"-----%  %  %-----------------------------------------------------------------",
-"-----%    %%-----------------------------------------------------------------",
-"-----%%  %%%-----------------------------------------------------------------",
-"------% %%-------------------------------------------------------------------",
-"------- ---------------------------------------------------------------------",
-"------% %--------------------------------------------------------------------",
-"--%%%%% %%%%%----------------------------------------------------------------",
-"--%         %%%--------------------------------------------------------------",
-"--% OK    %$  %--------------------------------------------------------------",
-"--% AD      %%%--------------------------------------------------------------",
-"--% SL      %----------------------------------------------------------------",
-"--% D       %----------------------------------------------------------------",
-"--%         %----------------------------------------------------------------",
-"-----------------------------------------------------------------------------",
-"-----------------------------------------------------------------------------",
-"--------- -------------------------------------------------------------------",
-"-----------------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"-----88   8------------------------------------------------------------------",
-"--8888   $888----------------------------------------------------------------",
-"--8    8    8----------------------------------------------------------------",
-"--8  8$   888----------------------------------------------------------------",
-"--8  8    8------------------------------------------------------------------",
-"--888889'98------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------8  98------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------8 9 8------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------89 98------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"----888   888----------------------------------------------------------------",
-"----8       8----------------------------------------------------------------",
-"----8    8  8----------------------------------------------------------------",
-"----8       8----------------------------------------------------------------",
-"----8     T 8----------------------------------------------------------------",
-"----8   8   8----------------------------------------------------------------",
-"----8       8----------------------------------------------------------------",
-"----8T      8----------------------------------------------------------------",
-"----888   888----------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------8   8------------------------------------------------------------------",
-"------8   8-------------------------------########---------------------------",
-"------8OML8-------------------------------#     H#---------------------------",
-"------8'''8-------------------------------#      #---------------------------",
-"------8$$$88888888888888888888888#8#8#8#8##      ##############--------------",
-"------8'''$' 888         8       #   #                    #  +#--------888---",
-"------8   $' 888         8 8 8     #         TT         # B ++#--------8+8---",
-"------8 OL'  '''           8  $  #   #       TT          $#  +#--------8 8---",
-"------88888888888888888888888 88B#8#8#8#8##      #######  #####--------8 8---",
-"---------------------------8   8 8--------########-----####------------8 8---",
-"---------------------------88888 8-------------------------------------8 8---",
-"-----------------------------8   8---88888888888888888888888888888888888 8---",
-"-------------------88888888888 888---8                                   8---",
-"-------------------8           8-----8 88888888888888888888888888888888888---",
-"-------------------8 88888888888-----8 8-------------------------------------",
-"---88888888888888888 8---------------8 8888888888888888888888888888888888888-",
-"---8                 8---------------8                                     8-",
-"---8 88888888888888888---------------8888888888888888888888888888888888888 8-",
-"---8 8-------------------------------------------------------------------8 8-",
-"---8 888888888888888888888888888888888888888888888888888888888888888888888 8-",
-"---8                                                                       8-",
-"---8888888888888888888888888888888888888888888888888888888888888888888888888-",
-"-----------------------------------------------------------------------------",
-}
-set_default_parent(cells[" "])
-create_world_by_map(level,cells)
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>
-

Copied: trunk/data/levels/enigma_vii/joe09_2.xml (from rev 1854, trunk/data/levels/enigma_vii/joe09_1.xml)
===================================================================
--- trunk/data/levels/enigma_vii/joe09_1.xml	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/data/levels/enigma_vii/joe09_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,116 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="The Fortress" el:subtitle="" el:id="joe9"/>
+      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
+      <el:author el:name="Joseph Dunne" el:email="josephdunne1993 at hotmail.com" el:homepage=""/>
+      <el:copyright>Copyright ? 2006 Joseph Dunne</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="false" el:single="true" el:network="false"/>
+      <el:comments><el:code>New API converted by /dev/null (November 2009)</el:code></el:comments>
+      <el:score el:easy="-" el:difficult="1:00"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["FallenPuzzle"] = "= "
+
+ti[" "] = {"fl_sahara"}
+ti["."] = {"fl_abyss"}
+ti["~"] = {"fl_water"}
+ti["-"] = {"fl_lawn"}
+ti["#"] = {"st_yellow"}
+ti["="] = {"st_brick"}
+ti["+"] = {"st_bluesand"}
+ti["I"] = {"st_actorimpulse"}
+ti["B"] = {"st_break_plain"}
+ti["W"] = {"st_box"}
+ti["h"] = {"it_hammer"}
+ti["o"] = {"it_meditation"}
+ti["P"] = {"st_puzzle", cluster = 1}
+ti["Q"] = {"st_puzzle", cluster = 2}
+ti["T"] = {"#ac_top"}
+ti["@"] = {"#ac_pearl", essential = INDISPENSABLE}
+
+wo(ti, " ", {
+    ".............................................................................",
+    ".............................................................................",
+    "..++++++=======..............................................................",
+    "..+ at ---+@=   @=..............................................................",
+    "..++++-+ = ====..............................................................",
+    "..=@         @=..............................................................",
+    "..==== ==  ====..............................................................",
+    ".....=  =  =.................................................................",
+    ".....=    ==.................................................................",
+    ".....==  ===.................................................................",
+    "......= ==...................................................................",
+    "....... .....................................................................",
+    "......= =....................................................................",
+    "..===== =====................................................................",
+    "..=         ===..............................................................",
+    "..= PP    =W  =..............................................................",
+    "..= QP      ===..............................................................",
+    "..= QQ      =................................................................",
+    "..= Q       =................................................................",
+    "..=         =................................................................",
+    ".............................................................................",
+    ".............................................................................",
+    "......... ...................................................................",
+    ".............................................................................",
+    "......#   #..................................................................",
+    ".....##   #..................................................................",
+    "..####   W###................................................................",
+    "..#    #    #................................................................",
+    "..#  #W   ###................................................................",
+    "..#  #    #..................................................................",
+    "..#####I~I#..................................................................",
+    "......#   #..................................................................",
+    "......#  I#..................................................................",
+    "......#   #..................................................................",
+    "......# I #..................................................................",
+    "......#   #..................................................................",
+    "......#I I#..................................................................",
+    "......#   #..................................................................",
+    "......#   #..................................................................",
+    "......#   #..................................................................",
+    "....###   ###................................................................",
+    "....#       #................................................................",
+    "....#    #  #................................................................",
+    "....#       #................................................................",
+    "....#     T #................................................................",
+    "....#   #   #................................................................",
+    "....#       #................................................................",
+    "....#T      #................................................................",
+    "....###   ###................................................................",
+    "......#   #..................................................................",
+    "......#   #..................................................................",
+    "......#   #...............................++++++++...........................",
+    "......#PPP#...............................+     h+...........................",
+    "......#~~~#...............................+      +...........................",
+    "......#WWW#######################+#+#+#+#++      ++++++++++++++..............",
+    "......#~~~W~ ###         #       +   +                    +  o+........###...",
+    "......#   W~ ###         # # #     +         TT         + B oo+........#o#...",
+    "......# PP~  ~~~           #  W  +   +       TT          W+  o+........# #...",
+    "......####################### ##B+#+#+#+#++      +++++++  +++++........# #...",
+    "...........................#   # #........++++++++.....++++............# #...",
+    "...........................##### #.....................................# #...",
+    ".............................#   #...################################### #...",
+    "...................########### ###...#                                   #...",
+    "...................#           #.....# ###################################...",
+    "...................# ###########.....# #.....................................",
+    "...################# #...............# #####################################.",
+    "...#                 #...............#                                     #.",
+    "...# #################...............##################################### #.",
+    "...# #...................................................................# #.",
+    "...# ##################################################################### #.",
+    "...#                                                                       #.",
+    "...#########################################################################.",
+    "............................................................................."})
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Deleted: trunk/data/levels/enigma_vii/joe13_1.xml
===================================================================
--- trunk/data/levels/enigma_vii/joe13_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vii/joe13_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,144 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Manuevre" el:subtitle="" el:id="joe13"/>
-      <el:version el:score="1" el:release="1" el:revision="0" el:status="released"/>
-      <el:author  el:name="Joseph Dunne" el:email="josephdunne1993 at hotmail.com" el:homepage=""/>
-      <el:copyright>Copyright ? 2006 Joseph Dunne</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.00">
-       <el:dependency el:path="lib/ant" el:id="lib/ant" el:release="1" el:preload="true"/>
-      </el:compatibility>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:comments>
-        <el:code>Lua 5.1 and XML converted by Leveladministrators</el:code>
-      </el:comments>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-cells={}
-cells[" "]=cell{floor="fl-sahara"}
-cells["."]=cell{floor="fl-sand"}
-cells["'"]=cell{floor="fl-metal"}
-cells["`"]=cell{floor="fl-red"}
-cells[","]=cell{floor="fl-leaves"}
-cells["-"]=cell{floor="fl-space"}
-cells[":"]=cell{floor="fl-water"}
-cells["w"]=cell{floor="fl-gradient2"}
-cells["y"]=cell{floor="fl-gradient7"}
-cells["d"]=cell{floor="fl-gradient3"}
-cells["n"]=cell{floor="fl-gradient5"}
-cells["x"]=cell{floor="fl-gradient1"}
-cells["v"]=cell{floor="fl-gradient6"}
-cells["a"]=cell{floor="fl-gradient4"}
-cells["r"]=cell{floor="fl-gradient8"}
-cells["e"]=cell{floor="fl-gradient10"}
-cells["c"]=cell{floor="fl-gradient9"}
-cells["z"]=cell{floor="fl-gradient11"}
-cells["q"]=cell{floor="fl-gradient12"}
-cells["0"]=cell{floor="fl-abyss"}
-cells["f"]=cell{stone="st-puzzle-w"}
-cells["b"]=cell{stone="st-puzzle-s"}
-cells["h"]=cell{stone="st-puzzle-e"}
-cells["t"]=cell{stone="st-puzzle-n"}
-cells["W"]=cell{stone="st-puzzle2-n"}
-cells["R"]=cell{stone="st-puzzle2-ns"}
-cells["V"]=cell{stone="st-puzzle2-ew"}
-cells["A"]=cell{stone="st-puzzle2-w"}
-cells["X"]=cell{stone="st-puzzle2-s"}
-cells["D"]=cell{stone="st-puzzle2-e"}
-cells["Q"]=cell{stone="st-puzzle2-nw"}
-cells["Z"]=cell{stone="st-puzzle2-sw"}
-cells["C"]=cell{stone="st-puzzle2-es"}
-cells["E"]=cell{stone="st-puzzle2-ne"}
-cells["F"]=cell{stone="st-puzzle2-nsw"}
-cells["B"]=cell{stone="st-puzzle2-esw"}
-cells["H"]=cell{stone="st-puzzle2-nes"}
-cells["T"]=cell{stone="st-puzzle2-new"}
-cells["S"]=cell{stone="st-puzzle2-nesw"}
-cells["&"]=cell{stone="st-yellow"}
-cells["$"]=cell{stone="st-wood"}
-cells["@"]=cell{stone="st-metal"}
-cells["!"]=cell{stone="st-bolder-e"}
-cells["{"]=cell{stone="st-stoneimpulse"}
-cells["#"]=cell{stone="st-blue-sand"}
-cells[">"]=cell{stone="st-oneway-n"}
-cells["o"]=cell{actor={"ac-whiteball-small", {player=0, essential=1}}}
-cells["+"]=cell{item="it-hollow"}
-cells["m"]=cell{item="it-magicwand"}
-cells["1"]=cell{item={"it-vortex-open", {targetx="16.5", targety="11.5"}}}
-cells["2"]=cell{item={"it-vortex-open", {targetx="18.5", targety="14.5"}}}
-cells["3"]=cell{item={"it-vortex-open", {targetx="20.5", targety="14.5"}}}
-cells["4"]=cell{item={"it-vortex-open", {targetx="22.5", targety="11.5"}}}
-cells["5"]=cell{item={"it-vortex-open", {targetx="17.5", targety="1.5"}}}
-cells["6"]=cell{item={"it-vortex-open", {targetx="17.5", targety="2.5"}}}
-cells["7"]=cell{item={"it-vortex-open", {targetx="17.5", targety="4.5"}}}
-cells["8"]=cell{item={"it-vortex-open", {targetx="17.5", targety="6.5"}}}
-
if difficult then
    -- Normal Mode
    level = {
-    "#######################################",
-    "#qweqwweaaddqweda #qweqweqweqweqweqwwe#",
-    "#a&dzxxcaaddzxcda #a&da&da&da&da7da&&d#",
-    "#a&d###############zxczxczxczxczxczxxc#",
-    "#a d#&wwedadadada #:#qweqweqweqweqweqe#",
-    "#a&d#aqe&##########:#a&da&da8da&da6dad#",
-    "#a d#&add#aaaaada #:#zxczxczxczxczxczc#",
-    "#a&d#aad&#raaaa####:####qwwwwwwwwwwwwe#",
-    "#zxc#&add#wraaa#&&   &&#aqwwwwwwwwwwed#",
-    "#qwe#azc&#x&raa###   ###azxxxxxxx&5&dd#",
-    "#zxc#zxxc#x&wra# $   $ #a&xxxxxxxxxxcd#",
-    "#+&+#+&  #+&wwr#w#   #w#zxxxxxxxxxxxxc#",
-    "##################$ $##################",
-    "#        qwwwwwea& & &nxxxxxxxxxxxxxxv#",
-    "# &   &  aqwwweda&w&w&dqwwwwwwwwwwwwea#",
-    "#        aaqwedda&&&&&daqwwwwwww&wweda#",
-    "&&,     &aaa&dddaaa&dddaaqwwe&wwwwedda#",
-    "&o,&    &aaaadddaaa&dd&aaaqed&wwwedd&a#",
-    "&&,     &aaaadddaaa&dddaaaadd&1&xcdd3a#",
-    "#o    & &aaaadd&aaa&dddaa&add&xxxxcd&a#",
-    "##      &aaazcddaaa&dddaaaadd&&nxxxcda#",
-    "#o  &   &aazxxcdaazxcddaaa&dd&&dnxxxca#",
-    "##      &azxxx&daz&xxcdaazxcd&xcdqweqr#",
-    "#o      &zxxxxxczxxxxxcazxxxc&nxcr2da4#",
-    "#######################################",
-    }
else
     -- Easy Mode
    level = {
-    "#######################################",
-    "#qweqwweaaddqweda #qweqweqweqweqweqwwe#",
-    "#a dzxxcaaddzxcda #a da da da da7da  d#",
-    "#a d###############zxczxczxczxczxczxxc#",
-    "#a d#qwweaaaaaaaa #:#qweqweqweqweqweqe#",
-    "#a&d#aqed##########:#a da da8da da6dad#",
-    "#a d#aadd#aaaaaaa # #zxczxczxczxczxczc#",
-    "#a d#aadd#raaaa#### ####qwwwwwwwwwwwwe#",
-    "#zxc#aadd#wraaa#       #aqwwwwwwwwwwed#",
-    "#qwe#azcd#x&raa###   ###azxxxxxxx&5&dd#",
-    "#zxc#zxxc#x&wra# $: :$ #a&xxxxxxxxxxcd#",
-    "#+&+#+&  #+&wwr#w#   #w#zxxxxxxxxxxxxc#",
-    "##################$ $##################",
-    "#        qwwwwwea& & &nxxxxxxxxxxxxxxv#",
-    "#        aqwwweda&w&w&dqwwwwwwwwwwwwea#",
-    "#        aaqwedda&&&&&daqwwwwwwwwwweda#",
-    "&&,     &aaa&dddaaa&dddaaqwwe&wwwwedda#",
-    "&o,     &aaaadddaaa&dddaaaqed&wwwedd&a#",
-    "&&,     &aaaadddaaa&dddaaaadd&1&xcdd3a#",
-    "#o      &aaaadddaaa&dddaaaadd&xxxxcd&a#",
-    "##      &aaazcddaaa&dddaaaadd&&nxxxcda#",
-    "#o      &aazxxcdaazxcddaaa&dd&&dnxxxca#",
-    "##      &azxxx&dazxxxcdaazxcd&xcdqweqr#",
-    "#o      &zxxxxxczxxxxxcazxxxc&nxcr2da4#",
-    "#######################################",
-    }
-end
-
-set_default_parent(cells[" "])
-create_world_by_map(level,cells)
-oxyd_shuffle()
-    ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>
-

Copied: trunk/data/levels/enigma_vii/joe13_2.xml (from rev 1854, trunk/data/levels/enigma_vii/joe13_1.xml)
===================================================================
--- trunk/data/levels/enigma_vii/joe13_1.xml	2009-11-10 23:18:08 UTC (rev 1854)
+++ trunk/data/levels/enigma_vii/joe13_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -0,0 +1,98 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Manuevre" el:subtitle="" el:id="joe13"/>
+      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
+      <el:author el:name="Joseph Dunne" el:email="josephdunne1993 at hotmail.com" el:homepage=""/>
+      <el:copyright>Copyright ? 2006 Joseph Dunne</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments><el:code>New API converted by /dev/null (November 2009)</el:code></el:comments>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+ti[" "] = {"fl_sahara"}
+ti["."] = {"fl_lawn"}
+ti["~"] = {"fl_water"}
+ti["7"] = {"fl_slope_ose"}
+ti["8"] = {"fl_slope_ps"}
+ti["9"] = {"fl_slope_osw"}
+ti["4"] = {"fl_slope_pe"}
+ti["6"] = {"fl_slope_pw"}
+ti["1"] = {"fl_slope_one"}
+ti["2"] = {"fl_slope_pn"}
+ti["3"] = {"fl_slope_onw"}
+ti["^"] = {"fl_slope_ine"}
+ti[">"] = {"fl_slope_ise"}
+ti["v"] = {"fl_slope_isw"}
+ti["<"] = {"fl_slope_inw"}
+ti["#"] = {"st_bluesand"}
+ti["="] = {"st_yellow"}
+ti["+"] = {"st_box"}
+ti["vortABCD"] = {"it_vortex", destination = "destABCD%%", state = OPEN}
+ti["vortEFGH"] = {"it_vortex", destination = "destEFGH%%", state = OPEN}
+ti["destABCD"] = {"fl_slope_pn", "destABCD%%"}
+ti["destEFGH"] = {"fl_sahara", "destEFGH%%"}
+if wo["IsDifficult"] then
+    ti["_"] = ti["="]
+    ti[":"] = ti["~"]
+    ti[";"] = ti[" "]
+    ti["-"] = ti["="]
+    ti["z"] = ti["="]
+    ti["Z"] = ti["="]
+    ti["y"] = ti["="]
+    ti["Y"] = ti["="]
+    ti["x"] = ti["="]
+    ti["5"] = ti["4"]
+else
+    ti["_"] = ti[" "]
+    ti[":"] = ti[" "]
+    ti[";"] = ti["~"]
+    ti["-"] = ti[" "]
+    ti["z"] = ti["4"]
+    ti["Z"] = ti["6"]
+    ti["y"] = ti["8"]
+    ti["Y"] = ti["2"]
+    ti["x"] = ti["<"]
+    ti["5"] = ti["6"]
+end
+ti["o"] = {"it_meditation"}
+ti["@"] = {"#ac_pearl", essential = INDISPENSABLE}
+
+local resAutotile = res.autotile(ti, {"A", "D", "vortABCD"}, {"E", "H", "vortEFGH"}, {"a", "d", "destABCD"}, {"e", "h", "destEFGH"})
+wo(resAutotile, " ", {
+    "#######################################",
+    "#<2^<22^6644<2^46e#<2^<2^<2^<2^<2^<22^#",
+    "#6-4v88>6644v8>46f#6-46-46-46-46G46--4#",
+    "#6-4###############v8>v8>v8>v8>v8>v88>#",
+    "#6 4#x22^56565656g#~#<2^<2^<2^<2^<2^<^#",
+    "#6=4#6<^z##########~#6-46-46H46-46F464#",
+    "#6 4#Z644#6666656h#:#v8>v8>v8>v8>v8>v>#",
+    "#6-4#664z#36666####:####<222222222222^#",
+    "#v8>#Z644#23666#__   __#6<2222222222^4#",
+    "#<2^#6v>z#8=366###   ###6v8888888=E=44#",
+    "#v8>#v88>#8=236# +; ;+ #6=8888888888>4#",
+    "#o=o#o=  #o=223#a#   #d#v888888888888>#",
+    "##################+ +##################",
+    "#        <22222^6= = =7888888888888889#",
+    "# -   -  6<222^46=b=c=4<222222222222^6#",
+    "#        66<2^446=====46<2222222Y22^46#",
+    "==.     =666=444666=44466<22^=2222^446#",
+    "=@.-    =6666444666=44z666<^4=222^44=6#",
+    "==.     =6666444666=444666644=A=8>44C6#",
+    "#@    - =666644z666=44466Z644=8888>4=6#",
+    "##      =666v>44666=444666644==7888>46#",
+    "#@  -   =66v88>466v8>44666=44==47888>6#",
+    "##      =6v888=46vy88>466v8>4=8>4<2^<3#",
+    "#@      =v88888>v88888>6v888>=78>3B46D#",
+    "#######################################"})
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_vii/mecke09_2.xml
===================================================================
--- trunk/data/levels/enigma_vii/mecke09_2.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_vii/mecke09_2.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,7 +3,7 @@
   <el:protected >
     <el:info el:type="level">
       <el:identity el:title="Audience in Venice" el:subtitle="Press the Triggers" el:id="mecke9"/>
-      <el:version el:score="1" el:release="2" el:revision="$Revision: 41 $" el:status="released"/>
+      <el:version el:score="1" el:release="2" el:revision="$Revision: 42 $" el:status="released"/>
       <el:author el:name="mecke" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 Thomas Bernhardt</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -143,12 +143,12 @@
 ti["t1"] = ti[" %"] .. {"it_trigger", target="olli1", action="toggle"}
 ti["t2"] = ti[" 1"] .. {"it_trigger", target="olli2", action="toggle"}
 ti["t3"] = ti[" /"] .. {"it_trigger", target="olli3", action="toggle"}
-ti["t4"] = ti[" ,"] .. {"it_trigger", target="olli4", action="toggle"}
+ti["t4"] = ti[" %"] .. {"it_trigger", target="olli4", action="toggle"}
 ti["t5"] = ti[" %"] .. {"it_trigger", target="olli5", action="toggle"}
 ti["t6"] = ti[" %"] .. {"it_trigger", target="olli6", action="toggle"}
 ti["t7"] = ti[" %"] .. {"it_trigger", target="olli7", action="toggle"}
 ti["t8"] = ti[" !"] .. {"it_trigger", target="lezy1", action="toggle"}
-ti["t9"] = ti[" %"] .. {"it_trigger", target="olli9", action="toggle"}
+ti["t9"] = ti[" ,"] .. {"it_trigger", target="olli9", action="toggle"}
 ti["~ "] = {"st_laser_e", name="lezy1"}
 ti["- "] = {"st_laser_n", name="lezy2"}
 ti["d1"] = ti[" /"] .. {"st_door", faces="ew", name= "olli1"}

Modified: trunk/data/levels/enigma_viii/andreas56_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/andreas56_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_viii/andreas56_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="5 Days and 5 Nights" el:subtitle="" el:id="andreas56"/>
-      <el:version el:score="1" el:release="1" el:revision="2" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
       <el:author el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2009 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -25,7 +25,7 @@
 ti["Y"] = {"st_yinyang", loop = false, target = "change_design"}
 ti["B"] = {"st_blur_cross"}
 ti["S"] = {"st_surprise", selection = {"st_passage_black", "st_passage_white"}}
-ti["@"] = {"#ac_marble", essential = INDISPENSABLE}
+ti["@"] = {"#ac_pearl_black", essential = INDISPENSABLE, controllers = CTRL_YIN, owner = YIN}
 
 if wo["IsDifficult"] then
     ti["%"] = {"#ac_killer", controllers = CTRL_YANG, adhesion = 0.7, owner = YANG}

Modified: trunk/data/levels/enigma_viii/cel2_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/cel2_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_viii/cel2_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,12 +3,12 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Pentachromos" el:subtitle="Combined effort level 2" el:id="cel2"/>
-      <el:version el:score="1" el:release="1" el:revision="3" el:status="released"/>
-      <el:author  el:name="Joseph Dunne, Ronald Lamprecht, Dominik Lehmann, Mark Pulley, Lukas Sch?ller" el:email="" el:homepage=""/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="stable"/>
+      <el:author  el:name="J.Dunne, R.Lamprecht, D.Lehmann, M.Pulley, L.Sch?ller" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2009 Joseph Dunne, Ronald Lamprecht, Dominik Lehmann, Mark Pulley, Lukas Sch?ller</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
       <el:compatibility el:enigma="1.10">
-        <el:dependency el:path="lib/liblua" el:id="lib/liblua" el:release="1" el:preload="true"/>
+        <el:dependency el:path="lib/libmap" el:id="lib/libmap" el:release="1" el:preload="true"/>
       </el:compatibility>
       <el:modes el:easy="false" el:single="true" el:network="false"/>
       <el:score el:easy="-" el:difficult="-"/>
@@ -21,14 +21,22 @@
 ti["j "] = {"fl_lawn"}
 ti["j0"] = {"fl_water"}
 ti["j,"] = {"fl_red"}
+ti["js"] = ti["j "] .. {"it_sensor", invisible=true, target="dest_enter"}
+ti["je"] = ti["j "] .. {"it_sensor_exit", invisible=true, target="dest_exit"}
 ti["j*"] = ti["j "] .. {"st_stoneimpulse"}
 ti["j{"] = ti["j "] .. {"st_rotator_ccw"}
 ti["j#"] = ti["j "] .. {"st_bluesand"}
 ti["j%"] = ti["j "] .. {"st_yellow"}
 ti["j&"] = ti["j "] .. {"st_grate_cross"}
+ti["jg"] = ti["js"] .. {"st_grate_cross"}
 ti["j$"] = ti["j "] .. {"st_box_wood"}
-ti["j8"] = ti["j "] .. {"st_boulder_n"}
+ti["j8"] = ti["js"] .. {"st_boulder_n"}
 ti["j!"] = ti["j "] .. {"st_swap"}
+ti["j^"] = ti["js"] .. {"st_swap"}
+ti["jx"] = ti["js"] .. {"st_puzzle_blue_s"}
+ti["jw"] = ti["js"] .. {"st_puzzle_blue_n"}
+ti["ja"] = ti["js"] .. {"st_puzzle_blue_w"}
+ti["jd"] = ti["js"] .. {"st_puzzle_blue_e"}
 ti["j)"] = ti["j "] .. {"st_oneway_n"}
 ti["j("] = ti["j "] .. {"st_oneway_s"}
 ti["jW"] = ti["j "] .. {"st_puzzle_blue_n"}
@@ -46,33 +54,74 @@
 ti["j~"] = ti["j "] .. {"it_key", code=3}
 ti["jv"] = ti["j "] .. {"it_vortex_closed", name="vortex_j_b", destination="vortex_j", autoclose=true, autoopen=true}
 
+map_joseph = {
+    "####################00000000000000000000",
+    "################   **0000000000000000000",
+    "##&&  ~& &    **)#(#*###0000000000000000",
+    "##0$*%%%%%%%# #!0#0 DA&#0000000000000000",
+    "#0000%,,,,,%C R 0#0#  `#0000000000000000",
+    "#0007%%%%%,%EVQ 0#0#####0000000000000000",
+    "#{000000#%%%    000#00000000000000000000",
+    "#0000000##         #00000000000000000000",
+    "#ssxss####   X DZ  #00000000000000000000",
+    "#ssdwsg##    R# R  #00000000000000000000",
+    "#e^^as8gg       R  #00000000000000000000",
+    "#vesssg##          #00000000000000000000",
+    "###**###############00000000000000000000"
+}
+
+function dest_enter(value, sender)
+    no["vortex_j"]["destination"] = sender
+end
+
+function dest_exit(value, sender)
+    no["vortex_j"]["destination"] = no["vortex_j_b"]
+end
+
+
 -- Ronald Lamprecht
 
 ti["r "] = {"fl_lawn", friction=6.0}
 ti["r~"] = {"fl_abyss"}
-ti["r#"] = ti["r "] .. {"st_granite"}
-ti["re"] = ti["r "] .. {"it_vortex_closed", name="vortexRale", destination = "vortex_r", autoclose=true, autoopen=true}
-ti["rs"] = (ti["r "] .. {"it_vortex_closed", name="vortexRals", autoclose=true}) .. {"st_shogun_s"}
-ti["rm"] = (ti["r "] .. {"it_vortex_closed", name="vortexRalm", autoclose=true}) .. {"st_shogun_m"}
-ti["rl"] = (ti["r "] .. {"it_vortex_closed", name="vortexRall", autoclose=true}) .. {"st_shogun_l"}
-ti["rI"] = ti["r "] .. {"st_stoneimpulse"}
-ti["rd"] = ti["r "] .. {"it_shogun_l", target="ral_door1", action="toggle"}
-ti["rh"] = ti["r "] .. {"st_door_d_ew", name="ral_door1"}
-ti["rW"] = ti["r "] .. {"st_box_wood"}
-ti["rX"] = ti["r "] .. {"st_swap"}
-ti["rt"] = ti["r "] .. {"it_trigger", target="ral_bridge1a", action="toggle"}
-ti["ru"] = ti["r "] .. {"it_trigger", target="ral_bridge2b", action="toggle"}
-ti["rv"] = ti["r "] .. {"it_trigger", target="ral_bridge3c", action="toggle"}
-ti["ra"] = {"fl_bridge_bw", state = OPEN, name="ral_bridge1a"}
-ti["rb"] = {"fl_bridge_bw", state = OPEN, name="ral_bridge2b"}
-ti["rc"] = {"fl_bridge_bw", state = OPEN, name="ral_bridge3c"}
-ti["r."] = ti({"fl_abyss"}) .. {"it_seed"}
-ti["rf"] = {"fl_lawn"} .. ti({"it_floppy"})
-ti["rF"] = {"fl_lawn"} .. ti({"st_floppy", target="ral_fdoor", action="toggle"})
-ti["rG"] = ti["r "] .. {"st_door_d_ew", name="ral_fdoor"}
-ti["rj"] = {"fl_lawn", friction=6.0} .. ti({"it_key", code=1})
-ti["rK"] = {"fl_lawn", friction=6.0} .. ti({"it_key", code=4})
+ti["r#"] = {"st_granite"} .. ti["r "]
+ti["re"] = {"it_vortex_closed", name="vortexRale", destination = "vortex_r", autoclose=true, autoopen=true} .. ti["r "]
+ti["rs"] = {"it_vortex_closed", name="vortexRals", destination = "vortex_r", autoclose=true, autoopen=true} .. {"st_shogun_s"} .. ti["r "]
+ti["rm"] = {"it_vortex_closed", name="vortexRalm", destination = "vortex_r", autoclose=true, autoopen=true} .. {"st_shogun_m"} .. ti["r "]
+ti["rl"] = {"it_vortex_closed", name="vortexRall", destination = "vortex_r", autoclose=true, autoopen=true} .. {"st_shogun_l"} .. ti["r "]
+ti["rI"] = {"st_stoneimpulse"} .. ti["r "]
+ti["rd"] = {"it_shogun_l", target="ral_bridge4"} .. ti["r "]
+ti["rg"] = {"st_grate"} .. ti["r "]
+ti["rW"] = {"st_box_wood"} .. ti["r "]
+ti["rX"] = {"st_swap"} .. ti["r "]
+ti["rt"] = {"it_trigger", target="ral_bridge1a"} .. ti["r "]
+ti["ru"] = {"it_trigger", target="ral_bridge2b"} .. ti["r "]
+ti["rv"] = {"it_trigger", target="ral_bridge3c"} .. ti["r "]
+ti["ra"] = {"fl_bridge_bw", state=OPEN, name="ral_bridge1a"}
+ti["rb"] = {"fl_bridge_bw", state=OPEN, name="ral_bridge2b"}
+ti["rc"] = {"fl_bridge_bw", state=OPEN, name="ral_bridge3c"}
+ti["r."] = {"fl_abyss"} .. ti{"it_seed"}
+ti["rf"] = {"fl_lawn"} .. ti{"it_floppy"}
+ti["rF"] = {"fl_lawn"} .. ti{"st_floppy", target="ral_fdoor"}
+ti["rG"] = {"st_door_d_ew", name="ral_fdoor"} .. ti["r "]
+ti["rj"] = {"it_key", code=1} .. ti{"fl_bridge_bw", state=OPEN, name="ral_bridge4"}
+ti["rK"] = {"it_key", code=4} .. ti["r "]
 
+map_ronald = {
+    "#######################################",
+    "#            ~~~~~~#                  #",
+    "#                #~~~~~~~~~~~~~~~~~~~ #",
+    "#     I~~    ~#          ~~~~~~~~~~~~ #",
+    "#     Is     ~#          ~~~~~~~~~~~~ #",
+    "###   I~~    ~#          ~~~~~~   ~~~ #",
+    "#jG e Im  gd ~~~ WtXuWv  .a.b.c K ...f#",
+    "##F   I~~    ~#          ~~~~~~   ~~~ #",
+    "#     Il     ~#          ~~~~~~~~~~~~ #",
+    "#     I~~    ~#          ~~~~~~~~~~~~ #",
+    "#                #~~~~~~~~~~~~~~~~~~~ #",
+    "#            ~~~~~~#                  #",
+    "#######################################"
+}
+
 -- Dominik Lehmann
 
 ti["z "] = {"fl_dark"}
@@ -316,20 +365,6 @@
 
 ti["@@"] = ti["  "] .. {"#ac_marble"}
 
-map_ronald = {"r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#",
-              "r#r r r r r r r r r r r r r~r~r~r~r~r~r#r r r r r r r r r r r r r r r r r r r#",
-              "r#r r r r r r r r r r r r r r r r r#r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r r#",
-              "r#r r r r r r rIr~r~r r r r~r#r r r r r r r r r r r~r~r~r~r~r~r~r~r~r~r~r~r r#",
-              "r#r r r r r r rIrsr r r r r~r#r r r r r r r r r r r~r~r~r~r~r~r~r~r~r~r~r~r r#",
-              "r#r#r#r#r r r rIr~r~r r r r~r#r r r r r r r r r r r~r~r~r~r~r~r r r r~r~r~r r#",
-              "r#rjrhrGr rer rIrmr r rdr r~r~r~r rWrtrXrurWrvr r r.rar.rbr.rcr rKr r.r.r.rfr#",
-              "r#r#r#rFr r r rIr~r~r r r r~r#r r r r r r r r r r r~r~r~r~r~r~r r r r~r~r~r r#",
-              "r#r r r r r r rIrlr r r r r~r#r r r r r r r r r r r~r~r~r~r~r~r~r~r~r~r~r~r r#",
-              "r#r r r r r r rIr~r~r r r r~r#r r r r r r r r r r r~r~r~r~r~r~r~r~r~r~r~r~r r#",
-              "r#r r r r r r r r r r r r r r r r r#r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r~r r#",
-              "r#r r r r r r r r r r r r r~r~r~r~r~r~r#r r r r r r r r r r r r r r r r r r r#",
-              "r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#r#"}
-
 map_dominik = {"z#z#z#z#z#z#z#z#z#z#z#z#z#z#z#z#z#z#z#z#",
                "z#z z z z6z#z z z3z z at zhzizjz#z!z9z8z7z#",
                "z#z z+z zez#z z z#z4z[z#z#z#z#z#z#z#z z#",
@@ -372,19 +407,6 @@
             "p#ppp pqp#p1p>p p>p pEp pQp pKp p>p+pwp#",
             "p#p#p#p#p#p#p#p#p#p#p#p#p#p#p#p#p#p#p#p#"}
 
-map_joseph = {"j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#",
-              "j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#j j j j*j*",
-              "j#j#j&j&j j j~j&j j&j j j j j*j*j)j#j(j#j*j#j#j#",
-              "j#j#j0j$j*j%j%j%j%j%j%j%j#j j#j!j0j#j0j jDjAj&j#",
-              "j#j0j0j0j0j%j,j,j,j,j,j%jCj jRj j0j#j0j#j j j`j#",
-              "j#j0j0j0j7j%j%j%j%j%j,j%jEjVjQj j0j#j0j#j#j#j#j#",
-              "j#j{j0j0j0j0j0j0j#j%j%j%j j j j j0j0j0j#",
-              "j#j0j0j0j0j0j0j0j#j#j j j j j j j j j j#",
-              "j#j j jXj j j#j#j#j#j j j jXj jDjZj j j#",
-              "j#j j jDjWj j&j#j#j j j j jRj#j jRj j j#",
-              "j#j j!j!jAj j8j&j&j j j j j j j jRj j j#",
-              "j#jvj j j j j&j#j#j j j j j j j j j j j#",
-              "j#j#j#j*j*j#j#j#j#j#j#j#j#j#j#j#j#j#j#j#"}
 
 map_main = {" # # # # # # #7a #3a #5a #6d #3d #9c # #",
             "j#j    a   P1A  2A  4A  9C  8B  3D  7Ej#",
@@ -412,13 +434,17 @@
             "j# 0j j j  0j p p p p p p r  0r r r  0r#",
             "j#j#j#j#j#j#j#p#p#p#p#p#p#r#r#r#r#r#r#r#"}
 
-wo(ti, "~~", 153, 37)
-wo:drawMap(ti, po(0,0), "??", map_ronald)
+wo(ti, "  ", 153, 37)
+
+--dm = wo:newMap("j ", map_joseph):defuse()
+--dm[2]:print()
+
+wo:drawMap(ti, po(0,0), "r" * wo:newMap("?", map_ronald))
 wo:drawMap(ti, po(57,0), "??", map_dominik)
 wo:drawMap(ti, po(95,0), "??", map_lukas)
 wo:drawMap(ti, po(133,0), "??", map_main)
 wo:drawMap(ti, po(57,24), "??", map_mark)
-wo:drawMap(ti, po(95,24), "??", map_joseph)
+wo:drawMap(ti, po(0,24), "j" * wo:newMap("?", map_joseph))
 wo:add({"ot_counter", "LaserFunc", state = 0, target_3 = "ItemDoor2", action_3 = "close"})
 wo:shuffleOxyd()
  ]]></el:luamain>

Modified: trunk/data/levels/enigma_viii/devnull19_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/devnull19_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_viii/devnull19_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Near Halley I" el:subtitle="" el:id="devnull19"/>
-      <el:version el:score="1" el:release="1" el:revision="7" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="8" el:status="released"/>
       <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -17,6 +17,8 @@
       <el:score el:easy="2:30" el:difficult="7:00"/>
     </el:info>
     <el:luamain><![CDATA[
+wo["FallenPuzzle"] = "=  "
+
 ti["  "] = {"fl_ice"}
 ti["bo"] = ti["  "] .. {"st_passage_black_frame"}
 ti["wo"] = ti["  "] .. {"st_passage_white_frame"}
@@ -25,7 +27,6 @@
 ti["@b"] = ti["  "] .. {"#ac_marble_black", essential = INDISPENSABLE}
 ti["@w"] = ti["  "] .. {"#ac_marble_white", essential = INDISPENSABLE}
 ti["P"] = ti["  "] .. {"st_puzzle_blue", intensity = 4}
-
 if wo["IsDifficult"] then
     ti[".."] = {"fl_abyss"}
     ti["##"] = ti[".."] .. {"st_rawglass"}
@@ -40,7 +41,7 @@
     ti["S"] = ti[".."] .. {"st_puzzle", cluster = 1, intensity = 5}
 end
 
-w, h = wo(res.puzzle(ti, "P", "S"), "..", {
+wo(res.puzzle(ti, "P", "S"), "..", {
     "      wo          @b            wo      ",
     "  o   wo            P1P1        wo  o   ",
     "  o   wo              P1        wo  o   ",
@@ -53,8 +54,7 @@
     "  O   bo    P1P1P1              bo  O   ",
     "  O   bo        P1              bo  O   ",
     "  O   bo        P1P1            bo  O   ",
-    "      bo            @w          bo      "
-})
+    "      bo            @w          bo      "})
 
 wo:shuffleOxyd({"north#*", max = 0}, {"south#*", max = 0})
 
@@ -64,7 +64,7 @@
     wo:add(YIN, {"it_pin"})
     wo:add(YANG, {"it_pin"})
 end
-    ]]></el:luamain>
+ ]]></el:luamain>
     <el:i18n>
       <el:string el:key="title">
         <el:english el:translate="false"/>

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_viii/index.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="63" title="Enigma VIII"/>
+  <info enigma="1.10" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="64" title="Enigma VIII"/>
 
   <attributes/>
 
@@ -39,7 +39,7 @@
     <level _seq="31" _title="Colored Turnstiles" _xpath="./andreas51_1" author="Andreas Lochmann" ctrl="force" easy="false" id="andreas51" rel="1" rev="7" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Sanssouci" _xpath="./mecke05_1" author="mecke" ctrl="force" easy="true" id="mecke05" rel="1" rev="40" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Wired Shogun" _xpath="./ral34_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080828ral417" rel="1" rev="129" score="1" target="time" unit="duration"/>
-    <level _seq="34" _title="Scarlet's Necklace" _xpath="./ral30_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080814ral422" rel="1" rev="166" score="1" target="time" unit="duration"/>
+    <level _seq="34" _title="Scarlett's Necklace" _xpath="./ral30_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080814ral422" rel="1" rev="191" score="1" target="time" unit="duration"/>
     <level _seq="35" _title="- Meditation -" _xpath="./raoul31_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul31" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="36" _title="Relaxing at the sea" _xpath="./devnull08_1" author="/dev/null" ctrl="force" easy="true" id="devnull08" rel="1" rev="23" score="1" target="time" unit="duration"/>
     <level _seq="37" _title="Helios II" _xpath="./mecke08_1" author="mecke" ctrl="force" easy="true" id="mecke08" rel="1" rev="26" score="1" target="time" unit="duration"/>
@@ -70,11 +70,11 @@
     <level _seq="62" _title="Sokopal" _xpath="./andreas55_2" author="Andreas Lochmann, Ronald Lamprecht" ctrl="force" easy="true" id="andreas55" rel="2" rev="7" score="2" target="time" unit="duration"/>
     <level _seq="63" _title="Mole Hill Meditation" _xpath="./ral43_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20090112ral228" rel="1" rev="139" score="1" target="time" unit="duration"/>
     <level _seq="64" _title="Involution" _xpath="./raoul32_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul32" rel="1" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="65" _title="Near Halley I" _xpath="./devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="7" score="1" target="time" unit="duration"/>
+    <level _seq="65" _title="Near Halley I" _xpath="./devnull19_1" author="/dev/null" ctrl="force" easy="true" id="devnull19" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="66" _title="Two Is A Company I" _xpath="./devnull24_1" author="/dev/null" ctrl="force" easy="true" id="devnull24" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="67" _title="Two Is A Company II" _xpath="./devnull25_1" author="/dev/null" ctrl="force" easy="true" id="devnull25" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="68" _title="CrissCross" _xpath="./devnull26_1" author="/dev/null" ctrl="force" easy="true" id="devnull26" rel="1" rev="2" score="1" target="time" unit="duration"/>
-    <level _seq="69" _title="5 Days and 5 Nights" _xpath="./andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="69" _title="5 Days and 5 Nights" _xpath="./andreas56_1" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas56" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="70" _title="Babylon" _xpath="./mecke27_1" author="mecke" ctrl="force" easy="true" id="mecke27" rel="1" rev="29" score="1" target="time" unit="duration"/>
     <level _seq="71" _title="Two Is A Company III" _xpath="./devnull27_1" author="/dev/null" ctrl="force" easy="false" id="devnull27" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="Panelled Puzzle I" _xpath="./ral32_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20080820ral639" rel="1" rev="179" score="1" target="time" unit="duration"/>
@@ -105,7 +105,7 @@
     <level _seq="97" _title="Crabwise I" _xpath="./devnull34_2" author="/dev/null" ctrl="force" easy="true" id="devnull34" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="98" _title="Crabwise II" _xpath="./devnull35_2" author="/dev/null" ctrl="force" easy="true" id="devnull35" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="99" _title="Wired Strips" _xpath="./ral38_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081223ral510" rel="1" rev="151" score="1" target="time" unit="duration"/>
-    <level _seq="100" _title="Pentachromos" _xpath="./cel2_1" author="Joseph Dunne, Ronald Lamprecht, Dominik Lehmann, Mark Pulley, Lukas Sch?ller" ctrl="force" easy="false" id="cel2" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="100" _title="Pentachromos" _xpath="./cel2_1" author="J.Dunne, R.Lamprecht, D.Lehmann, M.Pulley, L.Sch?ller" ctrl="force" easy="false" id="cel2" rel="1" rev="4" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_viii/ral30_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/ral30_1.xml	2009-11-13 23:49:32 UTC (rev 1857)
+++ trunk/data/levels/enigma_viii/ral30_1.xml	2009-11-15 13:52:31 UTC (rev 1858)
@@ -2,8 +2,8 @@
 <el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected >
     <el:info el:type="level">
-      <el:identity el:title="Scarlet's Necklace" el:subtitle="Who did broke the pearl necklace?" el:id="20080814ral422"/>
-      <el:version el:score="1" el:release="1" el:revision="$Revision: 166 $" el:status="released"/>
+      <el:identity el:title="Scarlett's Necklace" el:subtitle="Who broke the pearl necklace?" el:id="20080814ral422"/>
+      <el:version el:score="1" el:release="1" el:revision="$Revision: 191 $" el:status="released"/>
       <el:author  el:name="Ronald Lamprecht" el:email="ral at users.berlios.de"/>
       <el:copyright>Copyright ? 2008 Ronald Lamprecht</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -12,7 +12,7 @@
       </el:compatibility>
       <el:modes el:easy="true" el:single="true" el:network="false"/>
       <el:comments>
-        <el:credits el:showinfo="true" el:showstart="false">Pearl theme inspired by Jacob Scott, Scarlett story by Andreas Lochmann</el:credits>
+        <el:credits el:showinfo="true" el:showstart="false">Pearl theme inspired by Jacob Scott, Scarlet story by Andreas Lochmann</el:credits>
       </el:comments>
       <el:score el:easy="5:54" el:difficult="10:47"/>
     </el:info>
@@ -20,6 +20,7 @@
 wo["ConserveLevel"] = true
 
 ti[" "] = {"fl_dark"}
+ti["f"] = {"fl_dark", "f%%"}
 ti["="] = {"fl_bridge_bw", "bridge#"}
 ti["x"] = {"it_shogun_s", "x%%"}
 
@@ -46,11 +47,11 @@
 ti["d"] = {"it_document", text="story"}
 
 if wo["IsDifficult"] then
-    ti["S"] = {"st_coinslot", target="check"}
+    ti["T"] = {"st_coinslot", target="check"}
     ti["s"] = {"st_yellow"}
     ti["c"] = {"it_coin_s"}
 else
-    ti["S"] = {"st_switch", target="check"}
+    ti["T"] = {"st_switch", target="check"}
     ti["s"] = {"st_granite"}
     ti["c"] = ti[" "]
 end
@@ -69,18 +70,18 @@
    end
 end
 
-w, h = wo(res.autotile(myres,{"0","9","x"}), " ", {
-"{--------sS--------}",
+w, h = wo(res.autotile(myres,{"0","9","x"}, {"K","S","f"}), " ", {
+"{--------sT--------}",
 ".     cccccccc     |",
 ".0                9|",
-".                  |",
+".K                S|",
 ".      G JH I      |",
 ". 1   A B  C D   8 |",
-".       E  F       |",
+". L     E  F     R |",
 ".  2      @     7  |",
-".        cd        |",
+".   M    cd    Q   |",
 ".    3        6    |",
-".       4  5       |",
+".     N 4 O5 P     |",
 "(________  ________)",
 "X=== =  =  =  = ===X"
 })
@@ -88,7 +89,7 @@
 pearls = no["pearl#*"]:shuffle()
 
 function check(value, sender)
-    if value or sender:is("st_switch") then
+    if value or sender:is("st_switch") then  -- ignore coinslot off event
         no["bridge#*"]:open()
         no["oxyd"]:closeall()
         for i = 1, #pearls + 1 do
@@ -101,8 +102,9 @@
                     wo:add({"ot_wire", wirename, anchor1=pearl, anchor2=pearl_right})
                     pearl["_wires"] = cond(pearl["_wires"] == 1, 2, 1)
                     pearl_right["_wires"] = cond(pearl_right["_wires"] == 1, 2, 1)
+                elseif -no["wire"..pearls[pearl_right].."_"..pearls[pearl]] then
+                    wo[no["f%"..i]] = {"it_document", text="fault"}
                 end
-                wires = pearl["wires"]
                 if pearl["_wires"] == 2 then
                     fl(pearl.x, h-1):close()
                 end
@@ -120,8 +122,11 @@
         <el:english el:translate="true"/>
       </el:string>
       <el:string el:key="story">
-        <el:english el:translate="true" >Mrs. Scarlet's wonderful pearl necklace tore, and all the colorful pearls rolled onto the floor. Mrs. Scarlet doesn't remember the sequence, but she knows that adjacent pearls connect, when placed on dots when the switch flipped.</el:english>
+        <el:english el:translate="true" >Mrs. Scarlett's wonderful pearl necklace tore, and all the colorful pearls rolled onto the floor. Mrs. Scarlett doesn't remember the sequence, but she knows that succeeding pearls connect, when each is placed on a neigboring dot and a coin is inserted into the slot.</el:english>
       </el:string>
+      <el:string el:key="fault">
+        <el:english el:translate="true" >You did invert the sequence of this pair of pearls. You need to correct this fault to finish the necklace.</el:english>
+      </el:string>
     </el:i18n>
   </el:protected>
 </el:level>



From raoul at mail.berlios.de  Sun Nov 15 20:31:28 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 15 Nov 2009 20:31:28 +0100
Subject: [Enigma-game-svn] r1859 - in trunk: attic/images-floors data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64 src
Message-ID: <200911151931.nAFJVS1L015686@sheep.berlios.de>

Author: raoul
Date: 2009-11-15 20:31:24 +0100 (Sun, 15 Nov 2009)
New Revision: 1859

Added:
   trunk/attic/images-floors/fl-metalb.png
   trunk/data/gfx16/inventory.png
   trunk/data/gfx32/inventory.png
   trunk/data/gfx40/inventory.png
   trunk/data/gfx48/inventory.png
   trunk/data/gfx64/inventory.png
Removed:
   trunk/data/gfx16/inventory.jpg
   trunk/data/gfx32/fl-metalb.png
   trunk/data/gfx32/inventory.jpg
   trunk/data/gfx40/fl-metalb.png
   trunk/data/gfx40/inventory.jpg
   trunk/data/gfx48/fl-metalb.png
   trunk/data/gfx48/inventory.jpg
   trunk/data/gfx64/inventory.jpg
Modified:
   trunk/src/display.cc
Log:
-> New inventory frame models based on gfx32 with pure black and in the png file format.
-> Moved unused fl-metalb to attic



Added: trunk/attic/images-floors/fl-metalb.png
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-floors/fl-metalb.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx16/inventory.jpg
===================================================================
(Binary files differ)

Added: trunk/data/gfx16/inventory.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/inventory.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx32/fl-metalb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/inventory.jpg
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/inventory.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/inventory.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/fl-metalb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/inventory.jpg
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/inventory.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/inventory.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/fl-metalb.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/inventory.jpg
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/inventory.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/inventory.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx64/inventory.jpg
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/inventory.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/inventory.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/src/display.cc
===================================================================
--- trunk/src/display.cc	2009-11-15 13:52:31 UTC (rev 1858)
+++ trunk/src/display.cc	2009-11-15 19:31:24 UTC (rev 1859)
@@ -159,7 +159,7 @@
     ScreenArea a = get_area();
     clip(gc, intersect(a, r));
 
-    blit(gc, a.x, a.y, enigma::GetImage ("inventory", ".jpg"));
+    blit(gc, a.x, a.y, enigma::GetImage ("inventory", ".png"));
 
 
 //     set_color (gc, 255, 0, 0);



From ral at mail.berlios.de  Sun Nov 15 23:10:07 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Sun, 15 Nov 2009 23:10:07 +0100
Subject: [Enigma-game-svn] r1860 - in trunk: . doc etc lib-src/enigma-core
	src
Message-ID: <200911152210.nAFMA7q7025491@sheep.berlios.de>

Author: ral
Date: 2009-11-15 23:09:56 +0100 (Sun, 15 Nov 2009)
New Revision: 1860

Modified:
   trunk/configure.ac
   trunk/doc/REQUIREMENTS
   trunk/etc/mingw32-dist.sh.in
   trunk/lib-src/enigma-core/ecl_font.cc
   trunk/src/SoundEngine.cc
   trunk/src/SoundEngine.hh
   trunk/src/main.cc
Log:
Trunk 1.1: update SDL support
- recommended versions:
  - SDL 1.2.14 (Windows needs a fixed version that revokes patch r4990)
  - SDL_image 1.2.10
  - SDL_mixer 1.2.11
  - SDL_ttf 2.0.9
- detect new versions and use improved initialization if possible
- log versions of linked libraries
- drop requirement of unused libtiff, smpeg


Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/configure.ac	2009-11-15 22:09:56 UTC (rev 1860)
@@ -120,40 +120,48 @@
 
 dnl ----------------------------------------
 dnl Check for SDL image library
+dnl ----------------------------------------
+AC_CHECK_LIB(SDL_image,main,,[AC_MSG_ERROR([SDL_image is required to compile Enigma])])
+
+SDL_LIBS="$SDL_LIBS -lSDL_image"
+
+AC_CHECK_LIB(SDL_image, IMG_Init, have_img_init="yes", have_img_init="no")
+if test "$have_img_init" = yes; then
+  AC_DEFINE(SDL_IMG_INIT, , [Whether SDL_image library provides init])
+fi
+
+dnl ----------------------------------------
 dnl Check for SDL mixer library
 dnl ----------------------------------------
-AC_CHECK_LIB(SDL_image,main,,[AC_MSG_ERROR([SDL_image is required to compile Enigma])])
 AC_CHECK_LIB(SDL_mixer,main,,[AC_MSG_ERROR([SDL_mixer is required to compile Enigma])])
 
-SDL_LIBS="$SDL_LIBS -lSDL_image -lSDL_mixer"
+SDL_LIBS="$SDL_LIBS -lSDL_mixer"
 
 AC_CHECK_LIB(SDL_mixer, Mix_QuickLoad_RAW, have_mix_quickload="yes", have_mix_quickload="no")
-
 if test "$have_mix_quickload" = no; then
   AC_MSG_ERROR([SDL_mixer >= 1.2.5 is required to compile Enigma])
 fi
 
+AC_CHECK_LIB(SDL_mixer, Mix_Init, have_mix_init="yes", have_mix_init="no")
+if test "$have_mix_init" = yes; then
+  AC_DEFINE(SDL_MIX_INIT, , [Whether SDL_mixer library provides init])
+fi
+
 dnl ----------------------------------------
 dnl Check for SDL_ttf library
 dnl ---------------------------------------
-if test "$MINGW32" = yes; then
-  AC_CHECK_LIB(SDL_ttf, main,,[AC_MSG_ERROR([SDL_ttf >= 2.0.6 is required to compile Enigma])])
-  AC_DEFINE(HAVE_SDLTTF, , [Whether SDL_ttf library was found during configure])
-else
-  AC_MSG_CHECKING([for SDL_ttf >=2.0.6])
-  AC_RUN_IFELSE([AC_LANG_SOURCE(
-        [[#include <SDL_ttf.h>
-	  int main(int argc, char *argv[]) {
-	  if (TTF_MAJOR_VERSION < 2)
-            return 1;
-          else if (TTF_MAJOR_VERSION == 2 && TTF_MINOR_VERSION == 0 && TTF_PATCHLEVEL < 6) 
-            return 1;
-          return 0;}]])],
-      [AC_MSG_RESULT([found])],
-      [AC_MSG_ERROR([SDL_ttf >= 2.0.6 not found.])])
-  AC_CHECK_LIB(SDL_ttf, main,,[AC_MSG_ERROR([SDL_ttf is required to compile Enigma])])
-  AC_DEFINE(HAVE_SDLTTF, , [Whether SDL_ttf library was found during configure])
-fi
+AC_MSG_CHECKING([for SDL_ttf >=2.0.6])
+AC_RUN_IFELSE([AC_LANG_SOURCE(
+    [[#include <SDL_ttf.h>
+      int main(int argc, char *argv[]) {
+      if (TTF_MAJOR_VERSION < 2)
+	return 1;
+      else if (TTF_MAJOR_VERSION == 2 && TTF_MINOR_VERSION == 0 && TTF_PATCHLEVEL < 6) 
+	return 1;
+      return 0;}]])],
+  [AC_MSG_RESULT([found])],
+  [AC_MSG_ERROR([SDL_ttf >= 2.0.6 not found.])])
+AC_CHECK_LIB(SDL_ttf, main,,[AC_MSG_ERROR([SDL_ttf is required to compile Enigma])])
 
 SDL_LIBS="$SDL_LIBS -lSDL_ttf"
 

Modified: trunk/doc/REQUIREMENTS
===================================================================
--- trunk/doc/REQUIREMENTS	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/doc/REQUIREMENTS	2009-11-15 22:09:56 UTC (rev 1860)
@@ -19,17 +19,17 @@
                 http://www.libsdl.org/download-1.2.php
                 SDL-devel-1.2.14-mingw32.tar.gz (Mingw32)
                 
-SDL_ttf-devel   2.0.9 -  2.0.7
+SDL_ttf-devel   2.0.9 -  2.0.6
                 http://www.libsdl.org/projects/SDL_ttf/
-                SDL_ttf-devel-2.0.7-VC8.zip (W)
+                SDL_ttf-devel-2.0.9-VC8.zip (W)
                 
-SDL_mixer-devel 1.2.9 - 1.2.7
+SDL_mixer-devel 1.2.11 - 1.2.7
                 http://www.libsdl.org/projects/SDL_mixer/
-                SDL_mixer-devel-1.2.8-VC8.zip (W)
+                SDL_mixer-devel-1.2.11-VC.zip (W)
                 
-SDL_image-devel 1.2.8
+SDL_image-devel 1.2.10
                 http://www.libsdl.org/projects/SDL_image/
-                SDL_image-devel-1.2.6-VC8.zip (W)
+                SDL_image-devel-1.2.10-VC.zip (W)
 
 Xerces-C        3.0.1     2.4 - 2.8 (L)   < 2.3 (L); 3.0 < r671894
 Apache          2.7 : http://xml.apache.org/xerces-c/download.cgi

Modified: trunk/etc/mingw32-dist.sh.in
===================================================================
--- trunk/etc/mingw32-dist.sh.in	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/etc/mingw32-dist.sh.in	2009-11-15 22:09:56 UTC (rev 1860)
@@ -6,7 +6,7 @@
 DDIR="`pwd`/Enigma-$VERSION"
 SDIR=@top_srcdir@
 BDIR=@top_builddir@
-DLLDEFAULTS="SDL SDL_image SDL_mixer SDL_ttf jpeg zlib1 libfreetype-6 libogg-0 libpng12-0 libtiff-3 libvorbis-0 libvorbisfile-3 smpeg mikmod libcurl-4"
+DLLDEFAULTS="SDL SDL_image SDL_mixer SDL_ttf jpeg zlib1 libfreetype-6 libogg-0 libpng12-0 libvorbis-0 libvorbisfile-3 mikmod libcurl-4"
 
 if [ "$ENIGMADEVDLLS" != "" ]; then
   DLLS=$ENIGMADEVDLLS

Modified: trunk/lib-src/enigma-core/ecl_font.cc
===================================================================
--- trunk/lib-src/enigma-core/ecl_font.cc	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/lib-src/enigma-core/ecl_font.cc	2009-11-15 22:09:56 UTC (rev 1860)
@@ -204,17 +204,8 @@
 
 
 
-#ifndef HAVE_SDLTTF
-
-Font *ecl::LoadTTF (const char * /*filename*/, int /*ptsize*/, int, int, int)
-{
-    return 0;
-}
-
-#else /* if defined (HAVE_SDLTTF) */
-
 //
-// TrueType fonts (using SDL_ttf if available)
+// TrueType fonts 
 //
 #include "SDL_ttf.h"
 
@@ -302,11 +293,11 @@
 
 Font *ecl::LoadTTF (const char *filename, int ptsize, int r, int g, int b)
 {
-    if (TTF_Init()) {
-        // Error initializing TTF engine
+    if (!TTF_WasInit() && TTF_Init()==-1) {
+        fprintf(stderr, "Couldn't initialize SDL_ttf: %s\n", SDL_GetError());
+        exit(1);
     }
     TTF_Font *font = TTF_OpenFont (filename, ptsize);
     return (font) ? new TrueTypeFont (font, r, g, b) : 0;
 }
 
-#endif

Modified: trunk/src/SoundEngine.cc
===================================================================
--- trunk/src/SoundEngine.cc	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/src/SoundEngine.cc	2009-11-15 22:09:56 UTC (rev 1860)
@@ -45,17 +45,19 @@
 
 /* -------------------- Interface Functions -------------------- */
 
-void sound::Init() 
+void sound::Init(bool withMusic, bool withSound) 
 {
+    sound_enabled = withSound;
+    music_enabled = withMusic;
     if (!sound_engine.get()) {
         sound_engine.reset(new SoundEngine_SDL);
     }
 
     if (sound_engine->init()) {
         sound::UpdateVolume();
-    }
-    else {
+    } else {
         sound_enabled = false;
+        music_enabled = false;
         sound_engine.reset(new SoundEngine_Null);
     }
 }
@@ -72,20 +74,6 @@
     sound::MusicTick(dtime);
 }
 
-void sound::DisableSound() {
-    if (sound_enabled) {
-        sound_enabled = false;
-        Shutdown();
-    }
-}
-
-void sound::EnableSound() {
-    if (!sound_enabled) {
-        sound_enabled = true;
-        Init();
-    }
-}
-
 void sound::TempDisableSound() {
     sound_enabled_temp = sound_enabled;
     sound_enabled      = false;
@@ -99,10 +87,6 @@
     return !sound_enabled || sound_mute;
 }
 
-void sound::DisableMusic() {
-    music_enabled = false;
-}
-
 bool sound::IsMusicMute() {
     return !sound_enabled || !music_enabled || music_mute;
 }
@@ -247,6 +231,16 @@
             fprintf(stderr, "Couldn't open SDL audio subsystem: %s\n", SDL_GetError());
             return false;
         }
+        
+        const SDL_version* vi = Mix_Linked_Version();
+        Log <<  ecl::strf("SDL_mixer Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+#ifdef SDL_MIX_INIT
+        int mix_flags = MIX_INIT_OGG | MIX_INIT_MOD;
+        if (Mix_Init(mix_flags) & mix_flags != mix_flags) {
+            Log << ecl::strf( "Couldn't initialize SDL_mixer: %s\n", Mix_GetError());
+            return false;
+        }
+#endif
 
         // Initialize SDL_mixer lib
         if (Mix_OpenAudio(m_freq, m_format, m_channels, 1024) < 0) {
@@ -275,6 +269,9 @@
         Mix_CloseAudio();
         clear_cache();
         SDL_DestroyMutex (m_mutex);
+#ifdef SDL_MIX_INIT
+        Mix_Quit();
+#endif
         m_initialized = false;
     }
 }

Modified: trunk/src/SoundEngine.hh
===================================================================
--- trunk/src/SoundEngine.hh	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/src/SoundEngine.hh	2009-11-15 22:09:56 UTC (rev 1860)
@@ -36,14 +36,11 @@
 
 /* -------------------- Interface Functions -------------------- */
 
-    void Init();
+    void Init(bool withMusic =true, bool withSound =true);
     void Shutdown();
 
     void Tick(double dtime);
 
-    void DisableSound();
-    void EnableSound();
-    void DisableMusic();
     bool PlayMusic(const std::string &name, double position = 0.0);
     void FadeoutMusic(bool blocking =true);
 

Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-15 19:31:24 UTC (rev 1859)
+++ trunk/src/main.cc	2009-11-15 22:09:56 UTC (rev 1860)
@@ -60,8 +60,9 @@
 #include <xercesc/util/PlatformUtils.hpp>
 #include <xercesc/util/XercesVersion.hpp>
 #include <SDL_image.h>
+#include <SDL_mixer.h>
+#include <SDL_ttf.h>
 
-
 #ifdef MACOSX
 // for search paths
 #include "NSSystemDirectories.h"
@@ -348,8 +349,23 @@
     SDL_EnableUNICODE(1);
     const SDL_version* vi = SDL_Linked_Version();
     Log << ecl::strf("SDL Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+    
+    vi = TTF_Linked_Version();
+    Log <<  ecl::strf("SDL_ttf Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+    if(TTF_Init() == -1) {
+        fprintf(stderr, "Couldn't initialize SDL_ttf: %s\n", TTF_GetError());
+        exit(1);
+    }
+
     vi = IMG_Linked_Version();
-    Log <<  ecl::strf("SDL <Image Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+    Log <<  ecl::strf("SDL_image Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+#ifdef SDL_IMG_INIT
+    int img_flags = IMG_INIT_PNG | IMG_INIT_JPG;
+    if (IMG_Init(img_flags) & img_flags != img_flags) {
+        fprintf(stderr, "Couldn't initialize SDL_image: %s\n", IMG_GetError());
+        exit(1);
+    }
+#endif
 
     // ----- Initialize video subsystem
     video::Init();
@@ -361,11 +377,7 @@
 
 
     // ----- Initialize sound subsystem
-    if (ap.nosound)
-        sound::DisableSound();
-    else if (ap.nomusic)
-        sound::DisableMusic();
-    sound::Init();
+    sound::Init(!ap.nomusic, !ap.nosound);
     lua::CheckedDoFile (L, app.systemFS, "sound-defaults.lua");
     lua::DoSubfolderfile (L, "soundsets", "soundset.lua");
 
@@ -865,6 +877,10 @@
     enigma::ShutdownCurl();
     lua::ShutdownGlobal();
     XMLPlatformUtils::Terminate();
+#ifdef SDL_IMG_INIT
+    IMG_Quit();
+#endif
+    TTF_Quit();
     delete ::nullbuffer;
 }
 



From ral at mail.berlios.de  Tue Nov 17 00:48:26 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Tue, 17 Nov 2009 00:48:26 +0100
Subject: [Enigma-game-svn] r1861 - trunk/src
Message-ID: <200911162348.nAGNmQI9019046@sheep.berlios.de>

Author: ral
Date: 2009-11-17 00:48:17 +0100 (Tue, 17 Nov 2009)
New Revision: 1861

Modified:
   trunk/src/main.cc
Log:
Trunk 1.1: 
- fix crash that became much more likely in r1860 but originates < 0.92:
  undefined clear of anonymous caches could crash app on regular
  termination.


Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-15 22:09:56 UTC (rev 1860)
+++ trunk/src/main.cc	2009-11-16 23:48:17 UTC (rev 1861)
@@ -880,7 +880,9 @@
 #ifdef SDL_IMG_INIT
     IMG_Quit();
 #endif
+    ClearFontCache();
     TTF_Quit();
+    ClearImageCache();
     delete ::nullbuffer;
 }
 



From raoul at mail.berlios.de  Wed Nov 18 17:05:50 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Wed, 18 Nov 2009 17:05:50 +0100
Subject: [Enigma-game-svn] r1862 - in trunk: attic/images-stones data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911181605.nAIG5oiH024741@sheep.berlios.de>

Author: raoul
Date: 2009-11-18 17:05:42 +0100 (Wed, 18 Nov 2009)
New Revision: 1862

Added:
   trunk/attic/images-stones/st_boulder-gfx16.xcf
   trunk/attic/images-stones/st_boulder-gfx32.xcf
   trunk/attic/images-stones/st_boulder-gfx40.xcf
   trunk/attic/images-stones/st_boulder-gfx48.xcf
   trunk/attic/images-stones/st_boulder-gfx64.xcf
   trunk/data/gfx16/st_boulder.png
   trunk/data/gfx64/st_boulder.png
Removed:
   trunk/attic/images-stones/st-bolder.xcf
Modified:
   trunk/data/gfx32/st_boulder.png
   trunk/data/gfx40/st_boulder.png
   trunk/data/gfx48/st_boulder.png
Log:
-> Boulder stone images for all resolutions



Deleted: trunk/attic/images-stones/st-bolder.xcf
===================================================================
(Binary files differ)

Added: trunk/attic/images-stones/st_boulder-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_boulder-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_boulder-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_boulder-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_boulder-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_boulder-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_boulder-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_boulder-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_boulder-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_boulder-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/st_boulder.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_boulder.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/st_boulder.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_boulder.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_boulder.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/st_boulder.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_boulder.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Wed Nov 18 20:02:08 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Wed, 18 Nov 2009 20:02:08 +0100
Subject: [Enigma-game-svn] r1863 - in trunk: attic/images-stones data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911181902.nAIJ28Xu023030@sheep.berlios.de>

Author: raoul
Date: 2009-11-18 20:01:59 +0100 (Wed, 18 Nov 2009)
New Revision: 1863

Added:
   trunk/attic/images-stones/sh_shogun-gfx16.xcf
   trunk/attic/images-stones/sh_shogun-gfx32.xcf
   trunk/attic/images-stones/sh_shogun-gfx40.xcf
   trunk/attic/images-stones/sh_shogun-gfx48.xcf
   trunk/attic/images-stones/sh_shogun-gfx64.xcf
   trunk/attic/images-stones/st_shogun-gfx16.xcf
   trunk/attic/images-stones/st_shogun-gfx32.xcf
   trunk/attic/images-stones/st_shogun-gfx40.xcf
   trunk/attic/images-stones/st_shogun-gfx48.xcf
   trunk/attic/images-stones/st_shogun-gfx64.xcf
   trunk/data/gfx16/sh_shogun_l.png
   trunk/data/gfx16/sh_shogun_m.png
   trunk/data/gfx16/sh_shogun_s.png
   trunk/data/gfx16/st_shogun.png
   trunk/data/gfx64/sh_shogun_l.png
   trunk/data/gfx64/sh_shogun_m.png
   trunk/data/gfx64/sh_shogun_s.png
   trunk/data/gfx64/st_shogun.png
Modified:
   trunk/data/gfx32/sh_shogun_l.png
   trunk/data/gfx32/sh_shogun_m.png
   trunk/data/gfx32/sh_shogun_s.png
   trunk/data/gfx32/st_shogun.png
   trunk/data/gfx40/sh_shogun_l.png
   trunk/data/gfx40/sh_shogun_m.png
   trunk/data/gfx40/sh_shogun_s.png
   trunk/data/gfx40/st_shogun.png
   trunk/data/gfx48/sh_shogun_l.png
   trunk/data/gfx48/sh_shogun_m.png
   trunk/data/gfx48/sh_shogun_s.png
   trunk/data/gfx48/st_shogun.png
Log:
-> Models and shadows for shogun stones for all resolutions
--> Note: There are some minor corrections in gfx{32,40,48} again,
          mostly the shadows.



Added: trunk/attic/images-stones/sh_shogun-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_shogun-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_shogun-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_shogun-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_shogun-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_shogun-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_shogun-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_shogun-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_shogun-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_shogun-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_shogun-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_shogun-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_shogun-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_shogun-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_shogun-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_shogun-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_shogun-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_shogun-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_shogun-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_shogun-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/sh_shogun_l.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_shogun_l.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/sh_shogun_m.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_shogun_m.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/sh_shogun_s.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_shogun_s.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_shogun.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_shogun.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/sh_shogun_l.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/sh_shogun_m.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/sh_shogun_s.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_shogun.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_shogun_l.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_shogun_m.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_shogun_s.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_shogun.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_shogun_l.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_shogun_m.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_shogun_s.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_shogun.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/sh_shogun_l.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_shogun_l.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/sh_shogun_m.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_shogun_m.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/sh_shogun_s.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_shogun_s.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_shogun.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_shogun.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From ral at mail.berlios.de  Thu Nov 19 21:25:35 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 19 Nov 2009 21:25:35 +0100
Subject: [Enigma-game-svn] r1864 - in branches/1.01: . doc etc
	lib-src/enigma-core src
Message-ID: <200911192025.nAJKPZtU013667@sheep.berlios.de>

Author: ral
Date: 2009-11-19 21:25:23 +0100 (Thu, 19 Nov 2009)
New Revision: 1864

Modified:
   branches/1.01/configure.ac
   branches/1.01/doc/README.mingw32
   branches/1.01/doc/REQUIREMENTS
   branches/1.01/etc/mingw32-dist.sh.in
   branches/1.01/lib-src/enigma-core/ecl_font.cc
   branches/1.01/src/enigma.cc
   branches/1.01/src/enigma.hh
   branches/1.01/src/main.cc
   branches/1.01/src/sound.cc
   branches/1.01/src/sound.hh
   branches/1.01/src/video.cc
Log:
Branch 1.01: Windows 7 compatibility
- updates for SDL 1.2.14 and other SDL libs
- some small fixes


Modified: branches/1.01/configure.ac
===================================================================
--- branches/1.01/configure.ac	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/configure.ac	2009-11-19 20:25:23 UTC (rev 1864)
@@ -113,40 +113,48 @@
 
 dnl ----------------------------------------
 dnl Check for SDL image library
+dnl ----------------------------------------
+AC_CHECK_LIB(SDL_image,main,,[AC_MSG_ERROR([SDL_image is required to compile Enigma])])
+
+SDL_LIBS="$SDL_LIBS -lSDL_image"
+
+AC_CHECK_LIB(SDL_image, IMG_Init, have_img_init="yes", have_img_init="no")
+if test "$have_img_init" = yes; then
+  AC_DEFINE(SDL_IMG_INIT, , [Whether SDL_image library provides init])
+fi
+
+dnl ----------------------------------------
 dnl Check for SDL mixer library
 dnl ----------------------------------------
-AC_CHECK_LIB(SDL_image,main,,[AC_MSG_ERROR([SDL_image is required to compile Enigma])])
 AC_CHECK_LIB(SDL_mixer,main,,[AC_MSG_ERROR([SDL_mixer is required to compile Enigma])])
 
-SDL_LIBS="$SDL_LIBS -lSDL_image -lSDL_mixer"
+SDL_LIBS="$SDL_LIBS -lSDL_mixer"
 
 AC_CHECK_LIB(SDL_mixer, Mix_QuickLoad_RAW, have_mix_quickload="yes", have_mix_quickload="no")
-
 if test "$have_mix_quickload" = no; then
   AC_MSG_ERROR([SDL_mixer >= 1.2.5 is required to compile Enigma])
 fi
 
+AC_CHECK_LIB(SDL_mixer, Mix_Init, have_mix_init="yes", have_mix_init="no")
+if test "$have_mix_init" = yes; then
+  AC_DEFINE(SDL_MIX_INIT, , [Whether SDL_mixer library provides init])
+fi
+
 dnl ----------------------------------------
 dnl Check for SDL_ttf library
 dnl ---------------------------------------
-if test "$MINGW32" = yes; then
-  AC_CHECK_LIB(SDL_ttf, main,,[AC_MSG_ERROR([SDL_ttf >= 2.0.6 is required to compile Enigma])])
-  AC_DEFINE(HAVE_SDLTTF, , [Whether SDL_ttf library was found during configure])
-else
-  AC_MSG_CHECKING([for SDL_ttf >=2.0.6])
-  AC_RUN_IFELSE([AC_LANG_SOURCE(
-        [[#include <SDL_ttf.h>
-	  int main(int argc, char *argv[]) {
-	  if (TTF_MAJOR_VERSION < 2)
-            return 1;
-          else if (TTF_MAJOR_VERSION == 2 && TTF_MINOR_VERSION == 0 && TTF_PATCHLEVEL < 6) 
-            return 1;
-          return 0;}]])],
-      [AC_MSG_RESULT([found])],
-      [AC_MSG_ERROR([SDL_ttf >= 2.0.6 not found.])])
-  AC_CHECK_LIB(SDL_ttf, main,,[AC_MSG_ERROR([SDL_ttf is required to compile Enigma])])
-  AC_DEFINE(HAVE_SDLTTF, , [Whether SDL_ttf library was found during configure])
-fi
+AC_MSG_CHECKING([for SDL_ttf >=2.0.6])
+AC_RUN_IFELSE([AC_LANG_SOURCE(
+    [[#include <SDL_ttf.h>
+      int main(int argc, char *argv[]) {
+      if (TTF_MAJOR_VERSION < 2)
+	return 1;
+      else if (TTF_MAJOR_VERSION == 2 && TTF_MINOR_VERSION == 0 && TTF_PATCHLEVEL < 6) 
+	return 1;
+      return 0;}]])],
+  [AC_MSG_RESULT([found])],
+  [AC_MSG_ERROR([SDL_ttf >= 2.0.6 not found.])])
+AC_CHECK_LIB(SDL_ttf, main,,[AC_MSG_ERROR([SDL_ttf is required to compile Enigma])])
 
 SDL_LIBS="$SDL_LIBS -lSDL_ttf"
 
@@ -161,7 +169,11 @@
 dnl ----------------------------------------
 dnl Check for libpng
 dnl ---------------------------------------
-AC_CHECK_LIB(png,png_create_write_struct,,[AC_MSG_ERROR([libpng is required to compile Enigma])])
+if test "$MINGW32" = yes; then
+  AC_CHECK_LIB(png12,png_create_write_struct,,[AC_MSG_ERROR([libpng is required to compile Enigma])])
+else
+  AC_CHECK_LIB(png,png_create_write_struct,,[AC_MSG_ERROR([libpng is required to compile Enigma])])
+fi
 
 dnl ----------------------------------------
 dnl Check for xerces

Modified: branches/1.01/doc/README.mingw32
===================================================================
--- branches/1.01/doc/README.mingw32	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/doc/README.mingw32	2009-11-19 20:25:23 UTC (rev 1864)
@@ -103,21 +103,25 @@
 
 Install upx anywhere in PATH
 
-SDL-devel-1.2.9-mingw32.tar.gz
+SDL-devel-1.2.14-mingw32.tar.gz
   extract to a workdir
-  move include/* to include/SDL
-  edit Makefile CROSS_PATH to /mingw
-  edit bin/i386-mingw32msvc-sdl-config  prefix to /mingw
-  make cross
-  cp /mingw/bin/i386-mingw32msvc-sdl-config /mingw/bin/sdl-config
-  cp bin/*.dll to enigma/etc and a second copy to enigma
+  cp -rv bin lib share include /mingw/
+  sed 's|^prefix=.*|prefix=/minw/|' <bin/sdl-config > /mingw/bin/i386-mingw32msvc-sdl-config
+  cp /mingw/share/aclocal/sdl.m4 /share/aclocal/
+  cp bin/*.dll to enigma/etc
 
-SDL_ttf-devel-2.0.7-VC6.zip, SDL_mixer-devel-1.2.6-VC6.zip, SDL_image-devel-1.2.4-VC6.zip
+SDL_ttf-devel-2.0.9-VC8.zip, SDL_mixer-devel-1.2.11-VC.zip, SDL_image-devel-1.2.10-VC.zip
   extract
   cp includes to /mingw/include/SDL
   cp lib/*.lib to /mingw/lib
   cp lib/*.dll to enigma/etc
 
+libpng-1.2.18.tar.gz
+  extract to workdir
+  ./configure --prefix=/mingw
+  make
+  make install
+
 zlib-1.2.3-lib.zip, libpng-1.2.8-lib.zip
   extract
   cp includes to /mingw/include
@@ -129,7 +133,6 @@
   make install
   
 enigma
-  export ENIGMADEVDLLS="SDL SDL_image SDL_mixer SDL_ttf jpeg libpng13 zlib"
   ./autogen.sh
   ./configure
   cd etc

Modified: branches/1.01/doc/REQUIREMENTS
===================================================================
--- branches/1.01/doc/REQUIREMENTS	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/doc/REQUIREMENTS	2009-11-19 20:25:23 UTC (rev 1864)
@@ -15,21 +15,21 @@
 
 Libraries:
 ----------
-SDL-devel       1.2.12 -  1.2.9, 1.2.11      (no 1.2.10 on Mac!) 
+SDL-devel       1.2.14 - 1.2.9	(no 1.2.10 on Mac, no 1.2.12,1.2.13 on Win!) 
                 http://www.libsdl.org/download-1.2.php
-                SDL-devel-1.2.9-mingw32.tar.gz (Mingw32)
+                SDL-devel-1.2.14-mingw32.tar.gz (Mingw32) +  fix r5262
                 
-SDL_ttf-devel   2.0.9 -  2.0.7
+SDL_ttf-devel   2.0.10 -  2.0.6
                 http://www.libsdl.org/projects/SDL_ttf/
-                SDL_ttf-devel-2.0.7-VC6.zip (W)
+                SDL_ttf-devel-2.0.9-VC8.zip (W)
                 
-SDL_mixer-devel 1.2.8 - 1.2.7
+SDL_mixer-devel 1.2.11 - 1.2.7
                 http://www.libsdl.org/projects/SDL_mixer/
-                SDL_mixer-devel-1.2.6-VC6.zip
+                SDL_mixer-devel-1.2.11-VC.zip (W)
                 
-SDL_image-devel 1.2.6
+SDL_image-devel 1.2.10 - 1.2.6
                 http://www.libsdl.org/projects/SDL_image/
-                SDL_image-devel-1.2.4-VC6.zip (W)
+                SDL_image-devel-1.2.10-VC.zip (W)
 
 Xerces-C        3.0.1     2.4 - 3.0.1 (L)   < 2.3 (L); 3.0 < r671894
 Apache          2.7 : http://xml.apache.org/xerces-c/download.cgi

Modified: branches/1.01/etc/mingw32-dist.sh.in
===================================================================
--- branches/1.01/etc/mingw32-dist.sh.in	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/etc/mingw32-dist.sh.in	2009-11-19 20:25:23 UTC (rev 1864)
@@ -6,7 +6,7 @@
 DDIR="`pwd`/Enigma-$VERSION"
 SDIR=@top_srcdir@
 BDIR=@top_builddir@
-DLLDEFAULTS="SDL SDL_image SDL_mixer SDL_ttf jpeg libpng libpng1 zlib zlib-1"
+DLLDEFAULTS="SDL SDL_image SDL_mixer SDL_ttf jpeg zlib1 libfreetype-6 libpng12-0 mikmod"
 
 if [ "$ENIGMADEVDLLS" != "" ]; then
   DLLS=$ENIGMADEVDLLS

Modified: branches/1.01/lib-src/enigma-core/ecl_font.cc
===================================================================
--- branches/1.01/lib-src/enigma-core/ecl_font.cc	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/lib-src/enigma-core/ecl_font.cc	2009-11-19 20:25:23 UTC (rev 1864)
@@ -204,17 +204,8 @@
 
 
 
-#ifndef HAVE_SDLTTF
-
-Font *ecl::LoadTTF (const char * /*filename*/, int /*ptsize*/, int, int, int)
-{
-    return 0;
-}
-
-#else /* if defined (HAVE_SDLTTF) */
-
 //
-// TrueType fonts (using SDL_ttf if available)
+// TrueType fonts 
 //
 #include "SDL_ttf.h"
 
@@ -302,11 +293,11 @@
 
 Font *ecl::LoadTTF (const char *filename, int ptsize, int r, int g, int b)
 {
-    if (TTF_Init()) {
-        // Error initializing TTF engine
+    if (!TTF_WasInit() && TTF_Init()==-1) {
+        fprintf(stderr, "Couldn't initialize SDL_ttf: %s\n", SDL_GetError());
+        exit(1);
     }
     TTF_Font *font = TTF_OpenFont (filename, ptsize);
     return (font) ? new TrueTypeFont (font, r, g, b) : 0;
 }
 
-#endif

Modified: branches/1.01/src/enigma.cc
===================================================================
--- branches/1.01/src/enigma.cc	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/src/enigma.cc	2009-11-19 20:25:23 UTC (rev 1864)
@@ -488,6 +488,10 @@
     return font_cache.get(name);
 }
 
+void enigma::ClearFontCache() {
+    font_cache.clear();
+}
+
 ecl::Surface *enigma::LoadImage(const char *name) 
 {
     string filename;

Modified: branches/1.01/src/enigma.hh
===================================================================
--- branches/1.01/src/enigma.hh	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/src/enigma.hh	2009-11-19 20:25:23 UTC (rev 1864)
@@ -88,6 +88,7 @@
                      const char *bmf_name,
                      int r, int g, int b);
     ecl::Font *GetFont (const char *name);
+    void ClearFontCache();
 
     ecl::Surface *LoadImage (const char *name);
     ecl::Surface *GetImage (const char *name, const char *ext = ".png");

Modified: branches/1.01/src/main.cc
===================================================================
--- branches/1.01/src/main.cc	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/src/main.cc	2009-11-19 20:25:23 UTC (rev 1864)
@@ -56,8 +56,10 @@
 #include <xercesc/util/XMLUniDefs.hpp>
 #include <xercesc/util/PlatformUtils.hpp>
 #include <xercesc/util/XercesVersion.hpp>
+#include <SDL_image.h>
+#include <SDL_mixer.h>
+#include <SDL_ttf.h>
 
-
 #ifdef MACOSX
 // for search paths
 #include "NSSystemDirectories.h"
@@ -301,7 +303,7 @@
 
     // ----- Initialize SDL library
 #ifdef WIN32
-    SDL_putenv("SDL_VIDEODRIVER=directx");  //needed for SDL 1.2.12 that favors GDI which crashes on SetGamma
+//    SDL_putenv("SDL_VIDEODRIVER=directx");  //needed for SDL 1.2.12 that favors GDI which crashes on SetGamma
 #endif
     int sdl_flags = SDL_INIT_VIDEO;
     if (enigma::WizardMode)
@@ -312,7 +314,26 @@
     }
     atexit(SDL_Quit);
     SDL_EnableUNICODE(1);
+    const SDL_version* vi = SDL_Linked_Version();
+    Log << ecl::strf("SDL Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+    
+    vi = TTF_Linked_Version();
+    Log <<  ecl::strf("SDL_ttf Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+    if(TTF_Init() == -1) {
+        fprintf(stderr, "Couldn't initialize SDL_ttf: %s\n", TTF_GetError());
+        exit(1);
+    }
 
+    vi = IMG_Linked_Version();
+    Log <<  ecl::strf("SDL_image Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+#ifdef SDL_IMG_INIT
+    int img_flags = IMG_INIT_PNG | IMG_INIT_JPG;
+    if (IMG_Init(img_flags) & img_flags != img_flags) {
+        fprintf(stderr, "Couldn't initialize SDL_image: %s\n", IMG_GetError());
+        exit(1);
+    }
+#endif
+
     // ----- Initialize video subsystem
     video::Init();
     video::SetCaption ("Enigma v" PACKAGE_VERSION);
@@ -323,11 +344,7 @@
 
 
     // ----- Initialize sound subsystem
-    if (ap.nosound)
-        sound::DisableSound();
-    else if (ap.nomusic)
-        sound::DisableMusic();
-    sound::Init();
+    sound::Init(!ap.nomusic, !ap.nosound);
     lua::CheckedDoFile (L, app.systemFS, "sound-defaults.lua");
     lua::DoSubfolderfile (L, "soundsets", "soundset.lua");
 
@@ -794,6 +811,12 @@
     enet_deinitialize();
     lua::ShutdownGlobal();
     XMLPlatformUtils::Terminate();
+#ifdef SDL_IMG_INIT
+    IMG_Quit();
+#endif
+    ClearFontCache();
+    TTF_Quit();
+    ClearImageCache();
     delete ::nullbuffer;
 }
 

Modified: branches/1.01/src/sound.cc
===================================================================
--- branches/1.01/src/sound.cc	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/src/sound.cc	2009-11-19 20:25:23 UTC (rev 1864)
@@ -115,6 +115,16 @@
             return false;
         }
 
+        const SDL_version* vi = Mix_Linked_Version();
+        Log <<  ecl::strf("SDL_mixer Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);
+#ifdef SDL_MIX_INIT
+        int mix_flags = MIX_INIT_MOD;
+        if (Mix_Init(mix_flags) & mix_flags != mix_flags) {
+            Log << ecl::strf( "Couldn't initialize SDL_mixer: %s\n", Mix_GetError());
+            return false;
+        }
+#endif
+
         // Initialize SDL_mixer lib
         if (Mix_OpenAudio(m_freq, m_format, m_channels, 1024) < 0) {
             fprintf(stderr, "Couldn't open mixer: %s\n", Mix_GetError());
@@ -142,6 +152,9 @@
         Mix_CloseAudio();
         clear_cache();
         SDL_DestroyMutex (m_mutex);
+#ifdef SDL_MIX_INIT
+        Mix_Quit();
+#endif
         m_initialized = false;
     }
 }
@@ -361,8 +374,10 @@
 
 /* -------------------- Functions -------------------- */
 
-void sound::Init() 
+void sound::Init(bool withMusic, bool withSound) 
 {
+    sound_enabled = withSound;
+    music_enabled = withMusic;
     if (!sound_engine.get()) {
         sound_engine.reset(new SoundEngine_SDL);
     }
@@ -372,6 +387,7 @@
     }
     else {
         sound_enabled = false;
+        music_enabled = false;
         sound_engine.reset(new SoundEngine_Null);
     }
 }
@@ -387,20 +403,6 @@
     sound_engine->tick (dtime);
 }
 
-void sound::DisableSound() {
-    if (sound_enabled) {
-        sound_enabled = false;
-        Shutdown();
-    }
-}
-
-void sound::EnableSound() {
-    if (!sound_enabled) {
-        sound_enabled = true;
-        Init();
-    }
-}
-
 void sound::TempDisableSound() {
     sound_enabled_temp = sound_enabled;
     sound_enabled      = false;
@@ -410,10 +412,6 @@
     sound_enabled = sound_enabled_temp;
 }
 
-void sound::DisableMusic() {
-    music_enabled = false;
-}
-
 void sound::SetListenerPosition (const ecl::V2 &pos) 
 {
     sound_engine->set_listenerpos (pos);

Modified: branches/1.01/src/sound.hh
===================================================================
--- branches/1.01/src/sound.hh	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/src/sound.hh	2009-11-19 20:25:23 UTC (rev 1864)
@@ -176,15 +176,11 @@
 
 /* -------------------- Functions -------------------- */
 
-    void Init();
+    void Init(bool withMusic =true, bool withSound =true);
     void Shutdown();
 
     void Tick (double dtime);
 
-    void DisableSound();
-    void EnableSound();
-    void DisableMusic();
-
     void TempDisableSound();
     void TempReEnableSound();
 

Modified: branches/1.01/src/video.cc
===================================================================
--- branches/1.01/src/video.cc	2009-11-18 19:01:59 UTC (rev 1863)
+++ branches/1.01/src/video.cc	2009-11-19 20:25:23 UTC (rev 1864)
@@ -612,6 +612,8 @@
 void video::UpdateGamma()
 {
     float gamma = static_cast<float> (options::GetDouble ("Gamma"));
+    if (gamma < 0.25)  
+        gamma = 0.25;  // Windows does not set gamma for values < 0.2271
     SDL_SetGamma (gamma, gamma, gamma);
 }
 



From ral at mail.berlios.de  Fri Nov 20 23:45:47 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Fri, 20 Nov 2009 23:45:47 +0100
Subject: [Enigma-game-svn] r1865 - in trunk: data data/gfx doc src
Message-ID: <200911202245.nAKMjlg5018423@sheep.berlios.de>

Author: ral
Date: 2009-11-20 23:45:39 +0100 (Fri, 20 Nov 2009)
New Revision: 1865

Removed:
   trunk/data/gfx/00process.sh
   trunk/data/gfx/compose-images.sh
   trunk/data/thumbs/
Modified:
   trunk/doc/README.mingw32
   trunk/doc/REQUIREMENTS
   trunk/src/main.cc
Log:
Trunk 1.1: 
- remove obsolete shell scripts in gfx
- remove obsolete thumbs directory - thumbs are distributed aside 
    the levels for zip compatibilty since 1.00
- minor updates on docs

Deleted: trunk/data/gfx/00process.sh
===================================================================
--- trunk/data/gfx/00process.sh	2009-11-19 20:25:23 UTC (rev 1864)
+++ trunk/data/gfx/00process.sh	2009-11-20 22:45:39 UTC (rev 1865)
@@ -1,27 +0,0 @@
-#!/bin/bash
-#
-# This script changes the transparent color of all files in the following list.
-# The Gimp can't do this and having to specify colorkeys and similar attributes 
-# whenever you load an image is tedious.  Storing this information in the image
-# itself solves a lot of problems...
-#
-# btw, this doesn't affect alpha layered images, so these can be safely included 
-#
-
-if [ -z "$1" ]; then
-	echo 'Usage: 00process.sh [ all | filename(s) ]'
-	echo 'Convert all files | single specified file'
-	exit 1
-fi
-
-if [ "$1" = "all" ]; then
-	transparent="st*.png it*.png ring*.png sh*.png invisible.png"
-	transparent="$transparent inv-black*.png ac-*.png expl.png oxydb*.png"
-else
-	transparent="$*"
-fi
-
-for f in $transparent; do
-    echo "converting $f"
-    mogrify -transparent "#ff00ff" $f
-done

Deleted: trunk/data/gfx/compose-images.sh
===================================================================
--- trunk/data/gfx/compose-images.sh	2009-11-19 20:25:23 UTC (rev 1864)
+++ trunk/data/gfx/compose-images.sh	2009-11-20 22:45:39 UTC (rev 1865)
@@ -1,3 +0,0 @@
-# Requires ImageMagick!
-
-composite -compose atop st-mirrortempl_0001.png st-mirror-movable.png mirror1.png
\ No newline at end of file

Modified: trunk/doc/README.mingw32
===================================================================
--- trunk/doc/README.mingw32	2009-11-19 20:25:23 UTC (rev 1864)
+++ trunk/doc/README.mingw32	2009-11-20 22:45:39 UTC (rev 1865)
@@ -110,7 +110,7 @@
   cp /mingw/share/aclocal/sdl.m4 /share/aclocal/
   cp bin/*.dll to enigma/etc
 
-SDL_ttf-devel-2.0.9-VC8.zip, SDL_mixer-devel-1.2.9-VC.zip, SDL_image-devel-1.2.8-VC.zip
+SDL_ttf-devel-2.0.9-VC8.zip, SDL_mixer-devel-1.2.11-VC.zip, SDL_image-devel-1.2.10-VC.zip
   extract
   cp includes to /mingw/include/SDL
   cp lib/*.lib to /mingw/lib
@@ -121,7 +121,6 @@
   ./configure --prefix=/mingw
   make
   make install
-  cp /mingw/bin/libpng12-0.dll to enigma/etc
   
 zlib-1.2.3-lib.zip
   extract
@@ -136,7 +135,6 @@
   make install
   
 enigma
-  export ENIGMADEVDLLS="SDL SDL_image SDL_mixer SDL_ttf jpeg zlib1 libfreetype-6 libogg-0 libpng12-0 libtiff-3 libvorbis-0 libvorbisfile-3 smpeg"
   ./autogen.sh
   ./configure
   cd etc

Modified: trunk/doc/REQUIREMENTS
===================================================================
--- trunk/doc/REQUIREMENTS	2009-11-19 20:25:23 UTC (rev 1864)
+++ trunk/doc/REQUIREMENTS	2009-11-20 22:45:39 UTC (rev 1865)
@@ -17,9 +17,9 @@
 ----------
 SDL-devel       1.2.14 - 1.2.9	(no 1.2.10 on Mac, no 1.2.12,1.2.13 on Win!) 
                 http://www.libsdl.org/download-1.2.php
-                SDL-devel-1.2.14-mingw32.tar.gz (Mingw32)
+                SDL-devel-1.2.14-mingw32.tar.gz (Mingw32) +  fix r5262
                 
-SDL_ttf-devel   2.0.9 -  2.0.6
+SDL_ttf-devel   2.0.10 -  2.0.6
                 http://www.libsdl.org/projects/SDL_ttf/
                 SDL_ttf-devel-2.0.9-VC8.zip (W)
                 
@@ -27,7 +27,7 @@
                 http://www.libsdl.org/projects/SDL_mixer/
                 SDL_mixer-devel-1.2.11-VC.zip (W)
                 
-SDL_image-devel 1.2.10
+SDL_image-devel 1.2.10 - 1.2.6
                 http://www.libsdl.org/projects/SDL_image/
                 SDL_image-devel-1.2.10-VC.zip (W)
 
@@ -92,7 +92,7 @@
 ccache          2.4 (L)
                 http://ccache.samba.org/
                 
-NSIS            2.29, 2.27, 2.21 (W)
+NSIS            >= 2.45 (W)
                 http://nsis.sourceforge.net
 
 ImageMagick     

Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-19 20:25:23 UTC (rev 1864)
+++ trunk/src/main.cc	2009-11-20 22:45:39 UTC (rev 1865)
@@ -345,7 +345,7 @@
         fprintf(stderr, "Couldn't initialize SDL: %s\n", SDL_GetError());
         exit(1);
     }
-    atexit(SDL_Quit);
+    std::atexit(SDL_Quit);
     SDL_EnableUNICODE(1);
     const SDL_version* vi = SDL_Linked_Version();
     Log << ecl::strf("SDL Version: %u.%u.%u\n", vi->major, vi->minor, vi->patch);



From raoul at mail.berlios.de  Sat Nov 21 02:43:00 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 21 Nov 2009 02:43:00 +0100
Subject: [Enigma-game-svn] r1866 - in trunk: attic/images-stones data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911210143.nAL1h0Gd014325@sheep.berlios.de>

Author: raoul
Date: 2009-11-21 02:42:59 +0100 (Sat, 21 Nov 2009)
New Revision: 1866

Added:
   trunk/attic/images-stones/sh_solid-gfx16.xcf
   trunk/attic/images-stones/sh_solid-gfx32.xcf
   trunk/attic/images-stones/sh_solid-gfx40.xcf
   trunk/attic/images-stones/sh_solid-gfx48.xcf
   trunk/attic/images-stones/sh_solid-gfx64.xcf
   trunk/attic/images-stones/st_shogun_sizes.txt
   trunk/data/gfx16/sh_solid.png
   trunk/data/gfx64/sh_solid.png
Modified:
   trunk/data/gfx32/sh_solid.png
   trunk/data/gfx40/sh_solid.png
   trunk/data/gfx48/sh_solid.png
Log:
-> Solid shadows for all resolutions
-> Size table for shogun stones (forgot this last time)



Added: trunk/attic/images-stones/sh_solid-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_solid-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_solid-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_solid-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_solid-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_solid-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_solid-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_solid-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_solid-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_solid-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_shogun_sizes.txt
===================================================================
--- trunk/attic/images-stones/st_shogun_sizes.txt	2009-11-20 22:45:39 UTC (rev 1865)
+++ trunk/attic/images-stones/st_shogun_sizes.txt	2009-11-21 01:42:59 UTC (rev 1866)
@@ -0,0 +1,23 @@
+Sizes for the shogun stones
+===========================
+
+|----------------------+----------+----------+----------+----------+----------|
+|                      | Gfx16    | Gfx32    | Gfx40    | Gfx48    | Gfx64    |
+|----------------------+----------+----------+----------+----------+----------|
+|----------------------+----------+----------+----------+----------+----------|
+| Size of the hole     |          |          |          |          |          |
+| [px] and [% of tile] |          |          |          |          |          |
+|----------------------+----------+----------+----------+----------+----------|
+| Shogun small         | 6   37.5 | 12  37.5 | 16  40.0 | 20  41.6 | 24  37.5 |
+| Shogun medium        | 8   50.0 | 18  56.3 | 24  60.0 | 28  58.3 | 36  56.3 |
+| Shogun large         | 12  75.0 | 24  75.0 | 32  80.0 | 36  75.0 | 48  75.0 |
+|----------------------+----------+----------+----------+----------+----------|
+
+The size of the hole is the exact size which fits to the
+shadow models pixel by pixel. There may be some semitransparent
+pixels inside of this radius, but none outside.
+
+The shadow model has a black circle with the same radius centered
+at the coordinate (tilewidth/2, tilewidth/2). From this circle another
+one with same radius and centered at position (tilewidth/2+offset, tilewidth/2+offset)
+is subtracted. The offset is shadowsize - tilesize.


Property changes on: trunk/attic/images-stones/st_shogun_sizes.txt
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/gfx16/sh_solid.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_solid.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/sh_solid.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_solid.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_solid.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/sh_solid.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_solid.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Sat Nov 21 18:59:04 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 21 Nov 2009 18:59:04 +0100
Subject: [Enigma-game-svn] r1867 - in trunk/data/levels: enigma_cross
	enigma_ix enigma_viii
Message-ID: <200911211759.nALHx48m030687@sheep.berlios.de>

Author: raoul
Date: 2009-11-21 18:59:01 +0100 (Sat, 21 Nov 2009)
New Revision: 1867

Added:
   trunk/data/levels/enigma_ix/ais11_1.xml
   trunk/data/levels/enigma_ix/ais12_1.xml
   trunk/data/levels/enigma_ix/devnull29_2.xml
Removed:
   trunk/data/levels/enigma_ix/devnull29_1.xml
Modified:
   trunk/data/levels/enigma_cross/newlevels-1-10.xml
   trunk/data/levels/enigma_ix/index.xml
   trunk/data/levels/enigma_viii/devnull03_1.xml
   trunk/data/levels/enigma_viii/index.xml
Log:
-> Two new levels from Alex Smith
--> "Nabokos" and "Claustrophobia"

-> Shortcut fix from devnull in "Alternate X"

-> Technical fix in devnull03 (safeaction trigger)




Modified: trunk/data/levels/enigma_cross/newlevels-1-10.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels-1-10.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_cross/newlevels-1-10.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="72" title="Enigma 1.10 new"/>
+  <info enigma="1.10" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="73" title="Enigma 1.10 new"/>
 
   <attributes/>
 
@@ -123,7 +123,7 @@
     <level _seq="115" _title="Alternation I" _xpath="enigma_viii/mecke17_1" author="mecke" ctrl="force" easy="false" id="mecke17" rel="1" rev="14" score="1" target="time" unit="duration"/>
     <level _seq="116" _title="Enigmaparcour II" _xpath="enigma_viii/mecke29_1" author="mecke" ctrl="force" easy="true" id="mecke29" rel="1" rev="18" score="1" target="time" unit="duration"/>
     <level _seq="117" _title="- Meditation -" _xpath="enigma_viii/devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="10" score="1" target="time" unit="duration"/>
-    <level _seq="118" _title="Multi-lane" _xpath="enigma_viii/devnull03_1" author="/dev/null" ctrl="force" easy="true" id="devnull03" rel="1" rev="27" score="1" target="time" unit="duration"/>
+    <level _seq="118" _title="Multi-lane" _xpath="enigma_viii/devnull03_1" author="/dev/null" ctrl="force" easy="true" id="devnull03" rel="1" rev="28" score="1" target="time" unit="duration"/>
     <level _seq="119" _title="See Saw Meditation" _xpath="enigma_viii/duffy180_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy180" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="120" _title="Under control?" _xpath="enigma_viii/devnull09_1" author="/dev/null" ctrl="force" easy="true" id="devnull09" rel="1" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="121" _title=" - Meditation - " _xpath="enigma_viii/devnull12_1" author="/dev/null" ctrl="force" easy="true" id="devnull12" rel="1" rev="10" score="1" target="time" unit="duration"/>
@@ -207,7 +207,7 @@
     <level _seq="199" _title="Carcassonne" _xpath="enigma_ix/mecke40_1" author="mecke" ctrl="force" easy="true" id="mecke40" rel="1" rev="22" score="1" target="time" unit="duration"/>
     <level _seq="200" _title="Building Blocks I" _xpath="enigma_ix/raoul37_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul37" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="201" _title="Naoussa" _xpath="enigma_ix/mecke37_1" author="mecke" ctrl="force" easy="true" id="mecke37" rel="1" rev="29" score="1" target="time" unit="duration"/>
-    <level _seq="202" _title="alternate X" _xpath="enigma_ix/devnull29_1" author="/dev/null" ctrl="force" easy="true" id="devnull29" rel="1" rev="7" score="1" target="time" unit="duration"/>
+    <level _seq="202" _title="alternate X" _xpath="enigma_ix/devnull29_2" author="/dev/null" ctrl="force" easy="true" id="devnull29" rel="2" rev="9" score="2" target="time" unit="duration"/>
     <level _seq="203" _title="Volcano Day" _xpath="enigma_ix/pulley23_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley23" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="204" _title="Poe's Nightmare" _xpath="enigma_ix/ulf07_1" author="Ulf Stegemann" ctrl="force" easy="true" id="ulf07" rel="1" rev="120" score="1" target="time" unit="duration"/>
     <level _seq="205" _title="Once, No More No Less" _xpath="enigma_ix/ais07_1" author="Alex Smith" ctrl="force" easy="false" id="20090602ais523001" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -221,6 +221,8 @@
     <level _seq="213" _title="Tour de France" _xpath="enigma_ix/mecke04_1" author="mecke" ctrl="force" easy="false" id="mecke04" rel="1" rev="12" score="1" target="time" unit="duration"/>
     <level _seq="214" _title="Escape in Chains" _xpath="enigma_ix/duffy184_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy184" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="215" _title="Meditation Sorting" _xpath="enigma_ix/wesley02_1" author="Helge Blohmer" ctrl="force" easy="true" id="20080821wcr001" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="216" _title="Claustrophobia" _xpath="enigma_ix/ais11_1" author="Alex Smith" ctrl="force" easy="true" id="20090926ais523001" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="217" _title="Nabokos" _xpath="enigma_ix/ais12_1" author="Alex Smith" ctrl="force" easy="true" id="20090926ais523003" rel="1" rev="4" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Added: trunk/data/levels/enigma_ix/ais11_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/ais11_1.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_ix/ais11_1.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -0,0 +1,229 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Claustrophobia" el:subtitle="Every pencil must go" el:id="20090926ais523001"/>
+      <el:version el:score="1" el:release="1" el:revision="2" el:status="stable"/>
+      <el:author el:name="Alex Smith" el:email="ais523 at bham.ac.uk" el:homepage=""/>
+      <el:copyright>Copyright ? 2009 Alex Smith</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10">
+        <el:dependency el:path="lib/libmath" el:id="lib/libmath" el:release="1" el:preload="true"/>
+      </el:compatibility>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:comments>
+        <el:credits el:showinfo="false" el:showstart="false">Thanks to oracle for help with the code</el:credits>
+      </el:comments>
+      <el:score el:easy="0:57" el:difficult="3:46"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["ConserveLevel"] = true
+wo["SlopeStrength"] = 65
+
+ti["."] = {"fl_dark"} .. ti({"it_squashed"})
+ti[","] = ti["."] .. {"it_pencil", "pencils_#"}
+ti[";"] = cond(wo["IsDifficult"], ti[","], ti["."])
+ti["A"] = ti["."] .. {"fl_dark", "digit1"}
+ti["B"] = ti[";"] .. {"fl_dark", "digit2"}
+ti[" "] = {"fl_space"}
+ti["#"] = {"st_metal"}
+ti["3"] = {"st_puzzle", connections="ns"}
+ti["4"] = {"st_puzzle", connections="ew"}
+ti["1"] = ti["3"] .. ti[" "]
+ti["2"] = ti["4"] .. ti[" "]
+ti["5"] = ti["1"] .. {"fl_slope_pn", strength=2000}
+ti["6"] = ti["2"] .. {"fl_slope_pw", strength=2000}
+ti["7"] = ti["1"] .. {"fl_slope_ps", strength=2000}
+ti["9"] = ti["2"] .. {"fl_slope_pe", strength=2000}
+ti["8"] = {"st_grate"} .. ti[" "]
+ti["x"] = {"st_lightglass_hollow"} .. ti["."]
+ti["X"] = {"st_lightglass_hollow"} .. ti[","]
+ti["W"] = {"#ac_marble_white"} .. ti({"fl_slope_isw"})
+ti["w"] = {"#ac_marble_white"} .. ti({"fl_slope_ine"})
+ti["$"] = {"st_dispenser_extralife"}
+ti["<"] = {"st_oneway_w"} .. ti({"fl_slope_isw"})
+ti[">"] = {"st_oneway_e"} .. ti({"fl_slope_ine"})
+ti["^"] = {"st_oneway_n"} .. ti({"fl_slope_inw"})
+ti["v"] = {"st_oneway_s"} .. ti({"fl_slope_ise"})
+ti["E"] = {"st_oxyd", "oxyd1", oxydcolor=OXYD_BLUE}
+ti["F"] = {"st_oxyd", "oxyd2", oxydcolor=OXYD_BLUE}
+ti["G"] = {"st_oxyd", "oxyd3", oxydcolor=OXYD_BLUE}
+ti["H"] = {"st_oxyd", "oxyd4", oxydcolor=OXYD_BLUE}
+ti["@"] = {"#ac_marble"} .. ti[","]
+
+wo(ti,".",{
+    "####################$$$$$$$$$$$$$$$$$$####################",
+    "#                  #                  <<<<W#             #",
+    "#                  #                  <<<<##             #",
+    "#                  #                  <<<<#              #",
+    "#                  #                  <<<<#              #",
+    "#                  #888888888888888888#####              #",
+    "#                  #111111111111111111#                  #",
+    "###                #111111111111111111#                  #",
+    "#W####             #111111111111111111#                  #",
+    "#vvvv#             #111111111111111111#                  #",
+    "#vvvv#             #111111111111111111#                  #",
+    "#vvvv#             #555555555555555555#                  #",
+    "#vvvv##############E333333333333333333F###################",
+    "$       822222222264.;.;.;.;.;.;.;.;.;492222222228       $",
+    "$       822222222264;.;A;.;.;.B.;.;.;.492222222228       $",
+    "$       822222222264.;.,.,.,.,.,.,.,.;492222222228       $",
+    "$       822222222264;.,.,.,.,.,.,.,.;.492222222228       $",
+    "$       822222222264.;.,.,.XxXx,.,.,.;492222222228       $",
+    "$       822222222264;.,.,.,x@$X.,.,.;.492222222228       $",
+    "$       822222222264.;.,.,.XxXx,.,.,.;492222222228       $",
+    "$       822222222264;.,.,.,.,.,.,.,.;.492222222228       $",
+    "$       822222222264.;.,.,.,.,.,.,.,.;492222222228       $",
+    "$       822222222264;.;.;.;.;.;.;.;.;.492222222228       $",
+    "$       822222222264.;.;.;.;.;.;.;.;.;492222222228       $",
+    "###################H333333333333333333G##############^^^^#",
+    "#                  #777777777777777777#             #^^^^#",
+    "#                  #111111111111111111#             #^^^^#",
+    "#                  #111111111111111111#             #^^^^#",
+    "#                  #111111111111111111#             ####w#",
+    "#                  #111111111111111111#                ###",
+    "#                  #111111111111111111#                  #",
+    "#              #####888888888888888888#                  #",
+    "#              #>>>>                  #                  #",
+    "#              #>>>>                  #                  #",
+    "#             ##>>>>                  #                  #",
+    "#             #w>>>>                  #                  #",
+    "####################$$$$$$$$$$$$$$$$$$####################"})
+
+wo:add({"ot_timer", interval=0.1, action="callback", target="countpencils"})
+
+oldcount = 1000
+digitfloors = {"fl_dark","fl_bright"}
+digitshapes = {
+{{1,2,2,2,1},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {1,2,2,2,1}},
+{{1,1,2,1,1},
+ {1,2,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,2,2,2,1}},
+{{1,2,2,2,1},
+ {2,1,1,1,2},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {1,2,2,2,1},
+ {2,1,1,1,1},
+ {2,1,1,1,1},
+ {2,1,1,1,1},
+ {2,2,2,2,2}},
+{{2,2,2,2,1},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {1,2,2,2,1},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {2,2,2,2,1}},
+{{1,1,2,1,1},
+ {1,2,2,1,1},
+ {2,1,2,1,1},
+ {2,1,2,1,1},
+ {2,2,2,2,2},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1}},
+{{2,2,2,2,2},
+ {2,1,1,1,1},
+ {2,1,1,1,1},
+ {2,1,1,1,1},
+ {2,2,2,2,1},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {2,2,2,2,1}},
+{{1,2,2,2,1},
+ {2,1,1,1,2},
+ {2,1,1,1,1},
+ {2,1,1,1,1},
+ {2,2,2,2,1},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {1,2,2,2,1}},
+{{2,2,2,2,2},
+ {1,1,1,1,2},
+ {1,1,1,2,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1},
+ {1,1,2,1,1}},
+{{1,2,2,2,1},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {1,2,2,2,1},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {1,2,2,2,1}},
+{{1,2,2,2,1},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {2,1,1,1,2},
+ {1,2,2,2,2},
+ {1,1,1,1,2},
+ {1,1,1,1,2},
+ {2,1,1,1,2},
+ {1,2,2,2,1}}
+}
+
+pens = no["pencils_#*"]
+
+function countpencils()
+    pens = grp(pens)
+    c = #pens
+    if c < oldcount then
+        d = lib.math.digits(c,10)
+        if d[1] == nil then d[1] = 0 end
+        if d[2] == nil then d[2] = 0 end
+        for x = 1,5 do for y = 1,9 do
+            f1 = digitfloors[digitshapes[d[2]+1][y][x]]
+            f2 = digitfloors[digitshapes[d[1]+1][y][x]]
+            if fl(no["digit1"] + {x-1,y-1})["_t"] ~= f1 then
+                wo[no["digit1"] + {x-1,y-1}] = {f1, cond(x == 1 and y == 1, "digit1", nil), _t=f1}
+            end
+            if fl(no["digit2"] + {x-1,y-1})["_t"] ~= f2 then
+                wo[no["digit2"] + {x-1,y-1}] = {f2, cond(x == 1 and y == 1, "digit2", nil), _t=f2}
+            end
+        end end
+        oldcount = c
+        if not wo["IsDifficult"] then c = c * 2 end
+        if c <= 75 then no["oxyd1"]:open() end
+        if c <= 50 then no["oxyd2"]:open() end
+        if c <= 25 then no["oxyd3"]:open() end
+        if c <=  0 then no["oxyd4"]:open() end
+    end
+end
+
+countpencils()
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false" />
+      </el:string>
+      <el:string el:key="subtitle">
+        <el:english el:translate="true" />
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/ais11_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/data/levels/enigma_ix/ais12_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/ais12_1.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_ix/ais12_1.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -0,0 +1,462 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Nabokos" el:subtitle="Build me a Sokoban" el:id="20090926ais523003"/>
+      <el:version el:score="1" el:release="1" el:revision="4" el:status="stable"/>
+      <el:author el:name="Alex Smith" el:email="ais523 at bham.ac.uk" el:homepage=""/>
+      <el:copyright>Copyright ? 2009 Alex Smith</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:score el:easy="0:30" el:difficult="0:33"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["ConserveLevel"] = false
+wo["ProvideExtralifes"] = true
+
+ti[" "]={"fl_bright"}
+ti["."]={"fl_abyss"}
+ti["#"]={"st_panel",cluster=1}
+ti["+"]={"st_box"}
+ti["8"]={"st_lightglass_hollow","grates_#"}
+ti["9"]={"fl_bright","safepos_#"} .. ti["8"]
+ti["^"]={"fl_water","water_#"} .. ti["8"]
+ti["q"]={"it_burnable_ash"} .. ti({"fl_dark"})
+ti[":"]={"it_seed","boxes_#"} .. ti["8"]
+ti[";"]={"it_surprise",selection={"=Z"}} .. ti["8"]
+ti["Z"]={"it_blocker","walls_#",autoclose=true} .. ti({"st_nil"})
+if wo["IsDifficult"] then
+    ti["1"]={"it_document",text="text1"} .. ti["9"]
+    ti["e"]=ti[";"]
+else
+    ti["1"]={"it_document",text="text2"} .. ti["9"]
+    ti["e"]=ti["8"]
+end
+ti["|"]={"st_door_d","togglables_#",faces="ew",state=CLOSED} .. ti["q"]
+ti["!"]={"st_door_d","togglables_#",faces="ew",state=OPEN}   .. ti["q"]
+ti["S"]={"st_switch_instant",action="callback",target="startsolve"}
+ti["~"]={"st_timer","solvetimer",state=OFF,interval=0.1,action="callback",target="solveiter"} .. ti["."]
+ti["s"]={"st_timer","movetimer",state=OFF,interval=0.1,action="callback",target="moveiter"} .. ti["."]
+ti["0"]={"st_oxyd_a"}
+ti["X"]={"st_oxyd_a", "bottomoxyd"}
+ti["W"]={"#ac_marble_white", "whitemarble"} .. ti["q"] .. ti({"fl_dark","whitespot"})
+ti["@"]={"#ac_marble_black"} .. ti["q"] .. ti({"fl_dark","startspot"})
+
+-- The level map
+w, h = wo(ti," ",{
+"#######",
+"0W|q!@S",
+"###q###",
+"#99199#",
+"#9:::9#",
+"#98889#",
+"#98e89#",
+"#9;;;9#",
+"###^###",
+"..#^#..",
+"..#^#..",
+"..~Xs.."
+})
+wo:shuffleOxyd()
+-- Solving is spread over time to prevent the game becoming unresponsive
+function arrangement(x1,y1,x2,y2,x3,y3)
+    if y1 > 8 then y1 = 8 end
+    if y2 > 8 then y1 = 2 end
+    if y3 > 8 then y1 = 3 end
+    local c1 = x1 * 10 + y1
+    local c2 = x2 * 10 + y2
+    local c3 = x3 * 10 + y3
+    if c1 < c2 then t = c1; c1 = c2; c2 = t end
+    if c2 < c3 then t = c2; c2 = c3; c3 = t end
+    if c1 < c2 then t = c1; c1 = c2; c2 = t end
+    return c1 * 10000 + c2 * 100 + c3
+end
+function afromtable(t)
+    return arrangement(t[1][1],t[1][2],t[2][1],t[2][2],t[3][1],t[3][2])
+end
+function areplace(t,ox,oy,nx,ny)
+    if t[1][1] == ox and t[1][2] == oy then
+        return arrangement(nx,ny,t[2][1],t[2][2],t[3][1],t[3][2])
+    end
+    if t[2][1] == ox and t[2][2] == oy then
+        return arrangement(t[1][1],t[1][2],nx,ny,t[3][1],t[3][2])
+    end
+    if t[3][1] == ox and t[3][2] == oy then
+        return arrangement(t[1][1],t[1][2],t[2][1],t[2][2],nx,ny)
+    end
+    assert_bool(false,"areplace target not found")
+end
+function tablefroma(a)
+    local x1,y1,x2,y2,x3,y3
+    y3 = a % 10; a = (a - y3) / 10
+    x3 = a % 10; a = (a - x3) / 10
+    y2 = a % 10; a = (a - y2) / 10
+    x2 = a % 10; a = (a - x2) / 10
+    y1 = a % 10; a = (a - y1) / 10
+    x1 = a % 10
+    return {{x1,y1},{x2,y2},{x3,y3}}
+end
+function unblocked(bp,wp,x,y)
+    if #bp >= 1 then for a = 1,#bp do
+        if bp[a][1] == x and bp[a][2] == y then return false end
+    end end
+    if #wp >= 1 then for a = 1,#wp do
+        if wp[a][1] == x and wp[a][2] == y then return false end
+    end end
+    return true
+end
+startedalready = false
+routethrough = {}
+stepsneeded = {}
+debugmode = false
+siperstep = 100   -- high: good performance, low: good responsiveness
+
+-- Variables used by the solver
+    local a = {}  -- the working array
+    local s = {}  -- set of reachable positions on this step
+    local t = {}  -- set of reachable positions on the next step
+    local r = {}  -- array that allows calculation of the route afterwards
+    local tc = 0  -- number of elements in t
+    local sc = 0  -- number of elements in s
+    local si = 0  -- currently considered element in s
+    local bc = 0  -- count of remaining boxes
+    local wc = 0  -- count of walls
+    local bp = {} -- box positions
+    local pc = 0  -- code for current box positions
+    local wp = {} -- wall positions
+    local x  = 0  -- marble x being considered
+    local y  = 0  -- marble y being considered
+    local n  = 0  -- step number being considered
+
+function startsolve()
+    if startedalready then return end
+    startedalready = true
+    no["togglables_#*"]:toggle()
+    no["grates_#*"]:kill()
+    -- extra insurance against mispushes
+    for p in no["safepos_#*"] do
+        if not -st(p) then
+            -- an invisible grate
+            wo[p] = {"st_door_b","invisigrates_#",state=OPEN}
+        end
+    end
+    wo["ShowMoves"] = true
+
+    -- To get the minimum number of pushes, we solve the Sokoban puzzle by brute force.
+    -- If there's a box at c5, the first move is obviously to push it to c4.
+    -- From then on, the only places it makes sense to push boxes are in the rectangle
+    -- from b1 to d4, and into the goal; there are 299 possible box arrangements.
+    -- For each of these 299 arrangements we have a table stating how soon the white
+    -- marble can be at each of the 25 relevant locations; this table will be rather
+    -- sparse and so not slow down the solver that much.
+    for b in no["boxes_#*"] do
+        if not b:is("st_box") and not b:is("fl_wood") then -- still a seed
+            wo:add(YIN,{"it_spoon"})
+            wo:add(YIN,{"it_document",text="text3"})
+            no["startspot"]:sound("pickup")
+            return
+        end
+        if b.y < 3 then -- jamming the entrance
+            return
+        end
+        bc = bc + 1
+        bp[bc] = {b.x,b.y}
+        if b.y > 8 then bp[bc] = {b.x,8} end
+    end
+    if bc < 3 then
+        wo:add(YIN,{"it_spoon"})
+        wo:add(YIN,{"it_document",text="text3"})
+        no["startspot"]:sound("pickup")
+        return
+    end
+    for w in no["walls_#*"] do
+        if w:is("st_blocker") then -- not a seed
+            if w.y < 3 then -- jamming the entrance
+                return
+            end
+            wc = wc + 1
+            wp[wc] = {w.x,w.y}
+        end
+    end
+    a[afromtable(bp)] = {}
+    for i=1,5 do a[afromtable(bp)][i] = {} end
+    a[afromtable(bp)][3][2] = 0 -- initial condition
+    s[1] = {afromtable(bp),{3,2}}
+    sc = 1
+    si = 1
+    no["solvetimer"]:on()
+end
+function solveiter()
+    if sc <= 0 or r[38383837] ~= nil then
+        no["solvetimer"]:off()
+        aftersolve()
+        return
+    end
+    assert_bool(n<100,"Sanity check in Sokoban solver failed: iterations too high")
+    while si <= sc do
+        pc = s[si][1]
+        bp = tablefroma(pc)
+        x = s[si][2][1]
+        y = s[si][2][2]
+        -- Consider moves for the marble
+        if x > 1 and y > 2 and unblocked(bp,wp,x-1,y) and a[pc][x-1][y] == nil then
+            a[pc][x-1][y] = n
+            sc = sc + 1
+            s[sc] = {pc,{x-1,y}}
+            r[pc*100+(x-1)*10+y] = {pc,{x,y}}
+            if debugmode then print(n .. ": (" .. pc ..") move W from (" .. x .. ", " .. y ..")") end
+        end
+        if x < 5 and y > 2 and unblocked(bp,wp,x+1,y) and a[pc][x+1][y] == nil then
+            a[pc][x+1][y] = n
+            sc = sc + 1
+            s[sc] = {pc,{x+1,y}}
+            r[pc*100+(x+1)*10+y] = {pc,{x,y}}
+            if debugmode then print(n .. ": (" .. pc ..") move E from (" .. x .. ", " .. y ..")") end
+        end
+        if y > 3 and unblocked(bp,wp,x,y-1) and a[pc][x][y-1] == nil then
+            a[pc][x][y-1] = n
+            sc = sc + 1
+            s[sc] = {pc,{x,y-1}}
+            r[pc*100+x*10+y-1] = {pc,{x,y}}
+            if debugmode then print(n .. ": (" .. pc ..") move N from (" .. x .. ", " .. y ..")") end
+        end
+        if y < 7 and unblocked(bp,wp,x,y+1) and a[pc][x][y+1] == nil then
+            a[pc][x][y+1] = n
+            sc = sc + 1
+            s[sc] = {pc,{x,y+1}}
+            r[pc*100+x*10+y+1] = {pc,{x,y}}
+            if debugmode then print(n .. ": (" .. pc ..") move S from (" .. x .. ", " .. y ..")") end
+        end
+        -- Consider moving stones
+        if x > 3 and not unblocked(bp,{},x-1,y) and unblocked(bp,wp,x-2,y) then
+            local npc = areplace(bp,x-1,y,x-2,y)
+            if a[npc] == nil or a[npc][x][y] == nil then
+                if a[npc] == nil then
+                    a[npc] = {}
+                    for i=1,5 do a[npc][i] = {} end
+                end
+                a[npc][x][y] = n + 1
+                tc = tc + 1
+                t[tc] = {npc,{x,y}}
+                r[npc*100+x*10+y] = {pc,{x,y},{-1,0}}
+                if debugmode then print(n .. ": (" .. pc ..") push W from (" .. x .. ", " .. y ..")") end
+            end
+        end
+        if x < 3 and not unblocked(bp,{},x+1,y) and unblocked(bp,wp,x+2,y) then
+            local npc = areplace(bp,x+1,y,x+2,y)
+            if a[npc] == nil or a[npc][x][y] == nil then
+                if a[npc] == nil then
+                    a[npc] = {}
+                    for i=1,5 do a[npc][i] = {} end
+                end
+                a[npc][x][y] = n + 1
+                tc = tc + 1
+                t[tc] = {npc,{x,y}}
+                r[npc*100+x*10+y] = {pc,{x,y},{1,0}}
+                if debugmode then print(n .. ": (" .. pc ..") push E from (" .. x .. ", " .. y ..")") end
+            end
+        end
+        if y > 5 and not unblocked(bp,{},x,y-1) and unblocked(bp,wp,x,y-2) then
+            local npc = areplace(bp,x,y-1,x,y-2)
+            if a[npc] == nil or a[npc][x][y] == nil then
+                if a[npc] == nil then
+                    a[npc] = {}
+                    for i=1,5 do a[npc][i] = {} end
+                end
+                a[npc][x][y] = n + 1
+                tc = tc + 1
+                t[tc] = {npc,{x,y}}
+                r[npc*100+x*10+y] = {pc,{x,y},{0,-1}}
+                if debugmode then print(n .. ": (" .. pc ..") push N from (" .. x .. ", " .. y ..")") end
+            end
+        end
+        if y < 6 and not unblocked(bp,{},x,y+1) and unblocked(bp,wp,x,y+2) then
+            local npc = areplace(bp,x,y+1,x,y+2)
+            if a[npc] == nil or a[npc][x][y] == nil then
+                if a[npc] == nil then
+                    a[npc] = {}
+                    for i=1,5 do a[npc][i] = {} end
+                end
+                a[npc][x][y] = n + 1
+                tc = tc + 1
+                t[tc] = {npc,{x,y}}
+                r[npc*100+x*10+y] = {pc,{x,y},{0,1}}
+                if debugmode then print(n .. ": (" .. pc ..") push S from (" .. x .. ", " .. y ..")") end
+            end
+        end
+        -- Consider pushing stones into the goal area
+        -- Instead of tracking stone locations inside the goal area, we act as if any
+        -- number of stones can be pushed to (3,8)
+        if x == 3 and y == 6 and not unblocked(bp,{},3,7) then
+            local npc = areplace(bp,3,7,3,8)
+            if a[npc] == nil or a[npc][x][y] == nil then
+                if a[npc] == nil then
+                    a[npc] = {}
+                    for i=1,5 do a[npc][i] = {} end
+                end
+                a[npc][x][y] = n + 1
+                tc = tc + 1
+                t[tc] = {npc,{x,y}}
+                r[npc*100+x*10+y] = {pc,{x,y},{0,1}}
+                if debugmode then print(n .. ": (" .. pc ..") push to goal") end
+            end
+        end
+        assert_bool(sc<7500,"Infinite loop in Sokoban solution: sc is too high")
+        assert_bool(tc<7500,"Infinite loop in Sokoban solution: tc is too high")
+        si = si + 1
+        if si % siperstep == 0 and r[38383837] == nil then return end
+    end
+    n = n + 1
+    s = t
+    sc = tc
+    si = 1
+    t = {}
+    tc = 0
+end
+function aftersolve()
+    if r[38383837] == nil then
+        no["togglables_#*"]:toggle()
+        no["invisigrates_#*"]:kill()
+        wo:add(YIN,{"it_document",text="text5"})
+        no["startspot"]:sound("pickup")
+        wo[no["whitespot"]] = {"fl_dark",force_x=-5}
+        return
+    end
+    -- Calculate the route through
+    pc = 38383837
+    local opc = 38383839 -- so the white marble opens the oxyd
+    while pc ~= nil do
+        routethrough[pc] = opc
+        opc = pc
+        if r[pc] == nil then
+            pc = nil
+        else
+            pc = r[pc][1]*100+r[pc][2][1]*10+r[pc][2][2]
+        end
+    end
+    no["movetimer"]:on()
+end
+
+-- Variables used in moving around
+    local lx = 1 -- Last x position of the white marble
+    local ly = 1 -- Last y position of the white marble
+    local ux = 1 -- Last x position of the white marble other than the current one
+    local uy = 1 -- Last y position of the white marble other than the current one
+    local ax = 3 -- x location of the grid the white marble is aiming for
+    local ay = 2 -- x location of the grid the white marble is aiming for
+    local lastchange = 0 -- number of moves since we changed position
+
+function moveiter()
+    -- We want the white marble to move quickly and turn quickly.
+    -- Therefore, we use a large slope force and a larger friction, to make turning work correctly.
+    local x, y = no["whitemarble"]:xy()
+    local yy
+    local res = 0
+    if x ~= lx or y ~= ly then -- reset floor, record ux/uy
+        wo[{lx,ly}] = {fl({lx,ly}):kind()}
+        if ly < 8 then
+            ux = lx
+            uy = ly
+        end
+        lastchange = 0
+    else
+        lastchange = lastchange + 1
+    end
+    lx = x
+    ly = y
+    bc = 0
+    for b in no["boxes_#*"] do
+        bc = bc + 1
+        bp[bc] = {b.x,b.y}
+        if b.y > 8 then bp[bc] = {3,8} end
+    end
+    while bc < 3 do
+        bc = bc + 1
+        bp[bc] = {3,8}
+    end
+    yy = y
+    if yy > 7 then yy = 7 end
+    pc = afromtable(bp) * 100 + x * 10 + yy
+    if routethrough[pc] ~= nil then
+        if pc % 100 == routethrough[pc] % 100 then
+            ax = x + r[routethrough[pc]][3][1]
+            ay = y + r[routethrough[pc]][3][2]
+            res = 1
+        else
+            ay = routethrough[pc] % 10
+            ax = ((routethrough[pc] - ay) / 10) % 10
+            res = 2
+        end
+    elseif ax == x and ay == y then
+        if y > 7 then
+            ay = 7
+            res = 3
+            -- the point to return to is just before we started pushing into the
+            -- goal, which must have been from (3,6)
+            ux = 3
+            uy = 6
+        else
+            -- we might not have been able to stop after pushing a box, or we
+            -- might have bounced; in both cases, return to where we pushed from
+            -- to continue the recorded sequence
+            ax = ux
+            ay = uy
+            res = 4
+        end
+    end
+    -- special case for pushing blocks into the goal
+    if -st({3,8}) then ax = 3; ay = 9; res = 5 end
+    if -st({3,9}) then ax = 3; ay = 10; res = 6 end
+    if afromtable(bp) == 383838 then ax = 3; ay = 11; res = 7 end
+    -- move us off a block if we're stuck
+    if lastchange >= 5 and lastchange % 5 < 2 then res = 8 end
+    if debugmode then
+        print("At (" .. x .. ", " .. y .. "), aiming for (" .. ax .. ", " .. ay .. "), reason " .. res)
+    end
+    wo[{lx,ly}] = {fl({lx,ly}):kind(), friction=250,
+                   force_x=(ax-x)*cond(res==1,2500,cond(res==8,-400-lastchange*3,1500))+(random(20)-random(20))*(ay-y),
+                   force_y=(ay-y)*cond(res==1,2500,cond(res==8,-400-lastchange*3,1500))+(random(20)-random(20))*(ax-x)}
+    if no["bottomoxyd"].state ~= CLOSED then
+        no["movetimer"]:off()
+        wo[{lx,ly}] = {fl({lx,ly}):kind()}
+        if n + 2 < cond(wo["IsDifficult"], 30, 25) then
+            wo:add(YIN,{"it_spoon"})
+            wo:add(YIN,{"it_document",text="text6"})
+            no["startspot"]:sound("pickup")
+        else
+            wo:add(YIN,{"it_document",text="text7"})
+            no["startspot"]:sound("pickup")
+            no["togglables_#*"]:open()
+        end
+    end
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false" />
+      </el:string>
+      <el:string el:key="subtitle">
+        <el:english el:translate="true" />
+      </el:string>
+      <el:string el:key="text1">
+        <el:english el:translate="true">Build me a solvable Sokoban puzzle that will take me 30 pushes or more to solve. The seeds grow into boxes; the dice grow into walls.</el:english>
+      </el:string>
+      <el:string el:key="text2">
+        <el:english el:translate="true">Build me a solvable Sokoban puzzle that will take me 25 pushes or more to solve. The seeds grow into boxes; the dice grow into walls.</el:english>
+      </el:string>
+      <el:string el:key="text3">
+        <el:english el:translate="true">I can't solve that puzzle; there aren't enough boxes! Use the spoon, and next time make sure the boxes finish growing before hitting the switch.</el:english>
+      </el:string>
+      <el:string el:key="text5">
+        <el:english el:translate="true">I don't think that puzzle can be solved. If you think you can prove me wrong, go get the oxyd!</el:english>
+      </el:string>
+      <el:string el:key="text6">
+        <el:english el:translate="true">That puzzle was too easy! Use the spoon, and give me a harder one next time!</el:english>
+      </el:string>
+      <el:string el:key="text7">
+        <el:english el:translate="true">Thanks for that excellent puzzle, I really enjoyed solving it!</el:english>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/ais12_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/data/levels/enigma_ix/devnull29_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/devnull29_1.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_ix/devnull29_1.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -1,92 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="alternate X" el:subtitle="" el:id="devnull29"/>
-      <el:version el:score="1" el:release="1" el:revision="7" el:status="released"/>
-      <el:author el:name="/dev/null" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2009 dev0</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.10"/>
-      <el:modes el:easy="true" el:single="true" el:network="false"/>
-      <el:score el:easy="19:11" el:difficult="19:11"/>
-    </el:info>
-    <el:luamain><![CDATA[
-wo["FollowThreshold"] = po(2, 2)
-wo["AllowSuicide"] = false
-wo["ProvideExtralifes"] = not wo["IsDifficult"]
-wo["CrackSpreading"] = 0.0
-
-ti[" "] = {"fl_rock"}
-ti["."] = {"fl_abyss"}
-ti["#"] = {"st_fake_oxyda"}
-ti["x"] = ti["."] .. {"st_grate_cross"}
-ti["+"] = {"st_box_rock"}
-ti["!"] = {"it_crack_l"}
-ti["-"] = ti["."] .. {"it_crack_l"}
-ti["s"] = {"it_seed_hay"}
-ti["K"] = {"st_chess_black"}
-ti["C"] = ti["K"] .. ti["!"]
-ti["Y"] = ti["K"] .. {"it_yinyang"}
-ti["H"] = ti["."] .. ti["s"] .. ti["K"]
-ti["k"] = {"st_chess_white"}
-ti["c"] = ti["k"] .. ti["!"]
-ti["y"] = {"it_bag", name="sackYinyang"}
-ti["S"] = ti["k"] .. {"it_bag", name="sackSeed"}
-ti["m"] = ti["k"] .. {"it_magicwand"}
-ti["l"] = cond(wo["IsDifficult"], ti["."], ti["."] .. {"it_extralife"})
-ti["X"] = ti["x"] .. {"it_document", text = "BzG"}
-ti["W"] = {"st_oxyd_a", oxydcolor = OXYD_WHITE}
-ti["B"] = {"st_oxyd_a", oxydcolor = OXYD_BLACK}
-ti["J"] = {"st_oxyd_a", oxydcolor = OXYD_BLUE}
-ti["@"] = {"#ac_marble_black", essential = INDISPENSABLE}
-ti["*"] = {"#ac_marble_white", essential = INDISPENSABLE}
-
-wo(ti, " ", {
-    "#####J#############...................###################",
-    ".#W@ .S ..x    K. B#.................##.      l   .+. ##.",
-    "..##!  K   x + !.H.##...............##..   ..x....++ ##..",
-    "...## .+ C. x.. .!..##.............##     ..x.....  ##...",
-    "....##.+. .  x    ...##...........##.++.  .x.   .  ##....",
-    ".....## k ... x.. ..+ ##.........##.  + . x  .++  ##.....",
-    "......##     . x...    ##.......##    .+ x  ..   ##......",
-    ".......##   .!  x..   k ##.....##  .. ..x     +.##.......",
-    "........##  .    x..  +  ##...##.... ..x. ...K.##........",
-    ".........##  !.  .x.....+ ##.##.....+ x +...H ##.........",
-    "..........## ..+.  x...+. .###  +.. .xK ...  ##..........",
-    "...........##   ... x.. .+  # k ! k x  ...  ##...........",
-    "............##K  k+ .x... ..  +.k  x.K...  ##............",
-    ".............##  . k. xxxxxxXxxxxxx.  ...s##.............",
-    "............## k     x    +.k   .  x  k....##............",
-    "...........##       x k...+ #.  +.+.x  .....##...........",
-    "..........##  .... x  .+.  ###.......xkk.....##..........",
-    ".........##  ...  x.++ .+ ##.##... + .x k   ..##.........",
-    "........##  ...  x. ...  ##...##.....  x.  +  .##........",
-    ".......## K++   x. ...  ##.....##..... .x.....  ##.......",
-    "......## ..    x  ...  ##.......##... ++.x.   ...##......",
-    ".....##.  .k..x   ..  ##.........##..  .+ x +     ##.....",
-    "....##. + +. x .+ .  ##...........##..k.  .x + + +.##....",
-    "...##  .... x....+  ##.............##.K.  ..x k.....##...",
-    "..## +.....x  k  +.##...............##  ... mx  k !Y.##..",
-    ".##       l k     ##.................#W   k. yx.. .!+*B#.",
-    "###################...................#############J#####"})
-
-wo:add(no["sackSeed"], ti["s"])
-wo:add(no["sackYinyang"], {"it_yinyang"})
-if not wo["IsDifficult"] then
-    wo:add(YIN,  {"it_flag_black"})
-    wo:add(YIN,  {"it_pin"})
-    wo:add(YANG, {"it_flag_white"})
-    wo:add(YANG, {"it_pin"})
-end
- ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-      <el:string el:key="BzG">
-        <el:english el:translate="false">Dedicated to RJ. Thanks alot for the 29 songs.</el:english>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>

Copied: trunk/data/levels/enigma_ix/devnull29_2.xml (from rev 1864, trunk/data/levels/enigma_ix/devnull29_1.xml)
===================================================================
--- trunk/data/levels/enigma_ix/devnull29_1.xml	2009-11-19 20:25:23 UTC (rev 1864)
+++ trunk/data/levels/enigma_ix/devnull29_2.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -0,0 +1,92 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="alternate X" el:subtitle="" el:id="devnull29"/>
+      <el:version el:score="2" el:release="2" el:revision="9" el:status="released"/>
+      <el:author el:name="/dev/null" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2009 dev0</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10" />
+      <el:modes el:easy="true" el:single="true" el:network="false"/>
+      <el:score el:easy="19:11" el:difficult="19:11"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["FollowThreshold"] = po(2, 2)
+wo["AllowSuicide"] = false
+wo["ProvideExtralifes"] = not wo["IsDifficult"]
+wo["CrackSpreading"] = 0.0
+
+ti[" "] = {"fl_rock"}
+ti["."] = {"fl_abyss"}
+ti["#"] = {"st_fake_oxyda"}
+ti["x"] = ti["."] .. {"st_grate_cross"}
+ti["+"] = {"st_box_rock"}
+ti["!"] = {"it_crack_l"}
+ti["s"] = {"it_seed_hay"}
+ti["K"] = {"st_chess_black"}
+ti["C"] = ti["K"] .. ti["!"]
+ti["Y"] = ti["K"] .. {"it_yinyang"}
+ti["H"] = ti["."] .. ti["s"] .. ti["K"]
+ti["k"] = {"st_chess_white"}
+ti["c"] = ti["k"] .. ti["!"]
+ti["z"] = ti["k"] .. ti["."]
+ti["y"] = {"it_bag", "sackYinyang"}
+ti["S"] = ti["k"] .. {"it_bag", "sackSeed"}
+ti["m"] = ti["k"] .. {"it_magicwand"}
+ti["l"] = cond(wo["IsDifficult"], ti["."], ti["."] .. {"it_extralife"})
+ti["X"] = ti["x"] .. {"it_document", text = "BzG"}
+ti["W"] = {"st_oxyd_a", oxydcolor = OXYD_WHITE}
+ti["B"] = {"st_oxyd_a", oxydcolor = OXYD_BLACK}
+ti["J"] = {"st_oxyd_a", oxydcolor = OXYD_BLUE}
+ti["@"] = {"#ac_marble_black", essential = INDISPENSABLE}
+ti["*"] = {"#ac_marble_white", essential = INDISPENSABLE}
+
+wo(ti, " ", {
+    "#####J#############...................###################",
+    ".#W@ .S ..x    K. B#.................##.      l   .+. ##.",
+    "..##!  K   x + !.H.##...............##..   ..x....++ ##..",
+    "...## .+ C. x.. .!..##.............##     ..x.....  ##...",
+    "....##.+. .  x    ...##...........##.++.  .x.   .  ##....",
+    ".....## k ... x.. ..+ ##.........##.  + . x  .++  ##.....",
+    "......##  !  . x...    ##.......##    .+ x  ..   ##......",
+    ".......##   .!  x..   k ##.....##  .. ..x     +.##.......",
+    "........##  .    x..  +  ##...##.... ..x. ...K.##........",
+    ".........##  !.  .x.....+ ##.##.....+ x +...H ##.........",
+    "..........## ..+.  x...+. .###  +.. .xK ...  ##..........",
+    "...........##   ..z x.. .+  # k ! k x  ...  ##...........",
+    "............##K  k+ .x... ..  +.c  x.K...  ##............",
+    ".............##  . k. xxxxxxXxxxxxx.  ...s##.............",
+    "............## k     x    +.k   .  x  k....##............",
+    "...........##       x k...+ #.  +.+.x  .....##...........",
+    "..........##  .... x  .+.  ###.......xkk.....##..........",
+    ".........##  ...  x.++ .+ ##.##... + .x k   ..##.........",
+    "........##  ...  x. ...  ##...##.....  x.  +  .##........",
+    ".......## K++   x. ...  ##.....##..... .x.....  ##.......",
+    "......## ..    x  ...  ##.......##... ++.x.   ...##......",
+    ".....##.  .k..x   ..  ##.........##..  .+ x +     ##.....",
+    "....##. + +. x .+ .  ##...........##..k.  .x + + +.##....",
+    "...##  .... x....+  ##.............##.K.  ..x k.....##...",
+    "..## +.....x  k  +.##...............##  ... mx  k !Y.##..",
+    ".##       l k     ##.................#W   k. yx.. .!+*B#.",
+    "###################...................#############J#####"})
+
+wo:add(no["sackSeed"], ti["s"])
+wo:add(no["sackYinyang"], {"it_yinyang"})
+if not wo["IsDifficult"] then
+    wo:add(YIN,  {"it_flag_black"})
+    wo:add(YIN,  {"it_pin"})
+    wo:add(YANG, {"it_flag_white"})
+    wo:add(YANG, {"it_pin"})
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+      <el:string el:key="BzG">
+        <el:english el:translate="false">Dedicated to RJ. Thanks alot for the 29 songs.</el:english>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>

Modified: trunk/data/levels/enigma_ix/index.xml
===================================================================
--- trunk/data/levels/enigma_ix/index.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_ix/index.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="11100" network="false" owner="Enigma Team" release="1" revision="15" title="Enigma IX"/>
+  <info enigma="1.10" group="Enigma" location="11100" network="false" owner="Enigma Team" release="1" revision="16" title="Enigma IX"/>
 
   <attributes/>
 
@@ -35,7 +35,7 @@
     <level _seq="27" _title="Carcassonne" _xpath="./mecke40_1" author="mecke" ctrl="force" easy="true" id="mecke40" rel="1" rev="22" score="1" target="time" unit="duration"/>
     <level _seq="28" _title="Building Blocks I" _xpath="./raoul37_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul37" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="29" _title="Naoussa" _xpath="./mecke37_1" author="mecke" ctrl="force" easy="true" id="mecke37" rel="1" rev="29" score="1" target="time" unit="duration"/>
-    <level _seq="30" _title="alternate X" _xpath="./devnull29_1" author="/dev/null" ctrl="force" easy="true" id="devnull29" rel="1" rev="7" score="1" target="time" unit="duration"/>
+    <level _seq="30" _title="alternate X" _xpath="./devnull29_2" author="/dev/null" ctrl="force" easy="true" id="devnull29" rel="2" rev="9" score="2" target="time" unit="duration"/>
     <level _seq="31" _title="Volcano Day" _xpath="./pulley23_1" author="Mark Pulley" ctrl="force" easy="false" id="pulley23" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="32" _title="Poe's Nightmare" _xpath="./ulf07_1" author="Ulf Stegemann" ctrl="force" easy="true" id="ulf07" rel="1" rev="120" score="1" target="time" unit="duration"/>
     <level _seq="33" _title="Once, No More No Less" _xpath="./ais07_1" author="Alex Smith" ctrl="force" easy="false" id="20090602ais523001" rel="1" rev="2" score="1" target="time" unit="duration"/>
@@ -49,6 +49,8 @@
     <level _seq="41" _title="Tour de France" _xpath="./mecke04_1" author="mecke" ctrl="force" easy="false" id="mecke04" rel="1" rev="12" score="1" target="time" unit="duration"/>
     <level _seq="42" _title="Escape in Chains" _xpath="./duffy184_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy184" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="43" _title="Meditation Sorting" _xpath="./wesley02_1" author="Helge Blohmer" ctrl="force" easy="true" id="20080821wcr001" rel="1" rev="3" score="1" target="time" unit="duration"/>
+    <level _seq="44" _title="Claustrophobia" _xpath="./ais11_1" author="Alex Smith" ctrl="force" easy="true" id="20090926ais523001" rel="1" rev="2" score="1" target="time" unit="duration"/>
+    <level _seq="45" _title="Nabokos" _xpath="./ais12_1" author="Alex Smith" ctrl="force" easy="true" id="20090926ais523003" rel="1" rev="4" score="1" target="time" unit="duration"/>
   </levels>
 
 </index>

Modified: trunk/data/levels/enigma_viii/devnull03_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/devnull03_1.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_viii/devnull03_1.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Multi-lane" el:subtitle="" el:id="devnull03"/>
-      <el:version el:score="1" el:release="1" el:revision="27" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="28" el:status="released"/>
       <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2008 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -86,7 +86,7 @@
 ti["L"] = {"st_switch", name = "switchL", action = "toggle", target = "laserS3"}
 ti["0"] = ti["."] .. {"it_trigger", name = "trigger00", action = "toggle", target = "bridge00#*"}
 ti["1"] = {"it_trigger", name = "trigger01", action = "callback", target = "bridge01"}
-ti["2"] = ti["J"] .. {"it_trigger", name = "trigger02", action = "callback", target = "bridge02"}
+ti["2"] = ti["J"] .. {"it_trigger", name = "trigger02", action = "callback", target = "bridge02", safeaction = true}
 ti["3"] = {"it_trigger", name = "trigger03", action = "callback", target = "bridge03"}
 ti["!"] = ti["."] .. {"it_sensor", name = "sensor01", action = "open", target = "bridge02#*", invisible = true}
 ti["@"] = ti["."] .. {"#ac_marble_black"}

Modified: trunk/data/levels/enigma_viii/index.xml
===================================================================
--- trunk/data/levels/enigma_viii/index.xml	2009-11-21 01:42:59 UTC (rev 1866)
+++ trunk/data/levels/enigma_viii/index.xml	2009-11-21 17:59:01 UTC (rev 1867)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="64" title="Enigma VIII"/>
+  <info enigma="1.10" group="Enigma" location="10900" network="false" owner="Enigma Team" release="1" revision="65" title="Enigma VIII"/>
 
   <attributes/>
 
@@ -49,7 +49,7 @@
     <level _seq="41" _title=" - Meditation - " _xpath="./devnull07_1" author="/dev/null" ctrl="force" easy="true" id="devnull07" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="42" _title=" - Meditation - " _xpath="./devnull06_1" author="/dev/null" ctrl="force" easy="true" id="devnull06" rel="1" rev="8" score="1" target="time" unit="duration"/>
     <level _seq="43" _title="- Meditation -" _xpath="./devnull04_1" author="/dev/null" ctrl="force" easy="true" id="devnull04" rel="1" rev="10" score="1" target="time" unit="duration"/>
-    <level _seq="44" _title="Multi-lane" _xpath="./devnull03_1" author="/dev/null" ctrl="force" easy="true" id="devnull03" rel="1" rev="27" score="1" target="time" unit="duration"/>
+    <level _seq="44" _title="Multi-lane" _xpath="./devnull03_1" author="/dev/null" ctrl="force" easy="true" id="devnull03" rel="1" rev="28" score="1" target="time" unit="duration"/>
     <level _seq="45" _title="See Saw Meditation" _xpath="./duffy180_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy180" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="46" _title="Under control?" _xpath="./devnull09_1" author="/dev/null" ctrl="force" easy="true" id="devnull09" rel="1" rev="10" score="1" target="time" unit="duration"/>
     <level _seq="47" _title=" - Meditation - " _xpath="./devnull12_1" author="/dev/null" ctrl="force" easy="true" id="devnull12" rel="1" rev="10" score="1" target="time" unit="duration"/>



From raoul at mail.berlios.de  Sun Nov 22 14:36:20 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 22 Nov 2009 14:36:20 +0100
Subject: [Enigma-game-svn] r1868 - in trunk: attic/images-actors data
	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911221336.nAMDaKEl003141@sheep.berlios.de>

Author: raoul
Date: 2009-11-22 14:36:17 +0100 (Sun, 22 Nov 2009)
New Revision: 1868

Added:
   trunk/attic/images-actors/ac_marble_black-gfx16.xcf
   trunk/attic/images-actors/ac_marble_black-gfx32.xcf
   trunk/attic/images-actors/ac_marble_black-gfx40.xcf
   trunk/attic/images-actors/ac_marble_black-gfx48.xcf
   trunk/attic/images-actors/ac_marble_black-gfx64.xcf
   trunk/attic/images-actors/ac_marble_sizes.txt
   trunk/attic/images-actors/ac_marble_white-gfx16.xcf
   trunk/attic/images-actors/ac_marble_white-gfx32.xcf
   trunk/attic/images-actors/ac_marble_white-gfx40.xcf
   trunk/attic/images-actors/ac_marble_white-gfx48.xcf
   trunk/attic/images-actors/ac_marble_white-gfx64.xcf
   trunk/attic/images-actors/sh_marble-gfx16.xcf
   trunk/attic/images-actors/sh_marble-gfx32.xcf
   trunk/attic/images-actors/sh_marble-gfx40.xcf
   trunk/attic/images-actors/sh_marble-gfx48.xcf
   trunk/attic/images-actors/sh_marble-gfx64.xcf
   trunk/data/gfx16/ac_marble_black.png
   trunk/data/gfx16/ac_marble_white.png
   trunk/data/gfx16/sh_marble.png
   trunk/data/gfx16/st_oxyd_questmark.png
   trunk/data/gfx32/sh_marble.png
   trunk/data/gfx40/sh_marble.png
   trunk/data/gfx48/sh_marble.png
   trunk/data/gfx64/ac_marble_black.png
   trunk/data/gfx64/ac_marble_white.png
   trunk/data/gfx64/sh_marble.png
   trunk/data/gfx64/st_oxyd_questmark.png
Modified:
   trunk/attic/images-actors/ac_pearl-gfx16.xcf
   trunk/attic/images-actors/ac_pearl-gfx32.xcf
   trunk/attic/images-actors/ac_pearl-gfx40.xcf
   trunk/attic/images-actors/ac_pearl-gfx48.xcf
   trunk/attic/images-actors/ac_pearl-gfx64.xcf
   trunk/attic/images-actors/sh_pearl-gfx16.xcf
   trunk/attic/images-actors/sh_pearl-gfx32.xcf
   trunk/attic/images-actors/sh_pearl-gfx40.xcf
   trunk/attic/images-actors/sh_pearl-gfx48.xcf
   trunk/attic/images-actors/sh_pearl-gfx64.xcf
   trunk/data/gfx32/ac_marble_black.png
   trunk/data/gfx32/ac_marble_white.png
   trunk/data/gfx40/ac_marble_black.png
   trunk/data/gfx40/ac_marble_white.png
   trunk/data/gfx48/ac_marble_black.png
   trunk/data/gfx48/ac_marble_white.png
   trunk/data/gfx64/ac_pearl_black.png
   trunk/data/models-2d.lua
   trunk/data/models.lua
Log:
-> New marble images for all resolutions
-> New marble shadows for all resolutions
-> Imrpoved pearl image in gfx64
-> Missing question mark images in gfx{16,64}
-> math fix in models.lua 



Added: trunk/attic/images-actors/ac_marble_black-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_black-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_black-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_black-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_black-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_black-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_black-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_black-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_black-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_black-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_sizes.txt
===================================================================
--- trunk/attic/images-actors/ac_marble_sizes.txt	2009-11-21 17:59:01 UTC (rev 1867)
+++ trunk/attic/images-actors/ac_marble_sizes.txt	2009-11-22 13:36:17 UTC (rev 1868)
@@ -0,0 +1,28 @@
+Sizes for marble actor models
+=============================
+	
+Physical radius of marbles is 19/64 tiles.
+
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+|                                                   |    gfx16 |    gfx32 |    gfx40 |    gfx48 |    gfx64 |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+| Sprite image size [px]                            |    20x40 |    40x80 |   50x100 |   60x120 |   80x160 |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+| Physical marble size (diameter) [px]              |      9.5 |     19.0 |    23.75 |     28.5 |     38.0 |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+| Data for steady models                            |          |          |          |          |          |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+| Marble size in steady models [px] and [% of tile] | 10  62.5 | 18  56.3 | 24  60.0 | 28  58.3 | 38  59.4 |
+| (:= physical size rounded to next even number)    |          |          |          |          |          |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+
+
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+| Data for steady shadow models                     |          |          |          |          |          |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+| Shadow size in steady models [px] and [% of tile] | 10  62.5 | 18  56.3 | 24  60.0 | 28  58.3 | 38  59.4 |
+|---------------------------------------------------+----------+----------+----------+----------+----------|
+
+
+// EOF


Property changes on: trunk/attic/images-actors/ac_marble_sizes.txt
___________________________________________________________________
Name: svn:eol-style
   + native

Added: trunk/attic/images-actors/ac_marble_white-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_white-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_white-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_white-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_white-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_white-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_white-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_white-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/ac_marble_white-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/ac_marble_white-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Modified: trunk/attic/images-actors/ac_pearl-gfx16.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/ac_pearl-gfx32.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/ac_pearl-gfx40.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/ac_pearl-gfx48.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/ac_pearl-gfx64.xcf
===================================================================
(Binary files differ)

Added: trunk/attic/images-actors/sh_marble-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_marble-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_marble-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_marble-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_marble-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_marble-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_marble-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_marble-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-actors/sh_marble-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-actors/sh_marble-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Modified: trunk/attic/images-actors/sh_pearl-gfx16.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/sh_pearl-gfx32.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/sh_pearl-gfx40.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/sh_pearl-gfx48.xcf
===================================================================
(Binary files differ)

Modified: trunk/attic/images-actors/sh_pearl-gfx64.xcf
===================================================================
(Binary files differ)

Added: trunk/data/gfx16/ac_marble_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_marble_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/ac_marble_white.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/ac_marble_white.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/sh_marble.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_marble.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_oxyd_questmark.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_oxyd_questmark.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/ac_marble_black.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/ac_marble_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/sh_marble.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/sh_marble.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx40/ac_marble_black.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/ac_marble_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/sh_marble.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/sh_marble.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx48/ac_marble_black.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/ac_marble_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/sh_marble.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/sh_marble.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_marble_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_marble_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/ac_marble_white.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/ac_marble_white.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx64/ac_pearl_black.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/sh_marble.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_marble.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_oxyd_questmark.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_oxyd_questmark.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-21 17:59:01 UTC (rev 1867)
+++ trunk/data/models-2d.lua	2009-11-22 13:36:17 UTC (rev 1868)
@@ -37,17 +37,16 @@
     local images,frames,shadows
 
     -- Normal black marble
-    images = SpriteImages("ac_marble_black", 2, 0.5, 0.32)
-    shadows = SpriteImage("sh-blackball", 0.4, 0.29)
-    DefShModel("ac_marble_black", "ac_marble_black1", "sh-blackball")
-    DefShModel("ac_marble_black-shine", "ac_marble_black2", "sh-blackball")
+    images = SpriteImages("ac_marble_black", 2, 0.5, 0.31)
+    shadows = SpriteImage("sh_marble", 0.4, 0.29)
+    DefShModel("ac_marble_black", "ac_marble_black1", "sh_marble")
+    DefShModel("ac_marble_black-shine", "ac_marble_black2", "sh_marble")
 
     -- Normal white marble
     -- Use shadow from black marble
-    DefAlias("sh-whiteball", "sh-blackball")
-    images = SpriteImages("ac_marble_white", 2, 0.5, 0.32)
-    DefShModel("ac_marble_white", "ac_marble_white1", "sh-whiteball")
-    DefShModel("ac_marble_white-shine", "ac_marble_white2", "sh-whiteball")
+    images = SpriteImages("ac_marble_white", 2, 0.5, 0.31)
+    DefShModel("ac_marble_white", "ac_marble_white1", "sh_marble")
+    DefShModel("ac_marble_white-shine", "ac_marble_white2", "sh_marble")
 
     -- Falling black marble
     images = SpriteImages("ac-blackball-fall", 10)

Modified: trunk/data/models.lua
===================================================================
--- trunk/data/models.lua	2009-11-21 17:59:01 UTC (rev 1867)
+++ trunk/data/models.lua	2009-11-22 13:36:17 UTC (rev 1868)
@@ -295,7 +295,7 @@
 function SpriteImages(spriteimg, n, offsetfactor, padding)
     local factor = offsetfactor or 0.5
     local offset = -SpriteSize * factor
-    local pad = (padding or 0) * TileSize
+    local pad = math.floor( (padding or 0) * TileSize )
     return DefSubimages(spriteimg,
                          {h = n, imgw=SpriteSize, imgh=SpriteSize,
                              xoff = offset, yoff = offset, padding=pad})
@@ -304,8 +304,8 @@
 function SpriteImage(spriteimg, offsetfactor, padding)
     local factor = offsetfactor or 0.5
     local offset = -SpriteSize * factor
-    local padding = (padding or 0) * TileSize
-    return DefImage(spriteimg, {xoff = offset, yoff = offset, padding=padding})
+    local pad = math.floor( (padding or 0) * TileSize )
+    return DefImage(spriteimg, {xoff = offset, yoff = offset, padding=pad})
 end
 
 function SpriteWithShadow()



From ral at mail.berlios.de  Mon Nov 23 01:32:04 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Mon, 23 Nov 2009 01:32:04 +0100
Subject: [Enigma-game-svn] r1869 - in trunk: doc/reference src
Message-ID: <200911230032.nAN0W4d9011771@sheep.berlios.de>

Author: ral
Date: 2009-11-23 01:31:55 +0100 (Mon, 23 Nov 2009)
New Revision: 1869

Modified:
   trunk/doc/reference/enigma-ref.texi
   trunk/src/main.cc
Log:
Trunk 1.1: 
- redirect stdout/stderr on Windows to the Enigma standard user path
  - use filenames "Output.log", "Error.log"
  - this fixes access permission problems on Vista, Windows 7 for the
    old log files that have been written aside the app executable
Note:
- a SDL.dll compiled with --disable-stdio-redirect should be used

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-11-22 13:36:17 UTC (rev 1868)
+++ trunk/doc/reference/enigma-ref.texi	2009-11-23 00:31:55 UTC (rev 1869)
@@ -84,8 +84,8 @@
 can control them.
 
 Enigma maintains several paths for control of load and storage of files. You
-can list these paths either by pressing @key{F2} within the main menu, or by
-starting Enigma with the switch @option{--log} (@pxref{Startup Switches}) and looking at the
+can list these paths either in the help submenu paths, or by starting Enigma
+with the switch @option{--log} (@pxref{Startup Switches}) and looking at the
 console output.
 
 @table @asis
@@ -120,10 +120,15 @@
 
 A backup of this directory is mandatory!
 
-The standard location is the directory @samp{.enigma} at your @env{HOME}
-directory. For @env{HOME}-less Windows users, it is the @samp{Application Data\Enigma}
-directory.
+The standard location is the directory @samp{.enigma} in your @env{HOME}
+directory. For @env{HOME}-less Windows users, it is the folder 
+ at samp{%APPDATA%\Enigma}, what resolves to the subfolder 
+ at samp{Application Data\Enigma} on XP/2000 or @samp{AppData\Roaming\Enigma} on
+Vista/Windows 7 located within your user data folder.
 
+This standard location of the user path is the location of logging and error
+output files, too.
+
 You can define your own path within the @ref{User Options}. By doing so, you can store your
 Enigma user data on a memory stick or on a shared partition, and use them alternatively from
 two Enigma installations.
@@ -170,11 +175,14 @@
 @node Startup Switches
 @section Startup Switches
 
-Besides starting Enigma by clicking on an installation-provided icon or start menu entry, you
-can start Enigma from a shell or commandline. With release 1.00, the Windows version
-supports this feature without restrictions. Although playing the distributed levels using this
-feature is not necessary, you may take advantage of this feature in special or advanced usage.
+Besides starting Enigma by clicking on an installation-provided icon or start
+menu entry, you can start Enigma from a shell or commandline. This allows you
+to add a selection of startup switches that are valid for just a single run.
 
+For repeated usage of constant startup switches you can create an desktop icon
+or start menu entry and append the startup switch to the target string of the
+Enigma application executable.
+
 The following list explains the supported user options. If an option is listed with a long name
 preceded by two minus signs, and with a one-character abbreviation preceded by one minus
 sign, use one of the notations, not both together; for example,
@@ -203,9 +211,12 @@
 
 @item @b{- at w{}-log}
 This switch turns on logging of internal information to the standard output.
-Windows users will find an file called @samp{stdout.txt} in the current working
-directory. The output will, for example, list the paths described in @ref{Locating Resources}.
+Windows users will find an file called @samp{Output.log} in the standard
+ at samp{User Path} folder. An additional file @samp{Error.log} lists severe
+error messages.
 
+The output will, for example, list the paths described in @ref{Locating Resources}.
+
 @item @b{- at w{}-nograb}
 A switch for Enigma developers that causes Enigma not to grab the mouse. You can hardly
 play a level in this mode, but it makes it possible to debug the
@@ -253,9 +264,9 @@
 A Windows user may start Enigma from the command line (please adjust the Enigma
 installation path):
 
- at code{C:\programs\Enigma-1.00\enigma.exe demo_simple.xml}
+ at code{C:\Programs\Enigma\enigma.exe --log demo_simple.xml}
 
-You will find these levels in a levelpack called @samp{Startup Levels}, which is
+You will find these levels in the levelpack called @samp{Startup Levels}, which is
 only visible by default if you supplied levels on the commandline.
 
 @node User Options

Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-22 13:36:17 UTC (rev 1868)
+++ trunk/src/main.cc	2009-11-23 00:31:55 UTC (rev 1869)
@@ -278,20 +278,49 @@
         isMakePreviews = true;
     }
 
-    // initialize logfile -- needs ap
-    if (ap.do_log) 
-        enigma::Log.rdbuf(cout.rdbuf());
-    else
-        enigma::Log.rdbuf(::nullbuffer);
-
     // initialize assertion stop flag
     if (ap.do_assert)
         enigma::noAssert = false;
 
-    // initialize system datapaths -- needs ap, log
+    // initialize system datapaths -- needs ap
     systemCmdDataPath = ap.datapath;
     initSysDatapaths(ap.preffilename);
 
+    // redirect stdout, stderr for Windows
+#ifdef WIN32
+    FILE *newfp;
+    newfp = std::freopen((userStdPath + "/Output.log").c_str(), "w", stdout);
+    if ( newfp == NULL ) {  // This happens on NT
+        newfp = fopen((userStdPath + "/Output.log").c_str(), "w");
+        if (newfp) {  // in case stdout is a macro
+            *stdout = *newfp;
+        }
+    }
+    setvbuf(stdout, NULL, _IOLBF, BUFSIZ);   // Line buffered
+    
+    newfp = std::freopen((userStdPath + "/Error.log").c_str(), "w", stderr);
+    if ( newfp == NULL ) {  // This happens on NT
+        newfp = fopen((userStdPath + "/Error.log").c_str(), "w");
+        if (newfp) {  // in case stderr is a macro
+            *stderr = *newfp;
+        }
+    }
+    setbuf(stderr, NULL);   // No buffering
+#endif
+
+
+    // initialize logfile -- needs ap
+    if (ap.do_log) 
+        enigma::Log.rdbuf(cout.rdbuf());
+    else
+        enigma::Log.rdbuf(::nullbuffer);
+    
+    // postponed system datapath logs
+    Log << "systemFS = \"" << systemFS->getDataPath() << "\"\n"; 
+    Log << "docPath = \"" << docPath << "\"\n"; 
+    Log << "l10nPath = \"" << l10nPath << "\"\n"; 
+    Log << "prefPath = \"" << prefPath << "\"\n"; 
+
     // initialize XML -- needs log, datapaths
     initXerces();
     
@@ -534,7 +563,6 @@
     systemFS->append_dir(systemAppDataPath);
     if (!systemCmdDataPath.empty())
          systemFS->prepend_dir(systemCmdDataPath);
-    Log << "systemFS = \"" << systemFS->getDataPath() << "\"\n"; 
     
     // docPath
     docPath = DOCDIR;    // defined in src/Makefile.am 
@@ -545,7 +573,6 @@
 #elif MACOSX
     docPath = progDir + "/../Resources/doc";
 #endif
-    Log << "docPath = \"" << docPath << "\"\n"; 
     
     // l10nPath
     l10nPath = LOCALEDIR;    // defined in src/Makefile.am
@@ -556,9 +583,7 @@
 #elif MACOSX
     l10nPath = progDir + "/../Resources/locale";
 #endif
-    Log << "l10nPath = \"" << l10nPath << "\"\n"; 
-    
-    
+
     // prefPath
     if (prefFilename.find_first_of(ecl::PathSeparators) != std::string::npos) {
         // pref is a path - absolute or home relative
@@ -593,7 +618,7 @@
                 fprintf(stderr, _("Error Application Data directory does not exist.\n"));
                 exit(1);
             }
-        Log << "winAppDataPath " << winAppDataPath << "\n";
+//        Log << "winAppDataPath " << winAppDataPath << "\n";
         userStdPath = winAppDataPath;
         prefPath = winAppDataPath + ecl::PathSeparator + "." + prefFilename;
 #endif
@@ -601,7 +626,6 @@
         fprintf(stderr, _("Error Home directory does not exist.\n"));
         exit(1);
     }
-    Log << "prefPath = \"" << prefPath << "\"\n"; 
 }
 
 void Application::initXerces() {



From raoul at mail.berlios.de  Mon Nov 23 15:12:14 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 23 Nov 2009 15:12:14 +0100
Subject: [Enigma-game-svn] r1870 - trunk/data/levels/enigma_viii
Message-ID: <200911231412.nANECEOd026163@sheep.berlios.de>

Author: raoul
Date: 2009-11-23 15:12:13 +0100 (Mon, 23 Nov 2009)
New Revision: 1870

Modified:
   trunk/data/levels/enigma_viii/mecke01_1.xml
Log:
-> Removed a superfluous "


Modified: trunk/data/levels/enigma_viii/mecke01_1.xml
===================================================================
--- trunk/data/levels/enigma_viii/mecke01_1.xml	2009-11-23 00:31:55 UTC (rev 1869)
+++ trunk/data/levels/enigma_viii/mecke01_1.xml	2009-11-23 14:12:13 UTC (rev 1870)
@@ -123,7 +123,7 @@
         <el:translation el:lang="de">Meine erste Levelkomposition</el:translation> 
       </el:string>
       <el:string el:key="text1">
-        <el:english el:translate="true">"Secrets? Use the items, ... use the glasses ...</el:english>
+        <el:english el:translate="true">Secrets? Use the items, ... use the glasses ...</el:english>
         <el:translation el:lang="de">Geheimnisse? Nutze die Gegenst?nde, ... eine Brille ...</el:translation>
       </el:string>
     </el:i18n>



From ral at mail.berlios.de  Mon Nov 23 18:08:29 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 23 Nov 2009 18:08:29 +0100
Subject: [Enigma-game-svn] r1871 - trunk/src
Message-ID: <200911231708.nANH8TtS008013@sheep.berlios.de>

Author: ral
Date: 2009-11-23 18:08:29 +0100 (Mon, 23 Nov 2009)
New Revision: 1871

Modified:
   trunk/src/main.cc
Log:
Trunk 1.1: 
- add startup option "--redirect" for all OS
  - redirect stdout/stderr to user path files Output.log/Error.log
  - Windows defaults redirect to true


Modified: trunk/src/main.cc
===================================================================
--- trunk/src/main.cc	2009-11-23 14:12:13 UTC (rev 1870)
+++ trunk/src/main.cc	2009-11-23 17:08:29 UTC (rev 1871)
@@ -130,6 +130,7 @@
            "    --nomusic      Disable music\n"
            "    --nosound      Disable music and sound effects\n"
            "    --pref -p file Use filename or dirname for preferences\n"
+           "    --redirect     Redirect stdout/stderr to files on user path\n"
            "    --showfps      Show the framerate (FPS) during the Game\n"
            "    --version      Print the executable's version number\n"
            "    --window -w    Run in a window; do not enter fullscreen mode\n"
@@ -147,7 +148,7 @@
 
         // Variables.
         bool nosound, nomusic, show_help, show_version, do_log, do_assert, force_window;
-        bool dumpinfo, makepreview, show_fps;
+        bool dumpinfo, makepreview, show_fps, redirect;
         string gamename;
         string datapath;
         string preffilename;
@@ -173,7 +174,7 @@
 AP::AP() : ArgParser (app.args.begin(), app.args.end())
 {
     nosound  = nomusic = show_help = show_version = do_log = do_assert = force_window = false;
-    dumpinfo = makepreview = show_fps = false;
+    dumpinfo = makepreview = show_fps = redirect = false;
     gamename = "";
     datapath = "";
     preffilename = PREFFILENAME;
@@ -189,6 +190,7 @@
     def (&dumpinfo,             "dumpinfo");
     def (&makepreview,          "makepreview");
     def (&show_fps,             "showfps");
+    def (&redirect,             "redirect");
     def (&force_window,         "window", 'w');
     def (OPT_GAME,              "game", true);
     def (OPT_DATA,              "data", 'd', true);
@@ -286,29 +288,31 @@
     systemCmdDataPath = ap.datapath;
     initSysDatapaths(ap.preffilename);
 
-    // redirect stdout, stderr for Windows
+    // redirect stdout, stderr
 #ifdef WIN32
-    FILE *newfp;
-    newfp = std::freopen((userStdPath + "/Output.log").c_str(), "w", stdout);
-    if ( newfp == NULL ) {  // This happens on NT
-        newfp = fopen((userStdPath + "/Output.log").c_str(), "w");
-        if (newfp) {  // in case stdout is a macro
-            *stdout = *newfp;
+    ap.redirect = true;
+#endif
+    if (ap.redirect) {
+        FILE *newfp;
+        newfp = std::freopen((userStdPath + "/Output.log").c_str(), "w", stdout);
+        if ( newfp == NULL ) {  // This happens on NT
+            newfp = fopen((userStdPath + "/Output.log").c_str(), "w");
+            if (newfp) {  // in case stdout is a macro
+                *stdout = *newfp;
+            }
         }
-    }
-    setvbuf(stdout, NULL, _IOLBF, BUFSIZ);   // Line buffered
-    
-    newfp = std::freopen((userStdPath + "/Error.log").c_str(), "w", stderr);
-    if ( newfp == NULL ) {  // This happens on NT
-        newfp = fopen((userStdPath + "/Error.log").c_str(), "w");
-        if (newfp) {  // in case stderr is a macro
-            *stderr = *newfp;
+        setvbuf(stdout, NULL, _IOLBF, BUFSIZ);   // Line buffered
+        
+        newfp = std::freopen((userStdPath + "/Error.log").c_str(), "w", stderr);
+        if ( newfp == NULL ) {  // This happens on NT
+            newfp = fopen((userStdPath + "/Error.log").c_str(), "w");
+            if (newfp) {  // in case stderr is a macro
+                *stderr = *newfp;
+            }
         }
+        setbuf(stderr, NULL);   // No buffering
     }
-    setbuf(stderr, NULL);   // No buffering
-#endif
 
-
     // initialize logfile -- needs ap
     if (ap.do_log) 
         enigma::Log.rdbuf(cout.rdbuf());
@@ -316,6 +320,7 @@
         enigma::Log.rdbuf(::nullbuffer);
     
     // postponed system datapath logs
+    Log << "Enigma " << getVersionInfo() << "\n";
     Log << "systemFS = \"" << systemFS->getDataPath() << "\"\n"; 
     Log << "docPath = \"" << docPath << "\"\n"; 
     Log << "l10nPath = \"" << l10nPath << "\"\n"; 



From ral at mail.berlios.de  Mon Nov 23 18:46:50 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 23 Nov 2009 18:46:50 +0100
Subject: [Enigma-game-svn] r1873 - trunk/po
Message-ID: <200911231746.nANHkoo8016734@sheep.berlios.de>

Author: ral
Date: 2009-11-23 18:46:46 +0100 (Mon, 23 Nov 2009)
New Revision: 1873

Added:
   trunk/po/pl.po
Removed:
   trunk/po/be.gmo
   trunk/po/uk.gmo
Log:
Trunk 1.1:
- add missing pl.po base file
- remove generated files be.gmo, uk.gmo


Deleted: trunk/po/be.gmo
===================================================================
(Binary files differ)

Added: trunk/po/pl.po
===================================================================
--- trunk/po/pl.po	2009-11-23 17:18:08 UTC (rev 1872)
+++ trunk/po/pl.po	2009-11-23 17:46:46 UTC (rev 1873)
@@ -0,0 +1,5884 @@
+# Polnish translation for Enigma.
+# Copyright (C) 20009 Erik
+# This file is distributed under the same license as the PACKAGE package.
+# Erik Jan Kuipers <erik.kuipers at uj.edu.pl>, 2009
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: Enigma 1.10\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2009-11-23 15:43+0100\n"
+"PO-Revision-Date: Y2009-11-23 12:59+0100\n"
+"Last-Translator: Erik Jan Kuipers <erik.kuipers at uj.edu.pl>\n"
+"Language-Team: Enigma developers <enigma-devel at nongnu.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: src/server.cc:183 src/server.cc:197 src/gui/LevelInspector.cc:201
+msgid "Server Error: could not load level '"
+msgstr ""
+
+#: src/client.cc:68
+#, c-format
+msgid "Mouse speed: %d"
+msgstr ""
+
+#: src/client.cc:78
+msgid "Another nameless level"
+msgstr ""
+
+#: src/client.cc:82
+msgid " by "
+msgstr ""
+
+#: src/client.cc:507
+msgid "Left mouse button:"
+msgstr ""
+
+#: src/client.cc:507
+msgid "Activate/drop leftmost inventory item"
+msgstr ""
+
+#: src/client.cc:508
+msgid "Right mouse button:"
+msgstr ""
+
+#: src/client.cc:508
+msgid "Rotate inventory items"
+msgstr ""
+
+#: src/client.cc:509 src/gui/LevelMenu.cc:194 src/gui/ScreenshotViewer.cc:34
+msgid "Escape:"
+msgstr ""
+
+#: src/client.cc:509
+msgid "Show game menu"
+msgstr ""
+
+#: src/client.cc:510
+msgid "Shift+Escape:"
+msgstr ""
+
+#: src/client.cc:510
+msgid "Quit game immediately"
+msgstr ""
+
+#: src/client.cc:511
+msgid "F1:"
+msgstr ""
+
+#: src/client.cc:511 src/gui/LevelMenu.cc:195 src/gui/ScreenshotViewer.cc:35
+msgid "Show this help"
+msgstr ""
+
+#: src/client.cc:512
+msgid "F3:"
+msgstr ""
+
+#: src/client.cc:512
+msgid "Kill current marble"
+msgstr ""
+
+#: src/client.cc:513
+msgid "Shift+F3:"
+msgstr ""
+
+#: src/client.cc:513
+msgid "Restart the current level"
+msgstr ""
+
+#: src/client.cc:514
+msgid "F4:"
+msgstr ""
+
+#: src/client.cc:514
+msgid "Skip to next level"
+msgstr ""
+
+#: src/client.cc:515 src/gui/LevelPackComposer.cc:50
+msgid "F5:"
+msgstr ""
+
+#: src/client.cc:516
+msgid "F6:"
+msgstr ""
+
+#: src/client.cc:516
+msgid "Jump back to last level"
+msgstr ""
+
+#: src/client.cc:517
+msgid "F10:"
+msgstr ""
+
+#: src/client.cc:517
+msgid "Make screenshot"
+msgstr ""
+
+#: src/client.cc:518
+msgid "Left/right arrow:"
+msgstr ""
+
+#: src/client.cc:518
+msgid "Change mouse speed"
+msgstr ""
+
+#: src/client.cc:519
+msgid "Alt+x:"
+msgstr ""
+
+#: src/client.cc:519
+msgid "Return to level menu"
+msgstr ""
+
+#: src/client.cc:530
+msgid "Skip to next level for best score hunt"
+msgstr ""
+
+#: src/client.cc:531
+msgid "Skip to next unsolved level"
+msgstr ""
+
+#: src/client.cc:694
+msgid "Too slow for "
+msgstr ""
+
+#: src/client.cc:699
+msgid "You are slow today.. [Ctrl-A]"
+msgstr ""
+
+#: src/client.cc:776
+msgid "Exactly the world record of "
+msgstr ""
+
+#: src/client.cc:778
+msgid "Great! A new world record!"
+msgstr ""
+
+#: src/client.cc:783
+msgid "Again your personal record..."
+msgstr ""
+
+#: src/client.cc:789
+msgid "New personal record - better than par!"
+msgstr ""
+
+#: src/client.cc:791
+msgid "New personal record, but over par!"
+msgstr ""
+
+#: src/client.cc:793
+msgid "New personal record!"
+msgstr ""
+
+#: src/client.cc:804
+msgid "Your record, "
+msgstr ""
+
+#: src/client.cc:811
+msgid "behind world record."
+msgstr ""
+
+#: src/client.cc:813
+msgid "behind your record."
+msgstr ""
+
+#: src/client.cc:821
+msgid "Level finished - better than par!"
+msgstr ""
+
+#: src/client.cc:823
+msgid "Level finished, but over par!"
+msgstr ""
+
+#: src/client.cc:825
+msgid "Level finished!"
+msgstr ""
+
+#: src/client.cc:828
+msgid " Cheater!"
+msgstr ""
+
+#: src/client.cc:857
+#, c-format
+msgid "Enigma pack %s - level #%d: %s"
+msgstr ""
+
+#: src/client.cc:868
+msgid "Your record: "
+msgstr ""
+
+#: src/client.cc:870
+msgid "World record to beat: "
+msgstr ""
+
+#: src/main.cc:333
+#, c-format
+msgid "Error in configuration file.\n"
+msgstr ""
+
+#: src/main.cc:603 src/main.cc:626
+#, c-format
+msgid "Error Home directory does not exist.\n"
+msgstr ""
+
+#: src/main.cc:618
+#, c-format
+msgid "Error Application Data directory does not exist.\n"
+msgstr ""
+
+#: src/main.cc:645 src/main.cc:694
+#, c-format
+msgid "Error in XML initialization.\n"
+msgstr ""
+
+#: src/main.cc:772
+#, c-format
+msgid ""
+"Mac OS X upgrade from Enigma 1.00\n"
+"\n"
+"The default user data path has changed from\n"
+"  %s \n"
+"\n"
+"to the visible data path\n"
+"  %s \n"
+"\n"
+"If ok Enigma will move your data to this new location.\n"
+"Note that you have to restart Enigma once for completion of this update."
+msgstr ""
+
+#: src/main.cc:773
+msgid "OK"
+msgstr ""
+
+#: src/main.cc:773 src/gui/OptionsMenu.cc:139
+msgid "Never"
+msgstr ""
+
+#: src/main.cc:773
+msgid "Remind"
+msgstr ""
+
+#: src/main.cc:924
+msgid ""
+"Fatal Error that causes the application to quit:\n"
+"\n"
+msgstr ""
+
+#: src/main.cc:926 src/gui/MainMenu.cc:374
+msgid "Quit"
+msgstr ""
+
+#: src/gui/MainMenu.cc:67 src/gui/MainMenu.cc:363 src/gui/LevelPackMenu.cc:66
+msgid "Start Game"
+msgstr ""
+
+#: src/gui/MainMenu.cc:68
+msgid "Join Game"
+msgstr ""
+
+#: src/gui/MainMenu.cc:69 src/gui/MainMenu.cc:235
+#: src/gui/ScreenshotViewer.cc:34
+msgid "Back"
+msgstr ""
+
+#: src/gui/MainMenu.cc:106
+msgid "Main developers of the 1.10 release:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:107
+msgid "  RONALD LAMPRECHT (lead)"
+msgstr ""
+
+#: src/gui/MainMenu.cc:111
+msgid "Special Thanks To:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:112
+msgid "  DANIEL HECK (project founder)"
+msgstr ""
+
+#: src/gui/MainMenu.cc:113
+msgid "  MEINOLF SCHNEIDER (game idea, level design)"
+msgstr ""
+
+#: src/gui/MainMenu.cc:115
+msgid "Please refer to the manual or the next pages for full credits."
+msgstr ""
+
+#: src/gui/MainMenu.cc:117
+msgid "Home Page: http://www.nongnu.org/enigma"
+msgstr ""
+
+#: src/gui/MainMenu.cc:118
+msgid "Contact: enigma-devel at nongnu.org"
+msgstr ""
+
+#: src/gui/MainMenu.cc:120
+msgid "Enigma is free software and may be distributed under the"
+msgstr ""
+
+#: src/gui/MainMenu.cc:121
+msgid "terms of the GNU General Public License, version 2."
+msgstr ""
+
+#: src/gui/MainMenu.cc:123
+msgid "Copyright (C) 2002-2009 Daniel Heck and contributors."
+msgstr ""
+
+#: src/gui/MainMenu.cc:125
+msgid "Main developer of all releases:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:139
+msgid "Special Thanks:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:152
+msgid "Contributors:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:229
+msgid "Homepage"
+msgstr ""
+
+#: src/gui/MainMenu.cc:230
+msgid "Documentation"
+msgstr ""
+
+#: src/gui/MainMenu.cc:231 src/gui/OptionsMenu.cc:416
+msgid "Paths"
+msgstr ""
+
+#: src/gui/MainMenu.cc:232
+msgid "Locate Auto"
+msgstr ""
+
+#: src/gui/MainMenu.cc:233
+msgid "Locate Score"
+msgstr ""
+
+#: src/gui/MainMenu.cc:234
+msgid "Credits"
+msgstr ""
+
+#: src/gui/MainMenu.cc:282
+msgid "Preferences Path:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:292
+msgid "User Path:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:302
+msgid "User Image Path:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:312
+msgid "System Path:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:322
+msgid "Resource Paths:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:332
+msgid "L10n Path:"
+msgstr ""
+
+#: src/gui/MainMenu.cc:364 src/gui/LevelMenu.cc:49
+msgid "Level Pack"
+msgstr ""
+
+#: src/gui/MainMenu.cc:366
+msgid "Network Game"
+msgstr ""
+
+#: src/gui/MainMenu.cc:367
+msgid "Editor"
+msgstr ""
+
+#: src/gui/MainMenu.cc:369 src/gui/GameMenu.cc:49
+msgid "Options"
+msgstr ""
+
+#: src/gui/MainMenu.cc:371
+msgid "Update"
+msgstr ""
+
+#: src/gui/MainMenu.cc:373
+msgid "Help"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:92 src/gui/OptionsMenu.cc:113
+msgid "muted"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:126
+msgid "Music in game"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:126
+msgid "No music in game"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:131 src/gui/OptionsMenu.cc:135
+#: src/gui/OptionsMenu.cc:261 src/gui/LevelPackConfig.cc:94
+msgid "Yes"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:131 src/gui/OptionsMenu.cc:135
+#: src/gui/OptionsMenu.cc:261 src/gui/LevelPackConfig.cc:94
+msgid "No"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:139
+msgid "Auto"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:249
+msgid "reversed"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:250
+msgid "mono"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:251
+msgid "normal"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:294 src/gui/LevelInspector.cc:337
+#: src/gui/LevelInspector.cc:353 src/gui/LevelInspector.cc:366
+msgid "unknown"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:408
+msgid "Main"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:410
+msgid "Video"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:412
+msgid "Audio"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:414
+msgid "Config"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:435 src/gui/LevelPackComposer.cc:121
+#: src/gui/LevelPackConfig.cc:345 src/gui/LPGroupConfig.cc:102
+#: src/gui/LevelInspector.cc:178 src/gui/HelpMenu.cc:36
+msgid "Ok"
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:488 src/gui/OptionsMenu.cc:516
+msgid "Language: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:489 src/gui/OptionsMenu.cc:502
+msgid "Fullscreen: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:490 src/gui/OptionsMenu.cc:504
+msgid "Video mode: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:491 src/gui/OptionsMenu.cc:517
+msgid "Mouse speed: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:492 src/gui/OptionsMenu.cc:510
+msgid "Sound volume: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:493 src/gui/OptionsMenu.cc:511
+msgid "Music volume: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:494 src/gui/OptionsMenu.cc:519
+msgid "Ratings update: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:498 src/gui/OptionsMenu.cc:523
+msgid "User name: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:505
+msgid "Gamma correction: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:508
+msgid "Sound set: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:509
+msgid "Menu music: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:512
+msgid "Stereo: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:518
+msgid "Text speed: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:528
+msgid "User path: "
+msgstr ""
+
+#: src/gui/OptionsMenu.cc:531
+msgid "User image path: "
+msgstr ""
+
+#: src/gui/LevelMenu.cc:47 src/gui/LevelPackMenu.cc:67
+msgid "Main Menu"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:194
+msgid "Skip to main menu"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:197
+msgid "Update levelpack"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:198
+msgid "Arrows:"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:198
+msgid "Select level"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:199
+msgid "Return:"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:199 src/gui/LevelMenu.cc:204
+msgid "Play selected level"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:200
+msgid "Back/Space:"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:200
+msgid "Previous/next levelpack"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:201
+msgid "Mark current level as unsolved"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:203
+msgid "Alt+Return:"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:203
+msgid "Switch between fullscreen and window"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:204 src/gui/LevelPackMenu.cc:48
+msgid "Left click:"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:205 src/gui/LevelPackMenu.cc:49
+msgid "Right or control click:"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:205
+msgid "Inspect selected level"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:222
+msgid "Select next level for world record hunt"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:224
+msgid "Select next unsolved level"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:275
+msgid "You are not allowed to play this level yet."
+msgstr ""
+
+#: src/gui/LevelMenu.cc:311 src/gui/LevelPackComposer.cc:350
+#, c-format
+msgid "%s: %d levels"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:327
+#, c-format
+msgid "%d%% best"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:332
+#, c-format
+msgid "%d%% par, hcp %.1f"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:336
+#, c-format
+msgid "%d%% solved"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:371
+#, c-format
+msgid "Your time: %d:%02d"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:377
+msgid "That's world record."
+msgstr ""
+
+#: src/gui/LevelMenu.cc:379
+#, c-format
+msgid "That's %d:%02d below world record."
+msgstr ""
+
+#: src/gui/LevelMenu.cc:389
+#, c-format
+msgid "World record: %d:%02d"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:391
+#, c-format
+msgid "Par: %d:%02d World record: %d:%02d"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:405
+#, c-format
+msgid "World record by %s: %d:%02d"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:408
+#, c-format
+msgid "Par: %d:%02d World record by %s: %d:%02d"
+msgstr ""
+
+#: src/gui/LevelMenu.cc:440
+msgid "No further unsolved level available!"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:42
+msgid "Shift click:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:42
+msgid "Add to clipboard"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:43
+msgid "Shift delete:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:43
+msgid "Clear clipboard"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:44
+msgid "F8:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:44
+msgid "Insert clipboard as reference"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:45
+msgid "F9:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:45
+msgid "Insert clipboard as copy"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:47
+msgid "Alt left arrow:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:47
+msgid "Exchange level with predecessor"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:48
+msgid "Alt right arrow:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:48
+msgid "Exchange level with successor"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:49
+msgid "Delete:"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:49
+msgid "Delete level"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:50
+msgid "Update index from levels"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:55
+msgid "F10"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:56
+msgid "Move clipboard levels"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:120 src/gui/LevelPackConfig.cc:344
+#: src/gui/LPGroupConfig.cc:101 src/gui/SearchMenu.cc:59
+msgid "Undo"
+msgstr ""
+
+#: src/gui/LevelPackComposer.cc:364
+#, c-format
+msgid "Clipboard: %d levels"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:174
+msgid "Levelpack:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:175
+msgid "Owner:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:176 src/gui/LPGroupConfig.cc:57
+msgid "Group:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:177
+msgid "Location"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:178
+msgid "in [All Packs]:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:235
+msgid "Edit Metadata"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:239
+msgid "Release:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:240
+msgid "Revision:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:241
+msgid "Compatibility:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:242
+msgid "Default Location:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:243
+msgid "Level types:"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:335
+msgid "Please reasign levelpack to another group for group deletion"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:338
+msgid "Compose Pack"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:340
+msgid "Update Pack"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:419
+msgid ""
+"Error: empty title not allowed - press \"Undo\" to exit without modifications"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:432
+msgid "Error: use only \"a-zA-Z0-9 _-#\" for levelpack title"
+msgstr ""
+
+#: src/gui/LevelPackConfig.cc:443
+msgid "Error: title already in use - choose another title"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:46
+msgid "Left column:"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:46
+msgid "Levelpack groups"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:47
+msgid "Right columns:"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:47
+msgid "Levelpacks of selected group"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:48
+msgid "Select group or levelpack"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:49
+msgid "Configure group or levelpack"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:64
+msgid "New Group"
+msgstr ""
+
+#: src/gui/LevelPackMenu.cc:65 src/gui/SearchMenu.cc:60
+msgid "Search"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:65
+msgid "Position:"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:99
+msgid "New Pack"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:100
+msgid "Delete Group"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:130
+msgid ""
+"Error: empty group name not allowed - press \"Undo\" to exit without "
+"modifications"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:141
+msgid "Error: group name is a duplicate of an existing group"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:146
+msgid "Error: \"Every group\" is a reserved group name"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:151
+msgid "Error: group name must not be enclosed in square brackets"
+msgstr ""
+
+#: src/gui/LPGroupConfig.cc:207
+msgid "Error: group not empty"
+msgstr ""
+
+#: src/gui/ScreenshotViewer.cc:36
+msgid "Page Up:"
+msgstr ""
+
+#: src/gui/ScreenshotViewer.cc:36
+msgid "Show previous screenshot"
+msgstr ""
+
+#: src/gui/ScreenshotViewer.cc:37
+msgid "Page Down:"
+msgstr ""
+
+#: src/gui/ScreenshotViewer.cc:37
+msgid "Show next screenshot"
+msgstr ""
+
+#: src/gui/ScreenshotViewer.cc:107
+msgid "No screenshot available:"
+msgstr ""
+
+#: src/gui/SearchMenu.cc:41
+msgid "Shallow Search:"
+msgstr ""
+
+#. TRANSLATORS: the translation can have double size of the english text
+#: src/gui/SearchMenu.cc:43
+msgid "case independent search in title, author, filename"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:179
+msgid "Screenshot"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:229
+msgid "Level: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:231 src/gui/LevelInspector.cc:289
+msgid "Author: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:232
+msgid "Contact: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:233
+msgid "Homepage: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:254
+msgid "Public Ratings"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:256
+msgid "Intelligence: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:257
+msgid "Dexterity: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:258
+msgid "Patience: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:259
+msgid "Knowledge: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:260
+msgid "Speed: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:261
+msgid "Difficulty: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:282
+msgid "Scores"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:285
+msgid "You: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:286
+msgid "World: "
+msgstr ""
+
+#. TRANSLATORS: PAR = professional average rate - an expression used by golfers
+#: src/gui/LevelInspector.cc:288
+msgid "PAR: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:290
+msgid "Solved %: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:291
+msgid "Solved #: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:313
+msgid "Version"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:316
+msgid "Score: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:318 src/gui/LevelInspector.cc:322
+msgid "Status: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:319
+msgid "Release: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:320
+msgid "Revision: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:323
+msgid "Control: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:324
+msgid "Target: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:331 src/gui/LevelInspector.cc:347
+msgid "stable"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:333 src/gui/LevelInspector.cc:349
+msgid "test"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:335 src/gui/LevelInspector.cc:351
+msgid "experimental"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:345
+msgid "released"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:357
+msgid "force"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:360
+msgid "balance"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:363
+msgid "key"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:371
+msgid "time"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:372
+msgid "pushes"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:373
+msgid "moves"
+msgstr ""
+
+#: src/gui/LevelInspector.cc:390
+msgid "World Record Holders: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:451
+msgid "Credits: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:462
+msgid "Dedication: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:473
+msgid "Level Path: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:495
+msgid "Id: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:497
+msgid "Load time: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:502
+msgid "Compatibility: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:510
+msgid "Annotation: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:515
+msgid "Rating: "
+msgstr ""
+
+#: src/gui/LevelInspector.cc:517
+msgid "Average: "
+msgstr ""
+
+#: src/gui/GameMenu.cc:47
+msgid "Resume Level"
+msgstr ""
+
+#: src/gui/GameMenu.cc:48
+msgid "Restart Level"
+msgstr ""
+
+#: src/gui/GameMenu.cc:50
+msgid "Level Info"
+msgstr ""
+
+#: src/gui/GameMenu.cc:51
+msgid "Abort Level"
+msgstr ""
+
+#: src/lev/Proxy.cc:204
+msgid "Error on auto registration of levelfile: "
+msgstr ""
+
+#: src/lev/Proxy.cc:206
+msgid ""
+"Note: the level will not show up in the \"Auto Folder\" levelpack!\n"
+"\n"
+msgstr ""
+
+#: src/lev/Proxy.cc:208 src/lev/PersistentIndex.cc:473 src/d_models.cc:236
+#: src/d_models.cc:249 src/PreferenceManager.cc:181 src/StateManager.cc:178
+msgid "Continue"
+msgstr ""
+
+#: src/lev/PersistentIndex.cc:459
+msgid "Error on  update of levelpack index: \n"
+msgstr ""
+
+#: src/lev/PersistentIndex.cc:461
+msgid ""
+"Note: the current version will be reloaded!\n"
+"\n"
+msgstr ""
+
+#: src/lev/PersistentIndex.cc:468
+msgid "Error on  registration of levelpack index: \n"
+msgstr ""
+
+#: src/lev/PersistentIndex.cc:470
+msgid ""
+"Note: the levelpack will not show up!\n"
+"\n"
+msgstr ""
+
+#: src/lua.cc:3849
+#, c-format
+msgid "Cannot find '%s'.\n"
+msgstr ""
+
+#: src/lua.cc:3850 src/lua.cc:3857
+#, c-format
+msgid "Your installation may be incomplete or invalid.\n"
+msgstr ""
+
+#: src/lua.cc:3856
+#, c-format
+msgid "There was an error loading '%s'.\n"
+msgstr ""
+
+#: src/lua.cc:3858
+#, c-format
+msgid "Error: '%s'\n"
+msgstr ""
+
+#: src/d_models.cc:235 src/d_models.cc:248
+msgid ""
+"\n"
+"\n"
+"This error may cause the application to behave strange!"
+msgstr ""
+
+#: src/stones/KnightStone.cc:58
+msgid "All right, we'll call it a draw"
+msgstr ""
+
+#  level: "Floors 1"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:4
+msgid "Friction and acceleration depend on the floor type."
+msgstr ""
+
+#  level: "Movement 3"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:8 po/level_i18n.cc:5100
+msgid "Take your time ..."
+msgstr ""
+
+#  level: "Floors 2"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:12 po/level_i18n.cc:77
+msgid "Don't drown in the swamp."
+msgstr ""
+
+#  level: "Lasers and Mirrors"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:16
+msgid ""
+"The bright light beam is a laser beam.   Don't get too close to it!   But it "
+"has its uses ...    You can use the mirrors to direct the laser to its "
+"targets.   From these, only the light-gray ones are movable, just try it!"
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:20
+msgid ""
+"Welcome to Enigma!  This tutorial I (Jacob Scott) made will help you learn "
+"how to play."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:21
+msgid ""
+"You control the black ball.  To pick up an object, just roll over it.  You "
+"can bounce off most walls (try it), but avoid the blue floor near the bottom "
+"of the room (actually, try falling into it and then restarting the level "
+"with the 'Esc' key).  While these messages are being displayed, don't click "
+"any buttons or push any keys or the message will stop."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:22
+msgid "This is pretty self-explanatory."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:23
+msgid ""
+"Enigma is full of puzzles of various types.  In the next room, you will "
+"encounter your first one."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:24
+msgid ""
+"You can't walk on water!  Try pushing the blocks into the water to get to "
+"the other side."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:25
+msgid ""
+"Notice that you can't push a row of two or more blocks.  Also, blocks can't "
+"be on the same squares as grates but you can."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:26
+msgid ""
+"There are different types of blocks here.  Those black blocks sink when they "
+"fall into water.  The tan blocks don't sink but don't form bridges either."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:27
+msgid ""
+"That thing is a top -- it will destroy your ball if they touch.  Also, as "
+"long as you are close enough to it, the top will chase you.  If you die, you "
+"will restart at the beginning of the level (if you have any balls left).  "
+"Try to find a way to get past and into the next room (you can use the blocks "
+"in the center of the room as barricades)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:28
+msgid ""
+"Good job!  Notice that the top can't go beneath that block with a black "
+"outline -- you're safe."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:29
+msgid "Those are different types of floors.  Try going over them."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:30
+msgid ""
+"The grayish floors are slopes.  The white floor is inverse-floor (you will "
+"see)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:31
+msgid ""
+"Watch what happens when you go over those triggers.  See if you can get the "
+"extra ball."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:32
+msgid ""
+"That's dynamite.  Try dropping some next to that yellowish wall (and moving "
+"out of the way)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:33
+msgid "Try using the spade on the holes caused by the dynamite."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:34
+msgid ""
+"Those things are boulders -- try moving one of the tan blocks.  Don't fall "
+"into the water or abyss (the black floor)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:35
+msgid ""
+"Take the magic wand and hit a boulder.  Try to let the row of three boulders "
+"pass the large column."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:36
+msgid "Hit it hard enough!"
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:37
+msgid ""
+"It appears to be a simple room, but you're getting an extra ball anyway.  "
+"Maybe there is a reason ..."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:38
+msgid ""
+"Try to get the laser beam to hit that black stone, but don't get hit by it!  "
+"Use the mirrors to direct the beam."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:39
+msgid ""
+"Many objects change when hit with a laser beam.  Try hitting some of the "
+"coins with the laser beam.  Also, try hitting a block over a coin.  Those "
+"stones to your right are knights -- you need to fight (hit) them with a "
+"sword (in the front of your inventory) to get past."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:40
+msgid ""
+"Do you have any umbrellas?  Each one will give you approximately ten seconds "
+"of protection from danger (such as falling)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:41
+msgid ""
+"Those black stones are quake stones -- they reset all progress made with the "
+"oxyd stones.  The other stones are the oxyd stones.  Match them up to win!"
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:42
+msgid ""
+"This area at the bottom of the screen is your inventory -- when you pick "
+"things up, they go here (there is a maximum of twelve).  To scroll through "
+"the inventory, use the right mouse button or the 'tab' key.  To drop or use "
+"an object, click the left mouse button.  Some objects, such as documents "
+"(like this one), can't be dropped but are instead used.  Those two balls in "
+"your inventory are your extra lives -- if you die in this level, you will "
+"restart at the beginning of the level if you have any balls left (and you "
+"will lose one of the balls)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:43
+msgid ""
+"Naturally, you're supposed to go through those closed gates at the top of "
+"the screen.                         Try going down that slope near the "
+"bottom of the room to see what's to the "
+"left.                                                         Don't bother "
+"with that trigger below the abyss yet.                                 If "
+"you could hit that small white ball through the one-way blocks (with the "
+"arrows), it might roll down and stop on that trigger.                  You "
+"will need to go in with it but you can't go through the white one-way "
+"block.                            Take the spoon and use it once the white "
+"ball is through (hit it hard)."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:44
+msgid ""
+"The stone in the top-right of the room is a switch.  Hit it -- it is "
+"probably useful.  In this case the switch opens and closes a door (Do you "
+"remember a door that you weren't able to open?).  The bluish line is a "
+"window -- bridge the water before you do anything with it."
+msgstr ""
+
+#  level: "Advanced Tutorial"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:45
+msgid ""
+"That was a rotor (similar to a top).  Some levels have many rotors and tops "
+"to make them difficult.                            However, maybe this rotor "
+"has a purpose; maybe you could get it on that trigger near where the spoon "
+"was.                      It might be convenient to close the gate."
+msgstr ""
+
+#  level: "Blocks and Slopes"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:49
+msgid ""
+"This wooden block is movable and heavy enough to hold down the trigger on "
+"the right.   Try to push it there!"
+msgstr ""
+
+#  level: "Blocks and Slopes"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:50
+msgid ""
+"Remember?  There are different kinds of floors.  And these are steep ..."
+msgstr ""
+
+#: po/level_i18n.cc:51
+msgid ""
+"Is there more one can do with wooden blocks?   Yes!  Just explore the next "
+"levels."
+msgstr ""
+
+#  level: "Meditation 1"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:55 po/level_i18n.cc:117
+msgid ""
+"Move all small marbles into the holes. Only one marble per hole is allowed."
+msgstr ""
+
+#  level: "Timers"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:59
+msgid ""
+"This oscillating stone is a timer-stone. You cannot interact with it, but "
+"nevertheless be aware when you see one: After some time-period anything "
+"might happen ..."
+msgstr ""
+
+#  level: "Timers"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:60
+msgid ""
+"The stones with arrows are one-way-stones. As you might have guessed, you "
+"can only pass them in one direction.                Mazes are cherished "
+"elements of Enigma - you will see lots of them."
+msgstr ""
+
+#  level: "Timers"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:61
+msgid ""
+"Well done!     When you have finished this level, let's play some example "
+"levels from the actual Enigma packs!"
+msgstr ""
+
+#  level: "Movement 2"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:65
+msgid "Prepare for even more mouse gymnastics in the next levels."
+msgstr ""
+
+#  level: "Oxyd Stones 2"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:69
+msgid "Remember the colors."
+msgstr ""
+
+#  level: "Oxyd Stones 3"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:73
+msgid "Some stones look exactly like the Oxyd stones!"
+msgstr ""
+
+#  level: "Floors 3"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:81 po/level_i18n.cc:121
+msgid "Careful - you can not swim in the water."
+msgstr ""
+
+#  level: "Movement 5"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:85
+msgid "Levels can be larger than one screen."
+msgstr ""
+
+#  level: "Items"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:92
+msgid ""
+"Use the right mouse-button to rotate your inventory,  it's the bar at the "
+"bottom of the screen.   And guess what these three items down there can be "
+"used to."
+msgstr ""
+
+#  level: "Items"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:93
+msgid ""
+"There are lots of different items to use in Enigma, as well as special "
+"floors and stones.   Let's explore some more of the actual Enigma levels!   "
+"And if you have problems with a level - take a look at the manual:   For "
+"some levels, there are hints."
+msgstr ""
+
+#  level: "Chess Stones"
+#  author: "Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" email ""
+#: po/level_i18n.cc:100
+msgid ""
+"The stone with the horse's head is called ''chess stone''. Watch how the "
+"other marble hits one of them to move it. The angle is important."
+msgstr ""
+
+#  level: "Chess Stones"
+#  author: "Raoul Bourquin, ShadowPhrogg32642342, Andreas Lochmann" email ""
+#: po/level_i18n.cc:101
+msgid ""
+"Now try to move these chess stones onto the triggers. They always move two "
+"steps plus one step."
+msgstr ""
+
+#  level: "Oxyd Stones 1"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:105
+msgid ""
+"The blue stones are Oxyd stones. Open them by touching them with your black "
+"marble."
+msgstr ""
+
+#  level: "Doors and Triggers"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:109
+msgid ""
+"Those doors on the right block your way to the oxyds ... on the left you see "
+"some triggers. Maybe they are somehow connected?"
+msgstr ""
+
+#  level: "Movement 1"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:113
+msgid "Learn to move your black ball properly."
+msgstr ""
+
+#  level: "Bye!"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:125
+msgid ""
+"But before this, take a look at the final tutorial level Jacob devised for "
+"you.   See it as an exam, if you want to.   It's quite difficult, so don't "
+"despair if you don't get through it at the first time.   Bye!"
+msgstr ""
+
+#  level: "Bye!"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:126
+msgid ""
+"Well, I hope you enjoyed this tutorial-pack.   You will see most of these "
+"levels a second time in the Enigma packs, together with many new and much "
+"more difficult ones.   Just don't give up on them!"
+msgstr ""
+
+#  level: "Movement 4"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:130
+msgid "Don't touch everything!"
+msgstr ""
+
+#  level: "Minor Obstacle"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:146
+msgid "Let there be light!"
+msgstr ""
+
+#  level: "More Speed"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:165
+msgid "You need to be fast!"
+msgstr ""
+
+#  level: "Oxyd Link 68"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:170
+msgid "It's a ring!"
+msgstr ""
+
+#  level: "Letter Bomb"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:186 po/level_i18n.cc:3410
+msgid "Everything's been counted carefully!"
+msgstr ""
+
+#  level: "Letter Bomb"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:187 po/level_i18n.cc:3411
+msgid "Parts of the tubes disappear during detonation!"
+msgstr ""
+
+#  level: "Twin Rooms"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:197
+msgid "Don't believe all that you see!"
+msgstr ""
+
+#  level: "Moonwalking"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:217
+msgid "Free fall with fatal consequences!"
+msgstr ""
+
+#  level: "Scrooge"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:236
+msgid "You really will need every penny!"
+msgstr ""
+
+#  level: "ATARI Nostalgia"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:240
+msgid "Umbrellas prevent free fall!"
+msgstr ""
+
+#  level: "Oxyd 31"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:269
+msgid "Rotaryrotaryrot..."
+msgstr ""
+
+#  level: "Soaring High"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:273
+msgid "No problem! Piece of cake!"
+msgstr ""
+
+#  level: "Soaring High"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:274
+msgid "It was easy, wasn't it!"
+msgstr ""
+
+#  level: "Oxyd 28"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:279
+msgid "For heaven's sake ... don't drown!"
+msgstr ""
+
+#  level: "The Amazing Maze"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:295
+msgid "Business hours from 8am to 4pm"
+msgstr ""
+
+#  level: "Oxyd 15"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:306 po/level_i18n.cc:3349
+msgid "It's easier with spikes!"
+msgstr ""
+
+#  level: "Oxyd 17"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:311
+msgid "Nothing but thieves!! Try the mailbox."
+msgstr ""
+
+#  level: "Flying"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:480
+msgid "You can fly for a short time if you use the umbrella."
+msgstr ""
+
+#  level: "Mirror Room II"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:499
+msgid "Same room, new mirrors ..."
+msgstr ""
+
+#  level: "The Grim Reaper"
+#  author: "Daniel Heck" email ""
+#: po/level_i18n.cc:552
+msgid "The Grim Reaper"
+msgstr ""
+
+#  level: "Welcome to the Machine"
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:619
+msgid ""
+"Sections which have the same color always turn at the same time and in the "
+"same way."
+msgstr ""
+
+#  level: "Welcome to the Machine"
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:620
+msgid ""
+"Maintenance code: metal-stone-stone-stone-red-yellow-yellow-red-red-stone-"
+"stone."
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Daniel Heck" email ""
+#: po/level_i18n.cc:628 po/level_i18n.cc:944 po/level_i18n.cc:1525
+#: po/level_i18n.cc:2373 po/level_i18n.cc:2534 po/level_i18n.cc:3646
+#: po/level_i18n.cc:3945 po/level_i18n.cc:4768 po/level_i18n.cc:5186
+msgid "Welcome"
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#  comment: "because there is a 'w' letter in 'awale' as many 'w' letters have been used in these texts; it is not necessary to translate this feature"
+#: po/level_i18n.cc:682
+msgid "The witch of this switch waits for your wish."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:684
+msgid "The witch of this switch resets the awale game."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:686
+msgid ""
+"A turn consists in taking the walnuts of a row behind the windowy walls and "
+"sowing them 1 by 1 in the following rows."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:688
+msgid ""
+"Warning: What awaits the wailing warrior at the end of a turn? If there are "
+"2 or 3 walnuts in a row, they are a warm award for the warrior, as are the "
+"walnuts in the rows which are in the way to this row, if they are 2 or 3 per "
+"row."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:690
+msgid "Warning: If one warrior's walls are empty, this awesome warrior wins."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:692
+msgid ""
+"When a warrior has awarded more than half the walnuts, he wins. What does he "
+"win? The way to the waiting oxyds he wants."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:694
+msgid "Congratulations! You are the most aware awale player of the valley ..."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:696
+msgid ""
+"Lost in the savannah? Don't wait and walk on the way to the reset switch on "
+"the far left ..."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:698
+msgid "Validate your choice here."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:700
+msgid "Reset the game."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:702
+msgid ""
+"A turn consists in taking the stones of a row and sowing them 1 by 1 in "
+"one's other rows, counterclockwise, coming back to the beginning."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:704
+msgid ""
+"At the end of a turn, if the last stone falls in a nonempty row, one takes "
+"the stones of the facing row if there is any, and repeats a turn."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:706
+msgid "A turn begins in one of the leftmost rows, unless impossible."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:708
+msgid ""
+"At the end of the game (if one player cannot move anymore), the player who "
+"has the most stones wins."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:710
+msgid "A yellow stone stands for 10 blue stones (then for 2 brown stones)."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:712
+msgid "A brown stone stands for 5 blue stones."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:714
+msgid ""
+"This katro game comes from Madagascar; in Easy mode there is an african "
+"Awale."
+msgstr ""
+
+#  level: "Enigmawale"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:716
+msgid "Only reset or 'Shift+F3' can make things evolve ..."
+msgstr ""
+
+#  level: "The Enigmhanoi Towers"
+#  author: "Alain Busser" email ""
+#  comment: "wordplay between 'enigma' and the 'hanoi towers' solitary game"
+#: po/level_i18n.cc:794
+msgid "The Enigmhanoi Towers"
+msgstr ""
+
+#  level: "The Enigmhanoi Towers"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:796
+msgid "Who speaks, does not know (Lao Tse)"
+msgstr ""
+
+#  level: "The Enigmhanoi Towers"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:798
+msgid "The wise man laughs (Lao Tse)"
+msgstr ""
+
+#  level: "The Enigmhanoi Towers"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:800
+msgid "Who knows, does not speak (Lao Tse)"
+msgstr ""
+
+#  level: "Claustrophobia"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:813
+msgid "Every pencil must go"
+msgstr ""
+
+#  level: "Behind Glass"
+#  author: "Rudolf" email ""
+#: po/level_i18n.cc:817
+msgid "Search it."
+msgstr ""
+
+#  level: "Once, No More No Less"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:821
+msgid "Once, No More No Less"
+msgstr ""
+
+#  level: "Escape in Chains"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:829
+msgid "Beware of shady mates!"
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:834
+msgid ""
+"I your dear friend am in myself undone, by reason of a Burden that lieth "
+"hard upon me."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:836
+msgid "Do you see yonder Wicket Gate?"
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:838
+msgid ""
+"They drew nigh to a very miry Slough. The name of the Slough was Despond."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:840
+msgid "Knock, and it shall be opened unto you."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:842
+msgid ""
+"His Burden loosed from off his shoulders, and fell from his back, and began "
+"to tumble, and so continued to do, till it came to the mouth of the "
+"Sepulchre, where it fell in, and I saw it no more."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:844
+msgid "They came to the foot of the hill Difficulty."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:846
+msgid ""
+"There was a very stately palace before him, the name of which was Beautiful."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:848
+msgid ""
+"He had gone but a little way, before he espied a foul Fiend coming over the "
+"field to meet him."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:850
+msgid ""
+"At the end of this Valley was another, called, The Valley of the Shadow Of "
+"Death."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:852
+msgid "He saw Faithful before him on his Journey."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:854
+msgid ""
+"As they went on, Faithful, as he chanced to look to one side, saw a man "
+"whose name was Talkative."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:856
+msgid ""
+"They presently saw a Town before them, and the name of that Town is Vanity."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:858
+msgid ""
+"Christian went not forth alone; for there was one whose name was Hopeful who "
+"joined himself unto him."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:860
+msgid ""
+"There was on the Left Hand of the road a Meadow, and a Stile to go over into "
+"it, and that meadow is called By-Path-Meadow."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:862
+msgid ""
+"Now there was, not far from the place where they lay, a castle, called "
+"Doubting-Castle, the owner of which was Giant Despair."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:864
+msgid "They went then till they came to the Delectable Mountains."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:866
+msgid "Beware of the Flatterer."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan - exact quote is 'Follow me, said the man, it is thither that I am going' - a couple of words have been changed to make sense out of context."
+#: po/level_i18n.cc:868
+msgid ""
+"Follow me, said the Flatterer, it is to the Coelestial City that I am going."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:870
+msgid ""
+"They came into a certain Country, whose air naturally tended to make one "
+"drowzy."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:872
+msgid ""
+"The Pilgrims were got over the Enchanted ground, and entering into the "
+"Country of Beulah."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:874
+msgid ""
+"There was then in that place one Vain-Hope, a ferryman, that with his boat "
+"helped him over."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:876
+msgid ""
+"At the sight therefore of this River, the Pilgrims were much astounded, but "
+"the men that went with them, said, You must go through, or you cannot come "
+"at the Gate."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan."
+#: po/level_i18n.cc:878
+msgid "I looked in after them; and behold the City shone like the Sun."
+msgstr ""
+
+#  level: "The Pilgrim's Progress"
+#  author: "Mark Pulley" email ""
+#  comment: "Quote from 'The Pilgrim's Progress' by John Bunyan - quote taken from the section of the Shepherds in the Delectable Mountains"
+#: po/level_i18n.cc:880
+msgid ""
+"They also thought they heard there a rumbling noise, as of fire, and a Cry "
+"of some tormented, and that they smelt the scent of Brimstone."
+msgstr ""
+
+#  level: "FizzBuzz"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:884
+msgid "FizzBuzz"
+msgstr ""
+
+#  level: "FizzBuzz"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:885
+msgid ""
+"Counting the first pearl as 1, you must save every pearl that's a multiple "
+"of 3 or of 5 (or both)."
+msgstr ""
+
+#  level: "Crabwise IV"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:896
+msgid "Crabwise IV"
+msgstr ""
+
+#  level: "Odyssey in Space"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:907
+msgid "Danger!"
+msgstr ""
+
+#  level: "Volcano Day"
+#  author: "Mark Pulley" email ""
+#: po/level_i18n.cc:926
+msgid "Listen for the best place for an explosion"
+msgstr ""
+
+#  level: "Su Dyxo"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:930
+msgid "Place 9 different items in each row, column, and 3x3 box."
+msgstr ""
+
+#  level: "Su Dyxo"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:931
+msgid ""
+"Place 9 different items in each row, column, and 3x3 box. Hit the switch to "
+"see if any of your items are misplaced, or which locations you can deduce "
+"items for next; you can only get 1 hint per minute this way, though."
+msgstr ""
+
+#  level: "Crabwise III"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:936
+msgid "Crabwise III"
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:945
+msgid "Welcome to Enigma IX"
+msgstr ""
+
+#  level: "Wired Pulls"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:952
+msgid "and do not destroy the puzzels"
+msgstr ""
+
+#  level: "more is not less"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:958
+msgid "more is not less"
+msgstr ""
+
+#  level: "more is not less"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:961
+msgid "Sorry, but in difficult mode you need more ... Restart."
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:968
+msgid "Build me a Sokoban"
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:969
+msgid ""
+"Build me a solvable Sokoban puzzle that will take me 30 pushes or more to "
+"solve. The seeds grow into boxes; the dice grow into walls."
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:970
+msgid ""
+"Build me a solvable Sokoban puzzle that will take me 25 pushes or more to "
+"solve. The seeds grow into boxes; the dice grow into walls."
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:971
+msgid ""
+"I can't solve that puzzle; there aren't enough boxes! Use the spoon, and "
+"next time make sure the boxes finish growing before hitting the switch."
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:972
+msgid ""
+"I don't think that puzzle can be solved. If you think you can prove me "
+"wrong, go get the oxyd!"
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:973
+msgid ""
+"That puzzle was too easy! Use the spoon, and give me a harder one next time!"
+msgstr ""
+
+#  level: "Nabokos"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:974
+msgid "Thanks for that excellent puzzle, I really enjoyed solving it!"
+msgstr ""
+
+#  level: "Perfect Trajectory"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:981
+msgid "Perfect Trajectory"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:992
+msgid "With respects to Dante Alighieri"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:994
+msgid ""
+"Switch on, if you like to play the regular difficulty with many jokers, or "
+"leave it switched off, if you like to face easier challenges with less "
+"jokers."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto III / Terzine 3"
+#: po/level_i18n.cc:997
+msgid ""
+"BEFORE ME NOTHING WAS BUT THINGS ETERNAL, / AND I ENDURE ETERNALLY. / "
+"ABANDON ALL HOPE, YOU WHO ENTER HERE."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto III / Terzine 33"
+#: po/level_i18n.cc:1000
+msgid ""
+"...stilled the shaggy jowls / of the pilot of the livid marsh, / about whose "
+"eyes burned wheels of flame."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1002
+msgid ""
+"I am Charon, ferryman of the underworld.  I will transport you through the "
+"perilous swamps of Acheron, but the price is not cheap.              Wait!  "
+"You still seem alive....                                                   "
+"It cannot be -- only the dead may enter this place.  Quickly -- sacrifice a "
+"symbol of life on that altar to keep the guards at bay, and then perhaps I "
+"will consider taking you across."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1004
+msgid ""
+"Very well.  The demons and spirits that guard this place may now believe "
+"that you are truly dead, but I would still be cautious if I were "
+"you....                                             But you still need a "
+"coin.  Hmm, well normally I wouldn't do this, but that fellow over there has "
+"me kind of worried -- I think he's plotting something.  If he has a coin, "
+"maybe you could get it from him somehow."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1006
+msgid ""
+"No!  I will not ferry you across unless you make a proper sacrifice, ridding "
+"yourself of anything that could be interpreted as a sign of life.  Now "
+"begone!"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto IV / Terzine 15"
+#: po/level_i18n.cc:1009
+msgid ""
+"...for then I knew that beings of great worth / were here suspended in this "
+"Limbo."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1011
+msgid ""
+"You cannot be here!  I, Minos, judger of the dead, will not allow it.  Go "
+"back now, or forever face the consqeuences!"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1013
+msgid "In that case, then begone!"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto V / Terzine 2"
+#: po/level_i18n.cc:1016
+msgid ""
+"There stands Minos, snarling, terrible. / He examines each offender at the "
+"entrance, / judges and dispatches as he encoils himself."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto V / Terzine 11"
+#: po/level_i18n.cc:1019
+msgid ""
+"The hellish squall, which never rests, / sweeps spirits in its headlong "
+"rush..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto VI / Terzine 3"
+#: po/level_i18n.cc:1022
+msgid ""
+"I am in the third circle, of eternal, / hateful rain, cold and leaden, / "
+"changeless in its monotony."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto VII / Terzine 9"
+#: po/level_i18n.cc:1025
+msgid ""
+"...they, with great shouts, from opposite sides / were shoving burdens "
+"forward with their chests. / They crashed into each other, turned / and beat "
+"retreat, shoving their loads and shouting..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto VII / Terzines 36 & 37"
+#: po/level_i18n.cc:1028
+msgid ""
+"This dreary stream, once it has reached /  these malignant, ashen slopes, / "
+"drains out into the swamp called Styx. / And I, my gaze transfixed, could "
+"see / people with angry faces in that bog, / naked, their bodies smeared "
+"with mud."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto VIII / Terzine 23"
+#: po/level_i18n.cc:1031
+msgid ""
+"...we approach the city known as Dis, / with its vast army and its burdened "
+"citizens."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto VIII / Terzines 28 - 31"
+#: po/level_i18n.cc:1034
+msgid ""
+"At the threshold I saw more than a thousand angels / fallen from Heaven...."
+"they reined in their great disdain /  enough to say: 'You come -- alone.  "
+"Let him be gone, / who has so boldly made his way into this kingdom. / 'Let "
+"him retrace his reckless path alone..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto X / Terzine 1"
+#: po/level_i18n.cc:1037
+msgid ""
+"Now my master takes a hidden / path between the city's ramparts and the "
+"torments, / and I come close behind him..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto X / Terzine 13"
+#: po/level_i18n.cc:1040
+msgid ""
+"...his hands, ready, encouraging, / thrust me towards him among the tombs."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XII / Terzines 8 & 9"
+#: po/level_i18n.cc:1043
+msgid ""
+"Like the bull that breaks its tether / just as it receives the mortal blow / "
+"and cannot run, but lunges here and there, // so raged the Minotaur.  My "
+"artful guide / called out: 'Run to the passage: / hurry down while he is in "
+"his fury.'"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XII / Terzine 34"
+#: po/level_i18n.cc:1046
+msgid ""
+"...we went on, / skirting the edge of the vermilion boil / from which the "
+"boiled cried out with piercing shrieks."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XIII / Terzine 4"
+#: po/level_i18n.cc:1049
+msgid ""
+"Here the filthy Harpies nest, / who drove the Trojans from the Strophades / "
+"with doleful prophecies of woe to come."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XIV / Terzines 4 & 5"
+#: po/level_i18n.cc:1052
+msgid ""
+"... Here, at the very edge, we stayed our steps / at an expanse of deep and "
+"arid sand..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XVIII / Terzine 3"
+#: po/level_i18n.cc:1055
+msgid ""
+"A path that circles like a belt around / the base of that high rock runs "
+"round the pit, / its sides descending in ten ditches."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XXXII / Terzine 8"
+#: po/level_i18n.cc:1058
+msgid ""
+"Under my feet I saw a lake / so frozen that it seemed more glass than "
+"water. / Never in winter did the Austrian Danube / nor the far-off Don, "
+"under its frigid sky, / cover their currents with so thick a veil / as I saw "
+"there."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XXXII / Terzine 25"
+#: po/level_i18n.cc:1061
+msgid ""
+"...we made our way toward the center, / where all things that have weight "
+"converge, / and I was shivering in the eternal chill..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XXXII / Terzine 3"
+#: po/level_i18n.cc:1064
+msgid ""
+"It is no enterprise undertaken lightly -- / to describe the very bottom of "
+"the universe..."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XXXIV / Terzines 10 & 11"
+#: po/level_i18n.cc:1067
+msgid ""
+"The emperor of the woeful kingdom / rose from the ice below his breast, / "
+"and I in size am closer to a giant / than giants are when measured to his "
+"arms."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1069
+msgid ""
+"You refused many times to leave my kingdom -- now you shall pay the "
+"consequences for your foolishness!"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1071
+msgid "Faithlessness"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1073
+msgid "Lust"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1075
+msgid "Gluttony"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1077
+msgid "Avarice"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1079
+msgid "Sloth"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1081
+msgid "Heresy"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1083
+msgid "Violence"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1085
+msgid "Fraud"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:1087
+msgid "Treachery"
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XXXIV / Terzine 37"
+#: po/level_i18n.cc:1090
+msgid "...passed the point / to which all weights are drawn from every side."
+msgstr ""
+
+#  level: "The Inferno"
+#  author: "Jacob Scott" email ""
+#  comment: "Dante 'Devine Comedy': Canto XXXIV / Terzine 46 & final verse"
+#: po/level_i18n.cc:1093
+msgid ""
+"...climbed up... far enough to see, through a round opening, / a few of "
+"those fair things the heavens bear. / Then we came forth, to see again the "
+"stars."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1101
+msgid "Poe's Nightmare"
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1103
+msgid ""
+"You find yourself in a dark, damb chamber. There's a light switch to the "
+"northeast and a passage to the west."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1105
+msgid ""
+"The corridor leads northwards and opens into a dim lit room packed with "
+"crates. You have an uneasy feeling about what lies ahead of you."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1107
+msgid ""
+"Huh, that was close. The way behind you is blocked. Maybe you should look "
+"for a place to leave a flag?!"
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1109
+msgid ""
+"To the east the passage is blocked by laser beams. To the west a tunnel "
+"leads to a large pendulum. At the wall you see a hole where your flag fits "
+"in. What now?"
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1111
+msgid ""
+"Shrinking rooms, a pendulum with razor sharp blades, laser beams ... what "
+"may lurk behind the next corner?"
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1113
+msgid ""
+"The room to the east does not look very stable, but does the passage to the "
+"south lead anywhere?"
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1115
+msgid "Hmmm, these keys might prove useful."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1117
+msgid ""
+"Passing by the entrance you get a glimpse of the room to the south ... and "
+"suddenly feel very uneasy."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1119
+msgid "Uh-oh, the steps leading down are small and extremely slippery."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1121
+msgid ""
+"The passage opens into a room with a huge iron door to the east. The air "
+"seems to smell much fresher here."
+msgstr ""
+
+#  level: "Poe's Nightmare"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:1123
+msgid "Congratulations! You've survived Poe's Nightmare."
+msgstr ""
+
+#  level: "Naoussa"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:1136
+msgid "Use ~all~ Stones"
+msgstr ""
+
+#  level: "Symopal"
+#  author: "Andreas Lochmann, Ronald Lamprecht" email ""
+#: po/level_i18n.cc:1143
+msgid "It's not symmetric!"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate the names from Marbleix and Pearlix"
+#: po/level_i18n.cc:1149
+msgid "Marbleix and Pearlix I"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate 'en Tour'"
+#: po/level_i18n.cc:1152
+msgid ""
+"Doping 'en Tour' not allowed for taking shortcuts, doping just allowed for "
+"self defence!"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Rotomagus"
+#: po/level_i18n.cc:1155
+msgid "Rotomagus - Rouen"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Lutetia"
+#: po/level_i18n.cc:1158
+msgid "Lutetia - Paris"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Camaracum"
+#: po/level_i18n.cc:1161
+msgid "Camaracum - Cambrai"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Durocortorum"
+#: po/level_i18n.cc:1164
+msgid "Durocortorum - Rheims"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Lugdunum"
+#: po/level_i18n.cc:1167
+msgid "Lugdunum - Lyons"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Nicae"
+#: po/level_i18n.cc:1170
+msgid "Nicae - Nice"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Massilia"
+#: po/level_i18n.cc:1173
+msgid "Massilia - Marseilles"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Aginum"
+#: po/level_i18n.cc:1176
+msgid "Aginum - Agen"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Detour de Tour"
+#: po/level_i18n.cc:1179
+msgid "Detour de Tour - Detour of the Tour"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Burdigala"
+#: po/level_i18n.cc:1182
+msgid "Burdigala - Bordeaux"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Gallia est omnis"
+#: po/level_i18n.cc:1185
+msgid "Gallia est ommnis ... - Whole Gaul is ..."
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#  comment: "not translate Veni Vidi Vici"
+#: po/level_i18n.cc:1188
+msgid "Veni, vidi, vici - I came, I saw, I conquered"
+msgstr ""
+
+#  level: "Tour de France"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:1190
+msgid "Welcome in L?Alpe d?Huez. Sorry, it is not yet stage of the Tour"
+msgstr ""
+
+#  level: "Choices, choices ..."
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:1194
+msgid "Choices, choices ..."
+msgstr ""
+
+#  level: "Choices, choices ..."
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:1195
+msgid ""
+"Before trying this level in hard mode, it's a good idea to switch to easy "
+"mode to practice on the individual puzzles."
+msgstr ""
+
+#  level: "Choices, choices ..."
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:1196
+msgid "These dispensers are all empty ..."
+msgstr ""
+
+#  level: "Choices, choices ..."
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:1197
+msgid "The glass next to this document can be pushed to let you back out."
+msgstr ""
+
+#  level: "Black Holes"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:1210
+msgid "Beware! Black holes!"
+msgstr ""
+
+#  level: "Enigmastermind"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:1218
+msgid "This switch is to validate your guess."
+msgstr ""
+
+#  level: "Enigmastermind"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:1220
+msgid "This switch is to reset the game."
+msgstr ""
+
+#  level: "Enigmastermind"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:1222
+msgid ""
+"Each color appears once. Each correct color produces whites in the wrong "
+"place, blacks in the right one."
+msgstr ""
+
+#  level: "Robin's Wood"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:1230
+msgid ""
+"A Stone, a Tree, and Trees be Three,   --   For to Defeat the Enemy,   --   "
+"Between Might Lay   --   A Secret Way!   --   (If this you see, press Shift-"
+"F3.)"
+msgstr ""
+
+#  level: "Do It Yourself"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:1267
+msgid "Take some money and build yourself the tools you need."
+msgstr ""
+
+#  level: "Buridan"
+#  author: "Alain Busser" email ""
+#  comment: "wordplay between 'right' (converse of left) and 'right' (true); not necessary to translate."
+#: po/level_i18n.cc:1276
+msgid "The other document lies and the left wormhole is the right one."
+msgstr ""
+
+#  level: "Buridan"
+#  author: "Alain Busser" email ""
+#  comment: "wordplay between 'left (converse of right) and 'been left' (abandonned); not necessary to translate."
+#: po/level_i18n.cc:1279
+msgid ""
+"The other document tells the truth and the other wormhole has been left on "
+"the right side."
+msgstr ""
+
+#  level: "Growing Boxes"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:1292
+msgid "You'd need a portable box!"
+msgstr ""
+
+#  level: "Growing Boxes"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:1293
+msgid ""
+"Congratulations! You found a seed! Try to use it behind the grate (and move "
+"away quickly)"
+msgstr ""
+
+#  level: "Growing Boxes"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:1294
+msgid ""
+"Remember that you can't fill a closed bridge with a "
+"box ...                                           but maybe you can use the "
+"3rd seed differently!"
+msgstr ""
+
+#  level: "Growing Boxes"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:1295
+msgid "There are different kinds of seeds ... Try to use them!"
+msgstr ""
+
+#  level: "Growing Boxes"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#  comment: "read from the right"
+#: po/level_i18n.cc:1297
+msgid "Noitcerid etisoppo eht yrt! Tuo syaw owt? Rorrim, rorrim ..."
+msgstr ""
+
+#  level: "Road to Eden"
+#  author: "Alain Busser" email ""
+#  comment: "this level has been inspired by the labyrinth of Chartres cathedral, which represents the difficult road that leads to wisdom"
+#: po/level_i18n.cc:1336
+msgid "Road to Eden"
+msgstr ""
+
+#  level: "Knight Moves"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:1352
+msgid "So,  where  are  the  knights?  -  you'll  be  sorry  you  asked!"
+msgstr ""
+
+#  level: "Pentomino I"
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:1359
+msgid "Five form twelve!"
+msgstr ""
+
+#  level: "Khun Phan"
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:1366
+msgid ""
+"One of the puzzle stones needs to be placed onto the trigger "
+"field.                       Guess which ... :)"
+msgstr ""
+
+#  level: "Khun Phan"
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:1367
+msgid "The level preview might help ..."
+msgstr ""
+
+#  level: "Laser Paradise"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:1371
+msgid "...  now  go  back  and  get  the  hammer!"
+msgstr ""
+
+#  level: "It's Magic"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:1411
+msgid "Do not use too much magic!"
+msgstr ""
+
+#  level: "The Fuse"
+#  author: "capkoh" email ""
+#: po/level_i18n.cc:1418
+msgid "Dead end!"
+msgstr ""
+
+#  level: "The Fuse"
+#  author: "capkoh" email ""
+#: po/level_i18n.cc:1419
+msgid "There are two HIDDEN items!"
+msgstr ""
+
+#  level: "The Fuse"
+#  author: "capkoh" email ""
+#: po/level_i18n.cc:1420
+msgid "Third stone from the rock is the hole!"
+msgstr ""
+
+#  level: "Laser Magic"
+#  author: "Petr Machata" email ""
+#: po/level_i18n.cc:1439
+msgid "Give it another try ..."
+msgstr ""
+
+#  level: "Enignimm"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:1444
+msgid ""
+"You play against Big Brother; each player in turn deletes 1, 2 or 3 stones; "
+"the one who deletes the last stone LOOSES!!!"
+msgstr ""
+
+#  level: "Enignimm"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:1446
+msgid "Now you begin this game."
+msgstr ""
+
+#  level: "Enignimm"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:1448
+msgid "Poor little blackball ... 'SHIFT+F3'!!!"
+msgstr ""
+
+#  level: "Easy Shifting ..."
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:1473
+msgid "Dedicated to my friend Frank."
+msgstr ""
+
+#  level: "Easy Shifting ..."
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:1474
+msgid "This level is quite straightforward, isn't it? Just continue ... ;-)"
+msgstr ""
+
+#  level: "Pharaoh's Tomb"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:1484
+msgid "Some stones are movable."
+msgstr ""
+
+#  level: "Pharaoh's Tomb"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:1485
+msgid "You lost!"
+msgstr ""
+
+#  level: "Moure-Switches"
+#  author: "Andreas Lochmann" email ""
+#  comment: "The sequence of the four elements is important, as they are connected to the colors of the floor."
+#: po/level_i18n.cc:1500
+msgid "Our full attention this is worth:           Air and Fire, Water, Earth."
+msgstr ""
+
+#  level: "Moure-Switches"
+#  author: "Andreas Lochmann" email ""
+#  comment: "Just a hint to regard the floor."
+#: po/level_i18n.cc:1503
+msgid ""
+"And if your answer can?t be found           then shame on you, eyes to the "
+"ground!"
+msgstr ""
+
+#  level: "Turn Around"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:1516
+msgid "Just a hint: Try the easy-mode first ..."
+msgstr ""
+
+#  level: "Turn Around"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:1517
+msgid "Don't think too long ... it's easy!"
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:1526
+msgid "Welcome to Enigma II"
+msgstr ""
+
+#  level: "Tool Time"
+#  author: "Barry & Lori Mead" email "bmead15 at cox.net"
+#: po/level_i18n.cc:1536
+msgid "Make a Sword, & Umbrella."
+msgstr ""
+
+#  level: "Domain of Mysteries"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:1549
+msgid "Press F3 or finish."
+msgstr ""
+
+#  level: "Disk Royal"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:1562
+msgid "is  black  always  beautiful?"
+msgstr ""
+
+#  level: "Big Adventures"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2052
+msgid "Too many wooden blocks!  Try the other way ..."
+msgstr ""
+
+#  level: "Big Adventures"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2053
+msgid ""
+"Greetings, adventurer!    The road ahead is long and dangerous, so be "
+"careful!"
+msgstr ""
+
+#  level: "Big Adventures"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2054
+msgid "Well done, adventurer!    Good luck!"
+msgstr ""
+
+#  level: "Big Adventures"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2055
+msgid "Congratulations, adventurer!  You did it!"
+msgstr ""
+
+#  level: "What's the Problem?"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2062
+msgid "Alfred Nobel says: This is definitely a meditation landscape!"
+msgstr ""
+
+#  level: "The Dark Outside"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:2069
+msgid "What a pity, and there's so much paint left ..."
+msgstr ""
+
+#  level: "The Race"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:2073
+msgid "It's a race!"
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#  comment: "The persons and objects are from the Agatha-Christie-like game 'Cluedo'; their names tend to change from country to country; Mr. White has been changed to 'Whiteball' to make it more 'enigma'."
+#: po/level_i18n.cc:2148
+msgid ""
+"Your uncle Sir Blackball has been murdered last night in his manor, in one "
+"of his 6 rooms, by one of the weapons which are in the cellar; the suspects "
+"are the shy Mrs Peacock, the secret Colonel Mustard, the absent-minded "
+"Professor Plum, the mysterious Rev. Green, the nurse Mrs Whiteball, who "
+"discovered the corpse, and Miss Scarlett whose beauty might be fatal ... you "
+"must find who killed your uncle, where and how."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2150
+msgid "This room is not the crime scene."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2152
+msgid "The murderer is not Mrs Peacock."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2154
+msgid "The murderer is not Colonel Mustard."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2156
+msgid "The murderer is not Professor Plum."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2158
+msgid "The murderer is not Reverend Green."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2160
+msgid "The murderer is not Mrs Whiteball."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2162
+msgid "The murderer is not Miss Scarlett."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2164
+msgid "Sir Blackball has not been killed with the bomb."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2166
+msgid "Sir Blackball has not been killed with the dagger."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2168
+msgid "Sir Blackball has not been killed with poison."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2170
+msgid "Sir Blackball has not been killed with the wrench."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2172
+msgid "Sir Blackball has not been killed with the candlestick."
+msgstr ""
+
+#  level: "Cluenigma"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2174
+msgid "Sir Blackball has not been killed with the hammer."
+msgstr ""
+
+#  level: "Where is it?"
+#  author: "Barry & Lori Mead" email "bmead15 at cox.net"
+#: po/level_i18n.cc:2187
+msgid "Paint Ahead!"
+msgstr ""
+
+#  level: "Light Switches"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:2203
+msgid "Danger ... laser beams!"
+msgstr ""
+
+#  level: "Little Puzzles"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2225
+msgid "Oops ... you're stuck ...     Try again ..."
+msgstr ""
+
+#  level: "Little Puzzles"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2226
+msgid ""
+"Congratulations, you reached this side ...      but can you get to the "
+"oxyds? "
+msgstr ""
+
+#  level: "Little Puzzles"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2227
+msgid "Well done!"
+msgstr ""
+
+#  level: "Bizarro World"
+#  author: "Jacob Scott" email ""
+#  comment: "read from the right"
+#: po/level_i18n.cc:2247
+msgid ".moor txen eht ot teg ot syaw owt era erehT"
+msgstr ""
+
+#  level: "Running Stone"
+#  author: "Christoph & Anita" email ""
+#: po/level_i18n.cc:2272
+msgid "Fight appearing lava."
+msgstr ""
+
+#  level: "Running Stone"
+#  author: "Christoph & Anita" email ""
+#: po/level_i18n.cc:2273
+msgid "A hammer destroys some black stones."
+msgstr ""
+
+#  level: "How solid?"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:2277
+msgid ""
+"That wasn't fast enough; try "
+"F3.                                                                              "
+"(Or search for non-solid stones, if you "
+"want.)                                                                                                        "
+"(But you won't find "
+"any.)                                                                                                                  "
+"(Really!)"
+msgstr ""
+
+#  level: "How solid?"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:2278
+msgid ""
+"You can believe me: All stones you see in this level are "
+"solid!                                                                                      "
+"You can really believe "
+"me!                                                                               "
+"Really!"
+msgstr ""
+
+#  level: "The Flagstone Reaper"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:2304
+msgid "The Flagstone Reaper"
+msgstr ""
+
+#  level: "The Flagstone Reaper"
+#  author: "Andreas Lochmann" email ""
+#  comment: "Difficult to translate. If you have no idea, just say: Why on this side does this message sit? The Reaper has a use for it"
+#: po/level_i18n.cc:2307
+msgid ""
+"No hint today ...    Those flagstones pass away ...    The docu stands "
+"alone ...    Why is it so alone?    --    This hint today ...    Why is it "
+"on this side ...    The reaper passing by ...    Could know the reason "
+"why!     (orig. by Herman's Hermits)   "
+msgstr ""
+
+#  level: "The Life Game"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2318
+msgid "The Life Game"
+msgstr ""
+
+#  level: "The Life Game"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2320
+msgid "The nine switches in square serve to configure the initial population."
+msgstr ""
+
+#  level: "The Life Game"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2322
+msgid "START"
+msgstr ""
+
+#  level: "The Life Game"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2324
+msgid "CLEAR"
+msgstr ""
+
+#  level: "Run Like Hell"
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:2334
+msgid "Calm down!"
+msgstr ""
+
+#  level: "Patterns of Impulse"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:2341
+msgid ""
+"As long as there is motion around the oxyd-stones, you won't reach them.   "
+"So: Don't lose control of the level! It's possible."
+msgstr ""
+
+#  level: "Wood robbing"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:2349
+msgid "Wood robbing"
+msgstr ""
+
+#  level: "Sleeping Serpent"
+#  author: "Raoul Bourquin" email "raoul at users.berlios.de"
+#: po/level_i18n.cc:2359
+msgid "Don't wake it up!"
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:2374
+msgid "Welcome to Enigma IV"
+msgstr ""
+
+#  level: "NO Trespassing"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:2399
+msgid "! -  DANGER  -  NO TRESPASSING  -  DANGER  - !"
+msgstr ""
+
+#  level: "deja-vu"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2416
+msgid "when  you've  been  particular  places"
+msgstr ""
+
+#  level: "deja-vu"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2418
+msgid "that  you  know  you've  never  seen  before"
+msgstr ""
+
+#  level: "deja-vu"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2420
+msgid "can  you  be  sure?"
+msgstr ""
+
+#  level: "deja-vu"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2422
+msgid "feel  like  I've  been  here  before"
+msgstr ""
+
+#  level: "deja-vu"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2424
+msgid "quote:  Iron  Maiden   -   Deja-Vu"
+msgstr ""
+
+#  level: "deja-vu"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2426
+msgid "for  illmind's  deja  vu  try  the  top  left  corner  ..."
+msgstr ""
+
+#  level: "The Safe"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:2451
+msgid "It's a long way ..."
+msgstr ""
+
+#  level: "The Sargasso Sea"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:2464
+msgid "This level is much bigger! Press F3!"
+msgstr ""
+
+#  level: "Control Panel"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:2471
+msgid "The left-most room is important!"
+msgstr ""
+
+#  level: "Control Panel"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:2472
+msgid "This is the control panel."
+msgstr ""
+
+#  level: "The Ditch"
+#  author: "Richi B?tzer" email ""
+#: po/level_i18n.cc:2483
+msgid "Risk your life ..."
+msgstr ""
+
+#  level: "White Contrast"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2526
+msgid ""
+"One  more  and  you  won't  get  this  hammer  until  you  don't  need  it  "
+"anymore!"
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:2535
+msgid "Welcome to Enigma III"
+msgstr ""
+
+#  level: "The Turtle"
+#  author: "Petr Machata" email ""
+#: po/level_i18n.cc:2545
+msgid ""
+"Welcome to the control room. Use the triggers and switches to plan the "
+"movement of the turtle. The switches are, clockwise: Add, Run and Restart."
+msgstr ""
+
+#  level: "Unfair!"
+#  author: "Petr Machata" email ""
+#: po/level_i18n.cc:2564
+msgid ""
+"I don't believe that you are the Marble. I won't let you pass until you "
+"prove me wrong: you have to be faster than my champion!"
+msgstr ""
+
+#  level: "Unfair!"
+#  author: "Petr Machata" email ""
+#: po/level_i18n.cc:2565
+msgid "Congratulations! You may pass!"
+msgstr ""
+
+#  level: "Waterworld"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:2569
+msgid ""
+"Remember  to  only  move  enough  stones  to  just  look  into  the  next  "
+"room  ..."
+msgstr ""
+
+#  level: "Emergency Exit"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2573
+msgid "Flood Control Dam #3 seems rather unstable. Be quick or be dead."
+msgstr ""
+
+#  level: "Laser Castle"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:2589
+msgid "A castle lies before you ... beware of guardians!"
+msgstr ""
+
+#  level: "Push? Pull!"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:2644
+msgid "Restart with F3 ..."
+msgstr ""
+
+#  level: "Bridge Builders"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2657
+msgid "White helps black, black helps white."
+msgstr ""
+
+#  level: "Block its way!"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2682
+msgid "Don't forget to open the door ..."
+msgstr ""
+
+#  level: "Block its way!"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2683
+msgid "Good Luck!"
+msgstr ""
+
+#  level: "Block its way!"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2684
+msgid "Hurry!"
+msgstr ""
+
+#  level: "Block its way!"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2685
+msgid "Congratulations! (or try again)"
+msgstr ""
+
+#  level: "Block its way!"
+#  author: "Jon 'WB' Sneyers" email ""
+#: po/level_i18n.cc:2686
+msgid "Almost finished ..."
+msgstr ""
+
+#  level: "- Snow White -"
+#  author: "Petr Machata" email ""
+#: po/level_i18n.cc:2708
+msgid "Look ... they're over there!"
+msgstr ""
+
+#  level: "Automatic Transmission"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:2718
+msgid "The block near the top-left can move."
+msgstr ""
+
+#  level: "Jump And Run"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:2722
+msgid "Watch your step!"
+msgstr ""
+
+#  level: "Hidden Danger"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:2741
+msgid "The danger is not visible!!!"
+msgstr ""
+
+#  level: "Deadend"
+#  author: "Daniel Heck" email ""
+#: po/level_i18n.cc:2745
+msgid "Look closely!"
+msgstr ""
+
+#  level: "esprit 17"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2761
+msgid "Please remember:    42"
+msgstr ""
+
+#  level: "Bank-O-Mat"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2768
+msgid "Sorry for inconvenience, the Bank-O-Mat is empty."
+msgstr ""
+
+#  level: "esprit 5"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:2781
+msgid "Easy?"
+msgstr ""
+
+#  level: "esprit 3"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:2818
+msgid "Can you see the hidden oxyd stones?"
+msgstr ""
+
+#  level: "esprit 52"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2825
+msgid "Sunday, bloody Sunday!"
+msgstr ""
+
+#  level: "esprit 7"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2841
+msgid "Watch out, slippery!"
+msgstr ""
+
+#  level: "esprit 94"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2848
+msgid "If you haven't won, you've lost!"
+msgstr ""
+
+#  level: "esprit 92"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2852
+msgid "Take the key to the left first!"
+msgstr ""
+
+#  level: "esprit 96"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2865
+msgid "It's easier with a shovel!"
+msgstr ""
+
+#  level: "esprit 8"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2953
+msgid "Umbrellas protect!"
+msgstr ""
+
+#  level: "esprit 73"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:2987
+msgid "If you think this is too easy, then play -Bavarian Madness-"
+msgstr ""
+
+#  level: "esprit 59"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:3009
+msgid "Watch out!!"
+msgstr ""
+
+#  level: "Demo I18N"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:3068
+msgid "Translate or let it be translated"
+msgstr ""
+
+#  level: "Demo I18N"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "Let 'right' be ambiguous: correct and opposite of left - if not possible choose correct"
+#: po/level_i18n.cc:3072
+msgid "Read the right document"
+msgstr ""
+
+#  level: "Demo I18N"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "the correct one and not the right positioned one"
+#: po/level_i18n.cc:3075
+msgid "The right one, not the right one!"
+msgstr ""
+
+#  level: "Gardening Work"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:3097
+msgid "Dig in ..."
+msgstr ""
+
+#  level: "Per.Oxyd 11"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:3113
+msgid "Rest on the bright spot for a minute."
+msgstr ""
+
+#  level: "Per.Oxyd 11"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:3114
+msgid "You'll do anything you're told!"
+msgstr ""
+
+#  level: "Per.Oxyd 62"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:3119
+msgid "Did you bring your flag?"
+msgstr ""
+
+#  level: "Per.Oxyd 28"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:3136
+msgid "Umbrellas protect you against oncoming boulder!"
+msgstr ""
+
+#  level: "Snugly Packed II"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:3146
+msgid "Nothing can stop us!"
+msgstr ""
+
+#  level: "Handle With Care"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:3166
+msgid "Some stones and stone rows can be moved!"
+msgstr ""
+
+#  level: "Per.Oxyd #27"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:3180
+msgid "If you think that's too easy, try \"Difficulty: Normal\"."
+msgstr ""
+
+#  level: "Per.Oxyd #27"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:3182
+msgid "If you think that's too hard, try \"Difficulty: Easy\"."
+msgstr ""
+
+#  level: "Pipe Dreams"
+#  author: "Siegfried Fennig" email ""
+#: po/level_i18n.cc:3202
+msgid "... did it!"
+msgstr ""
+
+#  level: "Per.Oxyd 88"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:3252
+msgid "Watch out for water holes!"
+msgstr ""
+
+#  level: "Still Swapping?"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:3269
+msgid "Bricks change!"
+msgstr ""
+
+#  level: "Solvable?"
+#  author: "Barry & Lori Mead" email "bmead15 at cox.net"
+#: po/level_i18n.cc:3550
+msgid "Make an umbrella."
+msgstr ""
+
+#  level: "Pneumatic Delivery"
+#  author: "Manuel K?nig" email ""
+#: po/level_i18n.cc:3555
+msgid ""
+"This is my first landscape, dedicated to my father. I hope you'll enjoy it!"
+msgstr ""
+
+#  level: "Catwalk Meditation"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:3560
+msgid "Catwalk Meditation"
+msgstr ""
+
+#  level: "Designed with love"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3574
+msgid "Did you really think this one was so easy!?"
+msgstr ""
+
+#  level: "Designed with love"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3576
+msgid "Did you forget something?"
+msgstr ""
+
+#  level: "Designed with love"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3578
+msgid "Go on! There's no way back now!"
+msgstr ""
+
+#  level: "Designed with love"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3580
+msgid "STOP! Not this way! There's a short-cut ..."
+msgstr ""
+
+#  level: "Designed with love"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3582
+msgid ""
+"There's a trigger one step to the left. If you could keep it depressed, it "
+"would help you a lot if you go back! "
+msgstr ""
+
+#  level: "Tropical Island"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:3586
+msgid ""
+"Why has there always to be an active volcano and a village of marble-eating "
+"inhabitants on a tropical island?"
+msgstr ""
+
+#  level: "Psycho Pushing"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:3590
+msgid "If I only had a bag."
+msgstr ""
+
+#  level: "Psycho Pushing"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:3591
+msgid "shh ... listen!"
+msgstr ""
+
+#  level: "Jumpin' Jack Flash"
+#  author: "Sven Siggelkow" email ""
+#: po/level_i18n.cc:3616
+msgid "This is a meditation landscape: put a small marble into every hole ..."
+msgstr ""
+
+#  level: "Laser Path"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:3623
+msgid "Try the easy mode first ..."
+msgstr ""
+
+#  level: "Doors forever"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3633
+msgid "Look carefully at everything!"
+msgstr ""
+
+#  level: "Doors forever"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3634
+msgid "Do you need a helping hand?"
+msgstr ""
+
+#  level: "Print 23"
+#  author: "Richi B?tzer" email ""
+#: po/level_i18n.cc:3641
+msgid ""
+"If you have never heard about Brainf***, visit e.g. http://en.wikipedia.org/"
+"wiki/Brainfuck before you try to solve this level."
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:3647
+msgid "Welcome to Enigma V"
+msgstr ""
+
+#  level: "Draggers"
+#  author: "Petr Machata" email ""
+#: po/level_i18n.cc:3657
+msgid "This level is symmetric ..."
+msgstr ""
+
+#  level: "Fatal Attraction II"
+#  author: "Spaceman" email ""
+#: po/level_i18n.cc:3664
+msgid "Don't get attracted!"
+msgstr ""
+
+#  level: "Hobbyte"
+#  author: "Alain Busser" email ""
+#  comment: "an attempt has been made to imitate the language Aragorn uses in Tolkien's 'the 2 towers', which itself is an imitation of the ancient english Shakespeare wrote; the most faithful way to translate this is then to use a medieval-looking language."
+#: po/level_i18n.cc:3673
+msgid ""
+"Mightie art the Knightes of The Olde Ages who keepe the Elfic Oxyde Stones, "
+"and numerous art the Ghostes who lye in the waye to them; many art the "
+"adventurers who tryed to steale Aylendil the Sworde but none has ever come "
+"back. Hazy is the swampe where the Magick of the Ancients is buryed; the "
+"lair of Whiteballs the dragon thu shalt avoyd in feare of awaken him ..."
+msgstr ""
+
+#  level: "Elaborate"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:3677
+msgid "It is not quite that easy."
+msgstr ""
+
+#  level: "Walk The Plank"
+#  author: "Nat Pryce" email ""
+#: po/level_i18n.cc:3684
+msgid ""
+"Here lies Black Ball the pirate, marooned in the year 1802 after travelling "
+"in the wrong direction."
+msgstr ""
+
+#  level: "Walk The Plank"
+#  author: "Nat Pryce" email ""
+#: po/level_i18n.cc:3685
+msgid ""
+"To cure sea sickness hold a large bank note between your teeth and lean over "
+"the side."
+msgstr ""
+
+#  level: "The Prison"
+#  author: "Martin Hawlisch" email ""
+#: po/level_i18n.cc:3695
+msgid "Warning ... ... thieves!"
+msgstr ""
+
+#  level: "Send me the keys !"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3700
+msgid "Send me the keys !"
+msgstr ""
+
+#  level: "Send me the keys !"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3702
+msgid "ALL the keys!!!"
+msgstr ""
+
+#  level: "A bayou by you"
+#  author: "Alain Busser" email ""
+#  comment: "alligators=tops, mosquitoes=tops and zombies=death stones"
+#: po/level_i18n.cc:3723
+msgid ""
+"The most dangerous animals of the bayou are the alligators, the "
+"mosquitoes ... and the zombies! (But the zombies at least, don't move ...)"
+msgstr ""
+
+#  level: "Banana Republic"
+#  author: "Alain Busser" email ""
+#  comment: "This is not real spanish, only an ambience"
+#: po/level_i18n.cc:3735
+msgid ""
+"Caramba!! El Dictator has muchos pesos in his cristal safe but muchos costa "
+"guardia too; Hay!! Poor Bola Negra has only frutos and a lasero!!!"
+msgstr ""
+
+#  level: "Ice-Bomb"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:3739
+msgid ""
+"Remember Seed Puzzle 2? There was a similar problem. Or was it Portable "
+"Laser ...?"
+msgstr ""
+
+#  level: "No way out?"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3752
+msgid "No way out?"
+msgstr ""
+
+#  level: "No way out?"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3753
+msgid "Do you miss something?"
+msgstr ""
+
+#  level: "Pirates Island"
+#  author: "Alain Busser" email ""
+#  comment: "There are coins and wood boxes (pirate's troves) and alimentary junks like seeds, empty bottles and bananas."
+#: po/level_i18n.cc:3759
+msgid "Pirates Island"
+msgstr ""
+
+#  level: "Pirates Island"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3761
+msgid "The pirates have lost several hidden things on this island ..."
+msgstr ""
+
+#  level: "Island of Safety"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:3780
+msgid "Keypad Corners"
+msgstr ""
+
+#  level: "Gods of Enigma II"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3835
+msgid ""
+"You again! We won't let you pass this time! See these Oxyds? You can't reach "
+"them unless you rob our Four Holy Items! But they are well guarded! "
+"Bwahahahaha!"
+msgstr ""
+
+#  level: "Gods of Enigma II"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3836
+msgid ""
+"Fire burns and destroys ... Want to remove blocking stones? Then dig your "
+"way to the Holy Hammer!"
+msgstr ""
+
+#  level: "Gods of Enigma II"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3837
+msgid "Try again! Bwahahahaha!"
+msgstr ""
+
+#  level: "Gods of Enigma II"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3838
+msgid ""
+"Earth fills and lasts ... Want to replace missing floors? Then build your "
+"way to the Holy Seed!"
+msgstr ""
+
+#  level: "Gods of Enigma II"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3839
+msgid ""
+"Air blows and goes by ... Want to jump across the void? Then make your way "
+"to the Holy Spring!"
+msgstr ""
+
+#  level: "Gods of Enigma II"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3840
+msgid ""
+"Water waves and shifts ... Want to trade minds with your partner? Then find "
+"your way to the Holy Yin-Yang!"
+msgstr ""
+
+#  level: "Life's Cross"
+#  author: "Raoul Bourquin" email "raoul at users.berlios.de"
+#: po/level_i18n.cc:3854
+msgid "Could you need something?"
+msgstr ""
+
+#  level: "Blet"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3859
+msgid ""
+"When you change the color of one square, the colors of the 2 nearest squares "
+"change as well; you must get as many green squares as possible."
+msgstr ""
+
+#  level: "Blet"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3861
+msgid ""
+"You are only allowed to change a color when it is surrounded by the other "
+"color."
+msgstr ""
+
+#  level: "April 1st"
+#  author: "Alain Busser" email ""
+#  comment: "in France it is an habit to tell jokes (what seems true is false) on april 1st, and these jokes are called 'april fishes'."
+#: po/level_i18n.cc:3891
+msgid "April 1st"
+msgstr ""
+
+#  level: "April 1st"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3893
+msgid "Do you REALLY want to do this???"
+msgstr ""
+
+#  level: "April 1st"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3895
+msgid ""
+"Didn't your mother tell you that you should not spend your money in such a "
+"careless manner?"
+msgstr ""
+
+#  level: "April 1st"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3897
+msgid "What is the current month?"
+msgstr ""
+
+#  level: "April 1st"
+#  author: "Alain Busser" email ""
+#: po/level_i18n.cc:3899
+msgid "What is this level's name?"
+msgstr ""
+
+#  level: "Fatal Attraction I"
+#  author: "Spaceman" email ""
+#: po/level_i18n.cc:3906
+msgid "Don't get too attracted!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3916
+msgid ""
+"Beware, stranger! The ancient gods of Enigma have set many traps to protect "
+"their holy Oxyds! You will have to get through the Four Tests to prove your "
+"worth!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3917
+msgid "Prove your speed in the Test of Fire!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3918
+msgid "You have proven your worth! The ancients grant you a FLAG!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3919
+msgid "Prove your intelligence in the Test of Earth!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3920
+msgid "You have proven your worth! The ancients grant you a SPRING!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3921
+msgid "Prove your dexterity in the Test of Air!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3922
+msgid "You have proven your worth! The ancients grant you a NAIL!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3923
+msgid "Prove your patience in the Test of Water!"
+msgstr ""
+
+#  level: "Gods of Enigma"
+#  author: "moonpearl" email ""
+#: po/level_i18n.cc:3924
+msgid ""
+"This can't be! No mortal can reach our Holy Oxyds! Prove yourself once more! "
+"Bwahahahaha!"
+msgstr ""
+
+#  level: "Firefox"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "Set fire or die"
+#: po/level_i18n.cc:3933
+msgid "Fire or be fired"
+msgstr ""
+
+#  level: "Firefox"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "Firefox in sense of clever in handling fire"
+#: po/level_i18n.cc:3936
+msgid ""
+"Do you think a bushman would start to search for an extinguisher in the "
+"cellar if a wall of fire were approaching? Be a Firefox - you have the first "
+"5 items to deal with, no more no less!"
+msgstr ""
+
+#  level: "Firefox"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:3938
+msgid ""
+"You can extinguish fire with water. This is a good place to refill your "
+"extinguisher. Be aware, water is rare!"
+msgstr ""
+
+#  level: "Firefox"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:3940
+msgid ""
+"OOPS! The maze is broken! Prepare to repair the maze before you destroy it."
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:3946
+msgid "Welcome to Enigma VII"
+msgstr ""
+
+#  level: "- Meditation -"
+#  author: "Edward" email ""
+#: po/level_i18n.cc:3950
+msgid "Can you relax amid all this chaos?"
+msgstr ""
+
+#  level: "Action Potential"
+#  author: "Mark Pulley" email ""
+#: po/level_i18n.cc:3954
+msgid "Bridge those synapses!"
+msgstr ""
+
+#  level: "Riverside"
+#  author: "Johann Freymuth" email "-"
+#: po/level_i18n.cc:3962
+msgid "Riverside"
+msgstr ""
+
+#  level: "Riverside"
+#  author: "Johann Freymuth" email "-"
+#: po/level_i18n.cc:3964
+msgid "Wrong side!                   F3"
+msgstr ""
+
+#  level: "Ball Alley"
+#  author: "Johann Freymuth" email "johannff at web.de"
+#: po/level_i18n.cc:3969
+msgid "Ball Alley"
+msgstr ""
+
+#  level: "Free Riders"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:3973
+msgid "Left or Right Drive?"
+msgstr ""
+
+#  level: "Remote Meditation"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:3978
+msgid "Remote Meditation"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3989
+msgid "Hey, where am i now?"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3991
+msgid ""
+"Moments ago i've been at home and wanted to take care about my two oxyd "
+"stones."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3993
+msgid "And now i'm stranded in this weird forest. How can i escape from here?"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3995
+msgid ""
+"If i should have a look-around? Perhaps i can find some things that could "
+"help me to find an exit."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3997
+msgid "WARNING: Highest caution is necessary."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:3999
+msgid "Wild buffaloes are crossing the way."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4001
+msgid "Help me, the forest is on fire!"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4003
+msgid "A herd of wild horses blocks the way."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4005
+msgid "A small hamlet with a fence, a few huts, a pond, some bales of straw."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4007
+msgid "If there is finally an exit?"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4009
+msgid "I'm afraid, i need some assistance!"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4011
+msgid "Filling station for empty extinguishers."
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4013
+msgid "Watch out: Angry mosquitoes!"
+msgstr ""
+
+#  level: "Lost in Time and Space"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4015
+msgid "Useful things may also be hidden!"
+msgstr ""
+
+#  level: "Using Rotators"
+#  author: "Joseph Dunne" email "josephdunne1993 at hotmail.com"
+#: po/level_i18n.cc:4029
+msgid "The moving boulder can fall down holes but cannot fall into water."
+msgstr ""
+
+#  level: "Watchmaker"
+#  author: "Johannes H?sing" email "hannes at ruhrau.de"
+#: po/level_i18n.cc:4036
+msgid "Watchmaker"
+msgstr ""
+
+#  level: "Watchmaker"
+#  author: "Johannes H?sing" email "hannes at ruhrau.de"
+#: po/level_i18n.cc:4040
+msgid "Mend the clockwork"
+msgstr ""
+
+#  level: "Watchmaker"
+#  author: "Johannes H?sing" email "hannes at ruhrau.de"
+#: po/level_i18n.cc:4041
+msgid ""
+"Don't close the pools before the clockwork is done, unless you are Fred "
+"Astaire"
+msgstr ""
+
+#  level: "Knot Garden"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4072
+msgid "You shouldn't have done that."
+msgstr ""
+
+#  level: "Knot Garden"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4073
+msgid "Careful."
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4078
+msgid "Audience in Venice"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4080
+msgid "Press the Triggers"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4082
+msgid "Welcome to Venice"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4084
+msgid "Welcome to the Audience"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4086
+msgid "rialto"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4088
+msgid "... under construction"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4090
+msgid "try the boulders as gondola"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4092
+msgid "piazza san marco"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4094
+msgid "danger"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4096
+msgid "san giorgio"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4098
+msgid "guardian ducale"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4100
+msgid "gondoliere on strike"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4102
+msgid "palace ducale"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4104
+msgid "look at san michele"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4106
+msgid "use the gondola below"
+msgstr ""
+
+#  level: "Audience in Venice"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4108
+msgid "hurry to san giorgio"
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4116
+msgid "Feed me!"
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4118
+msgid "Beware of Sadistic Dentist!"
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4120
+msgid "The innocent victim."
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4122
+msgid "Office of your boss."
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4124
+msgid "Aaaaaarrrrggghhhhhh!!!!!"
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4126
+msgid "Everyone has gone, but the plant's still hungry!"
+msgstr ""
+
+#  level: "Little Shop Of Horrors"
+#  author: "Mark Pulley" email ""
+#  comment: ""
+#: po/level_i18n.cc:4128
+msgid "No! No! Aaaarrrrgggghhhh!"
+msgstr ""
+
+#  level: "Inkblot 1"
+#  author: "Nathan Bronecke" email "npb-engimalevel at rbepan.net"
+#  comment: "the common name of the Rorschach test is inkblot test; this title just refers to the level's visual appearance"
+#: po/level_i18n.cc:4133
+msgid "Inkblot 1"
+msgstr ""
+
+#  level: "Spaceship Control"
+#  author: "Safalra" email ""
+#: po/level_i18n.cc:4146
+msgid "Spaceship Control"
+msgstr ""
+
+#  level: "Spaceship Control"
+#  author: "Safalra" email ""
+#: po/level_i18n.cc:4147
+msgid "Bound to the blue nowhere"
+msgstr ""
+
+#  level: "Ghost Driver"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4151
+msgid "Take the first exit"
+msgstr ""
+
+#  level: "Minor Tangler"
+#  author: "Joseph Dunne" email "josephdunne1993 at hotmail.com"
+#: po/level_i18n.cc:4164
+msgid "Clue: The starting point is where all dead marbles go"
+msgstr ""
+
+#  level: "Recover the Stone"
+#  author: "Joseph Dunne" email ""
+#: po/level_i18n.cc:4183
+msgid "Recover the Stone"
+msgstr ""
+
+#  level: "The Wild Hunt"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4215
+msgid "The Wild Hunt"
+msgstr ""
+
+#  level: "Cold Meditation"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4220
+msgid "Freeze by the Power of Light"
+msgstr ""
+
+#  level: "The Lone Ranger"
+#  author: "Mark Pulley" email ""
+#  comment: "This is loosely based on The Lone Ranger."
+#: po/level_i18n.cc:4240
+msgid ""
+"Your faithful friend Tonto, your horse Silver, and Tonto's horse Scout have "
+"been captured."
+msgstr ""
+
+#  level: "The Lone Ranger"
+#  author: "Mark Pulley" email ""
+#  comment: "The glasses represent the mask the Lone Ranger used to hide his real identity."
+#: po/level_i18n.cc:4242
+msgid "Don't forget your disguise!"
+msgstr ""
+
+#  level: "The Lone Ranger"
+#  author: "Mark Pulley" email ""
+#  comment: "John Reid is the real name of the Lone Ranger. When five of his friends were killed, he was left for dead. He buried them, and made a sixth empty grave for himself, so everyone else thought he was dead too."
+#: po/level_i18n.cc:4244
+msgid "Here lies the grave of John Reid."
+msgstr ""
+
+#  level: "The Lone Ranger"
+#  author: "Mark Pulley" email ""
+#  comment: "Said by the Lone Ranger as his horse Silver started galloping."
+#: po/level_i18n.cc:4246
+msgid "Hi-yo Silver, away!"
+msgstr ""
+
+#  level: "The Lone Ranger"
+#  author: "Mark Pulley" email ""
+#  comment: "This was said at the end of most episodes of The Lone Ranger."
+#: po/level_i18n.cc:4248
+msgid "Who was that masked man?"
+msgstr ""
+
+#  level: "The Lone Ranger"
+#  author: "Mark Pulley" email ""
+#  comment: "The tomb is empty because you faked your death."
+#: po/level_i18n.cc:4250
+msgid "Hey! This tomb is empty!"
+msgstr ""
+
+#  level: "Restless Meditation"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4255
+msgid "Restless Meditation"
+msgstr ""
+
+#  level: "Restless Meditation"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4257
+msgid "Caution - Quick Sand!"
+msgstr ""
+
+#  level: "Meditation in Peace"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4262
+msgid "Funeral on Deep Sea"
+msgstr ""
+
+#  level: "Meditation in Peace"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4264
+msgid ""
+"Warning: Do not play this level for more than 10 minutes - you may suffer "
+"sea sickness yourself!"
+msgstr ""
+
+#  level: "Circulation"
+#  author: "Mark Pulley" email ""
+#  comment: "Your job is to 'collect' oxygen from the lungs (by opening the switch), then deliver the oxygen to the tissues (by touching the oxyds)."
+#: po/level_i18n.cc:4272
+msgid "Carry that oxygen around."
+msgstr ""
+
+#  level: "Jack-Of-All-Trades"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4277
+msgid "Jack-Of-All-Trades"
+msgstr ""
+
+#  level: "Jack-Of-All-Trades"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4279
+msgid "Find The Paradise"
+msgstr ""
+
+#  level: "Map it out II"
+#  author: "Manuel Eisentraut" email ""
+#: po/level_i18n.cc:4283
+msgid "4D Confusion ..."
+msgstr ""
+
+#  level: "Map it out II"
+#  author: "Manuel Eisentraut" email ""
+#: po/level_i18n.cc:4284
+msgid ""
+"Ever mapped out a 4D-Labyrinth? Well, it's time to learn thinking in four "
+"dimensions ... Some hints: size of the labyrinth is 4x4x4x4; your current "
+"position is (2|3|3|2); in all of the 16 corners of the hypercube is a blue "
+"oxyd ..."
+msgstr ""
+
+#  level: "Map it out II"
+#  author: "Manuel Eisentraut" email ""
+#: po/level_i18n.cc:4285
+msgid ""
+"Ever mapped out a 4D-Labyrinth? Well, it's time to learn thinking in four "
+"dimensions ... Some hints: size of the labyrinth is 3x3x3x3; your current "
+"position is (2|2|2|2); in all of the 16 corners of the hypercube is a blue "
+"oxyd ..."
+msgstr ""
+
+#  level: "Maze for Two"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4317 po/level_i18n.cc:4841
+msgid "Keep distance!"
+msgstr ""
+
+#  level: "Maze for Two"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4319 po/level_i18n.cc:4843
+msgid "Help! I can't see the forest for the trees!"
+msgstr ""
+
+#  level: "mad-ill-tation"
+#  author: "illmind" email "illmind at mag-heut.net"
+#: po/level_i18n.cc:4329
+msgid ""
+"... illmind's mad-ill-tation ... a tribute to esprit meditation levels from "
+"the past. thank you. ..."
+msgstr ""
+
+#  level: "Crawling the Abyss"
+#  author: "ShadowPhrogg32642342" email "shadowphrogg32642342 at gmail.com"
+#: po/level_i18n.cc:4333
+msgid "There's more help than you first think!"
+msgstr ""
+
+#  level: "Lady in Red"
+#  author: "Just" email ""
+#: po/level_i18n.cc:4367
+msgid "Lady in Red"
+msgstr ""
+
+#  level: "Slopes, Jumps & Falls"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4374
+msgid "Floating ..."
+msgstr ""
+
+#  level: "Slopes, Jumps & Falls"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4375
+msgid "Don't be afraid -- It's only a ten mile drop!"
+msgstr ""
+
+#  level: "jumping ball flash"
+#  author: "illmind" email "illmind at mag-heut.net"
+#: po/level_i18n.cc:4391
+msgid "illmind's jumping ball flash ..."
+msgstr ""
+
+#  level: "jumping ball flash"
+#  author: "illmind" email "illmind at mag-heut.net"
+#: po/level_i18n.cc:4392
+msgid "... of heaven comes the beast from the ..."
+msgstr ""
+
+#  level: "jumping ball flash"
+#  author: "illmind" email "illmind at mag-heut.net"
+#: po/level_i18n.cc:4393
+msgid "... t r a p p e d ..."
+msgstr ""
+
+#  level: "be quick or be dead"
+#  author: "illmind" email "support at mag-heut.net"
+#: po/level_i18n.cc:4403
+msgid "illmind's be quick or be dead"
+msgstr ""
+
+#  level: "Ben Hur"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4414
+msgid "The art of steering a quadriga"
+msgstr ""
+
+#  level: "Ben Hur"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "quater - historical death penalty to be devided in four parts"
+#: po/level_i18n.cc:4417
+msgid "Dropping the spoon redeems from being quartered!"
+msgstr ""
+
+#  level: "Procrustes"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:4425
+msgid "Procrustes"
+msgstr ""
+
+#  level: "One-Way Woods"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4436
+msgid "One-Way Woods"
+msgstr ""
+
+#  level: "One-Way Woods"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4437
+msgid "Recycling by Swapping"
+msgstr ""
+
+#  level: "Revolver"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4445
+msgid "Charging live ammunition"
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4450
+msgid "Sorry, this switch is currently out of order."
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4452
+msgid "As I already told you, this switch is out of order!"
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4454
+msgid "How often are you going to try this?"
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4456
+msgid "Did anything happen? I'm not sure ..."
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4458
+msgid "Congrats, now it works again!"
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4460
+msgid "No hints available at the moment."
+msgstr ""
+
+#  level: "The Passage"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4462
+msgid "There is a passage right beneath this stone!"
+msgstr ""
+
+#  level: "Houdini"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "Escape as unchaining"
+#: po/level_i18n.cc:4474
+msgid "Escape by Chaining Thieves"
+msgstr ""
+
+#  level: "Houdini"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "Characters of Michael Ende's fantasy novel 'The Neverending Story'"
+#: po/level_i18n.cc:4477
+msgid "Remember Atreyu's horse Atrax!"
+msgstr ""
+
+#  level: "Houdini"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4479
+msgid "I am innocent! I've never stolen anything!"
+msgstr ""
+
+#  level: "Houdini"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4481
+msgid "It is said that pirates have taken the treasure."
+msgstr ""
+
+#  level: "Houdini"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4483
+msgid "Pirates usually hide their treasure!"
+msgstr ""
+
+#  level: "Houdini"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4485
+msgid "A closed door gives a better overview!"
+msgstr ""
+
+#  level: "Basketball"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4490
+msgid "Pass the ball in time"
+msgstr ""
+
+#  level: "Holes!"
+#  author: "Edward" email ""
+#: po/level_i18n.cc:4494
+msgid "Holes!"
+msgstr ""
+
+#  level: "Check the light"
+#  author: "JuSt" email ""
+#: po/level_i18n.cc:4514
+msgid "Are chess knights resistent to laser beams?"
+msgstr ""
+
+#  level: "Hot Hurdle Race"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:4525
+msgid "Hot Hurdle Race"
+msgstr ""
+
+#  level: "Hot Hurdle Race"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:4527
+msgid "Run for your life!"
+msgstr ""
+
+#  level: "Bodyguard"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4583
+msgid "In the line of thieves"
+msgstr ""
+
+#  level: "Bodyguard"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4585
+msgid "Keys from left to right are NE, NW, SE, SW."
+msgstr ""
+
+#  level: "Just a Maze?"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4598
+msgid "It isn't as easy as it looks."
+msgstr ""
+
+#  level: "Rotor Guards"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4606
+msgid "Rotor Guards"
+msgstr ""
+
+#  level: "Rotor Guards"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4608
+msgid "Hoisting guards with their own petard"
+msgstr ""
+
+#  level: "Simple Space"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:4613
+msgid "A really annoying Level"
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4650
+msgid ""
+"Welcome to Mexico! Eight hours ago, your plane arrived at the Airport of "
+"\"Coatlicue\", which is a small village surrounded by unexplored jungle "
+"terrain. Now you find yourself in front of an impressive temple, which seems "
+"to be a relic of the ancient Aztec empire. But the temple is in surprisingly "
+"good condition ..."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4651
+msgid ""
+"Next to the giant doors of the temple you see a chrome sign: \"Restoration "
+"by: G. G. Goshers, A.D. 1998\". A smaller sign beneath says: \"Property of "
+"G. G. Goshers. Trespassing prohibited!\". Now you notice the dog kennels "
+"built up along the front side of the temple. \"Goshers made this ancient "
+"relic a fortress\", you think, \"this cannot be legal, for Goshers received "
+"funding from the UK Government. I'll try to call him to account!\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4652
+msgid "This guard doesn?t notice me."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4653
+msgid ""
+"This lake was obviously made by Goshers. I think the correct way is south."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4654
+msgid ""
+"There's an inscription on the old wall, saying in spanish: \"Careful! What "
+"you touch could be the last thing you touch!\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4655
+msgid "Chrome sign: \"Control of the beast?s cage.\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4656
+msgid "Oooh, this slope is steep! Try not to touch the skull!"
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4657
+msgid ""
+"This building down there looks like a prison. Let's see if I can determine "
+"its purpose ... Ah, there's another chrome sign. Goshers seems to favour "
+"chrome signs. It says: \"Natives? prison\"."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4658
+msgid ""
+"Getting beyond the prison building was a really good idea. But now you have "
+"to cross this lake. Be thrifty with those boxes!"
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4659
+msgid ""
+"Now, peering through the grilled prison windows, you see a native woman "
+"imprisoned there. Obviously Goshers locked up all the natives, who disturbed "
+"his \"work\"; trying to enter the temple and to get rich from the treasures "
+"of the Aztecs. It might be helpful to be accompanied by someone, who knows "
+"the secrets of the jungle and this temple ..."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4660
+msgid ""
+"Since the white man there freed me from the prison, he certainly cannot be "
+"as evil as this Goshers is. Perhaps he wants to end the mastery of Goshers "
+"and free my people. And even if this is not the case, it's better to be free "
+"than imprisoned. I think I should thank him."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4661
+msgid ""
+"You meet the English adventurer in the front of the prison. \"Hello, I'm "
+"Xila!\", you tell him in broken English. After he introduced himself as "
+"well, both of you begin to work out a plan against the evil G. G. Goshers."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4662
+msgid ""
+"This is a really hard puzzle. The English man will have to help me, if this "
+"enigma is to be solved."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4663
+msgid "You wonder what this switch could trigger."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4664
+msgid "Xila knows how to drain the lake!"
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4665
+msgid "You were lucky to find this hole. It prevents you from drowning."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4666
+msgid "This glass stone must fulfill a purpose ..."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4667
+msgid "It's funny that such a temple should have a side entrance."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4668
+msgid "Be careful! There are sensors in the walls."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4669
+msgid ""
+"After the huge doors of the old temple have opened, you see, that the "
+"entrance is protected by 11 knights, armed with spears. These guards are "
+"very dangerous. Without a sword you'll never be able to enter. Be careful. "
+"There are not only knights, but also thieves."
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4670
+msgid "\"Congratulations. You just managed to enter this old Aztec Temple.\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4671
+msgid ""
+"\"You've been smarter than I expected. But you'll never enter the treasure "
+"room nor escape from here!\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4672
+msgid ""
+"\"I, Goshers, will certainly be able to rid myself of one of my archenemies "
+"by just killing you!\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4673
+msgid "\"Run for your life!\""
+msgstr ""
+
+#  level: "The Aztec Temple"
+#  author: "Dominik Lehmann" email ""
+#: po/level_i18n.cc:4674
+msgid ""
+"Xila and you just entered the Diamond Room of the old Aztec Temple. By "
+"taking him back to Great Britain and rendering him to the police, you have "
+"ended the evil career of Gerald Gregory Goshers. Congratulations on the "
+"success of your expedition!"
+msgstr ""
+
+#  level: "Meditation Disturbance"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4679
+msgid "Meditation Disturbance"
+msgstr ""
+
+#  level: "Meditation Disturbance"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#  comment: "free translatable joke about being hit by a horse"
+#: po/level_i18n.cc:4682
+msgid "Hit by a bolting horse"
+msgstr ""
+
+#  level: "Tandem Chess"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:4693
+msgid "Tandem Chess"
+msgstr ""
+
+#  level: "Tandem Chess"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:4695
+msgid "Work together!"
+msgstr ""
+
+#  level: "Magic Trinity"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4700
+msgid "Magic Trinity"
+msgstr ""
+
+#  level: "Dialers"
+#  author: "Edward" email ""
+#: po/level_i18n.cc:4704
+msgid "Dialers"
+msgstr ""
+
+#  level: "Tarzan"
+#  author: "Ulf Stegemann" email "ulf-enigma at zeitform.de"
+#: po/level_i18n.cc:4709
+msgid "Hanging around in the Jungle"
+msgstr ""
+
+#  level: "Edwards Mountain"
+#  author: "Edward" email ""
+#: po/level_i18n.cc:4713
+msgid "Edwards Mountain"
+msgstr ""
+
+#  level: "No Memory"
+#  author: "Edward" email ""
+#: po/level_i18n.cc:4723
+msgid "No Memory"
+msgstr ""
+
+#  level: "Toreador"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4728
+msgid "Toreador"
+msgstr ""
+
+#  level: "Blitz Chess"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:4739
+msgid "Blitz Chess"
+msgstr ""
+
+#  level: "Blitz Chess"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:4741
+msgid "Move fast!"
+msgstr ""
+
+#  level: "Pleasure Garden"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4746
+msgid "Pleasure Garden"
+msgstr ""
+
+#  level: "Pleasure Garden"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4747
+msgid ""
+"Quickly ...                                                                             "
+"or trickily!"
+msgstr ""
+
+#  level: "Correspondence Chess"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:4755
+msgid "Correspondence Chess"
+msgstr ""
+
+#  level: "Correspondence Chess"
+#  author: "Lukas Sch?ller" email "Lucky_Luc at web.de"
+#: po/level_i18n.cc:4757
+msgid "Send smartly!"
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:4769
+msgid "Welcome to Enigma VI"
+msgstr ""
+
+#  level: "Alcatraz"
+#  author: "Ralf Westram" email ""
+#: po/level_i18n.cc:4773
+msgid "Al Capone's training camp."
+msgstr ""
+
+#  level: "Alcatraz"
+#  author: "Ralf Westram" email ""
+#: po/level_i18n.cc:4774
+msgid "There are at least two patterns to break through the wall."
+msgstr ""
+
+#  level: "Alcatraz"
+#  author: "Ralf Westram" email ""
+#: po/level_i18n.cc:4775
+msgid "It is a well known secret that a few prisoners did escape."
+msgstr ""
+
+#  level: "Alcatraz"
+#  author: "Ralf Westram" email ""
+#: po/level_i18n.cc:4776
+msgid "A window in the wall would be really nice."
+msgstr ""
+
+#  level: "Polar Bears' Paradise"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4793
+msgid "Polar Bears' Paradise"
+msgstr ""
+
+#  level: "Polar Bears' Paradise"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4795
+msgid "Witch Hunt on Ice"
+msgstr ""
+
+#  level: "Rhapsody on Cracks"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4800
+msgid "The real value of coffee"
+msgstr ""
+
+#  level: "Oxyd Drilling"
+#  author: "Jacob Scott" email ""
+#: po/level_i18n.cc:4813
+msgid "Useful unsuccessful drillings"
+msgstr ""
+
+#  level: "Oil Trace"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:4817
+msgid "Mark stones burnable"
+msgstr ""
+
+#  level: "Techno Voodoo"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4828
+msgid "Just a Dance ?"
+msgstr ""
+
+#  level: "Enigmaparcour II"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4833 po/level_i18n.cc:5002
+msgid "Open the Doors"
+msgstr ""
+
+#  level: "Balance Beam"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4854
+msgid "Balance Beam"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4859
+msgid "Tutoxyd's Pyramid"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4861
+msgid ""
+"Welcome Mr. Jones! Back from your \"Alternatives\" and \"The Walls\" "
+"training camp?  Got everything you ordered:  some money  --  40 marbleons -- "
+"and a horse outside this shopping center.    Many adventurers lost their "
+"life in this pyramid.    Beware of the dangerous sand vipers and "
+"Enighomathep's curses."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4863
+msgid ""
+"Mr. Rainmaker used to own this shop. He always insisted that his umbrellas "
+"were the most usefull items in this desert. But nobody was willing to spend "
+"2 marbleons.  ---  Now a blacksmith offers his service."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4865
+msgid ""
+"Safety Precaution: in case one of these dangerous animals escapes, the gates "
+"of the shopping center will be closed immediately!"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4867
+msgid ""
+"Not much is known of the pyramid's architect Enighomathep. But it is said "
+"that he loved cherries. He ate so many of them that he sometimes became "
+"invisible."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4869
+msgid ""
+"Have a look at my collection!    A white scorpion   --   a rotodile   --  "
+"and a sand viper.  They cannot be sold.        But I can offer you a scarab "
+"that will be a better choice for you."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4871
+msgid ""
+"Ali Barber's shop for quick hair cuts. Want to know what is going on?  A "
+"thief is hanging around and nobody knows where the 4 pale kids that are "
+"playing with your horse came from."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4873
+msgid ""
+"Home of the last adventurer who never returned.   Said he would drill for "
+"oil -- but no one believed him."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4875
+msgid ""
+"Be cursed for trying to explore Tutoxyd's last secret -- may your homework "
+"remain undone until you prove worthy!"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4877
+msgid ""
+"It's a pity that some explorers damaged this historic monument and did "
+"litter the environment.   But the pyramid magically repairs itself every "
+"time an adventurer gives up."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4879
+msgid ""
+"Be cursed for disturbing Tutoxyd's peace -- may the earth part under your "
+"feet!"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4881
+msgid ""
+"Be cursed for disturbing Tutoxyd's peace -- may your legs no longer be under "
+"your control!"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4883
+msgid ""
+"Trapped?   Either wait for a stupid tourist willing to exchange positions "
+"with you by using a magic ring - or press Shift F3"
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4885
+msgid ""
+"Private Property! This claim belongs to Mr. Whiteoil. In case of absence "
+"please send a letter."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4887
+msgid "Invoice -- 40 marbleons for 20 barrels of oil."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4889
+msgid ""
+"Welcome stranger -- have a look at our holy stone. It is said that it shows "
+"everyone his personal fortune color. As all visitors tried to touch it, we "
+"had to set up some protection."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4891
+msgid ""
+"May I ask for a donation. Just a few bugs - throw the donation into the holy "
+"fire. Tutoxyd will be grateful."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4893
+msgid ""
+"Mr. Whiteoil, we finished our library reserach. Enighomathep reports that 4 "
+"keys are required. One key got lost immediately after sealing the pyramid. "
+"One is hidden at the border of the pyramid. For the others you have to "
+"demonstrate boldness and cleverness."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4895
+msgid "Facing Death you can walk without fear."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4897
+msgid "Sorry, the useful item that was hidden here has been stolen."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4899
+msgid ""
+"Tomb raiders are cursed to be frozen in stone or floor for all eternity.     "
+"Have a look at all these little funny sticks that they used to fight the "
+"curses."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4901
+msgid "Remove all parts of the memorial plate before conjuring up Tutoxyd."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4903
+msgid ""
+"Who dares to dirsturb my peace? Stranger - you have proven to be honorable. "
+"Bring back my children for a joint meditation. But beware that upon seeing "
+"me they may want to join me instead of meditate. I make you responsible for "
+"the security of my children."
+msgstr ""
+
+#  level: "Tutoxyd's Pyramid"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4905
+msgid ""
+"You are bringing back my children. As soon as they come to rest, I will "
+"deliver you from Enighomathep's curses so you may seek your next adventure."
+msgstr ""
+
+#  level: "Brilliant Opals"
+#  author: "Ronald Lamprecht, Andreas Lochmann" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4910
+msgid "The journey is the reward"
+msgstr ""
+
+#  level: "Danger Flag"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:4917
+msgid "Danger Flag"
+msgstr ""
+
+#  level: "Scarlett's Necklace"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4921
+msgid "Who broke the pearl necklace?"
+msgstr ""
+
+#  level: "Scarlett's Necklace"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4922
+msgid ""
+"Mrs. Scarlett's wonderful pearl necklace tore, and all the colorful pearls "
+"rolled onto the floor. Mrs. Scarlett doesn't remember the sequence, but she "
+"knows that succeeding pearls connect, when each is placed on a neigboring "
+"dot and a coin is inserted into the slot."
+msgstr ""
+
+#  level: "Scarlett's Necklace"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:4923
+msgid ""
+"You did invert the sequence of this pair of pearls. You need to correct this "
+"fault to finish the necklace."
+msgstr ""
+
+#  level: "Alternation II"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4928
+msgid "Alternation II"
+msgstr ""
+
+#  level: "Alternation II"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4930
+msgid "Alternation in a Dark Area"
+msgstr ""
+
+#  level: "Number Crunching"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:4934
+msgid "Number Crunching"
+msgstr ""
+
+#  level: "Multi-lane"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:4939
+msgid ""
+"Attention! The trigger in the abyss is a weird one. It disappears when "
+"touched ..."
+msgstr ""
+
+#  level: "Multi-lane"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:4941
+msgid "Go left to play the white part. Go right to play the black part."
+msgstr ""
+
+#  level: "Enigmaparcour III"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:4946
+msgid "Open the Doors, Open the Oxyds"
+msgstr ""
+
+#  level: "Minopal"
+#  author: "Andreas Lochmann, Ronald Lamprecht" email ""
+#: po/level_i18n.cc:4957
+msgid "Every marble is the architect of its own fortune"
+msgstr ""
+
+#  level: "Pentachromos"
+#  author: "J.Dunne, R.Lamprecht, D.Lehmann, M.Pulley, L.Sch?ller" email ""
+#: po/level_i18n.cc:4973
+msgid ""
+"Oh, ridiculous riddle rule my marble's meaningless mind, continue creating "
+"confusion being blackball's brain's blind."
+msgstr ""
+
+#  level: "Enigmines"
+#  author: "Brian Huffman" email ""
+#: po/level_i18n.cc:5009
+msgid ""
+"Watch out for mines!        White = 0, Blue = 1, Black = 2, Red = 3, Yellow "
+"= 4, Deep Blue = 5, Deep Red = 6 ..."
+msgstr ""
+
+#  level: "Enigmines"
+#  author: "Brian Huffman" email ""
+#: po/level_i18n.cc:5010
+msgid ""
+"Hint: Mines are never located along the edges.  If you still get stuck, look "
+"behind the wall!"
+msgstr ""
+
+#  level: "Enigmines"
+#  author: "Brian Huffman" email ""
+#: po/level_i18n.cc:5011
+msgid ""
+"Hit the switch to uncover one tile, but you will have to wait 10 seconds."
+msgstr ""
+
+#  level: "A Screenful of Secrets"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5016
+msgid "My First Level"
+msgstr ""
+
+#  level: "A Screenful of Secrets"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5018
+msgid "Secrets? Use the items, ... use the glasses ..."
+msgstr ""
+
+#  level: "Crabwise I"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:5050
+msgid "Crabwise I"
+msgstr ""
+
+#  level: "Panelled Puzzle I"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:5055
+msgid ""
+"There are 56 fully connected puzzle piece arrangements, but just 34 of them "
+"are reachable from this first distribution."
+msgstr ""
+
+#  level: "Panelled Puzzle I"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:5057
+msgid ""
+"This second distribution can just be converted to any of the other 28 "
+"arrangements."
+msgstr ""
+
+#  level: "Panelled Puzzle II"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:5065
+msgid ""
+"There are 19 fully connected puzzle piece arrangements, but just 9 of them "
+"are reachable from this first distribution."
+msgstr ""
+
+#  level: "Panelled Puzzle II"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:5067
+msgid ""
+"This second distribution can just be converted to any of the other 10 "
+"arrangements."
+msgstr ""
+
+#  level: "Panelled Puzzle II"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:5069
+msgid ""
+"There are just two symmetric puzzle piece arrangements that both are "
+"reachable."
+msgstr ""
+
+#  level: "Helios I"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5080 po/level_i18n.cc:5163
+msgid "Use the Lightpassenger"
+msgstr ""
+
+#  level: "Sunrise Sunset"
+#  author: "Mark Pulley" email ""
+#: po/level_i18n.cc:5084
+msgid ""
+"Choose your hemisphere: left switch for northern, right switch for southern."
+msgstr ""
+
+#  level: "Inverse Maze II"
+#  author: "Ronald Lamprecht" email "ral at users.berlios.de"
+#: po/level_i18n.cc:5089
+msgid "Change guaranteed"
+msgstr ""
+
+#  level: "4 - 8 - 4"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:5094
+msgid "Start the next explosion at brick 17 (counting from left)!"
+msgstr ""
+
+#  level: "4 - 8 - 4"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:5096
+msgid "Hint: The white ball's got the key."
+msgstr ""
+
+#  level: "4 - 8 - 4"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:5098
+msgid "Use of ring only allowed on marked areas."
+msgstr ""
+
+#  level: "4 - 8 - 4"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:5102
+msgid "Caution! Don't use for bridge-building!"
+msgstr ""
+
+#  level: "4 - 8 - 4"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:5104
+msgid "Looks pretty dark!"
+msgstr ""
+
+#  level: "4 - 8 - 4"
+#  author: "Dominik Leipold" email ""
+#: po/level_i18n.cc:5106
+msgid "Prevent theft! Don't leave valuables in your inventory!"
+msgstr ""
+
+#  level: "Missing Oxyds?"
+#  author: "Manfredi Carta" email ""
+#: po/level_i18n.cc:5119
+msgid "Missing Oxyds?"
+msgstr ""
+
+#  level: "Missing Oxyds?"
+#  author: "Manfredi Carta" email ""
+#: po/level_i18n.cc:5123
+msgid "Not everything is as it seems ..."
+msgstr ""
+
+#  level: "Missing Oxyds?"
+#  author: "Manfredi Carta" email ""
+#: po/level_i18n.cc:5127
+msgid "Make sure you find all of them"
+msgstr ""
+
+#  level: "Fifty Years Later ..."
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5138
+msgid "Survival Training in wasted Landscapes ..."
+msgstr ""
+
+#  level: "The Green Hell"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5146
+msgid "The Green Hell"
+msgstr ""
+
+#  level: "The Green Hell"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5148
+msgid "Exploration Trip to Green Waters"
+msgstr ""
+
+#  level: "Color Maze"
+#  author: "Mark Pulley" email ""
+#: po/level_i18n.cc:5155
+msgid ""
+"This is a color maze. You have to work out what order you need to traverse "
+"the colored floors in order to reach the oxyds."
+msgstr ""
+
+#  level: "Babylon"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5173
+msgid ""
+"This is Babylon. Be careful, stranger! It's dangerous to go "
+"inside.           There are some gates, unfortunalety closed, like the "
+"famous Gate of Ishtar,           and have a look to the lions, the tigers. "
+"Semiramis is waiting for you, stranger, ha ha."
+msgstr ""
+
+#  level: "Babylon"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5174
+msgid "Try to find the mechanism to open the gate, stranger"
+msgstr ""
+
+#  level: "Babylon"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5175
+msgid "Be afraid about the ~water~ , it is so deep, *hihi*, isn't it, Yeah???"
+msgstr ""
+
+#  level: "Welcome"
+#  author: "Raoul Bourquin" email ""
+#: po/level_i18n.cc:5187
+msgid "Welcome to Enigma VIII"
+msgstr ""
+
+#  level: "Rainbow Adjacencies"
+#  author: "Alex Smith" email "ais523 at bham.ac.uk"
+#: po/level_i18n.cc:5191
+msgid "Rainbow Adjacencies"
+msgstr ""
+
+#  level: "Alternation I"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5196
+msgid "Alternation I"
+msgstr ""
+
+#  level: "Alternation I"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5198
+msgid "Alternation in a Blue Area"
+msgstr ""
+
+#  level: "Plutos Confusion"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5206
+msgid "Plutos Confusion"
+msgstr ""
+
+#  level: "Plutos Confusion"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5208
+msgid "Dont eat cherries"
+msgstr ""
+
+#  level: "Turbulencia"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5213
+msgid "Meditation! Silence? ... Have a Look ..."
+msgstr ""
+
+#  level: "Turbulencia"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5215
+msgid "These stormy days ..."
+msgstr ""
+
+#  level: "Sanssouci"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5235
+msgid "A Baroque Game"
+msgstr ""
+
+#  level: "Plutos World"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5246
+msgid "Deep ..."
+msgstr ""
+
+#  level: "Crabwise II"
+#  author: "/dev/null" email ""
+#: po/level_i18n.cc:5266
+msgid "Crabwise II"
+msgstr ""
+
+#  level: "Vanity's Constrictions"
+#  author: "Andreas Lochmann" email ""
+#  comment: "A wordplay to describe a room crowded with hand mirrors."
+#: po/level_i18n.cc:5272
+msgid "The Hand Mirror Cabinet"
+msgstr ""
+
+#  level: "Vanity's Constrictions"
+#  author: "Andreas Lochmann" email ""
+#: po/level_i18n.cc:5274
+msgid "Ever tried to look at the back of your head in the mirror?"
+msgstr ""
+
+#  level: "Rhythm of Space"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5285
+msgid "Only A Labyrinth"
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5293
+msgid "Welcome to Liberty Island, New York City"
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5295
+msgid ""
+"To get a fuller picture of New York City, you should view it through every "
+"pair of glasses you can find."
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5297
+msgid ""
+"There's always a terrible traffic jam on Broadway at Times Square.  It's a "
+"pity you don't have time to see a show!"
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5299
+msgid ""
+"Charles Ives was the composer of \"Central Park in the Dark\". Enjoy his "
+"music, and use the shogun to open some gates!"
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5301
+msgid ""
+"These mechanized traffic signals are strange.  An outbound traffic sensor at "
+"Central park seems to be responsible for this street.  Use your glasses!"
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5303
+msgid ""
+"It's funny that a fountain in Central Park should control the traffic flow."
+msgstr ""
+
+#  level: "New York Jungle"
+#  author: "mecke" email ""
+#: po/level_i18n.cc:5305
+msgid "Welcome to Chinatown"
+msgstr ""
+
+#  level: ""
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:5363
+msgid "Drop the hammer on side of a pentomino and use the switch!"
+msgstr ""
+
+#  level: ""
+#  author: "Ralf Westram" email "amgine at reallysoft.de"
+#: po/level_i18n.cc:5364
+msgid "Drop the hammer on side of a pentomino, not beneath it!"
+msgstr ""


Property changes on: trunk/po/pl.po
___________________________________________________________________
Name: svn:eol-style
   + native

Deleted: trunk/po/uk.gmo
===================================================================
(Binary files differ)



From ral at mail.berlios.de  Mon Nov 23 23:25:06 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Mon, 23 Nov 2009 23:25:06 +0100
Subject: [Enigma-game-svn] r1874 - in trunk: data/gfx/flags25x15 po src/gui
Message-ID: <200911232225.nANMP6W5015396@sheep.berlios.de>

Author: ral
Date: 2009-11-23 23:25:05 +0100 (Mon, 23 Nov 2009)
New Revision: 1874

Modified:
   trunk/data/gfx/flags25x15/pl-shaded.png
   trunk/po/fi.po
   trunk/po/pl.po
   trunk/src/gui/MainMenu.cc
   trunk/src/gui/MainMenu.hh
   trunk/src/gui/widgets.cc
   trunk/src/gui/widgets.hh
Log:
Trunk 1.1: 
- adjusted language flag user paradigm:
  - the selected language flag is highlighted
  - the mouse over flag is highlighted
  - other flags are shaded
  - flag highlighting reflects options menu changes and default selection
- shade Polish flag
- remove old Finnish translation of Aztec Temple


Modified: trunk/data/gfx/flags25x15/pl-shaded.png
===================================================================
(Binary files differ)

Modified: trunk/po/fi.po
===================================================================
--- trunk/po/fi.po	2009-11-23 17:46:46 UTC (rev 1873)
+++ trunk/po/fi.po	2009-11-23 22:25:05 UTC (rev 1874)
@@ -5176,11 +5176,6 @@
 "to be a relic of the ancient Aztec empire. But the temple is in surprisingly "
 "good condition ..."
 msgstr ""
-"Tervetuloa Mexicoon! Kahdeksan tuntia sitten, koneesi saapui \"Coatlicuen\" "
-"lentokent?lle, mik? on pieni kyl? tutkimattoman viidakkomaaston ymp?r?im?n?. "
-"Nyt huomaat itsesi vaikuttavan temppelin edess?, mik? n?ytt?? olevan "
-"antiikkisten Asteekkien aikojen relikti. Mutta temppeli on yll?tt?v?n "
-"hyv?ss? kunnossa ..."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5193,19 +5188,12 @@
 "relic a fortress\", you think, \"this cannot be legal, for Goshers received "
 "funding from the UK Government. I'll try to call him to account!\""
 msgstr ""
-"J?ttim?isten ovien vieress? n?et kroomatun kyltin: \"Restaurointi J. J. "
-"Jumalisten toimesta, Vuonna 1998 jKr\". Ja pienemm?ss? kyltiss? alapuolella "
-"lukee: \"J. J. Jumalisten omaisuutta. L?pikulku kielletty!\". Nyt huomaat "
-"koirankopit, jotka on rakennettu temppelin etupuolen my?t?. \"Jumaliste teki "
-"t?m?n reliktin linnoitukseksi\", ajattelet, \"t?m? ei voi olla laillista, "
-"Jumalisten saamansa Suomen Hallituksen ylennyst? varten. Yrit?n saada h?net  "
-"tunnustamaan!\""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4652
 msgid "This guard doesn?t notice me."
-msgstr "T?m? vartija ei huomaa minua."
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5213,8 +5201,6 @@
 msgid ""
 "This lake was obviously made by Goshers. I think the correct way is south."
 msgstr ""
-"T?m? j?rvi on ilmiselv?sti Jumalisten tekosia. Luulenpa ett? oikea tie on "
-"etel?puolella."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5223,20 +5209,18 @@
 "There's an inscription on the old wall, saying in spanish: \"Careful! What "
 "you touch could be the last thing you touch!\""
 msgstr ""
-"Vanhassa sein?ss? on inskriptio, espanjaksi: \"Varo! Se mihin kosket, voi "
-"olla se viimeinen mihin kosket!\""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4655
 msgid "Chrome sign: \"Control of the beast?s cage.\""
-msgstr "Kroomattu kyltti: \"Pedon ohjauksen h?kki.\""
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4656
 msgid "Oooh, this slope is steep! Try not to touch the skull!"
-msgstr "Huh, t?m? rinne on jyrkk?! ?l? yrit? koskea p??kalloon!"
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5246,9 +5230,6 @@
 "its purpose ... Ah, there's another chrome sign. Goshers seems to favour "
 "chrome signs. It says: \"Natives? prison\"."
 msgstr ""
-"Tuo rakennus n?ytt?? vankilalta. Katsotaan jos voin p??tell? sen "
-"tarkoituksen... Ah, tuossa on toinen kroomattu kyltti. Jumalistella n?ytt?? "
-"olevan suosio kroomatuille kyltille. Siin? lukee: \"Paikallisten vankila\"."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5257,9 +5238,6 @@
 "Getting beyond the prison building was a really good idea. But now you have "
 "to cross this lake. Be thrifty with those boxes!"
 msgstr ""
-"P??seminen vankilarakennuksen toiselle puolelle oli todella hyv? idea. Mutta "
-"nyt sinun t?ytyy ylitt?? t?m? j?rvi. Ole taloudellinen noiden laatikoiden "
-"kanssa!"
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5271,11 +5249,6 @@
 "of the Aztecs. It might be helpful to be accompanied by someone, who knows "
 "the secrets of the jungle and this temple ..."
 msgstr ""
-"Nyt, katsoaakseen vankilan kalteri-ikkunan l?pi, tunnistat paikallisen "
-"naisen vangittuna sinne. Ilmiselv?sti Jumaliste lukitsi kaikki paikalliset "
-"ketk? h?iritsiv?t h?nen \"ty?t??n\"; yritt??kseen p??st? temppeliin ja "
-"tullaakseen rikkaaksi Asteekkien aarteilla. Voi olla hy?dyllist? olla jonkun "
-"kanssa, kuka tiet?? viidakon ja t?m?n temppelin salaisuudet ..."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5286,11 +5259,6 @@
 "and free my people. And even if this is not the case, it's better to be free "
 "than imprisoned. I think I should thank him."
 msgstr ""
-"Sen j?lkeen, kun tuo valkoinen mies vapautti minut vankilasta, h?n ei "
-"todellakaan voi olla niin paha kuin t?m? Jumaliste on. Ehk? h?n haluaa "
-"pys?ytt?? Jumalisten mestaruuden ja vapauttaa ihmiseni. Jopa jos t?m? ei ole "
-"se asia, on parempi olla vapaa kuin vangittu. Luulenpa ett? minun pit?isi "
-"kiitt?? h?nt?."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5300,10 +5268,6 @@
 "Xila!\", you tell him in broken English. After he introduced himself as "
 "well, both of you begin to work out a plan against the evil G. G. Goshers."
 msgstr ""
-"Tapaat englantilaisen seikkailijan vankilan edess?. \"Terve, olen Xila!\", "
-"kerrot h?nelle murskautuneella englannilla. Sen j?lkeen kun h?nkin "
-"puolestaan esitteli itsens?, te molemmat aloititte tekem??n suunnitelmaa "
-"pahaa J. J. Jumalistea vastaan."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5312,44 +5276,42 @@
 "This is a really hard puzzle. The English man will have to help me, if this "
 "enigma is to be solved."
 msgstr ""
-"T?m? on eritt?in vaikea arvoitus. Englantilaisen miehen t?ytyy auttaa minua, "
-"jos t?m?n arvoituksen on tarkoitus tulla ratkaistuksi."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4663
 msgid "You wonder what this switch could trigger."
-msgstr "Ihmettelet, mit? t?m? kytkin laukaisisi."
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4664
 msgid "Xila knows how to drain the lake!"
-msgstr "Xila tiet?? kuinka tyhjennet??n j?rvi!"
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4665
 msgid "You were lucky to find this hole. It prevents you from drowning."
-msgstr "Olit onnekas l?yt??ksesi t?m?n onkalon. Se est?? sinua hukkumasta."
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4666
 msgid "This glass stone must fulfill a purpose ..."
-msgstr "T?m?n lasisen kiven t?ytyy t?ytt?? jonkin merkityksen ..."
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4667
 msgid "It's funny that such a temple should have a side entrance."
-msgstr "On hassua ett? t?ll?isella temppelill? on sis??nk?ynti sivussa."
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4668
 msgid "Be careful! There are sensors in the walls."
-msgstr "Ole varovainen! Seiniss? on sensoreita."
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5360,18 +5322,12 @@
 "very dangerous. Without a sword you'll never be able to enter. Be careful. "
 "There are not only knights, but also thieves."
 msgstr ""
-"Vanhan temppelin j?ttim?isten ovien avautumisen j?lkeen, n?et, ett? "
-"sis??nk?ynti? suojaa 11 keih??ll? aseistautunutta ritaria. N?m? vartijat "
-"ovat eritt?in vaarallisia. Ilman miekkaa et koskaan kykene menem??n sis??n. "
-"Ole varovainen. He eiv?t ole ainostaan ritareita mutta my?s varkaita."
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4670
 msgid "\"Congratulations. You just managed to enter this old Aztec Temple.\""
 msgstr ""
-"\"Onneksi olkoon. Onnistuit juuri saapumaan t?h?n vanhaan Asteekkien "
-"Temppeliin.\""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5380,8 +5336,6 @@
 "\"You've been smarter than I expected. But you'll never enter the treasure "
 "room nor escape from here!\""
 msgstr ""
-"\"Olet ollut viisaampi kuin luulinkaan. Mutta et koskaan p??se aarrehuoneen "
-"luokse tai edes pakenemaan t??lt?!\""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5390,14 +5344,12 @@
 "\"I, Goshers, will certainly be able to rid myself of one of my archenemies "
 "by just killing you!\""
 msgstr ""
-"\"Min?, Jumaliste, on varmasti kykenev? hankkiutumaan eroon yhdest? minun "
-"p??vihollisistani, vain tappamalla sinut!\""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
 #: po/level_i18n.cc:4673
 msgid "\"Run for your life!\""
-msgstr "\"Juokse henkesi edest?!\""
+msgstr ""
 
 #  level: "The Aztec Temple"
 #  author: "Dominik Lehmann" email ""
@@ -5408,10 +5360,6 @@
 "ended the evil career of Gerald Gregory Goshers. Congratulations on the "
 "success of your expedition!"
 msgstr ""
-"Xila ja sin? saavuitte juuri vanhan Asteekkien Temppelin Timanttihuoneeseen. "
-"Viem?ll? Jumalisten takaisin Suomeen ja ilmiantaakseen h?net poliisille, "
-"olet lopettanut Jaska Jorma Jumalisten pahan uransa. Onneksi olkoon "
-"onnistuneesta tutkimusretkest?si!"
 
 #  level: "Meditation Disturbance"
 #  author: "Ronald Lamprecht" email "ral at users.berlios.de"

Modified: trunk/po/pl.po
===================================================================
--- trunk/po/pl.po	2009-11-23 17:46:46 UTC (rev 1873)
+++ trunk/po/pl.po	2009-11-23 22:25:05 UTC (rev 1874)
@@ -1,4 +1,4 @@
-# Polnish translation for Enigma.
+# Polish translation for Enigma.
 # Copyright (C) 20009 Erik
 # This file is distributed under the same license as the PACKAGE package.
 # Erik Jan Kuipers <erik.kuipers at uj.edu.pl>, 2009

Modified: trunk/src/gui/MainMenu.cc
===================================================================
--- trunk/src/gui/MainMenu.cc	2009-11-23 17:46:46 UTC (rev 1873)
+++ trunk/src/gui/MainMenu.cc	2009-11-23 22:25:05 UTC (rev 1874)
@@ -377,15 +377,18 @@
         //BuildHList l(this, Rect(ly, (vminfo->height) - 30, 30, 20), 5);
         BuildHList l(this, Rect(ly, 10, 30, 20), 5);
         //BuildVList l(this, Rect(vminfo->width - 45, 15, 30, 20), 5);
-        language.clear();
-        if(!vshrink)
+        if(!vshrink) {
+            std::string curname = ecl::SysMessageLocaleName();
+            curname = curname.substr(0, curname.find('.'));
             for (size_t i=1; i<NUMENTRIES(nls::languages); ++i) {
                 BorderlessImageButton *but = new BorderlessImageButton(
                     nls::languages[i].flagimage + string("-shaded"),
                     nls::languages[i].flagimage,
-                    nls::languages[i].flagimage, this);
-                language.push_back(l.add(but));
+                    nls::languages[i].flagimage, curname == nls::languages[i].localename, this);
+                l.add(but);
+                flags.push_back(but);
             }
+        }
     }
     
     void MainMenu::draw_background(ecl::GC &gc) 
@@ -451,14 +454,19 @@
     #endif
         } else if (w == quit) {
             Menu::quit();
-        } else if (language.size() > 0) {
+        } else if (flags.size() > 0) {
             for (size_t i=1; i<NUMENTRIES(nls::languages); ++i)
-                if (w == language[i-1]) {
+                if (w == flags[i-1]) {
                     options::SetOption ("Language", nls::languages[i].localename);
                     app.setLanguage(nls::languages[i].localename);
                 }
         } else
             return;
+        // need to update flags
+        std::string curname = ecl::SysMessageLocaleName();
+        curname = curname.substr(0, curname.find('.'));
+        for (int i = 0; i < flags.size(); i++)
+            flags[i]->setState(curname == nls::languages[i+1].localename);
         invalidate_all();
     }
     

Modified: trunk/src/gui/MainMenu.hh
===================================================================
--- trunk/src/gui/MainMenu.hh	2009-11-23 17:46:46 UTC (rev 1873)
+++ trunk/src/gui/MainMenu.hh	2009-11-23 22:25:05 UTC (rev 1874)
@@ -21,7 +21,9 @@
 #define GUI_MAINMENU_HH_INCLUDED
 
 #include "gui/Menu.hh"
+#include "gui/widgets.hh"
 
+#include <list>
 #include <vector>
 
 namespace enigma { namespace gui {
@@ -54,7 +56,7 @@
         Widget *help;
         Widget *quit;
         Widget *lpack;
-        std::vector <Widget*> language;
+        std::vector<BorderlessImageButton*> flags;
     };
 
 /* -------------------- MainHelpMenu -------------------- */

Modified: trunk/src/gui/widgets.cc
===================================================================
--- trunk/src/gui/widgets.cc	2009-11-23 17:46:46 UTC (rev 1873)
+++ trunk/src/gui/widgets.cc	2009-11-23 22:25:05 UTC (rev 1874)
@@ -948,8 +948,8 @@
 /* -------------------- BorderlessImageButton -------------------- */
 
 BorderlessImageButton::BorderlessImageButton(const string &unselected,
-    const string &selected, const string &mouseover, ActionListener *al)
-: fname_sel(selected), fname_unsel(unselected), fname_mouse(mouseover)
+    const string &selected, const string &mouseover, bool isSelected, ActionListener *al)
+: fname_sel(selected), fname_unsel(unselected), fname_mouse(mouseover), state (isSelected)
 {
     set_listener(al);
 }
@@ -962,7 +962,7 @@
 }
 
 void BorderlessImageButton::draw(ecl::GC &gc, const ecl::Rect &r) {
-    string &fname = m_activep ? fname_mouse : (is_pressed() ? fname_sel : fname_unsel);
+    string &fname = m_activep ? fname_mouse : (state ? fname_sel : fname_unsel);
 
     if (Surface *s = enigma::GetImage(fname.c_str())) {
         int w=s->width();
@@ -973,3 +973,11 @@
     }
 }
 
+void BorderlessImageButton::setState(bool isSelected) {
+    state = isSelected;
+    invalidate();
+}
+
+bool BorderlessImageButton::getState() const {
+    return state;
+}

Modified: trunk/src/gui/widgets.hh
===================================================================
--- trunk/src/gui/widgets.hh	2009-11-23 17:46:46 UTC (rev 1873)
+++ trunk/src/gui/widgets.hh	2009-11-23 22:25:05 UTC (rev 1874)
@@ -473,13 +473,17 @@
         BorderlessImageButton(const std::string &unselected,
                               const std::string &selected,
                               const std::string &mouseover,
+                              bool isSelected =false,
                               ActionListener    *al = 0);
         void set_images(const std::string &unselected, const std::string &selected,
                         const std::string &mouseover);
+        void setState(bool isSelected);
+        bool getState() const;
         // Widget interface.
         virtual void draw(ecl::GC &gc, const ecl::Rect &r);
     private:
         std::string fname_sel, fname_unsel, fname_mouse;
+        bool state;
     };
 
 }} // namespace enigma::gui



From R.Lamprecht at T-Online.de  Tue Nov 24 00:00:29 2009
From: R.Lamprecht at T-Online.de (Ronald Lamprecht)
Date: Tue, 24 Nov 2009 00:00:29 +0100
Subject: [Enigma-game-svn]  r1872 - trunk
Message-ID: <4B0B140D.10306@T-Online.de>

As the patch is too large the commit message as a short manual notification:

Trunk 1.1: I18N update
- update translations base to current set of translatable text strings
- add polish as supported language with flagg and an empty po base


From raoul at mail.berlios.de  Tue Nov 24 18:24:18 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Tue, 24 Nov 2009 18:24:18 +0100
Subject: [Enigma-game-svn] r1875 - in trunk/data/levels: enigma_cross
	enigma_experimental enigma_ix
Message-ID: <200911241724.nAOHOIAf025985@sheep.berlios.de>

Author: raoul
Date: 2009-11-24 18:24:17 +0100 (Tue, 24 Nov 2009)
New Revision: 1875

Added:
   trunk/data/levels/enigma_ix/alias01_1.xml
Removed:
   trunk/data/levels/enigma_ix/mecke38_1.xml
Modified:
   trunk/data/levels/enigma_cross/newlevels-1-10.xml
   trunk/data/levels/enigma_experimental/floors_1.xml
   trunk/data/levels/enigma_experimental/index.xml
   trunk/data/levels/enigma_ix/devnull23_1.xml
   trunk/data/levels/enigma_ix/devnull38_1.xml
   trunk/data/levels/enigma_ix/index.xml
Log:
-> Added level "Reflections I" with author credits

-> Updates some levels from devnull with scales floors
--> devnull23 ("more is not less"), devnull38 ("Crabwise III")

-> Added fl_scales to the floor testlevel  



Modified: trunk/data/levels/enigma_cross/newlevels-1-10.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels-1-10.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_cross/newlevels-1-10.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="73" title="Enigma 1.10 new"/>
+  <info enigma="1.10" group="Facets" location="15600" network="false" owner="Enigma Team" release="1" revision="74" title="Enigma 1.10 new"/>
 
   <attributes/>
 
@@ -189,13 +189,13 @@
     <level _seq="181" _title="Wired Strips" _xpath="enigma_viii/ral38_1" author="Ronald Lamprecht" ctrl="force" easy="true" id="20081223ral510" rel="1" rev="151" score="1" target="time" unit="duration"/>
     <level _seq="182" _title="Pentachromos" _xpath="enigma_viii/cel2_1" author="J.Dunne, R.Lamprecht, D.Lehmann, M.Pulley, L.Sch?ller" ctrl="force" easy="false" id="cel2" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="183" _title="Wired Pulls" _xpath="enigma_ix/raoul36_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul36" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="184" _title="Crabwise III" _xpath="enigma_ix/devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="184" _title="Crabwise III" _xpath="enigma_ix/devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="185" _title="Bicolor" _xpath="enigma_ix/devnull31_1" author="/dev/null" ctrl="force" easy="false" id="devnull31" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="186" _title="lower i" _xpath="enigma_ix/devnull39_1" author="/dev/null" ctrl="force" easy="true" id="devnull39" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="187" _title="At the Pool" _xpath="enigma_ix/devnull36_1" author="/dev/null" ctrl="force" easy="true" id="devnull36" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="188" _title="Hide them" _xpath="enigma_ix/devnull44_1" author="/dev/null" ctrl="force" easy="false" id="devnull44" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="189" _title="Crabwise IV" _xpath="enigma_ix/devnull45_1" author="/dev/null" ctrl="force" easy="true" id="devnull45" rel="1" rev="4" score="1" target="time" unit="duration"/>
-    <level _seq="190" _title="more is not less" _xpath="enigma_ix/devnull23_1" author="/dev/null" ctrl="force" easy="true" id="devnull23" rel="1" rev="11" score="1" target="time" unit="duration"/>
+    <level _seq="190" _title="more is not less" _xpath="enigma_ix/devnull23_1" author="/dev/null" ctrl="force" easy="true" id="devnull23" rel="1" rev="13" score="1" target="time" unit="duration"/>
     <level _seq="191" _title="Hip to be Square" _xpath="enigma_ix/devnull37_1" author="/dev/null" ctrl="force" easy="true" id="devnull37" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="192" _title="Across the Waterbyss" _xpath="enigma_ix/harry03_1" author="daydreamer" ctrl="force" easy="false" id="harry03" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="193" _title="Collapsing Building" _xpath="enigma_ix/pulley28_1" author="Mark Pulley" ctrl="force" easy="true" id="20081018pulley001" rel="1" rev="1" score="1" target="time" unit="duration"/>
@@ -217,7 +217,7 @@
     <level _seq="209" _title="Oh nO" _xpath="enigma_ix/devnull43_1" author="/dev/null" ctrl="force" easy="false" id="devnull43" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="210" _title="FizzBuzz" _xpath="enigma_ix/ais10_1" author="Alex Smith" ctrl="force" easy="true" id="ais10" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="211" _title="Changing conditions" _xpath="enigma_ix/devnull01_2" author="/dev/null" ctrl="force" easy="false" id="devnull01" rel="2" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="212" _title="Reflections I" _xpath="enigma_ix/mecke38_1" author="mecke" ctrl="force" easy="true" id="mecke_sess01" rel="1" rev="13" score="1" target="time" unit="duration"/>
+    <level _seq="212" _title="Reflections I" _xpath="enigma_ix/alias01_1" author="Alan Smithee" ctrl="force" easy="true" id="alias01" rel="1" rev="13" score="1" target="time" unit="duration"/>
     <level _seq="213" _title="Tour de France" _xpath="enigma_ix/mecke04_1" author="mecke" ctrl="force" easy="false" id="mecke04" rel="1" rev="12" score="1" target="time" unit="duration"/>
     <level _seq="214" _title="Escape in Chains" _xpath="enigma_ix/duffy184_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy184" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="215" _title="Meditation Sorting" _xpath="enigma_ix/wesley02_1" author="Helge Blohmer" ctrl="force" easy="true" id="20080821wcr001" rel="1" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_experimental/floors_1.xml
===================================================================
--- trunk/data/levels/enigma_experimental/floors_1.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_experimental/floors_1.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="All Floors as of Enigma 1.10" el:subtitle="" el:id="floors"/>
-      <el:version el:score="1" el:release="1" el:revision="2" el:status="experimental"/>
+      <el:version el:score="1" el:release="1" el:revision="3" el:status="experimental"/>
       <el:author  el:name="Raoul Bourquin" el:email=""/>
       <el:copyright>Copyright ? 2009 Raoul Bourquin</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -126,6 +126,13 @@
 {"fl_inverse_gray", _text="fl_inverse_gray"},
 {"fl_rock", _text="fl_rock"},
 {"fl_rock_framed", _text="fl_rock_framed"},
+{"fl_scales", _text="fl_scales, default"},
+{"fl_scales_brick", _text="fl_scales_brick"},
+{"fl_scales_bridgewood", _text="fl_scales_bridgewood"},
+{"fl_scales_concrete", _text="fl_scales_concrete"},
+{"fl_scales_darkgray", _text="fl_scales_darkgray"},
+{"fl_scales_gray", _text="fl_scales_gray"},
+{"fl_scales_platinum", _text="fl_scales_platinum"},
 {"fl_slope", _text="fl_slope, default"},
 {"fl_slope", slope=WEST, shape="pw", _text="fl_slope, slope=WEST, shape=\"pw\""},
 {"fl_slope", slope=SOUTH, shape="ps", _text="fl_slope, slope=SOUTH, shape=\"ps\""},

Modified: trunk/data/levels/enigma_experimental/index.xml
===================================================================
--- trunk/data/levels/enigma_experimental/index.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_experimental/index.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.00" group="Development" location="70300" network="false" owner="Enigma Team" release="1" revision="8" title="Experimental"/>
+  <info enigma="1.00" group="Development" location="70300" network="false" owner="Enigma Team" release="1" revision="9" title="Experimental"/>
 
   <attributes/>
 
@@ -10,7 +10,7 @@
     <level _seq="2" _title="Demo I18N" _xpath="./demo_i18n" author="Ronald Lamprecht" ctrl="force" easy="false" id="20060211ral002" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="3" _title="New API level template" _xpath="./level_template" author="AUTHOR" ctrl="force" easy="false" id="level_template" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="4" _title="All Stones as of Enigma 1.10" _xpath="./stones_1" author="Raoul Bourquin" ctrl="force" easy="false" id="stones" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="5" _title="All Floors as of Enigma 1.10" _xpath="./floors_1" author="Raoul Bourquin" ctrl="force" easy="false" id="floors" rel="1" rev="1" score="1" target="time" unit="duration"/>
+    <level _seq="5" _title="All Floors as of Enigma 1.10" _xpath="./floors_1" author="Raoul Bourquin" ctrl="force" easy="false" id="floors" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="6" _title="All Items as of Enigma 1.10" _xpath="./items_1" author="Raoul Bourquin" ctrl="force" easy="false" id="items" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="7" _title="Libsoko - Test" _xpath="./test_libsoko" author="Andreas Lochmann" ctrl="force" easy="true" id="test_libsoko" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="8" _title="TODO" _xpath="lib/todo" author="Martin Hawlisch" ctrl="force" easy="false" id="todo" rel="1" rev="1" score="1" target="time" unit="duration"/>

Added: trunk/data/levels/enigma_ix/alias01_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/alias01_1.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_ix/alias01_1.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -0,0 +1,96 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
+<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
+  <el:protected>
+    <el:info el:type="level">
+      <el:identity el:title="Reflections I" el:subtitle="" el:id="alias01"/>
+      <el:version el:score="1" el:release="1" el:revision="13" el:status="released"/>
+      <el:author  el:name="Alan Smithee" el:email="" el:homepage=""/>
+      <el:copyright>Copyright ? 2009 Alan Smithee</el:copyright>
+      <el:license el:type="GPL v2.0 or above" el:open="true"/>
+      <el:compatibility el:enigma="1.10"/>
+      <el:modes el:easy="true" el:single="true" el:network="true"/>
+      <el:score el:easy="-" el:difficult="-"/>
+    </el:info>
+    <el:luamain><![CDATA[
+wo["AllowSuicide"] = false
+
+ti[" "] = {"fl_rock"}
+ti["~"] = {"fl_water"}
+ti["_"] = {"fl_swamp"}
+ti["."] = {"st_flat_breakable"}
+ti["x"] = {"st_rawglass_quad"}
+ti["#"] = {"st_granite"}
+ti["N"] = {"st_laser_n", "laserN"}
+ti["n"] = {"st_switch_white", target = {"laserN", "whitesource"}}
+ti["S"] = {"st_laser_s", "laserS"}
+ti["s"] = {"st_switch_black", target = "laserS"}
+ti["B"] = {"st_passage_black_frame"}
+ti["W"] = {"st_passage_white_frame"}
+ti["M"] = {"st_mirror_slab_s", movable = true}
+ti["m"] = ti["_"] .. ti["M"]
+ti["T"] = {"st_thief", "thieves#"}
+ti["t"] = {"st_thief"}
+ti["C"] = {"st_chess_black"}
+ti["a"] = {"it_magicwand"}
+ti[";"] = {"it_dynamite"}
+ti[":"] = ti["."] .. ti[";"]
+ti["O"] = {"st_oxyd_a", oxydcolor = OXYD_RED}
+ti["@"] = {"#ac_marble_black"}
+ti["*"] = {"#ac_marble_white"}
+ti["w"] = ti["*"] .. {"it_vortex_closed", "whitesource", destination = "whitegate"}
+ti["u"] = {"it_vortex_closed", "whitegate", autoclose=true}
+if wo["IsDifficult"] then
+    ti["I"] = {"st_stoneimpulse_movable"}
+    ti["+"] = {"st_flat_movable"}
+    ti["-"] = {"fl_water"}
+    ti["<"] = {"fl_inverse"}
+    ti["D"] = ti[";"]
+    ti["!"] = ti[" "]
+    ti["y"] = ti["~"] .. ti["w"]
+    ti["v"] = ti["u"]
+    ti["d"] = ti[";"]
+    ti["A"] = ti["a"]
+    ti["="] = {"it_burnable_oil"}
+    ti["e"] = ti[" "]
+else
+    ti["I"] = {"st_stoneimpulse"}
+    ti["+"] = {"st_flat_breakable"}
+    ti["-"] = ti[" "]
+    ti["D"] = {"st_dispenser_dynamite"}
+    ti["<"] = {"fl_yinyang_yang_invisible"}
+    ti["!"] = ti[";"]
+    ti["y"] = ti["*"]
+    ti["v"] = ti[" "]
+    ti["d"] = ti[" "]
+    ti["A"] = ti[" "]
+    ti["="] = ti[" "]
+    ti["e"] = {"it_spade"}
+end
+
+wo(ti, " ", {
+    "##S###############O#",
+    "#;........#D.#  e#W#",
+    "#........M##.#!# B #",
+    "#.:..M...:.....# xI#",
+    "#.x:..#....##.M..#=#",
+    "s at .-.;.+.x.+.....#A#",
+    "################## #",
+    "ny   a   ~      v#d#",
+    "#     <     <<_  #=#",
+    "# TTTmTTTTTTTTTTTxI#",
+    "# ~a     _<< <a< W #",
+    "#at       <C < < #B#",
+    "##N##II###########O#"})
+
+local thieves = no["thieves#*"]:shuffle()
+if wo["IsDifficult"] then
+    wo[thieves:sub(2)] = ti[";"]
+end
+ ]]></el:luamain>
+    <el:i18n>
+      <el:string el:key="title">
+        <el:english el:translate="false"/>
+      </el:string>
+    </el:i18n>
+  </el:protected>
+</el:level>


Property changes on: trunk/data/levels/enigma_ix/alias01_1.xml
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: trunk/data/levels/enigma_ix/devnull23_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/devnull23_1.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_ix/devnull23_1.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="more is not less" el:subtitle="" el:id="devnull23"/>
-      <el:version el:score="1" el:release="1" el:revision="11" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="13" el:status="released"/>
       <el:author  el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2009 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -12,32 +12,30 @@
       <el:score el:easy="2:00" el:difficult="9:00"/>
     </el:info>
     <el:luamain><![CDATA[
-wo["ConserveLevel"] = true
-
 ti["  "] = {"fl_gray_framed", friction = 4.2}
 ti[" ."] = {"fl_water"}
 ti[" :"] = {"fl_gray", friction = 2.8}
 ti[" ^"] = {"fl_slope_pn"}
 ti["w "] = {"st_plaster_movable"}
-ti[" 0"] = {"it_trigger", target = "door0"}
+ti[" 0"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door0"}
 ti["0 "] = {"st_door_b", "door0", state = CLOSED}
-ti[" 1"] = {"it_trigger", target = "door1"}
+ti[" 1"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door1"}
 ti["1 "] = {"st_door_b", "door1", state = CLOSED}
-ti[" 2"] = {"it_trigger", target = "door2"}
+ti[" 2"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door2"}
 ti["2 "] = {"st_door_b", "door2", state = CLOSED}
-ti[" 3"] = {"it_trigger", target = "door3#*"}
+ti[" 3"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door3#*"}
 ti["3 "] = {"st_door_b", "door3#", state = CLOSED}
-ti[" 4"] = {"it_trigger", target = "door4#*"}
+ti[" 4"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door4#*"}
 ti["4 "] = {"st_door_b", "door4#", state = CLOSED}
-ti[" 5"] = {"it_trigger", target = {"door5", "door6"}}
+ti[" 5"] = {"fl_scales", flavor = "gray", min = 0.9, target = {"door5", "door6"}}
 ti["5 "] = {"st_door_b", "door5", state = CLOSED}
 ti["6 "] = {"st_door_b", "door6", state = OPEN}
 ti["7 "] = {"st_door_b", "door7", state = CLOSED}
-ti[" 7"] = {"it_trigger", target = {"laser0", "door7"}}
+ti[" 7"] = {"fl_scales", flavor = "gray", min = 0.9, target = {"laser0", "door7"}}
 ti["8 "] = {"st_door_b", "door8#", state = CLOSED}
-ti[" 8"] = {"it_trigger", target = "door8#*"}
+ti[" 8"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door8#*"}
 ti["9 "] = {"st_door_b", "door9#", state = CLOSED}
-ti[" 9"] = {"it_trigger", target = "door9#*"}
+ti[" 9"] = {"fl_scales", flavor = "gray", min = 0.9, target = "door9#*"}
 ti["@ "] = {"#ac_marble_black"}
 ti["a "] = {"#ac_pearl", owner = DEFAULT, controllers = CTRL_NONE, essential = INDISPENSABLE}
 ti["l "] = {"st_laser", "laser0", orientation = NORTH, state = OFF}

Modified: trunk/data/levels/enigma_ix/devnull38_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/devnull38_1.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_ix/devnull38_1.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -3,7 +3,7 @@
   <el:protected>
     <el:info el:type="level">
       <el:identity el:title="Crabwise III" el:subtitle="" el:id="devnull38"/>
-      <el:version el:score="1" el:release="1" el:revision="4" el:status="released"/>
+      <el:version el:score="1" el:release="1" el:revision="6" el:status="released"/>
       <el:author el:name="/dev/null" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2009 dev0</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>
@@ -32,9 +32,9 @@
 ti["W"] = {"st_puzzle_blue", "pA", connections = "w", intensity = 0}
 ti["-"] = {"st_puzzle_blue", "pB", connections = "ew", intensity = 0}
 ti["E"] = {"st_puzzle_blue", "pC", connections = "e", intensity = 0}
-ti["a"] = {"it_trigger", target = "toggleDoors", action = "signal"}
+ti["a"] = {"fl_scales", target = "toggleDoors", action = "signal", flavor= "concrete", min = 0.9}
 ti["A"] = {"st_door_a", "doors#"}
-ti["b"] = {"it_trigger", target = "toggleBridges", action = "signal"}
+ti["b"] = {"fl_scales", target = "toggleBridges", action = "signal", flavor= "concrete", min = 0.9}
 ti["B"] = {"fl_bridge", "bridges#"}
 ti["1"] = {"st_pull", "nav01"}
 ti["2"] = {"st_swap"}

Modified: trunk/data/levels/enigma_ix/index.xml
===================================================================
--- trunk/data/levels/enigma_ix/index.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_ix/index.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <index xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd">
 
-  <info enigma="1.10" group="Enigma" location="11100" network="false" owner="Enigma Team" release="1" revision="16" title="Enigma IX"/>
+  <info enigma="1.10" group="Enigma" location="11100" network="false" owner="Enigma Team" release="1" revision="17" title="Enigma IX"/>
 
   <attributes/>
 
@@ -17,13 +17,13 @@
     <level _seq="9" _title="Behind Glass" _xpath="./rudolf01_1" author="Rudolf" ctrl="force" easy="false" id="rudolf01" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="10" _title="Perennial Creek" _xpath="./pulley20_2" author="Mark Pulley" ctrl="force" easy="true" id="20080614pulley001" rel="2" rev="2" score="2" target="time" unit="duration"/>
     <level _seq="11" _title="Wired Pulls" _xpath="./raoul36_1" author="Raoul Bourquin" ctrl="force" easy="true" id="raoul36" rel="1" rev="1" score="1" target="time" unit="duration"/>
-    <level _seq="12" _title="Crabwise III" _xpath="./devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="4" score="1" target="time" unit="duration"/>
+    <level _seq="12" _title="Crabwise III" _xpath="./devnull38_1" author="/dev/null" ctrl="force" easy="true" id="devnull38" rel="1" rev="6" score="1" target="time" unit="duration"/>
     <level _seq="13" _title="Bicolor" _xpath="./devnull31_1" author="/dev/null" ctrl="force" easy="false" id="devnull31" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="14" _title="lower i" _xpath="./devnull39_1" author="/dev/null" ctrl="force" easy="true" id="devnull39" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="15" _title="At the Pool" _xpath="./devnull36_1" author="/dev/null" ctrl="force" easy="true" id="devnull36" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="16" _title="Hide them" _xpath="./devnull44_1" author="/dev/null" ctrl="force" easy="false" id="devnull44" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="17" _title="Crabwise IV" _xpath="./devnull45_1" author="/dev/null" ctrl="force" easy="true" id="devnull45" rel="1" rev="4" score="1" target="time" unit="duration"/>
-    <level _seq="18" _title="more is not less" _xpath="./devnull23_1" author="/dev/null" ctrl="force" easy="true" id="devnull23" rel="1" rev="11" score="1" target="time" unit="duration"/>
+    <level _seq="18" _title="more is not less" _xpath="./devnull23_1" author="/dev/null" ctrl="force" easy="true" id="devnull23" rel="1" rev="13" score="1" target="time" unit="duration"/>
     <level _seq="19" _title="Hip to be Square" _xpath="./devnull37_1" author="/dev/null" ctrl="force" easy="true" id="devnull37" rel="1" rev="3" score="1" target="time" unit="duration"/>
     <level _seq="20" _title="Across the Waterbyss" _xpath="./harry03_1" author="daydreamer" ctrl="force" easy="false" id="harry03" rel="1" rev="4" score="1" target="time" unit="duration"/>
     <level _seq="21" _title="Collapsing Building" _xpath="./pulley28_1" author="Mark Pulley" ctrl="force" easy="true" id="20081018pulley001" rel="1" rev="1" score="1" target="time" unit="duration"/>
@@ -45,7 +45,7 @@
     <level _seq="37" _title="Oh nO" _xpath="./devnull43_1" author="/dev/null" ctrl="force" easy="false" id="devnull43" rel="1" rev="1" score="1" target="time" unit="duration"/>
     <level _seq="38" _title="FizzBuzz" _xpath="./ais10_1" author="Alex Smith" ctrl="force" easy="true" id="ais10" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="39" _title="Changing conditions" _xpath="./devnull01_2" author="/dev/null" ctrl="force" easy="false" id="devnull01" rel="2" rev="5" score="1" target="time" unit="duration"/>
-    <level _seq="40" _title="Reflections I" _xpath="./mecke38_1" author="mecke" ctrl="force" easy="true" id="mecke_sess01" rel="1" rev="13" score="1" target="time" unit="duration"/>
+    <level _seq="40" _title="Reflections I" _xpath="./alias01_1" author="Alan Smithee" ctrl="force" easy="true" id="alias01" rel="1" rev="13" score="1" target="time" unit="duration"/>
     <level _seq="41" _title="Tour de France" _xpath="./mecke04_1" author="mecke" ctrl="force" easy="false" id="mecke04" rel="1" rev="12" score="1" target="time" unit="duration"/>
     <level _seq="42" _title="Escape in Chains" _xpath="./duffy184_1" author="Jacob Scott" ctrl="force" easy="true" id="duffy184" rel="1" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="43" _title="Meditation Sorting" _xpath="./wesley02_1" author="Helge Blohmer" ctrl="force" easy="true" id="20080821wcr001" rel="1" rev="3" score="1" target="time" unit="duration"/>

Deleted: trunk/data/levels/enigma_ix/mecke38_1.xml
===================================================================
--- trunk/data/levels/enigma_ix/mecke38_1.xml	2009-11-23 22:25:05 UTC (rev 1874)
+++ trunk/data/levels/enigma_ix/mecke38_1.xml	2009-11-24 17:24:17 UTC (rev 1875)
@@ -1,96 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
-<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
-  <el:protected>
-    <el:info el:type="level">
-      <el:identity el:title="Reflections I" el:subtitle="" el:id="mecke_sess01"/>
-      <el:version el:score="1" el:release="1" el:revision="13" el:status="released"/>
-      <el:author  el:name="mecke" el:email="" el:homepage=""/>
-      <el:copyright>Copyright ? 2009 mecke, dev0</el:copyright>
-      <el:license el:type="GPL v2.0 or above" el:open="true"/>
-      <el:compatibility el:enigma="1.10"/>
-      <el:modes el:easy="true" el:single="true" el:network="true"/>
-      <el:score el:easy="-" el:difficult="-"/>
-    </el:info>
-    <el:luamain><![CDATA[
-wo["AllowSuicide"] = false
-
-ti[" "] = {"fl_rock"}
-ti["~"] = {"fl_water"}
-ti["_"] = {"fl_swamp"}
-ti["."] = {"st_flat_breakable"}
-ti["x"] = {"st_rawglass_quad"}
-ti["#"] = {"st_granite"}
-ti["N"] = {"st_laser_n", "laserN"}
-ti["n"] = {"st_switch_white", target = {"laserN", "whitesource"}}
-ti["S"] = {"st_laser_s", "laserS"}
-ti["s"] = {"st_switch_black", target = "laserS"}
-ti["B"] = {"st_passage_black_frame"}
-ti["W"] = {"st_passage_white_frame"}
-ti["M"] = {"st_mirror_slab_s", movable = true}
-ti["m"] = ti["_"] .. ti["M"]
-ti["T"] = {"st_thief", "thieves#"}
-ti["t"] = {"st_thief"}
-ti["C"] = {"st_chess_black"}
-ti["a"] = {"it_magicwand"}
-ti[";"] = {"it_dynamite"}
-ti[":"] = ti["."] .. ti[";"]
-ti["O"] = {"st_oxyd_a", oxydcolor = OXYD_RED}
-ti["@"] = {"#ac_marble_black"}
-ti["*"] = {"#ac_marble_white"}
-ti["w"] = ti["*"] .. {"it_vortex_closed", "whitesource", destination = "whitegate"}
-ti["u"] = {"it_vortex_closed", "whitegate", autoclose=true}
-if wo["IsDifficult"] then
-    ti["I"] = {"st_stoneimpulse_movable"}
-    ti["+"] = {"st_flat_movable"}
-    ti["-"] = {"fl_water"}
-    ti["<"] = {"fl_inverse"}
-    ti["D"] = ti[";"]
-    ti["!"] = ti[" "]
-    ti["y"] = ti["~"] .. ti["w"]
-    ti["v"] = ti["u"]
-    ti["d"] = ti[";"]
-    ti["A"] = ti["a"]
-    ti["="] = {"it_burnable_oil"}
-    ti["e"] = ti[" "]
-else
-    ti["I"] = {"st_stoneimpulse"}
-    ti["+"] = {"st_flat_breakable"}
-    ti["-"] = ti[" "]
-    ti["D"] = {"st_dispenser_dynamite"}
-    ti["<"] = {"fl_yinyang_yang_invisible"}
-    ti["!"] = ti[";"]
-    ti["y"] = ti["*"]
-    ti["v"] = ti[" "]
-    ti["d"] = ti[" "]
-    ti["A"] = ti[" "]
-    ti["="] = ti[" "]
-    ti["e"] = {"it_spade"}
-end
-
-wo(ti, " ", {
-    "##S###############O#",
-    "#;........#D.#  e#W#",
-    "#........M##.#!# B #",
-    "#.:..M...:.....# xI#",
-    "#.x:..#....##.M..#=#",
-    "s at .-.;.+.x.+.....#A#",
-    "################## #",
-    "ny   a   ~      v#d#",
-    "#     <     <<_  #=#",
-    "# TTTmTTTTTTTTTTTxI#",
-    "# ~a     _<< <a< W #",
-    "#at       <C < < #B#",
-    "##N##II###########O#"})
-
-local thieves = no["thieves#*"]:shuffle()
-if wo["IsDifficult"] then
-    wo[thieves:sub(2)] = ti[";"]
-end
- ]]></el:luamain>
-    <el:i18n>
-      <el:string el:key="title">
-        <el:english el:translate="false"/>
-      </el:string>
-    </el:i18n>
-  </el:protected>
-</el:level>



From ral at mail.berlios.de  Tue Nov 24 20:07:20 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Tue, 24 Nov 2009 20:07:20 +0100
Subject: [Enigma-game-svn] r1876 - in trunk: data/levels/enigma_demolevels
	data/levels/enigma_ix data/levels/pentomino_i doc/reference etc
Message-ID: <200911241907.nAOJ7Kh6016795@sheep.berlios.de>

Author: ral
Date: 2009-11-24 20:07:10 +0100 (Tue, 24 Nov 2009)
New Revision: 1876

Modified:
   trunk/data/levels/enigma_demolevels/
   trunk/data/levels/enigma_ix/
   trunk/data/levels/pentomino_i/
   trunk/doc/reference/enigma-ref.texi
   trunk/etc/mingw32-dist.sh.in
Log:
Trunk 1.1: 
- refman: startup switch --redirect
- update mingw32-dist script
- some missing svn:ignore properties


Property changes on: trunk/data/levels/enigma_demolevels
___________________________________________________________________
Name: svn:ignore
   + Makefile.in Makefile



Property changes on: trunk/data/levels/enigma_ix
___________________________________________________________________
Name: svn:ignore
   + Makefile.in Makefile



Property changes on: trunk/data/levels/pentomino_i
___________________________________________________________________
Name: svn:ignore
   + Makefile.in Makefile


Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-11-24 17:24:17 UTC (rev 1875)
+++ trunk/doc/reference/enigma-ref.texi	2009-11-24 19:07:10 UTC (rev 1876)
@@ -242,6 +242,13 @@
 You always need to call Enigma with the above switch to use this new set up.
 Remember that a path with spaces needs to be quoted.
 
+ at item @b{- at w{}-redirect}
+Redirect the @samp{stdout} and @samp{stderr} to files named @samp{Output.log}
+and @samp{Error.log} on the standard user path (@pxref{Locating Resources}).
+For Windows this option is always @code{true}, but the usage of this option
+is useful on any operating system if Enigma is started via a desktop icon or
+a menu button.
+
 @item @b{- at w{}-showfps}
 Show the framerate (FPS) during the game.
 

Modified: trunk/etc/mingw32-dist.sh.in
===================================================================
--- trunk/etc/mingw32-dist.sh.in	2009-11-24 17:24:17 UTC (rev 1875)
+++ trunk/etc/mingw32-dist.sh.in	2009-11-24 19:07:10 UTC (rev 1876)
@@ -95,8 +95,6 @@
     mkdir $DDIR/data/soundsets 
     mkdir $DDIR/data/soundsets/enigma 
     cp -p $SDIR/data/soundsets/enigma/*.wav $DDIR/data/soundsets/enigma
-    mkdir $DDIR/data/thumbs
-    cp -p $SDIR/data/thumbs/README $DDIR/data/thumbs
     
     echo "... copying locales:"
     mkdir $DDIR/data/locale



From ral at mail.berlios.de  Wed Nov 25 15:20:38 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 25 Nov 2009 15:20:38 +0100
Subject: [Enigma-game-svn] r1877 - trunk/src/gui
Message-ID: <200911251420.nAPEKc9r011219@sheep.berlios.de>

Author: ral
Date: 2009-11-25 15:20:37 +0100 (Wed, 25 Nov 2009)
New Revision: 1877

Modified:
   trunk/src/gui/MainMenu.cc
Log:
Trunk 1.1: 
- fix 1874: crash after resolution changes after first action in main menu


Modified: trunk/src/gui/MainMenu.cc
===================================================================
--- trunk/src/gui/MainMenu.cc	2009-11-24 19:07:10 UTC (rev 1876)
+++ trunk/src/gui/MainMenu.cc	2009-11-25 14:20:37 UTC (rev 1877)
@@ -377,6 +377,7 @@
         //BuildHList l(this, Rect(ly, (vminfo->height) - 30, 30, 20), 5);
         BuildHList l(this, Rect(ly, 10, 30, 20), 5);
         //BuildVList l(this, Rect(vminfo->width - 45, 15, 30, 20), 5);
+        flags.clear();  // remove old flags on screen resolution changes
         if(!vshrink) {
             std::string curname = ecl::SysMessageLocaleName();
             curname = curname.substr(0, curname.find('.'));
@@ -467,6 +468,7 @@
         curname = curname.substr(0, curname.find('.'));
         for (int i = 0; i < flags.size(); i++)
             flags[i]->setState(curname == nls::languages[i+1].localename);
+                
         invalidate_all();
     }
     



From ral at mail.berlios.de  Thu Nov 26 00:11:26 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Thu, 26 Nov 2009 00:11:26 +0100
Subject: [Enigma-game-svn] r1878 - in trunk: data data/schemas src/items
	src/stones
Message-ID: <200911252311.nAPNBQ0B020620@sheep.berlios.de>

Author: ral
Date: 2009-11-26 00:11:24 +0100 (Thu, 26 Nov 2009)
New Revision: 1878

Modified:
   trunk/data/models-2d.lua
   trunk/data/schemas/objects.xml
   trunk/src/items/SimpleItems.cc
   trunk/src/items/SimpleItems.hh
   trunk/src/stones/FloppySwitch.cc
   trunk/src/stones/FloppySwitch.hh
   trunk/src/stones/KeySwitch.cc
   trunk/src/stones/KeySwitch.hh
Log:
Trunk 1.1:
- st_key, st_floppy: avoid accidential actor shattering on door passages
  - add attribute "secure", default "true" in Enigma mode, "false" otherwise
  - do not toggle in secure mode when hit by an actor that is located on one
    the target grids
- it_key, st_key: make key code visible
  - add attribute "invisible", default "true"
  - a visible key will show its code while being part of the inventory
  - a visible key stone will show its code directly
  - visibility is inherited: 
      - once a visible key is plugged into an invisible key stone, the stone
        becomes visible
      - once an invisible key is plugged into a visible key stone, the key
        becomes visible when reinserted into the inventory
Note:
- images for visible key items and stones are still missing
- secure key and floppy stones do not keep callback functions from closing
  doors on actor positions.


Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/data/models-2d.lua	2009-11-25 23:11:24 UTC (rev 1878)
@@ -592,9 +592,14 @@
 -------------------------
 
 do
-    DefAlias("it-key_a", "it-key")
-    DefAlias("it-key_b", "it-key")
-    DefAlias("it-key_c", "it-key")
+    DefAlias("it_key_1", "it_key")
+    DefAlias("it_key_2", "it_key")
+    DefAlias("it_key_3", "it_key")
+    DefAlias("it_key_4", "it_key")
+    DefAlias("it_key_5", "it_key")
+    DefAlias("it_key_6", "it_key")
+    DefAlias("it_key_7", "it_odometer")
+    DefAlias("it_key_8", "it_key")
 end
 
 --------------------------------------------------------------
@@ -894,6 +899,25 @@
     DefStone("st_yinyang_inactive", "sh_round")
 end
 
+do
+    DefAlias("st_key_1_off", "st_key_off")
+    DefAlias("st_key_2_off", "st_key_off")
+    DefAlias("st_key_3_off", "st_key_off")
+    DefAlias("st_key_4_off", "st_key_off")
+    DefAlias("st_key_5_off", "st_key_off")
+    DefAlias("st_key_6_off", "st_key_off")
+    DefAlias("st_key_7_off", "st_floppy_off")
+    DefAlias("st_key_8_off", "st_key_off")
+    DefAlias("st_key_1_on", "st_key_on")
+    DefAlias("st_key_2_on", "st_key_on")
+    DefAlias("st_key_3_on", "st_key_on")
+    DefAlias("st_key_4_on", "st_key_on")
+    DefAlias("st_key_5_on", "st_key_on")
+    DefAlias("st_key_6_on", "st_key_on")
+    DefAlias("st_key_7_on", "st_floppy_on")
+    DefAlias("st_key_8_on", "st_key_on")
+end
+
 ---------------------
 -- Animated stones --
 ---------------------

Modified: trunk/data/schemas/objects.xml
===================================================================
--- trunk/data/schemas/objects.xml	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/data/schemas/objects.xml	2009-11-25 23:11:24 UTC (rev 1878)
@@ -1021,6 +1021,7 @@
     <object name="it_hammer_new" init="true"/>
     <object name="it_key">
       <attr name="code"/>
+      <attr name="invisible" default="true"/>
     </object>
     <object name="it_landmine"/>
     <object name="it_magicwand"/>
@@ -1721,6 +1722,7 @@
       <attr name="burnable" value="true"/>
     </object>
     <object name="st_floppy">
+      <attr name="secure" default="true"/>
       <msg name="on"/>
       <msg name="off"/>
       <msg name="signal"/>
@@ -1795,6 +1797,8 @@
     </object>
     <object name="st_key">
       <attr name="code"/>
+      <attr name="secure" default="true"/>
+      <attr name="invisible" default="true"/>
       <msg name="on"/>
       <msg name="off"/>
       <msg name="signal"/>

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/src/items/SimpleItems.cc	2009-11-25 23:11:24 UTC (rev 1878)
@@ -235,6 +235,29 @@
         {"it_flag_white", it_flag_white,  itf_none, 0.0},
     };
 
+/* -------------------- Key -------------------- */
+
+    Key::Key() {
+    }
+    
+    void Key::setAttr(const string& key, const Value &val) {
+        Item::setAttr(key, val);
+        if (key == "invisible" || key == "code") {
+            player::RedrawInventory();
+        }
+    }
+    
+    std::string Key::get_inventory_model() {
+        bool showCode = !getAttr("invisible").to_bool();
+        int code = getAttr("code");
+        if (showCode && code >= 1 && code <= 8)
+            return ecl::strf("it_key_%d", code);
+        else
+            return "it_key";        
+    }
+    
+    DEF_ITEMTRAITS(Key, "it_key", it_key);
+    
 /* -------------------- Pencil -------------------- */
 
     Pencil::Pencil() {

Modified: trunk/src/items/SimpleItems.hh
===================================================================
--- trunk/src/items/SimpleItems.hh	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/src/items/SimpleItems.hh	2009-11-25 23:11:24 UTC (rev 1878)
@@ -174,8 +174,21 @@
     /**
      * Key
      */
-    DEF_ITEM(Key, "it_key", it_key);
+    class Key : public Item {
+        CLONEOBJ(Key);
+        DECL_ITEMTRAITS;
 
+    public:
+        Key();
+        
+        // Object interface
+        virtual void setAttr(const string& key, const Value &val);
+        
+        // Item interface
+        virtual std::string get_inventory_model();
+    };
+
+
     /**
      * MagicWand
      */

Modified: trunk/src/stones/FloppySwitch.cc
===================================================================
--- trunk/src/stones/FloppySwitch.cc	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/src/stones/FloppySwitch.cc	2009-11-25 23:11:24 UTC (rev 1878)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2007,2008 Ronald Lamprecht
+ * Copyright (C) 2007,2008,2009 Ronald Lamprecht
  * Copyright (C) 2008 Raoul Bourquin
  *
  * This program is free software; you can redistribute it and/or
@@ -28,6 +28,13 @@
     FloppySwitch::FloppySwitch() : Stone () {
     }
 
+    void FloppySwitch::setAttr(const string& key, const Value &val) {
+        if (key == "target") {
+            Stone::setAttr("destination", val);
+        }
+        Stone::setAttr(key, val);
+    }
+    
     void FloppySwitch::setState(int extState) {
         if (isDisplayable()) {
             if (extState != state) {
@@ -46,17 +53,29 @@
 
     void FloppySwitch::actor_hit(const StoneContact &sc) {
         if (enigma::Inventory *inv = player::GetInventory(sc.actor)) {
-            if (state == ON) {
-                if (!inv->is_full()) {
-                    inv->add_item (MakeItem("it_floppy"));
-                    setState(OFF);
+            const GridPos apos = sc.actor->get_gridpos();
+            bool safe = true;
+            ecl::V2 dest;
+            int idx = 0;
+            if (server::EnigmaCompatibility >= 1.10 && getAttr("secure").to_bool()) {
+                while (getDestinationByIndex(idx++, dest)) {
+                    if (apos == (GridPos)dest)
+                        safe = false;
                 }
             }
-            else if (player::WieldedItemIs (sc.actor, "it_floppy")) {
-                DisposeObject(inv->yield_first());
-                setState(ON);
+            if (safe) {
+                if (state == ON) {
+                    if (!inv->is_full()) {
+                        inv->add_item (MakeItem("it_floppy"));
+                        setState(OFF);
+                    }
+                }
+                else if (player::WieldedItemIs (sc.actor, "it_floppy")) {
+                    DisposeObject(inv->yield_first());
+                    setState(ON);
+                }
+                player::RedrawInventory (inv);
             }
-            player::RedrawInventory (inv);
         }
     }
 

Modified: trunk/src/stones/FloppySwitch.hh
===================================================================
--- trunk/src/stones/FloppySwitch.hh	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/src/stones/FloppySwitch.hh	2009-11-25 23:11:24 UTC (rev 1878)
@@ -43,6 +43,9 @@
     public:
         FloppySwitch();
 
+        // Object interface
+        virtual void setAttr(const string& key, const Value &val);
+
         // StateObject interface
         virtual void setState(int extState);
 

Modified: trunk/src/stones/KeySwitch.cc
===================================================================
--- trunk/src/stones/KeySwitch.cc	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/src/stones/KeySwitch.cc	2009-11-25 23:11:24 UTC (rev 1878)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2007,2008 Ronald Lamprecht
+ * Copyright (C) 2007,2008,2009 Ronald Lamprecht
  * Copyright (C) 2008 Raoul Bourquin
  *
  * This program is free software; you can redistribute it and/or
@@ -28,6 +28,24 @@
     KeySwitch::KeySwitch() : Stone () {
     }
 
+    void KeySwitch::setAttr(const string& key, const Value &val) {
+        if (key == "target") {
+            Stone::setAttr("destination", val);
+        } else if (key == "invisible") {
+            if (isDisplayable() && (getAttr("invisible").to_bool() != val.to_bool())) {
+                Stone::setAttr(key, val);
+                init_model();
+                return; 
+            }
+        } else if (key == "code") {
+            Stone::setAttr(key, val);
+            if (isDisplayable())
+                init_model();
+            return;            
+        }
+        Stone::setAttr(key, val);
+    }
+    
     void KeySwitch::setState(int extState) {
         if (isDisplayable()) {
             if (state == OFF && extState != state) {
@@ -46,7 +64,12 @@
     }
 
     void KeySwitch::init_model() {
-        set_model(ecl::strf("st_key_%s", state == ON ? "on" : "off"));
+        bool showCode = !getAttr("invisible").to_bool();
+        int code = getAttr("code");
+        if (showCode && code >= 1 && code <= 8)
+            set_model(ecl::strf("st_key_%d_%s", code, state == ON ? "on" : "off"));
+        else
+            set_model(ecl::strf("st_key_%s", state == ON ? "on" : "off"));
     }
 
     void KeySwitch::actor_hit(const StoneContact &sc) {
@@ -57,21 +80,35 @@
         bool toggle = false;
 
         if (server::GameCompatibility == enigma::GAMET_ENIGMA) {
-            if (state == ON) {
-                if (!inv->is_full()) {
-                    Item *key = MakeItem("it_key");
-                    key->setAttr("code", getAttr("code"));
-                    inv->add_item(key);
+            const GridPos apos = sc.actor->get_gridpos();
+            bool safe = true;
+            ecl::V2 dest;
+            int idx = 0;
+            if (server::EnigmaCompatibility >= 1.10 && getAttr("secure").to_bool()) {
+                while (getDestinationByIndex(idx++, dest)) {
+                    if (apos == (GridPos)dest)
+                        safe = false;
+                }
+            }
+            if (safe) {
+                if (state == ON) {
+                    if (!inv->is_full()) {
+                        Item *key = MakeItem("it_key");
+                        key->setAttr("code", getAttr("code"));
+                        key->setAttr("invisible", getAttr("invisible"));
+                        inv->add_item(key);
+                        toggle = true;
+                    }
+                } else if (check_matching_key(inv)) {
+                    Item * it  = inv->yield_first();
+                    if (!(it->getAttr("invisible").to_bool()))
+                        setAttr("invisible", false);
+                    DisposeObject(it);
                     toggle = true;
                 }
+                player::RedrawInventory (inv);
             }
-            else if (check_matching_key(inv)) {
-                DisposeObject(inv->yield_first());
-                toggle = true;
-            }
-            player::RedrawInventory (inv);
-        }
-        else {
+        } else {
             if (check_matching_key(inv))
                 toggle = true;
         }
@@ -84,8 +121,7 @@
          return "metal";
     }
 
-    bool KeySwitch::check_matching_key(enigma::Inventory *inv)
-    {
+    bool KeySwitch::check_matching_key(enigma::Inventory *inv) {
         Item *it = inv->get_item(0);
         return (it
              && it->isKind("it_key")

Modified: trunk/src/stones/KeySwitch.hh
===================================================================
--- trunk/src/stones/KeySwitch.hh	2009-11-25 14:20:37 UTC (rev 1877)
+++ trunk/src/stones/KeySwitch.hh	2009-11-25 23:11:24 UTC (rev 1878)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2007,2008 Ronald Lamprecht
+ * Copyright (C) 2007,2008,2009 Ronald Lamprecht
  * Copyright (C) 2008 Raoul Bourquin
  *
  * This program is free software; you can redistribute it and/or
@@ -46,6 +46,9 @@
     public:
         KeySwitch();
 
+        // Object interface
+        virtual void setAttr(const string& key, const Value &val);
+
         // StateObject interface
         virtual void setState(int extState);
 



From ral at mail.berlios.de  Thu Nov 26 23:38:58 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 26 Nov 2009 23:38:58 +0100
Subject: [Enigma-game-svn] r1879 - team_levelpacks/team_test_new_api
Message-ID: <200911262238.nAQMcwrH008675@sheep.berlios.de>

Author: ral
Date: 2009-11-26 23:38:51 +0100 (Thu, 26 Nov 2009)
New Revision: 1879

Modified:
   team_levelpacks/team_test_new_api/raoulT01_1.xml
   team_levelpacks/team_test_new_api/raoulT02_1.xml
Log:
Test Level new API:
- key and floppy testcases for secure and invisible

Modified: team_levelpacks/team_test_new_api/raoulT01_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT01_1.xml	2009-11-25 23:11:24 UTC (rev 1878)
+++ team_levelpacks/team_test_new_api/raoulT01_1.xml	2009-11-26 22:38:51 UTC (rev 1879)
@@ -45,6 +45,18 @@
 ti["L"] = ti[" "] .. {"st_floppy", name="stfl7", target="da7", action="on", inverse=true}
 ti["M"] = ti[" "] .. {"st_floppy", name="stfl8", target="da8", action="off", inverse=true}
 
+ti["N"] = {"st_floppy", target="doorN"}
+ti["n"] = {"st_door_a", "doorN"}
+ti["O"] = {"st_floppy", target="doorO"}
+ti["o"] = {"st_door_a", "doorO"}
+ti["P"] = {"st_floppy", target="doorP#*"}
+ti["p"] = {"st_door_a", "doorP#"}
+ti["Q"] = {"st_floppy", target={"@doorQ#*", "otto", "doorR"}}
+ti["q"] = {"st_door_a", "doorQ#"}
+ti["r"] = {"st_door_a", "doorR"}
+ti["S"] = {"st_floppy", target="doorS", secure=false}
+ti["s"] = {"st_door_a", "doorS"}
+
 ti["f"] = ti[" "] .. {"it_floppy"}
 
 w, h = wo(ti, " ", {
@@ -52,11 +64,11 @@
 "   f   G      B    6",
 "   f   H      C    7",
 "   f   I      D    8",
-"                    ",
-"                    ",
-"                    ",
-"                    ",
-"                    ",
+"            o    r  ",
+"       Nn  O   qQ   ",
+"                  q ",
+"       Pp     Ss    ",
+"       p            ",
 "   f   J      W     ",
 "   f   K      X     ",
 "   f   L      Y     ",
@@ -72,3 +84,4 @@
   </el:protected>
 </el:level>
 
+

Modified: team_levelpacks/team_test_new_api/raoulT02_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT02_1.xml	2009-11-25 23:11:24 UTC (rev 1878)
+++ team_levelpacks/team_test_new_api/raoulT02_1.xml	2009-11-26 22:38:51 UTC (rev 1879)
@@ -54,22 +54,37 @@
 ti["e"] = ti[" "] .. {"it_key", code=4}
 ti["f"] = ti[" "] .. {"it_key", code=5}
 
+ti["N"] = {"st_key", target="doorN"}
+ti["n"] = {"st_door_a", "doorN"}
+ti["O"] = {"st_key", target="doorO"}
+ti["o"] = {"st_door_a", "doorO"}
+ti["P"] = {"st_key", target="doorP#*"}
+ti["p"] = {"st_door_a", "doorP#"}
+ti["Q"] = {"st_key", target={"@doorQ#*", "otto", "doorR"}}
+ti["q"] = {"st_door_a", "doorQ#"}
+ti["r"] = {"st_door_a", "doorR"}
+ti["S"] = {"st_key", target="doorS", secure=false}
+ti["s"] = {"st_door_a", "doorS"}
+
+ti["7"] = {"it_key", code=7, invisible=false}
+ti["T"] = {"st_key", target="doorT", code=7}
+ti["t"] = {"st_door_a", "doorT"}
+
 w, h = wo(ti, " ", {
-"0  a   F      A     ",
-"   a   G      B     ",
-"   a   H      C     ",
-"   a   I      D     ",
+"0  a   F  A       o ",
+"   a   G  B  Nn  O  ",
+"   a   H  C        r",
+"   a   I  D  Pp  qQ ",
+"             p      ",
+"                 S q",
+"   bcdef  12345  s  ",
 "                    ",
-"                    ",
-"   bcdef    12345   ",
-"                    ",
-"                    ",
+"            7  Tt   ",
 "   a   J      W     ",
 "   a   K      X     ",
 "   a   L      Y     ",
 "   a   M      Z     "
 })
-
   ]]></el:luamain>
     <el:i18n>
      <el:string el:key="title">
@@ -79,3 +94,4 @@
   </el:protected>
 </el:level>
 
+



From ral at mail.berlios.de  Thu Nov 26 23:40:51 2009
From: ral at mail.berlios.de (ral at mail.berlios.de)
Date: Thu, 26 Nov 2009 23:40:51 +0100
Subject: [Enigma-game-svn] r1880 - trunk/doc/reference
Message-ID: <200911262240.nAQMepGc008849@sheep.berlios.de>

Author: ral
Date: 2009-11-26 23:40:43 +0100 (Thu, 26 Nov 2009)
New Revision: 1880

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1:
- key and floppy: secure and invisible additions

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-11-26 22:38:51 UTC (rev 1879)
+++ trunk/doc/reference/enigma-ref.texi	2009-11-26 22:40:43 UTC (rev 1880)
@@ -12673,20 +12673,29 @@
 A key activates an @ref{st_key} when inserted by hitting the stone with
 the key as first item in the players inventory.
 
+Usually the @samp{code} of the key is not visually unveiled. But if you
+set @samp{invisible} to the value @samp{false} the code becomes visible for
+number code values @samp{1} to @samp{8}. The code is just visible, when the
+key is part of the inventory. This helps the user to distinguish multiple keys
+in the inventory and to assign them to the matching @ref{st_key}s.
+
+An @samp{invisible} key reveals its code when being inserted in a matching, 
+unveiled @ref{st_key}. The code remains visible, when the user withdraws the
+key from the stone and adds it to his inventory.
+
 @table @asis
 
 @item @b{Attributes:}
 @table @asis
+ at item @b{code}, @ @ @i{values}: number or string; @ @ @i{default}: @code{1}
+The code of a key must match that of an @ref{st_key} to unlock it.
+ at item @b{invisible} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+A visible key unveils its @samp{code} by a color spot when being lifted.
 @item @b{freezable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}; @ @ @i{access}: @code{read only} @ @ @xref{freezable}
 @item @b{liftable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}; @ @ @i{access}: @code{read only} @ @ @xref{liftable}
 @item @b{portable}, @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}; @ @ @i{access}: @code{read only} @ @ @xref{portable}
 @end table
 
- at table @asis
- at item @b{code}, @ @ @i{values}: number or string; @ @ @i{default}: @code{1}
-The code of a key must match that of an @ref{st_key} to unlock it.
- at end table
-
 @item @b{Messages:} none
 
 @item @b{Variants:}
@@ -16486,12 +16495,26 @@
 On a second hit the switch is deactivated and the inserted floppy is returned
 to the players inventory.
 
+Floppy stones are often used as openers for an adjacent @ref{st_door} that is
+declared as its @samp{target}. But there is the inherent danger that an actor
+passing the door accidentially hits the neighboring floppy stone, causing the floppy
+to be pulled out again and the door to be closed immediately. Of couse this 
+would shatter any @ref{ac_marble} or @ref{ac_pearl}. But a @samp{secure} floppy
+stone checks that the hitting actor is not positioned on one of the floppy stones
+target positions. It refuses any actions caused by such critical hits. Note
+that in case the target is a callback function that closes the adjacent door,
+there will be still no protection. A floppy stone with @samp{secure} value 
+ at samp{false} would accept any hits and shatter marbles as it has been standard
+on older Enigma releases and is still in modes besides Enigma.
+
 @table @asis
 @item @b{Attributes:}
 
 @table @asis
 @item @b{state}, @ @ @i{values}: @code{ON}, @code{OFF}; @ @ @i{default}: @code{OFF}; @ @ @xref{state}
 Current activity state of the floppy stone.
+ at item @b{secure} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+Protect actors on target positions by neglecting their hits.
 @end table
 
 @item @b{Messages:}
@@ -16850,6 +16873,27 @@
 On a second hit the switch is deactivated and the inserted key is returned
 to the player's inventory.
 
+Key stones are often used as openers for an adjacent @ref{st_door} that is
+declared as its @samp{target}. But there is the inherent danger that an actor
+passing the door accidentially hits the neighboring key stone, causing the key
+to be pulled out again and the door to be closed immediately. Of couse this 
+would shatter any @ref{ac_marble} or @ref{ac_pearl}. But a @samp{secure} key
+stone checks that the hitting actor is not positioned on one of the key stones
+target positions. It refuses any actions caused by such critical hits. Note
+that in case the target is a callback function that closes the adjacent door,
+there will be still no protection. A key stone with @samp{secure} value 
+ at samp{false} would accept any hits and shatter marbles as it has been standard
+on older Enigma releases and is still in modes besides Enigma.
+
+Usually the @samp{code} of the key stone is not visually unveiled. But if you
+set @samp{invisible} to the value @samp{false} the code becomes visible for
+number code values @samp{1} to @samp{8}. This helps the user to distinguish
+the stones and to assign the correct @ref{it_key} when multiple instances are
+present.
+
+An @samp{invisible} key stone reveals its code when a matching, unveiled
+ at ref{it_key} gets inserted.
+
 @table @asis
 @item @b{Attributes:}
 
@@ -16858,6 +16902,10 @@
 Current activity state of the key stone.
 @item @b{code}, @ @ @i{values}: number or string; @ @ @i{default}: @code{1}:
 The code that is required to activate this switch.
+ at item @b{secure} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+Protect actors on target positions by neglecting their hits.
+ at item @b{invisible} @ @ @i{values}: @code{true}, @code{false}; @ @ @i{default}: @code{true}
+A visible key stone unveils its @samp{code} by a color spot.
 @end table
 
 @item @b{Messages:}



From ral at mail.berlios.de  Fri Nov 27 13:15:33 2009
From: ral at mail.berlios.de (ral at BerliOS)
Date: Fri, 27 Nov 2009 13:15:33 +0100
Subject: [Enigma-game-svn] r1881 - in trunk: data src src/gui
Message-ID: <200911271215.nARCFXA6009067@sheep.berlios.de>

Author: ral
Date: 2009-11-27 13:15:28 +0100 (Fri, 27 Nov 2009)
New Revision: 1881

Removed:
   trunk/data/editor.lua
   trunk/src/editor-lua.pkg
   trunk/src/editor.cc
   trunk/src/editor.hh
   trunk/src/editor_impl.hh
   trunk/src/lua-editor.cc
   trunk/src/lua-editor.hh
Modified:
   trunk/src/Makefile.am
   trunk/src/gui/LevelWidget.cc
   trunk/src/gui/MainMenu.cc
   trunk/src/gui/MainMenu.hh
Log:
Trunk 1.1:
- remove outdated, obsolete editor fragments

Deleted: trunk/data/editor.lua
===================================================================
--- trunk/data/editor.lua	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/data/editor.lua	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,73 +0,0 @@
-
-function FloorGroup (l)
-    local list = l.list or {l.name}
-    editor.DefineFloorGroup(l.name, l.descr, getn(list), list)
-end
-
-function Floors (l)
-    for i=1,getn(l) do
-        FloorGroup {["name"]=l[i], descr=""}
-    end
-end
-
-function ItemGroup (l)
-    local list = l.list or {l.name}
-    editor.DefineItemGroup(l.name, l.descr, getn(list), list)
-end
-
-function Items (l)
-    for i=1,getn(l) do
-        ItemGroup {["name"]=l[i], descr=""}
-    end
-end
-
-
-function StoneGroup (l)
-    local list = l.list or {l.name}
-    editor.DefineStoneGroup(l.name, l.descr, getn(list), list)
-end
-
-function Stone(name, descr) StoneGroup{["name"]=name, ["descr"]=descr} end
-
-----------------------------------------------------------------------
--- FLOORS
-----------------------------------------------------------------------
-Floors {"fl-normal", "fl-leaves", "fl-sand"}
-
-----------------------------------------------------------------------
--- ITEMS
-----------------------------------------------------------------------
-Items{"it-brush", "it-brake", "it-cherry", "it-hammer", 
-    "it-umbrella", "it-dynamite", "it-blackbomb", "it-whitebomb"}
-ItemGroup {name="", 
-    descr="Hills and Hollows", 
-    list={"it-hill", "it-tinyhill", "it-hollow", "it-tinyhollow"}}
-ItemGroup {name="it-shogun",
-    descr="Shogun Dots",
-    list={"it-shogun1", "it-shogun2", "it-shogun3"}}
-
-----------------------------------------------------------------------
--- STONES
-----------------------------------------------------------------------
-
-StoneGroup {
-    name="st-laser", 
-    descr="Lasers", 
-    list={"st-laser-n", "st-laser-e", "st-laser-s", "st-laser-w"}}
-StoneGroup {
-    name="st-disco",
-    descr="Disco Stones",
-    list={"st-disco-light", "st-disco-medium", "st-disco-dark"}}
-StoneGroup {
-    name="st-death",
-    descr="Skull Stones (normal/invisible)",
-    list={"st-death", "st-death-invisible"}}
-Stone ("st-floppy0", "Floppy Switch")
-StoneGroup {
-    name = "st-shogun",
-    descr = "Shogun Stones",
-    list = {"st-shogun1", "st-shogun2","st-shogun4","st-shogun3","st-shogun5","st-shogun6","st-shogun7"}}
---     list={"st-shogun-s", "st-shogun-m", "st-shogun-l", 
---         "st-shogun-sm", "st-shogun-sl", "st-shogun-ml", 
---         "st-shogun-sml"}}
-Stone("st-brownie", "Simple Stone")

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/Makefile.am	2009-11-27 12:15:28 UTC (rev 1881)
@@ -41,9 +41,6 @@
 	display.cc 		\
 	display_internal.hh	\
 	d_engine.hh		\
-	editor.cc 		\
-	editor.hh 		\
-	editor_impl.hh		\
 	enigma.cc 		\
 	enigma.hh		\
 	errors.hh		\
@@ -72,8 +69,6 @@
 	lua.hh			\
 	lua-display.cc 		\
 	lua-display.hh		\
-	lua-editor.cc 		\
-	lua-editor.hh		\
 	lua-enigma.cc 		\
 	lua-enigma.hh		\
 	lua-global.cc 		\
@@ -457,7 +452,6 @@
 	@if [ "x${TOLUA}" != "x" ]; then \
 		echo "Running ${TOLUA}..."; \
 		${TOLUA} -H lua-display.hh -n display -o lua-display.cc display-lua.pkg; \
-		${TOLUA} -H lua-editor.hh -n editor -o lua-editor.cc editor-lua.pkg; \
 		${TOLUA} -H lua-enigma.hh -n enigma -o lua-enigma.cc enigma-lua.pkg; \
 		${TOLUA} -H lua-global.hh -n global -o lua-global.cc global-lua.pkg; \
 		${TOLUA} -H lua-ecl.hh -n px -o lua-ecl.cc ecl-lua.pkg; \

Deleted: trunk/src/editor-lua.pkg
===================================================================
--- trunk/src/editor-lua.pkg	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/editor-lua.pkg	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,34 +0,0 @@
-//==================================================  -*- Mode: C++ -*-
-// Copyright (C) 2003 Daniel Heck
-//
-// This program is free software; you can redistribute it and/or
-// modify it under the terms of the GNU General Public License
-// as published by the Free Software Foundation; either version 2
-// of the License, or (at your option) any later version.
-//
-// This program is distributed in the hope that it will be useful,
-// but WITHOUT ANY WARRANTY; without even the implied warranty of
-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-// GNU General Public License for more details.
-//
-// You should have received a copy of the GNU General Public License along
-// with this program; if not, write to the Free Software Foundation, Inc.,
-// 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
-//
-// $Id: editor-lua.pkg,v 1.1 2003/07/17 20:10:23 dheck Exp $
-//======================================================================
-
-$#include "editor.hh"
-$using namespace editor;
-
-module editor
-{
-    void DefineFloorGroup (const char *name, const char *descr,
-                           int nentries, const char *entries[nentries]);
-
-    void DefineItemGroup (const char *name, const char *descr,
-                          int nentries, const char *entries[nentries]);
-
-    void DefineStoneGroup (const char *name, const char *descr,
-                           int nentries, const char *entries[nentries]);
-}

Deleted: trunk/src/editor.cc
===================================================================
--- trunk/src/editor.cc	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/editor.cc	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,469 +0,0 @@
-/*
- * Copyright (C) 2002,2003,2004 Daniel Heck
- *
- * This program is free software; you can redistribute it and/or
- * modify it under the terms of the GNU General Public License
- * as published by the Free Software Foundation; either version 2
- * of the License, or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License along
- * with this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
- *
- */
-#include "editor.hh"
-
-#include "ecl_sdl.hh"
-#include "ecl_video.hh" // set_color, line
-#include "ecl_util.hh"  // set_flags
-
-#include "main.hh"
-#include "world.hh"
-#include "lua.hh"
-#include "video.hh"
-#include "gui/widgets.hh"
-#include "display_internal.hh" // WorldArea
-
-#include <iostream>
-#include <cassert>
-
-#include "display_internal.hh"
-#include "d_engine.hh"
-
-#ifndef CXXLUA
-extern "C" {
-#include "lualib.h"
-#include "tolua++.h"
-}
-#else
-#include "lualib.h"
-#include "tolua++.h"
-#endif 
-
-#include "lua-editor.hh"
-
-using namespace std;
-using namespace enigma;
-using namespace editor;
-using namespace ecl;
-
-using display::ScreenArea;
-using display::DisplayEngine;
-using display::Model;
-//using world ObjectTraits;
-
-using enigma::ItemID;
-
-#include "editor_impl.hh"
-
-
-/* -------------------- Editor state -------------------- */
-
-EditorState::EditorState()
-{
-}
-
-
-EditorState::~EditorState()
-{
-}
-
-
-void EditorState::save( std::ostream & /*os*/ )
-{
-}
-
-void EditorState::load( std::istream & /*is*/ )
-{
-}
-
-
-
-/* -------------------- Editor display engine -------------------- */
-
-EditorDisplay::EditorDisplay()
-{
-	DisplayEngine *engine = get_engine();
-	engine->set_screen_area( video::GetInfo()->gamearea );
-	engine->add_layer( new DL_Editor );
-}
-
-void
-EditorDisplay::redraw()
-{
-	display::CommonDisplay::redraw();
-}
-
-
-/* -------------------- Editor tools -------------------- */
-
-void
-GridObjectTool::advance_in_group( int offset )
-{
-	int newidx = m_objectidx + offset;
-	if( newidx >= 0 && newidx < (int)m_groups[ m_groupidx ].entries.size() ) {
-		m_objectidx = newidx;
-	}
-}
-
-void
-GridObjectTool::advance_group( int offset )
-{
-	int newidx = m_groupidx + offset;
-	if( newidx >= 0 && newidx < (int)m_groups.size() ) {
-		m_groupidx = newidx;
-		m_objectidx = 0;
-	}
-}
-
-void
-GridObjectTool::on_mousebutton( const SDL_Event &e, V2 worldpos )
-{
-	Editor *ed = Editor::get_instance();
-	string obj = current_object();
-
-	round_coordinates( &worldpos );
-	int x = (int)worldpos[ 0 ];
-	int y = (int)worldpos[ 1 ];
-
-	if( e.button.type == SDL_MOUSEBUTTONDOWN ) {
-		if( e.button.button == 1 ) {
-			// left mb -> set object
-			switch( m_layer ) {
-			case GRID_FLOOR: ed->set_floor( x, y, obj ); break;
-			case GRID_ITEMS: ed->set_item( x, y, obj ); break;
-			case GRID_STONES: ed->set_stone( x, y, obj ); break;
-			default: break;
-			}
-		}
-		else if( e.button.button == 3 ) {
-			// right mb
-		}
-	}
-}
-
-void
-GridObjectTool::object_menu()
-{
-}
-
-void
-ActorTool::on_mousebutton( const SDL_Event &e, V2 worldpos )
-{
-	Editor *ed = Editor::get_instance();
-	string obj = current_object();
-
-	if( e.button.type == SDL_MOUSEBUTTONDOWN ) {
-		if( e.button.button == 1 ) {
-			// left mb -> set object
-			ed->set_actor( worldpos[0], worldpos[1], obj );
-		}
-		else if( e.button.button == 3 ) {
-			// right mb
-		}
-	}
-}
-
-
-/* -------------------- The Editor -------------------- */
-
-Editor *Editor::m_instance = 0;
-
-Editor::Editor()
-	: m_editarea( 0,0,640,13*32 )
-	, m_iconarea( 0,13*32,640,64 )
-	, m_display()
-	, m_iconbar( m_iconarea, 2, 640/32 )
-	, m_quit_editor( false )
-	, m_cursor()
-	, m_lua( luaL_newstate() )
-	, m_editmode( MODE_FLOOR )
-	, m_tools()
-{
-        luaL_openlibs(m_lua);
-	tolua_open( m_lua );
-	tolua_editor_open( m_lua );
-}
-
-Editor::~Editor()
-{
-	lua_close( m_lua );
-}
-
-void
-Editor::init()
-{
-	delete_sequence( m_tools.begin(), m_tools.end() );
-	m_tools.clear();
-	m_tools.resize( MODE_COUNT, NULL );
-	m_tools[ MODE_FLOOR ] = m_floortool = new FloorTool;
-	m_tools[ MODE_ITEMS ] = m_itemtool = new ItemTool;
-	m_tools[ MODE_STONES ] = m_stonetool = new StoneTool;
-	m_tools[ MODE_ACTORS ] = m_actortool = new ActorTool;
-
-	new_world( 20, 13 );
-
-    // TODO - just printing a message is not enough - the app will crash on missing editor.lua
-    if (lua::DoSysFile(m_lua, "compat.lua") != lua::NO_LUAERROR) {
-        std::string message = "While processing 'compat.lua':\n" +lua::LastError(m_lua);
-        fprintf( stderr, "%s\n", message.c_str() );
-    }
-    if (lua::DoSysFile(m_lua, "editor.lua") != lua::NO_LUAERROR) {
-        std::string message = "Error loading 'editor.lua'\n" +lua::LastError(m_lua);
-        fprintf( stderr, "%s\n", message.c_str() );
-    }
-}
-
-void
-Editor::run()
-{
-	m_quit_editor = false;
-	while( !m_quit_editor ) {
-		video::HideMouse();
-		m_display.redraw();
-		video::ShowMouse();
-		video::GetScreen()->flush_updates();
-
-		SDL_Event e;
-		if( SDL_PollEvent( &e ) ) {
-			dispatch_event (e);
-		}
-
-		SDL_Delay( 10 );
-	}
-}
-
-void Editor::set_mode( EditMode m )
-{
-	m_editmode = m;
-	update_cursor();
-}
-
-void Editor::update_cursor()
-{
-	// set proper position
-	int mx;
-	int my;
-	SDL_GetMouseState( &mx, &my );
-	DisplayEngine *engine = m_display.get_engine();
-	V2 worldpos = engine->to_world( V2( mx, my ) );
-	current_tool()->round_coordinates( &worldpos );
-	m_cursor.move( worldpos );
-
-	// set proper face
-	set_cursor( current_tool()->current_object() );
-}
-
-Tool *Editor::current_tool()
-{
-	if( Tool *tool = m_tools[ m_editmode ] ) {
-		return tool;
-	}
-	else {
-		fprintf( stderr, "undefined tool\n" );
-		assert( m_stonetool != NULL );
-		return m_stonetool;
-	}
-}
-
-
-void
-Editor::set_floor( int x, int y, std::string const& name )
-{
-	m_display.set_floor( x, y, display::MakeModel( name ) );
-}
-
-void
-Editor::set_item( int x, int y, std::string const& name )
-{
-	 m_display.set_item( x, y, display::MakeModel( name ) );
-}
-
-void
-Editor::set_stone( int x, int y, std::string const& name )
-{
-	m_display.set_stone( x, y, display::MakeModel( name ) );
-}
-
-void
-Editor::set_actor( double x, double y, std::string const& name )
-{
-	m_display.add_sprite( V2( x, y ), display::MakeModel( name ) );
-}
-
-
-void
-Editor::new_world( int w, int h )
-{
-	m_display.new_world( w, h );
-	for( int x=0; x<w; ++x ) {
-		for( int y=0; y<h; ++y ) {
-			set_floor (x, y, "fl-normal");
-		}
-	}
-	m_cursor = m_display.add_effect( V2(), display::MakeModel( "it-hammer" ) );
-}
-
-void
-Editor::set_cursor( const string &name )
-{
-	m_cursor.replace_model( display::MakeModel( name ) );
-}
-
-
-void
-Editor::scroll( double xoff, double yoff )
-{
-	DisplayEngine *engine = m_display.get_engine();
-	V2 newoffset = engine->get_offset() + V2( xoff, yoff );
-	video::HideMouse();
-	engine->move_offset( newoffset );
-	video::ShowMouse();
-}
-
-void
-Editor::scroll_abs( double x, double y )
-{
-	DisplayEngine *engine = m_display.get_engine();
-	video::HideMouse();
-	engine->move_offset( V2( x, y ) );
-	video::ShowMouse();
-}
-
-bool
-Editor::on_mousemotion( SDL_Event &e )
-{
-	DisplayEngine *engine = m_display.get_engine();
-	V2 worldpos = engine->to_world( V2( e.motion.x, e.motion.y ) );
-	current_tool()->round_coordinates( &worldpos );
-	m_cursor.move( worldpos );
-	return true;
-}
-
-bool
-Editor::on_mousebutton( SDL_Event &e )
-{
-	DisplayEngine *engine = m_display.get_engine();
-	V2 worldpos = engine->to_world( V2( e.motion.x, e.motion.y ) );
-
-	if( Tool *tool = current_tool() ) {
-		tool->on_mousebutton( e, worldpos );
-	}
-	return true;
-}
-
-bool
-Editor::on_keydown( SDL_Event &e )
-{
-	bool ctrl_pressed  = e.key.keysym.mod & KMOD_CTRL;
-	bool shift_pressed = e.key.keysym.mod & KMOD_SHIFT;
-	int hoff = 19;
-	int voff = 12;
-
-	Tool *tool = current_tool();
-
-	switch( e.key.keysym.sym ) {
-	case SDLK_ESCAPE:
-		m_quit_editor = true;
-		break;
-	case SDLK_LEFT:  scroll( ctrl_pressed ? -hoff : -1, 0 ); break;
-	case SDLK_RIGHT: scroll( ctrl_pressed ? +hoff : +1, 0 ); break;
-	case SDLK_DOWN:  scroll( 0, ctrl_pressed ? +voff : +1 ); break;
-	case SDLK_UP:    scroll( 0, ctrl_pressed ? -voff : -1 ); break;
-	case SDLK_HOME:  scroll_abs( 0, 0 ); break;
-
-	case SDLK_PAGEUP:
-		tool->advance_group( -1 );
-		update_cursor();
-		break;
-	case SDLK_PAGEDOWN:
-		tool->advance_group( +1 );
-		update_cursor();
-		break;
-
-	case SDLK_PLUS:
-	case SDLK_KP_PLUS:
-		tool->advance_in_group( +1 );
-		update_cursor();
-		break;
-
-	case SDLK_MINUS:
-	case SDLK_KP_MINUS:
-		tool->advance_in_group( -1 );
-		update_cursor();
-		break;
-
-	case SDLK_a:
-		if( shift_pressed )
-			;
-		set_mode( MODE_ACTORS );
-		break;
-
-	case SDLK_f:
-		if( shift_pressed )
-			;
-		set_mode( MODE_FLOOR );
-		break;
-
-	case SDLK_i:
-		if( shift_pressed )
-			;
-		set_mode( MODE_ITEMS );
-		break;
-
-	case SDLK_s:
-		set_mode( MODE_STONES );
-		if( shift_pressed ) {
-			tool = current_tool();
-			tool->object_menu();
-		}
-		break;
-
-	default:
-		return false;
-	}
-	return true;
-}
-
-void editor::DefineFloorGroup( char const* name, char const* descr,
-	int nentries, char ** entries )
-{
-	Editor *ed = Editor::get_instance();
-
-	vector<string> entryvec(entries, entries+nentries);
-	ObjectGroup group(name, descr, entryvec);
-	ed->add_floor_group (group);
-}
-
-void editor::DefineItemGroup( const char *name, const char *descr,
-	int nentries, char **entries )
-{
-	Editor *ed = Editor::get_instance();
-
-	vector<string> entryvec( entries, entries + nentries );
-	ObjectGroup group( name, descr, entryvec );
-	ed->add_item_group( group );
-}
-
-void editor::DefineStoneGroup( const char *name, const char *descr,
-	int nentries, char **entries )
-{
-	Editor *ed = Editor::get_instance();
-
-	vector<string> entryvec( entries, entries+nentries );
-	ObjectGroup group( name, descr, entryvec );
-	ed->add_stone_group( group );
-}
-
-
-void editor::Run()
-{
-	Editor *ed = Editor::get_instance();
-	ed->init();
-	ed->run();
-}

Deleted: trunk/src/editor.hh
===================================================================
--- trunk/src/editor.hh	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/editor.hh	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,37 +0,0 @@
-/*
- * Copyright (C) 2002,2003 Daniel Heck
- *
- * This program is free software; you can redistribute it and/or
- * modify it under the terms of the GNU General Public License
- * as published by the Free Software Foundation; either version 2
- * of the License, or (at your option) any later version.
- *  
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License along
- * with this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
- *
- */
-#ifndef EDITOR_HH
-#define EDITOR_HH
-
-#include <string>
-
-namespace editor 
-{
-    void Run();
-    void DefineFloorGroup (const char *name, const char *descr,
-                           int nentries, char **entries);
-
-    void DefineItemGroup (const char *name, const char *descr,
-                          int nentries, char **entries);
-
-    void DefineStoneGroup (const char *name, const char *descr,
-                           int nentries, char **entries);
-}
-
-#endif

Deleted: trunk/src/editor_impl.hh
===================================================================
--- trunk/src/editor_impl.hh	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/editor_impl.hh	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,335 +0,0 @@
-namespace
-{
-	class EditorState {
-	public:
-		EditorState();
-		~EditorState();
-
-		void save (std::ostream &os);
-		void load (std::istream &is);
-
-	private:
-
-	};
-
-	class DL_Editor
-		: public display::DisplayLayer
-	{
-	public:
-		DL_Editor()
-		{
-		}
-
-		~DL_Editor()
-		{
-		}
-
-		void prepare_draw( const display::WorldArea & )
-		{
-		}
-
-		void draw( ecl::GC &gc, const display::WorldArea &a, int x, int y )
-		{
-		}
-
-		void draw_onepass( ecl::GC & gc )
-		{
-			//just a test...
-			//ecl::set_color( gc, 240, 140, 20, 255 );
-			//ecl::set_flags( gc.flags, GS_ANTIALIAS );
-			//ecl::line( gc, 0, 0, 320, 240 );
-		}
-
-		void tick( double dtime )
-		{
-		}
-
-		void new_world( int w, int h )
-		{
-		}
-	};
-
-	class EditorDisplay
-		: public display::CommonDisplay
-	{
-	public:
-		EditorDisplay();
-		~EditorDisplay() {}
-
-		void redraw();
-
-		void tick(double /*dtime*/ ) {}
-
-		Model *make_model( const std::string &name );
-	private:
-
-	};
-
-	class IconBar
-		: public gui::Container
-	{
-	public:
-		IconBar( const ScreenArea &a, int rows, int cols )
-			: m_area( a )
-			, m_rows( rows )
-			, m_cols( cols )
-			, m_bgcolor( 150, 150, 150 )
-		{
-		}
-
-		~IconBar() {}
-
-		ScreenArea get_area() const
-		{
-			return m_area;
-		}
-
-		// Widget interface.
-		void draw( ecl::GC &gc, const ecl::Rect &area_ )
-		{
-			set_color( gc, m_bgcolor );
-			box( gc, area_ );
-		}
-
-	private:
-		// Variables.
-		ScreenArea m_area;
-		int        m_rows, m_cols;
-		ecl::RGB   m_bgcolor;
-	};
-
-
-	enum EditMode {
-		MODE_FLOOR,
-		MODE_ITEMS,
-		MODE_STONES,
-		MODE_ACTORS,
-		MODE_COUNT
-	};
-
-	struct ObjectGroup {
-		string         name;
-		string         descr;
-		vector<string> entries;
-
-		ObjectGroup( const string &name_,
-			const string &descr_, const vector<string> entries_
-		)
-			: name( name_ )
-			, descr( descr_ )
-			, entries( entries_ )
-		{
-		}
-	};
-
-
-	class Tool {
-	public:
-		virtual ~Tool() {}
-
-		virtual void object_menu() = 0;
-
-		virtual void advance_in_group( int offset ) = 0;
-		virtual void advance_group( int offset ) = 0;
-		virtual string current_object() = 0;
-
-		virtual void on_mousebutton( const SDL_Event &e, V2 worldpos ) = 0;
-
-		/// Rounds coordinates for item display.  Actor-like tools
-		/// will want to leave the coordinates intact, grid-like tools
-		/// could want to round to integers.
-		virtual void round_coordinates( V2 * worldpos ) = 0;
-	};
-
-	class GridObjectTool
-		: public Tool
-	{
-	public:
-
-		// Tool interface
-		void object_menu();
-
-		void advance_in_group( int offset );
-		void advance_group( int offset );
-
-		string current_object()
-		{
-			return m_groups[ m_groupidx ].entries[ m_objectidx ];
-		}
-
-		void add_group( const ObjectGroup &g )
-		{
-			m_groups.push_back( g );
-		}
-
-		// Constructors
-		GridObjectTool( GridLayer layer )
-		{
-			m_groupidx = m_objectidx = 0;
-			m_layer = layer;
-		}
-
-		void round_coordinates( V2 * worldpos )
-		{
-			(*worldpos)[ 0 ] = round_down<int>( (*worldpos)[ 0 ] );
-			(*worldpos)[ 1 ] = round_down<int>( (*worldpos)[ 1 ] );
-		}
-
-		void on_mousebutton( const SDL_Event &e, V2 worldpos );
-
-	protected:
-
-		// Variables
-		vector<ObjectGroup> m_groups;
-		size_t              m_groupidx;
-		size_t              m_objectidx;
-		GridLayer           m_layer;
-	};
-
-	class FloorTool
-		: public GridObjectTool
-	{
-	public:
-		FloorTool()
-			: GridObjectTool(GRID_FLOOR)
-		{}
-	};
-
-	class ItemTool
-		: public GridObjectTool
-	{
-	public:
-		ItemTool()
-			: GridObjectTool( GRID_ITEMS )
-		{
-		}
-	};
-
-	class StoneTool
-		: public GridObjectTool
-	{
-	public:
-		StoneTool ()
-			: GridObjectTool( GRID_STONES )
-		{
-		}
-	};
-
-	class ActorTool
-		: public Tool
-	{
-	public:
-		// Tool interface.
-		void object_menu() {}
-		void advance_in_group( int /*offset*/ ) {}
-		void advance_group( int /*offset*/ ) {}
-		string current_object() { return "ac-blackball"; }
-		void on_mousebutton( const SDL_Event & e, V2 worldpos );
-		void round_coordinates( V2 * /*worldpos*/ ) {}
-	private:
-	};
-
-
-	class Level {
-	public:
-		Level( EditorDisplay *display )
-			: m_display( display )
-		{
-		}
-
-	private:
-		// Variables.
-		EditorDisplay *m_display;
-	};
-
-
-
-	class Editor
-		: private sdl::EventHandler
-	{
-	public:
-		static Editor * get_instance()
-		{
-			if( m_instance == NULL ) {
-				m_instance = new Editor;
-			}
-			return m_instance;
-		}
-		~Editor();
-
-		void init();
-		void run();
-
-		Level *get_level() const
-		{
-			return m_level.get();
-		}
-
-		void add_floor_group( const ObjectGroup &g )
-		{
-			m_floortool->add_group( g );
-		}
-
-		void add_item_group( const ObjectGroup &g )
-		{
-			m_itemtool->add_group( g );
-		}
-
-		void add_stone_group( const ObjectGroup &g )
-		{
-			m_stonetool->add_group( g );
-		}
-
-		void set_floor( int x, int y, string const& name );
-		void set_item( int x, int y, string const& name );
-		void set_stone( int x, int y, string const& name );
-		void set_actor( double x, double y, string const& name );
-
-	private:
-		Editor();
-
-
-		/* ---------- Private methods ---------- */
-		void set_cursor( const string &name );
-
-		/// Change cursor face and position based on active tool.
-		void update_cursor();
-
-		void set_mode( EditMode m );
-		Tool *current_tool();
-
-		void new_world( int w, int h );
-
-		void scroll( double xoff, double yoff );
-		void scroll_abs( double x, double y );
-
-		/*
-		** EventHandler interface.
-		*/
-		bool on_mousemotion( SDL_Event &e );
-		bool on_mousebutton( SDL_Event &e );
-		bool on_keydown( SDL_Event &e );
-
-		/*
-		** Variables.
-		*/
-		ScreenArea    m_editarea;
-		ScreenArea    m_iconarea;
-		EditorDisplay m_display;
-		IconBar       m_iconbar;
-		bool          m_quit_editor;
-		display::SpriteHandle  m_cursor;
-
-		lua_State      *m_lua;
-
-		FloorTool      *m_floortool;
-		ItemTool       *m_itemtool;
-		StoneTool      *m_stonetool;
-		ActorTool      *m_actortool;
-		EditMode        m_editmode;
-		vector<Tool *>  m_tools;
-		auto_ptr<Level> m_level;
-
-		static Editor  *m_instance;
-	};
-}

Modified: trunk/src/gui/LevelWidget.cc
===================================================================
--- trunk/src/gui/LevelWidget.cc	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/gui/LevelWidget.cc	2009-11-27 12:15:28 UTC (rev 1881)
@@ -62,7 +62,6 @@
         img_hard        = enigma::GetImage("completed");
         img_changed     = enigma::GetImage("changed");
         img_unavailable = enigma::GetImage("unavailable");
-//        img_unknown     = enigma::GetImage("unknown");
         img_par         = enigma::GetImage("par");
         img_wrEasy      = enigma::GetImage("ic-wr-easy");
         img_wrDifficult = enigma::GetImage("ic-wr-difficult");

Modified: trunk/src/gui/MainMenu.cc
===================================================================
--- trunk/src/gui/MainMenu.cc	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/gui/MainMenu.cc	2009-11-27 12:15:28 UTC (rev 1881)
@@ -33,7 +33,6 @@
 #include "world.hh"
 
 #include "netgame.hh"
-#include "editor.hh"
 
 
 using namespace ecl;
@@ -364,7 +363,6 @@
         levelpack = b.add(new StaticTextButton(N_("Level Pack"), this));
 #ifdef ENABLE_EXPERIMENTAL
         m_netgame   = b.add(new StaticTextButton(N_("Network Game"), this));
-        leveled     = b.add(new StaticTextButton(N_("Editor"), this));
 #endif
         options     = b.add(new StaticTextButton(N_("Options"), this));
 #if 0
@@ -450,8 +448,6 @@
     #ifdef ENABLE_EXPERIMENTAL
         } else if (w == m_netgame) {
             ShowNetworkMenu();
-        } else if (w == leveled) {
-            editor::Run();
     #endif
         } else if (w == quit) {
             Menu::quit();

Modified: trunk/src/gui/MainMenu.hh
===================================================================
--- trunk/src/gui/MainMenu.hh	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/gui/MainMenu.hh	2009-11-27 12:15:28 UTC (rev 1881)
@@ -50,7 +50,6 @@
         Widget *startgame;
         Widget *levelpack;
         Widget *m_netgame;
-        Widget *leveled;
         Widget *options;
         Widget *update;
         Widget *help;

Deleted: trunk/src/lua-editor.cc
===================================================================
--- trunk/src/lua-editor.cc	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/lua-editor.cc	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,212 +0,0 @@
-/*
-** Lua binding: editor
-** Generated automatically by tolua++-1.0.93 on Wed Sep  9 01:10:11 2009.
-*/
-
-#ifndef __cplusplus
-#include "stdlib.h"
-#endif
-#include "string.h"
-
-#include "tolua++.h"
-
-/* Exported function */
-TOLUA_API int  tolua_editor_open (lua_State* tolua_S);
-
-#include "editor.hh"
-using namespace editor;
-
-/* function to register type */
-static void tolua_reg_types (lua_State* tolua_S)
-{
-}
-
-/* function: DefineFloorGroup */
-#ifndef TOLUA_DISABLE_tolua_editor_editor_DefineFloorGroup00
-static int tolua_editor_editor_DefineFloorGroup00(lua_State* tolua_S)
-{
-#ifndef TOLUA_RELEASE
- tolua_Error tolua_err;
- if (
-     !tolua_isstring(tolua_S,1,0,&tolua_err) ||
-     !tolua_isstring(tolua_S,2,0,&tolua_err) ||
-     !tolua_isnumber(tolua_S,3,0,&tolua_err) ||
-     !tolua_istable(tolua_S,4,0,&tolua_err) ||
-     !tolua_isnoobj(tolua_S,5,&tolua_err)
- )
-  goto tolua_lerror;
- else
-#endif
- {
-  const char* name = ((const char*)  tolua_tostring(tolua_S,1,0));
-  const char* descr = ((const char*)  tolua_tostring(tolua_S,2,0));
-  int nentries = ((int)  tolua_tonumber(tolua_S,3,0));
-#ifdef __cplusplus
-  char** entries = new char*[nentries];
-#else
-  char** entries = (char**) malloc((nentries)*sizeof(char*));
-#endif
-  {
-#ifndef TOLUA_RELEASE
-   if (!tolua_isstringarray(tolua_S,4,nentries,0,&tolua_err))
-    goto tolua_lerror;
-   else
-#endif
-   {
-    int i;
-    for(i=0; i<nentries;i++)
-    entries[i] = ((char*)  tolua_tofieldstring(tolua_S,4,i+1,0));
-   }
-  }
-  {
-   DefineFloorGroup(name,descr,nentries,entries);
-  }
-#ifdef __cplusplus
-  delete [] entries;
-#else
-  free(entries);
-#endif
- }
- return 0;
-#ifndef TOLUA_RELEASE
- tolua_lerror:
- tolua_error(tolua_S,"#ferror in function 'DefineFloorGroup'.",&tolua_err);
- return 0;
-#endif
-}
-#endif //#ifndef TOLUA_DISABLE
-
-/* function: DefineItemGroup */
-#ifndef TOLUA_DISABLE_tolua_editor_editor_DefineItemGroup00
-static int tolua_editor_editor_DefineItemGroup00(lua_State* tolua_S)
-{
-#ifndef TOLUA_RELEASE
- tolua_Error tolua_err;
- if (
-     !tolua_isstring(tolua_S,1,0,&tolua_err) ||
-     !tolua_isstring(tolua_S,2,0,&tolua_err) ||
-     !tolua_isnumber(tolua_S,3,0,&tolua_err) ||
-     !tolua_istable(tolua_S,4,0,&tolua_err) ||
-     !tolua_isnoobj(tolua_S,5,&tolua_err)
- )
-  goto tolua_lerror;
- else
-#endif
- {
-  const char* name = ((const char*)  tolua_tostring(tolua_S,1,0));
-  const char* descr = ((const char*)  tolua_tostring(tolua_S,2,0));
-  int nentries = ((int)  tolua_tonumber(tolua_S,3,0));
-#ifdef __cplusplus
-  char** entries = new char*[nentries];
-#else
-  char** entries = (char**) malloc((nentries)*sizeof(char*));
-#endif
-  {
-#ifndef TOLUA_RELEASE
-   if (!tolua_isstringarray(tolua_S,4,nentries,0,&tolua_err))
-    goto tolua_lerror;
-   else
-#endif
-   {
-    int i;
-    for(i=0; i<nentries;i++)
-    entries[i] = ((char*)  tolua_tofieldstring(tolua_S,4,i+1,0));
-   }
-  }
-  {
-   DefineItemGroup(name,descr,nentries,entries);
-  }
-#ifdef __cplusplus
-  delete [] entries;
-#else
-  free(entries);
-#endif
- }
- return 0;
-#ifndef TOLUA_RELEASE
- tolua_lerror:
- tolua_error(tolua_S,"#ferror in function 'DefineItemGroup'.",&tolua_err);
- return 0;
-#endif
-}
-#endif //#ifndef TOLUA_DISABLE
-
-/* function: DefineStoneGroup */
-#ifndef TOLUA_DISABLE_tolua_editor_editor_DefineStoneGroup00
-static int tolua_editor_editor_DefineStoneGroup00(lua_State* tolua_S)
-{
-#ifndef TOLUA_RELEASE
- tolua_Error tolua_err;
- if (
-     !tolua_isstring(tolua_S,1,0,&tolua_err) ||
-     !tolua_isstring(tolua_S,2,0,&tolua_err) ||
-     !tolua_isnumber(tolua_S,3,0,&tolua_err) ||
-     !tolua_istable(tolua_S,4,0,&tolua_err) ||
-     !tolua_isnoobj(tolua_S,5,&tolua_err)
- )
-  goto tolua_lerror;
- else
-#endif
- {
-  const char* name = ((const char*)  tolua_tostring(tolua_S,1,0));
-  const char* descr = ((const char*)  tolua_tostring(tolua_S,2,0));
-  int nentries = ((int)  tolua_tonumber(tolua_S,3,0));
-#ifdef __cplusplus
-  char** entries = new char*[nentries];
-#else
-  char** entries = (char**) malloc((nentries)*sizeof(char*));
-#endif
-  {
-#ifndef TOLUA_RELEASE
-   if (!tolua_isstringarray(tolua_S,4,nentries,0,&tolua_err))
-    goto tolua_lerror;
-   else
-#endif
-   {
-    int i;
-    for(i=0; i<nentries;i++)
-    entries[i] = ((char*)  tolua_tofieldstring(tolua_S,4,i+1,0));
-   }
-  }
-  {
-   DefineStoneGroup(name,descr,nentries,entries);
-  }
-#ifdef __cplusplus
-  delete [] entries;
-#else
-  free(entries);
-#endif
- }
- return 0;
-#ifndef TOLUA_RELEASE
- tolua_lerror:
- tolua_error(tolua_S,"#ferror in function 'DefineStoneGroup'.",&tolua_err);
- return 0;
-#endif
-}
-#endif //#ifndef TOLUA_DISABLE
-
-/* Open function */
-TOLUA_API int tolua_editor_open (lua_State* tolua_S)
-{
- tolua_open(tolua_S);
- tolua_reg_types(tolua_S);
- tolua_module(tolua_S,NULL,0);
- tolua_beginmodule(tolua_S,NULL);
-  tolua_module(tolua_S,"editor",0);
-  tolua_beginmodule(tolua_S,"editor");
-   tolua_function(tolua_S,"DefineFloorGroup",tolua_editor_editor_DefineFloorGroup00);
-   tolua_function(tolua_S,"DefineItemGroup",tolua_editor_editor_DefineItemGroup00);
-   tolua_function(tolua_S,"DefineStoneGroup",tolua_editor_editor_DefineStoneGroup00);
-  tolua_endmodule(tolua_S);
- tolua_endmodule(tolua_S);
- return 1;
-}
-
-
-#if defined(LUA_VERSION_NUM) && LUA_VERSION_NUM >= 501
- TOLUA_API int luaopen_editor (lua_State* tolua_S) {
- return tolua_editor_open(tolua_S);
-};
-#endif
-

Deleted: trunk/src/lua-editor.hh
===================================================================
--- trunk/src/lua-editor.hh	2009-11-26 22:40:43 UTC (rev 1880)
+++ trunk/src/lua-editor.hh	2009-11-27 12:15:28 UTC (rev 1881)
@@ -1,8 +0,0 @@
-/*
-** Lua binding: editor
-** Generated automatically by tolua++-1.0.93 on Wed Sep  9 01:10:11 2009.
-*/
-
-/* Exported function */
-TOLUA_API int  tolua_editor_open (lua_State* tolua_S);
-



From raoul at mail.berlios.de  Sat Nov 28 00:48:18 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 28 Nov 2009 00:48:18 +0100
Subject: [Enigma-game-svn] r1882 - in trunk: attic/images-stones data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911272348.nARNmIBl020022@sheep.berlios.de>

Author: raoul
Date: 2009-11-28 00:47:57 +0100 (Sat, 28 Nov 2009)
New Revision: 1882

Added:
   trunk/attic/images-stones/st_switch-gfx16.xcf
   trunk/attic/images-stones/st_switch-gfx32.xcf
   trunk/attic/images-stones/st_switch-gfx40.xcf
   trunk/attic/images-stones/st_switch-gfx48.xcf
   trunk/attic/images-stones/st_switch-gfx64.xcf
   trunk/data/gfx16/st_switch.png
   trunk/data/gfx16/st_switch_black.png
   trunk/data/gfx16/st_switch_white.png
   trunk/data/gfx64/st_switch.png
   trunk/data/gfx64/st_switch_black.png
   trunk/data/gfx64/st_switch_white.png
Removed:
   trunk/attic/images-stones/st-switch.xcf
Modified:
   trunk/data/gfx32/st_switch.png
   trunk/data/gfx32/st_switch_black.png
   trunk/data/gfx32/st_switch_white.png
   trunk/data/gfx40/st_switch.png
   trunk/data/gfx40/st_switch_black.png
   trunk/data/gfx40/st_switch_white.png
   trunk/data/gfx48/st_switch.png
   trunk/data/gfx48/st_switch_black.png
   trunk/data/gfx48/st_switch_white.png
Log:
-> Models for st_switch[_{black,white}] for all resolutions



Deleted: trunk/attic/images-stones/st-switch.xcf
===================================================================
(Binary files differ)

Added: trunk/attic/images-stones/st_switch-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_switch-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_switch-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_switch-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_switch-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_switch-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_switch-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_switch-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_switch-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_switch-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/st_switch.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_switch.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_switch_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_switch_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_switch_white.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_switch_white.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/st_switch.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_switch_black.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_switch_white.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_switch.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_switch_black.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_switch_white.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_switch.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_switch_black.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_switch_white.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/st_switch.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_switch.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_switch_black.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_switch_black.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_switch_white.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_switch_white.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Sat Nov 28 01:54:30 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 28 Nov 2009 01:54:30 +0100
Subject: [Enigma-game-svn] r1883 - in trunk: attic/images-stones data/gfx16
	data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911280054.nAS0sUKu005097@sheep.berlios.de>

Author: raoul
Date: 2009-11-28 01:54:29 +0100 (Sat, 28 Nov 2009)
New Revision: 1883

Added:
   trunk/attic/images-stones/sh_floating-gfx16.xcf
   trunk/attic/images-stones/sh_floating-gfx32.xcf
   trunk/attic/images-stones/sh_floating-gfx40.xcf
   trunk/attic/images-stones/sh_floating-gfx48.xcf
   trunk/attic/images-stones/sh_floating-gfx64.xcf
   trunk/attic/images-stones/sh_round-gfx16.xcf
   trunk/attic/images-stones/sh_round-gfx32.xcf
   trunk/attic/images-stones/sh_round-gfx40.xcf
   trunk/attic/images-stones/sh_round-gfx48.xcf
   trunk/attic/images-stones/sh_round-gfx64.xcf
   trunk/data/gfx16/sh_floating.png
   trunk/data/gfx16/sh_round.png
   trunk/data/gfx64/sh_floating.png
   trunk/data/gfx64/sh_round.png
Modified:
   trunk/data/gfx32/sh_floating.png
   trunk/data/gfx32/sh_round.png
   trunk/data/gfx40/sh_floating.png
   trunk/data/gfx40/sh_round.png
   trunk/data/gfx48/sh_floating.png
   trunk/data/gfx48/sh_round.png
Log:
-> Improved round shadows for all resolutions
-> Physically correct floating shadows for all resolutions

TODO: Consider about round2 shadows



Added: trunk/attic/images-stones/sh_floating-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_floating-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_floating-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_floating-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_floating-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_floating-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_floating-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_floating-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_floating-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_floating-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_round-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_round-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_round-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_round-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_round-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_round-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_round-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_round-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_round-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_round-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/sh_floating.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_floating.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/sh_round.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_round.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/sh_floating.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/sh_round.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_floating.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/sh_round.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_floating.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/sh_round.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/sh_floating.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_floating.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/sh_round.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_round.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From raoul at mail.berlios.de  Sat Nov 28 14:46:18 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 28 Nov 2009 14:46:18 +0100
Subject: [Enigma-game-svn] r1884 - team_levelpacks/team_test_new_api
Message-ID: <200911281346.nASDkI7a013175@sheep.berlios.de>

Author: raoul
Date: 2009-11-28 14:46:18 +0100 (Sat, 28 Nov 2009)
New Revision: 1884

Modified:
   team_levelpacks/team_test_new_api/raoulT02_1.xml
Log:
-> Updated key test level


Modified: team_levelpacks/team_test_new_api/raoulT02_1.xml
===================================================================
--- team_levelpacks/team_test_new_api/raoulT02_1.xml	2009-11-28 00:54:29 UTC (rev 1883)
+++ team_levelpacks/team_test_new_api/raoulT02_1.xml	2009-11-28 13:46:18 UTC (rev 1884)
@@ -31,11 +31,14 @@
 ti["H"] = ti[" "] .. {"st_key", name="stk3", target="da3", action="on"}
 ti["I"] = ti[" "] .. {"st_key", name="stk4", target="da4", action="off"}
 
-ti["1"] = ti[" "] .. {"st_key", code=1}
-ti["2"] = ti[" "] .. {"st_key", code=2}
-ti["3"] = ti[" "] .. {"st_key", code=3}
-ti["4"] = ti[" "] .. {"st_key", code=4}
-ti["5"] = ti[" "] .. {"st_key", code=5}
+ti["1"] = ti[" "] .. {"st_key", code=1, invisible=false}
+ti["2"] = ti[" "] .. {"st_key", code=2, invisible=false}
+ti["3"] = ti[" "] .. {"st_key", code=3, invisible=false}
+ti["4"] = ti[" "] .. {"st_key", code=4, invisible=false}
+ti["5"] = ti[" "] .. {"st_key", code=5, invisible=false}
+ti["6"] = ti[" "] .. {"st_key", code=6, invisible=false}
+ti["7"] = ti[" "] .. {"st_key", code=7, invisible=false}
+ti["8"] = ti[" "] .. {"st_key", code=8, invisible=false}
 
 ti["W"] = ti[" "] .. {"st_laser_e", name="la5"}
 ti["X"] = ti[" "] .. {"st_laser_e", name="la6"}
@@ -48,11 +51,14 @@
 ti["M"] = ti[" "] .. {"st_key", name="la8", target="da8", action="off", inverse=true}
 
 ti["a"] = ti[" "] .. {"it_key"}
-ti["b"] = ti[" "] .. {"it_key", code=1}
-ti["c"] = ti[" "] .. {"it_key", code=2}
-ti["d"] = ti[" "] .. {"it_key", code=3}
-ti["e"] = ti[" "] .. {"it_key", code=4}
-ti["f"] = ti[" "] .. {"it_key", code=5}
+ti["b"] = ti[" "] .. {"it_key", code=1, invisible=false}
+ti["c"] = ti[" "] .. {"it_key", code=2, invisible=false}
+ti["d"] = ti[" "] .. {"it_key", code=3, invisible=false}
+ti["e"] = ti[" "] .. {"it_key", code=4, invisible=false}
+ti["f"] = ti[" "] .. {"it_key", code=5, invisible=false}
+ti["g"] = ti[" "] .. {"it_key", code=6, invisible=false}
+ti["h"] = ti[" "] .. {"it_key", code=7, invisible=false}
+ti["i"] = ti[" "] .. {"it_key", code=8, invisible=false}
 
 ti["N"] = {"st_key", target="doorN"}
 ti["n"] = {"st_door_a", "doorN"}
@@ -66,25 +72,38 @@
 ti["S"] = {"st_key", target="doorS", secure=false}
 ti["s"] = {"st_door_a", "doorS"}
 
-ti["7"] = {"it_key", code=7, invisible=false}
+ti["9"] = {"it_key", code=7, invisible=false}
 ti["T"] = {"st_key", target="doorT", code=7}
 ti["t"] = {"st_door_a", "doorT"}
 
+ti["?"] = {"st_key", code=1, invisible=false, name="recode"}
+ti["+"] = {"st_switch", target="inc_code"}
+ti["-"] = {"st_switch", target="dec_code"}
+
 w, h = wo(ti, " ", {
 "0  a   F  A       o ",
 "   a   G  B  Nn  O  ",
 "   a   H  C        r",
 "   a   I  D  Pp  qQ ",
 "             p      ",
-"                 S q",
-"   bcdef  12345  s  ",
+"bcdefghi         S q",
+"12345678         s  ",
 "                    ",
-"            7  Tt   ",
+"            9  Tt   ",
 "   a   J      W     ",
-"   a   K      X     ",
-"   a   L      Y     ",
-"   a   M      Z     "
-})
+"   a   K      X    -",
+"   a   L      Y    +",
+"   a   M      Z    ?"})
+
+function inc_code(value, sender)
+    no["recode"]["code"] = no["recode"]["code"] + 1
+end
+
+function dec_code(value, sender)
+    no["recode"]["code"] = no["recode"]["code"] - 1
+end
+
+
   ]]></el:luamain>
     <el:i18n>
      <el:string el:key="title">



From raoul at mail.berlios.de  Sat Nov 28 20:36:32 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 28 Nov 2009 20:36:32 +0100
Subject: [Enigma-game-svn] r1885 - in trunk: attic/images-items
	attic/images-stones data data/gfx16 data/gfx32 data/gfx40
	data/gfx48 data/gfx64
Message-ID: <200911281936.nASJaWSp003680@sheep.berlios.de>

Author: raoul
Date: 2009-11-28 20:36:18 +0100 (Sat, 28 Nov 2009)
New Revision: 1885

Added:
   trunk/attic/images-items/it_key-gfx16.xcf
   trunk/attic/images-items/it_key-gfx32.xcf
   trunk/attic/images-items/it_key-gfx40.xcf
   trunk/attic/images-items/it_key-gfx48.xcf
   trunk/attic/images-items/it_key-gfx64.xcf
   trunk/attic/images-items/it_key_colored.xcf
   trunk/attic/images-stones/st_key-gfx16.xcf
   trunk/attic/images-stones/st_key-gfx32.xcf
   trunk/attic/images-stones/st_key-gfx40.xcf
   trunk/attic/images-stones/st_key-gfx48.xcf
   trunk/attic/images-stones/st_key-gfx64.xcf
   trunk/data/gfx16/it_key.png
   trunk/data/gfx16/st_key_off.png
   trunk/data/gfx16/st_key_on.png
   trunk/data/gfx64/it_key.png
   trunk/data/gfx64/st_key_off.png
   trunk/data/gfx64/st_key_on.png
Modified:
   trunk/data/gfx32/it_key.png
   trunk/data/gfx32/st_key_off.png
   trunk/data/gfx32/st_key_on.png
   trunk/data/gfx40/it_key.png
   trunk/data/gfx40/st_key_off.png
   trunk/data/gfx40/st_key_on.png
   trunk/data/gfx48/it_key.png
   trunk/data/gfx48/st_key_off.png
   trunk/data/gfx48/st_key_on.png
   trunk/data/models-2d.lua
Log:
-> Images with color tags for keystones and keys for all resolutions



Added: trunk/attic/images-items/it_key-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/it_key-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/it_key-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/it_key-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/it_key-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/it_key-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/it_key-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/it_key-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/it_key-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/it_key-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-items/it_key_colored.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-items/it_key_colored.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_key-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_key-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_key-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_key-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_key-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_key-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_key-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_key-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_key-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_key-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/it_key.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/it_key.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_key_off.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_key_off.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_key_on.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_key_on.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/gfx32/it_key.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_key_off.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_key_on.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/it_key.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_key_off.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_key_on.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/it_key.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_key_off.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_key_on.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/it_key.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/it_key.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_key_off.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_key_off.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_key_on.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_key_on.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-28 13:46:18 UTC (rev 1884)
+++ trunk/data/models-2d.lua	2009-11-28 19:36:18 UTC (rev 1885)
@@ -556,7 +556,6 @@
         "it_glasses",
         "it_glasses_broken",
         "it_hammer",
-        "it_key",
         "it_landmine",
         "it_magicwand",
         "it_odometer",
@@ -591,17 +590,6 @@
 -- Simple item aliases --
 -------------------------
 
-do
-    DefAlias("it_key_1", "it_key")
-    DefAlias("it_key_2", "it_key")
-    DefAlias("it_key_3", "it_key")
-    DefAlias("it_key_4", "it_key")
-    DefAlias("it_key_5", "it_key")
-    DefAlias("it_key_6", "it_key")
-    DefAlias("it_key_7", "it_odometer")
-    DefAlias("it_key_8", "it_key")
-end
-
 --------------------------------------------------------------
 -- Multiple-Image-Items, non animated, e.g. it-burnable-oil --
 --------------------------------------------------------------
@@ -616,6 +604,11 @@
     DefTiles("it_dummy", {"it_dummy", "it_dummy_egg"})
 end
 
+-- it_key --
+do
+    DefTiles("it_key", {"it_key", "it_key_1", "it_key_2", "it_key_3", "it_key_4", "it_key_5", "it_key_6", "it_key_7", "it_key_8"})
+end
+
 -- Oil --
 do
     DefSubimages("it_burnable_oil", {h=4})
@@ -866,8 +859,6 @@
     DefStone("st_grate_framed", "sh_grate_framed")
     DefStone("st_portal_horse", "sh_portal_horse")
     DefStone("st_greenbrown", "sh_round")
-    DefStone("st_key_off", "sh_round")
-    DefStone("st_key_on", "sh_round")
     DefStone("st_redbrown", "sh_round")
     DefStone("st_metal")
     DefStone("st_redrock")
@@ -899,23 +890,16 @@
     DefStone("st_yinyang_inactive", "sh_round")
 end
 
+-- st_key --
 do
-    DefAlias("st_key_1_off", "st_key_off")
-    DefAlias("st_key_2_off", "st_key_off")
-    DefAlias("st_key_3_off", "st_key_off")
-    DefAlias("st_key_4_off", "st_key_off")
-    DefAlias("st_key_5_off", "st_key_off")
-    DefAlias("st_key_6_off", "st_key_off")
-    DefAlias("st_key_7_off", "st_floppy_off")
-    DefAlias("st_key_8_off", "st_key_off")
-    DefAlias("st_key_1_on", "st_key_on")
-    DefAlias("st_key_2_on", "st_key_on")
-    DefAlias("st_key_3_on", "st_key_on")
-    DefAlias("st_key_4_on", "st_key_on")
-    DefAlias("st_key_5_on", "st_key_on")
-    DefAlias("st_key_6_on", "st_key_on")
-    DefAlias("st_key_7_on", "st_floppy_on")
-    DefAlias("st_key_8_on", "st_key_on")
+    local images_on =  DefSubimages("st_key_on", {modelname="st_key_on", w=1, h=9})
+    local images_off = DefSubimages("st_key_off", {modelname="st_key_off", w=1, h=9})
+    DefRoundStone("st_key_on", images_on[1])
+    DefRoundStone("st_key_off", images_off[1])
+    for i=1,8 do
+        DefRoundStone("st_key_"..i.."_on", images_on[i+1])
+        DefRoundStone("st_key_"..i.."_off", images_off[i+1])
+    end
 end
 
 ---------------------



From raoul at mail.berlios.de  Sat Nov 28 21:15:09 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sat, 28 Nov 2009 21:15:09 +0100
Subject: [Enigma-game-svn] r1886 - in trunk: attic/images-other data/gfx
	data/gfx64
Message-ID: <200911282015.nASKF93S006963@sheep.berlios.de>

Author: raoul
Date: 2009-11-28 21:15:08 +0100 (Sat, 28 Nov 2009)
New Revision: 1886

Added:
   trunk/attic/images-other/enigma_logo2.png
   trunk/attic/images-other/enigma_logo2_small.png
   trunk/attic/images-other/ic-actor.png
   trunk/attic/images-other/ic-arrow.png
   trunk/attic/images-other/ic-floor.png
   trunk/attic/images-other/ic-item.png
   trunk/attic/images-other/ic-move.png
   trunk/attic/images-other/ic-stone.png
   trunk/attic/images-other/solved.png
   trunk/attic/images-other/unknown.png
   trunk/data/gfx64/it_banana.png
   trunk/data/gfx64/it_cherry.png
   trunk/data/gfx64/it_dummy.png
   trunk/data/gfx64/it_pin.png
   trunk/data/gfx64/it_ring.png
   trunk/data/gfx64/st_panel.png
Removed:
   trunk/data/gfx/enigma_logo2.png
   trunk/data/gfx/enigma_logo2_small.png
   trunk/data/gfx/ic-actor.png
   trunk/data/gfx/ic-arrow.png
   trunk/data/gfx/ic-floor.png
   trunk/data/gfx/ic-item.png
   trunk/data/gfx/ic-move.png
   trunk/data/gfx/ic-stone.png
   trunk/data/gfx/solved.png
   trunk/data/gfx/unknown.png
   trunk/data/gfx64/it-banana.png
   trunk/data/gfx64/it-cherry.png
   trunk/data/gfx64/it-dummy.png
   trunk/data/gfx64/it-key.png
   trunk/data/gfx64/it-pin.png
   trunk/data/gfx64/it-ring.png
   trunk/data/gfx64/st-bigpanel.png
Log:
-> Clean up /data/gfx and move unused gfx to attic
-> Renamed some gfx64 files s.t. they can be used



Copied: trunk/attic/images-other/enigma_logo2.png (from rev 1885, trunk/data/gfx/enigma_logo2.png)

Copied: trunk/attic/images-other/enigma_logo2_small.png (from rev 1885, trunk/data/gfx/enigma_logo2_small.png)

Copied: trunk/attic/images-other/ic-actor.png (from rev 1885, trunk/data/gfx/ic-actor.png)

Copied: trunk/attic/images-other/ic-arrow.png (from rev 1885, trunk/data/gfx/ic-arrow.png)

Copied: trunk/attic/images-other/ic-floor.png (from rev 1885, trunk/data/gfx/ic-floor.png)

Copied: trunk/attic/images-other/ic-item.png (from rev 1885, trunk/data/gfx/ic-item.png)

Copied: trunk/attic/images-other/ic-move.png (from rev 1885, trunk/data/gfx/ic-move.png)

Copied: trunk/attic/images-other/ic-stone.png (from rev 1885, trunk/data/gfx/ic-stone.png)

Copied: trunk/attic/images-other/solved.png (from rev 1885, trunk/data/gfx/solved.png)

Copied: trunk/attic/images-other/unknown.png (from rev 1885, trunk/data/gfx/unknown.png)

Deleted: trunk/data/gfx/enigma_logo2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/enigma_logo2_small.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/ic-actor.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/ic-arrow.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/ic-floor.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/ic-item.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/ic-move.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/ic-stone.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/solved.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx/unknown.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/it-banana.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/it-cherry.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/it-dummy.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/it-key.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/it-pin.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx64/it-ring.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx64/it_banana.png (from rev 1885, trunk/data/gfx64/it-banana.png)

Copied: trunk/data/gfx64/it_cherry.png (from rev 1885, trunk/data/gfx64/it-cherry.png)

Copied: trunk/data/gfx64/it_dummy.png (from rev 1885, trunk/data/gfx64/it-dummy.png)

Copied: trunk/data/gfx64/it_pin.png (from rev 1885, trunk/data/gfx64/it-pin.png)

Copied: trunk/data/gfx64/it_ring.png (from rev 1885, trunk/data/gfx64/it-ring.png)

Deleted: trunk/data/gfx64/st-bigpanel.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx64/st_panel.png (from rev 1885, trunk/data/gfx64/st-bigpanel.png)



From raoul at mail.berlios.de  Sun Nov 29 01:33:49 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 29 Nov 2009 01:33:49 +0100
Subject: [Enigma-game-svn] r1887 - in trunk: attic/images-stones data
	data/gfx16 data/gfx32 data/gfx40 data/gfx48 data/gfx64
Message-ID: <200911290033.nAT0Xn7j028982@sheep.berlios.de>

Author: raoul
Date: 2009-11-29 01:33:39 +0100 (Sun, 29 Nov 2009)
New Revision: 1887

Added:
   trunk/attic/images-stones/sh_rounded-gfx16.xcf
   trunk/attic/images-stones/sh_rounded-gfx32.xcf
   trunk/attic/images-stones/sh_rounded-gfx40.xcf
   trunk/attic/images-stones/sh_rounded-gfx48.xcf
   trunk/attic/images-stones/sh_rounded-gfx64.xcf
   trunk/attic/images-stones/st_mirror-gfx16.xcf
   trunk/attic/images-stones/st_mirror-gfx32.xcf
   trunk/attic/images-stones/st_mirror-gfx40.xcf
   trunk/attic/images-stones/st_mirror-gfx48.xcf
   trunk/attic/images-stones/st_mirror-gfx64.xcf
   trunk/data/gfx16/sh_rounded.png
   trunk/data/gfx16/st_mirror_movable.png
   trunk/data/gfx16/st_mirror_static.png
   trunk/data/gfx32/sh_rounded.png
   trunk/data/gfx32/st_mirror_movable.png
   trunk/data/gfx32/st_mirror_static.png
   trunk/data/gfx40/sh_rounded.png
   trunk/data/gfx40/st_mirror_movable.png
   trunk/data/gfx40/st_mirror_static.png
   trunk/data/gfx48/sh_rounded.png
   trunk/data/gfx48/st_mirror_movable.png
   trunk/data/gfx48/st_mirror_static.png
   trunk/data/gfx64/sh_rounded.png
   trunk/data/gfx64/st_mirror_movable.png
   trunk/data/gfx64/st_mirror_static.png
Removed:
   trunk/data/gfx32/sh-blackball.png
   trunk/data/gfx32/st-mirror-movable.png
   trunk/data/gfx32/st-mirror-static.png
   trunk/data/gfx40/sh-blackball.png
   trunk/data/gfx40/st-mirror-movable.png
   trunk/data/gfx40/st-mirror-static.png
   trunk/data/gfx48/sh-blackball.png
   trunk/data/gfx48/st-mirror-movable.png
   trunk/data/gfx48/st-mirror-static.png
Modified:
   trunk/data/models-2d.lua
Log:
-> New rounded shadows for all resolutions
--> These shadows are less rounded than sh_round
--> Used f.e. for mirror stones 

-> Mirror base images for all resolutions

-> Removed unused blackball shadows



Added: trunk/attic/images-stones/sh_rounded-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_rounded-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_rounded-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_rounded-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_rounded-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_rounded-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_rounded-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_rounded-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_rounded-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_rounded-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_mirror-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_mirror-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_mirror-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_mirror-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_mirror-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_mirror-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_mirror-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_mirror-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_mirror-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_mirror-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/data/gfx16/sh_rounded.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_rounded.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_mirror_movable.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_mirror_movable.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_mirror_static.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_mirror_static.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx32/sh-blackball.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/sh_rounded.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/sh_rounded.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx32/st-mirror-movable.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-mirror-static.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/st_mirror_movable.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_mirror_movable.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_mirror_static.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_mirror_static.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/sh-blackball.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/sh_rounded.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/sh_rounded.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/st-mirror-movable.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-mirror-static.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/st_mirror_movable.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_mirror_movable.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st_mirror_static.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_mirror_static.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/sh-blackball.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/sh_rounded.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/sh_rounded.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/st-mirror-movable.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-mirror-static.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/st_mirror_movable.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_mirror_movable.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st_mirror_static.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_mirror_static.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/sh_rounded.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_rounded.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_mirror_movable.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_mirror_movable.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_mirror_static.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_mirror_static.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-28 20:15:08 UTC (rev 1886)
+++ trunk/data/models-2d.lua	2009-11-29 00:33:39 UTC (rev 1887)
@@ -811,7 +811,7 @@
 do
     DefImage("sh_solid")
     DefImage("sh_round")
-    DefImage("sh_round2")
+    DefImage("sh_rounded")
     DefImage("sh_grate_cross")
     DefImage("sh_grate_framed")
     DefImage("sh_portal_horse")
@@ -1887,7 +1887,7 @@
         for i=1,4 do
                 mname = basename .. i
                 DefOverlay (mname .. "-ovl", {baseimg, overlays[i]})
-                DefShModel(mname, mname .. "-ovl", "sh_round2")
+                DefShModel(mname, mname .. "-ovl", "sh_rounded")
         end
     end
 
@@ -1897,17 +1897,17 @@
     mirrorp_transp1 = FrameNames("st-mirrortempl", 13, 16)
     mirrorp_transp2 = FrameNames("st-mirrortempl", 17, 20)
 
-    make_mirror("st-3mirror-mo", "st-mirror-movable", mirror3_opaque)
-    make_mirror("st-3mirror-so", "st-mirror-static",  mirror3_opaque)
-    make_mirror("st-3mirror-mt", "st-mirror-movable", mirror3_transp)
-    make_mirror("st-3mirror-st", "st-mirror-static",  mirror3_transp)
+    make_mirror("st-3mirror-mo", "st_mirror_movable", mirror3_opaque)
+    make_mirror("st-3mirror-so", "st_mirror_static",  mirror3_opaque)
+    make_mirror("st-3mirror-mt", "st_mirror_movable", mirror3_transp)
+    make_mirror("st-3mirror-st", "st_mirror_static",  mirror3_transp)
 
-    make_mirror("st-pmirror-mo", "st-mirror-movable", mirrorp_opaque)
-    make_mirror("st-pmirror-so", "st-mirror-static",  mirrorp_opaque)
-    make_mirror("st-pmirror-mt", "st-mirror-movable", mirrorp_transp1)
-    make_mirror("st-pmirror-st", "st-mirror-static",  mirrorp_transp1)
-    make_mirror("st-pmirror-mf", "st-mirror-movable", mirrorp_transp2)
-    make_mirror("st-pmirror-sf", "st-mirror-static",  mirrorp_transp2)
+    make_mirror("st-pmirror-mo", "st_mirror_movable", mirrorp_opaque)
+    make_mirror("st-pmirror-so", "st_mirror_static",  mirrorp_opaque)
+    make_mirror("st-pmirror-mt", "st_mirror_movable", mirrorp_transp1)
+    make_mirror("st-pmirror-st", "st_mirror_static",  mirrorp_transp1)
+    make_mirror("st-pmirror-mf", "st_mirror_movable", mirrorp_transp2)
+    make_mirror("st-pmirror-sf", "st_mirror_static",  mirrorp_transp2)
 end
 
 --------------------------



From raoul at mail.berlios.de  Mon Nov 30 19:02:25 2009
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Mon, 30 Nov 2009 19:02:25 +0100
Subject: [Enigma-game-svn] r1888 - in trunk: attic/images-other
	attic/images-stones data data/gfx data/gfx16 data/gfx32
	data/gfx40 data/gfx48 data/gfx64 tools
Message-ID: <200911301802.nAUI2PJX021486@sheep.berlios.de>

Author: raoul
Date: 2009-11-30 19:02:12 +0100 (Mon, 30 Nov 2009)
New Revision: 1888

Added:
   trunk/attic/images-other/inventory-gfx16.xcf
   trunk/attic/images-other/inventory-gfx32.xcf
   trunk/attic/images-other/inventory-gfx40.xcf
   trunk/attic/images-other/inventory-gfx48.xcf
   trunk/attic/images-other/inventory-gfx64.xcf
   trunk/attic/images-stones/sh_beads-gfx16.xcf
   trunk/attic/images-stones/sh_beads-gfx32.xcf
   trunk/attic/images-stones/sh_beads-gfx40.xcf
   trunk/attic/images-stones/sh_beads-gfx48.xcf
   trunk/attic/images-stones/sh_beads-gfx64.xcf
   trunk/attic/images-stones/st_beads-gfx16.xcf
   trunk/attic/images-stones/st_beads-gfx32.xcf
   trunk/attic/images-stones/st_beads-gfx40.xcf
   trunk/attic/images-stones/st_beads-gfx48.xcf
   trunk/attic/images-stones/st_beads-gfx64.xcf
   trunk/attic/images-stones/st_redfiber-gfx16.xcf
   trunk/attic/images-stones/st_redfiber-gfx32.xcf
   trunk/attic/images-stones/st_redfiber-gfx40.xcf
   trunk/attic/images-stones/st_redfiber-gfx48.xcf
   trunk/attic/images-stones/st_redfiber-gfx64.xcf
   trunk/data/gfx16/sh_beads.png
   trunk/data/gfx16/st_beads.png
   trunk/data/gfx16/st_redfiber.png
   trunk/data/gfx32/sh_beads.png
   trunk/data/gfx40/sh_beads.png
   trunk/data/gfx48/sh_beads.png
   trunk/data/gfx64/sh_beads.png
   trunk/data/gfx64/st_beads.png
   trunk/data/gfx64/st_redfiber.png
Removed:
   trunk/data/gfx32/sh_round2.png
   trunk/data/gfx40/sh_round2.png
   trunk/data/gfx48/sh_round2.png
   trunk/data/models-editor.lua
   trunk/data/models-oxyd.lua
   trunk/tools/construct_indizes.12.pas
   trunk/tools/oxydstat/
Modified:
   trunk/data/gfx/Makefile.am
   trunk/data/gfx32/st_beads.png
   trunk/data/gfx32/st_redfiber.png
   trunk/data/gfx40/st_beads.png
   trunk/data/gfx40/st_redfiber.png
   trunk/data/gfx48/st_beads.png
   trunk/data/gfx48/st_redfiber.png
   trunk/data/models-2d.lua
Log:
-> Removed some old unused developer tools
-> Removed unused sh_round2
-> Corrected shadow for st_rubberband (now sh_round)
-> New st_redfiber for all resolutions
-> New st_beads for all resolutions
-> Special shadows for st_beads :-)



Added: trunk/attic/images-other/inventory-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-other/inventory-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-other/inventory-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-other/inventory-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-other/inventory-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-other/inventory-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-other/inventory-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-other/inventory-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-other/inventory-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-other/inventory-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_beads-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_beads-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_beads-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_beads-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_beads-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_beads-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_beads-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_beads-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/sh_beads-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/sh_beads-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_beads-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_beads-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_beads-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_beads-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_beads-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_beads-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_beads-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_beads-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_beads-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_beads-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_redfiber-gfx16.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_redfiber-gfx16.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_redfiber-gfx32.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_redfiber-gfx32.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_redfiber-gfx40.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_redfiber-gfx40.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_redfiber-gfx48.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_redfiber-gfx48.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Added: trunk/attic/images-stones/st_redfiber-gfx64.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/attic/images-stones/st_redfiber-gfx64.xcf
___________________________________________________________________
Name: svn:mime-type
   + image/x-xcf

Modified: trunk/data/gfx/Makefile.am
===================================================================
--- trunk/data/gfx/Makefile.am	2009-11-29 00:33:39 UTC (rev 1887)
+++ trunk/data/gfx/Makefile.am	2009-11-30 18:02:12 UTC (rev 1888)
@@ -1,6 +1,6 @@
 SUBDIRS = flags25x15
 
 pkgdatadir = $(datadir)/@PACKAGE@/gfx
-pkgdata_DATA = $(wildcard $(srcdir)/*.png $(srcdir)/*.jpg)
+pkgdata_DATA = $(wildcard $(srcdir)/*.png)
 
 EXTRA_DIST = $(pkgdata_DATA)

Added: trunk/data/gfx16/sh_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/sh_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx16/st_redfiber.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx16/st_redfiber.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/sh_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/sh_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx32/sh_round2.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_beads.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx32/st_redfiber.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx40/sh_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/sh_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/sh_round2.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_beads.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx40/st_redfiber.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx48/sh_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/sh_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/sh_round2.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_beads.png
===================================================================
(Binary files differ)

Modified: trunk/data/gfx48/st_redfiber.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx64/sh_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/sh_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_beads.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_beads.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx64/st_redfiber.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx64/st_redfiber.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-11-29 00:33:39 UTC (rev 1887)
+++ trunk/data/models-2d.lua	2009-11-30 18:02:12 UTC (rev 1888)
@@ -824,6 +824,7 @@
     DefImage("sh_brake")
     DefImage("sh_floating")
     DefImage("sh_jamb")
+    DefImage("sh_beads")
     -- Note: Window shadows are defined where needed.
 end
 
@@ -831,7 +832,7 @@
 -- simple stones --
 -------------------
 do
-    DefStone("st_beads", "sh_glass")
+    DefStone("st_beads", "sh_beads")
     DefStone("st_passage_black_square", "sh_round")
     DefStone("st_passage_black_slash", "sh_passage_slash")
     DefStone("st_passage_black_cross", "sh_passage_cross")
@@ -874,7 +875,7 @@
     DefStone("st_concrete", "sh_round")
     DefStone("st_ancient", "sh_round")
     DefStone("st_brownmarble")
-    DefStone("st_rubberband")
+    DefStone("st_rubberband", "sh_round")
     DefStone("st_brownpyramide")
     DefStone("st_redmarble")
     DefStone("st_surprise", "sh_round")

Deleted: trunk/data/models-editor.lua
===================================================================
--- trunk/data/models-editor.lua	2009-11-29 00:33:39 UTC (rev 1887)
+++ trunk/data/models-editor.lua	2009-11-30 18:02:12 UTC (rev 1888)
@@ -1,19 +0,0 @@
-------------------------------------------------------------------------
--- Copyright (C) 2002,2003 Daniel Heck
---
--- This program is free software; you can redistribute it and/or
--- modify it under the terms of the GNU General Public License
--- as published by the Free Software Foundation; either version 2
--- of the License, or (at your option) any later version.
---  
--- This program is distributed in the hope that it will be useful,
--- but WITHOUT ANY WARRANTY; without even the implied warranty of
--- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
--- GNU General Public License for more details.
---  
--- You should have received a copy of the GNU General Public License along
--- with this program; if not, write to the Free Software Foundation, Inc.,
--- 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
---
--- $Id: models-editor.lua,v 1.1 2003/03/05 22:08:02 dheck Exp $
-------------------------------------------------------------------------

Deleted: trunk/data/models-oxyd.lua
===================================================================
--- trunk/data/models-oxyd.lua	2009-11-29 00:33:39 UTC (rev 1887)
+++ trunk/data/models-oxyd.lua	2009-11-30 18:02:12 UTC (rev 1888)
@@ -1,23 +0,0 @@
-------------------------------------------------------------------------
--- Copyright (C) 2002,2003 Daniel Heck
---
--- This program is free software; you can redistribute it and/or
--- modify it under the terms of the GNU General Public License
--- as published by the Free Software Foundation; either version 2
--- of the License, or (at your option) any later version.
---  
--- This program is distributed in the hope that it will be useful,
--- but WITHOUT ANY WARRANTY; without even the implied warranty of
--- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
--- GNU General Public License for more details.
---  
--- You should have received a copy of the GNU General Public License along
--- with this program; if not, write to the Free Software Foundation, Inc.,
--- 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
---
--- $Id: models-oxyd.lua,v 1.1 2003/02/26 11:23:19 dheck Exp $
-------------------------------------------------------------------------
-
--- This file creates models from Oxyd's .dat files.
-
-Require("models.lua")

Deleted: trunk/tools/construct_indizes.12.pas
===================================================================
--- trunk/tools/construct_indizes.12.pas	2009-11-29 00:33:39 UTC (rev 1887)
+++ trunk/tools/construct_indizes.12.pas	2009-11-30 18:02:12 UTC (rev 1888)
@@ -1,722 +0,0 @@
-
-program construct_indizes;
-
-{ Transforms a tab-separated level-table into index-files and   }
-{ moves the necessary files into newly created directories,     }
-{ thereby removing CRs and adding a line ending at the fileend. }
-
-{ Syntax: construct_indizes < leveldata.dat }
-
-{ Options:
-   -n   --nofiles   : Don't move or rename files
-   -f   --flat      : Flat mode: simply transform the given file, induces -n
-   -r   --ratings   : Use ratings, don't create index_*_ratings
-   -b   --noratings : ('blank') Don't create index_*_ratings
-   -m   --rename    : Rename lua/xml-files
-   -on  --oldnames  : Use old filenames
-   -nn  --newnames  : Use new filenames
-   -h   --help  -?  : Help
-   -c   --check     : Check level files induces -l
-   -l   --lf        : Remove LF from level files }
-
-const
-  Separator = #9;  { e.g. ';' or #9 = tab;
-                     beware: the separator should not appear in the datafields! }
-  NrColumns = 14;
-  Columntitles : array[1..NrColumns] of AnsiString
-    = ('oldname', 'title', 'author', 'indexname', 'easymode', 'par_time', 'par_time_normal',
-       'par_time_easy', 'revision', 'int', 'dex', 'pat', 'kno', 'spe');
-  ColumntitlesInIndex : array[1..NrColumns] of AnsiString
-    = ('file', 'name', 'author', 'indexname', 'easymode', 'par_time', 'par_time_normal',
-       'par_time_easy', 'revision', 'int', 'dex', 'pat', 'kno', 'spe');  
-  Columnquotation : array[1..NrColumns] of AnsiString
-    = ('', '"', '"', '', '', '', '', '', '', '', '', '', '', '');
-  MaxDirectories = 142;
-  MaxLevels = 10000;
-  MaxIndizes = 100;
-  MaxComments = 5;
-  
-  filename_NotASCII = 'not_ascii.txt';
-  filename_NoFile = 'level_not_found.txt';
-  filename_NoPng = 'png_not_found.txt';
-  filename_Debug = 'debug.txt';
-  filename_IndexLua = 'index.lua.masked';
-  filename_Netplay1 = 'index_netplay.txt';
-  filename_Netplay2 = 'index_netplay_ratings.txt';
-  
-  option_movefiles : boolean = TRUE;
-  option_flatmode : boolean = FALSE;
-  option_use_ratings : boolean = FALSE;
-  option_create_ratingsindex : boolean = TRUE;
-  option_new_filenames : boolean = FALSE;
-  option_rename : boolean = FALSE;
-  option_check_files : boolean = FALSE;
-  option_lf : boolean = FALSE;
-
-  col_directory = 'directory';
-  col_oldname = 'oldname';
-  col_newname = 'newname';
-  col_indexname = 'indexname';
-  col_revision = 'revision';
-  col_comment = 'title';
-  col_pack = 'nPack';
-  col_pack_nr = 'Nr';
-  col_oldpack = 'oPack2';
-  col_oldpack_nr = 'oNr';
-  col_netplay = 'Np';
-  col_netplay_nr = 'Np';
-  col_tutorial = 'Tut';
-  col_tutorial_nr = 'Tut';
-
-type
-  TypIndex = object
-	       name, file_rated, file_unrated : AnsiString;
-	       rated, unrated : array[0..MaxLevels] of AnsiString;
-               comment : array[0..MaxLevels, 1..MaxComments] of AnsiString;
-               empty : longint;
-               procedure Init;
-	       procedure Save;
-	       procedure AddLevel(r, ur : AnsiString; j : longint);
-               procedure AddComment(comm : AnsiString; j : longint);
-	     end;
-
-
-var  { global variables }
-  f_notascii, f_nofile, f_nopng, f_debug : text;  { several files for output }
-  f_indexlua : text;
-  cr : longint;  { counts CR's }
-  Header : AnsiString;
-  Columns, Count : longint;
-  directorylist : array[1..MaxDirectories] of AnsiString;
-  lastentry : 1..MaxDirectories;
-  netplay, tutorial : TypIndex;
-  index : array[1..MaxIndizes] of TypIndex;
-
-procedure closeandhalt;
-begin
-  {$I-}
-  if option_movefiles then begin
-    close(f_notascii);
-    close(f_nofile);
-    close(f_nopng);
-  end;
-  close(f_debug);
-  close(f_indexlua);
-  {$I+}
-  halt;
-end;
-
-function tostring(x : longint) : AnsiString;
-var st : AnsiString; begin str(x,st); tostring := st; end;
-function toint(st : AnsiString) : longint;
-var x : longint; c : word;
-begin val(st,x,c); if c <> 0 then x := 0; toint := x; end;
-
-procedure critical(st : AnsiString);
-begin
-  writeln(stderr, 'Critical error: ' + st);
-  writeln(stderr, 'Exiting now.');
-  writeln(f_debug, 'Critical error: ' + st);
-  writeln(f_debug, 'Exiting now.');
-  closeandhalt;  
-end;
-
-procedure TypIndex.Save;
-var f : text; j, k : longint;
-begin
-  assign(f, file_unrated);
-  rewrite(f);
-  for j := 0 to empty - 1 do begin
-    for k := 1 to MaxComments do
-      if comment[j,k] <> '' then
-	writeln(f, comment[j,k]);
-    if unrated[j] <> '' then
-      writeln(f, unrated[j]);
-  end;
-  close(f);
-  if option_create_ratingsindex then begin
-    assign(f, file_rated);
-    rewrite(f);
-    for j := 0 to empty - 1 do begin
-      for k := 1 to MaxComments do
-	if comment[j,k] <> '' then
-	  writeln(f, comment[j,k]);      
-      if rated[j] <> '' then
-        writeln(f, rated[j]);
-    end;
-    close(f);
-  end;
-end;
-procedure TypIndex.Init;
-var j, k : longint;
-begin
-  for j := 0 to MaxLevels do begin
-    rated[j] := '';
-    unrated[j] := '';
-    for k := 1 to MaxComments do
-      comment[j,k] := '';
-  end;
-  empty := 1;
-  name := '';
-  file_rated := 'index_dummy.txt';
-  file_unrated := 'index_dummy_ratings.txt';
-end;
-procedure TypIndex.AddLevel(r, ur : AnsiString; j : longint);
-begin
-  writeln(f_debug, 'Trying to add a level as number ' + tostring(j)
-	  + ' to index ' + name + '...');
-  if empty > MaxLevels then
-    critical('Too much levels for index ' + name + '.');
-  if (rated[j] = '') and (unrated[j] = '') then begin
-    rated[j] := r;
-    unrated[j] := ur;
-    if j + 1 > empty then
-      empty := j + 1;
-  end else if (rated[j] = '') or (unrated[j] = '') then begin
-    critical('Indexrecords became inconsistent at line ' + tostring(count)
-	     + '. Very strange, indeed.');
-  end else begin
-    rated[empty] := r;
-    unrated[empty] := ur;
-    inc(empty);
-  end;
-  if empty <= MaxLevels then
-    if (rated[empty] <> '') or (unrated[empty] <> '') then
-      critical('Addlevel failed for position ' + tostring(j) + ' in pack ' + name + '.');
-end;
-procedure TypIndex.AddComment(comm: AnsiString; j : longint);
-var found : boolean; k : longint;
-begin
-  writeln(f_debug, 'Trying to add a comment to number ' + tostring(j)
-	  + ' of index ' + name + '...');
-  found := false;
-  for k := 1 to MaxComments do
-    if (not found) and (comment[j,k] = '') then begin
-      comment[j,k] := comm;
-      found := true;
-    end;
-  if not found then begin
-    writeln(stderr, 'WARNING: Too many comments for position ' + tostring(j) +
-	    ' in index ' + name + '!');
-    writeln(f_debug, 'WARNING: Too many comments for position ' + tostring(j) +
-	    ' in index ' + name + '!');
-  end;
-end;
-
-function ExtractColumn(st : AnsiString; colnr : longint) : AnsiString;
-var searched : AnsiString; j : longint;
-begin
-  searched := st;
-  for j := 1 to colnr - 1 do
-    searched := copy(searched, pos(Separator, searched) + 1, length(searched));  
-  searched := copy(searched, 1, pos(Separator, searched) - 1);
-  ExtractColumn := searched;
-end;
-function ExtractByTitle(st : AnsiString; name : AnsiString) : AnsiString;
-var j, k : longint; st2 : AnsiString;
-begin
-  k := 0;
-  if pos(name, Header) = 0 then
-    critical('Header incomplete, I''m missing the identifier ' + name + '.');
-  for j := 1 to Columns do
-    if (k = 0) and (ExtractColumn(Header, j) = name) then
-      k := j;
-  st2 := ExtractColumn(st, k);
-  if (st2 = '') and (name = col_indexname) then
-    st2 := ExtractByTitle(st, col_oldname);
-  if name = col_oldpack then
-    st2 := 'old_' + st2;    
-  ExtractByTitle := st2;
-end;
-
-function NewNameWithRevision(st : AnsiString) : AnsiString;
-var nn, rev : AnsiString;
-begin
-  nn := ExtractByTitle(st, col_newname);
-  if (pos('_', nn) = 0) and (ExtractByTitle(st, col_directory) <> 'lib') then begin
-    rev := ExtractByTitle(st, col_revision);
-    if rev = '' then rev := '1';
-    nn := nn + '_' + rev;
-  end;
-  NewNameWithRevision := nn;
-end;
-
-function ConvertLine(st, destdir : AnsiString; ratings : boolean) : AnsiString;
-var newst, filename : AnsiString; {j,} k, totalcols : longint;
-    {colnr : array[1..NrColumns] of longint; }
-begin
-  { First, we analyse the Header. Yes, you're right: We analyse the Header
-    again and again, each time we enter this procedure, and the result will
-    always be the same. Not very efficient, but who cares? }
-  {j := 1;
-  for k := 1 to NrColumns do colnr[k] := 0;  
-  repeat
-    newst := ExtractColumn(Header, j);
-    for k := 1 to NrColumns do
-      if newst = Columntitles[k] then colnr[k] := j;
-    inc(j);
-  until (colnr[1] <> 0) and (newst = '');}
-  { Now, as we know where to search for, we can construct our converted line: }
-  { The filename-entry is special, it contains destdir: }
-  newst := '';
-  if option_new_filenames xor option_rename then    
-    filename := NewNameWithRevision(st)  {ExtractByTitle(st, col_newname)}
-  else
-    filename := ExtractByTitle(st, col_oldname);
-  if filename <> '' then begin
-    newst := '{  ' + newst + ColumntitlesInIndex[1] + '=' + destdir + '/'
-      + Columnquotation[1] + filename + Columnquotation[1] + '  ';
-    { Now we look at the other entries: }
-    if ratings or option_use_ratings then
-      totalcols := NrColumns else totalcols := NrColumns - 5;
-    for k := 2 to totalcols do
-      if (ExtractByTitle(st, Columntitles[k]) <> '') then begin
-        newst := newst + ColumntitlesInIndex[k] + '=' + Columnquotation[k]
-                       + ExtractByTitle(st, Columntitles[k])
-                       + Columnquotation[k] + '  ';
-      end;
-    newst := newst + '}';
-    if newst = '{  }' then newst := '';
-  end else
-    newst := '';
-  ConvertLine := newst;
-end;
-
-function SearchPack(pack : AnsiString) : longint;
-var j, k, nr : longint; found : boolean;
-begin
-  nr := -1;
-  if not ((pack = '') or (pack = '0')) then begin
-    found := false;
-    for j := 1 to MaxIndizes do
-      if (not found) and (index[j].name = pack) then begin
-        found := true;
-	nr := j;
-      end;
-    if not found then begin
-      k := 0;
-      for j := 1 to MaxIndizes do
-        if (k = 0) and (index[j].name = '') then k := j;
-      writeln(stderr, 'Creating index ' + pack + ' as number ' + tostring(k) + '.');
-      writeln(f_debug, 'Creating index ' + pack + ' as number ' + tostring(k) + '.');
-      index[k].Init;
-      index[k].name := pack;
-      index[k].file_unrated := 'index_' + pack + '.txt';
-      index[k].file_rated := 'index_' + pack + '_ratings.txt';
-      nr := k;
-    end;
-  end;
-  SearchPack := nr;
-end;
-
-procedure SearchAndAddCommentToPack(pack, comm : AnsiString; pos : longint);
-var j : longint;
-begin
-  j := SearchPack(pack);
-  if j <> -1 then
-    index[j].AddComment(comm, pos);
-end;
-
-procedure SearchAndAddToPack(pack, rated, unrated : AnsiString; pos : longint);
-var j : longint;
-begin
-  j := SearchPack(pack);
-  if j <> -1 then
-    index[j].AddLevel(rated, unrated, pos);
-end;
-
-procedure AddLevelToIndizes(st : AnsiString);
-var destdir, rated, unrated, pack, oldpack, net, tut : AnsiString;
-  pack_nr, oldpack_nr, net_nr, tut_nr : longint;
-begin
-  { Each level can exist in four different Indizes:
-      1. Its enigma-, clones- or puretutorial-pack (real packs)
-      2. Its old enigma-pack (purely virtual)
-      3. netplay-pack (purely virtual)
-      4. tutorial-pack (purely virtual)
-    Position 1:  col_pack / col_pack_nr
-    Position 2:  col_oldpack / col_oldpack_nr
-    Position 3:  col_netplay / col_netplay_nr
-    Position 4:  col_tutorial / col_tutorial_nr
-  }
-  destdir := ExtractByTitle(st, col_directory);
-  rated := ConvertLine(st, destdir, TRUE);
-  unrated := ConvertLine(st, destdir, FALSE);
-  pack := ExtractByTitle(st, col_pack);
-  pack_nr := toint(ExtractByTitle(st, col_pack_nr));
-  oldpack := ExtractByTitle(st, col_oldpack);
-  oldpack_nr := toint(ExtractByTitle(st, col_oldpack_nr));
-  net := ExtractByTitle(st, col_netplay);
-  net_nr := toint(ExtractByTitle(st, col_netplay_nr));
-  tut := ExtractByTitle(st, col_tutorial);
-  tut_nr := toint(ExtractByTitle(st, col_tutorial_nr));
-  writeln(stderr, 'Line ', count, ' appending to ', pack, ' and ', oldpack, '.');	  
-  writeln(f_debug, 'Line ', count, ' appending to ', pack, ' and ', oldpack, '.');
-  { First, search for pack and oldpack. }
-  if pack <> 'tutorial' then
-    SearchAndAddToPack(pack, rated, unrated, pack_nr);
-  if (oldpack <> 'tutorial') and (oldpack <> pack) then
-    SearchAndAddToPack(oldpack, rated, unrated, oldpack_nr);
-  { Then add to netplay and tutorial. }
-  if (net <> '') and (net <> '0') then
-    netplay.AddLevel(rated, unrated, net_nr);
-  if (tut <> '') and (tut <> '0') then
-    tutorial.AddLevel(rated, unrated, tut_nr);
-end;
-
-
-procedure MoveLevelfile(destdir, oldname, newname : AnsiString);
-var fulloldname, fullnewname : AnsiString; fin, fout : file of byte;
-  ioerr : longint; b : byte;
-begin
-  { First, find the right filename: lua or xml? }
-  fulloldname := oldname + '.lua';
-  fullnewname := newname + '.lua';
-  {$I-}   { deactivate automatical I/O-checking }
-  assign(fin, fulloldname);
-  reset(fin);
-  ioerr := IOResult;
-  {$I+}
-  if ioerr = 2 then begin { not found, maybe xml? }
-    fulloldname := oldname + '.xml';
-    fullnewname := newname + '.xml';
-    {$I-}
-    assign(fin, fulloldname);
-    reset(fin);
-    ioerr := IOResult;
-    {$I+}
-  end;
-  if ioerr = 2 then  { No xml also? Append to error-file! }
-    writeln(f_nofile, 'Levelfile not found: ', oldname, ' for directory ', destdir, '.')
-  else if ioerr <> 0 then
-    critical('I/O-Error Nr ' + tostring(ioerr) + ' while trying to open some file like '
-	     + oldname + '.lua/xml.')
-  else begin
-    { Okay, at this point fin holds the original file, fulloldname and fullnewname }
-    { ehm... well... the full old name and the full new name... }  
-    {$I-}
-    assign(fout, destdir + '/' + fullnewname);
-    rewrite(fout);
-    ioerr := IOResult;
-    {$I+}
-    if ioerr <> 0 then begin
-      close(fin);
-      critical('I/O-Error Nr ' + tostring(ioerr) +
-	      ' while trying to write to file ' + destdir + '/' + fullnewname);
-    end;
-    while not eof(fin) do begin
-      read(fin, b);
-      if option_lf and (b = 13) then
-	inc(cr) { delete CRs, but count their total }
-      else begin
-        if option_check_files then begin
-          if (b = 9) or (b = 10) or (b = 13) or ((b >= 23) and (b <= 126)) then
-            write(fout, b)  { write ASCII }          
-          else begin
-            writeln(f_notascii, 'Not-ASCII Nr. ', b, ' (', chr(b), ') found in file ',
-  	          fulloldname, '.');
-            write(fout, b);  { warn, but use same symbols }
-          end
-        end else
-          write(fout, b);
-      end;
-    end;
-    if option_check_files then
-      write(fout, 10); { end in newline }
-    close(fout);
-    close(fin);	 
-    erase(fin);
-  end;
-end;
-
-procedure MovePng(destdir, oldname, newname : AnsiString);
-var fulloldname : AnsiString; fin, fout : file of byte;
-  ioerr : longint; b : byte;
-begin
-  fulloldname := oldname + '.png';
-  {fullnewname := newname + '.png';}
-  {$I-}   { deactivate automatical I/O-checking }
-  assign(fin, fulloldname);
-  reset(fin);
-  ioerr := IOResult;
-  {$I+}
-  if ioerr = 2 then begin { not found, maybe an auto-thumbnail? }
-    fulloldname := '1_1_' + oldname + '.png';
-    {fullnewname := '1_1_' + newname + '.png';}
-    {$I-}
-    assign(fin, fulloldname);
-    reset(fin);
-    ioerr := IOResult;
-    {$I+}
-  end;
-  if ioerr = 2 then begin { not found, maybe an auto-thumbnail from the alle-directory }
-    fulloldname := '1_1_alle_' + oldname + '.png';
-    {fullnewname := '1_1_alle_' + newname + '.png';}
-    {$I-}
-    assign(fin, fulloldname);
-    reset(fin);
-    ioerr := IOResult;
-    {$I+}
-  end;
-  if ioerr = 2 then  { No png nowhere? Append to error-file! }    
-    writeln(f_nopng, 'Thumbnail not found: ', oldname, ' for directory ', destdir, '.')
-  else if ioerr <> 0 then begin
-    critical('I/O-Error Nr ' + tostring(ioerr) + ' while trying to open some file like '
-			+ oldname + '.png.');
-  end else begin
-    { Okay, at this point fin holds the original file. }  
-    {$I-}
-    assign(fout, destdir + '/' + newname + '.png');
-    rewrite(fout);
-    ioerr := IOResult;
-    {$I+}
-    if ioerr <> 0 then begin
-      close(fin);
-      critical('I/O-Error Nr ' + tostring(ioerr) +
-	       ' while trying to write to file ' + destdir + '/' + newname + '.png');
-    end;
-    while not eof(fin) do begin
-      read(fin, b);
-      write(fout, b);  { Just copy... }
-    end;
-    close(fout);
-    close(fin);	 
-    erase(fin);
-  end;
-end;
-
-procedure AnalyzeHeader;
-begin
-  { First, we search for the headline, which includes the word "filename": }    
-  repeat
-    readln(input, Header);
-    inc(count);
-  until (pos(Columntitles[1], Header) <> 0) or eof(input);
-  if eof(input) then
-    critical('Header not found!');
-  Columns := length(Header);  { Yes, I know, I know... }  
-  writeln(f_debug, 'AnalyzeHeader: ');
-  writeln(f_debug, Header);
-end;
-
-procedure CreateDirectory(destdir : AnsiString);
-var directoryfound : boolean; p : longint;
-begin
-  { Here we have a small problem: If we try to make a directory a second }
-  { time, we get a runtime error 5 back, even though using $I-. So we    }
-  { use some array to save the names of already created directories.     }
-  { If we create a new directory, we should also add a corresponding     }
-  { line in index.lua.                                                   }
-  directoryfound := false;
-  for p := 1 to MaxDirectories do
-    if destdir = directorylist[p] then directoryfound := true;
-  if not directoryfound then begin    
-    writeln(stderr, 'Making Directory ', destdir, '...');
-    writeln(f_debug, 'Making Directory ', destdir, '...');
-    mkdir(destdir);
-    directorylist[lastentry] := destdir;
-    inc(lastentry);
-    if lastentry >= MaxDirectories then begin
-      writeln(stderr,
-	'Please increase my MaxDirectories-number, this''s not enough. Exiting now.');
-      writeln(f_debug,
-	'Please increase my MaxDirectories-number, this''s not enough. Exiting now.');
-      closeandhalt;
-    end;
-  end;
-end;
-
-procedure Init;
-var p : longint;
-begin
-  write(stderr, 'Initialising...');
-  { "Count" counts the line-number for debugging-reasons. }
-  count := 0;
-  { cr counts, ... well... CR's... }
-  cr := 0;
-  { We'll explain directorylist later... just initialize it here. }
-  for p := 1 to MaxDirectories do directorylist[p] := '';
-  lastentry := 1;
-  { Open several errorfiles: }
-  assign(f_debug, filename_Debug);
-  assign(f_indexlua, filename_IndexLua);
-  rewrite(f_debug);
-  rewrite(f_indexlua);
-  if option_movefiles then begin
-    assign(f_notascii, filename_NotASCII);
-    assign(f_nofile, filename_NoFile);
-    assign(f_nopng, filename_NoPng);
-    rewrite(f_notascii);
-    rewrite(f_nofile);
-    rewrite(f_nopng); 
-  end;
-  { Initialise packs. }
-  for p := 1 to MaxIndizes do
-    index[p].Init;
-  netplay.Init;
-  netplay.name := 'netplay';
-  netplay.file_unrated := 'index_netplay.txt';
-  netplay.file_rated := 'index_netplay_ratings.txt';
-  tutorial.Init;
-  tutorial.name := 'tutorial';
-  tutorial.file_unrated := 'tutorial/index_tutorial.txt';
-  tutorial.file_rated := 'tutorial/index_tutorial_ratings.txt';
-  if not option_flatmode then
-    CreateDirectory('tutorial');
-  writeln(stderr, ' ready, go!');
-  writeln(f_debug, 'Initialisation completed.');
-end;
-
-procedure WriteIndexLuaLine(i : TypIndex);
-begin
-  writeln(f_indexlua,'enigma.AddLevelPack("levels/', i.file_unrated,'", "',i.name,'")');
-  if option_create_ratingsindex then
-    writeln(f_indexlua,'--enigma.AddLevelPack("levels/', i.file_rated,'", "',i.name, '")');
-end;
-procedure WriteIndexLua;
-var j : longint;
-begin
-  WriteIndexLuaLine(tutorial);
-  for j := 1 to MaxIndizes do
-    if index[j].name <> '' then
-      WriteIndexLuaLine(index[j]);
-  WriteIndexLuaLine(netplay);
-end;
-
-procedure WorkAboutInputString(st : AnsiString);
-var  destdir, oldname, newname, comm, pack : AnsiString; pos : longint;
-begin
-  { Extract destfile, destdir and levelname from input AnsiString: }
-  destdir := ExtractByTitle(st, col_directory);
-  if destdir = '' then destdir := 'unassigned';
-  { nowhere: Ignore. comment: Verbal. }
-  if destdir = 'nowhere' then begin
-  end else if destdir = 'comment' then begin
-    { Add the comment located in col_comment verbally into (real) level index. }
-    pack := ExtractByTitle(st, col_pack);
-    pos := toint(ExtractByTitle(st, col_pack_nr));
-    comm := ExtractByTitle(st, col_comment);
-    SearchAndAddCommentToPack(pack, comm, pos);
-  end else begin
-    { Extract old and new filenames (that's complicated, bwaha!). }
-    if option_new_filenames then begin
-      oldname := NewNameWithRevision(st); {ExtractByTitle(st, col_newname);}
-      newname := ExtractByTitle(st, col_oldname);
-    end else begin
-      oldname := ExtractByTitle(st, col_oldname);
-      newname := NewNameWithRevision(st); {ExtractByTitle(st, col_newname);}
-    end;
-    if not option_rename then
-      newname := oldname;
-    { Make the directory, if not existing. }
-    CreateDirectory(destdir);
-    { Move the lua/xml-file and the png, if neccessary, rename: }
-    if option_movefiles then begin
-      writeln(f_debug, 'Trying to move file ', oldname, ' to ', destdir, ' / ', newname);
-      MoveLevelfile(destdir, oldname, newname);
-      MovePng(destdir, oldname, newname);
-    end;
-    { Now append to the indices: }
-    writeln(f_debug, 'Trying to append to indices...');
-    AddLevelToIndizes(st);
-  end;
-end;
-
-procedure DoParameter(st : AnsiString);
-begin
-  st := Lowercase(st);
-  if (st = '--help') or (st = '-h') or (st = '-?') or (st = '?') then begin
-    writeln(stderr);
-    writeln(stderr, 'Usage: ');
-    writeln(stderr, '  ./construct_indizes.9 [options] < leveldaten.txt');
-    writeln(stderr, 'Constructs level indices and directories from a single');
-    writeln(stderr, 'tab-separated and sorted file-table, and a working');
-    writeln(stderr, 'directory full of level files and thumbnails.');
-    writeln(stderr, '-n, --nofiles : Suppress moving files. The indexfiles');
-    writeln(stderr, '    will still use the calculated path and will be');
-    writeln(stderr, '    created in the new directories.');
-    writeln(stderr, '-f, --flat : Simply transform the given table to stdout.');
-    writeln(stderr, '-r, --ratings : Use ratings, don''t create index_*_ratings.');
-    writeln(stderr, '-b, --noratings : Don''t create index_*_ratings.');
-    writeln(stderr, '-on, --oldnames : Use old filename-column (default).');
-    writeln(stderr, '-nn, --newnames : Use new filename-column.');
-    writeln(stderr, '-m, --rename : Rename from old to new (-nn: vice versa).');
-    writeln(stderr, '-c, --check : Check level files (ASCII, LF+FF, final FF; def.off)');
-    writeln(stderr, '-l, --lf : Remove LF from files (part of -c, def.off).');
-    writeln(stderr, '-h, --help, -?, ? : This help.');
-    writeln(stderr);
-    halt;
-  end else if (st = '--nofiles') or (st = '-n') then begin
-    option_movefiles := FALSE;
-  end else if (st = '-f') or (st = '--flat') then begin
-    option_movefiles := FALSE;
-    option_flatmode := TRUE;
-  end else if (st = '-r') or (st = '--ratings') then begin
-    option_use_ratings := TRUE;
-    option_create_ratingsindex := FALSE;
-  end else if (st = '-b') or (st = '--noratings') then begin
-    option_create_ratingsindex := FALSE;
-  end else if (st = '-on') or (st = '--oldnames') then begin
-    option_new_filenames := FALSE;
-  end else if (st = '-nn') or (st = '--newnames') then begin
-    option_new_filenames := TRUE;
-  end else if (st = '-m') or (st = '--rename') then begin
-    option_rename := TRUE;
-  end else if (st = '-c') or (st = '--check') then begin
-    option_check_files := TRUE;
-    option_lf := TRUE;
-  end else if (st = '-l') or (st = '--lf') then begin
-    option_lf := TRUE;
-  end else begin
-    writeln(stderr);
-    writeln(stderr, 'Parameter unknown: ', st);
-    DoParameter('?');
-  end;
-end;
-
-var
-  j : longint; st : AnsiString;
-
-begin
-  { Look for parameters: }
-  for j := 1 to Paramcount do DoParameter(Paramstr(j));
-  { Initialize some variables and the error-files: }
-  Init;
-  { Then we find and analyze the Header: }
-  AnalyzeHeader;
-  { As next, we parse the whole table, open each destination via "append"
-    and construct the index-entry. }
-  if not option_flatmode then
-    writeln(f_debug);
-  while not eof(input) do begin
-    readln(input, st);
-    inc(count);
-    if option_flatmode then
-      writeln(output, ConvertLine(st, ExtractByTitle(st, col_directory), option_use_ratings))
-    else
-      WorkAboutInputString(st);
-    if not option_flatmode then
-      writeln(f_debug);
-  end;
-  if not option_flatmode then begin
-    writeln(stderr, 'Saving indizes.');
-    writeln(f_debug, 'Saving indizes.');
-    netplay.Save;
-    tutorial.Save;
-    for j := 1 to MaxIndizes do
-      if index[j].name <> '' then
-	index[j].Save;
-    WriteIndexLua;
-  end;
-  { finally, output the number of CR's }
-  if option_movefiles then
-    writeln(f_notascii, 'Total number of deleted CRs: ', cr);
-  closeandhalt;
-end.
-
-
-
-
-
-
-



