<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1690 - in trunk: data data/gfx32 data/gfx40	data/gfx48 data/levels/lib src src/gui src/items src/stones
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1690%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20data/levels/lib%20src%20src/gui%20src/items%20src/stones&In-Reply-To=%3C200905282235.n4SMZgnK000664%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001118.html">
   <LINK REL="Next"  HREF="001120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1690 - in trunk: data data/gfx32 data/gfx40	data/gfx48 data/levels/lib src src/gui src/items src/stones</H1>
    <B>ral at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1690%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20data/levels/lib%20src%20src/gui%20src/items%20src/stones&In-Reply-To=%3C200905282235.n4SMZgnK000664%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1690 - in trunk: data data/gfx32 data/gfx40	data/gfx48 data/levels/lib src src/gui src/items src/stones">ral at mail.berlios.de
       </A><BR>
    <I>Fri May 29 00:35:42 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001118.html">[Enigma-game-svn] r1689 - in trunk/data: . levels/lib
</A></li>
        <LI>Next message: <A HREF="001120.html">[Enigma-game-svn] r1691 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items src/stones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1119">[ date ]</a>
              <a href="thread.html#1119">[ thread ]</a>
              <a href="subject.html#1119">[ subject ]</a>
              <a href="author.html#1119">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-05-29 00:35:28 +0200 (Fri, 29 May 2009)
New Revision: 1690

Added:
   trunk/data/gfx32/it_blocker.png
   trunk/data/gfx32/it_coin_l.png
   trunk/data/gfx32/it_coin_m.png
   trunk/data/gfx32/it_coin_s.png
   trunk/data/gfx32/it_laser.png
   trunk/data/gfx32/it_magnet_off.png
   trunk/data/gfx32/it_magnet_on.png
   trunk/data/gfx32/it_pipe.png
   trunk/data/gfx32/it_seed.png
   trunk/data/gfx32/it_shogun_l.png
   trunk/data/gfx32/it_shogun_m.png
   trunk/data/gfx32/it_shogun_s.png
   trunk/data/gfx32/it_trigger.png
   trunk/data/gfx32/it_vortex.png
   trunk/data/gfx32/it_wormhole.png
   trunk/data/gfx40/it_blocker.png
   trunk/data/gfx40/it_coin_l.png
   trunk/data/gfx40/it_coin_m.png
   trunk/data/gfx40/it_coin_s.png
   trunk/data/gfx40/it_laser.png
   trunk/data/gfx40/it_magnet_off.png
   trunk/data/gfx40/it_magnet_on.png
   trunk/data/gfx40/it_pipe.png
   trunk/data/gfx40/it_seed.png
   trunk/data/gfx40/it_shogun_l.png
   trunk/data/gfx40/it_shogun_m.png
   trunk/data/gfx40/it_shogun_s.png
   trunk/data/gfx40/it_trigger.png
   trunk/data/gfx40/it_vortex.png
   trunk/data/gfx40/it_wormhole.png
   trunk/data/gfx48/it_blocker.png
   trunk/data/gfx48/it_coin_l.png
   trunk/data/gfx48/it_coin_m.png
   trunk/data/gfx48/it_coin_s.png
   trunk/data/gfx48/it_laser.png
   trunk/data/gfx48/it_magnet_off.png
   trunk/data/gfx48/it_magnet_on.png
   trunk/data/gfx48/it_pipe.png
   trunk/data/gfx48/it_seed.png
   trunk/data/gfx48/it_shogun_l.png
   trunk/data/gfx48/it_shogun_m.png
   trunk/data/gfx48/it_shogun_s.png
   trunk/data/gfx48/it_trigger.png
   trunk/data/gfx48/it_vortex.png
   trunk/data/gfx48/it_wormhole.png
Removed:
   trunk/data/gfx32/it-blocker.png
   trunk/data/gfx32/it-coin1.png
   trunk/data/gfx32/it-coin2.png
   trunk/data/gfx32/it-coin4.png
   trunk/data/gfx32/it-laser.png
   trunk/data/gfx32/it-magnet-off.png
   trunk/data/gfx32/it-magnet-on.png
   trunk/data/gfx32/it-pipe.png
   trunk/data/gfx32/it-seed.png
   trunk/data/gfx32/it-shogun-big.png
   trunk/data/gfx32/it-shogun-med.png
   trunk/data/gfx32/it-shogun-small.png
   trunk/data/gfx32/it-trigger.png
   trunk/data/gfx32/it-vortex.png
   trunk/data/gfx32/it-wormhole.png
   trunk/data/gfx40/it-blocker.png
   trunk/data/gfx40/it-coin1.png
   trunk/data/gfx40/it-coin2.png
   trunk/data/gfx40/it-coin4.png
   trunk/data/gfx40/it-laser.png
   trunk/data/gfx40/it-magnet-off.png
   trunk/data/gfx40/it-magnet-on.png
   trunk/data/gfx40/it-pipe.png
   trunk/data/gfx40/it-seed.png
   trunk/data/gfx40/it-shogun-big.png
   trunk/data/gfx40/it-shogun-med.png
   trunk/data/gfx40/it-shogun-small.png
   trunk/data/gfx40/it-trigger.png
   trunk/data/gfx40/it-vortex.png
   trunk/data/gfx40/it-wormhole.png
   trunk/data/gfx48/it-blocker.png
   trunk/data/gfx48/it-coin1.png
   trunk/data/gfx48/it-coin2.png
   trunk/data/gfx48/it-coin4.png
   trunk/data/gfx48/it-laser.png
   trunk/data/gfx48/it-magnet-off.png
   trunk/data/gfx48/it-magnet-on.png
   trunk/data/gfx48/it-pipe.png
   trunk/data/gfx48/it-seed.png
   trunk/data/gfx48/it-shogun-big.png
   trunk/data/gfx48/it-shogun-med.png
   trunk/data/gfx48/it-shogun-small.png
   trunk/data/gfx48/it-trigger.png
   trunk/data/gfx48/it-vortex.png
   trunk/data/gfx48/it-wormhole.png
Modified:
   trunk/data/api2init.lua
   trunk/data/levels/lib/libpuzzle_3.xml
   trunk/data/models-2d.lua
   trunk/src/actors.cc
   trunk/src/gui/MainMenu.cc
   trunk/src/items.hh
   trunk/src/items/BlockerItem.cc
   trunk/src/items/Coin.cc
   trunk/src/items/Magnet.cc
   trunk/src/items/SeedItem.cc
   trunk/src/items/Trigger.cc
   trunk/src/items/Vortex.cc
   trunk/src/items/WormHole.cc
   trunk/src/laser.cc
   trunk/src/stones/CoinSlot.cc
   trunk/src/stones/WindowStone.cc
   trunk/src/world.cc
Log:
Trunk 1.1:
- item image and model renaming: use underscore only, no more dashes
- it_ring: no more auto (unreliable) free respawn position calculation
- ORI2DIR = {[WEST]=W, [SOUTH]=S, [EAST]=E, [NORTH]=N, [NODIR]=po(0,0)}
- puzzle resolver: add check subresolver type
- st_window: do no longer shatter balls on green, secure windows

Modified: trunk/data/api2init.lua
===================================================================
--- trunk/data/api2init.lua	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/data/api2init.lua	2009-05-28 22:35:28 UTC (rev 1690)
@@ -162,7 +162,7 @@
 NEIGHBORS_CHESS = NNE .. ENE .. ESE .. SSE .. SSW .. WSW .. WNW .. NNW
 
 -- convertion direction numbers to offset vectors
-DIRNUM2OFF = {[0]=W, S, E, N}
+ORI2DIR = {[WEST]=W, [SOUTH]=S, [EAST]=E, [NORTH]=N, [NODIR]=po(0,0)}
 
 -- essential
 DISPENSIBLE   = 0

Deleted: trunk/data/gfx32/it-blocker.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-coin1.png
===================================================================
--- trunk/data/gfx32/it-coin1.png	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/data/gfx32/it-coin1.png	2009-05-28 22:35:28 UTC (rev 1690)
@@ -1,7 +0,0 @@
-&#137;PNG
-
-
-&#163;&#237;~C&#128;y:&#181;&#187;8{hK&#209;&#219;&#254;&#254;&#228;&#174;0&#218;&#216;&#249;c&#227;&#197;&#155;&#211;&#231;JB&#208;&#188;&#185;&#209;&#234;&#181;&#197;{&#130;&#148;s&#215;&#142;&#188;
-&#229;q&#250;kU
-0&#191;&#150;@&gt;2nl&#228;x&#171;&#154;&#163;&#153;&#251;&#179;7&#247;G&#139;P&#149;0&#198;!@qw@&#129;&#156;s&#219;&#185;^&#181;\&#214;&#243;&#159;&#221;8Q&#170;&quot;	&#236;&quot;
-&#254;&#174;x1&#219;&#236;}&#174;sk&#228;&#170;&#144;&#159;X&#189; &#143;FG&#203;&#168;sp&#211;30z?o,%&#207;$lK&#194;&gt;&#139;6/&#237;W&#247;&#198;^&#204;}&#254;
\ No newline at end of file

Deleted: trunk/data/gfx32/it-coin2.png
===================================================================
--- trunk/data/gfx32/it-coin2.png	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/data/gfx32/it-coin2.png	2009-05-28 22:35:28 UTC (rev 1690)
@@ -1,8 +0,0 @@
-&#137;PNG
-
-
-&#200;&#209;c&#199;&#232;&#242;&#236;|&#233;&lt;&lt;`O&#158;N&#212;&#254;N&#251;J&#172;&#179;&#247;R&#235;v(+&#251;&#135;R#p`&#224;pX'&#221;;5&#246;&#177;EP&#158;&#185;=&#131;O&lt;&#154;	zQ`&#183;&#192;&#219;)0&#131;1&#187;&#231; &#218;C7&#135;&#186;&#254;&#214;&#238;t&#253;=rm*&#198;g&#239;&#206;&#144;=&#224;&#231;FG&#194;5&#172;&#163;&#200;&#179;&#133;{&#255;V&#177;p@&#136;M&#171;&#204;
-lt&#186;&#236;&#200;&#140;(&#203;=&#155;X@ &#133;&#197;T&#144;C&#230;8&#173;&#245;&#226;U&#244;Q&#144;z&#129;8&#251;&#219;&#136;L&#198;&#163;=&#231;&#140;&#141;&#170;
-4&#196;(&#224;k&#200;&#151;P&#191;u&#250;&#159;&#224;2&#237;&#141;Pi&#181;&#156;&#173;&#144;&#151;&#189;&#218;g&#221;&#155;&#173;C&#169;|&#233;X&#142;UD&#165;j&#248;&#161;&#137;&#130;&#179;
-&quot;&#136;5&#223;&#132;(
-&#245;&#242;_&#191;&#235;c&#206;	&#172;&#188;j&#202;&#159;&#128;l&#180;&#247;&#134;&#203;M&#174;&#239;&#184;&#203;5Z&#190;&#134;u&#139;&#129;kE&#245;&#177;&#229;=&#176;&#178;&#242;:&#128;}B&#229;&#202;&#166;
\ No newline at end of file

Deleted: trunk/data/gfx32/it-coin4.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-laser.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-magnet-off.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-magnet-on.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-pipe.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-seed.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-shogun-big.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-shogun-med.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-shogun-small.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-trigger.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-vortex.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/it-wormhole.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/it_blocker.png (from rev 1688, trunk/data/gfx32/it-blocker.png)

Copied: trunk/data/gfx32/it_coin_l.png (from rev 1688, trunk/data/gfx32/it-coin4.png)

Copied: trunk/data/gfx32/it_coin_m.png (from rev 1688, trunk/data/gfx32/it-coin2.png)

Copied: trunk/data/gfx32/it_coin_s.png (from rev 1688, trunk/data/gfx32/it-coin1.png)

Copied: trunk/data/gfx32/it_laser.png (from rev 1688, trunk/data/gfx32/it-laser.png)

Copied: trunk/data/gfx32/it_magnet_off.png (from rev 1688, trunk/data/gfx32/it-magnet-off.png)

Copied: trunk/data/gfx32/it_magnet_on.png (from rev 1688, trunk/data/gfx32/it-magnet-on.png)

Copied: trunk/data/gfx32/it_pipe.png (from rev 1688, trunk/data/gfx32/it-pipe.png)

Copied: trunk/data/gfx32/it_seed.png (from rev 1688, trunk/data/gfx32/it-seed.png)

Copied: trunk/data/gfx32/it_shogun_l.png (from rev 1688, trunk/data/gfx32/it-shogun-big.png)

Copied: trunk/data/gfx32/it_shogun_m.png (from rev 1688, trunk/data/gfx32/it-shogun-med.png)

Copied: trunk/data/gfx32/it_shogun_s.png (from rev 1688, trunk/data/gfx32/it-shogun-small.png)

Copied: trunk/data/gfx32/it_trigger.png (from rev 1688, trunk/data/gfx32/it-trigger.png)

Copied: trunk/data/gfx32/it_vortex.png (from rev 1688, trunk/data/gfx32/it-vortex.png)

Copied: trunk/data/gfx32/it_wormhole.png (from rev 1688, trunk/data/gfx32/it-wormhole.png)

Deleted: trunk/data/gfx40/it-blocker.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-coin1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-coin2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-coin4.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-laser.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-magnet-off.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-magnet-on.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-pipe.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-seed.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-shogun-big.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-shogun-med.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-shogun-small.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-trigger.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-vortex.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/it-wormhole.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/it_blocker.png (from rev 1688, trunk/data/gfx40/it-blocker.png)

Copied: trunk/data/gfx40/it_coin_l.png (from rev 1688, trunk/data/gfx40/it-coin4.png)

Copied: trunk/data/gfx40/it_coin_m.png (from rev 1688, trunk/data/gfx40/it-coin2.png)

Copied: trunk/data/gfx40/it_coin_s.png (from rev 1688, trunk/data/gfx40/it-coin1.png)

Copied: trunk/data/gfx40/it_laser.png (from rev 1688, trunk/data/gfx40/it-laser.png)

Copied: trunk/data/gfx40/it_magnet_off.png (from rev 1688, trunk/data/gfx40/it-magnet-off.png)

Copied: trunk/data/gfx40/it_magnet_on.png (from rev 1688, trunk/data/gfx40/it-magnet-on.png)

Copied: trunk/data/gfx40/it_pipe.png (from rev 1688, trunk/data/gfx40/it-pipe.png)

Copied: trunk/data/gfx40/it_seed.png (from rev 1688, trunk/data/gfx40/it-seed.png)

Copied: trunk/data/gfx40/it_shogun_l.png (from rev 1688, trunk/data/gfx40/it-shogun-big.png)

Copied: trunk/data/gfx40/it_shogun_m.png (from rev 1688, trunk/data/gfx40/it-shogun-med.png)

Copied: trunk/data/gfx40/it_shogun_s.png (from rev 1688, trunk/data/gfx40/it-shogun-small.png)

Copied: trunk/data/gfx40/it_trigger.png (from rev 1688, trunk/data/gfx40/it-trigger.png)

Copied: trunk/data/gfx40/it_vortex.png (from rev 1688, trunk/data/gfx40/it-vortex.png)

Copied: trunk/data/gfx40/it_wormhole.png (from rev 1688, trunk/data/gfx40/it-wormhole.png)

Deleted: trunk/data/gfx48/it-blocker.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-coin1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-coin2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-coin4.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-laser.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-magnet-off.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-magnet-on.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-pipe.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-seed.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-shogun-big.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-shogun-med.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-shogun-small.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-trigger.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-vortex.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/it-wormhole.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/it_blocker.png (from rev 1688, trunk/data/gfx48/it-blocker.png)

Copied: trunk/data/gfx48/it_coin_l.png (from rev 1688, trunk/data/gfx48/it-coin4.png)

Copied: trunk/data/gfx48/it_coin_m.png (from rev 1688, trunk/data/gfx48/it-coin2.png)

Copied: trunk/data/gfx48/it_coin_s.png (from rev 1688, trunk/data/gfx48/it-coin1.png)

Copied: trunk/data/gfx48/it_laser.png (from rev 1688, trunk/data/gfx48/it-laser.png)

Copied: trunk/data/gfx48/it_magnet_off.png (from rev 1688, trunk/data/gfx48/it-magnet-off.png)

Copied: trunk/data/gfx48/it_magnet_on.png (from rev 1688, trunk/data/gfx48/it-magnet-on.png)

Copied: trunk/data/gfx48/it_pipe.png (from rev 1688, trunk/data/gfx48/it-pipe.png)

Copied: trunk/data/gfx48/it_seed.png (from rev 1688, trunk/data/gfx48/it-seed.png)

Copied: trunk/data/gfx48/it_shogun_l.png (from rev 1688, trunk/data/gfx48/it-shogun-big.png)

Copied: trunk/data/gfx48/it_shogun_m.png (from rev 1688, trunk/data/gfx48/it-shogun-med.png)

Copied: trunk/data/gfx48/it_shogun_s.png (from rev 1688, trunk/data/gfx48/it-shogun-small.png)

Copied: trunk/data/gfx48/it_trigger.png (from rev 1688, trunk/data/gfx48/it-trigger.png)

Copied: trunk/data/gfx48/it_vortex.png (from rev 1688, trunk/data/gfx48/it-vortex.png)

Copied: trunk/data/gfx48/it_wormhole.png (from rev 1688, trunk/data/gfx48/it-wormhole.png)

Modified: trunk/data/levels/lib/libpuzzle_3.xml
===================================================================
--- trunk/data/levels/lib/libpuzzle_3.xml	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/data/levels/lib/libpuzzle_3.xml	2009-05-28 22:35:28 UTC (rev 1690)
@@ -180,6 +180,7 @@
 function res.puzzle(subresolver, ...)
     -- syntax: ... = &lt;prefixkey&gt;
     -- context: [4] = table with unmodified rule tables
+    assert_type(subresolver, &quot;res.puzzle first argument (subresolver)&quot;, 2, &quot;tiles&quot;, &quot;function&quot;, &quot;table&quot;, &quot;maze&quot;)
     local args = {...}
     local length = 0
     for i, prefix in ipairs(args) do

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/data/models-2d.lua	2009-05-28 22:35:28 UTC (rev 1690)
@@ -484,11 +484,14 @@
         &quot;it_banana&quot;,
         &quot;it_bomb_black&quot;,
         &quot;it_bomb_white&quot;,
-        &quot;it-blocker&quot;,
+        &quot;it_blocker&quot;,
         &quot;it_bottle_idle&quot;,
         &quot;it_bottle_broken&quot;,
         &quot;it_brush&quot;,
         &quot;it_cherry&quot;,
+        &quot;it_coin_s&quot;,
+        &quot;it_coin_m&quot;,
+        &quot;it_coin_l&quot;,
         &quot;it_cross&quot;,
         &quot;it_document&quot;,
         &quot;it_drop&quot;,
@@ -523,9 +526,6 @@
     DefImages(itemlist)
 
     DefImage(&quot;it_brake&quot;, {filename=&quot;st-brake&quot;})
-    DefImage(&quot;it_coin_s&quot;, {filename=&quot;it-coin1&quot;})
-    DefImage(&quot;it_coin_m&quot;, {filename=&quot;it-coin2&quot;})
-    DefImage(&quot;it_coin_l&quot;, {filename=&quot;it-coin4&quot;})
     DefImage(&quot;it_meditation_hollow&quot;, {filename=&quot;it_meditation_hollow&quot;})
     DefImage(&quot;it_meditation_hill&quot;, {filename=&quot;it_meditation_hill&quot;})
     DefImage(&quot;it_meditation_dent&quot;, {filename=&quot;it_meditation_dent&quot;})
@@ -548,12 +548,12 @@
 -- Multiple-Image-Items, non animated, e.g. it-burnable-oil --
 --------------------------------------------------------------
 
--- it-extinguisher --
+-- it_extinguisher --
 do
     DefTiles(&quot;it_extinguisher&quot;, {&quot;it_extinguisher_full&quot;, &quot;it_extinguisher_medium&quot;, &quot;it_extinguisher_empty&quot;})
 end
 
--- it-dummy
+-- it_dummy
 do
     DefTiles(&quot;it_dummy&quot;, {&quot;it_dummy&quot;, &quot;it_dummy_egg&quot;})
 end
@@ -565,21 +565,21 @@
 
 -- Laserbeams --
 do
-    DefTiles(&quot;it-laser&quot;, {&quot;it-laserh&quot;, &quot;it-laserv&quot;, &quot;it-laserhv&quot;})
+    DefTiles(&quot;it_laser&quot;, {&quot;it_laser_h&quot;, &quot;it_laser_v&quot;, &quot;it_laser_hv&quot;})
 end
 
--- it-pipe --
+-- it_pipe --
 do
-    DefTiles(&quot;it-pipe&quot;, {&quot;it_pipe_e&quot;, &quot;it_pipe_s&quot;, &quot;it_pipe_es&quot;, &quot;it_pipe_sw&quot;, &quot;it_pipe_ew&quot;,
+    DefTiles(&quot;it_pipe&quot;, {&quot;it_pipe_e&quot;, &quot;it_pipe_s&quot;, &quot;it_pipe_es&quot;, &quot;it_pipe_sw&quot;, &quot;it_pipe_ew&quot;,
                             &quot;it_pipe_w&quot;, &quot;it_pipe_n&quot;, &quot;it_pipe_ne&quot;, &quot;it_pipe_nw&quot;, &quot;it_pipe_ns&quot;})
 end
 
 -- it-trigger --
 do
-    DefTiles(&quot;it-trigger&quot;, {&quot;it-trigger&quot;,&quot;it-trigger1&quot;})
+    DefTiles(&quot;it_trigger&quot;, {&quot;it_trigger_up&quot;,&quot;it_trigger_down&quot;})
 end
 
--- it-yinyang --
+-- it_yinyang --
 do
     DefTiles(&quot;it_yinyang&quot;, {&quot;it_yinyang&quot;, &quot;it_yangyin&quot;})
 end
@@ -633,7 +633,7 @@
     DefAlias(&quot;it_burnable_invisible&quot;, &quot;invisible&quot;)
 end
 
--- it-coffee --
+-- it_coffee --
 do
     local images = DefSubimages(&quot;it_coffee&quot;, {h=4})
     local frames = BuildFrames(images,150)
@@ -671,15 +671,15 @@
     DefAlias(&quot;it_explosion&quot;, &quot;expl&quot;)
 end
 
--- it-magnet --
+-- it_magnet --
 do
-    DefImage(&quot;it-magnet-off&quot;)
-    local images = DefSubimages(&quot;it-magnet-on&quot;, {h=5})
+    DefImage(&quot;it_magnet_off&quot;)
+    local images = DefSubimages(&quot;it_magnet_on&quot;, {h=5})
     local frames = BuildFrames(images, 100)
-    DefAnim(&quot;it-magnet-on&quot;, frames, 1)
+    DefAnim(&quot;it_magnet_on&quot;, frames, 1)
 end
 
--- it-puller --
+-- it_puller --
 do
     local images = {&quot;it_puller_n&quot;, &quot;it_puller_e&quot;, &quot;it_puller_s&quot;, &quot;it_puller_w&quot;}
     DefTiles(&quot;it_puller&quot;, images)
@@ -687,21 +687,19 @@
     DefAnim(&quot;it_puller_active&quot;, RepeatAnim(frames, 4), false)
 end
 
--- it-seed --
+-- it_seed --
 do
-    local images = DefSubimages(&quot;it-seed&quot;, {h=5})
-    DefAlias(&quot;it-seed&quot;, &quot;it-seed1&quot;)
-    DefAlias(&quot;it-seed_nowood&quot;, &quot;it-seed1&quot;)
-    DefAlias(&quot;it-seed_volcano&quot;, &quot;it-seed1&quot;)
+    local images = DefSubimages(&quot;it_seed&quot;, {h=5})
+    DefAlias(&quot;it_seed&quot;, &quot;it_seed1&quot;)
     local frames = {
-        &quot;it-seed1&quot;, &quot;it-seed2&quot;, &quot;it-seed1&quot;, &quot;it-seed3&quot;, &quot;it-seed1&quot;, &quot;it-seed2&quot;,
-        &quot;it-seed1&quot;, &quot;it-seed4&quot;, &quot;it-seed5&quot;, &quot;it-seed4&quot;, &quot;it-seed1&quot;,
-        &quot;it-seed4&quot;, &quot;it-seed5&quot;,
+        &quot;it_seed1&quot;, &quot;it_seed2&quot;, &quot;it_seed1&quot;, &quot;it_seed3&quot;, &quot;it_seed1&quot;, &quot;it_seed2&quot;,
+        &quot;it_seed1&quot;, &quot;it_seed4&quot;, &quot;it_seed5&quot;, &quot;it_seed4&quot;, &quot;it_seed1&quot;,
+        &quot;it_seed4&quot;, &quot;it_seed5&quot;,
     }
-    DefAnim(&quot;it-seed-growing&quot;, BuildFrames(frames, 120))
+    DefAnim(&quot;it_seed_growing&quot;, BuildFrames(frames, 120))
 end
 
--- it-sensor --
+-- it_sensor --
 do
     DefTiles(&quot;it_sensor&quot;, {&quot;it_sensor&quot;,&quot;it_sensor1&quot;})
     local frames = BuildFrames({&quot;it_sensor&quot;,&quot;it_sensor1&quot;}, 300)
@@ -711,14 +709,14 @@
     DefAnim(&quot;it_sensor_exit_hit&quot;, RepeatAnim(exitframes, 3), false)
 end
 
--- it-shogun --
+-- it_shogun --
 do
-    NewAnim(&quot;it_shogun_s&quot;, {img=&quot;it-shogun-small&quot;, h=3, speed=160, pingpong=1, loop=1})
-    NewAnim(&quot;it_shogun_m&quot;, {img=&quot;it-shogun-med&quot;,   h=3, speed=160, pingpong=1, loop=1})
-    NewAnim(&quot;it_shogun_l&quot;, {img=&quot;it-shogun-big&quot;,   h=3, speed=160, pingpong=1, loop=1})
+    NewAnim(&quot;it_shogun_s&quot;, {img=&quot;it_shogun_s&quot;, h=3, speed=160, pingpong=1, loop=1})
+    NewAnim(&quot;it_shogun_m&quot;, {img=&quot;it_shogun_m&quot;,   h=3, speed=160, pingpong=1, loop=1})
+    NewAnim(&quot;it_shogun_l&quot;, {img=&quot;it_shogun_l&quot;,   h=3, speed=160, pingpong=1, loop=1})
 end
 
--- it-springboard --
+-- it_springboard --
 do
     local images = {&quot;it_springboard1&quot;, &quot;it_springboard2&quot;}
     DefTiles (&quot;it_springboard&quot;, images)
@@ -726,22 +724,22 @@
     DefAnim(&quot;it_springboard_anim&quot;, BuildFrames(ReverseFrames(images),120))
 end
 
--- it-vortex --
+-- it_vortex --
 do
-    local images = DefSubimages(&quot;it-vortex&quot;, {h=4})
-    DefAlias(&quot;it-vortex-open&quot;, images[1])
-    DefAlias(&quot;it-vortex-closed&quot;, images[4])
+    local images = DefSubimages(&quot;it_vortex&quot;, {h=4})
+    DefAlias(&quot;it_vortex_open&quot;, images[1])
+    DefAlias(&quot;it_vortex_closed&quot;, images[4])
 
-    DefAnim(&quot;it-vortex-opening&quot;, ReverseFrames(BuildFrames(images, 100)))
-    DefAnim(&quot;it-vortex-closing&quot;, BuildFrames(images, 100))
+    DefAnim(&quot;it_vortex_opening&quot;, ReverseFrames(BuildFrames(images, 100)))
+    DefAnim(&quot;it_vortex_closing&quot;, BuildFrames(images, 100))
 end
 
--- it-wormhole --
+-- it_wormhole --
 do
-    local images = DefSubimages(&quot;it-wormhole&quot;, {h=2})
+    local images = DefSubimages(&quot;it_wormhole&quot;, {h=2})
     local frames = BuildFrames(images, 100)
-    DefAnim(&quot;it-wormhole&quot;, frames, true)
-    DefAlias(&quot;it-wormhole-off&quot;, &quot;it-wormhole1&quot;)
+    DefAnim(&quot;it_wormhole&quot;, frames, true)
+    DefAlias(&quot;it_wormhole_off&quot;, &quot;it_wormhole1&quot;)
 end
 
 -- it_trap --
@@ -1095,11 +1093,11 @@
     local anim_v, anim_h, anim_hv = {}, {}, {}
     for j = 1, 7 do
       anim_v[j] = &quot;st-lightpassenger-break-v&quot;..j
-      display.DefineComposite(anim_v[j], &quot;it-laserv&quot;, img[j])
+      display.DefineComposite(anim_v[j], &quot;it_laser_v&quot;, img[j])
       anim_h[j] = &quot;st-lightpassenger-break-h&quot;..j
-      display.DefineComposite(anim_h[j], &quot;it-laserh&quot;, img[j])
+      display.DefineComposite(anim_h[j], &quot;it_laser_h&quot;, img[j])
       anim_hv[j] = &quot;st-lightpassenger-break-hv&quot;..j
-      display.DefineComposite(anim_hv[j], &quot;it-laserhv&quot;, img[j])
+      display.DefineComposite(anim_hv[j], &quot;it_laser_hv&quot;, img[j])
     end
     DefAnim(&quot;st-lightpassenger-break-v&quot;, BuildFrames(anim_v, 50), false)
     DefAnim(&quot;st-lightpassenger-break-h&quot;, BuildFrames(anim_h, 50), false)

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/actors.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -35,7 +35,7 @@
 //using namespace world;
 using ecl::V2;
 
-#include &quot;actors_internal.hh&quot;
+//#include &quot;actors_internal.hh&quot;
 
 namespace enigma {
 
@@ -196,9 +196,9 @@
 }
 
 void Actor::find_respawnpos() {
-    V2&amp; what_pos = use_respawnpos ? respawnpos : startingpos;
-    FreeRespawnLocationFinder unblocked(what_pos, *this);
-    what_pos = unblocked.get_position();
+//    V2&amp; what_pos = use_respawnpos ? respawnpos : startingpos;
+//    FreeRespawnLocationFinder unblocked(what_pos, *this);
+//    what_pos = unblocked.get_position();
 }
 
 const V2&amp; Actor::get_respawnpos() const {

Modified: trunk/src/gui/MainMenu.cc
===================================================================
--- trunk/src/gui/MainMenu.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/gui/MainMenu.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -128,8 +128,8 @@
         &quot;  Raoul Bourquin  (Level admin. &amp; design, all over invaluable additions)&quot;,
         &quot;  Siegfried Fennig  (Level design, graphics)&quot;,
         &quot;  Martin Hawlisch  (Level design, graphics, programming)&quot;,
-        &quot;  Daniel Heck  (Main developer, graphics, documentation)&quot;,
-        &quot;  Ronald Lamprecht  (XML, Gui, portability, core prog., documentation)&quot;,
+        &quot;  Daniel Heck  (Main developer up to 0.92, graphics, documentation)&quot;,
+        &quot;  Ronald Lamprecht  (XML, new API, engine, portability, GUI, documentation)&quot;,
         &quot;  Andreas Lochmann  (Programming, level admin. &amp; design, documentation)&quot;,
         &quot;  Petr Machata  (Level design, programming)&quot;,
         &quot;  Nat Pryce  (Level design)&quot;,
@@ -200,6 +200,7 @@
         &quot;  Tobias Schmidbauer  (Windows installer and icon)&quot;,
         &quot;  Achim Settelmeier  (RPM specfile)&quot;,
         &quot;  ShadowPhrogg32642342 (D&#195;&#161;niel Borb&#195;&#169;ly)  (Level design)&quot;,
+        &quot;  Alex Smith  (Level design)&quot;,
         &quot;  Jon Sneyers  (Level design)&quot;,
         &quot;  Spaceman  (Level design)&quot;,
         &quot;  Ulf Stegemann  (Level design)&quot;,

Modified: trunk/src/items/BlockerItem.cc
===================================================================
--- trunk/src/items/BlockerItem.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/BlockerItem.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -108,7 +108,7 @@
     }
 
     void BlockerItem::init_model() {
-        set_model(&quot;it-blocker&quot;);
+        set_model(&quot;it_blocker&quot;);
     }
     
     void BlockerItem::actor_leave(Actor *a) {

Modified: trunk/src/items/Coin.cc
===================================================================
--- trunk/src/items/Coin.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/Coin.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -61,9 +61,9 @@
     }
     
     ItemTraits Coin::traits[3] = {
-        {&quot;it_coin_s&quot;,  it_coin1,  itf_none, 0.0},
-        {&quot;it_coin_m&quot;,  it_coin2,  itf_none, 0.0},
-        {&quot;it_coin_l&quot;,  it_coin4,  itf_none, 0.0},
+        {&quot;it_coin_s&quot;,  it_coin_s,  itf_none, 0.0},
+        {&quot;it_coin_m&quot;,  it_coin_m,  itf_none, 0.0},
+        {&quot;it_coin_l&quot;,  it_coin_l,  itf_none, 0.0},
     };
 
     BOOT_REGISTER_START

Modified: trunk/src/items/Magnet.cc
===================================================================
--- trunk/src/items/Magnet.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/Magnet.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -57,7 +57,7 @@
         return Item::message(m);
     }
     void Magnet::init_model() {
-        set_model(ecl::strf(&quot;it-magnet%s&quot;, state == ON ? &quot;-on&quot; : &quot;-off&quot;));
+        set_model(ecl::strf(&quot;it_magnet_%s&quot;, state == ON ? &quot;on&quot; : &quot;off&quot;));
     }
     
     void Magnet::on_creation(GridPos p) {

Modified: trunk/src/items/SeedItem.cc
===================================================================
--- trunk/src/items/SeedItem.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/SeedItem.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -85,9 +85,9 @@
     
     void SeedItem::init_model() {
         if (state == IDLE)
-            set_model(&quot;it-seed&quot;);
+            set_model(&quot;it_seed&quot;);
         else
-            set_anim(&quot;it-seed-growing&quot;);
+            set_anim(&quot;it_seed_growing&quot;);
     }
     
     void SeedItem::processLight(Direction d) {
@@ -116,7 +116,7 @@
     }
     
     std::string SeedItem::get_inventory_model() {
-        return &quot;it-seed&quot;;
+        return &quot;it_seed&quot;;
     }
     
     bool SeedItem::isStatic() const {
@@ -142,7 +142,7 @@
         if (state == IDLE) {
             state = ACTIVE;
             sound_event(&quot;seedgrow&quot;);
-            set_anim(&quot;it-seed-growing&quot;);
+            set_anim(&quot;it_seed_growing&quot;);
         }
     }
         

Modified: trunk/src/items/Trigger.cc
===================================================================
--- trunk/src/items/Trigger.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/Trigger.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -81,9 +81,9 @@
         if (getAttr(&quot;invisible&quot;).to_bool())
             set_model(&quot;invisible&quot;);
         else if (state != 0)
-            set_model(&quot;it-trigger1&quot;);
+            set_model(&quot;it_trigger_down&quot;);
         else
-            set_model(&quot;it-trigger&quot;);
+            set_model(&quot;it_trigger_up&quot;);
     }
     
     void Trigger::actor_enter(Actor *a) {

Modified: trunk/src/items/Vortex.cc
===================================================================
--- trunk/src/items/Vortex.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/Vortex.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -101,14 +101,14 @@
             case OPEN:
             case EMITTING:
             case SWALLOWING:
-                set_model(&quot;it-vortex-open&quot;);
+                set_model(&quot;it_vortex_open&quot;);
                 break;
             case CLOSED: 
-                set_model(&quot;it-vortex-closed&quot;); break;
+                set_model(&quot;it_vortex_closed&quot;); break;
             case OPENING: 
-                set_anim(&quot;it-vortex-opening&quot;); break;
+                set_anim(&quot;it_vortex_opening&quot;); break;
             case CLOSING: 
-                set_anim(&quot;it-vortex-closing&quot;); break;
+                set_anim(&quot;it_vortex_closing&quot;); break;
         }
     }
     

Modified: trunk/src/items/WormHole.cc
===================================================================
--- trunk/src/items/WormHole.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items/WormHole.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -98,9 +98,9 @@
     
     void WormHole::init_model() {
         if ((state &amp; 3) == ON_IDLE)
-            set_anim(&quot;it-wormhole&quot;);
+            set_anim(&quot;it_wormhole&quot;);
         else
-            set_model(&quot;it-wormhole-off&quot;);
+            set_model(&quot;it_wormhole_off&quot;);
     }
     
     bool WormHole::actor_hit(Actor *actor) {

Modified: trunk/src/items.hh
===================================================================
--- trunk/src/items.hh	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/items.hh	2009-05-28 22:35:28 UTC (rev 1690)
@@ -49,9 +49,9 @@
         it_cherry,
         it_cherry_crushed,
         it_coffee,
-        it_coin1,
-        it_coin2, 
-        it_coin4,
+        it_coin_s,
+        it_coin_m, 
+        it_coin_l,
         it_crack_i,
         it_crack_s,
         it_crack_m,

Modified: trunk/src/laser.cc
===================================================================
--- trunk/src/laser.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/laser.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -90,12 +90,12 @@
     
     if (directions &amp; (EASTBIT | WESTBIT)) {
         if (directions &amp; (NORTHBIT | SOUTHBIT))
-            set_model(&quot;it-laserhv&quot;);
+            set_model(&quot;it_laser_hv&quot;);
         else
-            set_model(&quot;it-laserh&quot;);
+            set_model(&quot;it_laser_h&quot;);
     }
     else if (directions &amp; (NORTHBIT | SOUTHBIT))
-        set_model(&quot;it-laserv&quot;);
+        set_model(&quot;it_laser_v&quot;);
 }
 
 void LaserBeam::processLight(Direction dir) {

Modified: trunk/src/stones/CoinSlot.cc
===================================================================
--- trunk/src/stones/CoinSlot.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/stones/CoinSlot.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -109,17 +109,17 @@
         if (enigma::Inventory *inv = player::GetInventory(sc.actor)) {
             if (Item *it = inv-&gt;get_item(0)) {
                 ItemID id = get_id(it);
-                if (id == it_coin1 || id == it_coin2 || id == it_coin4) {
+                if (id == it_coin_s || id == it_coin_m || id == it_coin_l) {
                     double interval;
                     if (server::EnigmaCompatibility &lt; 1.10) 
                         interval = it-&gt;getAttr(&quot;coin_value&quot;);
                     else {
                         switch (id) {
-                            case it_coin1:
+                            case it_coin_s:
                                 interval = getAttr(&quot;interval_s&quot;); break;
-                            case it_coin2:
+                            case it_coin_m:
                                 interval = getAttr(&quot;interval_m&quot;); break;
-                            case it_coin4:
+                            case it_coin_l:
                                 interval = getAttr(&quot;interval_l&quot;); break;
                         }
                         if (interval == -2)  // reject coin

Modified: trunk/src/stones/WindowStone.cc
===================================================================
--- trunk/src/stones/WindowStone.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/stones/WindowStone.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -153,7 +153,7 @@
             if (objFlags &amp; (sc.faces &lt;&lt; 24))  // face is scratched
                 threshold -= 10;
             
-            if (impulse &gt; 35) {
+            if (impulse &gt; 35 &amp;&amp; !(objFlags &amp; OBJBIT_SECURE)) {
                 SendMessage(a, &quot;_shatter&quot;);
             }
 

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-05-28 21:19:46 UTC (rev 1689)
+++ trunk/src/world.cc	2009-05-28 22:35:28 UTC (rev 1690)
@@ -2226,7 +2226,7 @@
 }
 
 void FastRespawnActor(Actor *a, bool keep_velocity) {
-    a-&gt;find_respawnpos();
+//    a-&gt;find_respawnpos();
     const V2&amp; p = a-&gt;get_respawnpos();
     WarpActor(a, p[0], p[1], keep_velocity);
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001118.html">[Enigma-game-svn] r1689 - in trunk/data: . levels/lib
</A></li>
	<LI>Next message: <A HREF="001120.html">[Enigma-game-svn] r1691 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items src/stones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1119">[ date ]</a>
              <a href="thread.html#1119">[ thread ]</a>
              <a href="subject.html#1119">[ subject ]</a>
              <a href="author.html#1119">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
