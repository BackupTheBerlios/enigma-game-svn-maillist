<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1675 - trunk/doc/reference
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1675%20-%20trunk/doc/reference&In-Reply-To=%3C200905172245.n4HMj423018201%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001104.html">
   <LINK REL="Next"  HREF="001106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1675 - trunk/doc/reference</H1>
    <B>ral at mail.berlios.de</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1675%20-%20trunk/doc/reference&In-Reply-To=%3C200905172245.n4HMj423018201%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1675 - trunk/doc/reference">ral at mail.berlios.de
       </A><BR>
    <I>Mon May 18 00:45:04 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001104.html">[Enigma-game-svn] r1674 - trunk/doc/reference
</A></li>
        <LI>Next message: <A HREF="001106.html">[Enigma-game-svn] r1676 - in trunk: . data/levels	data/levels/enigma_cross data/levels/enigma_experimental	data/levels/enigma_i data/levels/enigma_ii	data/levels/enigma_iii data/levels/enigma_oxyd	data/levels/enigma_pentomino data/levels/enigma_v	data/levels/enigma_vi data/levels/enigma_vii data/levels/enigma_viii
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1105">[ date ]</a>
              <a href="thread.html#1105">[ thread ]</a>
              <a href="subject.html#1105">[ subject ]</a>
              <a href="author.html#1105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-05-18 00:44:53 +0200 (Mon, 18 May 2009)
New Revision: 1675

Modified:
   trunk/doc/reference/enigma-ref.texi
Log:
Trunk 1.1: refman
- Section 5.5 position: formatting update
- Section 5.9 positionlist: sample fixes
- Section 13.1.1 resolver chaining: updates
- Section 13.1.5 maze: introduction and main syntax

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2009-05-13 21:45:16 UTC (rev 1674)
+++ trunk/doc/reference/enigma-ref.texi	2009-05-17 22:44:53 UTC (rev 1675)
@@ -4114,7 +4114,7 @@
 @table @asis
 @item @b{position:}@ @ @xref{Position}
 A position within the world that can be described by an x and y coordinate.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{positions:} @i{preset variable:} @code{@b{po}}; @ @ @xref{Positions}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{positions:} @i{preset variable:} @code{@b{po}}; @ @ @xref{Positions Repository}
 The singleton type of the repository of all named positions.
 @item @b{object:}@ @ @xref{Object}
 An Enigma object like a stone, item, floor, other. Any object is a position, too.
@@ -4125,10 +4125,10 @@
 @item @b{default:} @i{preset variable:} @code{@b{DEFAULT}}; @ @ @xref{Object Attributes}
 The singleton type of default values that can be used instead of Lua's @samp{nil}
 in anonymous table tile definitions.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{tile:}@ @ @xref{Tile}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{tile:}@ @ @xref{Tile and Object Declaration	}
 A description of one or several objects for a common grid position (floor, item,
 stone, actor)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{tiles:} @i{preset variable:} @code{@b{ti}}; @ @ @xref{Tiles}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{tiles:} @i{preset variable:} @code{@b{ti}}; @ @ @xref{Tiles Repository}
 The singleton type of the repository of all tile instances.
 @item @b{world:} @i{preset variable:} @code{@b{wo}}; @ @ @xref{World}
 The singleton type of the world that contains all objects.
@@ -5095,7 +5095,7 @@
 64              @b{anchor2} = @var{woods}[@var{wire_p}[@var{j}%@var{3} + @var{1}]]@})
 @end example
 Finally we need to add the @ref{ot_wire} between our movable stones. This can
-not be done within the map. We need to use the @ref{World Advanced Methods}
+not be done within the map. We need to use the @ref{World} method 
 @samp{wo:add()}, which takes the two connected stones as two anchor attributes.
 We select the first 3 stones of our wood group as stones to be connected with
 3 other stones of the indices 4 to 12. Thus we take in every loop as the first
@@ -5271,9 +5271,24 @@
 
 Let us look at the supported operators:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at menu</A>
+* Position Addition and Subtraction::     Operators @samp{+} and @samp{-} 
+* Position Multiplication and Division::  Operators @samp{*} and @samp{/}
+* Position Sign::                         Unary Operator @samp{-}
+* Position Center::                       Operator @samp{#}
+* Position Comparison::                   Equality @samp{==} and Inequality @samp{~=}
+* Position Concatenation::                Operator @samp{..}
+* Position Coordinate Access::            Index Operators
+* Position Grid Rounding::                Method @samp{grid()}
+* Position Existence::                    Method @samp{exists()}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> menu
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Addition and Subtraction --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Addition and Subtraction
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Addition and Subtraction
+
 @table @asis
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Addition/Subtraction:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at table</A> @asis
 @item @b{Syntax:}
 result = @i{pos} &lt;@b{+}|@b{-}&gt; &lt;@i{pos} | @i{obj} | @i{cpos} | @i{polist}&gt;
 
@@ -5297,7 +5312,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Multiplication/Division:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Multiplication and Division --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Multiplication and Division
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Multiplication and Division
+
 @table @asis
 @item @b{Syntax:}
 result = @i{pos} &lt;@b{*}|@b{/}&gt; @i{number}
@@ -5316,7 +5335,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Sign:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Sign --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Sign
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Sign
+
 @table @asis
 @item @b{Syntax:}
 result = <A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at i</A>{pos}
@@ -5331,7 +5354,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Center:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Center --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Center
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Center
+
 @table @asis
 @item @b{Syntax:}
 result = #@i{pos}
@@ -5346,7 +5373,13 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Equality/Inequality:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Comparison --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Comparison
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Comparison
+
+Equality and Inequality.
+
 @table @asis
 @item @b{Syntax:}
 result = @i{pos1} &lt;==|~=&gt; @i{pos2}
@@ -5366,7 +5399,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Concatenation:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Concatenation --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Concatenation
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Concatenation
+
 @table @asis
 @item @b{Syntax:}
 result = @i{pos1} .. &lt;@i{pos2} | @i{polist}&gt; 
@@ -5385,7 +5422,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Coordinate Access:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Coordinate Access --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Coordinate Access
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Coordinate Access
+
 @table @asis
 @item @b{Syntax:}
 result = @i{pos}[&quot;x&quot;]
@@ -5411,7 +5452,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Grid Rounding:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Grid Rounding --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Grid Rounding
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Grid Rounding
+
 @table @asis
 @item @b{Syntax:}
 result = @i{pos}:grid()
@@ -5427,7 +5472,11 @@
 @end example
 @end table
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Existence:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Position Existence --------------------
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at node</A> Position Existence
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at subsection</A> Position Existence
+
 @table @asis
 @item @b{Syntax:}
 result = @i{pos}:exists()
@@ -5448,7 +5497,6 @@
 @var{boolean} = @i{po}(@var{3.2}, @var{4.7}):@b{exists}()
 @end example
 @end table
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at end</A> table
 
 
 @c ----------------- Object --------------------
@@ -5490,7 +5538,7 @@
 containing grid. This feature is legacy. As Lua code is anyway unapropriate to
 handle actor movements we maintained this rounding feature.
 
-Objects support standard set operators of @ref{Groups}, too, as long as one
+Objects support standard set operators of @ref{Group}s, too, as long as one
 operand is a group and the other an object.
 
 For task driven samples @pxref{Object Tasks} and @ref{Attribute Tasks}.
@@ -6206,7 +6254,7 @@
 
 @item @b{Syntax Samples:}
 @example
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at var</A>{number} = #@var{polist}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) -- = 2
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{number} = #(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}) .. @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) -- = 2
 for @var{i} = @var{1}, #@var{polist} do @var{pos} = @var{polist}[@var{i}] ... end
 @end example
 @end table
@@ -6225,9 +6273,9 @@
 
 @item @b{Syntax Samples:}
 @example
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at var</A>{pos} = @var{polist}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7}))[2]     -- = po(5,7)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at var</A>{pos} = @var{polist}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7}))[-1]    -- = po(5,7)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at var</A>{pos} = @var{polist}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7}))[0]     -- = nil
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{pos} = (@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}) .. @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7}))[2]     -- = po(5,7)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{pos} = (@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}) .. @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7}))[-1]    -- = po(5,7)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{pos} = (@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}) .. @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7}))[0]     -- = nil
 for @var{i} = @var{1}, #@var{polist} do @var{pos} = @var{polist}[@var{i}] ... end
 @end example
 @end table
@@ -6247,7 +6295,7 @@
 
 @item @b{Syntax Samples:}
 @example
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at var</A>{newpolist} = @var{polist}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) .. @i{po}(@var{4}, @var{4}) -- = (2,3),(5,7),(4,4)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{newpolist} = @i{po}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{3}), @i{po}(@var{5}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) .. @i{po}(@var{4}, @var{4}) -- = (2,3),(5,7),(4,4)
 @end example
 @end table
 
@@ -6286,7 +6334,7 @@
 @item @b{Syntax Samples:}
 @example
 @var{newpolist} = @var{2} * @var{NEIGHBORS_4}       -- = po(9, 12)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at var</A>{newpolist} = @var{polist}(@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{4}), @i{po}(@var{6}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) * @var{1/2}   -- = (1, 2), (3, 3.5)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{newpolist} = (@i{po}(@var{2}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{4}) .. @i{po}(@var{6}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">, at var</A>{7})) * @var{1/2}   -- = (1, 2), (3, 3.5)
 @end example
 @end table
 
@@ -6559,7 +6607,7 @@
 result = ti(@i{odecl})
 
 @item @b{Details:}
-Converts an table based object declaration to a new tile value.
+Converts a table based object declaration to a new tile value.
 
 @item @b{Syntax Samples:}
 @example
@@ -8168,7 +8216,7 @@
 @node oxyd colors
 @subsection oxyd colors
 
-Number constants for @ref{st_oxyd} attribute @ref{oxydcolor}. Please choose the 
+Number constants for @ref{st_oxyd} attribute @samp{oxydcolor}. Please choose the 
 constant that is appropriate for an object and do avoid using numbers. 
 
 @itemize @bullet
@@ -8194,7 +8242,7 @@
 @node orientations
 @subsection orientations
 
-Number constants for actor attributes @ref{orientation} or @ref{slope}. Please
+Number constants for attributes @samp{orientation} or @samp{slope}. Please
 choose the constant that is appropriate for an object and do avoid using numbers.
 
 @itemize @bullet
@@ -19952,12 +20000,21 @@
 * Tips and Tricks::         Simple patterns that are valuable like a feature
 @end menu
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Resolvers --------------------
 @node Resolvers
 @section Resolvers
 
+Every tile in the world is defined by a key that needs to be resolved to its 
+declaration. This can be done either by the @ref{Tiles Repository} @samp{ti} 
+alone, or by additionally chained resolvers. In the chapter @ref{Lua API} we
+learned how to set up a @ref{World} by static @ref{Tile and Object Declaration}s.
+Now it is time to explore the capabilities of resolvers. In the 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at ref</A>{World Creation} you had to supply a top resolver as an argument. Let us
+look which types of resolvers are available and how you can chain these resolvers. 
+
 @menu
-* Resolver Chaining::  
-* Custom Resolver::    
+* Resolver Chaining::  Linking resolvers and the tiles repository
+* Custom Resolver::    Writing simplified own resolvers
 * res.autotile::       Generate tiles from given template declarations
 * res.composer::       Compose tiles from given base tiles
 * res.maze::           Generate arbitrarily shaped mazes
@@ -19970,43 +20027,42 @@
 @node Resolver Chaining
 @subsection Resolver Chaining
 
-Once all parameters have been set and all tiles have been declared it is time
-to create the level world with all its objects. This is done by the following
-constructor that appears in two variations.
+There exist several useful resolvers that may simplify the task of level writing
+or provide dynamic features like randomness, mazes, etc. Each of them handles
+just some keys out of your world map. For the other keys the resolver has no
+idea how to resolve them to object declarations. Thus each resolver has to be
+linked to a so called @samp{subresolver}. The resolver just forwards all key
+request that it can not handle itself to its subresolver. Indeed it will in
+most cases even forward modified key requests to its subresolver that are 
+required by the process of handling its own keys.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at ref</A>{World Creation}
+The last resolver in the chain will either use the @ref{Tiles Repository} 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at samp</A>{ti} as its subresolver or a @ref{Custom Resolver} function, which will be
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at samp</A>{ti} based, too
+.
+A typical resolver chain will look like:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at table</A> @asis
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Syntax:}
-width, height = @b{wo}(@i{topresolver}, ...)
 
-
 @table @asis
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @i{topresolver} = @code{ti} | @i{resolver} | @i{localresolver}
-Every tile in the world is given by a key that needs to be resolved to its
-declaration. This can be done either by the @ref{Tiles Repository} @samp{ti}, or
-by given library @ref{Resolvers} or by local @ref{Custom Resolver} function.
-This argument takes the top resolver that is requested first.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at end</A> table
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Syntax Sample:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at example</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{subresolver} = @i{res}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">. at i</A>{random}(@i{ti}, ...)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at var</A>{topresolver} = @i{res}<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">. at i</A>{composer}(@var{subresolver})
+width, height = @i{wo}(@var{topresolver}, ...)
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> example
 
 @item @b{Details:}
-Every key is resolved to its tile declaration via the given resolver chain.
-The top resolver is given to this call as a parameter. If it is @samp{ti} the
-chain consists just of one element and the tile declaration stored in the tiles
-repository at the given key is taken. Otherwise the resolvers will be evaluated
-as explained in @ref{Resolver Chaining}.
+The call of every resolver returns a context reference handle, that must be
+supplied to the upward resolver in the chain. Thus you need to start with the
+lowest resolver in your level code. The @ref{World Creation} takes the top most
+resolver context handle.
 
-But there exist several useful
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at ref</A>{Resolvers} that may simplify the task of level writing or provide dynamic
-features like randomness, mazes, etc. If you like to use one or several of them
-you provide the instance of the resolver to be requested first in this
-constructor. The instance that should be requested next is set in the top
-resolver as first argument, and so on. The last library resolver takes usually
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at samp</A>{ti} as its subresolver. For even more flexibility you can provide an
-own @ref{Custom Resolver} function within the level to take influence on the key
-interpretation. This function has to be the last resolver in the chain.
+There is no limit to the number of chained resolvers. But the order of resolvers
+may sometimes be critical. Please read carefully the resolver notes for usage,
+restrictions and caveats.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">- at item</A> @b{Example:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Full Example:}
+The level &quot;Demo Resolver Chain&quot; of levelpack &quot;Demolevels&quot;:
 @example
 ti[&quot;~&quot;] = @{&quot;fl_water&quot;@}
 ti[&quot;s&quot;] = @{&quot;fl_sahara&quot;@}
@@ -20082,6 +20138,7 @@
 @samp{return nil} indicates an error of usage of an unknown tile key.
 
 @item @b{Example:}
+The level &quot;Demo User Resolver&quot; of levelpack &quot;Demolevels&quot;:
 @example
 ti[&quot;r&quot;] = @{&quot;fl_rough_red&quot;@}
 ti[&quot;b&quot;] = @{&quot;fl_rough_blue&quot;@}
@@ -20397,10 +20454,161 @@
 @end table
 
 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at c</A> ----------------- Maze Resolver --------------------
 @node res.maze
 @subsection res.maze
 
+The maze resolver supports you in the creation of quite arbitrary mazes. The
+shape is no longer limited to boring rectangular areas of one grid thick walls
+leaving the player just a one grid path uniquely connecting all parts of the maze.
 
+This second generation maze generator lets you fill mazes in arbitrarily shaped
+areas, mazes with thick walls or chasms, or thin walls of just a sheet of window
+glass, mazes with cells of single grid, cells that are whole islands or mazes
+based on @ref{it_strip} that have cells of no extent and consist of connections
+only. The maze cells may be aligned strictly rectangular or shifted in one
+direction, they may be just connected to its 4 neighbors or to 6 neighbors in
+hexagonal mazes or three dimensional mazes. You can write and plug in your own
+maze generation and rendering algorithms. And finally you can analyse,
+postprocess and even modify your maze even after the inital creation.
+
+From the mathematical point of view we provide the basic structures for
+generation of quite arbitrary directed graphs. Our maze consists of cells, the
+vertices of a graph. Every cell can be connected to a given number of neighbor
+cells.  But these connections, that are the passages from one cell to another,
+can even be direction dependent. This allows you to use window panes on either
+side of a connection or to use oneways for your connections, too. These passages
+from one cell to another are the edges of our graph and as they may be directed
+we have a directed graph. But for most mazed the support of directions is 
+irrelevant and transparent, and you do not really need to know anything about
+graphs at all. Thus we called the resolver just a maze resolver.
+
+Of course such a versatile resolver needs some configuration. As the parameters
+exceed the number of arguments, that you can reasonably supply to a function
+just by enlisting them, we decided to group the parameters for specific 
+tasks and to use a table with named attributes for the configuration. This 
+sounds more complex than it is. But watch out carefully for the table curly
+braces as they are necessary and can not be omitted.
+
+In a big level you may want to generate two or even more completely independent
+mazes. You can do this by using multiple instances of this resolver. The 
+resolver handle returned on the configuration is a unique reference pointer for
+the maze for subsequent requests. Store it and link all the maze resolvers as
+explained in @ref{Resolver Chaining}.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at table</A> @asis
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Location:}
+This resolver is part of the library @samp{libmaze} as of release 2. You can
+use it by adding the following dependency to your level @ref{&lt;compatibility&gt;}
+declaration:
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at example</A>
+  &lt;@i{el}:@b{dependency} @i{el}:@b{path}=&quot;@var{lib/libmaze}&quot; @i{el}:@b{id}=&quot;@var{lib/libmaze}&quot; @i{el}:@b{release}=&quot;@var{2}&quot; @i{el}:@b{preload}=&quot;@var{true}&quot;/&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> example
+
+The library @ref{libmap} is automatically preloaded by this resolver.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Syntax:}
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at i</A>{themaze} = @b{res.maze}(@i{subresolver}, @i{attributes})
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at table</A> @asis
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{subresolver}
+Resolver to which unresolved requests should be forwarded. May be @samp{ti}
+as the final resolver of the resolver chain.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{attributes} = @{@i{keyvalue}, @i{keyvalue},...@}
+An anonymous table with one or many attributes given as key value pairs, 
+separated by a comma.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{keyvalue} = &lt;area=@i{area_value} | render = @i{render_value} | kernel = @i{kernel_value} | spacing = @i{spacing_value} | persistent=@i{persistence}&gt;
+Values for given keys that may occur in any sequence in the anonymous table.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{area_value} = @{&lt;@i{rectangular_area} | @i{marked_area}&gt;@}
+The maze area specification, that is either defined as an rectangluar area
+or an area marked in the the world's map.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{rectangular_area} = @i{anchor}, @i{width}, @i{height}
+An rectangular area that is given by an anchor position within the world and
+two numbers for the width and height measured in maze cells.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{anchor}
+Anything that is convertable to a @ref{Position} that denotes the upper left
+edge of the rectangular maze area. Besides a position value, an object reference
+or a name string of an object or position are supported value types.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{marked_area}
+One or multiple strings separated by a comma as simple entries in the anonymous
+table. Every string does either specify a key match, a key prefix or an object
+name. All these strings can be used at the same time for marking an area. The
+strings can occur in any sequence and multiplicity.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{kernel_value} = @{kernel_width, kernel_height@}
+The size of the kernel of a cell given by width and height in number of grids.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{spacing_value} = @{spacing_x, spacing_y@}
+The distance of the kernel of one cell to its neighbor in x and y direction
+measured in number of grids.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{render_value} = @{&lt;@i{std_renderer_args} | @i{other_renderer}&gt;@}
+The specification for drawing the maze. In case of a missing specification
+no drawing will be done at all. If the default standard renderer should be used
+its parameters can be directly supplied, other renderers need a type 
+specification plus the necesssary configuration information.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{std_renderer_args} = @i{passage_keys} [, &lt;@i{wall_key} [, @i{kernel_key}] | @i{cell_map}&gt;]]
+The standard renderer takes info about tile keys to be used for the passages,
+and either a cell map, or additional tile keys for the wall and optionally the
+kernel of a cell.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{passage_keys} = &lt;@i{passage_key} | @{@i{passage_open}, @i{passage_closed}@}&gt;
+Usually you just give a tile key for open maze passages. Closed passages appear
+like walls and use the same tile key. But in case you want to use special tile
+keys for open and for closed passages you can supply two strings in an 
+anonymous table. If you give no wall key you may need to include an 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at samp</A>{st_nil} in your open passage tile declaration to kill a wall stone drawn
+by your world map.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{wall_key}
+The tile key to be used for drawing walls. If it is omitted no wall is drawn
+and the resolver relies on all possible wall tiles to be drawn by the world
+map itself.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{kernel_key}
+In most cases the cell kernel will be drawn by the world map. But if not you
+can supply a tile key that will be drawn on every cell kernel grid.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{cell_map}
+Instead of kernel and wall tile keys you can supply a @ref{libmap} map of a
+complete cell. The map can provide arbitrary tiles for cell kernels larger than
+a single grid. The walls can differ on the south and east side, too.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{other_renderer} = @i{renderer}  [, @i{other_renderer_args}]
+Enlisting of a a renderer function followed by its specific arguments.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{renderer}
+The function that does the rendering. By default it is 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at samp</A>{lib.maze.renderer_standard} with the above given arguments. Other supplied
+renederers are @samp{lib.maze.renderer_window} and 
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at samp</A>{lib.maze.renderer_strip}
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @i{persistence}
+A boolean flag that default to @samp{false}. You nees to set it to @samp{true}
+if you want to access the maze or any of its cells after the level 
+initialization. Otherwise the maze reference handle with all its data may get
+invalid due to memory garbage collection. This is no problem for most mazes,
+that will be directly rendered and have no need of further evaluation or changes
+during runtime.
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> table
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Syntax Samples:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at example</A>
+maze1 = res.maze(ti, @{area =@{&quot;anchor1&quot;, 4, 5@}, render = @{&quot; &quot;, &quot;-&quot;, &quot; &quot;@}@})
+maze2 = res.maze(ti, @{area =@{&quot;.&quot;@}, kernel=@{1,1@}, render = @{&quot;!&quot;, &quot;~&quot;, &quot;-&quot;@}@})
+maze3 = res.maze(ti, @{area =@{&quot;amaze#*&quot;@}, render = @{@{&quot;.&quot;,&quot;+&quot;@}, &quot;~&quot;, &quot;-&quot;@}@})
+maze4 = res.maze(ti, @{area =@{po(2, 12), 5, 5@}, kernel=@{3,2@}, 
+                   render = @{&quot;.&quot;, wo:newMap(&quot; &quot;, @{&quot;!!!~&quot;,&quot;--!~&quot;,&quot;~~~~&quot;@})@}@})
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> example
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Details:}
+
+
+
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at item</A> @b{Full Example:}
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at example</A>
+ti[&quot; &quot;] = @{&quot;fl_sahara&quot;@}
+
+w, h = wo(resolver, &quot; &quot;, @{
+&quot;                                        &quot;,
+&quot;                                        &quot;,
+&quot;                                        &quot;
+@})
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> example
<A HREF="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">+ at end</A> table
+
 @c ----------------- Puzzle Resolver --------------------
 
 @node res.puzzle


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001104.html">[Enigma-game-svn] r1674 - trunk/doc/reference
</A></li>
	<LI>Next message: <A HREF="001106.html">[Enigma-game-svn] r1676 - in trunk: . data/levels	data/levels/enigma_cross data/levels/enigma_experimental	data/levels/enigma_i data/levels/enigma_ii	data/levels/enigma_iii data/levels/enigma_oxyd	data/levels/enigma_pentomino data/levels/enigma_v	data/levels/enigma_vi data/levels/enigma_vii data/levels/enigma_viii
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1105">[ date ]</a>
              <a href="thread.html#1105">[ thread ]</a>
              <a href="subject.html#1105">[ subject ]</a>
              <a href="author.html#1105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
