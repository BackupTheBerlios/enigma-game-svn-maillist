<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1731 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items src/stones
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1731%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20src%20src/items%20src/stones&In-Reply-To=%3C200906211437.n5LEbreW022165%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001159.html">
   <LINK REL="Next"  HREF="001161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1731 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items src/stones</H1>
    <B>ral at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1731%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20src%20src/items%20src/stones&In-Reply-To=%3C200906211437.n5LEbreW022165%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1731 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/items src/stones">ral at mail.berlios.de
       </A><BR>
    <I>Sun Jun 21 16:37:53 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001159.html">[Enigma-game-svn] r1730 - in trunk/src: gui lev
</A></li>
        <LI>Next message: <A HREF="001161.html">[Enigma-game-svn] r1732 - trunk/src/lev
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1160">[ date ]</a>
              <a href="thread.html#1160">[ thread ]</a>
              <a href="subject.html#1160">[ subject ]</a>
              <a href="author.html#1160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-06-21 16:37:51 +0200 (Sun, 21 Jun 2009)
New Revision: 1731

Added:
   trunk/data/gfx32/st_bluesand.png
   trunk/data/gfx32/st_brick.png
   trunk/data/gfx32/st_coinslot.png
   trunk/data/gfx32/st_coinslot_insert.png
   trunk/data/gfx32/st_floppy_off.png
   trunk/data/gfx32/st_floppy_on.png
   trunk/data/gfx32/st_key_off.png
   trunk/data/gfx32/st_key_on.png
   trunk/data/gfx32/st_panel.png
   trunk/data/gfx32/st_stoneimpulse.png
   trunk/data/gfx32/st_stoneimpulse_hollow.png
   trunk/data/gfx40/st_bluesand.png
   trunk/data/gfx40/st_brick.png
   trunk/data/gfx40/st_coinslot.png
   trunk/data/gfx40/st_coinslot_insert.png
   trunk/data/gfx40/st_floppy_off.png
   trunk/data/gfx40/st_floppy_on.png
   trunk/data/gfx40/st_key_off.png
   trunk/data/gfx40/st_key_on.png
   trunk/data/gfx40/st_panel.png
   trunk/data/gfx40/st_stoneimpulse.png
   trunk/data/gfx40/st_stoneimpulse_hollow.png
   trunk/data/gfx48/st_bluesand.png
   trunk/data/gfx48/st_brick.png
   trunk/data/gfx48/st_coinslot.png
   trunk/data/gfx48/st_coinslot_insert.png
   trunk/data/gfx48/st_floppy_off.png
   trunk/data/gfx48/st_floppy_on.png
   trunk/data/gfx48/st_key_off.png
   trunk/data/gfx48/st_key_on.png
   trunk/data/gfx48/st_panel.png
   trunk/data/gfx48/st_stoneimpulse.png
   trunk/data/gfx48/st_stoneimpulse_hollow.png
Removed:
   trunk/data/gfx32/st-bigbluesand.png
   trunk/data/gfx32/st-bigbrick.png
   trunk/data/gfx32/st-bigpanel.png
   trunk/data/gfx32/st-coin2slot.png
   trunk/data/gfx32/st-coinslot.png
   trunk/data/gfx32/st-floppy1.png
   trunk/data/gfx32/st-floppy2.png
   trunk/data/gfx32/st-key1.png
   trunk/data/gfx32/st-key2.png
   trunk/data/gfx32/st-stoneimpulse-hollow.png
   trunk/data/gfx32/st-stoneimpulse.png
   trunk/data/gfx40/st-bigbluesand.png
   trunk/data/gfx40/st-bigbrick.png
   trunk/data/gfx40/st-bigpanel.png
   trunk/data/gfx40/st-coin2slot.png
   trunk/data/gfx40/st-coinslot.png
   trunk/data/gfx40/st-floppy1.png
   trunk/data/gfx40/st-floppy2.png
   trunk/data/gfx40/st-key1.png
   trunk/data/gfx40/st-key2.png
   trunk/data/gfx40/st-stoneimpulse-hollow.png
   trunk/data/gfx40/st-stoneimpulse.png
   trunk/data/gfx48/st-bigbluesand.png
   trunk/data/gfx48/st-bigbrick.png
   trunk/data/gfx48/st-bigpanel.png
   trunk/data/gfx48/st-coin2slot.png
   trunk/data/gfx48/st-coinslot.png
   trunk/data/gfx48/st-floppy1.png
   trunk/data/gfx48/st-floppy2.png
   trunk/data/gfx48/st-key1.png
   trunk/data/gfx48/st-key2.png
   trunk/data/gfx48/st-stoneimpulse-hollow.png
   trunk/data/gfx48/st-stoneimpulse.png
Modified:
   trunk/data/models-2d.lua
   trunk/src/items/Trigger.cc
   trunk/src/lua.cc
   trunk/src/stones/CoinSlot.cc
   trunk/src/stones/FloppySwitch.cc
   trunk/src/stones/KeySwitch.cc
   trunk/src/stones/StoneImpulse.cc
Log:
Trunk 1.1:
- fix trigger wrong count in case of dying actors being resurrected
- fix GCC 4.4.0 const warning in lua.cc
- simplify models-2d.lua bridge model definition
- image renaming: cluster stones, st_key, st_floppy, st_coinslot, st_stoneimpulse

Deleted: trunk/data/gfx32/st-bigbluesand.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-bigbrick.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-bigpanel.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-coin2slot.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-coinslot.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-floppy1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-floppy2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-key1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-key2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-stoneimpulse-hollow.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-stoneimpulse.png
===================================================================
(Binary files differ)

Added: trunk/data/gfx32/st_bluesand.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_bluesand.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx32/st_brick.png (from rev 1730, trunk/data/gfx32/st-bigbrick.png)

Copied: trunk/data/gfx32/st_coinslot.png (from rev 1730, trunk/data/gfx32/st-coinslot.png)

Copied: trunk/data/gfx32/st_coinslot_insert.png (from rev 1730, trunk/data/gfx32/st-coin2slot.png)

Copied: trunk/data/gfx32/st_floppy_off.png (from rev 1730, trunk/data/gfx32/st-floppy1.png)

Copied: trunk/data/gfx32/st_floppy_on.png (from rev 1730, trunk/data/gfx32/st-floppy2.png)

Copied: trunk/data/gfx32/st_key_off.png (from rev 1730, trunk/data/gfx32/st-key1.png)

Copied: trunk/data/gfx32/st_key_on.png (from rev 1730, trunk/data/gfx32/st-key2.png)

Copied: trunk/data/gfx32/st_panel.png (from rev 1730, trunk/data/gfx32/st-bigpanel.png)

Copied: trunk/data/gfx32/st_stoneimpulse.png (from rev 1730, trunk/data/gfx32/st-stoneimpulse.png)

Copied: trunk/data/gfx32/st_stoneimpulse_hollow.png (from rev 1730, trunk/data/gfx32/st-stoneimpulse-hollow.png)

Deleted: trunk/data/gfx40/st-bigbluesand.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-bigbrick.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-bigpanel.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-coin2slot.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-coinslot.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-floppy1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-floppy2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-key1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-key2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-stoneimpulse-hollow.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-stoneimpulse.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/st_bluesand.png (from rev 1730, trunk/data/gfx40/st-bigbluesand.png)

Copied: trunk/data/gfx40/st_brick.png (from rev 1730, trunk/data/gfx40/st-bigbrick.png)

Copied: trunk/data/gfx40/st_coinslot.png (from rev 1730, trunk/data/gfx40/st-coinslot.png)

Copied: trunk/data/gfx40/st_coinslot_insert.png (from rev 1730, trunk/data/gfx40/st-coin2slot.png)

Copied: trunk/data/gfx40/st_floppy_off.png (from rev 1730, trunk/data/gfx40/st-floppy1.png)

Copied: trunk/data/gfx40/st_floppy_on.png (from rev 1730, trunk/data/gfx40/st-floppy2.png)

Copied: trunk/data/gfx40/st_key_off.png (from rev 1730, trunk/data/gfx40/st-key1.png)

Copied: trunk/data/gfx40/st_key_on.png (from rev 1730, trunk/data/gfx40/st-key2.png)

Copied: trunk/data/gfx40/st_panel.png (from rev 1730, trunk/data/gfx40/st-bigpanel.png)

Copied: trunk/data/gfx40/st_stoneimpulse.png (from rev 1730, trunk/data/gfx40/st-stoneimpulse.png)

Copied: trunk/data/gfx40/st_stoneimpulse_hollow.png (from rev 1730, trunk/data/gfx40/st-stoneimpulse-hollow.png)

Deleted: trunk/data/gfx48/st-bigbluesand.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-bigbrick.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-bigpanel.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-coin2slot.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-coinslot.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-floppy1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-floppy2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-key1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-key2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-stoneimpulse-hollow.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-stoneimpulse.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/st_bluesand.png (from rev 1730, trunk/data/gfx48/st-bigbluesand.png)

Copied: trunk/data/gfx48/st_brick.png (from rev 1730, trunk/data/gfx48/st-bigbrick.png)

Copied: trunk/data/gfx48/st_coinslot.png (from rev 1730, trunk/data/gfx48/st-coinslot.png)

Copied: trunk/data/gfx48/st_coinslot_insert.png (from rev 1730, trunk/data/gfx48/st-coin2slot.png)

Copied: trunk/data/gfx48/st_floppy_off.png (from rev 1730, trunk/data/gfx48/st-floppy1.png)

Copied: trunk/data/gfx48/st_floppy_on.png (from rev 1730, trunk/data/gfx48/st-floppy2.png)

Copied: trunk/data/gfx48/st_key_off.png (from rev 1730, trunk/data/gfx48/st-key1.png)

Copied: trunk/data/gfx48/st_key_on.png (from rev 1730, trunk/data/gfx48/st-key2.png)

Copied: trunk/data/gfx48/st_panel.png (from rev 1730, trunk/data/gfx48/st-bigpanel.png)

Copied: trunk/data/gfx48/st_stoneimpulse.png (from rev 1730, trunk/data/gfx48/st-stoneimpulse.png)

Copied: trunk/data/gfx48/st_stoneimpulse_hollow.png (from rev 1730, trunk/data/gfx48/st-stoneimpulse-hollow.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/data/models-2d.lua	2009-06-21 14:37:51 UTC (rev 1731)
@@ -445,14 +445,9 @@
         DefAlias(&quot;fl_bridge_&quot;..suff..&quot;_open&quot;, &quot;fl_bridge_bw_open&quot;)
         DefAlias(&quot;fl_bridge_&quot;..suff..&quot;_closed&quot;, &quot;fl_bridge_bw_closed&quot;)
 
-        local tmp=DefSubimages(&quot;fl_bridge_&quot;..suff, {h=7})
-        local namelist = {}
-        namelist[1] = bridge_c
-        for i=1,7  do
-            namelist[i+1] = tmp[i]
-        end
-        namelist[9] = bridge_o
-
+        local namelist=DefSubimages(&quot;fl_bridge_&quot;..suff, {h=7})
+	table.insert(namelist, 1, bridge_c)
+	table.insert(namelist, bridge_o)
         local frames = BuildFrames(namelist,70)
         DefAnim(&quot;fl_bridge_&quot;..suff..&quot;_opening&quot;, frames)
         DefAnim(&quot;fl_bridge_&quot;..suff..&quot;_closing&quot;, ReverseFrames(frames))
@@ -800,8 +795,8 @@
     DefStone(&quot;st_dummy&quot;)
     DefImage(&quot;st-easymode&quot;)
     DefStone(&quot;st_flat_fire&quot;)
-    DefStone(&quot;st-floppy0&quot;, &quot;sh_round&quot;, {filename=&quot;st-floppy1&quot;})
-    DefStone(&quot;st-floppy1&quot;, &quot;sh_round&quot;, {filename=&quot;st-floppy2&quot;})
+    DefStone(&quot;st_floppy_off&quot;, &quot;sh_round&quot;)
+    DefStone(&quot;st_floppy_on&quot;, &quot;sh_round&quot;)
     DefStone(&quot;st_box_rock&quot;, &quot;sh_round&quot;)
     DefStone(&quot;st_rawglass&quot;, &quot;sh_glass&quot;)
     DefStone(&quot;st_rawglass_quad&quot;, &quot;sh_rawglass_quad&quot;)
@@ -812,8 +807,8 @@
     DefStone(&quot;st_grate_framed&quot;, &quot;sh_grate_framed&quot;)
     DefStone(&quot;st_portal_horse&quot;, &quot;sh_portal_horse&quot;)
     DefStone(&quot;st_greenbrown&quot;, &quot;sh_round&quot;)
-    DefStone(&quot;st-key0&quot;, &quot;sh_round&quot;, {filename=&quot;st-key1&quot;})
-    DefStone(&quot;st-key1&quot;, &quot;sh_round&quot;, {filename=&quot;st-key2&quot;})
+    DefStone(&quot;st_key_off&quot;, &quot;sh_round&quot;)
+    DefStone(&quot;st_key_on&quot;, &quot;sh_round&quot;)
     DefStone(&quot;st_redbrown&quot;, &quot;sh_round&quot;)
     DefStone(&quot;st_metal&quot;)
     DefStone(&quot;st_redrock&quot;)
@@ -861,47 +856,23 @@
     DefShModel(&quot;st_actorimpulse&quot;, namelist[1], shnamelist[1])
 end
 
--- st-bigbluesand --
-do
-    DefSubimages(&quot;st-bigbluesand&quot;, {modelname=&quot;st-bigbluesandx&quot;,w=4,h=4})
-    for i=1,16 do DefSolidStone(&quot;st-bigbluesand&quot;..i, &quot;st-bigbluesandx&quot;..i) end
-    DefSolidStone(&quot;st-blue-sand&quot;, &quot;st-bigbluesandx1&quot;)
-end
-
--- st-bigbrick --
-do
-    DefSubimages(&quot;st-bigbrick&quot;, {modelname=&quot;st-bigbrickx&quot;,w=4,h=4})
-    for i=1,16 do DefSolidStone(&quot;st-bigbrick&quot;..i, &quot;st-bigbrickx&quot;..i) end
-    DefSolidStone(&quot;st-brick&quot;, &quot;st-bigbrickx1&quot;)
-    DefSolidStone(&quot;st_magic_brick&quot;, &quot;st-bigbrickx1&quot;)
-end
-
--- st-bigpanel --
-do
-    DefSubimages(&quot;st-bigpanel&quot;, {modelname=&quot;st-bigpanelx&quot;,w=4,h=4})
-    for i=1,16 do DefSolidStone(&quot;st-bigpanel&quot;..i, &quot;st-bigpanelx&quot;..i) end
-    DefSolidStone(&quot;st-panel&quot;, &quot;st-bigpanelx1&quot;)
-    -- st-wood_001. Remove when it's time!
-    DefSolidStone(&quot;st-wood_001&quot;, &quot;st-bigpanelx1&quot;)
-end
-
 -- st_bluesand --
 do
-    DefSubimages(&quot;st-bigbluesand&quot;, {modelname=&quot;st_bluesandx&quot;,w=4,h=4})
+    DefSubimages(&quot;st_bluesand&quot;, {modelname=&quot;st_bluesandx&quot;,w=4,h=4})
     for i=0,15 do DefSolidStone(&quot;st_bluesand&quot;..i, &quot;st_bluesandx&quot;..(i+1)) end
     DefSolidStone(&quot;st_bluesand&quot;, &quot;st_bluesandx1&quot;)
 end
 
 -- st_brick --
 do
-    DefSubimages(&quot;st-bigbrick&quot;, {modelname=&quot;st_brickx&quot;,w=4,h=4})
+    DefSubimages(&quot;st_brick&quot;, {modelname=&quot;st_brickx&quot;,w=4,h=4})
     for i=0,15 do DefSolidStone(&quot;st_brick&quot;..i, &quot;st_brickx&quot;..(i+1)) end
     DefSolidStone(&quot;st_brick&quot;, &quot;st_brickx1&quot;)
 end
 
 -- st_panel --
 do
-    DefSubimages(&quot;st-bigpanel&quot;, {modelname=&quot;st_panelx&quot;,w=4,h=4})
+    DefSubimages(&quot;st_panel&quot;, {modelname=&quot;st_panelx&quot;,w=4,h=4})
     for i=0,15 do DefSolidStone(&quot;st_panel&quot;..i, &quot;st_panelx&quot;..(i+1)) end
     DefSolidStone(&quot;st_panel&quot;, &quot;st_panelx1&quot;)
 end
@@ -971,13 +942,13 @@
     make_chess(&quot;_white&quot;)
 end
 
--- st-coinslot --
+-- st_coinslot --
 do
-    DefStone(&quot;st-coinslot&quot;)
-    local images = DefSubimages(&quot;st-coin2slot&quot;, {h=18})
-    DefAnim(&quot;st-coin2slot-anim&quot;, BuildFrames(images, 20))
-    DefSolidStone(&quot;st-coin2slot&quot;, &quot;st-coin2slot-anim&quot;)
-    DefSolidStone(&quot;st-coinslot-active&quot;, &quot;st-coin2slot18&quot;)
+    DefStone(&quot;st_coinslot&quot;)
+    local images = DefSubimages(&quot;st_coinslot_insert&quot;, {h=18})
+    DefAnim(&quot;st_coinslot_anim&quot;, BuildFrames(images, 20))
+    DefSolidStone(&quot;st_coinslot_insert&quot;, &quot;st_coinslot_anim&quot;)
+    DefSolidStone(&quot;st_coinslot_active&quot;, &quot;st_coinslot_insert18&quot;)
 end
 
 -- st-disco --
@@ -1213,35 +1184,35 @@
     DefShModel(&quot;st-shogun7&quot;, &quot;st-shogun-fg7&quot;, &quot;sh_shogun_s&quot;)
 end
 
--- st-stoneimpulse --
+-- st_stoneimpulse --
 --
 -- Note: It's important that the duration of the closing animation
 -- (anim2) is longer than the opening animation (anim1). Otherwise
 -- impulse stones do not work properly!
 do
-   local images = DefSubimages(&quot;st-stoneimpulse&quot;, {h=6})
-   DefRoundStone(&quot;st-stoneimpulse&quot;, images[1])
-   DefRoundStone(&quot;st-stoneimpulse-steady&quot;, images[6])
+   local images = DefSubimages(&quot;st_stoneimpulse&quot;, {h=6})
+   DefRoundStone(&quot;st_stoneimpulse&quot;, images[1])
+   DefRoundStone(&quot;st_stoneimpulse_steady&quot;, images[6])
    local frames = {}
    for i=1,4 do table.insert(frames, images[i]) end
-   DefAnim(&quot;stoneimpulse-anim1&quot;, BuildFrames(frames, 55))
-   DefRoundStone(&quot;st-stoneimpulse-anim1&quot;, &quot;stoneimpulse-anim1&quot;)
+   DefAnim(&quot;stoneimpulse_anim1&quot;, BuildFrames(frames, 55))
+   DefRoundStone(&quot;st_stoneimpulse_anim1&quot;, &quot;stoneimpulse_anim1&quot;)
    table.insert(frames, images[4]) -- add 1 frame to make closing anim longer!
-   DefAnim(&quot;stoneimpulse-anim2&quot;, ReverseFrames(BuildFrames(frames, 55)))
-   DefRoundStone(&quot;st-stoneimpulse-anim2&quot;, &quot;stoneimpulse-anim2&quot;)
+   DefAnim(&quot;stoneimpulse_anim2&quot;, ReverseFrames(BuildFrames(frames, 55)))
+   DefRoundStone(&quot;st_stoneimpulse_anim2&quot;, &quot;stoneimpulse_anim2&quot;)
 end
 
--- st-stoneimpulse-hollow --
+-- st_stoneimpulse_hollow --
 do
-   local images = DefSubimages(&quot;st-stoneimpulse-hollow&quot;, {h=4})
-   DefShModel(&quot;st-stoneimpulse-hollow&quot;, images[1], &quot;sh_floating&quot;)
+   local images = DefSubimages(&quot;st_stoneimpulse_hollow&quot;, {h=4})
+   DefShModel(&quot;st_stoneimpulse_hollow&quot;, images[1], &quot;sh_floating&quot;)
    local frames = {}
    for i=1,4 do table.insert(frames, images[i]) end
-   DefAnim(&quot;stoneimpulse-hollow-anim1&quot;, BuildFrames(frames, 55))
-   DefShModel(&quot;st-stoneimpulse-hollow-anim1&quot;, &quot;stoneimpulse-hollow-anim1&quot;, &quot;sh_floating&quot;)
+   DefAnim(&quot;stoneimpulse_hollow_anim1&quot;, BuildFrames(frames, 55))
+   DefShModel(&quot;st_stoneimpulse_hollow_anim1&quot;, &quot;stoneimpulse_hollow_anim1&quot;, &quot;sh_floating&quot;)
    table.insert(frames, images[4]) -- add 1 frame to make closing anim longer!
-   DefAnim(&quot;stoneimpulse-hollow-anim2&quot;, ReverseFrames(BuildFrames(frames, 55)))
-   DefShModel(&quot;st-stoneimpulse-hollow-anim2&quot;, &quot;stoneimpulse-hollow-anim2&quot;, &quot;sh_floating&quot;)
+   DefAnim(&quot;stoneimpulse_hollow_anim2&quot;, ReverseFrames(BuildFrames(frames, 55)))
+   DefShModel(&quot;st_stoneimpulse_hollow_anim2&quot;, &quot;stoneimpulse_hollow_anim2&quot;, &quot;sh_floating&quot;)
 end
 
 do

Modified: trunk/src/items/Trigger.cc
===================================================================
--- trunk/src/items/Trigger.cc	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/src/items/Trigger.cc	2009-06-21 14:37:51 UTC (rev 1731)
@@ -87,12 +87,12 @@
     }
     
     void Trigger::actor_enter(Actor *a) {
-        if (!(a-&gt;is_flying() || a-&gt;is_dead()))
+        if (!(a-&gt;is_flying() || a-&gt;isMoribund()))
             updateIState(+1, !server::WorldInitialized);
     }
     
     void Trigger::actor_leave(Actor *a) {
-        if (!(a-&gt;is_flying() || a-&gt;is_dead()))
+        if (!(a-&gt;is_flying() || a-&gt;isMoribund()))
             updateIState(-1, !server::WorldInitialized);
     }
     
@@ -105,7 +105,7 @@
         GetActorsInsideField(get_pos(), actors);
         int count = 0;
         for (std::vector&lt;Actor*&gt;::iterator itr = actors.begin(); itr != actors.end(); ++itr)
-            if (!((*itr)-&gt;is_flying() || (*itr)-&gt;is_dead())) count++;
+            if (!((*itr)-&gt;is_flying() || (*itr)-&gt;isMoribund())) count++;
         return count;
     }
     

Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/src/lua.cc	2009-06-21 14:37:51 UTC (rev 1731)
@@ -905,7 +905,7 @@
 
     const char *dir     = lua_tostring(L,3);
     const char *allowed = &quot;wsen&quot;;
-    char       *found   = strchr(allowed, dir[0]);
+    const char *found   = strchr(allowed, dir[0]);
 
     if (found &amp;&amp; found[0]) 
         AddScramble(GridPos(x,y), enigma::Direction(found-allowed));

Modified: trunk/src/stones/CoinSlot.cc
===================================================================
--- trunk/src/stones/CoinSlot.cc	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/src/stones/CoinSlot.cc	2009-06-21 14:37:51 UTC (rev 1731)
@@ -80,7 +80,7 @@
     void CoinSlot::init_model() {
         // just static models
         if (state &lt;= ON)
-            set_model(state==ON ? &quot;st-coinslot-active&quot; : &quot;st-coinslot&quot;);
+            set_model(state==ON ? &quot;st_coinslot_active&quot; : &quot;st_coinslot&quot;);
     }
 
     void CoinSlot::animcb() {
@@ -166,11 +166,11 @@
                 ASSERT(newIState != ON, XLevelRuntime, &quot;Coinslot - illegal state change from OFF to ON&quot;);
                 actionValue = true;
                 doAction = (newIState == INSERT_ON);
-                set_anim(&quot;st-coin2slot&quot;);
+                set_anim(&quot;st_coinslot_insert&quot;);
                 break;
             case ON :
                 if (newIState == INSERT_ON)
-                    set_anim(&quot;st-coin2slot&quot;);
+                    set_anim(&quot;st_coinslot_insert&quot;);
                 else if (newIState == OFF) {
                     actionValue = false;
                     doAction = true;
@@ -187,7 +187,7 @@
             case INSERT_ON :
                 switch (newIState) {
                     case INSERT_ON :
-                        set_anim(&quot;st-coin2slot&quot;);  // may restart anim!
+                        set_anim(&quot;st_coinslot_insert&quot;);  // may restart anim!
                         break;
                     case ON :
                         doInit = true;

Modified: trunk/src/stones/FloppySwitch.cc
===================================================================
--- trunk/src/stones/FloppySwitch.cc	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/src/stones/FloppySwitch.cc	2009-06-21 14:37:51 UTC (rev 1731)
@@ -41,7 +41,7 @@
     }
 
     void FloppySwitch::init_model() {
-        set_model(ecl::strf(&quot;st-floppy%s&quot;, state == ON ? &quot;1&quot; : &quot;0&quot;));
+        set_model(ecl::strf(&quot;st_floppy_%s&quot;, state == ON ? &quot;on&quot; : &quot;off&quot;));
     }
 
     void FloppySwitch::actor_hit(const StoneContact &amp;sc) {

Modified: trunk/src/stones/KeySwitch.cc
===================================================================
--- trunk/src/stones/KeySwitch.cc	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/src/stones/KeySwitch.cc	2009-06-21 14:37:51 UTC (rev 1731)
@@ -46,7 +46,7 @@
     }
 
     void KeySwitch::init_model() {
-        set_model(ecl::strf(&quot;st-key%s&quot;, state == ON ? &quot;1&quot; : &quot;0&quot;));
+        set_model(ecl::strf(&quot;st_key_%s&quot;, state == ON ? &quot;on&quot; : &quot;off&quot;));
     }
 
     void KeySwitch::actor_hit(const StoneContact &amp;sc) {

Modified: trunk/src/stones/StoneImpulse.cc
===================================================================
--- trunk/src/stones/StoneImpulse.cc	2009-06-19 22:28:29 UTC (rev 1730)
+++ trunk/src/stones/StoneImpulse.cc	2009-06-21 14:37:51 UTC (rev 1731)
@@ -139,11 +139,11 @@
 
     void StoneImpulse::init_model() {
         if (state == IDLE)
-            set_model(ecl::strf(&quot;st-stoneimpulse%s&quot;, isHollow() ? &quot;-hollow&quot; : ((objFlags &amp; OBJBIT_STEADY) ? &quot;-steady&quot; : &quot;&quot;)));
+            set_model(ecl::strf(&quot;st_stoneimpulse%s&quot;, isHollow() ? &quot;_hollow&quot; : ((objFlags &amp; OBJBIT_STEADY) ? &quot;_steady&quot; : &quot;&quot;)));
         else if (state == BREAKING)
             set_anim(&quot;st_stoneimpulse_breaking&quot;);
         else
-            set_anim(ecl::strf(&quot;st-stoneimpulse%s-anim%d&quot;, isHollow() ? &quot;-hollow&quot; : &quot;&quot;,
+            set_anim(ecl::strf(&quot;st_stoneimpulse%s_anim%d&quot;, isHollow() ? &quot;_hollow&quot; : &quot;&quot;,
                     state == EXPANDING ? 1 : 2));
     }
     


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001159.html">[Enigma-game-svn] r1730 - in trunk/src: gui lev
</A></li>
	<LI>Next message: <A HREF="001161.html">[Enigma-game-svn] r1732 - trunk/src/lev
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1160">[ date ]</a>
              <a href="thread.html#1160">[ thread ]</a>
              <a href="subject.html#1160">[ subject ]</a>
              <a href="author.html#1160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
