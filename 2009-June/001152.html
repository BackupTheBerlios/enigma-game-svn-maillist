<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r1723 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/actors src/items src/stones
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1723%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20src%20src/actors%20src/items%20src/stones&In-Reply-To=%3C200906162233.n5GMXP8n031004%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001151.html">
   <LINK REL="Next"  HREF="001153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r1723 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/actors src/items src/stones</H1>
    <B>ral at BerliOS</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r1723%20-%20in%20trunk%3A%20data%20data/gfx32%20data/gfx40%0A%09data/gfx48%20src%20src/actors%20src/items%20src/stones&In-Reply-To=%3C200906162233.n5GMXP8n031004%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r1723 - in trunk: data data/gfx32 data/gfx40	data/gfx48 src src/actors src/items src/stones">ral at mail.berlios.de
       </A><BR>
    <I>Wed Jun 17 00:33:25 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001151.html">[Enigma-game-svn] r1722 - in trunk/data/levels: enigma_cross	enigma_i enigma_ii enigma_ix enigma_viii
</A></li>
        <LI>Next message: <A HREF="001153.html">[Enigma-game-svn] r1724 - in trunk/doc/reference: . images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1152">[ date ]</a>
              <a href="thread.html#1152">[ thread ]</a>
              <a href="subject.html#1152">[ subject ]</a>
              <a href="author.html#1152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ral
Date: 2009-06-17 00:33:11 +0200 (Wed, 17 Jun 2009)
New Revision: 1723

Added:
   trunk/data/gfx32/st_actorimpulse.png
   trunk/data/gfx32/st_break_bug.png
   trunk/data/gfx32/st_charge_minus.png
   trunk/data/gfx32/st_charge_plus.png
   trunk/data/gfx32/st_charge_zero.png
   trunk/data/gfx32/st_chess_black.png
   trunk/data/gfx32/st_chess_white.png
   trunk/data/gfx32/st_fourswitch.png
   trunk/data/gfx32/st_knight.png
   trunk/data/gfx32/st_passage_black_cross.png
   trunk/data/gfx32/st_passage_black_frame.png
   trunk/data/gfx32/st_passage_black_slash.png
   trunk/data/gfx32/st_passage_black_square.png
   trunk/data/gfx32/st_passage_white_cross.png
   trunk/data/gfx32/st_passage_white_frame.png
   trunk/data/gfx32/st_passage_white_slash.png
   trunk/data/gfx32/st_passage_white_square.png
   trunk/data/gfx40/st_actorimpulse.png
   trunk/data/gfx40/st_break_bug.png
   trunk/data/gfx40/st_charge_minus.png
   trunk/data/gfx40/st_charge_plus.png
   trunk/data/gfx40/st_charge_zero.png
   trunk/data/gfx40/st_chess_black.png
   trunk/data/gfx40/st_chess_white.png
   trunk/data/gfx40/st_fourswitch.png
   trunk/data/gfx40/st_knight.png
   trunk/data/gfx40/st_passage_black_cross.png
   trunk/data/gfx40/st_passage_black_frame.png
   trunk/data/gfx40/st_passage_black_slash.png
   trunk/data/gfx40/st_passage_black_square.png
   trunk/data/gfx40/st_passage_white_cross.png
   trunk/data/gfx40/st_passage_white_frame.png
   trunk/data/gfx40/st_passage_white_slash.png
   trunk/data/gfx40/st_passage_white_square.png
   trunk/data/gfx48/st_actorimpulse.png
   trunk/data/gfx48/st_break_bug.png
   trunk/data/gfx48/st_charge_minus.png
   trunk/data/gfx48/st_charge_plus.png
   trunk/data/gfx48/st_charge_zero.png
   trunk/data/gfx48/st_chess_black.png
   trunk/data/gfx48/st_chess_white.png
   trunk/data/gfx48/st_fourswitch.png
   trunk/data/gfx48/st_knight.png
   trunk/data/gfx48/st_passage_black_cross.png
   trunk/data/gfx48/st_passage_black_frame.png
   trunk/data/gfx48/st_passage_black_slash.png
   trunk/data/gfx48/st_passage_black_square.png
   trunk/data/gfx48/st_passage_white_cross.png
   trunk/data/gfx48/st_passage_white_frame.png
   trunk/data/gfx48/st_passage_white_slash.png
   trunk/data/gfx48/st_passage_white_square.png
Removed:
   trunk/data/gfx32/st-actorimpulse.png
   trunk/data/gfx32/st-black1.png
   trunk/data/gfx32/st-black2.png
   trunk/data/gfx32/st-black3.png
   trunk/data/gfx32/st-black4.png
   trunk/data/gfx32/st-bug.png
   trunk/data/gfx32/st-chargeminus.png
   trunk/data/gfx32/st-chargeplus.png
   trunk/data/gfx32/st-chargezero.png
   trunk/data/gfx32/st-chess_black.png
   trunk/data/gfx32/st-chess_white.png
   trunk/data/gfx32/st-fourswitch.png
   trunk/data/gfx32/st-knight.png
   trunk/data/gfx32/st-white1.png
   trunk/data/gfx32/st-white2.png
   trunk/data/gfx32/st-white3.png
   trunk/data/gfx32/st-white4.png
   trunk/data/gfx40/st-actorimpulse.png
   trunk/data/gfx40/st-black1.png
   trunk/data/gfx40/st-black2.png
   trunk/data/gfx40/st-black3.png
   trunk/data/gfx40/st-black4.png
   trunk/data/gfx40/st-bug.png
   trunk/data/gfx40/st-chargeminus.png
   trunk/data/gfx40/st-chargeplus.png
   trunk/data/gfx40/st-chargezero.png
   trunk/data/gfx40/st-chess_black.png
   trunk/data/gfx40/st-chess_white.png
   trunk/data/gfx40/st-fourswitch.png
   trunk/data/gfx40/st-knight.png
   trunk/data/gfx40/st-white1.png
   trunk/data/gfx40/st-white2.png
   trunk/data/gfx40/st-white3.png
   trunk/data/gfx40/st-white4.png
   trunk/data/gfx48/st-actorimpulse.png
   trunk/data/gfx48/st-black1.png
   trunk/data/gfx48/st-black2.png
   trunk/data/gfx48/st-black3.png
   trunk/data/gfx48/st-black4.png
   trunk/data/gfx48/st-bug.png
   trunk/data/gfx48/st-chargeminus.png
   trunk/data/gfx48/st-chargeplus.png
   trunk/data/gfx48/st-chargezero.png
   trunk/data/gfx48/st-chess_black.png
   trunk/data/gfx48/st-chess_white.png
   trunk/data/gfx48/st-fourswitch.png
   trunk/data/gfx48/st-knight.png
   trunk/data/gfx48/st-white1.png
   trunk/data/gfx48/st-white2.png
   trunk/data/gfx48/st-white3.png
   trunk/data/gfx48/st-white4.png
Modified:
   trunk/data/models-2d.lua
   trunk/src/WorldProxy.cc
   trunk/src/actors.hh
   trunk/src/actors/Balls.cc
   trunk/src/actors/Balls.hh
   trunk/src/items/SimpleItems.cc
   trunk/src/items/Umbrella.cc
   trunk/src/lua.cc
   trunk/src/player.cc
   trunk/src/server.cc
   trunk/src/server.hh
   trunk/src/stones/ActorImpulseStone.cc
   trunk/src/stones/FourSwitch.cc
   trunk/src/stones/KnightStone.cc
   trunk/src/stones/PassageStone.cc
   trunk/src/stones/PassageStone.hh
   trunk/src/stones/PuzzleStone.cc
   trunk/src/stones/SimpleStones.cc
   trunk/src/world.cc
Log:
Trunk 1.1:
- it_ring, it_umbrella: no more activation while actor is moribund
- engine internal renaming of GlobalForce to ConstantForce
- image renaming: st_actorimpulse, st_passage, st_break_bug, st_chess,
    st_charge, st_knight, st_fourswitch
- st_puzzle: propagate impulses on blue puzzles on actor hits, even if the
    puzzle stone cannot move itself

Deleted: trunk/data/gfx32/st-actorimpulse.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-black1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-black2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-black3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-black4.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-bug.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-chargeminus.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-chargeplus.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-chargezero.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-chess_black.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-chess_white.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-fourswitch.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-knight.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-white1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-white2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-white3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx32/st-white4.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx32/st_actorimpulse.png (from rev 1722, trunk/data/gfx32/st-actorimpulse.png)

Added: trunk/data/gfx32/st_break_bug.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_break_bug.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx32/st_charge_minus.png (from rev 1722, trunk/data/gfx32/st-chargeminus.png)

Copied: trunk/data/gfx32/st_charge_plus.png (from rev 1722, trunk/data/gfx32/st-chargeplus.png)

Copied: trunk/data/gfx32/st_charge_zero.png (from rev 1722, trunk/data/gfx32/st-chargezero.png)

Copied: trunk/data/gfx32/st_chess_black.png (from rev 1722, trunk/data/gfx32/st-chess_black.png)

Copied: trunk/data/gfx32/st_chess_white.png (from rev 1722, trunk/data/gfx32/st-chess_white.png)

Copied: trunk/data/gfx32/st_fourswitch.png (from rev 1722, trunk/data/gfx32/st-fourswitch.png)

Copied: trunk/data/gfx32/st_knight.png (from rev 1722, trunk/data/gfx32/st-knight.png)

Added: trunk/data/gfx32/st_passage_black_cross.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_black_cross.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_black_frame.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_black_frame.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_black_slash.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_black_slash.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_black_square.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_black_square.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_white_cross.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_white_cross.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_white_frame.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_white_frame.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_white_slash.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_white_slash.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st_passage_white_square.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st_passage_white_square.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx40/st-actorimpulse.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-black1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-black2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-black3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-black4.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-bug.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-chargeminus.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-chargeplus.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-chargezero.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-chess_black.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-chess_white.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-fourswitch.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-knight.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-white1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-white2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-white3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx40/st-white4.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx40/st_actorimpulse.png (from rev 1722, trunk/data/gfx40/st-actorimpulse.png)

Copied: trunk/data/gfx40/st_break_bug.png (from rev 1722, trunk/data/gfx40/st-bug.png)

Copied: trunk/data/gfx40/st_charge_minus.png (from rev 1722, trunk/data/gfx40/st-chargeminus.png)

Copied: trunk/data/gfx40/st_charge_plus.png (from rev 1722, trunk/data/gfx40/st-chargeplus.png)

Copied: trunk/data/gfx40/st_charge_zero.png (from rev 1722, trunk/data/gfx40/st-chargezero.png)

Copied: trunk/data/gfx40/st_chess_black.png (from rev 1722, trunk/data/gfx40/st-chess_black.png)

Copied: trunk/data/gfx40/st_chess_white.png (from rev 1722, trunk/data/gfx40/st-chess_white.png)

Copied: trunk/data/gfx40/st_fourswitch.png (from rev 1722, trunk/data/gfx40/st-fourswitch.png)

Copied: trunk/data/gfx40/st_knight.png (from rev 1722, trunk/data/gfx40/st-knight.png)

Copied: trunk/data/gfx40/st_passage_black_cross.png (from rev 1722, trunk/data/gfx40/st-black3.png)

Copied: trunk/data/gfx40/st_passage_black_frame.png (from rev 1722, trunk/data/gfx40/st-black4.png)

Copied: trunk/data/gfx40/st_passage_black_slash.png (from rev 1722, trunk/data/gfx40/st-black2.png)

Copied: trunk/data/gfx40/st_passage_black_square.png (from rev 1722, trunk/data/gfx40/st-black1.png)

Added: trunk/data/gfx40/st_passage_white_cross.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_passage_white_cross.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st_passage_white_frame.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_passage_white_frame.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st_passage_white_slash.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_passage_white_slash.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st_passage_white_square.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st_passage_white_square.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/data/gfx48/st-actorimpulse.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-black1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-black2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-black3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-black4.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-bug.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-chargeminus.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-chargeplus.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-chargezero.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-chess_black.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-chess_white.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-fourswitch.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-knight.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-white1.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-white2.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-white3.png
===================================================================
(Binary files differ)

Deleted: trunk/data/gfx48/st-white4.png
===================================================================
(Binary files differ)

Copied: trunk/data/gfx48/st_actorimpulse.png (from rev 1722, trunk/data/gfx48/st-actorimpulse.png)

Copied: trunk/data/gfx48/st_break_bug.png (from rev 1722, trunk/data/gfx48/st-bug.png)

Copied: trunk/data/gfx48/st_charge_minus.png (from rev 1722, trunk/data/gfx48/st-chargeminus.png)

Copied: trunk/data/gfx48/st_charge_plus.png (from rev 1722, trunk/data/gfx48/st-chargeplus.png)

Copied: trunk/data/gfx48/st_charge_zero.png (from rev 1722, trunk/data/gfx48/st-chargezero.png)

Copied: trunk/data/gfx48/st_chess_black.png (from rev 1722, trunk/data/gfx48/st-chess_black.png)

Copied: trunk/data/gfx48/st_chess_white.png (from rev 1722, trunk/data/gfx48/st-chess_white.png)

Copied: trunk/data/gfx48/st_fourswitch.png (from rev 1722, trunk/data/gfx48/st-fourswitch.png)

Copied: trunk/data/gfx48/st_knight.png (from rev 1722, trunk/data/gfx48/st-knight.png)

Added: trunk/data/gfx48/st_passage_black_cross.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_passage_black_cross.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx48/st_passage_black_frame.png (from rev 1722, trunk/data/gfx48/st-black4.png)

Copied: trunk/data/gfx48/st_passage_black_slash.png (from rev 1722, trunk/data/gfx48/st-black2.png)

Added: trunk/data/gfx48/st_passage_black_square.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st_passage_black_square.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Copied: trunk/data/gfx48/st_passage_white_cross.png (from rev 1722, trunk/data/gfx48/st-white3.png)

Copied: trunk/data/gfx48/st_passage_white_frame.png (from rev 1722, trunk/data/gfx48/st-white4.png)

Copied: trunk/data/gfx48/st_passage_white_slash.png (from rev 1722, trunk/data/gfx48/st-white2.png)

Copied: trunk/data/gfx48/st_passage_white_square.png (from rev 1722, trunk/data/gfx48/st-white1.png)

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/data/models-2d.lua	2009-06-16 22:33:11 UTC (rev 1723)
@@ -781,16 +781,16 @@
 -------------------
 do
     DefStone(&quot;st_beads&quot;, &quot;sh_glass&quot;)
-    DefStone(&quot;st-black1&quot;, &quot;sh_round&quot;)
-    DefStone(&quot;st-black2&quot;, &quot;sh_passage_slash&quot;)
-    DefStone(&quot;st-black3&quot;, &quot;sh_passage_cross&quot;)
-    DefStone(&quot;st-black4&quot;, &quot;sh_passage_frame&quot;)
+    DefStone(&quot;st_passage_black_square&quot;, &quot;sh_round&quot;)
+    DefStone(&quot;st_passage_black_slash&quot;, &quot;sh_passage_slash&quot;)
+    DefStone(&quot;st_passage_black_cross&quot;, &quot;sh_passage_cross&quot;)
+    DefStone(&quot;st_passage_black_frame&quot;, &quot;sh_passage_frame&quot;)
     DefStone(&quot;st_jamb_black&quot;, &quot;sh_jamb&quot;)
     DefStone(&quot;st_plop_slate&quot;)
     DefStone(&quot;st_bluegray&quot;, &quot;sh_round&quot;)
     DefStone(&quot;st_brake&quot;, &quot;sh_brake&quot;)
     DefStone(&quot;st_brownie&quot;, &quot;sh_round&quot;)
-    DefStone(&quot;st-bug&quot;)
+    DefStone(&quot;st_break_bug&quot;)
     DefStone(&quot;st_pinkbumps&quot;)
     DefStone(&quot;st_camouflage&quot;)
     DefStone(&quot;st_dummy&quot;)
@@ -829,10 +829,10 @@
     DefStone(&quot;st_brownpyramide&quot;)
     DefStone(&quot;st_redmarble&quot;)
     DefStone(&quot;st_surprise&quot;, &quot;sh_round&quot;)
-    DefStone(&quot;st-white1&quot;, &quot;sh_round&quot;)
-    DefStone(&quot;st-white2&quot;, &quot;sh_passage_slash&quot;)
-    DefStone(&quot;st-white3&quot;, &quot;sh_passage_cross&quot;)
-    DefStone(&quot;st-white4&quot;, &quot;sh_passage_frame&quot;)
+    DefStone(&quot;st_passage_white_square&quot;, &quot;sh_round&quot;)
+    DefStone(&quot;st_passage_white_slash&quot;, &quot;sh_passage_slash&quot;)
+    DefStone(&quot;st_passage_white_cross&quot;, &quot;sh_passage_cross&quot;)
+    DefStone(&quot;st_passage_white_frame&quot;, &quot;sh_passage_frame&quot;)
     DefStone(&quot;st_jamb_white&quot;, &quot;sh_jamb&quot;)
     DefStone(&quot;st_woven&quot;)
     DefStone(&quot;st_yellow&quot;)
@@ -845,16 +845,16 @@
 -- Animated stones --
 ---------------------
 
--- st-actorimpulse --
+-- st_actorimpulse --
 do
-    namelist = DefSubimages(&quot;st-actorimpulse&quot;, {h=3})
+    namelist = DefSubimages(&quot;st_actorimpulse&quot;, {h=3})
     shnamelist = DefSubimages(&quot;sh_actorimpulse&quot;, {h=3,imgw=ShadowSize,imgh=ShadowSize})
 
     DefAnim(&quot;st-ai-fg&quot;, PingPong(BuildFrames(namelist, 30)))
     DefAnim(&quot;st-ai-sh&quot;, PingPong(BuildFrames(shnamelist, 30)))
-    DefShModel(&quot;st-actorimpulse-anim&quot;, &quot;st-ai-fg&quot;, &quot;st-ai-sh&quot;)
+    DefShModel(&quot;st_actorimpulse_anim&quot;, &quot;st-ai-fg&quot;, &quot;st-ai-sh&quot;)
 
-    DefShModel(&quot;st-actorimpulse&quot;, namelist[1], shnamelist[1])
+    DefShModel(&quot;st_actorimpulse&quot;, namelist[1], shnamelist[1])
 end
 
 -- st-bigbluesand --
@@ -933,25 +933,25 @@
     DefRoundStoneWithAnim (&quot;st_break_plain&quot;, 10, 50)
 end
 
--- st-chage-plus, st-charge-zero, st-charge-minus --
+-- st_chage_plus, st_charge_zero, st_charge_minus --
 do
     function def_chargestone(basename)
         local n=DefSubimages(basename, {h=2})
         DefSolidStone(basename, n[1])
         DefAnim(basename..&quot;-animfg&quot;, {{n[2], 140}})
-        DefSolidStone(basename..&quot;-anim&quot;, basename..&quot;-animfg&quot;)
+        DefSolidStone(basename..&quot;_anim&quot;, basename..&quot;-animfg&quot;)
     end
 
-    def_chargestone(&quot;st-chargeplus&quot;)
-    def_chargestone(&quot;st-chargeminus&quot;)
-    def_chargestone(&quot;st-chargezero&quot;)
+    def_chargestone(&quot;st_charge_plus&quot;)
+    def_chargestone(&quot;st_charge_minus&quot;)
+    def_chargestone(&quot;st_charge_zero&quot;)
 end
 
--- st-chess_black, st-chess_white --
+-- st_chess_black, st_chess_white --
 do
     function make_chess(colour)
-        local img1 = DefSubimages(&quot;st-chess&quot;..colour, {h=5});
-        --local img2 = DefSubimages(&quot;st-chess&quot;..colour..&quot;-capture&quot;, {h=5});
+        local img1 = DefSubimages(&quot;st_chess&quot;..colour, {h=5});
+        --local img2 = DefSubimages(&quot;st_chess&quot;..colour..&quot;-capture&quot;, {h=5});
         local f1 = BuildFrames(img1, 120)
         --local f2 = BuildFrames(img2, 40)
         local f2 = f1
@@ -1011,13 +1011,13 @@
     DefSolidStone(&quot;st_flash&quot;, &quot;st_flash1&quot;)
 end
 
--- st-fourswitch --
+-- st_fourswitch --
 do
-    DefSubimages(&quot;st-fourswitch&quot;,{h=4})
-    DefShModel(&quot;st-fourswitch-n&quot;, &quot;st-fourswitch1&quot;, &quot;sh_round&quot;)
-    DefShModel(&quot;st-fourswitch-e&quot;, &quot;st-fourswitch2&quot;, &quot;sh_round&quot;)
-    DefShModel(&quot;st-fourswitch-s&quot;, &quot;st-fourswitch3&quot;, &quot;sh_round&quot;)
-    DefShModel(&quot;st-fourswitch-w&quot;, &quot;st-fourswitch4&quot;, &quot;sh_round&quot;)
+    DefSubimages(&quot;st_fourswitch&quot;,{h=4})
+    DefShModel(&quot;st_fourswitch-n&quot;, &quot;st_fourswitch1&quot;, &quot;sh_round&quot;)
+    DefShModel(&quot;st_fourswitch-e&quot;, &quot;st_fourswitch2&quot;, &quot;sh_round&quot;)
+    DefShModel(&quot;st_fourswitch-s&quot;, &quot;st_fourswitch3&quot;, &quot;sh_round&quot;)
+    DefShModel(&quot;st_fourswitch-w&quot;, &quot;st_fourswitch4&quot;, &quot;sh_round&quot;)
 end
 
 -- st_ice --
@@ -1035,11 +1035,11 @@
     DefShModel(&quot;st_ice_melting&quot;, &quot;st_ice_melt-anim&quot;, &quot;sh_glass&quot;)
 end
 
--- st-knight --
+-- st_knight --
 do
-    local images = DefSubimages(&quot;st-knight&quot;, {modelname=&quot;knight&quot;, h=5})
+    local images = DefSubimages(&quot;st_knight&quot;, {modelname=&quot;knight&quot;, h=5})
     for i=1, table.getn(images) do
-        DefShModel(&quot;st-knight&quot;..i, images[i], &quot;sh_round&quot;)
+        DefShModel(&quot;st_knight&quot;..i, images[i], &quot;sh_round&quot;)
     end
 end
 
@@ -1864,7 +1864,6 @@
 -- Simple stone aliases --
 --------------------------
 do
-    DefAlias(&quot;st_break_bug&quot;, &quot;st-bug&quot;)
     DefAlias(&quot;st_break_bug-anim&quot;, &quot;st_flat_breaking&quot;)
     DefAlias(&quot;st-explosion&quot;, &quot;it_explosion&quot;)
     DefAlias(&quot;st-glass_move&quot;, &quot;st-glass&quot;);

Modified: trunk/src/WorldProxy.cc
===================================================================
--- trunk/src/WorldProxy.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/WorldProxy.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -91,7 +91,7 @@
         } else if (key == &quot;FrictionStrength&quot;) {
             return server::FrictionFactor;
         } else if (key == &quot;GlobalForce&quot;) {
-            return server::GlobalForce;
+            return server::ConstantForce;
         } else if (key == &quot;MeditationStrength&quot;) {
             return server::HoleForce;
         } else if (key == &quot;MagnetStrength&quot;) {
@@ -194,7 +194,7 @@
         } else if (key == &quot;FrictionStrength&quot;) {
             server::FrictionFactor = val;
         } else if (key == &quot;GlobalForce&quot;) {
-            server::GlobalForce = val;
+            server::ConstantForce = val;
         } else if (key == &quot;MeditationStrength&quot;) {
             server::HoleForce = val;
         } else if (key == &quot;MagnetStrength&quot;) {

Modified: trunk/src/actors/Balls.cc
===================================================================
--- trunk/src/actors/Balls.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/actors/Balls.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2008 Ronald Lamprecht
+ * Copyright (C) 2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -150,6 +150,10 @@
         return state == DEAD;
     }
     
+    bool BasicBall::isMoribund() const {
+        return state == DEAD || state == SHATTERING || state==BUBBLING || state==FALLING || state==RESURRECTED;
+    }
+    
     bool BasicBall::is_movable() const {
         return (state!=DEAD &amp;&amp; state!=RESURRECTED &amp;&amp; state!=APPEARING &amp;&amp; state!=DISAPPEARING); 
     }
@@ -169,6 +173,7 @@
     bool BasicBall::is_invisible() const {
         return m_invisible_rest_time&gt;0;
     }
+    
     bool BasicBall::can_drop_items() const {
         return state == NORMAL || state == JUMP_VORTEX || state==JUMPING;
     }

Modified: trunk/src/actors/Balls.hh
===================================================================
--- trunk/src/actors/Balls.hh	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/actors/Balls.hh	2009-06-16 22:33:11 UTC (rev 1723)
@@ -63,6 +63,7 @@
 
         // Actor interface
         virtual bool is_dead() const;
+        virtual bool isMoribund() const;
         virtual bool is_movable() const;
         virtual bool is_flying() const;
         virtual bool is_on_floor() const;

Modified: trunk/src/actors.hh
===================================================================
--- trunk/src/actors.hh	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/actors.hh	2009-06-16 22:33:11 UTC (rev 1723)
@@ -132,6 +132,7 @@
         virtual void on_respawn (const ecl::V2 &amp;pos);
 
         virtual bool is_dead() const = 0;
+        virtual bool isMoribund() const {return is_dead(); }
         virtual bool is_movable() const { return true; }
         virtual bool is_flying() const { return false; }
         virtual bool is_on_floor() const { return true; }

Modified: trunk/src/items/SimpleItems.cc
===================================================================
--- trunk/src/items/SimpleItems.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/items/SimpleItems.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -281,13 +281,17 @@
     }
     
     ItemAction Ring::activate(Actor *a, GridPos p) {
-        if (ExchangeMarbles(a)) {
-            sound_event(&quot;switchmarbles&quot;);
-        }
+        if (a-&gt;isMoribund())
+            return ITEM_KEEP;
         else {
-            RespawnActor(a);
+            if (ExchangeMarbles(a)) {
+                sound_event(&quot;switchmarbles&quot;);
+            }
+            else {
+                RespawnActor(a);
+            }
+            return ITEM_DROP;
         }
-        return ITEM_DROP;
     }
 
     DEF_ITEMTRAITS(Ring, &quot;it_ring&quot;, it_ring);

Modified: trunk/src/items/Umbrella.cc
===================================================================
--- trunk/src/items/Umbrella.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/items/Umbrella.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -62,8 +62,12 @@
     }
     
     ItemAction Umbrella::activate(Actor *a, GridPos) {
-        BroadcastMessage(&quot;_shield&quot;, a-&gt;getAttr(&quot;owner&quot;), GRID_NONE_BIT, true);
-        return ITEM_KILL;
+        if (a-&gt;isMoribund())
+            return ITEM_KEEP;
+        else {
+            BroadcastMessage(&quot;_shield&quot;, a-&gt;getAttr(&quot;owner&quot;), GRID_NONE_BIT, true);
+            return ITEM_KILL;
+        }
     }
     
     void Umbrella::on_pickup(Actor *a) {

Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/lua.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -832,7 +832,7 @@
     ecl::V2 v;
     v[0] = lua_tonumber(L, 1);
     v[1] = lua_tonumber(L, 2);
-    server::GlobalForce = v;
+    server::ConstantForce = v;
     return 0;
 }
 

Modified: trunk/src/player.cc
===================================================================
--- trunk/src/player.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/player.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -1,5 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004,2006 Daniel Heck
+ * Copyright (C) 2007,2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -616,21 +617,21 @@
         }
 
         switch (it-&gt;activate(ac, p)) {
-        case ITEM_DROP:
-            // only drop if no item underneath and actor allows it
-            if (it-&gt;can_drop_at(p) &amp;&amp; can_drop_item) {
-                it = inv.yield_first ();
+            case ITEM_DROP:
+                // only drop if no item underneath and actor allows it
+                if (it-&gt;can_drop_at(p) &amp;&amp; can_drop_item) {
+                    it = inv.yield_first ();
+                    RedrawInventory (&amp;inv);
+                    it-&gt;drop(ac, p);
+                }
+                break;
+            case ITEM_KILL:
+                DisposeObject (inv.yield_first ());
                 RedrawInventory (&amp;inv);
-                it-&gt;drop(ac, p);
+                break;
+            case ITEM_KEEP:
+                break;
             }
-            break;
-        case ITEM_KILL:
-            DisposeObject (inv.yield_first ());
-            RedrawInventory (&amp;inv);
-            break;
-        case ITEM_KEEP:
-            break;
-        }
     }
 }
 

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/server.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -1,5 +1,6 @@
 /*
  * Copyright (C) 2004,2005 Daniel Heck
+ * Copyright (C) 2007,2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -106,7 +107,7 @@
 double   server::Brittleness;
 double   server::Fragility;
 double   server::CrackSpreading;
-ecl::V2  server::GlobalForce;
+ecl::V2  server::ConstantForce;
 double   server::BumperForce;
 double   server::ElectricForce;
 double   server::EnigmaCompatibility;       // no Lua access
@@ -273,7 +274,7 @@
     server::Brittleness       = 0.5;
     server::Fragility         = 1.0;
     server::CrackSpreading    = 0.5;
-    server::GlobalForce       = ecl::V2(0, 0);
+    server::ConstantForce       = ecl::V2(0, 0);
     server::SlopeForce        = 25.0;
     server::FlatForce         = 0.0;
     server::FrictionFactor    = 1.0;

Modified: trunk/src/server.hh
===================================================================
--- trunk/src/server.hh	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/server.hh	2009-06-16 22:33:11 UTC (rev 1723)
@@ -1,5 +1,6 @@
 /*
  * Copyright (C) 2003,2004,2005 Daniel Heck
+ * Copyright (C) 2007,2008,2009 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -104,7 +105,7 @@
     // 1.10 crack variables
     extern double   Fragility;
     extern double   CrackSpreading;
-    extern ecl::V2  GlobalForce;
+    extern ecl::V2  ConstantForce;  // global gravitation
     
     extern int      MaxOxydColor;
 

Modified: trunk/src/stones/ActorImpulseStone.cc
===================================================================
--- trunk/src/stones/ActorImpulseStone.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/ActorImpulseStone.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -66,7 +66,7 @@
                 boulder-&gt;setAttr(&quot;orientation&quot;, reverse(to_direction(boulder-&gt;getAttr(&quot;orientation&quot;))));
                 sound_event(&quot;bumper&quot;);
                 state = PULSING;
-                set_anim(&quot;st-actorimpulse-anim&quot;);
+                set_anim(&quot;st_actorimpulse_anim&quot;);
             }
         } else if (m.message == &quot;_glasses&quot;) {
             init_model();
@@ -114,7 +114,7 @@
             if ((objFlags &amp; OBJBIT_INVISIBLE) &amp;&amp; ((server::GlassesVisibility &amp; Glasses::ACTORIMPULSE) == 0))
                 set_model(&quot;invisible&quot;);
             else
-                set_model(&quot;st-actorimpulse&quot;);
+                set_model(&quot;st_actorimpulse&quot;);
         }
         // PULSING anim is always visible and should continue independent on init_model calls
     }
@@ -141,7 +141,7 @@
 
             sound_event(&quot;bumper&quot;);
             state = PULSING;
-            set_anim(&quot;st-actorimpulse-anim&quot;);
+            set_anim(&quot;st_actorimpulse_anim&quot;);
         }
     }
 

Modified: trunk/src/stones/FourSwitch.cc
===================================================================
--- trunk/src/stones/FourSwitch.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/FourSwitch.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -62,7 +62,7 @@
     }
     
     void FourSwitch::init_model() {
-        set_model(std::string(&quot;st-fourswitch&quot;) + to_suffix((Direction)state));
+        set_model(std::string(&quot;st_fourswitch&quot;) + to_suffix((Direction)state));
     }
     
     void FourSwitch::actor_hit(const StoneContact &amp;sc) {

Modified: trunk/src/stones/KnightStone.cc
===================================================================
--- trunk/src/stones/KnightStone.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/KnightStone.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -43,7 +43,7 @@
     }
      
     void KnightStone::init_model()  {
-        set_model(ecl::strf(&quot;st-knight%d&quot;, state + 1));
+        set_model(ecl::strf(&quot;st_knight%d&quot;, state + 1));
     }
     
     StoneResponse KnightStone::collision_response(const StoneContact &amp;) {

Modified: trunk/src/stones/PassageStone.cc
===================================================================
--- trunk/src/stones/PassageStone.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/PassageStone.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -19,6 +19,7 @@
 
 #include &quot;stones/PassageStone.hh&quot;
 
+#include &quot;errors.hh&quot;
 //#include &quot;main.hh&quot;
 
 namespace enigma {
@@ -57,13 +58,7 @@
         if (key == &quot;color&quot;) {
             return state;
         } else if (key == &quot;flavor&quot;) {
-            switch ((objFlags &amp; OBJBIT_FLAVOR) &gt;&gt; 24) {
-                case 0 : return &quot;square&quot;;
-                case 1 : return &quot;slash&quot;;
-                case 2 : return &quot;cross&quot;;
-                case 3 : return &quot;frame&quot;;
-            }
-            return Value();
+            return flavor();
         }
         return Stone::getAttr(key);
     }
@@ -77,8 +72,7 @@
     }
     
     void PassageStone::init_model()  {
-        // the models are still encoded in the old API notation
-        set_model(ecl::strf(&quot;st-%s%d&quot;, (state == BLACK) ? &quot;black&quot; : &quot;white&quot;, (int)(((objFlags &amp; OBJBIT_FLAVOR) &gt;&gt; 24)+1)));
+        set_model(ecl::strf(&quot;st_passage_%s_%s&quot;, (state == BLACK) ? &quot;black&quot; : &quot;white&quot;, flavor().c_str()));
     }
 
     bool PassageStone::is_floating() const {
@@ -98,6 +92,16 @@
             return (accolor &amp;&amp; accolor == WHITE) ?  STONE_PASS : STONE_REBOUND;
         }
     }
+    
+    std::string PassageStone::flavor() const {
+        switch ((objFlags &amp; OBJBIT_FLAVOR) &gt;&gt; 24) {
+            case 0 : return &quot;square&quot;;
+            case 1 : return &quot;slash&quot;;
+            case 2 : return &quot;cross&quot;;
+            case 3 : return &quot;frame&quot;;
+        }
+        ASSERT(false, XLevelRuntime, &quot;PassageStone unknown flavor&quot;);
+    }
 
     int PassageStone::traitsIdx() const {
         return ((objFlags &amp; OBJBIT_FLAVOR) &gt;&gt; 24) + 4 * state;

Modified: trunk/src/stones/PassageStone.hh
===================================================================
--- trunk/src/stones/PassageStone.hh	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/PassageStone.hh	2009-06-16 22:33:11 UTC (rev 1723)
@@ -59,6 +59,7 @@
                
     private:
         // Private methods.
+        std::string flavor() const;
         int traitsIdx() const;
     };
 

Modified: trunk/src/stones/PuzzleStone.cc
===================================================================
--- trunk/src/stones/PuzzleStone.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/PuzzleStone.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -215,6 +215,7 @@
                 // -&gt; move it if dest pos is free
                 GridPos dest = move(get_pos(), move_dir);
                 if (GetStone(dest) == NULL) {
+                    // move without falling in water or abyss
                     Stone *puzz = YieldStone(get_pos());
                     SetStone(dest, puzz);
                     puzz-&gt;on_move(get_pos());
@@ -243,6 +244,10 @@
             // 3) Last chance: try to rotate the row or column
             if (has_magic_wand) {
                 rotateLine(rotate_dir);
+            } else {
+                // we can not move - otherwise we would have send the impulse in 2)
+                // but we need to propagate the impulse
+                sc.actor-&gt;send_impulse(get_pos(), move_dir);
             }
         }
     }

Modified: trunk/src/stones/SimpleStones.cc
===================================================================
--- trunk/src/stones/SimpleStones.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/stones/SimpleStones.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -133,7 +133,7 @@
     
     void ChargeStone::init_model() {
         double charge = getAttr(&quot;charge&quot;);
-        set_model(ecl::strf(&quot;st-charge%s&quot;, (charge == 0) ? &quot;zero&quot; : ((charge &gt; 0.0) ? &quot;plus&quot; : &quot;minus&quot;)).c_str());
+        set_model(ecl::strf(&quot;st_charge_%s&quot;, (charge == 0) ? &quot;zero&quot; : ((charge &gt; 0.0) ? &quot;plus&quot; : &quot;minus&quot;)).c_str());
     }
     
     void ChargeStone::animcb() {
@@ -143,7 +143,7 @@
     void ChargeStone::actor_hit(const StoneContact &amp;sc) {
         double charge = getAttr(&quot;charge&quot;);
         sc.actor-&gt;setAttr(&quot;charge&quot;, charge);
-        set_anim(ecl::strf(&quot;st-charge%s-anim&quot;, (charge == 0) ? &quot;zero&quot; : ((charge &gt; 0.0) ? &quot;plus&quot; : &quot;minus&quot;)).c_str());
+        set_anim(ecl::strf(&quot;st_charge_%s_anim&quot;, (charge == 0) ? &quot;zero&quot; : ((charge &gt; 0.0) ? &quot;plus&quot; : &quot;minus&quot;)).c_str());
     }
     
 

Modified: trunk/src/world.cc
===================================================================
--- trunk/src/world.cc	2009-06-15 18:06:17 UTC (rev 1722)
+++ trunk/src/world.cc	2009-06-16 22:33:11 UTC (rev 1723)
@@ -584,16 +584,13 @@
   that the position and velocity entries in ActorInfo will be updated
   only after a *successful* time step, so they cannot be used
   here.] */
-V2 World::get_local_force (Actor *a) {
-    V2 f;
-    V2 m;
+ecl::V2 World::get_local_force (Actor *a) {
+    ecl::V2 f;
+    ecl::V2 m;
     double friction = 0;
 
     if (a-&gt;is_on_floor()) {
         if (Floor *floor = a-&gt;m_actorinfo.field-&gt;floor) {
-            // Constant force
-            f += server::GlobalForce;
-
             // Mouse force
             if (a-&gt;get_controllers() != 0) {
                 m = floor-&gt;process_mouseforce(a, m_mouseforce.get_force(a));
@@ -624,9 +621,12 @@
    only once every four time steps, cf. move_actors().  They are used
    for forces that are more time consuming to calculate, i.e.,
    actor-actor interactions and external force fields. */
-V2 World::get_global_force (Actor *a)
-{
-    V2 f;
+ecl::V2 World::get_global_force (Actor *a){
+    ecl::V2 f;
+    
+    // Constant force
+    f += server::ConstantForce;
+    
     // Electrostatic forces between actors.
     if (double q = get_charge(a)) {
         for (ActorList::iterator i=actorlist.begin();


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001151.html">[Enigma-game-svn] r1722 - in trunk/data/levels: enigma_cross	enigma_i enigma_ii enigma_ix enigma_viii
</A></li>
	<LI>Next message: <A HREF="001153.html">[Enigma-game-svn] r1724 - in trunk/doc/reference: . images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1152">[ date ]</a>
              <a href="thread.html#1152">[ thread ]</a>
              <a href="subject.html#1152">[ subject ]</a>
              <a href="author.html#1152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
