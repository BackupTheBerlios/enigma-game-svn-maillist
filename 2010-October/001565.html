<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Enigma-game-svn] r2141 - in trunk: data src src/items
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/enigma-game-svn/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r2141%20-%20in%20trunk%3A%20data%20src%20src/items&In-Reply-To=%3C20101006195323.A6D4748083B%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001564.html">
   <LINK REL="Next"  HREF="001566.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Enigma-game-svn] r2141 - in trunk: data src src/items</H1>
    <B>raoul at mail.berlios.de</B> 
    <A HREF="mailto:enigma-game-svn%40lists.berlios.de?Subject=Re%3A%20%5BEnigma-game-svn%5D%20r2141%20-%20in%20trunk%3A%20data%20src%20src/items&In-Reply-To=%3C20101006195323.A6D4748083B%40sheep.berlios.de%3E"
       TITLE="[Enigma-game-svn] r2141 - in trunk: data src src/items">raoul at mail.berlios.de
       </A><BR>
    <I>Wed Oct  6 21:53:23 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001564.html">[Enigma-game-svn] r2140 - in trunk: data doc/reference src/others
</A></li>
        <LI>Next message: <A HREF="001566.html">[Enigma-game-svn] r2142 - in trunk: doc src/gui src/lev src/stones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1565">[ date ]</a>
              <a href="thread.html#1565">[ thread ]</a>
              <a href="subject.html#1565">[ subject ]</a>
              <a href="author.html#1565">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: raoul
Date: 2010-10-06 21:53:23 +0200 (Wed, 06 Oct 2010)
New Revision: 2141

Modified:
   trunk/data/models-2d.lua
   trunk/src/items/RubberbandItem.cc
   trunk/src/world.hh
Log:
-&gt; Removed outdated comments for the rubberband item
-&gt; Some other small cleanups, mostly textprocessing



Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2010-10-06 19:30:54 UTC (rev 2140)
+++ trunk/data/models-2d.lua	2010-10-06 19:53:23 UTC (rev 2141)
@@ -1,5 +1,6 @@
 ------------------------------------------------------------------------
 -- Copyright (C) 2002,2003,2004,2005 Daniel Heck
+-- Copyright (C) 2009,2010 Raoul Bourquin
 --
 -- This program is free software; you can redistribute it and/or
 -- modify it under the terms of the GNU General Public License
@@ -35,19 +36,19 @@
 -- ac_marble --
 do
     local images,frames,shadows
-    
+
     -- Normal black marble
     images = SpriteImages(&quot;ac_marble_black&quot;, 2, 0.5, 0.31)
     shadows = SpriteImage(&quot;sh_marble&quot;, 0.4, 0.29)
     DefShModel(&quot;ac_marble_black&quot;, &quot;ac_marble_black1&quot;, &quot;sh_marble&quot;)
     DefShModel(&quot;ac_marble_black-shine&quot;, &quot;ac_marble_black2&quot;, &quot;sh_marble&quot;)
-    
+
     -- Normal white marble
     -- Use shadow from black marble
     images = SpriteImages(&quot;ac_marble_white&quot;, 2, 0.5, 0.31)
     DefShModel(&quot;ac_marble_white&quot;, &quot;ac_marble_white1&quot;, &quot;sh_marble&quot;)
     DefShModel(&quot;ac_marble_white-shine&quot;, &quot;ac_marble_white2&quot;, &quot;sh_marble&quot;)
-    
+
     -- Falling black marble
     images = SpriteImages(&quot;ac_marble_black_fall&quot;, 10)
     shadows = SpriteImages(&quot;sh_marble_fall&quot;, 10, 0.4)
@@ -58,7 +59,7 @@
     end
     DefAnim(&quot;ac_marble_black-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,50,50,50,50,50,50}))
     DefAlias(&quot;ac_marble_black-fallen&quot;, &quot;invisible&quot;)
-    
+
     -- Appearing / disappearing black marble
     -- use the images from falling black marble
     DefAnim(&quot;ac_marble_black-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
@@ -74,7 +75,7 @@
     end
     DefAnim(&quot;ac_marble_white-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,50,50,50,50,50,50}))
     DefAlias(&quot;ac_marble_white-fallen&quot;, &quot;invisible&quot;)
-    
+
     -- Appearing / disappearing white marble
     -- use the images from falling white marble
     DefAnim(&quot;ac_marble_white-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
@@ -92,8 +93,8 @@
 
     -- Jumping white marble
     -- Use shadow from black marble
-    images  = SpriteImages(&quot;ac_marble_white_jump&quot;, 4)
-    frames  = {}
+    images = SpriteImages(&quot;ac_marble_white_jump&quot;, 4)
+    frames = {}
     for i=1,4 do
         DefShModel(&quot;wb-jump&quot;..i, images[i], shadows[i])
         table.insert(frames, &quot;wb-jump&quot;..i)
@@ -107,7 +108,7 @@
         DefShModel(&quot;ac_marble_black-sink&quot;..(i-1), images[i], shadows[i])
     end
     DefAlias(&quot;ac_marble_black-sunk&quot;, &quot;invisible&quot;)
-    
+
     -- Sinking white marble
     -- Use shadow from black marble
     images = SpriteImages(&quot;ac_marble_white_sink&quot;, 7)
@@ -130,19 +131,19 @@
 -- ac_pearl --
 do
     local images, frames, shadows
-    
+
     -- Normal black pearl
     SpriteImage(&quot;ac_pearl_black&quot;, 0.5, 0.43)
     SpriteImage(&quot;sh_pearl&quot;, 0.4, 0.41)
     DefShModel(&quot;ac_pearl_black&quot;, &quot;ac_pearl_black&quot;, &quot;sh_pearl&quot;)
     DefAlias(&quot;ac_pearl_black-shine&quot;, &quot;ac_pearl_black&quot;)
-    
+
     -- Normal white pearl
     -- Use shadow from black pearl
     SpriteImage(&quot;ac_pearl_white&quot;, 0.5, 0.43)
     DefShModel(&quot;ac_pearl_white&quot;, &quot;ac_pearl_white&quot;, &quot;sh_pearl&quot;)
     DefAlias(&quot;ac_pearl_white-shine&quot;, &quot;ac_pearl_white&quot;)
-    
+
     -- Falling black pearl
     images = SpriteImages(&quot;ac_pearl_black_fall&quot;, 5, 0.5, 0.43)
     shadows = SpriteImages(&quot;sh_pearl_fall&quot;, 5, 0.4, 0.43)
@@ -155,12 +156,12 @@
     end
     DefAnim(&quot;ac_pearl_black-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,30}))
     DefAlias(&quot;ac_pearl_black-fallen&quot;, &quot;invisible&quot;)
-    
+
     -- Appearing / disappearing black pearl
     -- use the images from falling black pearl
     DefAnim(&quot;ac_pearl_black-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
     DefAnim(&quot;ac_pearl_black-disappear&quot;, BuildFrames(frames, 25))
-    
+
     -- Falling white pearl
     -- Use shadows from falling black pearl
     images = SpriteImages(&quot;ac_pearl_white_fall&quot;, 5, 0.5, 0.43)
@@ -172,12 +173,12 @@
     end
     DefAnim(&quot;ac_pearl_white-fall&quot;, ComposeFrames(frames,{70,65,60,55,50,30}))
     DefAlias(&quot;ac_pearl_white-fallen&quot;, &quot;invisible&quot;)
-    
+
     -- Appearing / disappearing white pearl
     -- use the images from falling white pearl
     DefAnim(&quot;ac_pearl_white-appear&quot;, ReverseFrames(BuildFrames(frames, 25)))
     DefAnim(&quot;ac_pearl_white-disappear&quot;, BuildFrames(frames, 25))
-    
+
     -- Jumping black pearl
     images  = SpriteImages(&quot;ac_pearl_black_jump&quot;, 4)
     shadows = SpriteImages(&quot;sh_pearl_jump&quot;, 4, 0.4)
@@ -190,8 +191,8 @@
 
     -- Jumping white pearl
     -- Use shadow from black pearl
-    images  = SpriteImages(&quot;ac_pearl_white_jump&quot;, 4)
-    frames  = {}
+    images = SpriteImages(&quot;ac_pearl_white_jump&quot;, 4)
+    frames = {}
     for i=1,4 do
         DefShModel(&quot;sb-jump&quot;..i, images[i], shadows[i])
         table.insert(frames, &quot;sb-jump&quot;..i)
@@ -227,7 +228,7 @@
     -- Shattering white pearl
     Sprite({name=&quot;ac_pearl_white_shatter&quot;, nimages=5, framelen=60})
     DefAlias(&quot;ac_pearl_white-shatter&quot;, &quot;ac_pearl_white_shatter&quot;)
-    DefAlias(&quot;ac_pearl_white-shattered&quot;, &quot;ac_pearl_white_shatter5&quot;)     
+    DefAlias(&quot;ac_pearl_white-shattered&quot;, &quot;ac_pearl_white_shatter5&quot;)
 end
 
 -- ac-killerball --
@@ -275,7 +276,7 @@
 do
     local fg = SpriteImages(&quot;ac_top&quot;, 9, 0.5, 0.3)
     local bg = SpriteImage(&quot;sh_top&quot;, 0.4, 0.3)
-    
+
     frames = {}
     for i=1,9 do
         DefShModel(&quot;ac-top&quot;..i, fg[i], bg)
@@ -379,7 +380,7 @@
 -- Special Floors
 -----------------------------------------
 
--- gradients
+-- slopes --
 do
     DefSubimages(&quot;fl_slope&quot;, {w=6, h=4, modelname=&quot;fl_slope&quot;})
     DefAlias(&quot;fl_slope&quot;, &quot;fl_slope21&quot;)
@@ -483,13 +484,10 @@
 do
     DefImage(&quot;fl_bridge_gc_open&quot;)
     DefImage(&quot;fl_bridge_gc_closed&quot;)
-    local namelist=DefSubimages(&quot;fl_bridge_gc&quot;, {h=10})
+    local namelist = DefSubimages(&quot;fl_bridge_gc&quot;, {h=10})
     local frames = BuildFrames(namelist,70)
     DefAnim(&quot;fl_bridge_gc_opening&quot;, ReverseFrames(frames))
     DefAnim(&quot;fl_bridge_gc_closing&quot;, frames)
-end
-
-do
     local bridge_o = DefImage(&quot;fl_bridge_bw_open&quot;)
     local bridge_c = DefImage(&quot;fl_bridge_bw_closed&quot;)
 
@@ -497,7 +495,7 @@
         DefAlias(&quot;fl_bridge_&quot;..suff..&quot;_open&quot;, &quot;fl_bridge_bw_open&quot;)
         DefAlias(&quot;fl_bridge_&quot;..suff..&quot;_closed&quot;, &quot;fl_bridge_bw_closed&quot;)
 
-        local namelist=DefSubimages(&quot;fl_bridge_&quot;..suff, {h=7})
+        local namelist = DefSubimages(&quot;fl_bridge_&quot;..suff, {h=7})
         table.insert(namelist, 1, bridge_c)
         table.insert(namelist, bridge_o)
         local frames = BuildFrames(namelist,70)
@@ -506,11 +504,10 @@
     end
 end
 
-
 -- scales
 do
     local scales = DefSubimages(&quot;fl_scales&quot;, {h=2})
-    
+
     display.DefineComposite(&quot;fl_scales_brick_released&quot;, &quot;fl_brick&quot;, scales[1])
     display.DefineComposite(&quot;fl_scales_brick_pressed&quot;, &quot;fl_brick&quot;, scales[2])
 
@@ -539,7 +536,7 @@
         local frames = BuildFrames(images, 240)
         DefAnim(basemodel..&quot;_heating&quot;, frames);
     end
-    
+
     heating_animation(&quot;fl_ice&quot;)
     heating_animation(&quot;fl_water&quot;)
     heating_animation(&quot;fl_swamp&quot;)
@@ -593,7 +590,7 @@
         &quot;it_weight&quot;,
         &quot;it_wrench&quot;
     }
-    
+
     DefImages(itemlist)
 
     DefImage(&quot;it_brake&quot;, {filename=&quot;st_brake&quot;})
@@ -807,8 +804,8 @@
 -- it_shogun --
 do
     NewAnim(&quot;it_shogun_s&quot;, {img=&quot;it_shogun_s&quot;, h=3, speed=160, pingpong=1, loop=1})
-    NewAnim(&quot;it_shogun_m&quot;, {img=&quot;it_shogun_m&quot;,   h=3, speed=160, pingpong=1, loop=1})
-    NewAnim(&quot;it_shogun_l&quot;, {img=&quot;it_shogun_l&quot;,   h=3, speed=160, pingpong=1, loop=1})
+    NewAnim(&quot;it_shogun_m&quot;, {img=&quot;it_shogun_m&quot;, h=3, speed=160, pingpong=1, loop=1})
+    NewAnim(&quot;it_shogun_l&quot;, {img=&quot;it_shogun_l&quot;, h=3, speed=160, pingpong=1, loop=1})
 end
 
 -- it_springboard --
@@ -934,7 +931,7 @@
 
 -- st_key --
 do
-    local images_on =  DefSubimages(&quot;st_key_on&quot;, {modelname=&quot;st_key_on&quot;, w=1, h=9})
+    local images_on = DefSubimages(&quot;st_key_on&quot;, {modelname=&quot;st_key_on&quot;, w=1, h=9})
     local images_off = DefSubimages(&quot;st_key_off&quot;, {modelname=&quot;st_key_off&quot;, w=1, h=9})
     DefRoundStone(&quot;st_key_on&quot;, images_on[1])
     DefRoundStone(&quot;st_key_off&quot;, images_off[1])
@@ -952,7 +949,7 @@
 do
     namelist = DefSubimages(&quot;st_actorimpulse&quot;, {h=3})
     shnamelist = DefSubimages(&quot;sh_actorimpulse&quot;, {h=3,imgw=ShadowSize,imgh=ShadowSize})
-    
+
     DefAnim(&quot;st-ai-fg&quot;, PingPong(BuildFrames(namelist, 30)))
     DefAnim(&quot;st-ai-sh&quot;, PingPong(BuildFrames(shnamelist, 30)))
     DefShModel(&quot;st_actorimpulse_anim&quot;, &quot;st-ai-fg&quot;, &quot;st-ai-sh&quot;)
@@ -980,17 +977,17 @@
 
 -- st_boulder --
 do
-    local img=DefSubimages(&quot;st_boulder&quot;, {w=4,h=3})
-    local imgfall=DefSubimages(&quot;st_boulder_fall&quot;, {w=4,h=3})
+    local img = DefSubimages(&quot;st_boulder&quot;, {w=4,h=3})
+    local imgfall = DefSubimages(&quot;st_boulder_fall&quot;, {w=4,h=3})
 
     function def_boulder(orient, start)
-        local animname=&quot;st_boulder&quot;..orient..&quot;a&quot;
-        local frames={img[start], img[start+1], img[start+2]}
+        local animname = &quot;st_boulder&quot;..orient..&quot;a&quot;
+        local frames = {img[start], img[start+1], img[start+2]}
         DefAnim(animname, BuildFrames(frames, 120), false)
         DefShModel(&quot;st_boulder_&quot;..orient, animname, &quot;sh_round&quot;)
 
-        animname=&quot;st_boulder_&quot;..orient..&quot;_fall_anim&quot;
-        frames={imgfall[start],imgfall[start+1],imgfall[start+2]}
+        animname = &quot;st_boulder_&quot;..orient..&quot;_fall_anim&quot;
+        frames = {imgfall[start],imgfall[start+1],imgfall[start+2]}
         DefAnim(animname, BuildFrames(frames, 120), false)
     end
 
@@ -1144,15 +1141,15 @@
     DefShModel(&quot;st-laser-e&quot;, imagese[1], &quot;sh_rounded&quot;)
     DefShModel(&quot;st-laser-s&quot;, imagess[1], &quot;sh_rounded&quot;)
     DefShModel(&quot;st-laser-w&quot;, imagesw[1], &quot;sh_rounded&quot;)
-    
+
     -- activated laser
     DefAnim(&quot;st-laseron-anim-n&quot;, BuildFrames(imagesn,100), true)
     DefShModel(&quot;st-laseron-n&quot;, &quot;st-laseron-anim-n&quot;, &quot;sh_rounded&quot;)
-    DefAnim(&quot;st-laseron-anim-e&quot;, BuildFrames(imagese,100), true)                                                                                       
+    DefAnim(&quot;st-laseron-anim-e&quot;, BuildFrames(imagese,100), true)
     DefShModel(&quot;st-laseron-e&quot;, &quot;st-laseron-anim-e&quot;, &quot;sh_rounded&quot;)
-    DefAnim(&quot;st-laseron-anim-s&quot;, BuildFrames(imagess,100), true)                                                                                       
+    DefAnim(&quot;st-laseron-anim-s&quot;, BuildFrames(imagess,100), true)
     DefShModel(&quot;st-laseron-s&quot;, &quot;st-laseron-anim-s&quot;, &quot;sh_rounded&quot;)
-    DefAnim(&quot;st-laseron-anim-w&quot;, BuildFrames(imagesw,100), true)                                                                                       
+    DefAnim(&quot;st-laseron-anim-w&quot;, BuildFrames(imagesw,100), true)
     DefShModel(&quot;st-laseron-w&quot;, &quot;st-laseron-anim-w&quot;, &quot;sh_rounded&quot;)
 end
 
@@ -1337,10 +1334,8 @@
     DefAnim(&quot;stoneimpulse-hollow-anim2-fg&quot;, ReverseFrames(BuildFrames(framesfg, 55)))
     DefAnim(&quot;stoneimpulse-hollow-anim2-bg&quot;, ReverseFrames(BuildFrames(framesbg, 55)))
     DefShModel(&quot;st_stoneimpulse_hollow_anim2&quot;, &quot;stoneimpulse-hollow-anim2-fg&quot;, &quot;stoneimpulse-hollow-anim2-bg&quot;)
-end
 
-do
-    local images = DefSubimages(&quot;st_stoneimpulse_break&quot;, {h=8})
+    images = DefSubimages(&quot;st_stoneimpulse_break&quot;, {h=8})
     DefAnim(&quot;st_stoneimpulse_breaking&quot;, BuildFrames(images,50))
 end
 
@@ -1393,14 +1388,13 @@
     DefAnim(&quot;turnstile_anim&quot;, ReverseFrames(BuildFrames(images, 30)))
     DefSolidStone(&quot;st_turnstile&quot;, images[1])
     DefSolidStone(&quot;st_turnstile_anim&quot;, &quot;turnstile_anim&quot;)
+    -- turnstle arms --
+    DefAlias(&quot;st_turnstile_e&quot;, &quot;st_puzzle1&quot;)
+    DefAlias(&quot;st_turnstile_w&quot;, &quot;st_puzzle4&quot;)
+    DefAlias(&quot;st_turnstile_s&quot;, &quot;st_puzzle8&quot;)
+    DefAlias(&quot;st_turnstile_n&quot;, &quot;st_puzzle2&quot;)
 end
 
--- st-turnstle, arms --
-DefAlias(&quot;st_turnstile_e&quot;, &quot;st_puzzle1&quot;)
-DefAlias(&quot;st_turnstile_w&quot;, &quot;st_puzzle4&quot;)
-DefAlias(&quot;st_turnstile_s&quot;, &quot;st_puzzle8&quot;)
-DefAlias(&quot;st_turnstile_n&quot;, &quot;st_puzzle2&quot;)
-
 -- st-turnstile-green --
 do
     local images = DefSubimages(&quot;st_turnstile_green&quot;, {h=2})
@@ -1413,7 +1407,7 @@
 do
     local shadows=DefSubimages(&quot;sh_round_growing&quot;, {h=3,imgw=ShadowSize,imgh=ShadowSize})
 
-    -- Wooden (box) stones --
+    -- Wooden box --
     do
         DefSubimages(&quot;st_box_wood&quot;, {modelname=&quot;st_box_wood_fg&quot;, h=2})
         DefShModel(&quot;st_box_wood1&quot;, &quot;st_box_wood_fg1&quot;, &quot;sh_round&quot;)
@@ -1437,7 +1431,7 @@
         DefShModel(&quot;st_greenbrown_growing&quot;, &quot;st_greenbrown_growing_fg&quot;, &quot;st_greenbrown_growing_bg&quot;)
     end
 
-    -- st_box_hay --
+    -- Hay box --
     do
         local images = DefSubimages(&quot;st_box_hay&quot;, {h=4})
         -- stone
@@ -1638,7 +1632,7 @@
         c = ReverseFrames(fopening[&quot;c&quot;]),
         d = ReverseFrames(fopening[&quot;d&quot;]),
     }
-    
+
     -- The open/close animation of oxyd stones
     function mkopenclose(flavor, color)
         local name = &quot;st_oxyd&quot; .. flavor .. color
@@ -1655,7 +1649,7 @@
         DefShModel (name..&quot;_opening&quot;, name..&quot;_opening_fg&quot;, shadow[flavor])
         DefShModel (name..&quot;_closing&quot;, name..&quot;_closing_fg&quot;, shadow[flavor])
     end
-    
+
     -- The blinking question mark animation of single open oxyds
     function mkblink(flavor, color)
         local name = &quot;st_oxyd&quot;..flavor..color..&quot;_blink&quot;
@@ -1664,7 +1658,7 @@
         DefAnim(name..&quot;_anim&quot;, ComposeFrames({name..1,name..2}, {800, 1200}), true)
         DefShModel(name, name..&quot;_anim&quot;, shadow_open[flavor])
     end
-    
+
     -- The animation of pairwise open oxyds
     function mkopened(flavor, color)
         local name = &quot;st_oxyd&quot; .. flavor .. color .. &quot;_open&quot;
@@ -1676,11 +1670,11 @@
         DefAnim(name..&quot;_anim&quot;, PingPong(BuildFrames(names, 100)), true)
         DefShModel(name, name..&quot;_anim&quot;, shadow_open[flavor])
     end
-    
+
     -- The &quot;open&quot; state animation of the pseudo oxyds &quot;quake&quot; and &quot;shuffle&quot;
     function mkpseudo(flavor, color)
         local name = &quot;st_oxyd&quot; .. flavor .. &quot;_pseudo&quot; .. color
-        local names = {}        
+        local names = {}
         if (color == -3) then
             for i=1,4 do
                 names[i] = name .. i
@@ -1691,7 +1685,7 @@
             for i=1,8 do
                 names[i] = name .. i
                 DefMultipleComposite(names[i], {baseimg[flavor], shuffle_spot[i]})
-            end    
+            end
             frames = RepeatAnim(BuildFrames(names, 100),2)
         end
         DefAnim(name..&quot;_anim&quot;, frames, false)
@@ -1705,7 +1699,7 @@
         local img = DefImage(&quot;st_oxyd&quot;..flavor..&quot;_open&quot;)
         DefShModel(&quot;st_fake_oxyd&quot;..flavor..&quot;_open&quot;, img, shadow[flavor])
         local fadein = &quot;oxyd&quot;..flavor..&quot;_fadein&quot;
-        local fadeout= &quot;oxyd&quot;..flavor..&quot;_fadeout&quot;
+        local fadeout = &quot;oxyd&quot;..flavor..&quot;_fadeout&quot;
         DefAnim(fadein, fopening[flavor])
         DefAnim(fadeout, fclosing[flavor])
         -- The regular oxyds are position 1 to 12 in the
@@ -1730,7 +1724,7 @@
     mkoxyd(&quot;b&quot;)
     mkoxyd(&quot;c&quot;)
     mkoxyd(&quot;d&quot;)
-    
+
     -- And now for flavor 'e'
     for color = 0, num_colors - 1 do
         DefMultipleComposite(&quot;st_oxyde&quot;..color..&quot;_peep&quot;, {&quot;st_oxydb_open&quot;, colordots[color+1], oxyde})
@@ -1764,10 +1758,8 @@
 
 -- st_door_d --
 do
-    local f,img,sh
-
-    img=DefSubimages(&quot;st_door_d_ns&quot;, {h=7})
-    sh=DefSubimages(&quot;sh_doorh&quot;, {h=7,imgw=ShadowSize,imgh=ShadowSize})
+    local img = DefSubimages(&quot;st_door_d_ns&quot;, {h=7})
+    local sh = DefSubimages(&quot;sh_doorh&quot;, {h=7,imgw=ShadowSize,imgh=ShadowSize})
     DefShModel(&quot;st_door_d_ns_open&quot;, img[1], sh[1])
     DefShModel(&quot;st_door_d_ns_closed&quot;, img[7], sh[7])
     DefAnim(&quot;doorh-opening-fg&quot;, ReverseFrames(BuildFrames(img, 60)))
@@ -1777,8 +1769,8 @@
     DefAnim(&quot;doorh-closing-bg&quot;, BuildFrames(sh, 60))
     DefShModel(&quot;st_door_d_ns_closing&quot;, &quot;doorh-closing-fg&quot;, &quot;doorh-closing-bg&quot;)
 
-    img=DefSubimages(&quot;st_door_d_ew&quot;, {w=7})
-    sh=DefSubimages(&quot;sh_doorv&quot;, {w=7,imgw=ShadowSize,imgh=ShadowSize})
+    img = DefSubimages(&quot;st_door_d_ew&quot;, {w=7})
+    sh = DefSubimages(&quot;sh_doorv&quot;, {w=7,imgw=ShadowSize,imgh=ShadowSize})
     DefShModel(&quot;st_door_d_ew_open&quot;, img[1], sh[1])
     DefShModel(&quot;st_door_d_ew_closed&quot;, img[7], sh[7])
     DefAnim(&quot;doorv-opening-fg&quot;, ReverseFrames(BuildFrames(img, 60)))
@@ -1802,7 +1794,7 @@
 do
     DefAlias(&quot;st_door_b_open&quot;, &quot;invisible&quot;)
     DefAlias(&quot;st_door_b_closed&quot;, &quot;st_flat&quot;)
-    local img=DefSubimages(&quot;st_door_b&quot;, {modelname=&quot;doorb&quot;, h=8})
+    local img = DefSubimages(&quot;st_door_b&quot;, {modelname=&quot;doorb&quot;, h=8})
     local f = BuildFrames(img,60)
     DefAnim(&quot;st_door_b_opening&quot;, f)
     DefAnim(&quot;st_door_b_closing&quot;, ReverseFrames(f))
@@ -1812,7 +1804,7 @@
 do
     DefAlias(&quot;st_door_c_open&quot;, &quot;st_grate_framed&quot;)
     DefAlias(&quot;st_door_c_closed&quot;, &quot;st_flat&quot;)
-    frames=BuildFrames({&quot;st_door_c_closed&quot;,&quot;st_door_c_open&quot;},60)
+    frames = BuildFrames({&quot;st_door_c_closed&quot;,&quot;st_door_c_open&quot;},60)
     DefAnim(&quot;st_door_c_opening&quot;, frames)
     DefAnim(&quot;st_door_c_closing&quot;, ReverseFrames(frames))
 end
@@ -1947,11 +1939,11 @@
 --
 -- The numbers map to actual orientations as follows:
 --
---   NUMBER    TRIANG.M.   PLANE M.
---      1       south     &quot;v&quot;        &quot;-&quot;
---      2       west      &quot;&lt;&quot;        &quot;\&quot;
---      3       north     &quot;^&quot;        &quot;|&quot;
---      4       east      &quot;&gt;&quot;        &quot;/&quot;
+--   NUMBER  ORIENTATION  TRIANG.M.  PLANE M.
+--      1    south        &quot;V&quot;        &quot;-&quot;
+--      2    west         &quot;&lt;&quot;        &quot;\&quot;
+--      3    north        &quot;^&quot;        &quot;|&quot;
+--      4    east         &quot;&gt;&quot;        &quot;/&quot;
 --
 -- The models are stored in the file from top to bottom as north, east, south, west
 -- in each column, therefore we need the mapping (i+1)%4+1

Modified: trunk/src/items/RubberbandItem.cc
===================================================================
--- trunk/src/items/RubberbandItem.cc	2010-10-06 19:30:54 UTC (rev 2140)
+++ trunk/src/items/RubberbandItem.cc	2010-10-06 19:53:23 UTC (rev 2141)
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2006,2007 Raoul Bourquin
+ * Copyright (C) 2006,2007,2010 Raoul Bourquin
  * Copyright (C) 2008 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
@@ -36,23 +36,22 @@
         // TODO: Target for black and target for white marble?
         // TODO: MultiplayerGame: Defaulttarget is second actor!
 
-        // Get actor or stone with the name, given in &quot;connect_to&quot;:
+        // Get actor or stone with the name given by the attribute &quot;anchor2&quot;:
         ObjectList ol = getAttr(&quot;anchor2&quot;).getObjectList(a);
         
-        // Target does NOT exist, Drop Item
+        // If the anchor given by the attribute &quot;anchor2&quot; does not exist we just drop the item.
         if (ol.size() == 0)
             return ITEM_DROP;
 
         Object *anchor2 = ol.front();
             
-        // The mode attribute &quot;scissor&quot; defines, if when using an it-rubberband,
-        // other rubberbands to the actor will be cut of or not, true means they will. false is default.
+        // The attribute &quot;scissor&quot; defines, if when using the it_rubberband,
+        // other rubberbands to the actor will be cut of or not.
         bool isScissor = to_bool(getAttr(&quot;scissor&quot;));
-
         if (isScissor)
             SendMessage(a, &quot;disconnect&quot;);
 
-        sound_event (&quot;rubberband&quot;);
+        sound_event(&quot;rubberband&quot;);
         
         bool alreadyConnected = false;
         ObjectList rubbers = a-&gt;getAttr(&quot;rubbers&quot;);
@@ -62,12 +61,13 @@
                 break;
             }
         }
+
         if (!alreadyConnected &amp;&amp; anchor2 != a) { // It's not allowed to connect a rubberband to self.
             Object *obj = MakeObject(&quot;ot_rubberband&quot;);
             int id = obj-&gt;getId();
             obj-&gt;setAttr(&quot;anchor1&quot;, a);
             obj-&gt;setAttr(&quot;anchor2&quot;, anchor2);
-            obj-&gt;setAttr(&quot;strength&quot;, getAttr(&quot;strength&quot;));
+            obj-&gt;setAttr(&quot;strength&quot;, getAttr(&quot;strength&quot;));          
             obj-&gt;setAttr(&quot;length&quot;, getAttr(&quot;length&quot;));
             obj-&gt;setAttr(&quot;threshold&quot;, getAttr(&quot;threshold&quot;));
             obj-&gt;setAttr(&quot;max&quot;, getAttr(&quot;max&quot;));

Modified: trunk/src/world.hh
===================================================================
--- trunk/src/world.hh	2010-10-06 19:30:54 UTC (rev 2140)
+++ trunk/src/world.hh	2010-10-06 19:53:23 UTC (rev 2141)
@@ -296,7 +296,7 @@
     Stone *YieldStone(GridPos p);
     void   KillStone(GridPos p);
     void   MoveStone(GridPos oldPos, GridPos newPos);
-    void TouchStone(GridPos pos);
+    void   TouchStone(GridPos pos);
 
 /* -------------------- Items -------------------- */
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001564.html">[Enigma-game-svn] r2140 - in trunk: data doc/reference src/others
</A></li>
	<LI>Next message: <A HREF="001566.html">[Enigma-game-svn] r2142 - in trunk: doc src/gui src/lev src/stones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1565">[ date ]</a>
              <a href="thread.html#1565">[ thread ]</a>
              <a href="subject.html#1565">[ subject ]</a>
              <a href="author.html#1565">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/enigma-game-svn">More information about the Enigma-game-svn
mailing list</a><br>
</body></html>
