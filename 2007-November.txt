From ral at mail.berlios.de  Thu Nov  1 17:11:39 2007
From: ral at mail.berlios.de (ral at BerliOS)
Date: Thu, 1 Nov 2007 17:11:39 +0100
Subject: [Enigma-game-svn] r914 - homepage/input
Message-ID: <200711011611.lA1GBd3f022216@sheep.berlios.de>

Author: ral
Date: 2007-11-01 17:11:38 +0100 (Thu, 01 Nov 2007)
New Revision: 914

Modified:
   homepage/input/stat-other.html
   homepage/input/table-hcp.html
   homepage/input/table-rat.html
   homepage/input/table-solved.html
   homepage/input/table-wr.html
   homepage/input/userlist.html
Log:
Homepage:
- statistics for October 2007

Modified: homepage/input/stat-other.html
===================================================================
--- homepage/input/stat-other.html	2007-10-30 23:56:30 UTC (rev 913)
+++ homepage/input/stat-other.html	2007-11-01 16:11:38 UTC (rev 914)
@@ -1,22 +1,22 @@
   <div class="stat-help">
     <h3>$$Other_Statistics$$</h3>
     <h4>$$Scores$$</h4>
-      55610 $$single_level_scores$$.
+      60446 $$single_level_scores$$.
     <h4>$$Ratings$$</h4>
-      10275 $$single_level_ratings$$ 4.91 $$and_distribution$$: 
+      10884 $$single_level_ratings$$ 4.88 $$and_distribution$$: 
       <table>
         <colgroup><col width="80"><col width="80"></colgroup>
         <tr><th>$$rating$$</th><th>$$count$$</th></tr>
         <tr><td class="num">0</td><td class="num">38</td></tr>
-        <tr><td class="num">1</td><td class="num">190</td></tr>
-        <tr><td class="num">2</td><td class="num">505</td></tr>
-        <tr><td class="num">3</td><td class="num">1494</td></tr>
-        <tr><td class="num">4</td><td class="num">2003</td></tr>
-        <tr><td class="num">5</td><td class="num">2507</td></tr>
-        <tr><td class="num">6</td><td class="num">1639</td></tr>
-        <tr><td class="num">7</td><td class="num">1185</td></tr>
-        <tr><td class="num">8</td><td class="num">436</td></tr>
-        <tr><td class="num">9</td><td class="num">189</td></tr>
-        <tr><td class="num">10</td><td class="num">89</td></tr>
+        <tr><td class="num">1</td><td class="num">216</td></tr>
+        <tr><td class="num">2</td><td class="num">579</td></tr>
+        <tr><td class="num">3</td><td class="num">1613</td></tr>
+        <tr><td class="num">4</td><td class="num">2110</td></tr>
+        <tr><td class="num">5</td><td class="num">2630</td></tr>
+        <tr><td class="num">6</td><td class="num">1718</td></tr>
+        <tr><td class="num">7</td><td class="num">1234</td></tr>
+        <tr><td class="num">8</td><td class="num">463</td></tr>
+        <tr><td class="num">9</td><td class="num">193</td></tr>
+        <tr><td class="num">10</td><td class="num">90</td></tr>
       </table>
   </div>

Modified: homepage/input/table-hcp.html
===================================================================
--- homepage/input/table-hcp.html	2007-10-30 23:56:30 UTC (rev 913)
+++ homepage/input/table-hcp.html	2007-11-01 16:11:38 UTC (rev 914)
@@ -1,112 +1,119 @@
   <table>
-    <caption>$$Handicap_Statistics$$ $$September$$ 2007</caption>
+    <caption>$$Handicap_Statistics$$ $$October$$ 2007</caption>
     <colgroup><col width="130"><col width="220"></colgroup>
     <tr><th>$$solved_hcp$$</th><th class="left">$$user$$</th></tr>
-     <tr><td class="num">-132.9</td><td class="left">'Moneymaker'</td></tr>
-     <tr><td class="num"> -84.7</td><td class="left">'Stupid'</td></tr>
-     <tr><td class="num"> -83.5</td><td class="left">'Johannes'</td></tr>
-     <tr><td class="num"> -73.7</td><td class="left">'Great Scott'</td></tr>
-     <tr><td class="num"> -62.7</td><td class="left">'Duffy'</td></tr>
-     <tr><td class="num"> -47.8</td><td class="left">'Django'</td></tr>
-     <tr><td class="num"> -47.7</td><td class="left">'daydreamer'</td></tr>
-     <tr><td class="num"> -35.4</td><td class="left">'Taztunes'</td></tr>
-     <tr><td class="num"> -34.1</td><td class="left">'Safalra'</td></tr>
-     <tr><td class="num"> -28.8</td><td class="left">'bojster'</td></tr>
-     <tr><td class="num"> -28.4</td><td class="left">'ryujun'</td></tr>
-     <tr><td class="num"> -27.3</td><td class="left">'Alexandros'</td></tr>
-     <tr><td class="num"> -20.6</td><td class="left">'Raoul'</td></tr>
-     <tr><td class="num"> -18.4</td><td class="left">'ged'</td></tr>
-     <tr><td class="num"> -17.9</td><td class="left">'Ghatotkacha'</td></tr>
-     <tr><td class="num"> -14.7</td><td class="left">'dpl'</td></tr>
-     <tr><td class="num"> -13.8</td><td class="left">'Ronald'</td></tr>
-     <tr><td class="num"> -13.7</td><td class="left">'Lukas'</td></tr>
-     <tr><td class="num"> -13.1</td><td class="left">'HuB34'</td></tr>
-     <tr><td class="num"> -12.5</td><td class="left">'Ludmian'</td></tr>
-     <tr><td class="num">  -9.2</td><td class="left">'Iceshark7'</td></tr>
-     <tr><td class="num">  -4.8</td><td class="left">'fabian'</td></tr>
-     <tr><td class="num">  -3.1</td><td class="left">'Craven'</td></tr>
-     <tr><td class="num">  -2.8</td><td class="left">'Wuzzy'</td></tr>
-     <tr><td class="num">  -2.7</td><td class="left">'JuSt'</td></tr>
-     <tr><td class="num">   0.2</td><td class="left">'para_doks'</td></tr>
-     <tr><td class="num">   0.2</td><td class="left">'Tobias'</td></tr>
-     <tr><td class="num">   0.9</td><td class="left">'Daniel'</td></tr>
-     <tr><td class="num">   1.1</td><td class="left">'Guglielmo'</td></tr>
-     <tr><td class="num">   3.8</td><td class="left">'Zekobah'</td></tr>
-     <tr><td class="num">   4.4</td><td class="left">'Emmanuel'</td></tr>
-     <tr><td class="num">   8.2</td><td class="left">'mrduke'</td></tr>
-     <tr><td class="num">   9.4</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-     <tr><td class="num">  11.4</td><td class="left">'joseba'</td></tr>
-     <tr><td class="num">  11.4</td><td class="left">'Andreas'</td></tr>
-     <tr><td class="num">  11.9</td><td class="left">'Chocolate Zero'</td></tr>
-     <tr><td class="num">  13.0</td><td class="left">'Sim_Ed'</td></tr>
-     <tr><td class="num">  13.4</td><td class="left">'Agnieszka'</td></tr>
-     <tr><td class="num">  14.1</td><td class="left">'Mark P.'</td></tr>
-     <tr><td class="num">  14.1</td><td class="left">'ABS'</td></tr>
-     <tr><td class="num">  16.5</td><td class="left">'Tiza'</td></tr>
-     <tr><td class="num">  18.2</td><td class="left">'Alex'</td></tr>
-     <tr><td class="num">  18.5</td><td class="left">'shoki'</td></tr>
-     <tr><td class="num">  19.5</td><td class="left">'U-Punkt'</td></tr>
-     <tr><td class="num">  20.9</td><td class="left">'Klaus'</td></tr>
-     <tr><td class="num">  21.1</td><td class="left">'Marc-Hendrik'</td></tr>
-     <tr><td class="num">  21.3</td><td class="left">'Chris'</td></tr>
-     <tr><td class="num">  21.8</td><td class="left">'Bent'</td></tr>
-     <tr><td class="num">  22.1</td><td class="left">'Thomas'</td></tr>
-     <tr><td class="num">  22.9</td><td class="left">'hdwow'</td></tr>
-     <tr><td class="num">  23.9</td><td class="left">'Gottseinsohn'</td></tr>
-     <tr><td class="num">  25.3</td><td class="left">'Ale'</td></tr>
-     <tr><td class="num">  25.9</td><td class="left">'J3FF'</td></tr>
-     <tr><td class="num">  26.0</td><td class="left">'Little_Mole'</td></tr>
-     <tr><td class="num">  26.8</td><td class="left">'hendrik'</td></tr>
-     <tr><td class="num">  27.3</td><td class="left">'biotopa'</td></tr>
-     <tr><td class="num">  28.6</td><td class="left">'redsantz'</td></tr>
-     <tr><td class="num">  29.9</td><td class="left">'IChrisI'</td></tr>
-     <tr><td class="num">  30.0</td><td class="left">'Melanie'</td></tr>
-     <tr><td class="num">  30.5</td><td class="left">'erich'</td></tr>
-     <tr><td class="num">  30.5</td><td class="left">'NorthForty'</td></tr>
-     <tr><td class="num">  30.8</td><td class="left">'Davacardo'</td></tr>
-     <tr><td class="num">  33.2</td><td class="left">'Edgar_Flesk'</td></tr>
-     <tr><td class="num">  33.7</td><td class="left">'niebie'</td></tr>
-     <tr><td class="num">  35.7</td><td class="left">'WP319'</td></tr>
-     <tr><td class="num">  35.9</td><td class="left">'Rugby4ever'</td></tr>
-     <tr><td class="num">  37.5</td><td class="left">'Drotten'</td></tr>
-     <tr><td class="num">  37.9</td><td class="left">'Archcorenth'</td></tr>
-     <tr><td class="num">  39.6</td><td class="left">'Tiger'</td></tr>
-     <tr><td class="num">  40.6</td><td class="left">'Nfol'</td></tr>
-     <tr><td class="num">  40.9</td><td class="left">'Vlad'</td></tr>
-     <tr><td class="num">  41.5</td><td class="left">'Momcat'</td></tr>
-     <tr><td class="num">  42.2</td><td class="left">'Uli'</td></tr>
-     <tr><td class="num">  42.4</td><td class="left">'Vinksu'</td></tr>
-     <tr><td class="num">  43.8</td><td class="left">'Liam Sheehan'</td></tr>
-     <tr><td class="num">  44.2</td><td class="left">'Tarim'</td></tr>
-     <tr><td class="num">  44.9</td><td class="left">'Breezy'</td></tr>
-     <tr><td class="num">  46.3</td><td class="left">'mhatta'</td></tr>
-     <tr><td class="num">  47.7</td><td class="left">'Zak'</td></tr>
-     <tr><td class="num">  48.3</td><td class="left">'Valkyrie2'</td></tr>
-     <tr><td class="num">  48.6</td><td class="left">'Sandra'</td></tr>
-     <tr><td class="num">  50.1</td><td class="left">'Jeffrey S'</td></tr>
-     <tr><td class="num">  51.0</td><td class="left">'Vaily'</td></tr>
-     <tr><td class="num">  52.1</td><td class="left">'Turbogurk'</td></tr>
-     <tr><td class="num">  52.5</td><td class="left">'Neophilus'</td></tr>
-     <tr><td class="num">  52.6</td><td class="left">'Cyphase'</td></tr>
-     <tr><td class="num">  53.7</td><td class="left">'Harry Lim'</td></tr>
-     <tr><td class="num">  54.8</td><td class="left">'krazy62'</td></tr>
-     <tr><td class="num">  55.6</td><td class="left">'Adonica'</td></tr>
-     <tr><td class="num">  61.2</td><td class="left">'Asbel'</td></tr>
-     <tr><td class="num">  62.8</td><td class="left">'Meeve'</td></tr>
-     <tr><td class="num">  65.7</td><td class="left">'ael'</td></tr>
-     <tr><td class="num">  66.0</td><td class="left">'Samuel'</td></tr>
-     <tr><td class="num">  66.9</td><td class="left">'Alf'</td></tr>
-     <tr><td class="num">  68.5</td><td class="left">'Magnus and Susi'</td></tr>
-     <tr><td class="num">  68.8</td><td class="left">'Mecki'</td></tr>
-     <tr><td class="num">  69.6</td><td class="left">'xmouse'</td></tr>
-     <tr><td class="num">  71.2</td><td class="left">'Joona'</td></tr>
-     <tr><td class="num">  71.7</td><td class="left">'AQZ'</td></tr>
-     <tr><td class="num">  73.6</td><td class="left">'Dvorhagen'</td></tr>
-     <tr><td class="num">  74.5</td><td class="left">'jojo'</td></tr>
-     <tr><td class="num">  74.8</td><td class="left">'AsuCaga'</td></tr>
-     <tr><td class="num">  79.2</td><td class="left">'AkRa'</td></tr>
-     <tr><td class="num">  80.0</td><td class="left">'Agares'</td></tr>
-     <tr><td class="num">  84.7</td><td class="left">'Miel56'</td></tr>
-     <tr><td class="num">  89.9</td><td class="left">'The red O'</td></tr>
-     <tr><td class="num">  92.2</td><td class="left">'Michael'</td></tr>
+     <tr><td class="num">-137.0</td><td class="left">'Moneymaker'</td></tr>
+     <tr><td class="num"> -89.0</td><td class="left">'Johannes'</td></tr>
+     <tr><td class="num"> -88.5</td><td class="left">'Stupid'</td></tr>
+     <tr><td class="num"> -77.3</td><td class="left">'Great Scott'</td></tr>
+     <tr><td class="num"> -66.3</td><td class="left">'Duffy'</td></tr>
+     <tr><td class="num"> -51.5</td><td class="left">'Django'</td></tr>
+     <tr><td class="num"> -51.5</td><td class="left">'daydreamer'</td></tr>
+     <tr><td class="num"> -44.6</td><td class="left">'Alexandros'</td></tr>
+     <tr><td class="num"> -40.8</td><td class="left">'Taztunes'</td></tr>
+     <tr><td class="num"> -37.7</td><td class="left">'Safalra'</td></tr>
+     <tr><td class="num"> -32.2</td><td class="left">'bojster'</td></tr>
+     <tr><td class="num"> -31.9</td><td class="left">'ryujun'</td></tr>
+     <tr><td class="num"> -24.8</td><td class="left">'Ludmian'</td></tr>
+     <tr><td class="num"> -23.8</td><td class="left">'Raoul'</td></tr>
+     <tr><td class="num"> -22.0</td><td class="left">'ged'</td></tr>
+     <tr><td class="num"> -20.9</td><td class="left">'Ghatotkacha'</td></tr>
+     <tr><td class="num"> -19.8</td><td class="left">'hendrik'</td></tr>
+     <tr><td class="num"> -17.8</td><td class="left">'dpl'</td></tr>
+     <tr><td class="num"> -16.9</td><td class="left">'Ronald'</td></tr>
+     <tr><td class="num"> -16.5</td><td class="left">'Lukas'</td></tr>
+     <tr><td class="num"> -15.6</td><td class="left">'HuB34'</td></tr>
+     <tr><td class="num"> -12.1</td><td class="left">'joseba'</td></tr>
+     <tr><td class="num"> -11.8</td><td class="left">'Iceshark7'</td></tr>
+     <tr><td class="num">  -9.2</td><td class="left">'Daniel'</td></tr>
+     <tr><td class="num">  -7.6</td><td class="left">'fabian'</td></tr>
+     <tr><td class="num">  -5.5</td><td class="left">'Craven'</td></tr>
+     <tr><td class="num">  -5.3</td><td class="left">'Wuzzy'</td></tr>
+     <tr><td class="num">  -5.3</td><td class="left">'JuSt'</td></tr>
+     <tr><td class="num">  -2.2</td><td class="left">'para_doks'</td></tr>
+     <tr><td class="num">  -2.2</td><td class="left">'Tobias'</td></tr>
+     <tr><td class="num">  -1.1</td><td class="left">'Guglielmo'</td></tr>
+     <tr><td class="num">   1.3</td><td class="left">'Zekobah'</td></tr>
+     <tr><td class="num">   2.1</td><td class="left">'Emmanuel'</td></tr>
+     <tr><td class="num">   6.2</td><td class="left">'mrduke'</td></tr>
+     <tr><td class="num">   6.3</td><td class="left">'ABS'</td></tr>
+     <tr><td class="num">   7.1</td><td class="left">'ShadowPhrogg32642342'</td></tr>
+     <tr><td class="num">   9.1</td><td class="left">'Andreas'</td></tr>
+     <tr><td class="num">   9.7</td><td class="left">'Chocolate Zero'</td></tr>
+     <tr><td class="num">  10.9</td><td class="left">'Sim_Ed'</td></tr>
+     <tr><td class="num">  11.3</td><td class="left">'Agnieszka'</td></tr>
+     <tr><td class="num">  11.7</td><td class="left">'shoki'</td></tr>
+     <tr><td class="num">  12.1</td><td class="left">'Mark P.'</td></tr>
+     <tr><td class="num">  14.2</td><td class="left">'Tiza'</td></tr>
+     <tr><td class="num">  16.1</td><td class="left">'U-Punkt'</td></tr>
+     <tr><td class="num">  16.5</td><td class="left">'Alex'</td></tr>
+     <tr><td class="num">  19.2</td><td class="left">'Klaus'</td></tr>
+     <tr><td class="num">  19.5</td><td class="left">'Marc-Hendrik'</td></tr>
+     <tr><td class="num">  19.5</td><td class="left">'Chris'</td></tr>
+     <tr><td class="num">  19.7</td><td class="left">'Bent'</td></tr>
+     <tr><td class="num">  20.2</td><td class="left">'Thomas'</td></tr>
+     <tr><td class="num">  21.3</td><td class="left">'hdwow'</td></tr>
+     <tr><td class="num">  22.1</td><td class="left">'Gottseinsohn'</td></tr>
+     <tr><td class="num">  23.2</td><td class="left">'Ale'</td></tr>
+     <tr><td class="num">  24.2</td><td class="left">'J3FF'</td></tr>
+     <tr><td class="num">  24.4</td><td class="left">'Little_Mole'</td></tr>
+     <tr><td class="num">  24.6</td><td class="left">'alfred69'</td></tr>
+     <tr><td class="num">  25.9</td><td class="left">'biotopa'</td></tr>
+     <tr><td class="num">  27.1</td><td class="left">'redsantz'</td></tr>
+     <tr><td class="num">  28.2</td><td class="left">'IChrisI'</td></tr>
+     <tr><td class="num">  28.8</td><td class="left">'NorthForty'</td></tr>
+     <tr><td class="num">  28.8</td><td class="left">'Melanie'</td></tr>
+     <tr><td class="num">  29.0</td><td class="left">'erich'</td></tr>
+     <tr><td class="num">  29.3</td><td class="left">'Davacardo'</td></tr>
+     <tr><td class="num">  29.6</td><td class="left">'Andy'</td></tr>
+     <tr><td class="num">  30.6</td><td class="left">'Vinksu'</td></tr>
+     <tr><td class="num">  31.7</td><td class="left">'Edgar_Flesk'</td></tr>
+     <tr><td class="num">  32.0</td><td class="left">'MicWa'</td></tr>
+     <tr><td class="num">  32.2</td><td class="left">'niebie'</td></tr>
+     <tr><td class="num">  33.4</td><td class="left">'WP319'</td></tr>
+     <tr><td class="num">  34.2</td><td class="left">'Rugby4ever'</td></tr>
+     <tr><td class="num">  35.8</td><td class="left">'Gorn'</td></tr>
+     <tr><td class="num">  36.0</td><td class="left">'Drotten'</td></tr>
+     <tr><td class="num">  36.5</td><td class="left">'B-man'</td></tr>
+     <tr><td class="num">  36.5</td><td class="left">'Archcorenth'</td></tr>
+     <tr><td class="num">  38.2</td><td class="left">'Tiger'</td></tr>
+     <tr><td class="num">  39.4</td><td class="left">'Nfol'</td></tr>
+     <tr><td class="num">  40.1</td><td class="left">'Vlad'</td></tr>
+     <tr><td class="num">  40.4</td><td class="left">'Momcat'</td></tr>
+     <tr><td class="num">  41.0</td><td class="left">'Uli'</td></tr>
+     <tr><td class="num">  42.7</td><td class="left">'Liam Sheehan'</td></tr>
+     <tr><td class="num">  43.0</td><td class="left">'Tarim'</td></tr>
+     <tr><td class="num">  43.5</td><td class="left">'IntKecsk'</td></tr>
+     <tr><td class="num">  43.8</td><td class="left">'Breezy'</td></tr>
+     <tr><td class="num">  45.4</td><td class="left">'mhatta'</td></tr>
+     <tr><td class="num">  45.7</td><td class="left">'Harry Lim'</td></tr>
+     <tr><td class="num">  46.5</td><td class="left">'Zak'</td></tr>
+     <tr><td class="num">  47.3</td><td class="left">'Valkyrie2'</td></tr>
+     <tr><td class="num">  47.6</td><td class="left">'Sandra'</td></tr>
+     <tr><td class="num">  49.1</td><td class="left">'Jeffrey S'</td></tr>
+     <tr><td class="num">  49.9</td><td class="left">'Vaily'</td></tr>
+     <tr><td class="num">  51.0</td><td class="left">'Neophilus'</td></tr>
+     <tr><td class="num">  51.1</td><td class="left">'Turbogurk'</td></tr>
+     <tr><td class="num">  51.8</td><td class="left">'Cyphase'</td></tr>
+     <tr><td class="num">  51.9</td><td class="left">'brynn'</td></tr>
+     <tr><td class="num">  53.7</td><td class="left">'krazy62'</td></tr>
+     <tr><td class="num">  54.6</td><td class="left">'Adonica'</td></tr>
+     <tr><td class="num">  60.2</td><td class="left">'Asbel'</td></tr>
+     <tr><td class="num">  62.1</td><td class="left">'Meeve'</td></tr>
+     <tr><td class="num">  65.0</td><td class="left">'ael'</td></tr>
+     <tr><td class="num">  65.4</td><td class="left">'Samuel'</td></tr>
+     <tr><td class="num">  66.3</td><td class="left">'Alf'</td></tr>
+     <tr><td class="num">  67.7</td><td class="left">'Magnus and Susi'</td></tr>
+     <tr><td class="num">  68.2</td><td class="left">'Mecki'</td></tr>
+     <tr><td class="num">  69.1</td><td class="left">'xmouse'</td></tr>
+     <tr><td class="num">  70.7</td><td class="left">'Joona'</td></tr>
+     <tr><td class="num">  71.1</td><td class="left">'AQZ'</td></tr>
+     <tr><td class="num">  73.1</td><td class="left">'Dvorhagen'</td></tr>
+     <tr><td class="num">  74.2</td><td class="left">'jojo'</td></tr>
+     <tr><td class="num">  74.3</td><td class="left">'AsuCaga'</td></tr>
+     <tr><td class="num">  78.8</td><td class="left">'AkRa'</td></tr>
+     <tr><td class="num">  79.6</td><td class="left">'Agares'</td></tr>
+     <tr><td class="num">  84.4</td><td class="left">'Miel56'</td></tr>
+     <tr><td class="num">  89.6</td><td class="left">'The red O'</td></tr>
+     <tr><td class="num">  92.1</td><td class="left">'Michael'</td></tr>
   </table>

Modified: homepage/input/table-rat.html
===================================================================
--- homepage/input/table-rat.html	2007-10-30 23:56:30 UTC (rev 913)
+++ homepage/input/table-rat.html	2007-11-01 16:11:38 UTC (rev 914)
@@ -1,47 +1,49 @@
   <table>
-    <caption>$$Rating_Statistics$$ $$September$$ 2007</caption>
+    <caption>$$Rating_Statistics$$ $$October$$ 2007</caption>
     <colgroup><col width="80"><col width="80"><col width="220"></colgroup>
-    <tr><th>$$count$$</th><th>$$average$$</th><th class="left">$$user$$</th></tr>    <tr><td class="num">1038</td><td class="num"> 5.02</td><td class="left">'ryujun'</td></tr>
-    <tr><td class="num">1009</td><td class="num"> 4.84</td><td class="left">'Taztunes'</td></tr>
+    <tr><th>$$count$$</th><th>$$average$$</th><th class="left">$$user$$</th></tr>    <tr><td class="num">1039</td><td class="num"> 5.03</td><td class="left">'ryujun'</td></tr>
+    <tr><td class="num">1028</td><td class="num"> 4.81</td><td class="left">'Taztunes'</td></tr>
     <tr><td class="num">871</td><td class="num"> 5.09</td><td class="left">'Stupid'</td></tr>
     <tr><td class="num">838</td><td class="num"> 4.77</td><td class="left">'daydreamer'</td></tr>
     <tr><td class="num">653</td><td class="num"> 5.01</td><td class="left">'Duffy'</td></tr>
     <tr><td class="num">625</td><td class="num"> 4.98</td><td class="left">'Moneymaker'</td></tr>
-    <tr><td class="num">599</td><td class="num"> 4.21</td><td class="left">'shoki'</td></tr>
+    <tr><td class="num">613</td><td class="num"> 4.20</td><td class="left">'shoki'</td></tr>
     <tr><td class="num">505</td><td class="num"> 5.07</td><td class="left">'dpl'</td></tr>
     <tr><td class="num">496</td><td class="num"> 5.27</td><td class="left">'Lukas'</td></tr>
-    <tr><td class="num">437</td><td class="num"> 5.10</td><td class="left">'Johannes'</td></tr>
+    <tr><td class="num">448</td><td class="num"> 5.08</td><td class="left">'Johannes'</td></tr>
     <tr><td class="num">428</td><td class="num"> 4.22</td><td class="left">'Alexandros'</td></tr>
-    <tr><td class="num">416</td><td class="num"> 5.01</td><td class="left">'Ronald'</td></tr>
+    <tr><td class="num">425</td><td class="num"> 5.04</td><td class="left">'Ronald'</td></tr>
     <tr><td class="num">402</td><td class="num"> 4.34</td><td class="left">'ged'</td></tr>
+    <tr><td class="num">351</td><td class="num"> 4.93</td><td class="left">'U-Punkt'</td></tr>
+    <tr><td class="num">348</td><td class="num"> 4.09</td><td class="left">'Vinksu'</td></tr>
     <tr><td class="num">307</td><td class="num"> 4.01</td><td class="left">'Sim_Ed'</td></tr>
-    <tr><td class="num">265</td><td class="num"> 5.09</td><td class="left">'U-Punkt'</td></tr>
     <tr><td class="num">254</td><td class="num"> 4.91</td><td class="left">'JuSt'</td></tr>
     <tr><td class="num">208</td><td class="num"> 6.15</td><td class="left">'Momcat'</td></tr>
+    <tr><td class="num">150</td><td class="num"> 5.05</td><td class="left">'WP319'</td></tr>
     <tr><td class="num">129</td><td class="num"> 5.64</td><td class="left">'Raoul'</td></tr>
-    <tr><td class="num">115</td><td class="num"> 5.07</td><td class="left">'WP319'</td></tr>
     <tr><td class="num"> 99</td><td class="num"> 5.01</td><td class="left">'Tiza'</td></tr>
     <tr><td class="num"> 96</td><td class="num"> 4.20</td><td class="left">'Safalra'</td></tr>
     <tr><td class="num"> 85</td><td class="num"> 4.76</td><td class="left">'para_doks'</td></tr>
     <tr><td class="num"> 72</td><td class="num"> 5.63</td><td class="left">'Wuzzy'</td></tr>
     <tr><td class="num"> 51</td><td class="num"> 6.39</td><td class="left">'Little_Mole'</td></tr>
+    <tr><td class="num"> 50</td><td class="num"> 5.26</td><td class="left">'Daniel'</td></tr>
+    <tr><td class="num"> 45</td><td class="num"> 5.16</td><td class="left">'hendrik'</td></tr>
     <tr><td class="num"> 43</td><td class="num"> 3.74</td><td class="left">'Iceshark7'</td></tr>
     <tr><td class="num"> 30</td><td class="num"> 4.40</td><td class="left">'Archcorenth'</td></tr>
     <tr><td class="num"> 25</td><td class="num"> 4.88</td><td class="left">'Drotten'</td></tr>
-    <tr><td class="num"> 23</td><td class="num"> 6.00</td><td class="left">'Daniel'</td></tr>
-    <tr><td class="num"> 17</td><td class="num"> 5.76</td><td class="left">'mrduke'</td></tr>
+    <tr><td class="num"> 22</td><td class="num"> 5.95</td><td class="left">'mrduke'</td></tr>
     <tr><td class="num"> 17</td><td class="num"> 5.53</td><td class="left">'Jeffrey S'</td></tr>
     <tr><td class="num"> 16</td><td class="num"> 7.63</td><td class="left">'Ghatotkacha'</td></tr>
+    <tr><td class="num"> 13</td><td class="num"> 7.69</td><td class="left">'Ale'</td></tr>
     <tr><td class="num"> 13</td><td class="num"> 5.23</td><td class="left">'Samuel'</td></tr>
     <tr><td class="num"> 11</td><td class="num"> 6.36</td><td class="left">'ShadowPhrogg32642342'</td></tr>
     <tr><td class="num"> 10</td><td class="num"> 7.80</td><td class="left">'hdwow'</td></tr>
+    <tr><td class="num"> 10</td><td class="num"> 6.10</td><td class="left">'ABS'</td></tr>
     <tr><td class="num">  8</td><td class="num"> 3.25</td><td class="left">'Vlad'</td></tr>
-    <tr><td class="num">  7</td><td class="num"> 8.71</td><td class="left">'Ale'</td></tr>
-    <tr><td class="num">  7</td><td class="num"> 6.29</td><td class="left">'ABS'</td></tr>
     <tr><td class="num">  5</td><td class="num"> 9.20</td><td class="left">'HuB34'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 6.75</td><td class="left">'Agares'</td></tr>
+    <tr><td class="num">  4</td><td class="num">10.00</td><td class="left">'Mark P.'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 5.75</td><td class="left">'joseba'</td></tr>
-    <tr><td class="num">  4</td><td class="num">10.00</td><td class="left">'Mark P.'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 6.25</td><td class="left">'Breezy'</td></tr>
     <tr><td class="num">  4</td><td class="num"> 7.00</td><td class="left">'redsantz'</td></tr>
     <tr><td class="num">  3</td><td class="num"> 0.67</td><td class="left">'Turbogurk'</td></tr>

Modified: homepage/input/table-solved.html
===================================================================
--- homepage/input/table-solved.html	2007-10-30 23:56:30 UTC (rev 913)
+++ homepage/input/table-solved.html	2007-11-01 16:11:38 UTC (rev 914)
@@ -1,60 +1,65 @@
   <table>
-    <caption>$$Solved_Level_Statistics$$ $$September$$ 2007</caption>
+    <caption>$$Solved_Level_Statistics$$ $$October$$ 2007</caption>
     <colgroup><col width="130"><col width="130"><col width="130"><col width="240"></colgroup>
     <tr><th>$$difficult$$</th><th>$$easy$$</th><th>$$total$$</th><th class="left">$$user$$</th></tr>
-    <tr><td class="num">1041/1045</td><td class="num">189/189</td><td class="num"> 99.68%</td><td class="left">'Taztunes'</td></tr>
+    <tr><td class="num">1042/1045</td><td class="num">189/189</td><td class="num"> 99.76%</td><td class="left">'Taztunes'</td></tr>
     <tr><td class="num">1029/1045</td><td class="num">183/189</td><td class="num"> 98.22%</td><td class="left">'Craven'</td></tr>
     <tr><td class="num">1028/1045</td><td class="num">178/189</td><td class="num"> 97.73%</td><td class="left">'Moneymaker'</td></tr>
-    <tr><td class="num">1019/1045</td><td class="num">184/189</td><td class="num"> 97.49%</td><td class="left">'ryujun'</td></tr>
+    <tr><td class="num">1020/1045</td><td class="num">184/189</td><td class="num"> 97.57%</td><td class="left">'ryujun'</td></tr>
     <tr><td class="num">1014/1045</td><td class="num">175/189</td><td class="num"> 96.35%</td><td class="left">'Stupid'</td></tr>
     <tr><td class="num"> 999/1045</td><td class="num">177/189</td><td class="num"> 95.30%</td><td class="left">'biotopa'</td></tr>
-    <tr><td class="num"> 992/1045</td><td class="num">173/189</td><td class="num"> 94.41%</td><td class="left">'Ronald'</td></tr>
+    <tr><td class="num"> 998/1045</td><td class="num">175/189</td><td class="num"> 95.06%</td><td class="left">'Ronald'</td></tr>
     <tr><td class="num"> 949/1045</td><td class="num">170/189</td><td class="num"> 90.68%</td><td class="left">'para_doks'</td></tr>
     <tr><td class="num"> 951/1045</td><td class="num">165/189</td><td class="num"> 90.44%</td><td class="left">'daydreamer'</td></tr>
     <tr><td class="num"> 933/1045</td><td class="num">125/189</td><td class="num"> 85.74%</td><td class="left">'Alex'</td></tr>
     <tr><td class="num"> 914/1045</td><td class="num">135/189</td><td class="num"> 85.01%</td><td class="left">'JuSt'</td></tr>
+    <tr><td class="num"> 894/1045</td><td class="num">140/189</td><td class="num"> 83.79%</td><td class="left">'Johannes'</td></tr>
     <tr><td class="num"> 863/1045</td><td class="num">161/189</td><td class="num"> 82.98%</td><td class="left">'Tobias'</td></tr>
     <tr><td class="num"> 915/1045</td><td class="num">105/189</td><td class="num"> 82.66%</td><td class="left">'Django'</td></tr>
-    <tr><td class="num"> 886/1045</td><td class="num">134/189</td><td class="num"> 82.66%</td><td class="left">'Johannes'</td></tr>
+    <tr><td class="num"> 844/1045</td><td class="num">135/189</td><td class="num"> 79.34%</td><td class="left">'mrduke'</td></tr>
     <tr><td class="num"> 874/1045</td><td class="num">103/189</td><td class="num"> 79.17%</td><td class="left">'Melanie'</td></tr>
+    <tr><td class="num"> 841/1045</td><td class="num">123/189</td><td class="num"> 78.12%</td><td class="left">'shoki'</td></tr>
     <tr><td class="num"> 841/1045</td><td class="num">114/189</td><td class="num"> 77.39%</td><td class="left">'Lukas'</td></tr>
     <tr><td class="num"> 950/1045</td><td class="num">  0/189</td><td class="num"> 76.99%</td><td class="left">'Tarim'</td></tr>
-    <tr><td class="num"> 819/1045</td><td class="num">126/189</td><td class="num"> 76.58%</td><td class="left">'mrduke'</td></tr>
-    <tr><td class="num"> 830/1045</td><td class="num">109/189</td><td class="num"> 76.09%</td><td class="left">'shoki'</td></tr>
-    <tr><td class="num"> 923/1045</td><td class="num">  1/189</td><td class="num"> 74.88%</td><td class="left">'Ale'</td></tr>
+    <tr><td class="num"> 805/1045</td><td class="num">142/189</td><td class="num"> 76.74%</td><td class="left">'WP319'</td></tr>
+    <tr><td class="num"> 938/1045</td><td class="num">  1/189</td><td class="num"> 76.09%</td><td class="left">'Ale'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num">138/189</td><td class="num"> 74.55%</td><td class="left">'Safalra'</td></tr>
-    <tr><td class="num"> 768/1045</td><td class="num">131/189</td><td class="num"> 72.85%</td><td class="left">'WP319'</td></tr>
     <tr><td class="num"> 762/1045</td><td class="num"> 73/189</td><td class="num"> 67.67%</td><td class="left">'redsantz'</td></tr>
     <tr><td class="num"> 734/1045</td><td class="num"> 82/189</td><td class="num"> 66.13%</td><td class="left">'bojster'</td></tr>
     <tr><td class="num"> 782/1045</td><td class="num"> 33/189</td><td class="num"> 66.05%</td><td class="left">'Sim_Ed'</td></tr>
+    <tr><td class="num"> 702/1045</td><td class="num"> 84/189</td><td class="num"> 63.70%</td><td class="left">'U-Punkt'</td></tr>
+    <tr><td class="num"> 714/1045</td><td class="num"> 68/189</td><td class="num"> 63.37%</td><td class="left">'Andy'</td></tr>
+    <tr><td class="num"> 743/1045</td><td class="num"> 32/189</td><td class="num"> 62.80%</td><td class="left">'alfred69'</td></tr>
     <tr><td class="num"> 681/1045</td><td class="num"> 78/189</td><td class="num"> 61.51%</td><td class="left">'HuB34'</td></tr>
     <tr><td class="num"> 659/1045</td><td class="num"> 95/189</td><td class="num"> 61.10%</td><td class="left">'Marc-Hendrik'</td></tr>
-    <tr><td class="num"> 671/1045</td><td class="num"> 76/189</td><td class="num"> 60.53%</td><td class="left">'U-Punkt'</td></tr>
+    <tr><td class="num"> 640/1045</td><td class="num">112/189</td><td class="num"> 60.94%</td><td class="left">'ABS'</td></tr>
+    <tr><td class="num"> 742/1045</td><td class="num">  4/189</td><td class="num"> 60.45%</td><td class="left">'brynn'</td></tr>
     <tr><td class="num"> 633/1045</td><td class="num">110/189</td><td class="num"> 60.21%</td><td class="left">'Raoul'</td></tr>
     <tr><td class="num"> 643/1045</td><td class="num"> 83/189</td><td class="num"> 58.83%</td><td class="left">'Great Scott'</td></tr>
     <tr><td class="num"> 714/1045</td><td class="num">  0/189</td><td class="num"> 57.86%</td><td class="left">'Gottseinsohn'</td></tr>
     <tr><td class="num"> 625/1045</td><td class="num"> 82/189</td><td class="num"> 57.29%</td><td class="left">'dpl'</td></tr>
-    <tr><td class="num"> 627/1045</td><td class="num"> 71/189</td><td class="num"> 56.56%</td><td class="left">'ABS'</td></tr>
     <tr><td class="num"> 636/1045</td><td class="num"> 55/189</td><td class="num"> 56.00%</td><td class="left">'fabian'</td></tr>
     <tr><td class="num"> 588/1045</td><td class="num"> 93/189</td><td class="num"> 55.19%</td><td class="left">'Ghatotkacha'</td></tr>
     <tr><td class="num"> 634/1045</td><td class="num"> 43/189</td><td class="num"> 54.86%</td><td class="left">'Klaus'</td></tr>
     <tr><td class="num"> 559/1045</td><td class="num">111/189</td><td class="num"> 54.29%</td><td class="left">'Mark P.'</td></tr>
     <tr><td class="num"> 576/1045</td><td class="num"> 93/189</td><td class="num"> 54.21%</td><td class="left">'Guglielmo'</td></tr>
+    <tr><td class="num"> 668/1045</td><td class="num">  0/189</td><td class="num"> 54.13%</td><td class="left">'Gorn'</td></tr>
+    <tr><td class="num"> 570/1045</td><td class="num"> 83/189</td><td class="num"> 52.92%</td><td class="left">'Ludmian'</td></tr>
+    <tr><td class="num"> 537/1045</td><td class="num">113/189</td><td class="num"> 52.67%</td><td class="left">'Alexandros'</td></tr>
     <tr><td class="num"> 579/1045</td><td class="num"> 56/189</td><td class="num"> 51.46%</td><td class="left">'Breezy'</td></tr>
-    <tr><td class="num"> 550/1045</td><td class="num"> 76/189</td><td class="num"> 50.73%</td><td class="left">'Ludmian'</td></tr>
     <tr><td class="num"> 525/1045</td><td class="num"> 95/189</td><td class="num"> 50.24%</td><td class="left">'ShadowPhrogg32642342'</td></tr>
     <tr><td class="num"> 589/1045</td><td class="num"> 26/189</td><td class="num"> 49.84%</td><td class="left">'hdwow'</td></tr>
     <tr><td class="num"> 533/1045</td><td class="num"> 82/189</td><td class="num"> 49.84%</td><td class="left">'Wuzzy'</td></tr>
     <tr><td class="num"> 506/1045</td><td class="num">108/189</td><td class="num"> 49.76%</td><td class="left">'Agnieszka'</td></tr>
-    <tr><td class="num"> 506/1045</td><td class="num">107/189</td><td class="num"> 49.68%</td><td class="left">'Alexandros'</td></tr>
     <tr><td class="num"> 613/1045</td><td class="num">  0/189</td><td class="num"> 49.68%</td><td class="left">'Little_Mole'</td></tr>
     <tr><td class="num"> 519/1045</td><td class="num"> 37/189</td><td class="num"> 45.06%</td><td class="left">'Valkyrie2'</td></tr>
     <tr><td class="num"> 516/1045</td><td class="num"> 24/189</td><td class="num"> 43.76%</td><td class="left">'niebie'</td></tr>
+    <tr><td class="num"> 494/1045</td><td class="num"> 26/189</td><td class="num"> 42.14%</td><td class="left">'Daniel'</td></tr>
     <tr><td class="num"> 504/1045</td><td class="num"> 12/189</td><td class="num"> 41.82%</td><td class="left">'Duffy'</td></tr>
     <tr><td class="num"> 495/1045</td><td class="num">  0/189</td><td class="num"> 40.11%</td><td class="left">'Edgar_Flesk'</td></tr>
-    <tr><td class="num"> 457/1045</td><td class="num"> 19/189</td><td class="num"> 38.57%</td><td class="left">'Daniel'</td></tr>
     <tr><td class="num"> 415/1045</td><td class="num"> 38/189</td><td class="num"> 36.71%</td><td class="left">'ged'</td></tr>
     <tr><td class="num"> 391/1045</td><td class="num"> 54/189</td><td class="num"> 36.06%</td><td class="left">'Tiza'</td></tr>
+    <tr><td class="num"> 439/1045</td><td class="num">  6/189</td><td class="num"> 36.06%</td><td class="left">'Vinksu'</td></tr>
     <tr><td class="num"> 391/1045</td><td class="num"> 36/189</td><td class="num"> 34.60%</td><td class="left">'Iceshark7'</td></tr>
     <tr><td class="num"> 397/1045</td><td class="num"> 24/189</td><td class="num"> 34.12%</td><td class="left">'Chocolate Zero'</td></tr>
     <tr><td class="num"> 376/1045</td><td class="num"> 35/189</td><td class="num"> 33.31%</td><td class="left">'Jeffrey S'</td></tr>
@@ -63,18 +68,22 @@
     <tr><td class="num"> 382/1045</td><td class="num"> 10/189</td><td class="num"> 31.77%</td><td class="left">'J3FF'</td></tr>
     <tr><td class="num"> 346/1045</td><td class="num"> 38/189</td><td class="num"> 31.12%</td><td class="left">'Liam Sheehan'</td></tr>
     <tr><td class="num"> 332/1045</td><td class="num"> 48/189</td><td class="num"> 30.79%</td><td class="left">'Zekobah'</td></tr>
+    <tr><td class="num"> 361/1045</td><td class="num"> 18/189</td><td class="num"> 30.71%</td><td class="left">'MicWa'</td></tr>
     <tr><td class="num"> 306/1045</td><td class="num"> 71/189</td><td class="num"> 30.55%</td><td class="left">'Davacardo'</td></tr>
     <tr><td class="num"> 370/1045</td><td class="num">  7/189</td><td class="num"> 30.55%</td><td class="left">'IChrisI'</td></tr>
+    <tr><td class="num"> 350/1045</td><td class="num"> 25/189</td><td class="num"> 30.39%</td><td class="left">'IntKecsk'</td></tr>
+    <tr><td class="num"> 325/1045</td><td class="num"> 33/189</td><td class="num"> 29.01%</td><td class="left">'hendrik'</td></tr>
     <tr><td class="num"> 331/1045</td><td class="num"> 14/189</td><td class="num"> 27.96%</td><td class="left">'Archcorenth'</td></tr>
     <tr><td class="num"> 281/1045</td><td class="num"> 63/189</td><td class="num"> 27.88%</td><td class="left">'erich'</td></tr>
     <tr><td class="num"> 295/1045</td><td class="num"> 29/189</td><td class="num"> 26.26%</td><td class="left">'Tiger'</td></tr>
     <tr><td class="num"> 288/1045</td><td class="num"> 36/189</td><td class="num"> 26.26%</td><td class="left">'Drotten'</td></tr>
     <tr><td class="num"> 252/1045</td><td class="num"> 63/189</td><td class="num"> 25.53%</td><td class="left">'Emmanuel'</td></tr>
     <tr><td class="num"> 261/1045</td><td class="num"> 53/189</td><td class="num"> 25.45%</td><td class="left">'Andreas'</td></tr>
-    <tr><td class="num"> 304/1045</td><td class="num">  4/189</td><td class="num"> 24.96%</td><td class="left">'Vinksu'</td></tr>
     <tr><td class="num"> 276/1045</td><td class="num"> 15/189</td><td class="num"> 23.58%</td><td class="left">'Thomas'</td></tr>
     <tr><td class="num"> 273/1045</td><td class="num"> 15/189</td><td class="num"> 23.34%</td><td class="left">'Nfol'</td></tr>
+    <tr><td class="num"> 245/1045</td><td class="num"> 36/189</td><td class="num"> 22.77%</td><td class="left">'B-man'</td></tr>
     <tr><td class="num"> 201/1045</td><td class="num"> 54/189</td><td class="num"> 20.66%</td><td class="left">'mhatta'</td></tr>
+    <tr><td class="num"> 209/1045</td><td class="num"> 44/189</td><td class="num"> 20.50%</td><td class="left">'Harry Lim'</td></tr>
     <tr><td class="num"> 210/1045</td><td class="num"> 38/189</td><td class="num"> 20.10%</td><td class="left">'Sandra'</td></tr>
     <tr><td class="num"> 208/1045</td><td class="num"> 33/189</td><td class="num"> 19.53%</td><td class="left">'Uli'</td></tr>
     <tr><td class="num"> 214/1045</td><td class="num"> 19/189</td><td class="num"> 18.88%</td><td class="left">'Adonica'</td></tr>
@@ -83,10 +92,9 @@
     <tr><td class="num"> 125/1045</td><td class="num"> 55/189</td><td class="num"> 14.59%</td><td class="left">'Vlad'</td></tr>
     <tr><td class="num"> 149/1045</td><td class="num"> 30/189</td><td class="num"> 14.51%</td><td class="left">'Chris'</td></tr>
     <tr><td class="num"> 158/1045</td><td class="num"> 20/189</td><td class="num"> 14.42%</td><td class="left">'Turbogurk'</td></tr>
-    <tr><td class="num"> 155/1045</td><td class="num"> 22/189</td><td class="num"> 14.34%</td><td class="left">'hendrik'</td></tr>
-    <tr><td class="num"> 133/1045</td><td class="num"> 43/189</td><td class="num"> 14.26%</td><td class="left">'Harry Lim'</td></tr>
     <tr><td class="num"> 156/1045</td><td class="num"> 17/189</td><td class="num"> 14.02%</td><td class="left">'Zak'</td></tr>
     <tr><td class="num"> 164/1045</td><td class="num">  0/189</td><td class="num"> 13.29%</td><td class="left">'Bent'</td></tr>
+    <tr><td class="num"> 124/1045</td><td class="num"> 33/189</td><td class="num"> 12.72%</td><td class="left">'joseba'</td></tr>
     <tr><td class="num"> 127/1045</td><td class="num"> 29/189</td><td class="num"> 12.64%</td><td class="left">'ael'</td></tr>
     <tr><td class="num"> 148/1045</td><td class="num">  5/189</td><td class="num"> 12.40%</td><td class="left">'Rugby4ever'</td></tr>
     <tr><td class="num"> 110/1045</td><td class="num"> 31/189</td><td class="num"> 11.43%</td><td class="left">'Cyphase'</td></tr>
@@ -94,7 +102,6 @@
     <tr><td class="num"> 113/1045</td><td class="num"> 22/189</td><td class="num"> 10.94%</td><td class="left">'Mecki'</td></tr>
     <tr><td class="num"> 131/1045</td><td class="num">  1/189</td><td class="num"> 10.70%</td><td class="left">'Asbel'</td></tr>
     <tr><td class="num"> 105/1045</td><td class="num"> 22/189</td><td class="num"> 10.29%</td><td class="left">'Neophilus'</td></tr>
-    <tr><td class="num">  88/1045</td><td class="num"> 21/189</td><td class="num">  8.83%</td><td class="left">'joseba'</td></tr>
     <tr><td class="num"> 101/1045</td><td class="num">  0/189</td><td class="num">  8.18%</td><td class="left">'Alf'</td></tr>
     <tr><td class="num">  67/1045</td><td class="num"> 19/189</td><td class="num">  6.97%</td><td class="left">'Dvorhagen'</td></tr>
     <tr><td class="num">  57/1045</td><td class="num"> 26/189</td><td class="num">  6.73%</td><td class="left">'Meeve'</td></tr>

Modified: homepage/input/table-wr.html
===================================================================
--- homepage/input/table-wr.html	2007-10-30 23:56:30 UTC (rev 913)
+++ homepage/input/table-wr.html	2007-11-01 16:11:38 UTC (rev 914)
@@ -1,48 +1,49 @@
   <table>
-    <caption>$$Worldrecord_Statistics$$ $$September$$ 2007</caption>
+    <caption>$$Worldrecord_Statistics$$ $$October$$ 2007</caption>
     <colgroup><col width="80"><col width="80"><col width="470"></colgroup>
     <tr><th>$$total$$</th><th>$$shared$$</th><th class="left">$$user$$</th></tr>
-    <tr><td class="num">838</td><td class="num">248</td><td class="left">'Moneymaker'</td></tr>
-    <tr><td class="num">246</td><td class="num">120</td><td class="left">'Stupid'</td></tr>
-    <tr><td class="num">167</td><td class="num">134</td><td class="left">'Johannes'</td></tr>
+    <tr><td class="num">825</td><td class="num">246</td><td class="left">'Moneymaker'</td></tr>
+    <tr><td class="num">245</td><td class="num">120</td><td class="left">'Stupid'</td></tr>
+    <tr><td class="num">173</td><td class="num">136</td><td class="left">'Johannes'</td></tr>
     <tr><td class="num"> 94</td><td class="num"> 51</td><td class="left">'Duffy'</td></tr>
-    <tr><td class="num"> 78</td><td class="num"> 62</td><td class="left">'Great Scott'</td></tr>
-    <tr><td class="num"> 54</td><td class="num"> 45</td><td class="left">'daydreamer'</td></tr>
-    <tr><td class="num"> 45</td><td class="num"> 39</td><td class="left">'Django'</td></tr>
+    <tr><td class="num"> 76</td><td class="num"> 60</td><td class="left">'Great Scott'</td></tr>
+    <tr><td class="num"> 53</td><td class="num"> 44</td><td class="left">'daydreamer'</td></tr>
+    <tr><td class="num"> 43</td><td class="num"> 37</td><td class="left">'Django'</td></tr>
     <tr><td class="num"> 40</td><td class="num"> 33</td><td class="left">'Iceshark7'</td></tr>
-    <tr><td class="num"> 30</td><td class="num"> 25</td><td class="left">'Ghatotkacha'</td></tr>
-    <tr><td class="num"> 27</td><td class="num">  9</td><td class="left">'Ronald'</td></tr>
+    <tr><td class="num"> 39</td><td class="num"> 34</td><td class="left">'joseba'</td></tr>
+    <tr><td class="num"> 34</td><td class="num"> 26</td><td class="left">'Alexandros'</td></tr>
+    <tr><td class="num"> 30</td><td class="num"> 26</td><td class="left">'Ghatotkacha'</td></tr>
+    <tr><td class="num"> 25</td><td class="num"> 20</td><td class="left">'Ludmian'</td></tr>
+    <tr><td class="num"> 24</td><td class="num">  8</td><td class="left">'Ronald'</td></tr>
     <tr><td class="num"> 23</td><td class="num"> 14</td><td class="left">'Zekobah'</td></tr>
     <tr><td class="num"> 21</td><td class="num"> 18</td><td class="left">'Safalra'</td></tr>
     <tr><td class="num"> 20</td><td class="num"> 18</td><td class="left">'bojster'</td></tr>
     <tr><td class="num"> 19</td><td class="num">  3</td><td class="left">'ryujun'</td></tr>
-    <tr><td class="num"> 19</td><td class="num"> 17</td><td class="left">'ged'</td></tr>
     <tr><td class="num"> 18</td><td class="num"> 12</td><td class="left">'HuB34'</td></tr>
-    <tr><td class="num"> 17</td><td class="num"> 12</td><td class="left">'Alexandros'</td></tr>
-    <tr><td class="num"> 17</td><td class="num"> 16</td><td class="left">'joseba'</td></tr>
-    <tr><td class="num"> 15</td><td class="num">  9</td><td class="left">'Chocolate Zero'</td></tr>
-    <tr><td class="num"> 11</td><td class="num">  9</td><td class="left">'Ludmian'</td></tr>
+    <tr><td class="num"> 18</td><td class="num"> 16</td><td class="left">'ged'</td></tr>
+    <tr><td class="num"> 15</td><td class="num"> 10</td><td class="left">'Chocolate Zero'</td></tr>
     <tr><td class="num"> 10</td><td class="num">  5</td><td class="left">'ShadowPhrogg32642342'</td></tr>
-    <tr><td class="num"> 10</td><td class="num">  7</td><td class="left">'dpl'</td></tr>
     <tr><td class="num"> 10</td><td class="num"> 10</td><td class="left">'fabian'</td></tr>
+    <tr><td class="num">  9</td><td class="num">  6</td><td class="left">'dpl'</td></tr>
     <tr><td class="num">  8</td><td class="num">  3</td><td class="left">'Taztunes'</td></tr>
     <tr><td class="num">  8</td><td class="num">  5</td><td class="left">'Lukas'</td></tr>
     <tr><td class="num">  8</td><td class="num">  7</td><td class="left">'Wuzzy'</td></tr>
-    <tr><td class="num">  7</td><td class="num">  3</td><td class="left">'Breezy' + 'Craven'</td></tr>
-    <tr><td class="num">  6</td><td class="num">  2</td><td class="left">'Bent'</td></tr>
-    <tr><td class="num">  6</td><td class="num">  3</td><td class="left">'para_doks'</td></tr>
+    <tr><td class="num">  7</td><td class="num">  3</td><td class="left">'Breezy'</td></tr>
+    <tr><td class="num">  6</td><td class="num">  3</td><td class="left">'para_doks' + 'Craven'</td></tr>
     <tr><td class="num">  6</td><td class="num">  4</td><td class="left">'Raoul'</td></tr>
     <tr><td class="num">  6</td><td class="num">  5</td><td class="left">'Guglielmo'</td></tr>
     <tr><td class="num">  6</td><td class="num">  6</td><td class="left">'Tobias'</td></tr>
-    <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Cyphase' + 'Thomas' + 'Chris' + 'Ralf'</td></tr>
+    <tr><td class="num">  5</td><td class="num">  2</td><td class="left">'Bent'</td></tr>
+    <tr><td class="num">  5</td><td class="num">  5</td><td class="left">'Cyphase' + 'Emmanuel' + 'Thomas' + 'Chris' + 'Ralf'</td></tr>
     <tr><td class="num">  4</td><td class="num">  4</td><td class="left">'J3FF'</td></tr>
     <tr><td class="num">  3</td><td class="num">  0</td><td class="left">'Daniel'</td></tr>
-    <tr><td class="num">  3</td><td class="num">  2</td><td class="left">'Stephanie'</td></tr>
+    <tr><td class="num">  3</td><td class="num">  1</td><td class="left">'shoki'</td></tr>
+    <tr><td class="num">  3</td><td class="num">  2</td><td class="left">'hendrik' + 'Stephanie'</td></tr>
     <tr><td class="num">  3</td><td class="num">  3</td><td class="left">'Neophilus' + 'ABS'</td></tr>
     <tr><td class="num">  2</td><td class="num">  0</td><td class="left">'Ale'</td></tr>
     <tr><td class="num">  2</td><td class="num">  1</td><td class="left">'mrduke' + 'Edgar_Flesk' + 'Vlad' + 'JuSt'</td></tr>
     <tr><td class="num">  2</td><td class="num">  2</td><td class="left">'Drotten' + 'Sim_Ed' + 'Ingo'</td></tr>
-    <tr><td class="num">  1</td><td class="num">  0</td><td class="left">'biotopa' + 'U-Punkt' + 'Alex' + 'shoki' + 'krazy62' + 'Ant' + 'Melanie' + 'IChrisI' + 'Markus' + 'Nat'</td></tr>
-    <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'Agares' + 'Zak' + 'Tiza' + 'niebie' + 'Andreas' + 'Samuel' + 'Mark P.' + 'hdwow' + 'Asbel' + 'hendrik' + 'Vaily' + 'Meeve'</td></tr>
-    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'AQZ' + 'Miel56' + 'Alf' + 'Turbogurk' + 'Gottseinsohn' + 'Mecki' + 'ael' + 'Tiger' + 'Davacardo' + 'Adonica' + 'Joona' + 'Sandra' + 'Magnus and Susi' + 'WP319' + 'xmouse' + 'erich' + 'Vinksu' + 'Uli' + 'Little_Mole' + 'Harry Lim' + 'AkRa' + 'Momcat' + 'NorthForty' + 'Emmanuel' + 'The red O' + 'Jeffrey S' + 'Nfol' + 'Marc-Hendrik' + 'jojo' + 'Klaus' + 'Valkyrie2' + 'AsuCaga' + 'Rugby4ever' + 'Archcorenth' + 'mhatta' + 'Dvorhagen' + 'Holger' + 'Ingo_K' + 'redsantz' + 'Liam Sheehan' + 'Michael' + 'Tarim' + 'Agnieszka'</td></tr>
+    <tr><td class="num">  1</td><td class="num">  0</td><td class="left">'biotopa' + 'U-Punkt' + 'Alex' + 'krazy62' + 'Gorn' + 'Ant' + 'Melanie' + 'IChrisI' + 'Nat'</td></tr>
+    <tr><td class="num">  1</td><td class="num">  1</td><td class="left">'alfred69' + 'Agares' + 'Tiger' + 'Zak' + 'Tiza' + 'niebie' + 'Andreas' + 'Samuel' + 'Mark P.' + 'hdwow' + 'B-man' + 'Asbel' + 'Vaily' + 'Meeve'</td></tr>
+    <tr><td class="num">  0</td><td class="num">  0</td><td class="left">'AQZ' + 'Miel56' + 'Alf' + 'Turbogurk' + 'Gottseinsohn' + 'Mecki' + 'ael' + 'brynn' + 'IntKecsk' + 'Davacardo' + 'Adonica' + 'Joona' + 'Sandra' + 'Magnus and Susi' + 'WP319' + 'xmouse' + 'erich' + 'Vinksu' + 'Uli' + 'Little_Mole' + 'Harry Lim' + 'AkRa' + 'Momcat' + 'Andy' + 'NorthForty' + 'The red O' + 'Jeffrey S' + 'Nfol' + 'Marc-Hendrik' + 'jojo' + 'Klaus' + 'Valkyrie2' + 'MicWa' + 'AsuCaga' + 'Rugby4ever' + 'Archcorenth' + 'mhatta' + 'Dvorhagen' + 'Holger' + 'Ingo_K' + 'redsantz' + 'Markus' + 'Liam Sheehan' + 'Michael' + 'Tarim' + 'Agnieszka'</td></tr>
   </table>

Modified: homepage/input/userlist.html
===================================================================
--- homepage/input/userlist.html	2007-10-30 23:56:30 UTC (rev 913)
+++ homepage/input/userlist.html	2007-11-01 16:11:38 UTC (rev 914)
@@ -11,7 +11,9 @@
     <li>Alex</li>
     <li>Alexandros</li>
     <li>Alf</li>
+    <li>alfred69</li>
     <li>Andreas</li>
+    <li>Andy</li>
     <li>Ant</li>
     <li>AQZ</li>
     <li>Archcorenth</li>
@@ -19,8 +21,10 @@
     <li>AsuCaga</li>
     <li>Bent</li>
     <li>biotopa</li>
+    <li>B-man</li>
     <li>bojster</li>
     <li>Breezy</li>
+    <li>brynn</li>
     <li>Chocolate Zero</li>
     <li>Chris</li>
     <li>Craven</li>
@@ -39,6 +43,7 @@
     <li>fabian</li>
     <li>ged</li>
     <li>Ghatotkacha</li>
+    <li>Gorn</li>
     <li>Gottseinsohn</li>
     <li>Great Scott</li>
     <li>Guglielmo</li>
@@ -51,6 +56,7 @@
     <li>IChrisI</li>
     <li>Ingo</li>
     <li>Ingo_K</li>
+    <li>IntKecsk</li>
     <li>J3FF</li>
     <li>Jeffrey S</li>
     <li>Johannes</li>
@@ -73,6 +79,7 @@
     <li>Melanie</li>
     <li>mhatta</li>
     <li>Michael</li>
+    <li>MicWa</li>
     <li>Miel56</li>
     <li>Momcat</li>
     <li>Moneymaker</li>



From andreasl at mail.berlios.de  Thu Nov  1 23:26:50 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Thu, 1 Nov 2007 23:26:50 +0100
Subject: [Enigma-game-svn] r915 - in homepage: images/lotm input/lotm
	input/news
Message-ID: <200711012226.lA1MQoEB002656@sheep.berlios.de>

Author: andreasl
Date: 2007-11-01 23:26:31 +0100 (Thu, 01 Nov 2007)
New Revision: 915

Added:
   homepage/images/lotm/lotm_200711.png
   homepage/images/lotm/lotm_200711_a.png
   homepage/images/lotm/lotm_200711_b.png
   homepage/images/lotm/lotm_200711_c.png
   homepage/images/lotm/lotm_200711_d.png
   homepage/input/lotm/lotm_200711.html
Modified:
   homepage/images/lotm/lotm-history.png
   homepage/input/lotm/lotm_200709_de.html
   homepage/input/lotm/lotm_200710_de.html
   homepage/input/lotm/lotm_archive_data.lua
   homepage/input/news/news_issue24_de.html
Log:
Homepage/LotM:
 - LotM November 2007 (English)
 - some typos and umlauts
Todo:
 - English proofread
 - German, Russian and Spanish translations


Modified: homepage/images/lotm/lotm-history.png
===================================================================
(Binary files differ)

Added: homepage/images/lotm/lotm_200711.png
===================================================================
(Binary files differ)


Property changes on: homepage/images/lotm/lotm_200711.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: homepage/images/lotm/lotm_200711_a.png
===================================================================
(Binary files differ)


Property changes on: homepage/images/lotm/lotm_200711_a.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: homepage/images/lotm/lotm_200711_b.png
===================================================================
(Binary files differ)


Property changes on: homepage/images/lotm/lotm_200711_b.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: homepage/images/lotm/lotm_200711_c.png
===================================================================
(Binary files differ)


Property changes on: homepage/images/lotm/lotm_200711_c.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: homepage/images/lotm/lotm_200711_d.png
===================================================================
(Binary files differ)


Property changes on: homepage/images/lotm/lotm_200711_d.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: homepage/input/lotm/lotm_200709_de.html
===================================================================
--- homepage/input/lotm/lotm_200709_de.html	2007-11-01 16:11:38 UTC (rev 914)
+++ homepage/input/lotm/lotm_200709_de.html	2007-11-01 22:26:31 UTC (rev 915)
@@ -286,6 +286,6 @@
   und den wunderbaren Level, den Ihr mit uns geteilt habt!</p>
 
   <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
-  <i>Harry and Andreas</i></p>
+  <i>Harry und Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200710_de.html
===================================================================
--- homepage/input/lotm/lotm_200710_de.html	2007-11-01 16:11:38 UTC (rev 914)
+++ homepage/input/lotm/lotm_200710_de.html	2007-11-01 22:26:31 UTC (rev 915)
@@ -6,7 +6,7 @@
 &quot;Quadropolis&quot;, Combined Effort Level I
 </h3>
 
-<h4>von Johannes Laire, Jacob Scott, Raoul Bourquin and Andreas Lochmann</h4>
+<h4>von Johannes Laire, Jacob Scott, Raoul Bourquin und Andreas Lochmann</h4>
 
 <p>Im Oktober f&uuml;hrt unsere monatliche LdM-Exkursion zu den herausragenden
 Sehensw&uuml;rdigkeiten von Enigma nach Quadropolis. Schon der Klang dieses
@@ -284,7 +284,7 @@
 Levels&quot;</h4>
 
 <div class="quote">
-Der Grundgedanke f&uuml;r meinen Raum entwickelte sich lange for illminds Aufruf
+Der Grundgedanke f&uuml;r meinen Raum entwickelte sich lange vor illminds Aufruf
 zum CEL I. Wie so oft, entwickeln sich Dinge auf recht unerwarteten Wegen: In
 diesem Fall denke ich, war es meine Arbeit an Enigmas Referenzhandbuch im Juni
 '06. Als ich Informationen &uuml;ber Enigmas einzigartige Spielobjekte gesammelt
@@ -385,7 +385,8 @@
 
 <div class="lotmpic">
 <img src="$$imagedir$$/lotm/lotm_200710_c.png" alt="Level of the month" border="0">
-<div class="imagetitle">Patterns Reloaded?</div>
+<div class="imagetitle">Patterns Reloaded? Ich hole lieber<br>schnell mein Buch
+'H&ouml;here Mathematik'!</div>
 </div>
 
 <p>Beim Betreten des wei&szlig;en Startfeldes &ouml;ffnet sich der Vortex am

Added: homepage/input/lotm/lotm_200711.html
===================================================================
--- homepage/input/lotm/lotm_200711.html	2007-11-01 16:11:38 UTC (rev 914)
+++ homepage/input/lotm/lotm_200711.html	2007-11-01 22:26:31 UTC (rev 915)
@@ -0,0 +1,319 @@
+<div class="lotm">
+$$lotm_header$$
+
+<h3 class="lotm">
+<span class="date">November 2007: </span>
+&quot;Big Adventures&quot;, by Jon 'WB' Sneyers
+</h3>
+
+<p>&quot;Greetings, adventurer! The road ahead is long and dangerous, so be
+careful!&quot; Jon left us a short, accurate welcome message at the beginning of
+his epic level. He encourages us to try and solve all the little riddle-pearls
+he lined up in this jewel from Enigma 0.92. And in the milky luster of each of
+these little polished pearls, the reminiscence of yet another vintage level
+flashes, or the vision of a level to come, each in a new and elegant way,
+briefly capturing the beauty of their myriad puzzles, in much the same way a
+haiku captures the entirety of a moment in just three lines ... let's pause for
+this moment and amble through the Level of the Month November 2007, &quot;Big
+Adventures&quot;!</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_d.png" alt="Level of the month" border="0">
+<div class="imagetitle">Enigma IV # 100 - Big Adventures</div>
+</div>
+
+<table cellpadding="0" cellspacing="1" class="statistics">
+<caption class="normalcaption">Some records of September 2007</caption>
+<colgroup>
+   <col width="80">
+   <col width="160">
+</colgroup>
+    <tr><td class="num">6:39</td>
+        <td class="left">Stupid</td></tr>
+    <tr><td class="num">6:45</td>
+        <td class="left">Moneymaker</td></tr>
+    <tr><td class="num">7:58</td>
+        <td class="left">Django</td></tr>
+    <tr><td class="num">8:49</td>
+        <td class="left">Great Scott</td></tr>
+    <tr><td class="num">10:10</td>
+        <td class="left">Craven</td></tr>
+    <tr><td class="num">10:13</td>
+        <td class="left">Safalra</td></tr>
+    <tr><td class="num">10:28</td>
+        <td class="left">ryujun</td></tr>
+    <tr><td class="num">10:43</td>
+        <td class="left">Johannes</td></tr>
+    <tr><td class="num">10:44</td>
+        <td class="left">Lukas</td></tr>
+    <tr><td class="num">10:56</td>
+        <td class="left">fabian</td></tr>
+    <tr><td class="num">10:58</td>
+        <td class="left">Ronald</td></tr>
+    <tr><td class="num">11:32</td>
+        <td class="left">Vlad</td></tr>
+    <tr><td class="num">11:33</td>
+        <td class="left">daydreamer</td></tr>
+    <tr><td class="num">11:51</td>
+        <td class="left">bojster</td></tr>
+    <tr><td class="num">12:16</td>
+        <td class="left">Ghatotkacha</td></tr>
+    <tr><td class="num">12:59</td>
+        <td class="left">erich</td></tr>
+    <tr><td class="num">13:03</td>
+        <td class="left">hdwow</td></tr>
+    <tr><td class="num">13:54</td>
+        <td class="left">Taztunes</td></tr>
+    <tr><td class="num">14:08</td>
+        <td class="left">Marc-Hendrik</td></tr>
+    <tr><td class="num">14:17</td>
+        <td class="left">Tobias</td></tr>
+    <tr><td class="num">14:31</td>
+        <td class="left">shoki</td></tr>
+    <tr><td class="num">14:49</td>
+        <td class="left">ABS</td></tr>
+    <tr><td class="num">16:10</td>
+        <td class="left">biotopa</td></tr>
+    <tr><td class="num">16:31</td>
+        <td class="left">NorthForty</td></tr>
+    <tr><td class="num">17:44</td>
+        <td class="left">JuSt+Vinksu</td></tr>
+    <tr><td class="num">18:21</td>
+        <td class="left">Mark P.</td></tr>
+    <tr><td class="num">18:24</td>
+        <td class="left">Melanie</td></tr>
+    <tr><td class="num">18:44</td>
+        <td class="left">Little_Mole</td></tr>
+    <tr><td class="num">19:02</td>
+        <td class="left">redsantz</td></tr>
+    <tr><td class="num">19:26</td>
+        <td class="left">mhatta</td></tr>
+    <tr><td class="num">21:58</td>
+        <td class="left">WP319</td></tr>
+    <tr><td class="num">23:07</td>
+        <td class="left">Alex</td></tr>
+    <tr><td class="num">23:25</td>
+        <td class="left">Valkyrie2</td></tr>
+    <tr><td class="num">26:22</td>
+        <td class="left">Ale</td></tr>
+    <tr><td class="num">28:44</td>
+        <td class="left">U-Punkt</td></tr>
+    <tr><td class="num">30:14</td>
+        <td class="left">HuB34</td></tr>
+    <tr><td class="num">31:36</td>
+        <td class="left">para_doks</td></tr>
+    <tr><td class="num">33:31</td>
+        <td class="left">Tarim</td></tr>
+    <tr><td class="num">48:08</td>
+        <td class="left">Sim_Ed</td></tr>    
+</table>
+
+<p>Not much has changed in the ratings of the previous LotMs:
+&quot;Quadropolis&quot; collected three more ratings, and lost its advance.
+Now, &quot;Quadropolis&quot; and &quot;Island Labyrinth&quot; are neck and
+neck, two months before the final &quot;Level of the Year&quot; announcement!
+&quot;Big Adventures&quot; enters the competition at place 8, and will surely
+keep its deserved position among the top ten levels in Enigma for many more
+LotMs to come. As always, you can find more details about the ratings
+on the <a href="$$lotm$$">LotM archive page</a>.</p>
+
+<h4>&quot;'Big Adventures' is a much more easy and pleasant level to
+play&quot;</h4>
+
+<p>Jon's classic level leads us straight back to the roots of Enigma and
+even the great Oxyd series itself. It is the second epic level only after
+&quot;Labyrinth of Puzzles&quot; and offers us a perspective: Already the initial
+scene presents us one of the most used patterns in Enigma: Three woods in a row.
+We know this combination by heart, and how to solve it, and a smile rushs over
+my face when I read the occassional question on mag-heut, how to tackle
+&quot;Jam&quot; from Oxyd Magnum. When I first encountered &quot;Big
+Adventures&quot;, the same smile ran over my face and I pushed the three blocks
+in an almost absent mood - just to notice that, this time, there would be more:
+I forgot the water. And now I had one wood too less to bridge it. After all
+these years, Jon was able to show me yet another twist on this old pattern. And
+I suddenly embosomed this level &hellip;</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_c.png" alt="Level of the month" border="0">
+<div class="imagetitle">Why is everybody pointing at me?</div>
+</div>
+
+<div class="quote">
+To be able to write a comment about 'Big Adventures' first I had to retry
+solving it and, while doing so, to succeed in being even faster than the last
+time. Countless unsuccessful attempts later I finally set up a new personal
+record: 8:57. But considering the world record of Stupid my record seems to be
+pretty slow.
+</div>
+
+<div class="quote">
+'Big Adventures' is a much more easy and pleasant level to play compared to the
+other LotMs. No actors are chasing after the marble, and speed doesn't matter.
+This level is mainly about moving blocks. It consists of many small puzzles
+bearing resemblance to Sokobans. In some of the rooms it was fun to clear the
+path to the oxyds, in others it's been hard work. Above all I remember that
+space puzzle. But when this work is done you're rewarded well. The rooms that
+follow are my absolute favorite ones in 'Big Adventures'.
+</div>
+
+<div class="quote">
+I would say that Jon's 'Little Puzzles' is a simplified version of 'Big
+Adventures'. Over there at 'LP' you'll have to cover the course several times
+before succeeding. Here at 'BA' there's no turning back once you've made a
+mistake. Love's Labor Lost: You'll have to restart all over again.
+</div>
+<div class="author">Jenny (Spioni)</div>
+
+<p>The oneway maze &hellip; it somehow feels familiar. No, I don't mean familiar
+from the tutorial level &quot;Timers&quot; where I used oneways to demonstrate
+the use of timer stones. One would think that there are more such labyrinths in
+the varied levels of Enigma, but I did not find them. On the search through my
+memories I finally found another wonderful game series, outside of the marble's
+world, the Robot series which utilized oneways in a similar way. Another memory
+of my childhood &hellip; Today, we find a oneway maze of a just slightly
+different kind in Jacob's &quot;Pleasure Garden&quot;. And of course in
+&quot;Little Puzzles&quot;, which is connected to &quot;Big Adventures&quot; in
+much more than a single shared puzzle. I'm still searching for
+the remaining occurences, and will be thankful for any hint.</p>
+
+<h4>&quot;I really did enjoy the 'Big Adventures'&quot;</h4>
+
+<p>The reverberation of &quot;Civil Engineer&quot; &hellip; a fairly simplified
+version, I have to admit. Yet, not simplified to the point of triviality for
+sure. What follows is a short recall of all those jumping levels in Enigma,
+having a tradition that dates back to &quot;J.U.M.P.&quot; and
+&quot;Jump!&quot;, which came to Enigma with version 0.70. A flash of thought -
+&quot;Balance&quot; - for a short stopover. &quot;Balance&quot; was a part of
+Enigma since the very beginnings in 0.39, and paused as a test level for a long
+time, until we reactivated it for 1.00 to complete the balancing decade in
+level pack I. Here, in &quot;Big Adventures&quot; such a balance act leads us
+to the next puzzle, a wonderful metaphor on &quot;Reach the Dock&quot;.
+An intermezzo follows, Jon keeps on encouraging us to follow his
+path &hellip;</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_b.png" alt="Level of the month" border="0">
+<div class="imagetitle">Flying ...</div>
+</div>
+
+<div class="quote">
+'Big Adventures' is quite an interesting level, mainly because of its 'split
+screen' design. Right from the start you can see what it's all about: opening
+lotsa doors. In the course of events now and then you're allowed to have a look
+at coming tasks. That's a good shot of motivation to keep you on track, so even
+the strictly linear construct of the level doesn't bother me.
+</div>
+
+<div class="quote">
+Demands on your brains are not made too high, and most of the times it's just
+moving blocks. But as a whole together with some minor dexterity interludes 'Big
+Adventures' is a nice mix. It might have a favorable effect on gameplay to have
+a weakness for Sokobans. That's right up my street, so I really did enjoy the
+'Big Adventures'.
+</div>
+
+<div class="quote">
+The only thing I don't like about this level is the matter of fact that it's not
+Me holding the world record. I hope to better this fault some time. ;-)
+</div>
+<div class="author">Andreas Geldmacher</div>
+
+<p>To what I want to repeat Jenny's words: &quot;Speed doesn't matter&quot;,
+particularly when only 6 seconds are missing. :-)</p>
+
+<p>On our way through this necklet of level pack IV, a space tube and some
+dense, seemingly impenetrable packing of woods and bombs, leads us to a big
+swamp. Do you remember? Swamp and a rotor were the first objects that blocked
+your way in Oxyd 1, and still today, swampy areas present obstacles to us, in
+&quot;Big Swamp&quot; and even in &quot;The Aztec Temple&quot;. &quot;Big
+Adventures&quot; would just not be complete without it.</p>
+
+<h4>&quot;I wanted to make some longer and more relaxed puzzle levels&quot;</h4>
+
+<p>A labyrinth of impulse stones anticipated and maybe even inspired illmind
+and Raoul to write &quot;Bump Ahead&quot; and &quot;Don't Touch&quot;, and we
+also think of &quot;Slinky Mayhem&quot;. We know that we already surpassed the
+midpoint on our way back, seeing all the solved levels once again, as we roll
+through the sand and break the stones that delimit our way. This way somehow
+gives us the sudden inspiration of a race track, a level in the far future of
+Enigma &hellip; only to find a vision of &quot;The Disappearing Block&quot; at
+the end of a zig zag course. This vision pulls us from Enigma's future back into
+its past, far back to the beginnings of Jacob Scott's carier, and his second
+level for Enigma. Seeing the oneway maze in the upper left corner of the next
+room, we know that we'll soon have to finish this level. But before this, let us
+listen to Jon Sneyers, who conceived this journey for us:</p>
+
+<div class="quote">
+You can find information about me on my <a href="http://www.cs.kuleuven.be/~jon"
+>site</a>. In summary, I'm a 26-year old computer science PhD student from
+Leuven, Belgium, interested in Free Software (running GNU/Linux for a decade
+now), left-wing politics, and music.
+</div>
+
+<div class="quote">
+If I recall correctly, I discovered Enigma by systematically searching for Free
+(as in GPL) games for GNU/Linux in an attempt to demonstrate to my friends (and
+myself) that they actually exist ;) and that they can be nicely polished, too.
+That must have been somewhere in 2002. At that time I was still studying
+(computer science) so I had plenty of time :). After trying most of the levels
+that existed at that point, I started to make some levels for my girlfriend,
+Tina. That explains the shape of &quot;Lotsa Triggers&quot; and the upper right
+corner of &quot;Little Puzzles&quot; :). Luckily, at some point I submitted
+those levels for inclusion in the next release; otherwise they would have been
+lost since some months afterwards my hard disk crashed and I used to think back
+then that backups were something of the past and hard disks didn't crash anymore
+nowadays :/.
+</div>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_a.png" alt="Level of the month" border="0">
+<div class="imagetitle">Oops!</div>
+</div>
+
+<div class="quote">
+Anyway, after some dexterity levels like &quot;Spiral Race&quot; and the two
+Skyscrapers, I wanted to make some longer and more relaxed puzzle levels. I
+first made some yin-yang levels (&quot;Bridge Builders&quot;, &quot;Block its
+way!&quot;) because I really like the concept of alternating between two marbles
+and letting them cooperate.  Then I made &quot;Little Puzzles&quot;, which still
+uses yin-yang but only in a superficial way (the white marble is isolated from
+the black one and has only half a screen and one small puzzle). This level was
+designed around the first room: I wanted to make a level in which you have to
+return a few times to the first screen, at each iteration getting a bit closer
+to pushing that block on that lever. The little block-water puzzles were added
+as garniture.
+</div>
+
+<div class="quote">
+Both for the player and for the level-designer, &quot;Little Puzzles&quot; was a
+preparation for &quot;Big Adventures&quot;. Big Adventures is an epic and linear
+level in which the adventurer has to solve many puzzles of different kinds to
+open all the doors to the last room. The level is linear, but curled up in a
+kind of spiral so the final room is visible from the start room and you
+constantly get previews of later rooms, or later on, flashbacks to places you've
+already been in. The level was not designed to be particularily difficult or
+evil, and while it sometimes requires some dexterity (e.g. jumping), it allows
+you to use spare lifes and walk past already solved puzzles. Its main difficulty
+lies in its size: 9 screens with at least two puzzles or obstacles on every
+screen.
+</div>
+<div class="author">Jon 'WB' Sneyers</div>
+
+<p>Passing the two final water-puzzles, we end where we started ten minutes
+ago, and see ahead of us another variation over a venerable type of puzzle, a
+Sokoban. We open the final doors, and pass through the same doors we opened
+throughout all the puzzles we encountered. We reach the final oxyd room, itself
+being a portrait, a portrait of the sister level &quot;Little Puzzles&quot; by
+Jon himself. And we close not only the obvious spiral this level folds into
+itself, but we close the circle which connects it to &quot;Little Puzzles&quot;
+as well. After solving &quot;Big Adventures&quot; we end up in the level menu
+for level pack IV, and understand, that this level finally closes the pack even
+thematically, because the pack featured spirals not only in a decade, but
+throughout the whole. Thanks to this, and on the edge to pack V, this level
+bridges the ark between Enigma's past and future in yet another way &hellip;
+Jon, many, many thanks for giving this big adventure to us!</p>
+
+<p>Greets,<br/>
+<i>Andreas and Harry</i></p>
+
+</div>

Modified: homepage/input/lotm/lotm_archive_data.lua
===================================================================
--- homepage/input/lotm/lotm_archive_data.lua	2007-11-01 16:11:38 UTC (rev 914)
+++ homepage/input/lotm/lotm_archive_data.lua	2007-11-01 22:26:31 UTC (rev 915)
@@ -76,21 +76,31 @@
   position_num   = "6079"
 }
 
+lotm_archive_data[9] = {
+  date           = { month = 11, year = 2007 },
+  chronological  = 9,
+  name           = "Big Adventures",
+  author         = "Jon 'WB' Sneyers",
+  position       = "IV/100",
+  position_num   = "4100"
+}
+
 -- LotM variable data
 -- format: Level Title, current_rating, current_votes, additional text
 
 lotm_rating(    "Island Labyrinth",  9.25,   8,  "(1 up)")
-lotm_rating(  "Pneumatic Delivery",  7.58,  12,  "")
-lotm_rating(    "The Aztec Temple",  9.14,   7,  "(1 down)")
-lotm_rating("Labyrinth of Puzzles",  8.92,  13,  "(1 up)")
-lotm_rating(           "Elaborate",  8.50,   8,  "")
-lotm_rating(             "Houdini",  8.86,  10,  "(1 down)")
-lotm_rating(           "Tool Time",  8.43,  14,  "")
-lotm_rating(         "Quadropolis",  9.40,   5,  "<b>(newcomer)</b>")
+lotm_rating(  "Pneumatic Delivery",  7.77,  13,  "")
+lotm_rating(    "The Aztec Temple",  9.13,   8,  "")
+lotm_rating("Labyrinth of Puzzles",  8.92,  13,  "")
+lotm_rating(           "Elaborate",  8.63,   8,  "")
+lotm_rating(             "Houdini",  8.86,  10,  "")
+lotm_rating(           "Tool Time",  8.50,  16,  "")
+lotm_rating(         "Quadropolis",  9.25,   8,  "")
+lotm_rating(      "Big Adventures",  8.40,  15,  "<b>(newcomer)</b>")
 
 -- Don't forget to adjust the archive dates:
 
-lotm_archive_data_from = { month = 8, year = 2007 }
+lotm_archive_data_from = { month = 9, year = 2007 }
 
 lotm_current = lotm_archive_data[table.getn(lotm_archive_data)]
 

Modified: homepage/input/news/news_issue24_de.html
===================================================================
--- homepage/input/news/news_issue24_de.html	2007-11-01 16:11:38 UTC (rev 914)
+++ homepage/input/news/news_issue24_de.html	2007-11-01 22:26:31 UTC (rev 915)
@@ -3,5 +3,5 @@
     Linux
 </h3>
 
-<p>Ein Installationspaket f?r Slackware ist verf&uuml;gbar auf unserer <a
+<p>Ein Installationspaket f&uuml;r Slackware ist verf&uuml;gbar auf unserer <a
 href="$$download$$#stable">Downloadseite</a>.</p>



From andreasl at mail.berlios.de  Sat Nov  3 01:13:22 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Sat, 3 Nov 2007 01:13:22 +0100
Subject: [Enigma-game-svn] r916 - homepage/input/lotm
Message-ID: <200711030013.lA30DMXc030556@sheep.berlios.de>

Author: andreasl
Date: 2007-11-03 01:13:21 +0100 (Sat, 03 Nov 2007)
New Revision: 916

Added:
   homepage/input/lotm/lotm_200711_de.html
Modified:
   homepage/input/lotm/lotm_200711.html
Log:
LotM:
 - German LotM 11/2007
 - Clifford's proofread of English LotM 11/2007
Todo:
 - German proofread
 - Russian version
 - Validation


Modified: homepage/input/lotm/lotm_200711.html
===================================================================
--- homepage/input/lotm/lotm_200711.html	2007-11-01 22:26:31 UTC (rev 915)
+++ homepage/input/lotm/lotm_200711.html	2007-11-03 00:13:21 UTC (rev 916)
@@ -128,10 +128,10 @@
 my face when I read the occassional question on mag-heut, how to tackle
 &quot;Jam&quot; from Oxyd Magnum. When I first encountered &quot;Big
 Adventures&quot;, the same smile ran over my face and I pushed the three blocks
-in an almost absent mood - just to notice that, this time, there would be more:
-I forgot the water. And now I had one wood too less to bridge it. After all
+in an almost absent mood - only to notice that, this time, there would be more:
+I forgot the water. And now I had one wood too few to bridge it. After all
 these years, Jon was able to show me yet another twist on this old pattern. And
-I suddenly embosomed this level &hellip;</p>
+I suddenly embraced this level &hellip;</p>
 
 <div class="lotmpic">
 <img src="$$imagedir$$/lotm/lotm_200711_c.png" alt="Level of the month" border="0">
@@ -141,7 +141,7 @@
 <div class="quote">
 To be able to write a comment about 'Big Adventures' first I had to retry
 solving it and, while doing so, to succeed in being even faster than the last
-time. Countless unsuccessful attempts later I finally set up a new personal
+time. Countless unsuccessful attempts later I finally set a new personal
 record: 8:57. But considering the world record of Stupid my record seems to be
 pretty slow.
 </div>
@@ -167,20 +167,21 @@
 <p>The oneway maze &hellip; it somehow feels familiar. No, I don't mean familiar
 from the tutorial level &quot;Timers&quot; where I used oneways to demonstrate
 the use of timer stones. One would think that there are more such labyrinths in
-the varied levels of Enigma, but I did not find them. On the search through my
+the various levels of Enigma, but I did not find them. On the search through my
 memories I finally found another wonderful game series, outside of the marble's
 world, the Robot series which utilized oneways in a similar way. Another memory
-of my childhood &hellip; Today, we find a oneway maze of a just slightly
+of my childhood &hellip; Today, we find a oneway maze of a slightly
 different kind in Jacob's &quot;Pleasure Garden&quot;. And of course in
 &quot;Little Puzzles&quot;, which is connected to &quot;Big Adventures&quot; in
 much more than a single shared puzzle. I'm still searching for
-the remaining occurences, and will be thankful for any hint.</p>
+the remaining occurrences, and will be thankful for any hint. (Addendum: There is
+one more in Esprit 91; thanks, Clifford.)</p> 
 
 <h4>&quot;I really did enjoy the 'Big Adventures'&quot;</h4>
 
 <p>The reverberation of &quot;Civil Engineer&quot; &hellip; a fairly simplified
 version, I have to admit. Yet, not simplified to the point of triviality for
-sure. What follows is a short recall of all those jumping levels in Enigma,
+sure. What follows is a short recollection of all those jumping levels in Enigma,
 having a tradition that dates back to &quot;J.U.M.P.&quot; and
 &quot;Jump!&quot;, which came to Enigma with version 0.70. A flash of thought -
 &quot;Balance&quot; - for a short stopover. &quot;Balance&quot; was a part of
@@ -193,7 +194,7 @@
 
 <div class="lotmpic">
 <img src="$$imagedir$$/lotm/lotm_200711_b.png" alt="Level of the month" border="0">
-<div class="imagetitle">Flying ...</div>
+<div class="imagetitle">Flying &hellip;</div>
 </div>
 
 <div class="quote">
@@ -206,10 +207,10 @@
 
 <div class="quote">
 Demands on your brains are not made too high, and most of the times it's just
-moving blocks. But as a whole together with some minor dexterity interludes 'Big
-Adventures' is a nice mix. It might have a favorable effect on gameplay to have
-a weakness for Sokobans. That's right up my street, so I really did enjoy the
-'Big Adventures'.
+moving blocks. But as a whole together with some minor dexterity interludes,
+'Big Adventures' is a nice mix. It might have a favorable effect on gameplay to
+have a weakness for Sokobans. That's right up my street, so I really did enjoy
+the 'Big Adventures'.
 </div>
 
 <div class="quote">
@@ -218,11 +219,11 @@
 </div>
 <div class="author">Andreas Geldmacher</div>
 
-<p>To what I want to repeat Jenny's words: &quot;Speed doesn't matter&quot;,
+<p>To which I want to repeat Jenny's words: &quot;Speed doesn't matter&quot;,
 particularly when only 6 seconds are missing. :-)</p>
 
-<p>On our way through this necklet of level pack IV, a space tube and some
-dense, seemingly impenetrable packing of woods and bombs, leads us to a big
+<p>On our way through this necklace of level pack IV, a space tube and some
+dense, seemingly impenetrable packing of woods and bombs, lead us to a big
 swamp. Do you remember? Swamp and a rotor were the first objects that blocked
 your way in Oxyd 1, and still today, swampy areas present obstacles to us, in
 &quot;Big Swamp&quot; and even in &quot;The Aztec Temple&quot;. &quot;Big
@@ -233,12 +234,12 @@
 <p>A labyrinth of impulse stones anticipated and maybe even inspired illmind
 and Raoul to write &quot;Bump Ahead&quot; and &quot;Don't Touch&quot;, and we
 also think of &quot;Slinky Mayhem&quot;. We know that we already surpassed the
-midpoint on our way back, seeing all the solved levels once again, as we roll
-through the sand and break the stones that delimit our way. This way somehow
-gives us the sudden inspiration of a race track, a level in the far future of
-Enigma &hellip; only to find a vision of &quot;The Disappearing Block&quot; at
+midpoint on our way back, seeing all the solved puzzles once again, as we roll
+through the sand and break the stones that borders our way. This way somehow
+reminds us of a race track, a level in the far future of Enigma &hellip; only
+to encounter a vision of &quot;The Disappearing Block&quot; at 
 the end of a zig zag course. This vision pulls us from Enigma's future back into
-its past, far back to the beginnings of Jacob Scott's carier, and his second
+its past, far back to the beginnings of Jacob Scott's career, and his second
 level for Enigma. Seeing the oneway maze in the upper left corner of the next
 room, we know that we'll soon have to finish this level. But before this, let us
 listen to Jon Sneyers, who conceived this journey for us:</p>
@@ -281,7 +282,7 @@
 designed around the first room: I wanted to make a level in which you have to
 return a few times to the first screen, at each iteration getting a bit closer
 to pushing that block on that lever. The little block-water puzzles were added
-as garniture.
+as garnish.
 </div>
 
 <div class="quote">
@@ -293,7 +294,7 @@
 constantly get previews of later rooms, or later on, flashbacks to places you've
 already been in. The level was not designed to be particularily difficult or
 evil, and while it sometimes requires some dexterity (e.g. jumping), it allows
-you to use spare lifes and walk past already solved puzzles. Its main difficulty
+you to use spare lives and walk past already solved puzzles. Its main difficulty
 lies in its size: 9 screens with at least two puzzles or obstacles on every
 screen.
 </div>
@@ -305,13 +306,14 @@
 throughout all the puzzles we encountered. We reach the final oxyd room, itself
 being a portrait, a portrait of the sister level &quot;Little Puzzles&quot; by
 Jon himself. And we close not only the obvious spiral this level folds into
-itself, but we close the circle which connects it to &quot;Little Puzzles&quot;
+itself, or the self-references that connect the doors with the puzzles of this
+level, but we close the circle which connects it to &quot;Little Puzzles&quot;
 as well. After solving &quot;Big Adventures&quot; we end up in the level menu
 for level pack IV, and understand, that this level finally closes the pack even
 thematically, because the pack featured spirals not only in a decade, but
 throughout the whole. Thanks to this, and on the edge to pack V, this level
-bridges the ark between Enigma's past and future in yet another way &hellip;
-Jon, many, many thanks for giving this big adventure to us!</p>
+bridges the gap between Enigma's past and future in yet another way &hellip;
+Jon, many, many thanks for giving this Big Adventure to us!</p>
 
 <p>Greets,<br/>
 <i>Andreas and Harry</i></p>

Added: homepage/input/lotm/lotm_200711_de.html
===================================================================
--- homepage/input/lotm/lotm_200711_de.html	2007-11-01 22:26:31 UTC (rev 915)
+++ homepage/input/lotm/lotm_200711_de.html	2007-11-03 00:13:21 UTC (rev 916)
@@ -0,0 +1,362 @@
+<div class="lotm">
+$$lotm_header$$
+
+<h3 class="lotm">
+<span class="date">November 2007: </span>
+&quot;Big Adventures&quot;, von Jon 'WB' Sneyers
+</h3>
+
+<p>&quot;Willkommen, Abenteurer! Der Weg ist lang und gef&auml;hrlich, sei
+vorsichtig!&quot; Jon hat uns eine kurze, akkurate Willkommensnachricht
+am Anfang seines epischen Levels hinterlassen. Er ermutigt uns darin, all die
+kleinen R&auml;tsel-Perlen auszuprobieren und zu l&ouml;sen, die er in diesem Juwel von
+Enigma 0.92 aufgereiht hat. Und im milchigen Glanz jeder einzelnen dieser
+kleinen, polierten Perlen, spiegeln sich die Erinnerungen an klassische Level
+wieder, oder Visionen von Leveln, die noch kommen, jede auf eine neue und
+elegante Weise, die die Sch&ouml;nheit ihrer vielf&auml;ltigen Puzzles einf&auml;gt, so wie
+ein Haiku die Gesamtheit eines Momentes in nur drei Zeilen einzufangen vermag
+... lasst uns f&uuml;r diesen Moment innehalten und durch den Level des Monats
+November 2007 schlendern, durch &quot;Big Adventures&quot;!</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_d.png" alt="Level des Monats" border="0">
+<div class="imagetitle">Enigma IV # 100 - Big Adventures</div>
+</div>
+
+<table cellpadding="0" cellspacing="1" class="statistics">
+<caption class="normalcaption">Einige Rekorde vom September 2007</caption>
+<colgroup>
+   <col width="80">
+   <col width="160">
+</colgroup>
+    <tr><td class="num">6:39</td>
+        <td class="left">Stupid</td></tr>
+    <tr><td class="num">6:45</td>
+        <td class="left">Moneymaker</td></tr>
+    <tr><td class="num">7:58</td>
+        <td class="left">Django</td></tr>
+    <tr><td class="num">8:49</td>
+        <td class="left">Great Scott</td></tr>
+    <tr><td class="num">10:10</td>
+        <td class="left">Craven</td></tr>
+    <tr><td class="num">10:13</td>
+        <td class="left">Safalra</td></tr>
+    <tr><td class="num">10:28</td>
+        <td class="left">ryujun</td></tr>
+    <tr><td class="num">10:43</td>
+        <td class="left">Johannes</td></tr>
+    <tr><td class="num">10:44</td>
+        <td class="left">Lukas</td></tr>
+    <tr><td class="num">10:56</td>
+        <td class="left">fabian</td></tr>
+    <tr><td class="num">10:58</td>
+        <td class="left">Ronald</td></tr>
+    <tr><td class="num">11:32</td>
+        <td class="left">Vlad</td></tr>
+    <tr><td class="num">11:33</td>
+        <td class="left">daydreamer</td></tr>
+    <tr><td class="num">11:51</td>
+        <td class="left">bojster</td></tr>
+    <tr><td class="num">12:16</td>
+        <td class="left">Ghatotkacha</td></tr>
+    <tr><td class="num">12:59</td>
+        <td class="left">erich</td></tr>
+    <tr><td class="num">13:03</td>
+        <td class="left">hdwow</td></tr>
+    <tr><td class="num">13:54</td>
+        <td class="left">Taztunes</td></tr>
+    <tr><td class="num">14:08</td>
+        <td class="left">Marc-Hendrik</td></tr>
+    <tr><td class="num">14:17</td>
+        <td class="left">Tobias</td></tr>
+    <tr><td class="num">14:31</td>
+        <td class="left">shoki</td></tr>
+    <tr><td class="num">14:49</td>
+        <td class="left">ABS</td></tr>
+    <tr><td class="num">16:10</td>
+        <td class="left">biotopa</td></tr>
+    <tr><td class="num">16:31</td>
+        <td class="left">NorthForty</td></tr>
+    <tr><td class="num">17:44</td>
+        <td class="left">JuSt+Vinksu</td></tr>
+    <tr><td class="num">18:21</td>
+        <td class="left">Mark P.</td></tr>
+    <tr><td class="num">18:24</td>
+        <td class="left">Melanie</td></tr>
+    <tr><td class="num">18:44</td>
+        <td class="left">Little_Mole</td></tr>
+    <tr><td class="num">19:02</td>
+        <td class="left">redsantz</td></tr>
+    <tr><td class="num">19:26</td>
+        <td class="left">mhatta</td></tr>
+    <tr><td class="num">21:58</td>
+        <td class="left">WP319</td></tr>
+    <tr><td class="num">23:07</td>
+        <td class="left">Alex</td></tr>
+    <tr><td class="num">23:25</td>
+        <td class="left">Valkyrie2</td></tr>
+    <tr><td class="num">26:22</td>
+        <td class="left">Ale</td></tr>
+    <tr><td class="num">28:44</td>
+        <td class="left">U-Punkt</td></tr>
+    <tr><td class="num">30:14</td>
+        <td class="left">HuB34</td></tr>
+    <tr><td class="num">31:36</td>
+        <td class="left">para_doks</td></tr>
+    <tr><td class="num">33:31</td>
+        <td class="left">Tarim</td></tr>
+    <tr><td class="num">48:08</td>
+        <td class="left">Sim_Ed</td></tr>    
+</table>
+
+<p>Nicht viel hat sich in den Bewertungen der vorigen LdMs ver&auml;ndert:
+&quot;Quadropolis&quot; hat drei weitere Wertungen eingesammelt, und seinen
+Vorsprung eingeb&uuml;&szlig;t. Nun liegen &quot;Quadropolis&quot; und &quot;Island
+Labyrinth&quot; Kopf an Kopf, zwei Monate vor der abschlie&szlig;enden Verk&uuml;ndung des
+&quot;Level des Jahres&quot;! &quot;Big Adventures&quot; beginnt in der
+Rangliste auf Platz 8, und wird sicherlich seine verdiente Position unter den
+besten zehn Levels in Enigma noch f&uuml;r viele LotMs verteidigen. Wie immer,
+k&ouml;nnen Sie weitere Details &uuml;ber die Bewertungen in unserem
+<a href="$$lotm$$">LdM-Archiv</a> lesen.</p>
+
+<h4>&quot;'Big Adventures' ist viel einfacher und angenehmer zu
+spielen&quot;</h4>
+
+<p>Jons klassischer Level f&uuml;hrt uns geradewegs zur&uuml;ck zu den Wurzeln von Enigma
+und sogar der gro&szlig;artigen Oxydserie selber. Er ist der zweite epische Level
+nach &quot;Labyrinth of Puzzles&quot; und bietet uns eine Perspektive: Bereits
+die Anfangsszene pr&auml;sentiert uns eines der am h&auml;ufigsten in Enigma genutzten
+Muster: Drei Holzsteine in einer Reihe. Wir kennen diese Kombination auswendig,
+und wie man sie l&ouml;st, und ein L&auml;cheln jagt &uuml;ber mein Geischt, wenn ich auf
+mag-heut die gelegentliche Frage lese, wie man &quot;Jam&quot; aus Oxyd Magnum
+angeht. Als ich das erste Mal &quot;Big Adventures&quot; begegnet bin, lief
+dasselbe L&auml;cheln &uuml;ber mein Gesicht und ich schob die drei Bl&ouml;cke in einer fast
+abwesenden Manier - nur um kurz darauf festzustellen, dass, dieses Mal, mehr
+dahinter steckt: Ich hatte das Wasser vergessen. Und nun hatte ich einen
+Holzstein zu wenig, um es zu &uuml;berbr&uuml;cken. Nach all den Jahren konnte mir Jon
+doch noch eine neue Wendung dieses alten Musters zeigen. Und pl&ouml;tzlich schloss
+ich diesen Level in mein Herz &hellip;</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_c.png" alt="Level des Monats" border="0">
+<div class="imagetitle">Warum schauen mich alle so an?</div>
+</div>
+
+<div class="quote">
+Um einen Kommentar f&uuml;r &quot;Big Adventures&quot; schreiben zu k&ouml;nnen, habe ich
+erstmal versucht, es wieder zu l&ouml;sen, vor allem noch schneller. Nach unz&auml;hligen
+Fehlversuchen hab' ich's endlich in 8:57 Minuten geschafft. Im Gegensatz zum
+Weltrekord von Stupid aber doch sehr langsam.
+</div>
+
+<div class="quote">
+&quot;Big Adventures&quot; ist viel einfacher und angenehmer zu spielen als
+andere LdM, da keiner die Murmel verfolgt, und es ist auch keine Schnelligkeit
+gefragt. Bei diesem Level geht es haupts&auml;chlich darum, Bl&ouml;cke zu verschieben. Er
+besteht aus vielen kleinen R&auml;tseln, bei denen man sofort an Sokoban denkt. In
+manchen R&auml;umen hat es wirklich Spa&szlig; gemacht, den Weg zu den Oxyds freizumachen,
+in anderen dagegen war es echt harte Arbeit. Vor allem das Weltall-R&auml;tsel f&auml;llt
+mir dazu ein. Aber nach der ganzen Arbeit wird man schlie&szlig;lich doch belohnt,
+denn die R&auml;ume, die danach kommen, sind meine Lieblingsr&auml;ume in 'BA'.
+</div>
+
+<div class="quote">
+Ich w&uuml;rde sagen, &quot;Little Puzzles&quot; ist die vereinfachte Version von
+&quot;BA&quot; und man muss ein paar Runden laufen, um das Spiel zu beenden.
+Bei &quot;BA&quot; gibt es dagegen keinen Weg zur&uuml;ck; wenn man einen Fehler
+gebaut hat, ist die ganze Arbeit im Eimer und man muss wieder von vorn
+anfangen.
+</div>
+<div class="author">Jenny (Spioni)</div>
+
+<p>Das Einbahnstra&szlig;en-Labyrinth &hellip; es f&uuml;hlt sich so bekannt an. Nein, ich
+meine nicht bekannt vom Tutorial-Level &quot;Timers&quot;, wo ich die Benutzung
+von Timersteinen demonstriert habe. Man m&ouml;chte meinen, dass es wesentlich mehr
+solche Irrg&auml;rten in den verschiedenen Leveln Enigmas gibt, aber ich konnte sie
+nicht finden. Auf der Suche in meinen Erinnerungen fand ich schlie&szlig;lich eine
+andere wundervolle Serie von Spielen, au&szlig;erhalb der Murmel-Welt, die
+Robot-Serie, die Einbahnstra&szlig;en in einer &auml;hnlichen Weise verwendeten. Eine
+weitere Erinnerung meiner Kindheit &hellip; Heute finden wir ein
+Einbahnstra&szlig;en-Labyrinth leicht anderer Art in Jacobs &quot;Pleasure
+Garden&quot;. Und nat&uuml;rlich in &quot;Little Puzzles&quot;, welcher mit
+&quot;Big Adventures&quot; durch mehr als nur ein gemeinsames R&auml;tsel verbunden
+ist. Ich suche nach wie vor nach den verbleibenden Fundorten, and bin f&uuml;r jeden
+Hinweis dankbar. (Nachtrag: Es gibt einen weiteren in Esprit 91; vielen Dank,
+Clifford!)</p>
+
+<h4>&quot;Mir hat das gro&szlig;e Abenteuer viel Spass gemacht&quot;</h4>
+
+<p>Der Widerschein von &quot;Civil Engineer&quot; &hellip; eine recht einfache
+Version, das muss ich zugeben. Aber mit Sicherheit nicht bis zur Trivialit&auml;t
+vereinfacht. Was folgt ist eine kurze R&uuml;ckbesinnung auf all die Sprunglevels in
+Enigma, mit einer Tradition, die bis zu &quot;J.U.M.P.&quot; und
+&quot;Jump!&quot; zur&uuml;ckreicht, die in Version 0.70 zu Enigma kamen. Ein
+Gedankenblitz - &quot;Balance&quot; - f&uuml;r einen Kurzaufenthalt.
+&quot;Balance&quot; war Teil von Enigma bereits in 0.39, pausierte als Testlevel
+f&uuml;r lange Zeit, bis wir ihn f&uuml;r 1.00 reaktivierten, um damit die Balance-Dekade
+in Levelpack I zu komplettieren. Hier, in &quot;Big Adventures&quot;, f&uuml;hrt ein
+solcher Balanceakt zum n&auml;chsten Puzzle, einer wundervollen Metapher auf
+&quot;Reach the Dock&quot;. Ein Intermezzo folgt, Jon ermutigt uns, seinem Pfad
+weiter zu folgen &hellip;</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_b.png" alt="Level des Monats" border="0">
+<div class="imagetitle">Fliegen &hellip;</div>
+</div>
+
+<div class="quote">
+&quot;Big Adventures&quot; ist ein interessanter Level, vor allem aufgrund des 
+&quot;Split-Screen&quot;-Designs. Man erkennt sofort am Start, was zu tun ist,
+n&auml;mlich jede Menge T&uuml;ren zu &ouml;ffnen. Auch im weiteren Verlauf bekommt man immer
+wieder einen Einblick in die noch folgenden Aufgaben, das ist eine gute
+Motivations-Spritze, da st&ouml;rt auch der streng lineare Aufbau nicht.
+</div>
+
+<div class="quote">
+Die Anforderungen ans Gehirn sind zwar nicht besonders hoch und bestehen
+nur aus dem Schieben von Kisten, trotzdem bildet das Ganze zusammen mit
+einigen kleineren Geschicklichkeits-Einlagen einen netten Mix.
+Es ist aufgrund der Puzzles sicher von Vorteil, wenn man ein Faible f&uuml;r
+Sokoban hat; da dies bei mir der Fall ist, hat mir das gro&szlig;e Abenteuer
+viel Spass gemacht.
+</div>
+
+<div class="quote">
+Das einzige, was mir an dem Level nicht gef&auml;llt, ist die Tatsache, dass ich
+nicht die Bestzeit halte. Ich hoffe diesen Malus kann ich irgendwann
+noch beseitigen. ;-)
+</div>
+<div class="author">Andreas Geldmacher</div>
+
+<p>Worauf ich Jennys Worte wiederholen m&ouml;chte: &quot;Es ist auch keine
+Schnelligkeit gefragt&quot;, insbesondere wenn nur 6 Sekunden fehlen. :-)</p>
+
+<p>Auf unserem Weg durch diese Perlenkette aus Levelpack IV, f&uuml;hren uns ein
+Weltraumgang und eine dicht, fast undurchdringbar scheinende Packung aus
+Bl&ouml;cken und Bomben zu einem gro&szlig;en Sumpf. Erinnern Sie sich? Sumpf und ein
+Rotor waren die ersten Objekte, die den Weg in Oxyd 1 blockieren, und selbst
+heute noch pr&auml;sentieren sumpfige Areale Hindernisse f&uuml;r uns, in &quot;Big
+Swamp&quot; und sogar in &quot;The Aztec Temple&quot;. &quot;Big
+Adventures&quot; w&auml;re ohne einen Sumpf einfach nicht komplett.</p>
+
+<h4>&quot;I wanted to make some longer and more relaxed puzzle levels&quot;</h4>
+
+<p>Ein Labyrinth aus Impulssteinen inspirierte wom&ouml;glich illmind und Raoul,
+&quot;Bump Ahead&quot; und &quot;Don't Touch&quot; zu schreiben, und wir denken
+auch an &quot;Slinky Mayhem&quot;. Wir wissen, dass wir bereits die Mitte auf
+unserem Weg zur&uuml;ck &uuml;berschritten haben, als wir all den gel&ouml;sten R&auml;tseln wieder
+begegnen, wenn wir durch den Sand rollen und die Steine zerbrechen, die unseren
+Weg s&auml;umen. Dieser Weg erinnert uns irgendwie an eine Rennbahn, ein Level in
+der fernen Zukunft Enigmas &hellip; nur um einer Vision von &quot;The
+Disappearing Block&quot; am Ende eines Zickzack-Kurses gegen&uuml;berzustehen. Diese
+Vision zieht uns aus Enigmas Zukunft zur&uuml;ck in seine Vergangenheit, weit zur&uuml;ck
+zu den Anf&auml;ngen von Jacob Scotts Kariere, und seinem zweiten Level f&uuml;r Enigma.
+Mit dem Blick auf den Irrgarten aus Einbahnstra&szlig;en im n&auml;chsten Raum, wissen
+wir, dass es bald Zeit sein wird, diesen Level zu beenden. Aber bevor wir das
+tun, h&ouml;ren wir Jon Sneyers zu, der diese Reise f&uuml;r uns entworfen hat:</p>
+
+<div class="quote">
+Man kann Informationen &uuml;ber mich auf meiner <a
+href="http://www.cs.kuleuven.be/~jon">Homepage</a> finden. Kurz
+zusammengefasst bin ich ein 26-j&auml;hriger PhD-Student in Computerwissenschaften
+aus Leuven in Belgien, interessiert an freier Software (mit GNU/Linux seit
+nunmehr einer Dekade), linker Politik und Musik.
+</div>
+
+<div class="quote">
+Wenn ich mich recht entsinne, habe ich Enigma entdeckt, als ich systematisch
+nach freien (wie in der GPL) Spielen f&uuml;r GNU/Linux gesucht habe, in einem
+Versuch meinen Freunden (und mir selbst) zu beweisen, das es sie wirklich gibt
+;) und dass sie auch ganz sch&ouml;n ausgefeilt sein k&ouml;nnen. Das mu&szlig; so in etwa 2002
+gewesen sein. Zu dieser Zeit habe ich immer noch studiert (Informatik), so dass
+ich damals jede Menge (Frei-)Zeit hatte. :)
+</div>
+
+<div class="quote">
+Nachdem ich die so ziemlich alle Level ausprobiert hatte, die zu der Zeit
+existierten, hab' ich angefangen selbst einige Level zu verfassen, f&uuml;r meine
+damalige Freundin Tina. Das erkl&auml;rt die Gestaltung von &quot;Lotsa
+Triggers&quot; und die rechte obere Ecke von &quot;Little Puzzles&quot;. :)
+</div>
+
+<div class="quote">
+Gl&uuml;cklicherweise hab' ich die Level dann noch rechtzeitig eingereicht, damit sie
+mit dem n&auml;chsten Release von Enigma ver&ouml;ffentlicht w&uuml;rden. Ansonsten w&auml;ren sie
+unweigerlich verloren gegangen, denn einige Monate sp&auml;ter ist meine Festplatte
+gecrasht. Ich war seinerzeit der Ansicht, dass Backups der Vergangenheit
+angeh&ouml;ren und Festplatten im Zeitalter modernster Technologien nicht mehr
+crashen. :/
+</div>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_a.png" alt="Level des Monats" border="0">
+<div class="imagetitle">Ups!</div>
+</div>
+
+<div class="quote">
+Wie auch immer, nach einigen Geschicklichkeits-Leveln wie &quot;Spiral
+Race&quot; und den beiden Skyscrapers , wollte ich einige etwas l&auml;ngere und mehr
+lockerere Puzzle Level machen. Zuerst baute ich ein paar Yin-Yang-Level
+(&quot;Bridge Builders&quot;, &quot;Block Its Way!&quot;), weil mir das Konzept
+wirklich gut gef&auml;llt, zwischen zwei Murmeln hin und her wechseln zu k&ouml;nnen und
+sie kooperieren zu lassen.
+</div>
+
+<div class="quote">
+Dann verfasste ich &quot;Little Puzzles&quot;, das zwar auch von Yin-Yang
+Gebrauch macht, aber das Konzept als solches spielt hier nicht mehr die
+Hauptrolle (die wei&szlig;e Murmel ist von der schwarzen isoliert, und hat nur eine
+halbe Bildschirmseite mit einem kleinen Puzzle als Aktionsraum). Der Level ist
+mit dem Anfangsraum als Mittelpunkt entworfen: Ich wollte einen Level machen, in
+dem der Spieler mehrmals zum Anfangsraum zur&uuml;ckkehren muss, und bei jeder
+Wiederkehr dem Ziel ein Bi&szlig;chen n&auml;her kommt: den Schiebestein auf den
+Bodenschalter zu schieben. Die kleinen Br&uuml;ckenbau-R&auml;tsel hab' ich als
+Ausschm&uuml;ckung hinzugef&uuml;gt.
+</div>
+
+<div class="quote">
+F&uuml;r beide, den Spieler und den Level Designer, war &quot;Little Puzzles&quot;
+eine Vorbereitung auf &quot;Big Adventures&quot;. &quot;Big Adventures&quot; ist
+ein epischer und zugleich linearer Level, in dem der Abenteurer zahlreiche
+Aufgaben unterschiedlicher Art bew&auml;ltigen muss, um alle T&uuml;ren zu &ouml;ffnen, die den
+Zugang zum letzten Raum versperren. Der Level ist zwar geradlinig konzipiert,
+aber gleichzeitig auch gebogen wie eine seltsame Art von Spirale, so dass der
+Ziel-Raum vom Start-Raum aus sichtbar ist. Man erh&auml;lt immer wieder ein Vorschau
+auf R&auml;ume, die man noch besuchen mu&szlig;, und umgekehrt werden einem mehrmals
+R&uuml;ckblicke auf R&auml;ume gew&auml;hrt, die man bereits durchquert hat. 
+</div>
+
+<div class="quote">
+Der Level ist nicht designt worden um besonders schwierig zu sein oder sogar
+gemein, und auch wenn gelegentlich die Geschicklichkeit des Spielers ein wenig
+gefordert ist (z.B. beim H&uuml;pfen mit der Sprungfeder), wird die Verwendung von
+Extra-Leben erm&ouml;glicht und der Spieler kann vom Startpunkt aus an den bereits
+gel&ouml;sten R&auml;tseln vorbei wieder an den Punkt zur&uuml;ckgelangen, wo ihm ein
+Mi&szlig;geschick eines seiner Leben gekostet hat. Die Hauptschwierigkeit von
+&quot;Big Adventures&quot; liegt in seiner Gr&ouml;&szlig;e: 9 Screens mit jeweils zwei
+R&auml;tseln oder Hindernissen, mindestens.
+</div>
+<div class="author">Jon 'WB' Sneyers</div>
+
+<p>Wie wir die zwei letzten Wasser-Puzzle hinter uns lassen, enden wir, wo wir
+vor zehn Minuten begonnen hatten, und sehen vor uns eine weitere Variation &uuml;ber
+einen altehrw&uuml;rdigen Typ von R&auml;tseln, ein Sokoban. Wir &ouml;ffnen die letzten
+T&uuml;ren, und durchschreiten dieselben T&uuml;ren, die wir durch all die R&auml;tsel hinweg
+ge&ouml;ffnet haben, denen wir begegnet sind. Wir erreichen den abschlie&szlig;enden
+Oxydraum, der selber wieder ein Portrait ist, ein Portrait des Schwesterlevels 
+&quot;Little Puzzles&quot; von Jon selbst. Und wir schlie&szlig;en nicht nur die
+offensichtliche Spirale, die dieses Level in sich selbst zur&uuml;ckfaltet, oder die
+Selbstreferenzen, die die T&uuml;ren mit den R&auml;tseln des Levels verbindet, sondern
+wir schlie&szlig;en auch den Kreis, der ihn mit &quot;Little Puzzles&quot; verbindet.
+Nachdem wir &quot;Big Adventures&quot; gel&ouml;st haben, landen wir wieder im
+Levelmen&uuml; f&uuml;r Levelpack IV, und verstehen, dass dieser Level schlie&szlig;lich das
+Levelpack auch thematisch abschlie&szlig;t, weil es Spiralen nicht nur in einer
+Dekade, sondern durchgehend immer wieder aufgegriffen hat. Dadurch, und
+dadurch, dass er den ?bergang zu Pack V markiert, schl&auml;gt dieser Level abermals
+eine Br&uuml;cke zwischen Enigmas Vergangenheit und Zukunft &hellip; Jon, vielen,
+vielen Dank daf&uuml;r, dass Du uns dieses gro&szlig;e Abenteuer geschenkt hast!</p>
+
+<p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+<i>Andreas und Harry</i></p>
+
+</div>



From ged at mail.berlios.de  Sat Nov  3 15:09:11 2007
From: ged at mail.berlios.de (ged at mail.berlios.de)
Date: Sat, 3 Nov 2007 15:09:11 +0100
Subject: [Enigma-game-svn] r917 - homepage/input/lotm
Message-ID: <200711031409.lA3E9BZW000633@sheep.berlios.de>

Author: ged
Date: 2007-11-03 15:09:06 +0100 (Sat, 03 Nov 2007)
New Revision: 917

Added:
   homepage/input/lotm/lotm_200711_ru.html
Log:
Homepage: Russian translation of proofreaded lotm_200711

Added: homepage/input/lotm/lotm_200711_ru.html
===================================================================
--- homepage/input/lotm/lotm_200711_ru.html	2007-11-03 00:13:21 UTC (rev 916)
+++ homepage/input/lotm/lotm_200711_ru.html	2007-11-03 14:09:06 UTC (rev 917)
@@ -0,0 +1,303 @@
+<div class="lotm">
+$$lotm_header$$
+
+<h3 class="lotm">
+<span class="date">?????? 2007: </span>
+&quot;Big Adventures&quot; ?? Jon 'WB' Sneyers
+</h3>
+
+<p>&quot;??????, ???????? ???????????! ???? ????????? ??????? ? ??????? ????, ??????? ???? ?????????!&quot;
+Jon ??????? ??? ????????, ?????? ??????????? ? ?????? ??? ?????????? ??????. ?? ?????????? ??? ?????????? ? ??????
+??? ????????? ???????-?????????, ??????? ?? ?????????? ??? ????? ????????? ?? Enigma 0.92.
+? ? ??????? ?????? ?????? ?? ???? ????????? ????????? ???????? ?????????? ???????????? ?? ??????? ??????? ????
+??? ??????? ???????? ??????, ??-?????? ?????? ? ???????????, ?????? ???????????? ?? ??????????? ?????? ??? ???????????, ????? ??? ??, ???
+????? ????????? ??????????? ?????? ????? ? ???? ??????? ... ? ?????? ??????? ????????? ? ??????????? ?? ??????????? ?????? ?????? 2007,
+&quot;Big Adventures&quot;!</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_d.png" alt="Level of the month" border="0">
+<div class="imagetitle">Enigma IV # 100 - Big Adventures</div>
+</div>
+
+<table cellpadding="0" cellspacing="1" class="statistics">
+<caption class="normalcaption">????????? ???????? ???????? 2007</caption>
+<colgroup>
+   <col width="80">
+   <col width="160">
+</colgroup>
+    <tr><td class="num">6:39</td>
+        <td class="left">Stupid</td></tr>
+    <tr><td class="num">6:45</td>
+        <td class="left">Moneymaker</td></tr>
+    <tr><td class="num">7:58</td>
+        <td class="left">Django</td></tr>
+    <tr><td class="num">8:49</td>
+        <td class="left">Great Scott</td></tr>
+    <tr><td class="num">10:10</td>
+        <td class="left">Craven</td></tr>
+    <tr><td class="num">10:13</td>
+        <td class="left">Safalra</td></tr>
+    <tr><td class="num">10:28</td>
+        <td class="left">ryujun</td></tr>
+    <tr><td class="num">10:43</td>
+        <td class="left">Johannes</td></tr>
+    <tr><td class="num">10:44</td>
+        <td class="left">Lukas</td></tr>
+    <tr><td class="num">10:56</td>
+        <td class="left">fabian</td></tr>
+    <tr><td class="num">10:58</td>
+        <td class="left">Ronald</td></tr>
+    <tr><td class="num">11:32</td>
+        <td class="left">Vlad</td></tr>
+    <tr><td class="num">11:33</td>
+        <td class="left">daydreamer</td></tr>
+    <tr><td class="num">11:51</td>
+        <td class="left">bojster</td></tr>
+    <tr><td class="num">12:16</td>
+        <td class="left">Ghatotkacha</td></tr>
+    <tr><td class="num">12:59</td>
+        <td class="left">erich</td></tr>
+    <tr><td class="num">13:03</td>
+        <td class="left">hdwow</td></tr>
+    <tr><td class="num">13:54</td>
+        <td class="left">Taztunes</td></tr>
+    <tr><td class="num">14:08</td>
+        <td class="left">Marc-Hendrik</td></tr>
+    <tr><td class="num">14:17</td>
+        <td class="left">Tobias</td></tr>
+    <tr><td class="num">14:31</td>
+        <td class="left">shoki</td></tr>
+    <tr><td class="num">14:49</td>
+        <td class="left">ABS</td></tr>
+    <tr><td class="num">16:10</td>
+        <td class="left">biotopa</td></tr>
+    <tr><td class="num">16:31</td>
+        <td class="left">NorthForty</td></tr>
+    <tr><td class="num">17:44</td>
+        <td class="left">JuSt+Vinksu</td></tr>
+    <tr><td class="num">18:21</td>
+        <td class="left">Mark P.</td></tr>
+    <tr><td class="num">18:24</td>
+        <td class="left">Melanie</td></tr>
+    <tr><td class="num">18:44</td>
+        <td class="left">Little_Mole</td></tr>
+    <tr><td class="num">19:02</td>
+        <td class="left">redsantz</td></tr>
+    <tr><td class="num">19:26</td>
+        <td class="left">mhatta</td></tr>
+    <tr><td class="num">21:58</td>
+        <td class="left">WP319</td></tr>
+    <tr><td class="num">23:07</td>
+        <td class="left">Alex</td></tr>
+    <tr><td class="num">23:25</td>
+        <td class="left">Valkyrie2</td></tr>
+    <tr><td class="num">26:22</td>
+        <td class="left">Ale</td></tr>
+    <tr><td class="num">28:44</td>
+        <td class="left">U-Punkt</td></tr>
+    <tr><td class="num">30:14</td>
+        <td class="left">HuB34</td></tr>
+    <tr><td class="num">31:36</td>
+        <td class="left">para_doks</td></tr>
+    <tr><td class="num">33:31</td>
+        <td class="left">Tarim</td></tr>
+    <tr><td class="num">48:08</td>
+        <td class="left">Sim_Ed</td></tr>    
+</table>
+
+<p>? ???????? ?????????? ?? ?????????? ?? ??????:
+&quot;Quadropolis&quot; ??????? ??? ??? ?????? ? ??????? ???? ????????????.
+?????? &quot;Quadropolis&quot; ? &quot;Island Labyrinth&quot; ???? ?? ??????,
+?? ??? ?????? ?? ?????????????? ?????????? &quot;?????? ????&quot;!
+&quot;Big Adventures&quot; ??????? ? ???????????? ?? 8-?? ????? ? ???????????
+???????? ??? ??????????? ????? ????? ?????? ??????? ??????? Enigma ???? ? ????????
+?????? ??. ??? ??????, ?? ?????? ?????? ?????? ?? ??????? ??
+<a href="$$lotm$$">???????? ?????? ??</a>.</p>
+
+<h4>&quot;'Big Adventures' - ????? ??????? ? ???????? ???????&quot;</h4>
+
+<p>???????????? ??????? Jon'? ?????????? ??? ? ????? ??????? Enigma ?
+???? ????? ??????? ????? Oxyd. ??? ?????? ????????? ???????, ?????????? ??????
+&quot;Labyrinth of Puzzles&quot; ? ???????????? ??? ???????????. ??? ????????? ?????
+???????????? ???? ?? ????? ???????????? ? Enigma ????????: ??? ?????????? ????? ? ???.
+?? ????? ??? ?????????? ? ?? ??????? ???????? ? ?? ???? ???? ?????????? ??????,
+????? ? ????? ?? mag-heut ????????????? ??????? ? ???, ??? ?????????? ?
+&quot;Jam&quot; ?? Oxyd Magnum. ????? ? ??????? ?????????? ? &quot;Big
+Adventures&quot; ?? ???? ???? ???????? ????? ?? ?????? ? ? ?? ??????????? ???????? ??? ?????
+- ?????? ??? ????, ????? ?????? ??? ?? ???? ??? ?? ?????? ???? ??????:
+? ????? ??? ????. ? ?????? ?????? ????? ?? ??????? ??? ????????? ?????. ?? ?????????? ???? ???? ???,
+Jon ???? ???????? ??? ??? ???? ??????? ????? ???????. ? ?????????? ???? ??????? ???? ????? &hellip;</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_c.png" alt="Level of the month" border="0">
+<div class="imagetitle">?????? ??? ?????????? ?? ?????</div>
+</div>
+
+<div class="quote">
+????? ???????? ????? ? 'Big Adventures' ?, ??? ??????, ????????? ?????? ???
+? ???? ???? ??????? ??? ???????, ??? ? ?????????? ???.
+????? ???????????? ????????? ???????, ? ??????? ????????? ????? ?????? ??????: 8:57.
+?? ?? ????????? ? ??????? ???????? Stupid ??? ??????? ???????? ?????????.
+</div>
+
+<div class="quote">
+?? ????????? ? ??????? ?? 'Big Adventures' - ????? ??????? ? ???????? ???????.
+????? ?? ????????? ?? ??????? ? ???????? ?? ????? ????????.
+???? ??????? ? ???????? ???????? ???????????? ??????. ?? ??????? ?? ????????? ????????? ????????????,
+??????? ?? Sokoban. ? ????????? ???????? ???? ?????? ????????? ???? ? ???????,
+? ?????? ??? ???? ??????? ??????. ?????? ????? ??? ??????????? ??
+??????????? ???????????. ??, ????? ? ???? ????? ?????????, ?? ?????? ????? ?????????????. ? 'Big Adventures' ???
+?????? ????? ???????? ??????????? ???????.
+</div>
+
+<div class="quote">
+??????? ????????, ??? 'Little Puzzles' Jon'? - ?????????? ?????? 'Big
+Adventures'. ????? ????????? ? 'LP', ?? ?????? ????????? ??? ????????? ????.
+???? ?? ????????? ? 'BA' - ???? ??????? ???. ?????????? ?????? ?????(????. ?????. - ???????? ???????, ? ??????, ????????, ?????? ?? ????): ?? ?????? ?????? ??? ???????? ? ??????.
+</div>
+<div class="author">Jenny (Spioni)</div>
+
+<p>????????????? ???????? &hellip; ??? ??? ???????. ???, ? ?? ???? ? ???? ???????
+? ?????? ???????? &quot;Timers&quot;, ??? ? ??????????? ????????????? ????? ???
+???????????? ????????????? ????????. ????? ????????, ??? ? ????????? ??????? Enigma
+????? ?????????? ????, ?? ? ?? ?? ?????. ??????????? ? ????? ??????, ? ??????? ????????
+?????? ?????????????? ????? ??? ?? ????????? ???? ??????? - ????? Robot, ???????
+???????????? ????????????? ??????? ??????? ???????. ??? ???? ???????????? ??????? &hellip;
+???????, ?? ????? ????? ?????? ???????? ????????????? ???????? ?
+&quot;Pleasure Garden&quot; Jacob'?. ?, ???????, ? &quot;Little Puzzles&quot;,
+??????? ?????? ? &quot;Big Adventures&quot; ?? ??????
+?????????? ?????????????. ? ????????? ?????? ?????????? ???????? ? ???? ??? ?????? ??????.
+(??????????: ??? ???? ???? ? Esprit 91; ???????, Clifford.)</p>
+
+<h4>&quot;??? ????????????? ???????? 'Big Adventures'&quot;</h4>
+
+<p>?????? ????????, ??? ???????? ?????????? ??????? ?????????????? &quot;Civil Engineer&quot; &hellip;.
+????, ???????, ?? ?????????? ?? ???????????. ?? ???????? ???????????? ? ???? ??? ??????? Enigma,
+??????? ????????? ?????????? &quot;J.U.M.P.&quot; ?
+&quot;Jump!&quot;, ??????? ???? ???????? ? Enigma ? ?????? 0.70. ???????? ??? -
+&quot;Balance&quot; - ??? ????????? ?????????. &quot;Balance&quot; ??? ??????
+Enigma ? ?????? ?????? ? ?????? 0.39, ? ?????? ????? ????????? ??????? ???????,
+???? ?? ?? ???????????? ??? ? ?????? 1.00, ????? ????????? ?????????? ??????? ??????? ?
+?????? ?????? ???????. ?????, ? &quot;Big Adventures&quot; ???? ????? ?????????? ????? ???
+? ????????? ???????????, ???????????? ???????? &quot;Reach the Dock&quot;.
+????? ???? ??????????, Jon ?????????? ??? ??????????? ?? ??? &hellip;</p>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_b.png" alt="Level of the month" border="0">
+<div class="imagetitle">????? &hellip</div>
+</div>
+
+<div class="quote">
+'Big Adventures' ???????? ?????????? ???????, ? ???????? ????????? ??? ?????????? '??????????
+??????'. ? ?????? ?????? ?? ????????? ??? ???? ??? ???: ???????? ???? ??????.
+?? ???? ???? ? ??????, ? ????? ??? ????? ????????? ?????????? ??
+????????? ???????. ??? ??????? ?????????, ????? ?? ?? ????? ? ????, ? ???? ?????????
+???????? ??????????? ?????? ??? ?? ???????.
+</div>
+
+<div class="quote">
+?????????? ? ?????? ?????????? ?? ??????? ???????, ? ??????? ????? ??????? ?? ?????? ??????
+??????????? ?????. ??, ??? ?????? ????? ? ????????? ????????? ?? ????????, 'Big
+Adventures' - ??????? ?????. ???? ? Sokoban'? ????? ???????????? ????????? ?? ????????.
+? ????????? ??? ???????????, ??????? ??? ????????????? ???????? 'Big Adventures'.
+</div>
+
+<div class="quote">
+???????????? ??? ??? ? ???? ?????? ?? ???????? ??? ??? ????, ??? ?? ? ???????? ??????? ??????.
+? ??????? ?????? ????????? ??? ??????????. ;-)
+</div>
+<div class="author">Andreas Geldmacher</div>
+
+<p>?? ??? ? ???? ???????? ??????? Jenny: &quot;???????? ?? ????? ????????&quot;,
+???????? ????? ???????? ????? 6 ??????. :-)</p>
+
+<p>??? ???? ?? ????? ????????? ?????? ??????? IV, ???????????? ??????? ? ??????????
+?????????? ??, ???????, ?????????????? ????????????? ?????? ? ????, ???????? ? ???????? ??????.
+???????? ?????? ? ????? ???? ??????? ?????????, ?????????????? ???? ?
+Oxyd 1, ? ?? ??? ??? ??? ????????, ?????????? ????????? ?????????? ??? ??? ????????? ?
+&quot;Big Swamp&quot; ? ???? ? &quot;The Aztec Temple&quot;. &quot;Big
+Adventures&quot; ??? ?? ??? ??? ?????? ?? ??????.</p>
+
+<h4>&quot;??? ???????? ??????? ????? ??????? ? ????????? ?????? ???????????&quot;</h4>
+
+<p>??????????????? ???????? ?????????? ?????? ???????? ???? ????????? illmind'?
+? Raoul'? ???????? &quot;Bump Ahead&quot; ? &quot;Don't Touch&quot;, ????? ???? ??? ???????? ?? ??
+&quot;Slinky Mayhem&quot;. ?? ?????, ??? ?? ??? ?????? ???????? ????, ???? ??? ?????? ??? ???????? ???????????,
+????? ??????????? ?? ????? ? ????????? ?????, ????????????? ??? ????.
+??? ???? ??? ?????-?? ??????????? ??????????? ?????, ??????? ? ??????? ???????
+Enigma &hellip; ??????, ????? ? ????? ???????????????? ???????? ????? ??????
+? ???? &quot;The Disappearing Block&quot;. ???? ??? ?????????? ??? ?? ???????? Enigma ???????
+? ?? ???????, ?????? ????? ? ?????? ??????? Jacob Scott'?, ? ??? ??????? ??????
+??? Enigma. ?????? ????????????? ???????? ? ??????? ????? ???? ????????? ???????,
+?? ????????, ??? ????? ???????? ???? ???????. ?? ????? ????, ??????? ?????????
+Jon Sneyers'?, ??????? ???????????? ??? ???? ???????????:</p>
+
+<div class="quote">
+?????????? ??? ??? ?? ?????? ????? ?? ???? <a href="http://www.cs.kuleuven.be/~jon"
+>?????</a>. ???????, ? 26-???????? ??????? ???????????? ???? PhD ??
+?????(?????), ???????, ?????????????? ????????? ?? (??? ?????? ??? ???????????? GNU/Linux),
+??????????? "?????" ???????? ? ??????.
+</div>
+
+<div class="quote">
+???? ? ?? ????????, ? ???????????? ? Enigma ?? ????? ???????????????? ?????? ?????????
+(????? ??? GPL) ??? ??? GNU/Linux, ??????? ???????? ????? ??????? (? ????), ???
+??? ????????????? ?????????? ;) ? ??? ??? ???? ????? ???? ???????? ?????????.
+??? ???? ???-?? ? 2002 ????. ? ?? ????? ? ??? ?????? (???????????? ??????),
+??????? ? ???? ???? ???? ??????? :). ????? ???? ?? ?????????? ??? ????????? ? ?? ?????
+???????, ? ????? ?????? ????????? ??????? ??? ???? ????????, Tina.
+??? ????????? ????? &quot;Lotsa Triggers&quot; ? ???????? ??????? ????
+&quot;Little Puzzles&quot; :). ? ???????, ? ?????-?? ?????? ? ???????? ??? ?????? ??? ?????????
+? ????????? ??????; ????? ??? ???? ?? ???????, ?????? ??? ????????? ??????? ??????
+??? ??????? ???? ???????? ? ? ???????, ??? ???????? ??????, ??? ????????? ????? ???????? ? ??????? ?
+? ???? ??? ??????? ????? ?????? ?? ???????? :/.
+</div>
+
+<div class="lotmpic">
+<img src="$$imagedir$$/lotm/lotm_200711_a.png" alt="Level of the month" border="0">
+<div class="imagetitle">???!</div>
+</div>
+
+<div class="quote">
+? ????? ??????, ????? ?????????? ??????? ?? ???????? ??? &quot;Spiral Race&quot; ? ???
+Skyscrapers, ??? ???????? ??????? ????? ??????? ? ????????? ?????? ???????????.
+??????? ? ?????? ????????? ??????? ???-??? (&quot;Bridge Builders&quot;, &quot;Block its
+way!&quot;), ?????? ??? ??? ?? ????? ???? ???????? ??????? ???????????? ????? ????????
+? ??????????? ?? ??????????????. ????? ? ?????? &quot;Little Puzzles&quot;, ??????? ???
+??? ??????????? ???-???, ?? ??? ???????????? (????? ????? ?????????? ?? ???????
+? ??? ???????? ?????? ???????? ?????? ? ???? ????????? ???????????). ???? ??????? ????????
+?????? ?????? ???????: ??? ???????? ??????? ???????, ? ??????? ??? ????? ???? ?? ?????????
+??? ???????????? ? ??????? ??????, ?????? ??? ??????? ??????????? ? ????, ????? ???????????
+???? ?? ?????????????. ? ???????? ????????? ???? ????????? ????????? ?????????? ? ?????.
+</div>
+
+<div class="quote">
+? ??? ??????, ? ??? ????????? ???????, &quot;Little Puzzles&quot; ???? ???????????
+? &quot;Big Adventures&quot;. Big Adventures - ??? ????????? ? ???????? ???????, ?
+??????? ?????????????? ?????? ?????? ????????? ??????????? ?????????? ????, ?????
+??????? ??? ????? ? ????????? ???????. ??????? ??????, ?? ?????? ? ??????? ???????,
+??????? ????????? ??????? ????? ?? ????????? ? ?? ????????? ?????? ????? ????????? ??????,
+? ? ???????????, ???????????? ? ??????, ? ??????? ?? ??? ????????.
+??????? ?? ?????????? ????? ??????? ??? ????????? ? ???? ?????? ?? ????????? ?? ??? ????????
+(???????? ???????), ?? ???????? ??? ???????????? ??????????? ????? ? ?????? ????? ??? ????????
+???????????. ??? ???????? ????????? ??????? ? ??? ????????: 9 ??????? ? ???? ?? ?????
+????????????? ??? ?????????????? ?? ?????? ??????.
+</div>
+<div class="author">Jon 'WB' Sneyers</div>
+
+<p>?????? ??? ????????? ?????? ???????????, ?? ???????????? ????, ?????? ?????? ?????? ????? ?????
+? ????? ????? ????? ?????? ????????????? ?????????? ????? ??????????? - Sokoban. ?? ?????????
+????????? ????? ? ????????? ????? ?? ????? ?????, ??????? ?? ????????? ?? ?????????? ????
+????????????? ???????????. ?? ?????????? ?? ????????? ??????? ? ????????, ??????? ????? ???????? ?????????,
+?????? ??????-???????? &quot;Little Puzzles&quot; ?????? Jon'?. ? ?? ???????? ?? ?????? ????????? ???????
+????? ?????? ??? ??????????????? ??????, ??????????? ????? ? ????????????? ????? ??????, ?? ????? ? ???? ??????????? ??? ? &quot;Little Puzzles&quot;.
+????? ??????? &quot;Big Adventures&quot; ?? ??????????? ???? ??????? ??? ?????? ??????? IV ?
+????????, ??? ???? ??????? ????????? ????????? ????? ???? ???????????, ?????? ??? ??????? ? ?????? ??????? ???????????
+???????, ? ?? ?????? ? ????????? ???????. ????????? ?????, ? ?? ??????? ? ??????? V, ???? ???????
+??-??????? ????????? ??????? ? ??????? Enigma &hellip;
+Jon, ???????? ??????? ?? ??, ??? ??????? ??? ??? ??????? ???????????!</p>
+
+<p>? ?????????,<br/>
+<i>Andreas ? Harry</i></p>
+
+</div>


Property changes on: homepage/input/lotm/lotm_200711_ru.html
___________________________________________________________________
Name: svn:eol-style
   + native



From andreasl at mail.berlios.de  Sat Nov  3 16:44:59 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Sat, 3 Nov 2007 16:44:59 +0100
Subject: [Enigma-game-svn] r918 - homepage/input/lotm
Message-ID: <200711031544.lA3Fixx5007217@sheep.berlios.de>

Author: andreasl
Date: 2007-11-03 16:44:59 +0100 (Sat, 03 Nov 2007)
New Revision: 918

Modified:
   homepage/input/lotm/lotm_200711_de.html
Log:
LotM:
 - German proofread of LotM 11/2007
(LotM is ready for upload)


Modified: homepage/input/lotm/lotm_200711_de.html
===================================================================
--- homepage/input/lotm/lotm_200711_de.html	2007-11-03 14:09:06 UTC (rev 917)
+++ homepage/input/lotm/lotm_200711_de.html	2007-11-03 15:44:59 UTC (rev 918)
@@ -7,16 +7,16 @@
 </h3>
 
 <p>&quot;Willkommen, Abenteurer! Der Weg ist lang und gef&auml;hrlich, sei
-vorsichtig!&quot; Jon hat uns eine kurze, akkurate Willkommensnachricht
-am Anfang seines epischen Levels hinterlassen. Er ermutigt uns darin, all die
-kleinen R&auml;tsel-Perlen auszuprobieren und zu l&ouml;sen, die er in diesem Juwel von
-Enigma 0.92 aufgereiht hat. Und im milchigen Glanz jeder einzelnen dieser
-kleinen, polierten Perlen, spiegeln sich die Erinnerungen an klassische Level
-wieder, oder Visionen von Leveln, die noch kommen, jede auf eine neue und
-elegante Weise, die die Sch&ouml;nheit ihrer vielf&auml;ltigen Puzzles einf&auml;gt, so wie
-ein Haiku die Gesamtheit eines Momentes in nur drei Zeilen einzufangen vermag
-... lasst uns f&uuml;r diesen Moment innehalten und durch den Level des Monats
-November 2007 schlendern, durch &quot;Big Adventures&quot;!</p>
+vorsichtig!&quot; Jon hat uns eine kurze, akkurate Willkommensnachricht am
+Anfang seines epischen Levels hinterlassen. Er ermutigt uns darin, all die
+kleinen R&auml;tsel-Perlen auszuprobieren und zu l&ouml;sen, die er in diesem
+Juwel von Enigma 0.92 aufgereiht hat. Und im milchigen Glanz jeder einzelnen
+dieser kleinen, polierten Perlen, spiegeln sich die Erinnerungen an klassische
+Level wieder, oder Visionen von Leveln, die noch kommen, jede auf eine neue und
+elegante Weise, die die Sch&ouml;nheit ihrer vielf&auml;ltigen Puzzles
+einf&auml;gt, so wie ein Haiku die Gesamtheit eines Momentes in nur drei Zeilen
+einzufangen vermag ... lasst uns f&uuml;r diesen Moment innehalten und durch den
+Level des Monats November 2007 schlendern, durch &quot;Big Adventures&quot;!</p>
 
 <div class="lotmpic">
 <img src="$$imagedir$$/lotm/lotm_200711_d.png" alt="Level des Monats" border="0">
@@ -115,7 +115,7 @@
 Labyrinth&quot; Kopf an Kopf, zwei Monate vor der abschlie&szlig;enden Verk&uuml;ndung des
 &quot;Level des Jahres&quot;! &quot;Big Adventures&quot; beginnt in der
 Rangliste auf Platz 8, und wird sicherlich seine verdiente Position unter den
-besten zehn Levels in Enigma noch f&uuml;r viele LotMs verteidigen. Wie immer,
+besten zehn Levels in Enigma noch f&uuml;r viele LdMs verteidigen. Wie immer,
 k&ouml;nnen Sie weitere Details &uuml;ber die Bewertungen in unserem
 <a href="$$lotm$$">LdM-Archiv</a> lesen.</p>
 
@@ -169,20 +169,20 @@
 </div>
 <div class="author">Jenny (Spioni)</div>
 
-<p>Das Einbahnstra&szlig;en-Labyrinth &hellip; es f&uuml;hlt sich so bekannt an. Nein, ich
-meine nicht bekannt vom Tutorial-Level &quot;Timers&quot;, wo ich die Benutzung
-von Timersteinen demonstriert habe. Man m&ouml;chte meinen, dass es wesentlich mehr
-solche Irrg&auml;rten in den verschiedenen Leveln Enigmas gibt, aber ich konnte sie
-nicht finden. Auf der Suche in meinen Erinnerungen fand ich schlie&szlig;lich eine
-andere wundervolle Serie von Spielen, au&szlig;erhalb der Murmel-Welt, die
-Robot-Serie, die Einbahnstra&szlig;en in einer &auml;hnlichen Weise verwendeten. Eine
-weitere Erinnerung meiner Kindheit &hellip; Heute finden wir ein
-Einbahnstra&szlig;en-Labyrinth leicht anderer Art in Jacobs &quot;Pleasure
-Garden&quot;. Und nat&uuml;rlich in &quot;Little Puzzles&quot;, welcher mit
-&quot;Big Adventures&quot; durch mehr als nur ein gemeinsames R&auml;tsel verbunden
-ist. Ich suche nach wie vor nach den verbleibenden Fundorten, and bin f&uuml;r jeden
-Hinweis dankbar. (Nachtrag: Es gibt einen weiteren in Esprit 91; vielen Dank,
-Clifford!)</p>
+<p>Das Einbahnstra&szlig;en-Labyrinth &hellip; es f&uuml;hlt sich so bekannt an.
+Nein, ich meine nicht bekannt vom Tutorial-Level &quot;Timers&quot;, wo ich die
+Benutzung von Timersteinen demonstriert habe. Man m&ouml;chte meinen, dass es
+wesentlich mehr solche Irrg&auml;rten in den verschiedenen Leveln Enigmas gibt,
+aber ich konnte sie nicht finden. Auf der Suche in meinen Erinnerungen fand ich
+schlie&szlig;lich eine andere wundervolle Serie von Spielen, au&szlig;erhalb der
+Murmel-Welt, die Robot-Serie, die Einbahnstra&szlig;en in einer &auml;hnlichen
+Weise verwendete. Eine weitere Erinnerung meiner Kindheit &hellip; Heute finden
+wir ein Einbahnstra&szlig;en-Labyrinth leicht anderer Art in Jacobs
+&quot;Pleasure Garden&quot;. Und nat&uuml;rlich in &quot;Little Puzzles&quot;,
+welcher mit &quot;Big Adventures&quot; durch mehr als nur ein gemeinsames
+R&auml;tsel verbunden ist. Ich suche nach wie vor nach den verbleibenden
+Fundorten, und bin f&uuml;r jeden Hinweis dankbar. (Nachtrag: Es gibt einen
+weiteren in Esprit 91; vielen Dank, Clifford!)</p>
 
 <h4>&quot;Mir hat das gro&szlig;e Abenteuer viel Spass gemacht&quot;</h4>
 
@@ -232,11 +232,11 @@
 Schnelligkeit gefragt&quot;, insbesondere wenn nur 6 Sekunden fehlen. :-)</p>
 
 <p>Auf unserem Weg durch diese Perlenkette aus Levelpack IV, f&uuml;hren uns ein
-Weltraumgang und eine dicht, fast undurchdringbar scheinende Packung aus
-Bl&ouml;cken und Bomben zu einem gro&szlig;en Sumpf. Erinnern Sie sich? Sumpf und ein
-Rotor waren die ersten Objekte, die den Weg in Oxyd 1 blockieren, und selbst
-heute noch pr&auml;sentieren sumpfige Areale Hindernisse f&uuml;r uns, in &quot;Big
-Swamp&quot; und sogar in &quot;The Aztec Temple&quot;. &quot;Big
+Weltraumgang und eine dicht, fast undurchdringlich scheinende Packung aus
+Bl&ouml;cken und Bomben zu einem gro&szlig;en Sumpf. Erinnern Sie sich? Sumpf
+und ein Rotor waren die ersten Objekte, die den Weg in Oxyd 1 blockierten, und
+selbst heute noch pr&auml;sentieren sumpfige Areale Hindernisse f&uuml;r uns, in
+&quot;Big Swamp&quot; und sogar in &quot;The Aztec Temple&quot;. &quot;Big
 Adventures&quot; w&auml;re ohne einen Sumpf einfach nicht komplett.</p>
 
 <h4>&quot;I wanted to make some longer and more relaxed puzzle levels&quot;</h4>
@@ -266,15 +266,15 @@
 <div class="quote">
 Wenn ich mich recht entsinne, habe ich Enigma entdeckt, als ich systematisch
 nach freien (wie in der GPL) Spielen f&uuml;r GNU/Linux gesucht habe, in einem
-Versuch meinen Freunden (und mir selbst) zu beweisen, das es sie wirklich gibt
-;) und dass sie auch ganz sch&ouml;n ausgefeilt sein k&ouml;nnen. Das mu&szlig; so in etwa 2002
-gewesen sein. Zu dieser Zeit habe ich immer noch studiert (Informatik), so dass
-ich damals jede Menge (Frei-)Zeit hatte. :)
+Versuch meinen Freunden (und mir selbst) zu beweisen, dass es sie wirklich gibt
+;) und dass sie auch ganz sch&ouml;n ausgefeilt sein k&ouml;nnen. Das muss
+so in etwa 2002 gewesen sein. Zu dieser Zeit habe ich immer noch studiert
+(Informatik), so dass ich damals jede Menge (Frei-)Zeit hatte. :)
 </div>
 
 <div class="quote">
-Nachdem ich die so ziemlich alle Level ausprobiert hatte, die zu der Zeit
-existierten, hab' ich angefangen selbst einige Level zu verfassen, f&uuml;r meine
+Nachdem ich so ziemlich alle Levels ausprobiert hatte, die zu der Zeit
+existierten, hab' ich angefangen, selbst einige zu verfassen, f&uuml;r meine
 damalige Freundin Tina. Das erkl&auml;rt die Gestaltung von &quot;Lotsa
 Triggers&quot; und die rechte obere Ecke von &quot;Little Puzzles&quot;. :)
 </div>
@@ -294,12 +294,12 @@
 </div>
 
 <div class="quote">
-Wie auch immer, nach einigen Geschicklichkeits-Leveln wie &quot;Spiral
-Race&quot; und den beiden Skyscrapers , wollte ich einige etwas l&auml;ngere und mehr
-lockerere Puzzle Level machen. Zuerst baute ich ein paar Yin-Yang-Level
+Wie auch immer, nach einigen Geschicklichkeits-Levels wie &quot;Spiral
+Race&quot; und den beiden Skyscrapers, wollte ich einige l&auml;ngere und
+lockerere Puzzle-Levels machen. Zuerst baute ich ein paar Yin-Yang-Levels
 (&quot;Bridge Builders&quot;, &quot;Block Its Way!&quot;), weil mir das Konzept
-wirklich gut gef&auml;llt, zwischen zwei Murmeln hin und her wechseln zu k&ouml;nnen und
-sie kooperieren zu lassen.
+wirklich gut gef&auml;llt, zwischen zwei Murmeln hin und her wechseln zu
+k&ouml;nnen und sie kooperieren zu lassen.
 </div>
 
 <div class="quote">
@@ -315,46 +315,49 @@
 </div>
 
 <div class="quote">
-F&uuml;r beide, den Spieler und den Level Designer, war &quot;Little Puzzles&quot;
-eine Vorbereitung auf &quot;Big Adventures&quot;. &quot;Big Adventures&quot; ist
-ein epischer und zugleich linearer Level, in dem der Abenteurer zahlreiche
-Aufgaben unterschiedlicher Art bew&auml;ltigen muss, um alle T&uuml;ren zu &ouml;ffnen, die den
-Zugang zum letzten Raum versperren. Der Level ist zwar geradlinig konzipiert,
-aber gleichzeitig auch gebogen wie eine seltsame Art von Spirale, so dass der
-Ziel-Raum vom Start-Raum aus sichtbar ist. Man erh&auml;lt immer wieder ein Vorschau
-auf R&auml;ume, die man noch besuchen mu&szlig;, und umgekehrt werden einem mehrmals
-R&uuml;ckblicke auf R&auml;ume gew&auml;hrt, die man bereits durchquert hat. 
+F&uuml;r beide, den Spieler und den Leveldesigner, war &quot;Little
+Puzzles&quot; eine Vorbereitung auf &quot;Big Adventures&quot;. &quot;Big
+Adventures&quot; ist ein epischer und zugleich linearer Level, in dem der
+Abenteurer zahlreiche Aufgaben unterschiedlicher Art bew&auml;ltigen muss, um
+alle T&uuml;ren zu &ouml;ffnen, die den Zugang zum letzten Raum versperren. Der
+Level ist zwar geradlinig konzipiert, aber gleichzeitig auch gebogen wie eine
+seltsame Art von Spirale, so dass der Ziel-Raum vom Start-Raum aus sichtbar ist.
+Man erh&auml;lt immer wieder eine Vorschau auf R&auml;ume, die man noch besuchen
+muss, und umgekehrt werden einem mehrmals R&uuml;ckblicke auf R&auml;ume
+gew&auml;hrt, die man bereits durchquert hat.
 </div>
 
 <div class="quote">
-Der Level ist nicht designt worden um besonders schwierig zu sein oder sogar
+Der Level ist nicht designt worden, um besonders schwierig zu sein oder sogar
 gemein, und auch wenn gelegentlich die Geschicklichkeit des Spielers ein wenig
 gefordert ist (z.B. beim H&uuml;pfen mit der Sprungfeder), wird die Verwendung von
 Extra-Leben erm&ouml;glicht und der Spieler kann vom Startpunkt aus an den bereits
 gel&ouml;sten R&auml;tseln vorbei wieder an den Punkt zur&uuml;ckgelangen, wo ihm ein
-Mi&szlig;geschick eines seiner Leben gekostet hat. Die Hauptschwierigkeit von
+Missgeschick eines seiner Leben gekostet hat. Die Hauptschwierigkeit von
 &quot;Big Adventures&quot; liegt in seiner Gr&ouml;&szlig;e: 9 Screens mit jeweils zwei
 R&auml;tseln oder Hindernissen, mindestens.
 </div>
 <div class="author">Jon 'WB' Sneyers</div>
 
 <p>Wie wir die zwei letzten Wasser-Puzzle hinter uns lassen, enden wir, wo wir
-vor zehn Minuten begonnen hatten, und sehen vor uns eine weitere Variation &uuml;ber
-einen altehrw&uuml;rdigen Typ von R&auml;tseln, ein Sokoban. Wir &ouml;ffnen die letzten
-T&uuml;ren, und durchschreiten dieselben T&uuml;ren, die wir durch all die R&auml;tsel hinweg
-ge&ouml;ffnet haben, denen wir begegnet sind. Wir erreichen den abschlie&szlig;enden
-Oxydraum, der selber wieder ein Portrait ist, ein Portrait des Schwesterlevels 
-&quot;Little Puzzles&quot; von Jon selbst. Und wir schlie&szlig;en nicht nur die
-offensichtliche Spirale, die dieses Level in sich selbst zur&uuml;ckfaltet, oder die
-Selbstreferenzen, die die T&uuml;ren mit den R&auml;tseln des Levels verbindet, sondern
-wir schlie&szlig;en auch den Kreis, der ihn mit &quot;Little Puzzles&quot; verbindet.
-Nachdem wir &quot;Big Adventures&quot; gel&ouml;st haben, landen wir wieder im
-Levelmen&uuml; f&uuml;r Levelpack IV, und verstehen, dass dieser Level schlie&szlig;lich das
-Levelpack auch thematisch abschlie&szlig;t, weil es Spiralen nicht nur in einer
-Dekade, sondern durchgehend immer wieder aufgegriffen hat. Dadurch, und
-dadurch, dass er den ?bergang zu Pack V markiert, schl&auml;gt dieser Level abermals
-eine Br&uuml;cke zwischen Enigmas Vergangenheit und Zukunft &hellip; Jon, vielen,
-vielen Dank daf&uuml;r, dass Du uns dieses gro&szlig;e Abenteuer geschenkt hast!</p>
+vor zehn Minuten begonnen hatten, und sehen vor uns eine weitere Variation
+&uuml;ber einen altehrw&uuml;rdigen Typ von R&auml;tseln, ein Sokoban. Wir
+&ouml;ffnen die letzten T&uuml;ren, und durchschreiten dieselben T&uuml;ren, die
+wir durch all die R&auml;tsel hinweg ge&ouml;ffnet haben, denen wir begegnet
+sind. Wir erreichen den abschlie&szlig;enden Oxydraum, der selber wieder ein
+Portrait ist, ein Portrait des Schwesterlevels  &quot;Little Puzzles&quot; von
+Jon selbst. Und wir schlie&szlig;en nicht nur die offensichtliche Spirale, die
+dieses Level in sich selbst zur&uuml;ckfaltet, oder die Selbstreferenzen, die
+die T&uuml;ren mit den R&auml;tseln des Levels verbindet, sondern wir
+schlie&szlig;en auch den Kreis, der ihn mit &quot;Little Puzzles&quot;
+verbindet. Nachdem wir &quot;Big Adventures&quot; gel&ouml;st haben, landen wir
+wieder im Levelmen&uuml; f&uuml;r Levelpack IV, und verstehen, dass dieser Level
+schlie&szlig;lich das Levelpack auch thematisch abschlie&szlig;t, weil es
+Spiralen nicht nur in einer Dekade, sondern durchgehend immer wieder
+aufgegriffen hat. Dadurch, und dadurch, dass er den &Uuml;bergang zu Pack V
+markiert, schl&auml;gt dieser Level abermals eine Br&uuml;cke zwischen Enigmas
+Vergangenheit und Zukunft &hellip; Jon, vielen, vielen Dank daf&uuml;r, dass Du
+uns dieses gro&szlig;e Abenteuer geschenkt hast!</p>
 
 <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
 <i>Andreas und Harry</i></p>



From raoul at mail.berlios.de  Sun Nov  4 14:02:38 2007
From: raoul at mail.berlios.de (raoul at BerliOS)
Date: Sun, 4 Nov 2007 14:02:38 +0100
Subject: [Enigma-game-svn] r919 - in homepage/input: . lotm
Message-ID: <200711041302.lA4D2cVV022411@sheep.berlios.de>

Author: raoul
Date: 2007-11-04 14:02:35 +0100 (Sun, 04 Nov 2007)
New Revision: 919

Modified:
   homepage/input/faq_core.html
   homepage/input/faq_core_de.html
   homepage/input/faq_core_ru.html
   homepage/input/features.html
   homepage/input/features_de.html
   homepage/input/features_ru.html
   homepage/input/impressum.html
   homepage/input/impressum_de.html
   homepage/input/impressum_ru.html
   homepage/input/lotm/lotm_200703.html
   homepage/input/lotm/lotm_200703_de.html
   homepage/input/lotm/lotm_200703_ru.html
   homepage/input/lotm/lotm_200704.html
   homepage/input/lotm/lotm_200704_de.html
   homepage/input/lotm/lotm_200704_ru.html
   homepage/input/lotm/lotm_200705.html
   homepage/input/lotm/lotm_200705_de.html
   homepage/input/lotm/lotm_200705_ru.html
   homepage/input/lotm/lotm_200706.html
   homepage/input/lotm/lotm_200706_de.html
   homepage/input/lotm/lotm_200707.html
   homepage/input/lotm/lotm_200707_de.html
   homepage/input/lotm/lotm_200708.html
   homepage/input/lotm/lotm_200708_de.html
   homepage/input/lotm/lotm_200709.html
   homepage/input/lotm/lotm_200709_de.html
   homepage/input/lotm/lotm_200709_ru.html
   homepage/input/lotm/lotm_200710.html
   homepage/input/lotm/lotm_200710_de.html
   homepage/input/lotm/lotm_200710_ru.html
   homepage/input/lotm/lotm_200711.html
   homepage/input/lotm/lotm_200711_de.html
   homepage/input/lotm/lotm_200711_ru.html
   homepage/input/menu.html
   homepage/input/menu_de.html
   homepage/input/menu_ru.html
   homepage/input/powered-by.html
   homepage/input/powered-by_de.html
   homepage/input/powered-by_ru.html
   homepage/input/press.html
   homepage/input/press_de.html
   homepage/input/press_ru.html
   homepage/input/validation.html
Log:
-> Fixed some minor invalid parts
-> Every page should be valid html trans. 4.01 now



Modified: homepage/input/faq_core.html
===================================================================
--- homepage/input/faq_core.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/faq_core.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -177,18 +177,18 @@
 enter the &quot;Options&quot;-menu from the main menu; or pressing
 F2 in main-menu. The default user paths are as follows:
 </p><p>
-On a Linux/Unix-system:<br/>
-&nbsp;&#732;/.enigma<br/>
-On an NT-based Windows-system (NT&#8727;, 2000, XP, Vista) in English language:<br/>
-&nbsp;C:\Documents and Settings\YourUserName\Application Data\Enigma<br/>
-On an NT-based Windows-system (NT&#8727;, 2000, XP, Vista) in German language:<br/>
-&nbsp;C:\Dokumente und Einstellungen\YourUserName\Anwendungsdaten\Enigma<br/>
-On a DOS-based Windows-system (95, 98, ME) in English language:<br/>
-&nbsp;C:\WINDOWS\Application Data\Enigma<br/>
-On a DOS-based Windows-system (95, 98, ME) in German language:<br/>
+On a Linux/Unix-system:<br>
+&nbsp;&#732;/.enigma<br>
+On an NT-based Windows-system (NT&#8727;, 2000, XP, Vista) in English language:<br>
+&nbsp;C:\Documents and Settings\YourUserName\Application Data\Enigma<br>
+On an NT-based Windows-system (NT&#8727;, 2000, XP, Vista) in German language:<br>
+&nbsp;C:\Dokumente und Einstellungen\YourUserName\Anwendungsdaten\Enigma<br>
+On a DOS-based Windows-system (95, 98, ME) in English language:<br>
+&nbsp;C:\WINDOWS\Application Data\Enigma<br>
+On a DOS-based Windows-system (95, 98, ME) in German language:<br>
 &nbsp;C:\WINDOWS\Anwendungsdaten\Enigma<br>
 (Correspondingly in other languages; replace &quot;YourUserName&quot; with your
-user name.)<br/>
+user name.)<br>
 On a Mac OS X: Use the finder, menu titled &quot;Go&quot;, select &quot;Go to
 folder&quot;, then type in: &quot;/Users/YourUserName/.enigma&quot;</p>
 

Modified: homepage/input/faq_core_de.html
===================================================================
--- homepage/input/faq_core_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/faq_core_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -195,18 +195,18 @@
 Optionsmen&uuml; &ouml;ffnen, oder im Hauptmen&uuml; F2 dr&uuml;cken. Die Standardeinstellung ist
 die folgende:
 </p><p>
-Auf einem Linux/Unix-System:<br/>
-&nbsp;&#732;/.enigma<br/>
-Auf einem NT-basierten Windows-System (NT&#8727;, 2000, XP, Vista) auf englisch:<br/>
-&nbsp;C:\Documents and Settings\IhrBenutzername\Application Data\Enigma<br/>
-Auf einem NT-basierten Windows-System (NT&#8727;, 2000, XP, Vista) auf deutsch:<br/>
-&nbsp;C:\Dokumente und Einstellungen\IhrBenutzername\Anwendungsdaten\Enigma<br/>
-Auf einem DOS-basierten Windows-System (95, 98, ME) auf englisch:<br/>
-&nbsp;C:\WINDOWS\Application Data\Enigma<br/>
-Auf einem DOS-basierten Windows-System (95, 98, ME) auf deutsch:<br/>
+Auf einem Linux/Unix-System:<br>
+&nbsp;&#732;/.enigma<br>
+Auf einem NT-basierten Windows-System (NT&#8727;, 2000, XP, Vista) auf englisch:<br>
+&nbsp;C:\Documents and Settings\IhrBenutzername\Application Data\Enigma<br>
+Auf einem NT-basierten Windows-System (NT&#8727;, 2000, XP, Vista) auf deutsch:<br>
+&nbsp;C:\Dokumente und Einstellungen\IhrBenutzername\Anwendungsdaten\Enigma<br>
+Auf einem DOS-basierten Windows-System (95, 98, ME) auf englisch:<br>
+&nbsp;C:\WINDOWS\Application Data\Enigma<br>
+Auf einem DOS-basierten Windows-System (95, 98, ME) auf deutsch:<br>
 &nbsp;C:\WINDOWS\Anwendungsdaten\Enigma<br>
 (Entsprechend in anderen Sprachen; ersetzen Sie &quot;IhrBenutzername&quot; mit
-Ihrem Benutzernamen.)<br/>
+Ihrem Benutzernamen.)<br>
 Auf einem Mac OS X: &Ouml;ffnen Sie den Finder, Men&uuml; &quot;Go&quot;, w&auml;hlen Sie
 &quot;Go to folder&quot;. Geben Sie dann ein:
 &quot;/Users/IhrBenutzername/.enigma&quot;</p>

Modified: homepage/input/faq_core_ru.html
===================================================================
--- homepage/input/faq_core_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/faq_core_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -166,18 +166,18 @@
 ???? &quot;?????????&quot;; ??? ????? ? ??????? ????
 F2. ???? ?? ????????? ????????? ????:
 </p><p>
-??? ?????? Linux/Unix:<br/>
-&nbsp;&#732;/.enigma<br/>
-??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ? ???????????? ??????:<br/>
-&nbsp;C:\Documents and Settings\YourUserName\Application Data\Enigma<br/>
-??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ? ???????? ??????:<br/>
-&nbsp;C:\Dokumente und Einstellungen\YourUserName\Anwendungsdaten\Enigma<br/>
-??? ?????? Windows, ?????????? ?? DOS (95, 98, ME) ? ???????????? ??????:<br/>
-&nbsp;C:\WINDOWS\Application Data\Enigma<br/>
-??? ?????? Windows, ?????????? ?? DOS (95, 98, ME) ? ???????? ??????:<br/>
+??? ?????? Linux/Unix:<br>
+&nbsp;&#732;/.enigma<br>
+??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ? ???????????? ??????:<br>
+&nbsp;C:\Documents and Settings\YourUserName\Application Data\Enigma<br>
+??? ?????? Windows, ?????????? ?? ?????????? NT (NT&#8727;, 2000, XP, Vista) ? ???????? ??????:<br>
+&nbsp;C:\Dokumente und Einstellungen\YourUserName\Anwendungsdaten\Enigma<br>
+??? ?????? Windows, ?????????? ?? DOS (95, 98, ME) ? ???????????? ??????:<br>
+&nbsp;C:\WINDOWS\Application Data\Enigma<br>
+??? ?????? Windows, ?????????? ?? DOS (95, 98, ME) ? ???????? ??????:<br>
 &nbsp;C:\WINDOWS\Anwendungsdaten\Enigma<br>
 (??? ?????? ?? ?????? ?????? ??? ???????; ???????? &quot;YourUserName&quot; ?? ???? 
-??? ????????????.)<br/>
+??? ????????????.)<br>
 ??? Mac OS X: ?????????????? ???????????, ???? ??? ????????? &quot;Go&quot;, ???????? &quot;Go to
 folder&quot;, ????? ???????: &quot;/Users/YourUserName/.enigma&quot;</p>
 

Modified: homepage/input/features.html
===================================================================
--- homepage/input/features.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/features.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -6,7 +6,7 @@
 <li>Non violent - a game for young and old.</li>
 <li>More than 1000 different levels guarantee longtime entertainment.</li>
 <li>Stable 1.00 Release with more than 200 000 downloads in two months.</li>
-<li>Translated to many languages:<br/>
+<li>Translated to many languages:<br>
   &nbsp;<img src="$$imagedir$$/flags25x15/gb.png" border="0" width="25" height="15" alt="English" title="English">
   &nbsp;<img src="$$imagedir$$/flags25x15/de.png" border="0" width="25" height="15" alt="German" title="German">
   &nbsp;<img src="$$imagedir$$/flags25x15/fr.png" border="0" width="25" height="15" alt="French" title="French">

Modified: homepage/input/features_de.html
===================================================================
--- homepage/input/features_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/features_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -6,7 +6,7 @@
 <li>Gewaltfrei - ein Spiel f&uuml;r Jung und Alt.</li>
 <li>Mehr als 1000 verschiedene Levels garantieren lang anhaltende Unterhaltung.</li>
 <li>Stabile Version 1.00 mit mehr als 200.000 Downloads in 2 Monaten.</li>
-<li>&Uuml;bersetzt in folgende Sprachen:<br/>
+<li>&Uuml;bersetzt in folgende Sprachen:<br>
   &nbsp;<img src="$$imagedir$$/flags25x15/gb.png" border="0" width="25" height="15" alt="Englisch" title="Englisch">
   &nbsp;<img src="$$imagedir$$/flags25x15/de.png" border="0" width="25" height="15" alt="Deutsch" title="Deutsch">
   &nbsp;<img src="$$imagedir$$/flags25x15/fr.png" border="0" width="25" height="15" alt="Franz&ouml;sisch" title="Franz&ouml;sisch">

Modified: homepage/input/features_ru.html
===================================================================
--- homepage/input/features_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/features_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -6,7 +6,7 @@
 <li>??? ??????????? - ???? ??? ??????? ? ????????.</li>
 <li>????? 1000 ????????? ??????? ??????????? ?????????? ???????????.</li>
 <li>?????????? ?????? 1.00 ? ????? 200 000 ???????? ?? ??? ??????.</li>
-<li>?????????? ?? ????????? ??????:<br/>
+<li>?????????? ?? ????????? ??????:<br>
   &nbsp;<img src="$$imagedir$$/flags25x15/gb.png" border="0" width="25" height="15" alt="English" title="English">
   &nbsp;<img src="$$imagedir$$/flags25x15/de.png" border="0" width="25" height="15" alt="German" title="German">
   &nbsp;<img src="$$imagedir$$/flags25x15/fr.png" border="0" width="25" height="15" alt="French" title="French">

Modified: homepage/input/impressum.html
===================================================================
--- homepage/input/impressum.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/impressum.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -2,9 +2,9 @@
 
 <p>Responsible for the content of this page is:</p>
 <p>
-Andreas Lochmann<br/>
-Ginsterweg 4, App.102<br/>
-37077 Weende/G&ouml;ttingen, Germany<br/>
-0551 / 3791553<br/>
-andreas.lochmann at stud.uni-goettingen.de<br/>
+Andreas Lochmann<br>
+Ginsterweg 4, App.102<br>
+37077 Weende/G&ouml;ttingen, Germany<br>
+0551 / 3791553<br>
+andreas.lochmann at stud.uni-goettingen.de<br>
 <a href="$$disclaimer$$">Disclaimer</a></p>

Modified: homepage/input/impressum_de.html
===================================================================
--- homepage/input/impressum_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/impressum_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -2,9 +2,9 @@
 
 <p>Verantwortlich f&uuml;r den Inhalt dieser Seite ist:</p>
 <p>
-Andreas Lochmann<br/>
-Ginsterweg 4, App.102<br/>
-37077 Weende/G&ouml;ttingen, Deutschland<br/>
-0551 / 3791553<br/>
-andreas.lochmann at stud.uni-goettingen.de<br/>
+Andreas Lochmann<br>
+Ginsterweg 4, App.102<br>
+37077 Weende/G&ouml;ttingen, Deutschland<br>
+0551 / 3791553<br>
+andreas.lochmann at stud.uni-goettingen.de<br>
 <a href="$$disclaimer$$">Haftungsausschluss</a></p>

Modified: homepage/input/impressum_ru.html
===================================================================
--- homepage/input/impressum_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/impressum_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -2,9 +2,9 @@
 
 <p>????????????? ?? ?????????? ???? ????????:</p>
 <p>
-Andreas Lochmann<br/>
-Ginsterweg 4, App.102<br/>
-37077 Weende/G&ouml;ttingen, Germany<br/>
-0551 / 3791553<br/>
-andreas.lochmann at stud.uni-goettingen.de<br/>
+Andreas Lochmann<br>
+Ginsterweg 4, App.102<br>
+37077 Weende/G&ouml;ttingen, Germany<br>
+0551 / 3791553<br>
+andreas.lochmann at stud.uni-goettingen.de<br>
 <a href="$$disclaimer$$">????????</a></p>

Modified: homepage/input/lotm/lotm_200703.html
===================================================================
--- homepage/input/lotm/lotm_200703.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200703.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -149,6 +149,6 @@
 
   <p>Oh, and don't forget to rate!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Andreas</i></p>
 </div>

Modified: homepage/input/lotm/lotm_200703_de.html
===================================================================
--- homepage/input/lotm/lotm_200703_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200703_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -163,6 +163,6 @@
 
   <p>Oh, und vergessen Sie nicht zu bewerten!</p>
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Andreas</i></p>
 </div>

Modified: homepage/input/lotm/lotm_200703_ru.html
===================================================================
--- homepage/input/lotm/lotm_200703_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200703_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -142,6 +142,6 @@
 
   <p>??, ? ?? ???????? ??? ??????!</p>
 
-  <p>? ?????????,<br/>
+  <p>? ?????????,<br>
   <i>Andreas</i></p>
 </div>

Modified: homepage/input/lotm/lotm_200704.html
===================================================================
--- homepage/input/lotm/lotm_200704.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200704.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -162,7 +162,7 @@
   <p>Thanks to you, Manuel, for this wonderful fivefold puzzle, and the
   stories we can now connect to it!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200704_de.html
===================================================================
--- homepage/input/lotm/lotm_200704_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200704_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -186,7 +186,7 @@
   R&auml;tsel, und die Geschichten, die wir nun damit verbinden
   k&ouml;nnen!</p>
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200704_ru.html
===================================================================
--- homepage/input/lotm/lotm_200704_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200704_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -159,7 +159,7 @@
   <p>??????? ????, Manuel, ?? ??? ?????????????? ??????????? ??????????? ? ???????,
   ??????? ?? ?????? ????? ? ??? ???????!</p>
 
-  <p>? ?????????,<br/>
+  <p>? ?????????,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200705.html
===================================================================
--- homepage/input/lotm/lotm_200705.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200705.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -236,7 +236,7 @@
   all means made for enjoyment! Thank you very much for this jewel of a level,
   Dominik!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200705_de.html
===================================================================
--- homepage/input/lotm/lotm_200705_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200705_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -255,7 +255,7 @@
   Ziel, sondern dem Genu&szlig;! Vielen, vielen Dank f&uuml;r dieses Juwel von einem
   Level, Dominik!</p>
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200705_ru.html
===================================================================
--- homepage/input/lotm/lotm_200705_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200705_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -223,7 +223,7 @@
   ??? ???????? ???????, ????????? ?????? ?? ??? ???????, ? ????? ???????? ????????????!
   ??????? ???? ???????? Dominik ?? ????? ?????? ???????!</p>
 
-  <p>? ?????????,<br/>
+  <p>? ?????????,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200706.html
===================================================================
--- homepage/input/lotm/lotm_200706.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200706.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -267,7 +267,7 @@
   proofread all the LotMs since the beginning in March; many thanks,
   Taztunes!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200706_de.html
===================================================================
--- homepage/input/lotm/lotm_200706_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200706_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -291,7 +291,7 @@
   Version des LotM seit den Anf&auml;ngen im M&auml;rz korrekturgelesen hat; vielen Dank,
   Taztunes!</p>
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200707.html
===================================================================
--- homepage/input/lotm/lotm_200707.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200707.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -175,17 +175,17 @@
 
   <p>I still can't believe that Duffy has made over 150 Levels. Thats a whole
     level set and a half. His levels have inspired me to create the puzzling
-    levels I like to make.<br/>
-    <br/>
-    Well, that pretty much sums it up &hellip;<br/>
-    <br/>
-    &hellip; But no human being is capable of creating so many highly sophisticated levels in no time at all!?<br/>
-    &hellip; Duffy must be a machine! A level making machine!<br/>
-    &hellip; And a very smart one too! :-)<br/>
-    <br/>
+    levels I like to make.<br>
+    <br>
+    Well, that pretty much sums it up &hellip;<br>
+    <br>
+    &hellip; But no human being is capable of creating so many highly sophisticated levels in no time at all!?<br>
+    &hellip; Duffy must be a machine! A level making machine!<br>
+    &hellip; And a very smart one too! :-)<br>
+    <br>
     Welcome to the machine!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Joe and Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200707_de.html
===================================================================
--- homepage/input/lotm/lotm_200707_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200707_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -233,18 +233,18 @@
   <p>Ich kann es immer noch nicht glauben, dass Duffy &uuml;ber 150 Level verfasst
     hat! Das ist ein ganzes Levelpaket und noch ein halbes oben drauf! Duffys
     Level haben mich inspiriert, eigene &quot;r&auml;tselhafte&quot; Level zu
-    entwerfen, und eigene Vorstellungen und Vorlieben zu inszenieren.<br/>
-    <br/>
-    Na gut, damit w&auml;re von meiner Sicht aus wohl alles gesagt.<br/>
-    <br/>
-    &hellip; Aber kein Mensch kann doch in derart kurzer Zeit derart viele hochkomplexe Werke hervorbringen?!?<br/>
-    &hellip; Duffy muss eine Maschine sein! Eine Level-Maschine!<br/>
-    &hellip; Und eine hochintelligente noch dazu! :-)<br/>
-    <br/>
-    Welcome to the machine! <br/>
+    entwerfen, und eigene Vorstellungen und Vorlieben zu inszenieren.<br>
+    <br>
+    Na gut, damit w&auml;re von meiner Sicht aus wohl alles gesagt.<br>
+    <br>
+    &hellip; Aber kein Mensch kann doch in derart kurzer Zeit derart viele hochkomplexe Werke hervorbringen?!?<br>
+    &hellip; Duffy muss eine Maschine sein! Eine Level-Maschine!<br>
+    &hellip; Und eine hochintelligente noch dazu! :-)<br>
+    <br>
+    Welcome to the machine! <br>
   </p>
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Joe und Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200708.html
===================================================================
--- homepage/input/lotm/lotm_200708.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200708.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -279,7 +279,7 @@
   atmosphere and gameplay with traditional elements of the game. Ronald, thank
   you very much for this masterwork of level wizardry!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Andreas and Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200708_de.html
===================================================================
--- homepage/input/lotm/lotm_200708_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200708_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -345,7 +345,7 @@
   f&uuml;r eine Herausforderung er wirklich darstellt.</div>
 
   <div class="quote">
-  Viel Gl&uuml;ck beim L&ouml;sen, und viel Spa&szlig;!</div
+  Viel Gl&uuml;ck beim L&ouml;sen, und viel Spa&szlig;!</div>
   
   <div class="author">Ronald Lamprecht</div>
 
@@ -356,7 +356,7 @@
   des Spiels verbindet. Ronald, vielen Dank f&uuml;r dieses zauberhafte
   Meisterwerk!</p> 
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Andreas und Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200709.html
===================================================================
--- homepage/input/lotm/lotm_200709.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200709.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -243,7 +243,7 @@
   Barry, Lori, thank you very much for this important lesson, and the great
   level you have shared with us!</p>
 
-  <p>Greets,<br/>
+  <p>Greets,<br>
   <i>Harry and Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200709_de.html
===================================================================
--- homepage/input/lotm/lotm_200709_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200709_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -147,7 +147,7 @@
 
   <div class="lotmpic">
     <img src="$$imagedir$$/lotm/lotm_200709_b.png" alt="Level of the month" border="0">
-    <div class="imagetitle">&quot;H&ouml;rt zu, Zinnsoldaten, wenn ich erstmal<br/>
+    <div class="imagetitle">&quot;H&ouml;rt zu, Zinnsoldaten, wenn ich erstmal<br>
     meinen Dosen&ouml;ffner gefunden habe &hellip;&quot; </div>
   </div>
   
@@ -285,7 +285,7 @@
   Netzwerkspiel. Barry, Lori: vielen, vielen Dank f&uuml;r diese wichtige Lektion,
   und den wunderbaren Level, den Ihr mit uns geteilt habt!</p>
 
-  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+  <p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
   <i>Harry und Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200709_ru.html
===================================================================
--- homepage/input/lotm/lotm_200709_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200709_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -238,7 +238,7 @@
   Barry, Lori, ???????? ??? ??????? ?? ???? ?????? ????, ? ??????? ???????,
   ??????? ?? ? ???? ??????????!</p>
 
-  <p>? ?????????,<br/>
+  <p>? ?????????,<br>
   <i>Harry ? Andreas</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200710.html
===================================================================
--- homepage/input/lotm/lotm_200710.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200710.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -629,7 +629,7 @@
 Quadropolis really paid off!&quot; There's nothing else for it but to wish that
 the success of Quadropolis gives new impulses to the second CEL project. </p>
 
-<p>Greets,<br/>
+<p>Greets,<br>
 <i>Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200710_de.html
===================================================================
--- homepage/input/lotm/lotm_200710_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200710_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -644,7 +644,7 @@
 das der Erfolg von Quadropolis auch dem zweiten CEL-Projekt neue Impulse gibt.
 </p>
 
-<p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+<p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
 <i>Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200710_ru.html
===================================================================
--- homepage/input/lotm/lotm_200710_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200710_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -595,7 +595,7 @@
 Quadropolis ????????????? ???? ?????????!&quot; ???????? ?????? ????????, ????? ?????
 Quadropolis'? ??? ????? ?????? ??? ??????? ??????? ???. </p>
 
-<p>? ?????????,<br/>
+<p>? ?????????,<br>
 <i>Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200711.html
===================================================================
--- homepage/input/lotm/lotm_200711.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200711.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -315,7 +315,7 @@
 bridges the gap between Enigma's past and future in yet another way &hellip;
 Jon, many, many thanks for giving this Big Adventure to us!</p>
 
-<p>Greets,<br/>
+<p>Greets,<br>
 <i>Andreas and Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200711_de.html
===================================================================
--- homepage/input/lotm/lotm_200711_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200711_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -359,7 +359,7 @@
 Vergangenheit und Zukunft &hellip; Jon, vielen, vielen Dank daf&uuml;r, dass Du
 uns dieses gro&szlig;e Abenteuer geschenkt hast!</p>
 
-<p>Sch&ouml;ne Gr&uuml;&szlig;e,<br/>
+<p>Sch&ouml;ne Gr&uuml;&szlig;e,<br>
 <i>Andreas und Harry</i></p>
 
 </div>

Modified: homepage/input/lotm/lotm_200711_ru.html
===================================================================
--- homepage/input/lotm/lotm_200711_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/lotm/lotm_200711_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -297,7 +297,7 @@
 ??-??????? ????????? ??????? ? ??????? Enigma &hellip;
 Jon, ???????? ??????? ?? ??, ??? ??????? ??? ??? ??????? ???????????!</p>
 
-<p>? ?????????,<br/>
+<p>? ?????????,<br>
 <i>Andreas ? Harry</i></p>
 
 </div>

Modified: homepage/input/menu.html
===================================================================
--- homepage/input/menu.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/menu.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -3,7 +3,7 @@
         <li><a href="$$about$$">About</a>
           <ul>
             <li><a href="$$about$$#features">Features</a></li>
-            <li><a href="$$about$$#testimonials">Testimonials<br/>
+            <li><a href="$$about$$#testimonials">Testimonials<br>
               <span class="menusubtitle">User Comments</span></a></li>
             <li><a href="$$news$$">News and Olds</a></li>
             <li><a href="$$screenshots$$">Screenshots</a></li>
@@ -16,10 +16,10 @@
           <ul>
             <li><a href="$$download$$#stable">Download<br>
               <span class="menusubtitle">stable Release</span></a></li>
-            <li><a href="$$download$$#compilation">Compilation<br/>
+            <li><a href="$$download$$#compilation">Compilation<br>
               <span class="menusubtitle">Linux Howto</span></a></li>
             <li><a href="$$download$$#devel">Other versions</a></li>
-            <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">Announce ML<br/>
+            <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">Announce ML<br>
               <span class="menusubtitle">Mail on new Version</span></a></li>
           </ul>
         </li>
@@ -29,11 +29,11 @@
           <ul>
             <li><a href="$$support$$#documentation">Documentation</a></li>
             <li><a href="$$faq$$">FAQ</a></li>
-            <li><a href="http://www.mag-heut.net" title="Here you can get help">Forum<br/>
+            <li><a href="http://www.mag-heut.net" title="Here you can get help">Forum<br>
               <span class="menusubtitle">mag-heut.net</span></a></li>
             <li><a href="$$support$$#score">Score Submit</a></li>
             <li><a href="$$statistics$$">Score Statistics</a></li>
-            <li><a href="$$lotm$$">LotM Archive<br/>
+            <li><a href="$$lotm$$">LotM Archive<br>
               <span class="menusubtitle">Levels of the Month</span></a></li>
             <li><a href="$$support$$#bug">Bug Reporting</a></li>
             <li><a href="$$support$$#donation">Donation</a></li>
@@ -42,7 +42,7 @@
       <ul class="mlist">
         <li><a href="$$development$$">Development</a>
           <ul>
-            <li><a href="http://mail.nongnu.org/mailman/listinfo/enigma-devel">Mailing List<br/>
+            <li><a href="http://mail.nongnu.org/mailman/listinfo/enigma-devel">Mailing List<br>
               <span class="menusubtitle">Devel ML (nongnu)</span></a></li>
             <li><a href="$$development$$#tasks">Feature Wishlist</a></li>
             <li><a href="$$development$$#level">Level</a>
@@ -51,7 +51,7 @@
                 <li><a href="$$wiki$$">Manual Wiki</a></li>
               </ul>
             </li>
-            <li><a href="$$development$$#app">Application<br/>
+            <li><a href="$$development$$#app">Application<br>
               <span class="menusubtitle">Source Repository</span></a>
             </li>
           </ul>

Modified: homepage/input/menu_de.html
===================================================================
--- homepage/input/menu_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/menu_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -3,7 +3,7 @@
         <li><a href="$$about$$">&Uuml;ber Enigma</a>
           <ul>
             <li><a href="$$about$$#features">Features</a></li>
-            <li><a href="$$about$$#testimonials">Meinungen<br/>
+            <li><a href="$$about$$#testimonials">Meinungen<br>
               <span class="menusubtitle">von Spielern</span></a></li>
             <li><a href="$$news$$">Neues und Altes</a></li>
             <li><a href="$$screenshots$$">Schnappsch&uuml;sse</a></li>
@@ -16,10 +16,10 @@
           <ul>
             <li><a href="$$download$$#stable">Download<br>
               <span class="menusubtitle">stabile Version</span></a></li>
-            <li><a href="$$download$$#compilation">Kompilieren<br/>
+            <li><a href="$$download$$#compilation">Kompilieren<br>
               <span class="menusubtitle">Linux Howto</span></a></li>
             <li><a href="$$download$$#devel">Andere Versionen</a></li>
-            <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">Ank&uuml;ndigungs-ML<br/>
+            <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">Ank&uuml;ndigungs-ML<br>
               <span class="menusubtitle">Mail bei neuen Versionen</span></a></li>
           </ul>
         </li>
@@ -28,14 +28,14 @@
         <li><a href="$$support$$">Spieler-Support</a>
           <ul>
             <li><a href="$$support$$#documentation">Dokumentation</a></li>
-            <!--<li><a href="$$manual$$">Ben.-Handbuch<br/>
+            <!--<li><a href="$$manual$$">Ben.-Handbuch<br>
               <span class="menusubtitle">HTML</span></a></li>-->
             <li><a href="$$faq$$">FAQ</a></li>
-            <li><a href="http://www.mag-heut.net" title="Hier wird Ihnen geholfen">Forum<br/>
+            <li><a href="http://www.mag-heut.net" title="Hier wird Ihnen geholfen">Forum<br>
               <span class="menusubtitle">mag-heut.net</span></a></li>
             <li><a href="$$support$$#score">Spielergebnisse</a></li>
             <li><a href="$$statistics$$">Statistiken</a></li>
-            <li><a href="$$lotm$$">LdM Archiv<br/>
+            <li><a href="$$lotm$$">LdM Archiv<br>
               <span class="menusubtitle">Level des Monats</span></a></li>
             <li><a href="$$support$$#bug">Fehlermeldungen</a></li>
             <li><a href="$$support$$#donation">Spenden</a></li>
@@ -44,7 +44,7 @@
       <ul class="mlist">
         <li><a href="$$development$$">Entwicklung</a>
           <ul>
-            <li><a href="http://mail.nongnu.org/mailman/listinfo/enigma-devel">Mailing-Liste<br/>
+            <li><a href="http://mail.nongnu.org/mailman/listinfo/enigma-devel">Mailing-Liste<br>
               <span class="menusubtitle">Entwickler-ML (nongnu)</span></a></li>
             <li><a href="$$development$$#tasks">Feature Wunschliste</a></li>
             <li><a href="$$development$$#level">Levels</a>
@@ -53,7 +53,7 @@
                 <li><a href="$$wiki$$">Enigma Wiki</a></li>
               </ul>
             </li>
-            <li><a href="$$development$$#app">Anwendung<br/>
+            <li><a href="$$development$$#app">Anwendung<br>
               <span class="menusubtitle">Quellcode</span></a>
             </li>
           </ul>

Modified: homepage/input/menu_ru.html
===================================================================
--- homepage/input/menu_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/menu_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -3,7 +3,7 @@
         <li><a href="about_ru.html">?? ????</a>
           <ul>
             <li><a href="about_ru.html#features">???????????</a></li>
-            <li><a href="about_ru.html#testimonials">??????<br/>
+            <li><a href="about_ru.html#testimonials">??????<br>
               <span class="menusubtitle">??????????? ?????????????</span></a></li>
             <li><a href="news_ru.html">??????? ? ?????</a></li>
             <li><a href="screenshots_ru.html">?????????</a></li>
@@ -16,10 +16,10 @@
           <ul>
             <li><a href="download_ru.html#stable">????????? ?????<br>
               <span class="menusubtitle">?????????? ??????</span></a></li>
-            <li><a href="download_ru.html#compilation">??????<br/>
+            <li><a href="download_ru.html#compilation">??????<br>
               <span class="menusubtitle">Linux-???????????</span></a></li>
             <li><a href="download_ru.html#devel">?????? ??????</a></li>
-            <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">???????????<br/>
+            <li><a href="http://lists.nongnu.org/mailman/listinfo/enigma-announce">???????????<br>
               <span class="menusubtitle">???????? ????????? ? ?????? ????? ??????</span></a></li>
           </ul>
         </li>
@@ -29,11 +29,11 @@
           <ul>
             <li><a href="support_ru.html#documentation">????????????</a></li>
             <li><a href="faq_ru.html">FAQ</a></li>
-            <li><a href="http://www.mag-heut.net" title="????? ?? ?????? ???????? ??????">?????<br/>
+            <li><a href="http://www.mag-heut.net" title="????? ?? ?????? ???????? ??????">?????<br>
               <span class="menusubtitle">mag-heut.net</span></a></li>
             <li><a href="support_ru.html#score">??????? ???? ?????????</a></li>
             <li><a href="statistics_ru.html">?????????? ???????????</a></li>
-            <li><a href="lotm_ru.html">????? ??<br/>
+            <li><a href="lotm_ru.html">????? ??<br>
               <span class="menusubtitle">?????? ??????</span></a></li>
             <li><a href="support_ru.html#bug">????????? ?? ???????</a></li>
             <li><a href="support_ru.html#donation">??????</a></li>
@@ -42,7 +42,7 @@
       <ul class="mlist">
         <li><a href="devel_ru.html">??????????</a>
           <ul>
-            <li><a href="http://mail.nongnu.org/mailman/listinfo/enigma-devel">????????<br/>
+            <li><a href="http://mail.nongnu.org/mailman/listinfo/enigma-devel">????????<br>
               <span class="menusubtitle">???????? ??? ????????????? (nongnu)</span></a></li>
             <li><a href="devel_ru.html#tasks">??????? ??????</a></li>
             <li><a href="devel_ru.html#level">??????</a>
@@ -51,7 +51,7 @@
                 <li><a href="http://enigma.mal2.ch/index.php?title=Main_Page">Wiki ???????????</a></li>
               </ul>
             </li>
-            <li><a href="devel_ru.html#app">?????????<br/>
+            <li><a href="devel_ru.html#app">?????????<br>
               <span class="menusubtitle">????????? ???????? ?????</span></a>
             </li>
           </ul>

Modified: homepage/input/powered-by.html
===================================================================
--- homepage/input/powered-by.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/powered-by.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -2,13 +2,13 @@
 <p>Enigma is powered by:</p>
 &nbsp;
 <a href="http://www.libsdl.org">
-<img src="$$imagedir$$/sdl_logo.png" border="0" alt="SDL" /> </a>
+<img src="$$imagedir$$/sdl_logo.png" border="0" alt="SDL"></a>
 &nbsp;
 <a href="http://www.lua.org">
-<img src="$$imagedir$$/lua.png" border="1" alt="Lua" /> </a>
+<img src="$$imagedir$$/lua.png" border="1" alt="Lua"></a>
 &nbsp;
 <a href="http://www.nongnu.org">
-<img src="$$imagedir$$/floating_gnu.png" border="1"  alt="GNU Savannah" /> </a>
+<img src="$$imagedir$$/floating_gnu.png" border="1"  alt="GNU Savannah"></a>
 &nbsp;
 <a href="http://developer.berlios.de">
 <img src="http://developer.berlios.de/bslogo.php?group_id=3972" width="124" height="32" border="0" alt="BerliOS Logo"></a>

Modified: homepage/input/powered-by_de.html
===================================================================
--- homepage/input/powered-by_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/powered-by_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -2,13 +2,13 @@
 <p>Enigma wird unterst&uuml;tzt durch:</p>
 &nbsp;
 <a href="http://www.libsdl.org">
-<img src="$$imagedir$$/sdl_logo.png" border="0" alt="SDL" /> </a>
+<img src="$$imagedir$$/sdl_logo.png" border="0" alt="SDL"></a>
 &nbsp;
 <a href="http://www.lua.org">
-<img src="$$imagedir$$/lua.png" border="1" alt="Lua" /> </a>
+<img src="$$imagedir$$/lua.png" border="1" alt="Lua"></a>
 &nbsp;
 <a href="http://www.nongnu.org">
-<img src="$$imagedir$$/floating_gnu.png" border="1"  alt="GNU Savannah" /> </a>
+<img src="$$imagedir$$/floating_gnu.png" border="1"  alt="GNU Savannah"></a>
 &nbsp;
 <a href="http://developer.berlios.de">
 <img src="http://developer.berlios.de/bslogo.php?group_id=3972" width="124" height="32" border="0" alt="BerliOS Logo"></a>

Modified: homepage/input/powered-by_ru.html
===================================================================
--- homepage/input/powered-by_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/powered-by_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -2,13 +2,13 @@
 <p>Enigma ??????? ? ???????:</p>
 &nbsp;
 <a href="http://www.libsdl.org">
-<img src="$$imagedir$$/sdl_logo.png" border="0" alt="SDL" /> </a>
+<img src="$$imagedir$$/sdl_logo.png" border="0" alt="SDL"></a>
 &nbsp;
 <a href="http://www.lua.org">
-<img src="$$imagedir$$/lua.png" border="1" alt="Lua" /> </a>
+<img src="$$imagedir$$/lua.png" border="1" alt="Lua"></a>
 &nbsp;
 <a href="http://www.nongnu.org">
-<img src="$$imagedir$$/floating_gnu.png" border="1"  alt="GNU Savannah" /> </a>
+<img src="$$imagedir$$/floating_gnu.png" border="1"  alt="GNU Savannah"></a>
 &nbsp;
 <a href="http://developer.berlios.de">
 <img src="http://developer.berlios.de/bslogo.php?group_id=3972" width="124" height="32" border="0" alt="BerliOS Logo"></a>

Modified: homepage/input/press.html
===================================================================
--- homepage/input/press.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/press.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -10,7 +10,7 @@
         >AssociatedContent</a></li>
   <li><a href="http://mac.softpedia.com/get/Games/Enigma.shtml"
         >Softpedia</a></li>
-  <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&mode=info"
+  <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker</a></li>
   <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
         >Computer Bild (German)</a></li>
@@ -20,7 +20,7 @@
         >FAZ.net (German)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
         >Opensource-DVD (German)</a></li>
-  <li><a href="http://www.bonnsite.de/softtip.html?action=show&number=154"
+  <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
         >Bonnsite (German)</a></li>
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
         >Heise (German, 0.81)</a></li>

Modified: homepage/input/press_de.html
===================================================================
--- homepage/input/press_de.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/press_de.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -10,7 +10,7 @@
         >AssociatedContent (englisch)</a></li>
   <li><a href="http://mac.softpedia.com/get/Games/Enigma.shtml"
         >Softpedia (englisch)</a></li>
-  <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&mode=info"
+  <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker (englisch)</a></li>
   <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
         >Computer Bild (deutsch)</a></li>
@@ -20,7 +20,7 @@
         >FAZ.net (deutsch)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
         >Opensource-DVD (deutsch)</a></li>
-  <li><a href="http://www.bonnsite.de/softtip.html?action=show&number=154"
+  <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
         >Bonnsite (deutsch)</a></li>
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
         >Heise (deutsch, 0.81)</a></li>

Modified: homepage/input/press_ru.html
===================================================================
--- homepage/input/press_ru.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/press_ru.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -10,7 +10,7 @@
         >AssociatedContent</a></li>
   <li><a href="http://mac.softpedia.com/get/Games/Enigma.shtml"
         >Softpedia</a></li>
-  <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&mode=info"
+  <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker</a></li>
   <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
         >Computer Bild (German)</a></li>
@@ -20,7 +20,7 @@
         >FAZ.net (German)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
         >Opensource-DVD (German)</a></li>
-  <li><a href="http://www.bonnsite.de/softtip.html?action=show&number=154"
+  <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
         >Bonnsite (German)</a></li>
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
         >Heise (German, 0.81)</a></li>

Modified: homepage/input/validation.html
===================================================================
--- homepage/input/validation.html	2007-11-03 15:44:59 UTC (rev 918)
+++ homepage/input/validation.html	2007-11-04 13:02:35 UTC (rev 919)
@@ -1,7 +1,7 @@
 <p>
     <a href="http://validator.w3.org/">
         <img src="http://www.w3.org/Icons/valid-html401" alt="Valid HTML 4.01 Transitional" style="border:0;width:88px;height:31px">
-    </a><br />
+    </a><br>
     <a href="http://jigsaw.w3.org/css-validator/">
         <img src="http://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS!" style="border:0;width:88px;height:31px">
     </a>



From ral at mail.berlios.de  Wed Nov  7 00:22:12 2007
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 7 Nov 2007 00:22:12 +0100
Subject: [Enigma-game-svn] r920 - trunk/src
Message-ID: <200711062322.lA6NMCcK008817@sheep.berlios.de>

Author: ral
Date: 2007-11-07 00:22:12 +0100 (Wed, 07 Nov 2007)
New Revision: 920

Modified:
   trunk/src/stones_complex.cc
Log:
Trunk 1.1: 
- crash fix: st-chess on multiple fast hits


Modified: trunk/src/stones_complex.cc
===================================================================
--- trunk/src/stones_complex.cc	2007-11-04 13:02:35 UTC (rev 919)
+++ trunk/src/stones_complex.cc	2007-11-06 23:22:12 UTC (rev 920)
@@ -2859,6 +2859,7 @@
                 return Value();
             }
         }
+        return Value();
     }
 
     void ChessStone::alarm() {



From andreasl at mail.berlios.de  Wed Nov  7 16:38:41 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Wed, 7 Nov 2007 16:38:41 +0100
Subject: [Enigma-game-svn] r921 - homepage/input
Message-ID: <200711071538.lA7FcfI6000743@sheep.berlios.de>

Author: andreasl
Date: 2007-11-07 16:38:41 +0100 (Wed, 07 Nov 2007)
New Revision: 921

Modified:
   homepage/input/press.html
   homepage/input/press_de.html
   homepage/input/press_ru.html
Log:
Homepage:
 - Added the Linux Game Tome (happypenguin) to the "In the Press"
   section (last time I updated this, happypenguin was down).
Todo:
 - Russian translation.
 - Validation (only neccessary before next upload, i.e. the
   End-of-Year-Awards-We-Want-Your-Votes-announcement)


Modified: homepage/input/press.html
===================================================================
--- homepage/input/press.html	2007-11-06 23:22:12 UTC (rev 920)
+++ homepage/input/press.html	2007-11-07 15:38:41 UTC (rev 921)
@@ -1,11 +1,13 @@
 <h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
 In the press</h3>
 
-We think it is time to collect articles about Enigma.
+<p>We think it is time to collect articles about Enigma.</p>
 
 <ul>
   <li><a href="http://en.wikipedia.org/wiki/Enigma_%28game%29"
         >Wikipedia</a></li>
+  <li><a href="http://www.happypenguin.org/show?Enigma"
+        >The Linux Game Tome</a></li>
   <li><a href="http://www.associatedcontent.com/article/335780/enigma_classic_memory_game_meets_fastpaced.html"
         >AssociatedContent</a></li>
   <li><a href="http://mac.softpedia.com/get/Games/Enigma.shtml"
@@ -26,5 +28,9 @@
         >Heise (German, 0.81)</a></li>
 </ul>
 
-If you notice or publish yourself an article please let us know
-(<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).
+<p>On &quot;Linux Game Tome&quot;, Enigma even is considered to be one of the
+highest rated games for Linux (as of November 2007), see
+<a href="http://www.happypenguin.org/list?sort=avg_rating">here</a>.</p>
+
+<p>If you notice or publish yourself an article please let us know
+(<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).</p>

Modified: homepage/input/press_de.html
===================================================================
--- homepage/input/press_de.html	2007-11-06 23:22:12 UTC (rev 920)
+++ homepage/input/press_de.html	2007-11-07 15:38:41 UTC (rev 921)
@@ -1,11 +1,13 @@
 <h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Nach oben" border="0" title="back to top"></a>
 In der Presse</h3>
 
-Wir denken, es ist an der Zeit, Artikel &uuml;ber Enigma zu sammeln.
+<p>Wir denken, es ist an der Zeit, Artikel &uuml;ber Enigma zu sammeln.</p>
 
 <ul>
   <li><a href="http://en.wikipedia.org/wiki/Enigma_%28game%29"
         >Wikipedia (englisch)</a></li>
+  <li><a href="http://www.happypenguin.org/show?Enigma"
+        >The Linux Game Tome (englisch)</a></li>
   <li><a href="http://www.associatedcontent.com/article/335780/enigma_classic_memory_game_meets_fastpaced.html"
         >AssociatedContent (englisch)</a></li>
   <li><a href="http://mac.softpedia.com/get/Games/Enigma.shtml"
@@ -26,6 +28,12 @@
         >Heise (deutsch, 0.81)</a></li>
 </ul>
 
-Wenn Ihnen ein Artikel auff&auml;llt, oder Sie einen ver&ouml;ffentlichen,
-lassen Sie uns das bitte wissen (<a
-href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).
+<p>Auf &quot;Linux Game Tome&quot; wird Enigma sogar als eines der am
+h&ouml;chsten bewerteten Spiele f&uuml;r Linux gez&auml;hlt (November 2007),
+siehe <a href="http://www.happypenguin.org/list?sort=avg_rating">hier</a>
+(englisch).</p>
+
+<p>Wenn Ihnen ein Artikel auff&auml;llt, oder Sie einen ver&ouml;ffentlichen,
+lassen Sie uns das bitte wissen
+(<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).</p>
+

Modified: homepage/input/press_ru.html
===================================================================
--- homepage/input/press_ru.html	2007-11-06 23:22:12 UTC (rev 920)
+++ homepage/input/press_ru.html	2007-11-07 15:38:41 UTC (rev 921)
@@ -1,11 +1,13 @@
 <h3><a class="arrowup" href="$$about$$"><img src="$$imagedir$$/nav_up.gif" alt="Up" border="0" title="back to top"></a>
 ? ??????</h3>
 
-?? ?????? ??????? ????? ?????????? ?????? ?? Enigma.
+<p>?? ?????? ??????? ????? ?????????? ?????? ?? Enigma.</p>
 
 <ul>
   <li><a href="http://en.wikipedia.org/wiki/Enigma_%28game%29"
 	>Wikipedia</a></li>
+  <li><a href="http://www.happypenguin.org/show?Enigma"
+        >The Linux Game Tome</a></li>
   <li><a href="http://www.associatedcontent.com/article/335780/enigma_classic_memory_game_meets_fastpaced.html"
         >AssociatedContent</a></li>
   <li><a href="http://mac.softpedia.com/get/Games/Enigma.shtml"
@@ -26,5 +28,10 @@
         >Heise (German, 0.81)</a></li>
 </ul>
 
-???? ?? ????? ??? ???????????? ??????????? ??????, ?????????? ???????? ???
-(<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).
+<p>On &quot;Linux Game Tome&quot;, Enigma even is considered to be one of the
+highest rated games for Linux (as of November 2007), see
+<a href="http://www.happypenguin.org/list?sort=avg_rating">here</a>.</p>
+
+<p>???? ?? ????? ??? ???????????? ??????????? ??????, ?????????? ???????? ???
+(<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).</p>
+



From ged at mail.berlios.de  Thu Nov  8 17:11:57 2007
From: ged at mail.berlios.de (ged at mail.berlios.de)
Date: Thu, 8 Nov 2007 17:11:57 +0100
Subject: [Enigma-game-svn] r922 - homepage/input
Message-ID: <200711081611.lA8GBv0N009554@sheep.berlios.de>

Author: ged
Date: 2007-11-08 17:11:52 +0100 (Thu, 08 Nov 2007)
New Revision: 922

Modified:
   homepage/input/press_ru.html
   homepage/input/testimonials_ru.html
Log:
Homepage: Renewal of translated files

Modified: homepage/input/press_ru.html
===================================================================
--- homepage/input/press_ru.html	2007-11-07 15:38:41 UTC (rev 921)
+++ homepage/input/press_ru.html	2007-11-08 16:11:52 UTC (rev 922)
@@ -15,22 +15,22 @@
   <li><a href="http://www.versiontracker.com/dyn/moreinfo/macosx/21160&amp;mode=info"
         >VersionTracker</a></li>
   <li><a href="http://www.computerbild.de/programme/Enigma-1.01_7766.html"
-        >Computer Bild (German)</a></li>
+        >Computer Bild (????????)</a></li>
   <li><a href="http://www.chip.de/downloads/c1_downloads_19309102.html"
-        >Chip Online (German)</a></li>
+        >Chip Online (????????)</a></li>
   <li><a href="http://software-portal.faz.net/ie/64780/"
-        >FAZ.net (German)</a></li>
+        >FAZ.net (????????)</a></li>
   <li><a href="http://www.opensource-dvd.de/spiele1.htm#enigma"
-        >Opensource-DVD (German)</a></li>
+        >Opensource-DVD (????????)</a></li>
   <li><a href="http://www.bonnsite.de/softtip.html?action=show&amp;number=154"
-        >Bonnsite (German)</a></li>
+        >Bonnsite (????????)</a></li>
   <li><a href="http://www.heise.de/software/download/enigma/20301a24917"
-        >Heise (German, 0.81)</a></li>
+        >Heise (????????, 0.81)</a></li>
 </ul>
 
-<p>On &quot;Linux Game Tome&quot;, Enigma even is considered to be one of the
-highest rated games for Linux (as of November 2007), see
-<a href="http://www.happypenguin.org/list?sort=avg_rating">here</a>.</p>
+<p>?? &quot;Linux Game Tome&quot;, Enigma ???? ????????? ????? ?? ????? ????????????????? ???
+??? Linux (?? ????????? ?? ?????? 2007), ????????
+<a href="http://www.happypenguin.org/list?sort=avg_rating">?????</a>.</p>
 
 <p>???? ?? ????? ??? ???????????? ??????????? ??????, ?????????? ???????? ???
 (<a href="mailto:enigma-devel at nongnu.org">enigma-devel at nongnu.org</a>).</p>

Modified: homepage/input/testimonials_ru.html
===================================================================
--- homepage/input/testimonials_ru.html	2007-11-07 15:38:41 UTC (rev 921)
+++ homepage/input/testimonials_ru.html	2007-11-08 16:11:52 UTC (rev 922)
@@ -91,12 +91,11 @@
 </p>
 
 <p class="quote">
-&ldquo;With a nearly endless number of levels and the entire world to compete
-against, Enigma's challenges will never run out. This game has something for
-everyone, whether you are in the mood for a tough puzzle or a quick test of
-dexterity. I strongly recommend anyone who likes puzzles to download and give
-Enigma a try.&rdquo;</p>
-<p class="author">Ayhoe on <a
+&ldquo;? ????? ??????????? ??????????? ??????? ? ????? ????? ??? ????????????,
+??????????? Enigma ??????? ?? ??????????. ? ???? ???? ??? ??????? ???-?? ????????,
+???????? ?? ??? ??????? ??????????? ??? ??????? ???????? ?? ????????.
+? ????? ?????????? ???????, ???? ???????? ???????????, ??????? ? ??????????? Enigma.&rdquo;</p>
+<p class="author">Ayhoe ?? <a
 href="http://www.associatedcontent.com/article/335780/enigma_classic_memory_game_meets_fastpaced.html"
 >AssociatedContent</a>
 </p>



From ral at mail.berlios.de  Sat Nov 10 21:10:09 2007
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sat, 10 Nov 2007 21:10:09 +0100
Subject: [Enigma-game-svn] r923 - in trunk/src: . stones
Message-ID: <200711102010.lAAKA9nj007145@sheep.berlios.de>

Author: ral
Date: 2007-11-10 21:10:07 +0100 (Sat, 10 Nov 2007)
New Revision: 923

Modified:
   trunk/src/lua.cc
   trunk/src/stones/OxydStone.cc
   trunk/src/stones/OxydStone.hh
Log:
Trunk 1.1: Fair Oxyd Distribution
- new oxyd shuffling with min/max rules as described in new API draft 0.5
- rule "groups" may be single objects or object names
- rule with a single group may request linear=true or circular=true for
  disallowing matching neighbour oxyds as given in the group sequence
- log="solution" lists the selected solution if added to any rule
- log="count" tests all possible solutions
- log="all" lists all possible solutions
- new oxyd attribute "noshuffle" to avoid shuffling of a single oxyd
- new color types FAKE, FART, BOLD (-2,-3,-4) called pseudocolors
Note:
- fair oxyd distribution requires given rules, <= 32 oxyds, no more than
  two oxyds of any standard color - otherwise the simple shuffle takes place
- log="count" may take more than 25 sec if 2 million distributions exist
- log="all" - check the count first!!
- noshuffle is coded for fair shuffle but not yet tested, simple shuffle
  still misses support
- pseudooxyds are mainly prepared in the fair shuffle, but all other
  code is still missing.


Modified: trunk/src/lua.cc
===================================================================
--- trunk/src/lua.cc	2007-11-08 16:11:52 UTC (rev 922)
+++ trunk/src/lua.cc	2007-11-10 20:10:07 UTC (rev 923)
@@ -26,9 +26,10 @@
 #include "server.hh"
 #include "sound.hh"
 #include "options.hh"
+#include "WorldProxy.hh"
 #include "lev/Index.hh"
 #include "lev/Proxy.hh"
-#include "WorldProxy.hh"
+#include "stones/OxydStone.hh"
 #include <list>
 
 #ifndef CXXLUA
@@ -1857,6 +1858,102 @@
     return 1;
 }
 
+static int shuffleOxyd(lua_State *L) {
+    // world, {table}  -- table with 1=(group|obj|name), [2=(group|obj|name], 
+    //                               min=[number], max=[number], circular=true, linear=true
+    //                               log=("solution"|"count"|"all") 
+    OxydStone::LogType logFlag = OxydStone::NOTHING;
+    for (int i = 2; i <= lua_gettop(L); i++) {
+        if (!is_table(L, i)) {
+            throwLuaError(L, "Shuffle oxyds - rule is not a table");
+            return 0;
+        }
+        lua_rawgeti(L, i, 1);
+        if (!(is_group(L, -1) || is_object(L, -1) || lua_isstring(L, -1))) {
+            throwLuaError(L, "Shuffle oxyds - rule first group fault");
+            return 0;
+        }
+        Value group1 = to_value(L, -1);
+        lua_pop(L, 1);
+        lua_rawgeti(L, i, 2);
+        if (!(is_group(L, -1) || is_object(L, -1) || lua_isstring(L, -1) || lua_isnil(L, -1))) {
+            throwLuaError(L, "Shuffle oxyds - rule second group fault");
+            return 0;
+        }
+        Value group2 = to_value(L, -1);
+        bool is_pair = !lua_isnil(L, -1); 
+        lua_pop(L, 1);
+        
+        lua_getfield(L, i, "log");
+        if (!lua_isnil(L, -1) && lua_isstring(L, -1)) {
+            if (0 == strcmp(lua_tostring(L,-1), "solution") && logFlag < OxydStone::SOLUTION) 
+                logFlag = OxydStone::SOLUTION;
+            else if (0 == strcmp(lua_tostring(L,-1), "count") && logFlag < OxydStone::COUNT)
+                logFlag = OxydStone::COUNT;
+            else if (0 == strcmp(lua_tostring(L,-1), "all") && logFlag < OxydStone::ALL)
+                logFlag = OxydStone::ALL;                
+        }
+        lua_pop(L, 1);
+        
+        unsigned short limit;
+        
+        lua_getfield(L, i, "min");
+        if (!lua_isnil(L, -1)) {
+            limit = (unsigned short) ecl::Clamp<int>(lua_tointeger(L, -1), 0, OxydStone::numColorsAvailable());
+            OxydStone::addShuffleRule(is_pair ? OxydStone::RULE_PAIR_MIN : OxydStone::RULE_SINGLE_MIN, 
+                    (unsigned short) limit, group1, group2);
+        }
+        lua_pop(L, 1);
+
+        lua_getfield(L, i, "max");
+        if (!lua_isnil(L, -1)) {
+            limit = (unsigned short) ecl::Clamp<int>(lua_tointeger(L, -1), 0, OxydStone::numColorsAvailable());            
+            OxydStone::addShuffleRule(is_pair ? OxydStone::RULE_PAIR_MAX : OxydStone::RULE_SINGLE_MAX, 
+                    (unsigned short) limit, group1, group2);
+        }
+        lua_pop(L, 1);
+
+        if (!is_pair) {
+            lua_getfield(L, i, "linear");
+            if (lua_isboolean(L, -1) && lua_toboolean(L, -1)) {
+                ObjectList oxyds = group1;
+                Object *firstOxyd = NULL;
+                for (ObjectList::iterator i = oxyds.begin(); i != oxyds.end(); ++i) {
+                    if (firstOxyd == NULL)
+                        firstOxyd = *i;
+                    else {
+                        OxydStone::addShuffleRule(OxydStone::RULE_PAIR_MAX, 0, Value(firstOxyd), Value(*i));
+                        firstOxyd = *i;
+                    }
+                }
+            }
+            lua_pop(L, 1);
+            
+            lua_getfield(L, i, "circular");
+            if (lua_isboolean(L, -1) && lua_toboolean(L, -1)) {
+                ObjectList oxyds = group1;
+                Object *firstOxyd = NULL;
+                Object *leftOxyd = NULL;
+                for (ObjectList::iterator i = oxyds.begin(); i != oxyds.end(); ++i) {
+                    if (firstOxyd == NULL) {
+                        firstOxyd = *i;
+                        leftOxyd = *i;
+                    } else {
+                        OxydStone::addShuffleRule(OxydStone::RULE_PAIR_MAX, 0, Value(leftOxyd), Value(*i));
+                        leftOxyd = *i;
+                    }
+                }
+                if (firstOxyd != NULL && firstOxyd != leftOxyd)
+                    OxydStone::addShuffleRule(OxydStone::RULE_PAIR_MAX, 0, Value(firstOxyd), Value(leftOxyd));
+            }
+            lua_pop(L, 1);
+        }
+        
+    }
+    OxydStone::shuffleColors(logFlag);
+    return 0;
+}
+
 MethodMap tileMethodeMap;
 
 static int dispatchTileWriteAccess(lua_State *L) {
@@ -2187,6 +2284,7 @@
     {getFloor,                      "fl"},
     {getItem,                       "it"},
     {getStone,                      "st"},
+    {shuffleOxyd,                   "shuffleOxyd"},
     {0,0}
 };
 

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2007-11-08 16:11:52 UTC (rev 922)
+++ trunk/src/stones/OxydStone.cc	2007-11-10 20:10:07 UTC (rev 923)
@@ -19,64 +19,194 @@
  */
 
 #include "stones/OxydStone.hh"
+#include "errors.hh"
+#include "main.hh"
 #include "server.hh"
 #include "world.hh"
 
 namespace enigma {
  
-    OxydStone::InstanceList OxydStone::instances;
+    OxydStone::InstanceVector OxydStone::levelOxyds;
+    std::vector<unsigned short> OxydStone::colorsUsageCount;
+    unsigned short OxydStone::shuffledFakeCount;
+    unsigned short OxydStone::shuffledFartCount;
+    unsigned short OxydStone::shuffledBoldCount;
+    bool OxydStone::oddUnshuffledColor;
     
-    OxydStone * OxydStone::clone() { 
-        OxydStone *o = new OxydStone(*this); 
-        instances.push_back(o);
-        if (server::EnigmaCompatibility >= 1.10) {
-            int color = ((instances.size() -1) / 2) % 8;
-            o->set_attrib("color", color);
-        }
-        return o;
+    std::vector<unsigned short> OxydStone::randomOxydIds;
+    std::vector<uint32_t> OxydStone::groupsMembers;
+    std::vector<uint32_t> OxydStone::groupsSharedMembers;
+    std::list<OxydStone::Rule> OxydStone::singleRulesMin;
+    std::list<OxydStone::Rule> OxydStone::singleRulesMax;
+    std::list<OxydStone::Rule> OxydStone::pairRulesMin;
+    std::list<OxydStone::Rule> OxydStone::pairRulesMax;
+    std::list<OxydStone::ShuffleFrame> OxydStone::shuffleStack;
+    unsigned int OxydStone::logBadFrameCount;
+    
+    unsigned short OxydStone::numColorsAvailable() {
+        return COLORCOUNT;  // may dependent on enigma compatibility in future!
     }
     
-    OxydStone::OxydStone()
-    : PhotoStone("st-oxyd"),
-      state(CLOSED)
-    {
-        set_attrib("flavor", "b");
-        set_attrib("color", 0);
+    void OxydStone::addShuffleRule(RuleType type, unsigned short limit, Value group1, Value group2) {
+        Rule r;
+        
+        if (shuffleStack.size() == 0)
+            shuffleStack.push_back(ShuffleFrame());
+                
+        ShuffleFrame &base = shuffleStack.front();
+        
+        r.groupId1 = groupId(group1);
+        r.groupId2 = groupId(group2);
+        r.ruleId = base.rulesLimit.size();
+        
+        base.rulesLimit.push_back(limit);
+        
+        switch (type) {
+            case RULE_SINGLE_MIN:
+                singleRulesMin.push_back(r);
+                break;
+            case RULE_SINGLE_MAX:
+                singleRulesMax.push_back(r);
+                break;
+            case RULE_PAIR_MIN:
+                pairRulesMin.push_back(r);
+                break;
+            case RULE_PAIR_MAX:
+                pairRulesMax.push_back(r);
+                break;
+        }
     }
+        
+    unsigned short OxydStone::groupId(Value v) {
+        ASSERT(levelOxyds.size() < 32, XLevelRuntime, "Oxyd shuffle rule - error more than 32 oxyds");
+        
+        ObjectList objects = v;
+        uint32_t groupOxydMask = 0;
+        int count = 0;
+        for (ObjectList::iterator i = objects.begin(); i != objects.end(); ++i) {
+            for(unsigned short j = 0; j < levelOxyds.size(); ++j) {
+                if ((*i) == levelOxyds[j]) {
+                    groupOxydMask |= 1 << j;
+                    count++;
+                    break;
+                }
+            }
+        }
+        ASSERT(count == objects.size(), XLevelRuntime, "Oxyd shuffle rule - group member identification error");
+        for(unsigned short j = 0; j < groupsMembers.size(); ++j) {
+            if (groupOxydMask == groupsMembers[j])
+                return j;
+        }
+        groupsMembers.push_back(groupOxydMask);
+        return groupsMembers.size() - 1;
+    }
     
-    Value OxydStone::message(const string &m, const Value &val) 
-    {
-        if (m=="closeall") {
-            for (unsigned i=0; i<instances.size(); ++i)
-                instances[i]->change_state(CLOSING);
+    void OxydStone::initColors() {
+        if (colorsUsageCount.size() != 0)
+            return;  // we are already initialized!
+            
+        unsigned short numColors = numColorsAvailable();
+        colorsUsageCount = std::vector<unsigned short>(numColors);
+        std::vector<unsigned short>colorsUsageCountNoShuffle(numColors);
+        shuffledFakeCount = 0;
+        shuffledFartCount = 0;
+        shuffledBoldCount = 0;
+        oddUnshuffledColor = false;
+        
+        InstanceVector autocoloredOxyds;
+        size_t  isize = levelOxyds.size();
+        // count color usage
+        for (size_t i=0; i<isize; ++i) {
+            int color = levelOxyds[i]->getAttr("color");
+            bool declineShuffle = levelOxyds[i]->getAttr("noshuffle");
+            if (color >= 0 && color < numColors) {
+                colorsUsageCount[color]++;
+                if (declineShuffle) colorsUsageCountNoShuffle[color]++;
+            } else {
+                switch (color) {
+                    case AUTO:
+                        ASSERT(!declineShuffle, XLevelRuntime, "Oxyd init colors - autocolored oxyd declined shuffle");
+                        autocoloredOxyds.push_back(levelOxyds[i]);
+                        break;
+                    case FAKE:
+                        if (!declineShuffle) shuffledFakeCount++;
+                        break;
+                    case FART:
+                        if (!declineShuffle) shuffledFartCount++;
+                        break;
+                    case BOLD:
+                        if (!declineShuffle) shuffledBoldCount++;
+                        break;
+                }
+            }
         }
-        else if (m=="shuffle") {
-            shuffle_colors();
+        bool onlyPairs = true;
+        // fill up unpaired oxyds with auto colored oxyds
+        for (int i = 0; i < numColors; i++) {
+            if (colorsUsageCount[i] % 2 == 1) {
+                if (autocoloredOxyds.size() > 0) {
+                    autocoloredOxyds.back()->set_attrib("color", i);
+                    autocoloredOxyds.pop_back();
+                    colorsUsageCount[i]++;
+                } else {
+                    onlyPairs = false;
+                    break;
+                }
+            }
+            if (colorsUsageCountNoShuffle[i] % 2 == 1) {
+                oddUnshuffledColor = true;
+            }
         }
-        else if (m=="trigger" || m=="spitter") {
-            maybe_open_stone();
+        // colors for remaining auto colored oxyds
+        Object *lastObject = NULL;     // keep reference of last colored oxyd
+        unsigned short lastColor;
+        if (autocoloredOxyds.size() % 2 == 1)   
+            onlyPairs = false;  // we will color pairs - one oxyd remains 
+        int dc = 0;
+        while (autocoloredOxyds.size() > 0) {
+            int c = (dc/2) % numColors;
+            if (colorsUsageCount[c] <= 2*(dc/2/numColors) + 1) {
+                lastColor = c;
+                lastObject = autocoloredOxyds.back();
+                lastObject->set_attrib("color", c);
+                autocoloredOxyds.pop_back();
+                colorsUsageCount[c]++;
+            }
+            dc++;
         }
-        else if (m=="signal" && to_int(val) != 0) {
-            maybe_open_stone();
+        // substitute odd oxyd with a fake one
+        if (!onlyPairs && lastObject != NULL) {
+            lastObject->set_attrib("color", FAKE);
+            colorsUsageCount[lastColor]--;
+            shuffledFakeCount++;
         }
-        else if (m=="init") {
-            // odd number of oxyd stones in the level? no problem, turn a
-            // random one into a fake oxyd
+    }
     
-            if (instances.size() % 2) {
-                // "odd number of oxyd stones";
-                // TODO
+    void OxydStone::shuffleColors(LogType logFlag) {
+        initColors();
+        
+        unsigned short numColors = numColorsAvailable();
+        bool onlyPairs = true;
+        for (int i = 0; i < numColors; i++) {
+            if (colorsUsageCount[i] != 0 && colorsUsageCount[i] != 2) {
+                onlyPairs = false;
+                break;
             }
         }
-        return Value();
+        
+        if (shuffleStack.size() > 0  && onlyPairs && levelOxyds.size() < 32)
+            fairShuffleColors(logFlag);
+        else
+            simpleShuffleColors();
     }
     
-    void OxydStone::shuffle_colors() 
-    {
+    void OxydStone::simpleShuffleColors() {
+        // TODO support for noshuffle and pseudo
+        
         std::vector<size_t> closed_oxyds;
-        size_t         isize = instances.size();
+        size_t  isize = levelOxyds.size();
         for (size_t i=0; i<isize; ++i) {
-            if (instances[i]->state == CLOSED) {
+            if (levelOxyds[i]->animState == CLOSED) {
                 closed_oxyds.push_back(i);
             }
         }
@@ -87,8 +217,8 @@
                 unsigned a = IntegerRand(0, static_cast<int> (size-2));
                 if (a >= i) ++a;        // make a always different from j
     
-                OxydStone *o1 = instances[closed_oxyds[i]];
-                OxydStone *o2 = instances[closed_oxyds[a]];
+                OxydStone *o1 = levelOxyds[closed_oxyds[i]];
+                OxydStone *o2 = levelOxyds[closed_oxyds[a]];
     
                 Value icolor = o1->getAttr("color"); 
     
@@ -98,15 +228,568 @@
         }
     }
     
-    void OxydStone::change_state(State newstate) 
-    {
+    void OxydStone::fairShuffleColors(LogType logFlag) {        
+        // generate sequence of oxyds for randomness of distribution
+        // TODO exclude noshuffle pseudo oxyds
+        randomOxydIds = std::vector<unsigned short>(levelOxyds.size());
+        for (int i = 0; i < randomOxydIds.size(); i++)
+            randomOxydIds[i] = i;
+        for (int i = 0; i < randomOxydIds.size() - 1; i++) {
+            int j = IntegerRand(i, randomOxydIds.size() - 1);  // use enigma's internal rand!
+            unsigned short t = randomOxydIds[i];
+            randomOxydIds[i] = randomOxydIds[j];
+            randomOxydIds[j] = t;
+        }
+        
+//        log_shuffle_basis();
+        
+        if (groupsSharedMembers.size() == 0) {
+            // first shuffle call for given rules - initialize base frame
+            // TODO exclude noshuffle pseudo oxyds
+            
+            // evaluate all group members that are shared with another group
+            for (int i = 0; i < groupsMembers.size(); i++) {
+                uint32_t shared = 0;
+                for (int j = 0; j < groupsMembers.size(); j++) {
+                    if (i != j)
+                        shared |= (groupsMembers[i] & groupsMembers[j]);
+                }
+                groupsSharedMembers.push_back(shared);
+            }
+            
+            // init oxyd pair candidates
+            uint32_t all = (1 << (levelOxyds.size())) - 1;  // a 1 for every oxyd
+            unsigned short numOxyds = levelOxyds.size();
+            ShuffleFrame &base = shuffleStack.front();
+            for (int i = 0; i < numOxyds; i++) {
+                base.oxydsCandidatesCount.push_back(numOxyds - 1); // all but itself
+                base.oxydsCandidatesMask.push_back(all & ~(1 << i));   // all but itself
+            }
+            base.freeOxydsMask = all;
+            base.freePseudoCount = shuffledFakeCount + shuffledFartCount + shuffledBoldCount;
+            base.freePairsCount = 0;
+            for (int i = 0; i < numColorsAvailable(); i++) {
+                base.freePairsCount += colorsUsageCount[i];
+            }
+            base.selOxyd1Mask = 0;  // no oxyd assigned in this frame
+            base.selOxyd2Mask = 0;
+            base.openedOxydIndex = 0;
+        }
+        log_shuffle_basis();
+        log_shuffle_stack();
+        logBadFrameCount = 0;
+        
+        if (logFlag == NOTHING) logFlag = SOLUTION;
+        
+        int result = evaluateTopFrame(logFlag);
+        
+        if (logFlag >= COUNT)
+            Log << "Fair Shuffle found " << result << " solutions -  bad frames " << logBadFrameCount << "\n";
+        else if (logFlag == SOLUTION)
+            Log << "Fair Shuffle bad frames " << logBadFrameCount << "\n";
+        
+    }
+    
+    int OxydStone::evaluateTopFrame(LogType logFlag) {
+        unsigned short numOxyds = levelOxyds.size();
+        ShuffleFrame &top = shuffleStack.back();
+        int solutionsCount = 0;
+                
+        // postprocess frame for chosen oxyds
+        if (top.selOxyd1Mask != 0) {   // skip for base frame
+            
+            // check that a chosen oxyd pair with both oxyds of given fixed color do 
+            // not mismatch in color - refuse on mismatch.
+            if (top.selOxyd2Mask != 0) {
+                OxydStone *o1 = levelOxyds[oxydId(top.selOxyd1Mask)];
+                OxydStone *o2 = levelOxyds[oxydId(top.selOxyd2Mask)];
+                if ((to_bool(o1->getAttr("noshuffle")) || blinking_or_opening(o1)) &&
+                        (to_bool(o2->getAttr("noshuffle")) || blinking_or_opening(o2)) &&
+                        (int)(o1->getAttr("color")) >= 0 &&  (int)(o2->getAttr("color")) >= 0 &&
+                        o1->getAttr("color") != o2->getAttr("color")) {
+                    logBadFrameCount++;
+                    return 0;
+                }
+            }
+            
+            // remove chosen oxyds from list of disposable oxyds  
+            top.freeOxydsMask &= ~top.selOxyd1Mask & ~top.selOxyd2Mask;
+            
+            // reduce free counts
+            if (top.selOxyd2Mask != 0)
+                top.freePairsCount--;
+            else
+                top.freePseudoCount--;
+            
+            // remove chosen oxyds from oxyd pair candidate lists
+            uint32_t imask = 1;
+            for (int i = 0; i < numOxyds; i++, imask <<= 1) {
+                // need only to update oxyds that still need to be distributed
+                if (top.freeOxydsMask & imask) {
+                    if (top.oxydsCandidatesMask[i] & top.selOxyd1Mask) top.oxydsCandidatesCount[i]--;
+                    if (top.oxydsCandidatesMask[i] & top.selOxyd2Mask) top.oxydsCandidatesCount[i]--;
+                    top.oxydsCandidatesMask[i] &= top.freeOxydsMask;
+                }
+            }
+            
+            // reduce limits for affected rules
+            if (top.selOxyd2Mask != 0) {   // pseudooxyds can not affect rules 
+                for (std::list<Rule>::iterator itr = singleRulesMin.begin();
+                        itr != singleRulesMin.end(); ++itr) {
+                    uint32_t groupOxydMask = groupsMembers[(*itr).groupId1];
+                    if (groupOxydMask & top.selOxyd1Mask && groupOxydMask & top.selOxyd2Mask)
+                        top.rulesLimit[(*itr).ruleId]--;
+                }
+                for (std::list<Rule>::iterator itr = singleRulesMax.begin();
+                        itr != singleRulesMax.end(); ++itr) {
+                    uint32_t groupOxydMask = groupsMembers[(*itr).groupId1];
+                    if (groupOxydMask & top.selOxyd1Mask && groupOxydMask & top.selOxyd2Mask)
+                        top.rulesLimit[(*itr).ruleId]--;
+                }
+                for (std::list<Rule>::iterator itr = pairRulesMin.begin();
+                        itr != pairRulesMin.end(); ++itr) {
+                    uint32_t group1_oxyds = groupsMembers[(*itr).groupId1];
+                    uint32_t group2_oxyds = groupsMembers[(*itr).groupId2];
+                    if ((group1_oxyds & top.selOxyd1Mask && group2_oxyds & top.selOxyd2Mask) ||
+                            (group1_oxyds & top.selOxyd2Mask && group2_oxyds & top.selOxyd1Mask))
+                        top.rulesLimit[(*itr).ruleId]--;
+                }
+                for (std::list<Rule>::iterator itr = pairRulesMax.begin();
+                        itr != pairRulesMax.end(); ++itr) {
+                    uint32_t group1_oxyds = groupsMembers[(*itr).groupId1];
+                    uint32_t group2_oxyds = groupsMembers[(*itr).groupId2];
+                    if ((group1_oxyds & top.selOxyd1Mask && group2_oxyds & top.selOxyd2Mask) ||
+                            (group1_oxyds & top.selOxyd2Mask && group2_oxyds & top.selOxyd1Mask))
+                        top.rulesLimit[(*itr).ruleId]--;
+                }
+                
+            }
+        }
+        
+        // reduce pair candidates due to max rules
+        
+        // single group rules
+        for (std::list<Rule>::iterator itr = singleRulesMax.begin();
+                itr != singleRulesMax.end(); ++itr) {
+            if (top.rulesLimit[(*itr).ruleId] == 0) {
+                uint32_t hot_group_oxyds = groupsMembers[(*itr).groupId1] & top.freeOxydsMask;
+                for (int j = 0; j < numOxyds; j++) {
+                    if (hot_group_oxyds & (1 << j)) {
+                        // eliminate group mates from list of candidates
+                        top.oxydsCandidatesMask[j] &= ~groupsMembers[(*itr).groupId1];
+                        top.oxydsCandidatesCount[j] = countOxyds(top.oxydsCandidatesMask[j]);
+                    }
+                }
+                top.rulesLimit[(*itr).ruleId] = -1;  // mark rule as fulfilled
+            }
+        }
+        // pair group rules
+        for (std::list<Rule>::iterator itr = pairRulesMax.begin();
+                itr != pairRulesMax.end(); ++itr) {
+            if (top.rulesLimit[(*itr).ruleId] == 0) {
+                uint32_t hot_group_oxyds1 = groupsMembers[(*itr).groupId1] & top.freeOxydsMask;
+                uint32_t hot_group_oxyds2 = groupsMembers[(*itr).groupId2] & top.freeOxydsMask;
+                for (int j = 0; j < numOxyds; j++) {
+                    if (hot_group_oxyds1 & (1 << j)) {
+                        // eliminate pair group oxyds from list of candidates
+                        top.oxydsCandidatesMask[j] &= ~groupsMembers[(*itr).groupId2];
+                        top.oxydsCandidatesCount[j] = countOxyds(top.oxydsCandidatesMask[j]);
+                    }
+                    // no else as a single oxyd can be in both groups
+                    if (hot_group_oxyds2 & (1 << j)) {  
+                        // eliminate pair group oxyds from list of candidates
+                        top.oxydsCandidatesMask[j] &= ~groupsMembers[(*itr).groupId1];
+                        top.oxydsCandidatesCount[j] = countOxyds(top.oxydsCandidatesMask[j]);
+                    }
+                }
+                top.rulesLimit[(*itr).ruleId] = -1;  // mark rule as fulfilled
+            }
+        }
+
+
+        // check if we have a free oxyd without any possibility to assign it
+        if (top.freePseudoCount == 0) {
+            for (int j = 0; j < numOxyds; j++) {
+                if (top.freeOxydsMask & (1 << j)) {
+                    if (top.oxydsCandidatesCount[j] == 0) {
+                        logBadFrameCount++;
+                        return 0;
+                    }
+                }
+            }
+        }
+        
+        // check if we are ready
+        if (top.freeOxydsMask == 0) {
+            // final complete min rules check
+            for (std::list<Rule>::iterator itr = singleRulesMin.begin();
+                    itr != singleRulesMin.end(); ++itr) {
+                if (top.rulesLimit[(*itr).ruleId] > 0) {
+                    // min rule not fulfilled - sorry we do not have a solution
+                    logBadFrameCount++;
+                    return 0;
+                }
+            }
+            for (std::list<Rule>::iterator itr = pairRulesMin.begin();
+                    itr != pairRulesMin.end(); ++itr) {
+                if (top.rulesLimit[(*itr).ruleId] > 0) {
+                    // min rule not fulfilled - sorry we do not have a solution
+                    logBadFrameCount++;
+                    return 0;
+                }
+            }
+            
+            // now it is official - we have a legal distribution
+//            log_shuffle_stack();
+            colorShuffleDistribtion(logFlag);
+            return 1;
+        }
+        
+        // quick partial check for min rules that can obviously not be fulfilled
+        for (std::list<Rule>::iterator itr = singleRulesMin.begin();
+                itr != singleRulesMin.end(); ++itr) {
+            if (top.rulesLimit[(*itr).ruleId] * 2 > countOxyds(top.freeOxydsMask & groupsMembers[(*itr).groupId1])) {
+                logBadFrameCount++;
+                return 0;
+            }
+        }
+        for (std::list<Rule>::iterator itr = pairRulesMin.begin();
+                itr != pairRulesMin.end(); ++itr) {
+            if ((top.rulesLimit[(*itr).ruleId] > countOxyds(top.freeOxydsMask & groupsMembers[(*itr).groupId1])) ||
+                    (top.rulesLimit[(*itr).ruleId] > countOxyds(top.freeOxydsMask & groupsMembers[(*itr).groupId2]))) {
+                logBadFrameCount++;
+                return 0;
+            }
+        }
+        
+        
+        // assign next oxyds
+        ShuffleFrame next = top;
+        next.selOxyd1Mask = 0;
+        next.selOxyd2Mask = 0;
+
+        // opened oxyd pairs first
+        for (;next.openedOxydIndex < numOxyds; next.openedOxydIndex++) {
+            if (levelOxyds[next.openedOxydIndex]->animState == OPEN) {
+                int c = levelOxyds[next.openedOxydIndex]->getAttr("color");
+                for (int i = next.openedOxydIndex+1; i < numOxyds; i++) {
+                    if (levelOxyds[i]->getAttr("color") == c) {
+                        next.selOxyd1Mask = 1 << next.openedOxydIndex;
+                        next.selOxyd2Mask = 1 << i;
+                        next.openedOxydIndex++;
+                        shuffleStack.push_back(next);    // add copy of next frame
+                        int result = evaluateTopFrame(logFlag);
+                        shuffleStack.pop_back();         // remove the copy
+                        return result;
+                    }
+                }
+            }
+        }
+        
+        // pairs of noshuffle standard oxyds including a possible blinking oxyd
+        // TODO - not essential but a speedup to select known pairs first
+        
+        
+        // fast handling of oxyd pairs mandatory due to min rules 
+        // bypass on existing noshuffles, bypass on COUNT & ALL solutions
+        if (logFlag < COUNT && !oddUnshuffledColor) {
+            for (std::list<Rule>::iterator itr = singleRulesMin.begin();
+                    itr != singleRulesMin.end(); ++itr) {
+                // rule not yet fulfilled and group is disjoint in remaining members to all other groups 
+                if ((top.rulesLimit[(*itr).ruleId] > 0) && 
+                        ((groupsSharedMembers[(*itr).groupId1] & top.freeOxydsMask) == 0)) {
+                    // we can assign a random pair in this group
+                    next.selOxyd1Mask = randomMember(groupsMembers[(*itr).groupId1] & top.freeOxydsMask);
+                    next.selOxyd2Mask = randomMember(groupsMembers[(*itr).groupId1] & top.freeOxydsMask
+                            & ~next.selOxyd1Mask);
+                    shuffleStack.push_back(next);    // add copy of next frame
+                    int result = evaluateTopFrame(logFlag);
+                    shuffleStack.pop_back();         // remove the copy
+                    return result;
+                }
+            }
+            for (std::list<Rule>::iterator itr = pairRulesMin.begin();
+                    itr != pairRulesMin.end(); ++itr) {
+                // rule not yet fulfilled and groups are disjoint in remaining members to all other groups 
+                if ((top.rulesLimit[(*itr).ruleId] > 0) && 
+                        ((groupsSharedMembers[(*itr).groupId1] & top.freeOxydsMask) == 0) &&
+                        ((groupsSharedMembers[(*itr).groupId2] & top.freeOxydsMask) == 0) ) {
+                    // we can assign a random pair between these groups
+                    next.selOxyd1Mask = randomMember(groupsMembers[(*itr).groupId1] & top.freeOxydsMask);
+                    next.selOxyd2Mask = randomMember(groupsMembers[(*itr).groupId2] & top.freeOxydsMask);
+                    shuffleStack.push_back(next);    // add copy of next frame
+                    int result = evaluateTopFrame(logFlag);
+                    shuffleStack.pop_back();         // remove the copy
+                    return result;
+                }
+            }
+        }
+        
+        
+        
+        // unrestricted assignment of a new pair or a single pseudo
+        
+        // search oxyd with lowest degree of freedom for pair candidates
+        unsigned short minFreeOxydId = numOxyds;  // impossible id 
+        for (int i = 0; i < numOxyds; i++) {
+            unsigned short j = randomOxydIds[i];
+            if (next.freeOxydsMask & (1 << j)) {
+                if (minFreeOxydId == numOxyds)
+                    minFreeOxydId = j;
+                else if (next.oxydsCandidatesCount[j] < next.oxydsCandidatesCount[minFreeOxydId])
+                    minFreeOxydId = j;
+            }
+        }
+        // try to assign all pair candidates to this oxyd 
+        if (next.oxydsCandidatesCount[minFreeOxydId] > 0) {
+            next.selOxyd1Mask = 1 << minFreeOxydId;
+            uint32_t candidates = next.oxydsCandidatesMask[minFreeOxydId];
+            // check all candidates in random sequence
+            for (int i = 0; i < numOxyds; i++) {
+                unsigned short j = randomOxydIds[i];
+                if (candidates & (1 << j)) {
+                    next.selOxyd2Mask = 1 << j;
+                    shuffleStack.push_back(next);    // add copy of next frame
+                    int result = evaluateTopFrame(logFlag);
+                    shuffleStack.pop_back();         // remove the copy
+                    if (result > 0 && logFlag < COUNT)  // found solution - finish
+                        return result;
+                    // sum solutions
+                    solutionsCount += result;
+                }
+            }
+        }
+        
+        // try to assign a single pseudo oxyd
+        // TODO
+        
+        return solutionsCount;
+    }
+    
+    void OxydStone::colorShuffleDistribtion(LogType logFlag) {
+        if (logFlag == COUNT)
+            return;
+            
+        unsigned short numColors = numColorsAvailable();
+        std::vector<unsigned short> colorsRemainCount = colorsUsageCount;
+        unsigned short remainFakeCount = shuffledFakeCount;
+        unsigned short remainFartCount = shuffledFartCount;
+        unsigned short remainBoldCount = shuffledBoldCount;
+        
+        // distribute colors of pairs with noshuffle, open, blinking oxyds and the pseudooxyds
+        for (std::list<ShuffleFrame>::iterator itr = shuffleStack.begin(); itr != shuffleStack.end(); ++itr) {
+            (*itr).isColored = false;
+            if ((*itr).selOxyd1Mask != 0) {
+                if ((*itr).selOxyd2Mask == 0) {
+                    // a single oxyd -- it must be a pseudo
+                    OxydStone *oxyd = levelOxyds[oxydId((*itr).selOxyd1Mask)];
+                    ASSERT((int)oxyd->getAttr("color") < AUTO, XLevelRuntime, "Oxyd shuffle - pseudo coloring error");
+                    ASSERT(shuffledFakeCount + shuffledFartCount + shuffledBoldCount > 0, XLevelRuntime, "Oxyd shuffle - to few pseudo colors");
+                    int i = IntegerRand(1, shuffledFakeCount + shuffledFartCount + shuffledBoldCount);  // use enigma's internal rand!
+                    if (i <= shuffledFakeCount) {
+                        shuffledFakeCount--;
+                        oxyd->set_attrib("color", FAKE);
+                    } else if ( i <= shuffledFakeCount + shuffledFartCount) {
+                        shuffledFartCount--;
+                        oxyd->set_attrib("color", FART);
+                    } else {
+                        shuffledBoldCount--;
+                        oxyd->set_attrib("color", BOLD);
+                    }
+                    (*itr).isColored = true;
+                } else {
+                    // check if one of the pairs oxyds determines the color
+                    OxydStone *oxyd1 = levelOxyds[oxydId((*itr).selOxyd1Mask)];
+                    OxydStone *oxyd2 = levelOxyds[oxydId((*itr).selOxyd2Mask)];
+                    int c = AUTO;
+                    if (oxyd1->animState == OPEN) {
+                        // a pair of opened oxyds - we need not to recolor
+                        // but we need to register the used color
+                        c = oxyd1->getAttr("color");
+                        colorsRemainCount[c] -= 2;                        
+                        (*itr).isColored = true;
+                    }
+                    else if (to_bool(oxyd1->getAttr("noshuffle")) || blinking_or_opening(oxyd1)) {
+                        c = oxyd1->getAttr("color");
+                        oxyd2->set_attrib("color", c);
+                        colorsRemainCount[c] -= 2;
+                        (*itr).isColored = true;
+                    }
+                    else if (to_bool(oxyd2->getAttr("noshuffle")) || blinking_or_opening(oxyd2)) {
+                        c = oxyd2->getAttr("color");
+                        oxyd1->set_attrib("color", c);
+                        colorsRemainCount[c] -= 2;
+                        (*itr).isColored = true;
+                    }
+                }
+            }
+        }
+        
+        // distribute free colorable oxyd pairs
+        
+        // shuffle remaining colors
+        std::vector<unsigned short> colorPairs;
+        for (int c = 0; c < numColors; c++) {
+            for (int i = 0; i < colorsRemainCount[c] / 2; i++) {
+                colorPairs.push_back(c);
+            }
+        }
+        for (int i = 0; i < (int)colorPairs.size() - 1; i++) {  // cast is essential for sub.!
+            int j = IntegerRand(i, colorPairs.size() - 1);  // use enigma's internal rand!
+            unsigned short t = colorPairs[i];
+            colorPairs[i] = colorPairs[j];
+            colorPairs[j] = t;
+        }
+        // color the remaining pairs on the stack
+        int ci = 0;
+        for (std::list<ShuffleFrame>::iterator itr = shuffleStack.begin(); itr != shuffleStack.end(); ++itr) {
+            if (!(*itr).isColored && (*itr).selOxyd1Mask != 0) {
+                levelOxyds[oxydId((*itr).selOxyd1Mask)]->set_attrib("color", colorPairs[ci]);
+                levelOxyds[oxydId((*itr).selOxyd2Mask)]->set_attrib("color", colorPairs[ci]);
+                ci++;
+            }
+        }
+         
+        
+        if (logFlag > NOTHING) {
+            Log << "Shuffle solution found: ";
+            int depth = 0;
+            for (std::list<ShuffleFrame>::iterator itr = shuffleStack.begin(); itr != shuffleStack.end(); ++itr, depth++) {
+                if ((*itr).selOxyd2Mask != 0)
+                    Log << ecl::strf("(%d-%d),", oxydId((*itr).selOxyd1Mask), oxydId((*itr).selOxyd2Mask));
+                else if ((*itr).selOxyd1Mask != 0)
+                    Log << ecl::strf("(%d),", oxydId((*itr).selOxyd1Mask));
+            }
+            Log << std::endl;
+        }
+    }
+    
+    unsigned short OxydStone::countOxyds(uint32_t members) {
+        unsigned short numOxyds = levelOxyds.size();
+        unsigned short result = 0;
+        for (int j = 0; j < numOxyds; j++) {
+            if (members & 1)
+                result++;
+            members = members >> 1;
+        }
+        return result;
+    }
+    
+    uint32_t OxydStone::randomMember(uint32_t members) {
+        ASSERT(members != 0, XLevelRuntime, "Oxyd shuffle - random member out of no selection");
+        
+        unsigned short numOxyds = levelOxyds.size();
+        for (int i = 0; i < numOxyds; i++) {
+            uint32_t candidate = (1 << randomOxydIds[i]);
+            if (members & candidate) {
+                return candidate;
+            }
+        }
+        ASSERT(false, XLevelRuntime, "Oxyd shuffle - random member no candidate found");
+        return 0;
+    }
+    
+    unsigned short OxydStone::oxydId(uint32_t mask) {
+        unsigned short numOxyds = levelOxyds.size();
+        for (unsigned short i = 0; i < numOxyds; i++) {
+            if (mask == 1)
+                return i;
+            mask >>= 1;
+        }
+        ASSERT(false, XLevelRuntime, "Oxyd shuffle - oxydId attempt to convert bad mask");
+    }
+    
+    void OxydStone::log_shuffle_basis() {
+        Log << "Oxyd Shuffle basis data\n";
+        for (int i=0; i < groupsMembers.size(); i++)
+            Log << ecl::strf("Group %d - %X\n", i, groupsMembers[i]);
+        for (int i=0; i < groupsSharedMembers.size(); i++)
+            Log << ecl::strf("Group shared members %d - %X\n", i, groupsSharedMembers[i]);
+        for (std::list<Rule>::iterator itr = singleRulesMin.begin();
+                itr != singleRulesMin.end(); ++itr)
+            Log << ecl::strf("Single Min Rule - id %d - group %d\n", (*itr).ruleId, (*itr).groupId1); 
+        for (std::list<Rule>::iterator itr = singleRulesMax.begin();
+                itr != singleRulesMax.end(); ++itr)
+            Log << ecl::strf("Single Max Rule - id %d - group %d\n", (*itr).ruleId, (*itr).groupId1); 
+        for (std::list<Rule>::iterator itr = pairRulesMin.begin();
+                itr != pairRulesMin.end(); ++itr)
+            Log << ecl::strf("Pair Min Rule - id %d - group %d - group %d\n", (*itr).ruleId, (*itr).groupId1, (*itr).groupId2); 
+        for (std::list<Rule>::iterator itr = pairRulesMax.begin();
+                itr != pairRulesMax.end(); ++itr)
+            Log << ecl::strf("Pair Max Rule - id %d - group %d - group %d\n", (*itr).ruleId, (*itr).groupId1, (*itr).groupId2);
+        for (int i=0; i < randomOxydIds.size(); i++)
+            Log << ecl::strf("Sequence %d - oxyd %d\n", i, randomOxydIds[i]);  
+    }
+    
+    void OxydStone::log_shuffle_stack() {
+        int depth = 0;
+        for (std::list<ShuffleFrame>::iterator itr = shuffleStack.begin(); itr != shuffleStack.end(); ++itr, depth++) {
+            Log << ecl::strf("Stack frame %d -- freeOxydsMask %X\n", depth, (*itr).freeOxydsMask);
+            for (int i=0; i < (*itr).oxydsCandidatesMask.size(); i++)
+                 Log << ecl::strf("Oxyd %d - candidates %X - num %d\n", i, 
+                        (*itr).oxydsCandidatesMask[i], (*itr).oxydsCandidatesCount[i]);
+            for (int i=0; i < (*itr).rulesLimit.size(); i++)
+                 Log << ecl::strf("Rule %d - limit %d\n", i, (*itr).rulesLimit[i]);
+        }
+    }
+    
+    void OxydStone::invalidateShuffle() {
+        shuffleStack.clear();
+        groupsMembers.clear();
+        groupsSharedMembers.clear();
+        singleRulesMin.clear();
+        singleRulesMax.clear();
+        pairRulesMin.clear();
+        pairRulesMax.clear();
+        colorsUsageCount.clear();
+    }
+    
+    OxydStone::OxydStone() : PhotoStone("st-oxyd"), animState (CLOSED) {
+        set_attrib("flavor", "b");
+        set_attrib("color", AUTO);
+    }
+    
+    OxydStone * OxydStone::clone() { 
+        OxydStone *o = new OxydStone(*this); 
+        levelOxyds.push_back(o);
+        invalidateShuffle();
+        return o;
+    }
+    
+    void OxydStone::dispose() {
+        levelOxyds.erase(find(levelOxyds.begin(), levelOxyds.end(), this));
+        invalidateShuffle();
+        delete this;
+    }
+    
+    Value OxydStone::message(const string &m, const Value &val) {
+        if (m=="closeall") {
+            for (unsigned i=0; i<levelOxyds.size(); ++i)
+                levelOxyds[i]->change_state(CLOSING);
+        }
+        else if (m=="shuffle") {
+            shuffleColors();
+        }
+        else if (m=="trigger" || m=="spitter") {
+            maybe_open_stone();
+        }
+        else if (m=="signal" && to_int(val) != 0) {
+            maybe_open_stone();
+        }
+        else if (m=="init") {
+            initColors();
+        }
+        return Value();
+    }
+    
+    void OxydStone::change_state(State newstate) {
         string flavor(getAttr("flavor","a"));
         string color(getAttr("color", 0));
     
         string modelname = string("st-oxyd") + flavor + color;
     
-        State oldstate = state;
-        state = newstate;
+        State oldstate = animState;
+        animState = newstate;
     
         switch (newstate) {
         case CLOSED:
@@ -127,8 +810,8 @@
             }
             /* If this was the last closed oxyd stone, finish the
                level */
-            if (find_if(instances.begin(),instances.end(),not_open)
-                    == instances.end()) {
+            if (find_if(levelOxyds.begin(),levelOxyds.end(),not_open)
+                    == levelOxyds.end()) {
                 server::FinishLevel();
             }
             break;
@@ -144,7 +827,7 @@
     
         case CLOSING:
             if (oldstate == CLOSED || oldstate==CLOSING) {
-                state = oldstate;
+                animState = oldstate;
                 return;
             }
     
@@ -159,23 +842,23 @@
     }
     
     void OxydStone::animcb() {
-        if (state == CLOSING)
+        if (animState == CLOSING)
             change_state(CLOSED);
-        else if (state == OPENING)
+        else if (animState == OPENING)
             change_state(BLINKING);
-        else if (state == OPEN)
+        else if (animState == OPEN)
             change_state(OPEN); // set the right model
     }
     
     void OxydStone::maybe_open_stone() {
-        if (state == CLOSED || state == CLOSING) {
+        if (animState == CLOSED || animState == CLOSING) {
             Value mycolor = getAttr("color");
     
             // Is another oxyd stone currently blinking?
-            InstanceList::iterator i;
-            i=find_if(instances.begin(), instances.end(), blinking_or_opening);
+            InstanceVector::iterator i;
+            i=find_if(levelOxyds.begin(), levelOxyds.end(), blinking_or_opening);
     
-            if (i != instances.end()) {
+            if (i != levelOxyds.end()) {
     
                 bool can_open;
     
@@ -184,7 +867,7 @@
                     // open both stones. Close one of them otherwise.
                     // (This is the Oxyd behaviour; it doesn't work with
                     // some Enigma levels.)
-                    can_open = (mycolor == (*i)->getAttr("color") && (*i)->state==BLINKING);
+                    can_open = (mycolor == (*i)->getAttr("color") && (*i)->animState==BLINKING);
                 }
                 else 
                     can_open = (mycolor == (*i)->getAttr("color"));
@@ -208,8 +891,7 @@
         maybe_open_stone();
     }
     
-    void OxydStone::on_creation (GridPos) 
-    {
+    void OxydStone::on_creation (GridPos) {
         string flavor(getAttr("flavor", "a"));
         set_model(string("st-oxyd") + flavor);
         photo_activate();
@@ -219,8 +901,7 @@
         return !getAttr("static").to_bool();
     }
     
-    void OxydStone::on_removal(GridPos p) 
-    {
+    void OxydStone::on_removal(GridPos p) {
         photo_deactivate();
         kill_model (p);
     }

Modified: trunk/src/stones/OxydStone.hh
===================================================================
--- trunk/src/stones/OxydStone.hh	2007-11-08 16:11:52 UTC (rev 922)
+++ trunk/src/stones/OxydStone.hh	2007-11-10 20:10:07 UTC (rev 923)
@@ -22,6 +22,7 @@
 
 #include "stones.hh"
 #include "laser.hh"
+#include <stdint.h>
 
 /* -------------------- Oxyd stone -------------------- */
 
@@ -57,54 +58,118 @@
 
 namespace enigma {
 
+    /**
+     * 
+     */
     class OxydStone : public PhotoStone {
-        typedef std::vector<OxydStone *> InstanceList;
-        static InstanceList instances;
-        OxydStone * clone();
-        void dispose() {
-            instances.erase(find(instances.begin(), instances.end(), this));
-            delete this;
-        }
-
     public:
+        enum RuleType {RULE_SINGLE_MIN, RULE_SINGLE_MAX, RULE_PAIR_MIN, RULE_PAIR_MAX};
+        enum Color {BLUE = 0, RED, GREEN, YELLOW, CYAN, PURPLE, WHITE, BLACK, 
+            COLORCOUNT,
+            AUTO = -1,
+            FAKE = -2,
+            FART = -3,
+            BOLD = -4,
+            MIN  = -4
+        };
+        enum LogType {NOTHING, SOLUTION, COUNT, ALL};
+            
+        static unsigned short numColorsAvailable();
+        static void addShuffleRule(RuleType type, unsigned short limit, Value group1, Value group2 = Value());
+        static void shuffleColors(LogType logFlag = NOTHING);
+        
         OxydStone();
+        
+        // Object interface
+        virtual OxydStone * clone();
+        virtual void dispose();
+        virtual Value message(const string &m, const Value &);
 
-        static void shuffle_colors();
+        // Stone interface
+        virtual void actor_hit(const StoneContact &sc);
+        virtual const char *collision_sound() { return "stone"; }
         virtual bool is_removable() const;
-    private:
-        enum State { CLOSED, OPEN, OPENING, CLOSING, BLINKING };
-        State state;
+        
+        // PhotoStone interface
+        virtual void notify_laseron() { maybe_open_stone(); }
+        virtual void notify_laseroff() {}
 
-        // Stone interface
-        void actor_hit(const StoneContact &sc);
+        // ModelCallback interface  - Animation callback
+        virtual void animcb();
+    
+    protected:
+        // GridObject interface
         void on_creation (GridPos p);
         void on_removal (GridPos p);
-        const char *collision_sound() { return "stone"; }
-        virtual Value message(const string &m, const Value &);
+            
+    private:
+        enum State { CLOSED, OPEN, OPENING, CLOSING, BLINKING };
+        typedef std::vector<OxydStone *> InstanceVector;
+        typedef struct {
+            unsigned short ruleId;
+            unsigned short groupId1;
+            unsigned short groupId2;
+        } Rule;
+        typedef struct {
+                uint32_t freeOxydsMask;
+                unsigned short freePseudoCount;
+                unsigned short freePairsCount;
+                std::vector<unsigned short> oxydsCandidatesCount;
+                std::vector<uint32_t> oxydsCandidatesMask;
+                std::vector<short> rulesLimit;  // -1 means rule is fulfilled
+                uint32_t selOxyd1Mask;
+                uint32_t selOxyd2Mask;
+                unsigned short openedOxydIndex;
+                bool isColored;
+        } ShuffleFrame;
 
-
-        // PhotoStone interface
-        void notify_laseron() { maybe_open_stone(); }
-        void notify_laseroff() {}
-
-        // Animation callback
-        void animcb();
-
-        // Private methods
-        void maybe_open_stone();
-        void change_state(State newstate);
-
-
+        static InstanceVector levelOxyds;
+        static std::vector<unsigned short> colorsUsageCount;
+        static unsigned short shuffledFakeCount;
+        static unsigned short shuffledFartCount;
+        static unsigned short shuffledBoldCount;
+        static bool oddUnshuffledColor;
+        
+        static std::vector<unsigned short> randomOxydIds;  // random sequence of oxyds
+        static std::vector<uint32_t> groupsMembers;
+        static std::vector<uint32_t> groupsSharedMembers;
+        static std::list<Rule> singleRulesMin;
+        static std::list<Rule> singleRulesMax;
+        static std::list<Rule> pairRulesMin;
+        static std::list<Rule> pairRulesMax;
+        static std::list<ShuffleFrame> shuffleStack;
+        static unsigned int logBadFrameCount;
+        
+        
+        static void initColors();
+        static void simpleShuffleColors();
+        static void fairShuffleColors(LogType logFlag = NOTHING);
+        static int  evaluateTopFrame(LogType logFlag = NOTHING);
+        static void colorShuffleDistribtion(LogType logFlag = NOTHING);
+        static void invalidateShuffle();
+        static unsigned short groupId(Value v);
+        static unsigned short countOxyds(uint32_t members);
+        static uint32_t randomMember(uint32_t members);
+        static unsigned short oxydId(uint32_t mask);
+        
+        static void log_shuffle_basis();
+        static void log_shuffle_stack();
+        
         static bool blinking(OxydStone *a) {
-            return (a->state==BLINKING);
+            return (a->animState == BLINKING);
         }
         static bool blinking_or_opening(OxydStone *a) {
-            return (a->state==BLINKING || a->state == OPENING);
+            return (a->animState == BLINKING || a->animState == OPENING);
         }
         static bool not_open(OxydStone *a) {
-            return !(a->state==OPEN || a->state==OPENING);
+            return !(a->animState == OPEN || a->animState == OPENING);
         }
 
+        State animState;
+
+        // Private methods
+        void maybe_open_stone();
+        void change_state(State newstate);
     };
 } // namespace enigma
 



From andreasl at mail.berlios.de  Sun Nov 11 02:59:09 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Sun, 11 Nov 2007 02:59:09 +0100
Subject: [Enigma-game-svn] r924 - trunk/data/levels/lib
Message-ID: <200711110159.lAB1x9Y9018174@sheep.berlios.de>

Author: andreasl
Date: 2007-11-11 02:59:08 +0100 (Sun, 11 Nov 2007)
New Revision: 924

Modified:
   trunk/data/levels/lib/libsoko-designlist.xml
   trunk/data/levels/lib/libsoko-endphase.xml
   trunk/data/levels/lib/libsoko.xml
Log:
Sokoban:
 - Completed design list with endphase entries
 - Completed endphases "ralf", "vortex", "allcrack"
 - Added endphase "knock"
 - Added st-door-handling (correct v/h-adjustment)
 - Enhanced design element syntax
   - Added "fire" (only one design currently uses it)
   - Added "rubberball" (no design currently uses it)
   - Added "open_door" (many designs use this)
   - Added multiplicators to ease randomization
   - Added fl-bridge-handling ("fl-bridge_x", "fl-bridge_y")
 - Some bugfixes and beautifications
Todo:
 - Fix "places"-bug and always use "set_oxyd" for multiple sokoareas
 - Finetuning of all designs
 - Section in reference manual
 - Remove debug-messages
 - Testlevels
 - Testplaying
 - Maybe add endphases "jumpyoxyds", "ralfcrack"
Note:
 - With this commit, libsoko is in principle ready.
   But there's still some cleanup and finetuning neccessary.
 - There are some relatively evil designs, which might
   need to be disarmed.


Modified: trunk/data/levels/lib/libsoko-designlist.xml
===================================================================
--- trunk/data/levels/lib/libsoko-designlist.xml	2007-11-10 20:10:07 UTC (rev 923)
+++ trunk/data/levels/lib/libsoko-designlist.xml	2007-11-11 01:59:08 UTC (rev 924)
@@ -86,7 +86,8 @@
 --   ralf           : arrange oxyds with doors
 --     vortex       : like ralf, create vortices between way-clusters
 --     allcrack     : like ralf, create cracks everywhere
---     jumpyoxyds   : like ralf, oxyds are movable by knocking on the door
+--     jumpyoxyds   : like ralf, oxyds are movable by knocking on the door (defunc)
+--     knock        : like ralf, open doors on knocking on other doors
 --   block:X        : create oxyds with blocking object X
 --   outside:X      : create X oxyd-pairs in the outside and outer walls
   
@@ -111,7 +112,7 @@
 design_list = {
 
 -- endp-algs: circle, ralf, hide, outside, allcrack, block, fourswitch
---            vortex, gradients, magnets, jumpyoxyds
+--            vortex, gradients, magnets
 
 -- Ralf's designs
 [1]={box="st-brownie", wall="st-bluegray", inf="fl-bluegray",
@@ -187,7 +188,7 @@
       endp={goal="st-none", give="it-sword", alg="block:st-knight"}},
 [23]={box="st-block", wall={"st-glass", "fl-wood", "fl-abyss"},
       inf="fl-wood", outf="fl-abyss", door="st-blocker", oxyd="d",
-      endp={goal={"st-none", "it-none"}, alg="allcrack"}},
+      endp={goal={"st-none", "it-none"}, alg="allcrack:1"}},
 [24]={box="st-brownie", wall={"st-glass", "fl-wood", "fl-sahara"},
       inf="fl-wood", outf="fl-sahara", door="st-door_a", oxyd="c",
       endp={goal="st-none", give="ac-bug", alg="block:st-bug"}},
@@ -332,7 +333,7 @@
       endp={alg="circle"}},
 [68]={box="st-brownie", wall="st-rock5", inf="fl-samba",
       outf="fl-space", door="st-door_a", oxyd="a",
-      endp={goal="st-none", alg="allcrack"}},
+      endp={goal="st-none", alg="allcrack:1"}},
 [69]={box="st-block", wall="st-rock5", inf="fl-samba",
       outf="fl-space", door="st-blocker", oxyd="d",
       endp={goal={"fl-swamp", "it-none"}, alg="ralf"}},
@@ -360,109 +361,271 @@
 [76]={box="st-glass1_move", wall="st-glass2", inf="fl-lightgray",
       outf="fl-abyss", door="st-door_a", oxyd="b",
       endp={goal="st-pull", alg="hide"}},
-[77]={box="st-rock3_move", wall="st-brick", inf="fl-darkgray", outf="fl-leavesb", door="st-door_a", oxyd="a"},
-[78]={box="st-rock3_move", wall="st-bumps", inf="fl-dunes", outf="fl-sand", door="st-door_a", oxyd="d"},
-[79]={box="st-flrock", wall="st-camouflage", inf="fl-gravel", outf={"fl-gravel", "st-disco-medium"}, door="st-door_a", oxyd="d"},
-[80]={box="st-flhay", wall="st-camouflage", inf="fl-leaves", outf="fl-water", door="st-door_a", oxyd="d"},
-[81]={box="st-glass2_move", wall={"st-glass1", "fl-lightgray"}, inf="fl-black", outf="fl-white", door="st-door_a", oxyd="c"},
-[82]={box="st-wood", wall={"st-glass1", "fl-water"}, inf="fl-sand", outf="fl-water", door="st-door_a", oxyd="c"},
-[83]={box="st-camouflage_move", wall="st-glass2", inf="fl-lightgray", outf={"fl-leavesb", "st-disco-medium"}, door="st-door_a", oxyd="b"},
-[84]={box="st-flrock", wall="st-glass2", inf="fl-sand", outf={"fl-water", "st-disco-medium"}, door="st-door_a", oxyd="b"},
-[85]={box="st-flrock", wall="st-brick", inf="fl-sand", outf={"fl-water", "st-disco-medium"}, door="st-door_a", oxyd="a"},
-[86]={box="st-glass1_move", wall={"st-glass3", "fl-abyss_fake"}, inf="fl-red", outf="fl-space", door="st-door_a", oxyd="a"},
-[87]={box="st-rock3_move", wall={"st-glass3", "fl-rough-blue"}, inf="fl-plank", outf="fl-water", door="st-door_a", oxyd="a"},
-[88]={box="st-glass1_move", wall="st-likeoxyda", inf="fl-black", outf="fl-abyss", door="st-door_a", oxyd="a"},
-[89]={box="st-greenbrown_move", wall="st-likeoxyda-open", inf="fl-brick", outf={"fl-mortar", "st-disco-medium"}, door="st-door_a", oxyd="a"},
-[90]={box="st-rock3_move", wall="st-likeoxydb", inf="fl-rough-red", outf="fl-space", door="st-door_a", oxyd="b"},
-[91]={box="st-flhay", wall="st-likeoxydb-open", inf="fl-rough-blue", outf={"fl-swamp", "st-disco-light"}, door="st-door_a", oxyd="b"},
-[92]={box="st-glass2_move", wall="st-likeoxydc", inf="fl-sahara", outf={"fl-water", "st-disco-light"}, door="st-door_a", oxyd="c"},
-[93]={box="st-glass_move", wall="st-likeoxydc-open", inf="fl-red", outf={"st-blackballs", "fl-abyss"}, door="st-door_a", oxyd="c"},
-[94]={box="st-glass2_move", wall="st-likeoxydd", inf="fl-concrete", outf="fl-sand", door="st-door_a", oxyd="d"},
-[95]={box="st-flrock", wall="st-likeoxydd-open", inf="fl-marble", outf="fl-water", door="st-door_a", oxyd="d"},
-[96]={box="st-flrock", wall="st-marble", inf="fl-marble", outf={"fl-leavesc3", "fl-leavesd3"}, door="st-door_a", oxyd="a"},
-[97]={box="st-camouflage_move", wall="st-marble", inf="fl-leaves", outf={"fl-leaves", "st-marble"}, door="st-door_a", oxyd="a"},
-[98]={box="st-rock1_move", wall="st-redrock", inf="fl-acblack", outf={"fl-acblack", "st-redrock"}, door="st-door_a", oxyd="b"},
-[99]={box="st-glass1_move", wall="st-redrock", inf="fl-mortar", outf="fl-brick", door="st-door_a", oxyd="b"},
-[100]={box="st-block", wall="st-redrock", inf="fl-mortar", outf="fl-water", door="st-door_a", oxyd="b"},
-[101]={box="st-glass2_move", wall="st-redrock", inf="fl-leavesb", outf={"fl-leavesc3", "fl-leavesd4"}, door="st-door_a", oxyd="a"},
-[102]={box="st-camouflage_move", wall="st-rock2", inf="fl-rock", outf={"fl-rock", "st-disco-medium"}, door="st-door_a", oxyd="b"},
-[103]={box="st-glass2_move", wall="st-rock2", inf="fl-stone", outf={"fl-water", "st-disco-medium"}, door="st-door_a", oxyd="b"},
-[104]={box="st-wood", wall="st-rock2", inf="fl-lightgray", outf="fl-space", door="st-door_a", oxyd="b"},
-[105]={box="st-camouflage_move", wall="st-rock7", inf="fl-woven", outf="fl-gravel", door="st-door_a", oxyd="a"},
-[106]={box="st-brownie", wall="st-rock7", inf="fl-black", outf="fl-abyss", door="st-door_a", oxyd="b"},
-[107]={box="st-glass_move", wall="st-rock8", inf="fl-plank", outf={"fl-plank", "st-rock8"}, door="st-door_a", oxyd="d"},
-[108]={box="st-glass2_move", wall={"st-rock8", "fl-water"}, inf="fl-leaves", outf="fl-water", door="st-door_a", oxyd="c"},
-[109]={box="st-marble_move", wall={"st-rock8", "fl-abyss_fake"}, inf="fl-stone", outf="fl-space", door="st-door_a", oxyd="c"},
-[110]={box="st-greenbrown_move", wall="st-rock9", inf="fl-rock", outf={"fl-rock", "st-rock9"}, door="st-door_a", oxyd="a"},
-[111]={box="st-glass_move", wall="st-rock9", inf="fl-sand", outf="fl-water", door="st-door_a", oxyd="c"},
-[112]={box="st-camouflage_move", wall="st-rock9", inf="fl-stone", outf="fl-swamp", door="st-door_a", oxyd="d"},
-[113]={box="st-block", wall="st-rock10", inf="fl-bluegreen", outf="fl-abyss", door="st-door_a", oxyd="a"},
-[114]={box="st-wood", wall="st-rock10", inf="fl-sand", outf={"fl-sand", "st-rock10"}, door="st-door_a", oxyd="b"},
-[115]={box="st-glass2_move", wall="st-stone1", inf={"fl-lightgray", "fl-white"}, outf={"fl-space", "fl-abyss"}, door="st-door_a", oxyd="d"},
-[116]={box="st-rock1_move", wall="st-stone1", inf="fl-stwood", outf="fl-water", door="st-door_a", oxyd="d"},
-[117]={box="st-glass_move", wall="st-stone1", inf="fl-black", outf="st-stone1", door="st-door_a", oxyd="d"},
-[118]={box="st-glass_move", wall="st-stone2", inf="fl-black", outf="fl-gravel", door="st-door_a", oxyd="b"},
-[119]={box="st-block", wall="st-stone2", inf="fl-rough-red", outf={"fl-rough-blue", "st-disco-light"}, door="st-door_a", oxyd="d"},
-[120]={box="st-rock3_move", wall={"st-marble", "st-stone2"}, inf="fl-black", outf={"st-marble", "st-stone2"}, door="st-door_a", oxyd="b"},
-[121]={box="st-wood", wall="st-panel", inf="fl-wood", outf={"fl-leavesd3", "fl-leavesd2"}, door="st-door_a", oxyd="a"},
-[122]={box="st-block", wall="st-panel", inf="fl-leaves", outf="fl-leavesb", door="st-door_a", oxyd="a"},
-[123]={box="st-glass1_move", wall="st-woven", inf="fl-dunes", outf="fl-bluegreen", door="st-door_a", oxyd="a"},
-[124]={box="st-marble_move", wall="st-woven", inf="fl-hay", outf="fl-water", door="st-door_a", oxyd="a"},
-[125]={box="st-rock3_move", wall="st-yellow", inf="fl-leavesb", outf="fl-leaves", door="st-door_a", oxyd="a"},
-[126]={box="st-glass_move", wall="st-yellow", inf="fl-rough-blue", outf="fl-abyss", door="st-door_a", oxyd="d"},
-[127]={box="st-block", wall="st-yellow", inf="fl-lightgray", outf="fl-space", door="st-door_a", oxyd="d"},
-[128]={box="st-glass1_move", wall="st-rock7", inf="fl-himalaya", outf={"fl-himalaya", "st-rock8", "st-rock7"}, door="st-door_a", oxyd="d"},
+[77]={box="st-rock3_move", wall="st-brick", inf="fl-darkgray",
+      outf="fl-leavesb", door="st-door", oxyd="a",
+      endp={goal="st-plain_cracked", give="it-hammer", alg="knock"}},
+[78]={box="st-rock3_move", wall="st-bumps", inf="fl-dunes",
+      outf="fl-sand", door="st-door_a", oxyd="a",
+      endp={goal="st-plain_break", give="it-hammer", alg="block:st-plain_cracked"}},
+[79]={box="st-flrock", wall="st-camouflage", inf="fl-gravel",
+      outf={"fl-gravel", "st-disco-medium"}, door="st-camouflage", oxyd="b",
+      endp={goal="st-camouflage", open_door={"st-none", "fl-leavesb"}, alg="vortex"}},
+[80]={box="st-flhay", wall="st-camouflage", inf="fl-leaves",
+      outf={"fl-water:5", "fl-swamp", "al:random"}, door="st-door_a", oxyd="d",
+      endp={goal={"fl-swamp", "it-none"},
+            wall={"st-camouflage_hole", "st-none:2", "fl-swamp", "al:random"},
+            give="it-umbrella", alg="outside:1"}},
+[81]={box="st-glass2_move", wall={"st-glass1", "fl-lightgray"}, inf="fl-black",
+      outf="fl-white", door="st-black4", oxyd="c", white=true,
+      endp={goal="st-yinyang2", open_door="st-white4", alg="ralf"}},
+[82]={box="st-wood", wall={"st-glass1", "fl-water"}, inf="fl-sand",
+      outf="fl-water", door="st-door_a", oxyd="c",
+      endp={goal={"fl-water", "it-none"}, alg="fourswitch"}},
+[83]={box="st-camouflage_move", wall="st-glass2", inf="fl-lightgray",
+      outf={"fl-leavesb", "st-disco-medium"}, door="st-glass2", oxyd="b",
+      endp={goal="st-camouflage_hole", open_door="st-glass1_hole",
+            outf="st-none", alg="ralf"}},
+[84]={box="st-flrock", wall="st-glass2", inf="fl-sand",
+      outf={"fl-water", "st-disco-medium"}, door="st-door", oxyd="b",
+      endp={goal={"fl-swamp", "it-none"}, alg="knock"}},
+[85]={box="st-flrock", wall="st-brick", inf="fl-sand",
+      outf={"fl-water", "st-disco-medium"}, door="st-door", oxyd="a",
+      endp={goal="st-black4", alg="ralf"}},
+[86]={box="st-glass1_move", wall={"st-glass3", "fl-abyss_fake"}, inf="fl-red",
+      outf="fl-space", door={"st-none", "fire"}, oxyd="a",
+      endp={goal="st-explosion", open_door="nofire", alg="ralf"}},
+[87]={box="st-rock3_move", wall={"st-glass3", "fl-rough-blue"}, inf="fl-plank",
+      outf="fl-water", door="st-glass3", oxyd="a",
+      endp={goal="st-rock7", open_door="st-glass1_hole", alg="vortex"}},
+[88]={box="st-glass1_move", wall="st-likeoxyda", inf="fl-black",
+      outf="fl-abyss", door="st-door_a", oxyd="a",
+      endp={goal="st-glass1_hole", alg="hide"}},
+[89]={box="st-greenbrown_move", wall="st-likeoxyda-open", inf="fl-brick",
+      outf={"fl-mortar", "st-disco-medium"}, door="st-door", oxyd="a",
+      endp={goal="st-grate2", alg="knock"}},
+[90]={box="st-rock3_move", wall="st-likeoxydb", inf="fl-rough-red",
+      outf="fl-space", door="st-door_a", oxyd="b",
+      endp={goal="st-plain_breaking", alg="hide"}},
+[91]={box="st-flhay", wall="st-likeoxydb-open", inf="fl-rough-blue",
+      outf={"fl-swamp", "st-disco-light"}, door="st-door_a", oxyd="b",
+      endp={goal="st-break_gray", give="it-hammer", alg="block:st-break_gray"}},
+[92]={box="st-glass2_move", wall="st-likeoxydc", inf="fl-sahara",
+      outf={"fl-water", "st-disco-light"}, door="st-door_a", oxyd="c",
+      endp={goal="st-glass1_hole", alg="hide"}},
+[93]={box="st-glass_move", wall="st-likeoxydc-open", inf="fl-red",
+      outf={"st-blackballs", "st-whiteballs", "fl-abyss", "al:random"},
+      door="st-door_a", oxyd="c",
+      endp={goal="st-black4", alg="fourswitch"}},
+[94]={box="st-glass2_move", wall="st-likeoxydd", inf="fl-concrete",
+      outf="fl-sand", door="st-door_a", oxyd="d",
+      endp={goal="st-glass1_hole", alg="hide"}},
+[95]={box="st-flrock", wall="st-likeoxydd-open", inf="fl-marble",
+      outf="fl-water", door="st-door_a", oxyd="b",
+      endp={goal={"fl-swamp", "it-none"}, outf="fl-swamp",
+            give="it-hammer", wall="st-break_gray", alg="outside"}},
+[96]={box="st-flrock", wall="st-marble", inf="fl-marble",
+      outf={"fl-leavesc3", "fl-leavesd3"}, door="st-door", oxyd="a",
+      endp={goal={"st-grate2", "it-none"}, alg="knock"}},
+[97]={box="st-camouflage_move", wall="st-marble", inf="fl-leaves",
+      outf={"fl-leaves", "st-marble"}, door="st-door_a", oxyd="a",
+      endp={goal="st-camouflage_hole", wall="st-marble_hole",
+            outf="st-marble_hole", alg="outside"}},
+[98]={box="st-rock1_move", wall="st-redrock", inf="fl-acblack",
+      outf={"fl-acblack", "st-redrock"}, door="st-rock6", oxyd="b",
+      endp={goal="st-rock6", open_door="st-none", alg="vortex"}},
+[99]={box="st-glass1_move", wall="st-redrock", inf="fl-mortar",
+      outf="fl-brick", door="st-door_a", oxyd="b",
+      endp={goal="st-glass1_hole", wall={"st-glass1_hole", "fl-tigris"}, alg="outside"}},
+[100]={box="st-block", wall="st-redrock", inf="fl-mortar",
+       outf="fl-water", door="st-door", oxyd="b",
+       endp={goal={"fl-swamp", "it-none"}, alg="ralf"}},
+[101]={box="st-glass2_move", wall="st-redrock", inf="fl-leavesb",
+       outf={"fl-leavesc3", "fl-leavesd4"}, door="st-door_a", oxyd="a",
+       endp={goal="st-glass1_hole", alg="hide"}},
+[102]={box="st-camouflage_move", wall="st-rock2", inf="fl-rock",
+       outf={"fl-rock", "st-disco-medium"}, door="st-door_a", oxyd="b",
+       endp={goal={"it-none", "st-disco-light", "fl-leavesb"},
+             wall={"st-disco-light", "fl-gray"}, alg="outside:3"}},
+[103]={box="st-glass2_move", wall="st-rock2", inf="fl-stone",
+       outf={"fl-water", "st-disco-medium"}, door="st-door_a", oxyd="b",
+       endp={goal={"st-pull", "it-none", "fl-black"}, alg="fourswitch"}},
+[104]={box="st-wood", wall="st-rock2", inf="fl-lightgray",
+       outf="fl-space", door="st-door", oxyd="b",
+       endp={goal={"st-none", "fl-marble", "it-none"}, alg="knock"}},
+[105]={box="st-camouflage_move", wall="st-rock7", inf="fl-woven",
+       outf="fl-gravel", door="st-door_a", oxyd="a",
+       endp={goal={"fl-bluegreenx", "it-none", "st-none"}, alg="magnets"}},
+[106]={box="st-brownie", wall="st-rock7", inf="fl-black",
+       outf="fl-abyss", door="st-door_a", oxyd="b",
+       endp={goal="st-bug", give={"ac-bug", "it-hammer"}, alg="block:st-plain_cracked"}},
+[107]={box="st-glass_move", wall="st-rock8", inf="fl-plank",
+       outf={"fl-plank", "st-rock8"}, door="st-door", oxyd="d",
+       endp={goal="st-explosion", alg="knock"}},
+[108]={box="st-glass2_move", wall={"st-rock8", "fl-water"}, inf="fl-leaves",
+       outf="fl-water", door="st-door_a", oxyd="c",
+       endp={goal="st-pull", give="it-hammer", alg="block:st-break_gray"}},
+[109]={box="st-marble_move", wall={"st-rock8", "fl-abyss_fake"}, inf="fl-stone",
+       outf="fl-space", door="st-door_a", oxyd="c",
+       endp={goal={"st-none", "it-none", "fl-hay"}, wall={"st-none", "fl-darkgray"},
+             alg="outside:3"}},
+[110]={box="st-greenbrown_move", wall="st-rock9", inf="fl-rock",
+       outf={"fl-rock", "st-rock9"}, door="st-rock9", oxyd="b",
+       endp={goal="st-rock9", open_door="st-none", alg="vortex"}},
+[111]={box="st-glass_move", wall="st-rock9", inf="fl-sand",
+       outf="fl-water", door="st-door_c", oxyd="c",
+       endp={goal="st-grate2", alg="ralf"}},
+[112]={box="st-camouflage_move", wall="st-rock9", inf="fl-stone",
+       outf="fl-swamp", door="st-door", oxyd="a",
+       endp={goal="st-camouflage_hole", alg="knock"}},
+[113]={box="st-block", wall="st-rock10", inf="fl-bluegreen",
+       outf="fl-abyss", door="st-door_a", oxyd="a",
+       endp={goal={"st-explosion", "it-none", "fl-bluegreenx"},
+             wall={"st-explosion", "fl-marble"}, give="it-umbrella", alg="outside:1"}},
+[114]={box="st-wood", wall="st-rock10", inf="fl-sand",
+       outf={"fl-sand", "st-rock10"}, door="st-door_a", oxyd="b",
+       endp={goal={"fl-swamp", "it-none"}, give="it-sword", alg="block:st-knight"}},
+[115]={box="st-glass2_move", wall="st-stone1", inf={"fl-lightgray", "fl-white"},
+       outf={"fl-space", "fl-abyss"}, door="st-door_a", oxyd="a",
+       endp={goal="st-glass1_hole", wall="st-grate1", give="it-umbrella",
+             open_door="st-grate1", alg="block:st-stone1"}},
+[116]={box="st-rock1_move", wall="st-stone1", inf="fl-stwood",
+       outf="fl-water", door="st-stone1", oxyd="b",
+       endp={goal="st-rock1_hole", open_door="st-grate1", alg="ralf"}},
+[117]={box="st-glass_move", wall="st-stone1", inf="fl-black",
+       outf="st-stone1", door="st-door_a", oxyd="d",
+       endp={outf="st-likeoxydd", wall="st-likeoxydd", inf="fl-ice",
+             goal={"st-none", "it-none", "fl-ice"}, alg="hide:1"}},
+[118]={box="st-glass_move", wall="st-stone2", inf="fl-black",
+       outf="fl-gravel", door="st-door_a", oxyd="b",
+       endp={goal="st-glass", alg="vortex"}},
+[119]={box="st-block", wall="st-stone2", inf="fl-rough-red",
+       outf={"fl-rough-blue", "st-disco-light"}, door="st-door_a", oxyd="d",
+       endp={goal="st-none", alg="allcrack:1"}},
+[120]={box="st-rock3_move", wall={"st-marble", "st-stone2"}, inf="fl-black",
+       outf={"st-marble", "st-stone2"}, oxyd="b",
+       endp={goal="st-plain_cracked", give="it-hammer", open_door="st-none",
+             alg="ralf"}},
+[121]={box="st-wood", wall="st-panel", inf="fl-wood",
+       outf={"fl-leavesd3", "fl-leavesd2"}, door="st-door_a", oxyd="a",
+       endp={goal={"it-none", "fl-swamp"}, open_door="fl-swamp", alg="block:st-wood"}},
+[122]={box="st-block", wall="st-panel", inf="fl-leaves",
+       outf="fl-leavesb", door="st-door_a", oxyd="a",
+       endp={goal={"it-none", "fl-swamp"}, alg="fourswitch"}},
+[123]={box="st-glass1_move", wall="st-woven", inf="fl-dunes",
+       outf="fl-bluegreen", door="st-glass1", oxyd="a",
+       endp={goal="st-pull", open_door="st-pull", alg="ralf"}},
+[124]={box="st-marble_move", wall="st-woven", inf="fl-hay",
+       outf="fl-water", door="st-door_a", oxyd="a",
+       endp={goal="st-marble_hole", wall={"st-none", "fl-woven"},
+       give="it-umbrella", alg="outside:1"}},
+[125]={box="st-rock3_move", wall="st-yellow", inf="fl-leavesb",
+       outf="fl-leaves", door="st-door_c", oxyd="a",
+       endp={goal="st-grate2", alg="ralf"}},
+[126]={box="st-glass_move", wall="st-yellow", inf="fl-rough-blue",
+       outf="fl-abyss", door="st-door_a", oxyd="d",
+       endp={goal={"st-none", "it-none", "fl-ice"}, give="ac-bug", alg="block:st-bug"}},
+[127]={box="st-block", wall="st-yellow", inf="fl-lightgray",
+       outf="fl-space", door="st-door_a", oxyd="d",
+       endp={goal={"fl-abyss", "it-none"}, alg="vortex"}},
+[128]={box="st-glass1_move", wall="st-rock7", inf="fl-himalaya",
+       outf={"fl-himalaya", "st-rock8", "st-rock7"}, door="st-door_a", oxyd="d",
+       endp={goal="st-explosion", alg="magnets"}},
 [129]={box="st-camouflage_move", wall={"st-rock9", "fl-leavesb"}, inf="fl-dunes",
-       outf={"fl-leavese1", "fl-leavese2", "fl-leavese3", "fl-leavese4", "al:waves"}, door="st-door_a", oxyd="d"},
+       outf={"fl-leavese1", "fl-leavese2", "fl-leavese3", "fl-leavese4", "al:waves"},
+       door={"fl-bridge_x", "fl-bridge_y", "al:random", "st-none"}, oxyd="d",
+       endp={goal="st-camouflage_hole", alg="ralf"}},
 [130]={box="st-glass1_move", wall="st-redrock", inf="fl-darkgray",
-       outf={"fl-black", "st-redrock", "st-invisible", "st-invisible", "st-invisible", "al:waves"},
-       door="st-door_a", oxyd="a"},
-[131]={box="st-glass1_move", wall={"st-yellow", "st-yellow", "st-redrock", "st-redrock", "al:waves"}, inf="fl-wood",
-       outf={"fl-wood", "st-yellow", "st-yellow", "st-redrock", "st-redrock", "al:waves"}, door="st-door_a", oxyd="d"},
-[132]={box="st-wood", wall="st-camouflage", inf="fl-leavesb",
-       outf={"fl-water", "fl-swamp", "fl-water", "fl-water", "al:random"}, door="st-door_a", oxyd="b"},
+       outf={"fl-black", "st-redrock", "st-invisible:3", "al:waves"},
+       door="st-door_a", oxyd="a",
+       endp={goal="st-none", alg="gradients"}},
+[131]={box="st-glass1_move", wall={"st-yellow", "st-yellow", "st-redrock", "st-redrock", "al:waves"},
+       inf="fl-wood",
+       outf={"fl-wood", "st-yellow", "st-yellow", "st-redrock", "st-redrock", "al:waves"},
+       door="st-door_a", oxyd="d",
+       endp={goal={"st-glass1_hole"}, give="it-hammer", alg="block:st-plain_break"}},
+[132]={box="st-wood", wall="st-camouflage", inf="fl-leavesb", oxyd="d",
+       outf={"fl-water:3", "fl-swamp","al:random"}, door={"fl-water", "st-glass1_hole"},
+       endp={goal={"fl-swamp", "it-none"}, inf={"fl-leavesb", "fl-swamp", "al:random"}, 
+             open_door="fl-swamp", alg="ralf"}},
 [133]={box="st-glass2_move", wall="st-metal", inf="fl-metal",
-       outf={"fl-space", "fl-abyss", "fl-abyss", "fl-abyss", "al:random"}, door="st-door_a", oxyd="d"},
+       outf={"fl-space", "fl-abyss:3", "al:random"}, door="st-door_a", oxyd="d",
+       endp={goal="st-glass1_hole", give="it-sword", alg="block:st-knight"}},
 [134]={box="st-marble_move", wall="st-metal", inf="fl-white",
-       outf={"fl-abyss", "st-grate1", "st-invisible", "st-invisible", "st-invisible", "al:waves"}, door="st-door_a", oxyd="d"},
+       outf={"fl-abyss", "st-grate1", "st-invisible:3", "al:waves"},
+       door="st-door_a", oxyd="d",
+       endp={goal="st-marble_hole", alg="fourswitch"}},
 [135]={box="st-glass_move", wall="st-likeoxydc", inf="fl-white",
-       outf={"fl-white", "st-rock1", "st-invisible", "st-invisible", "st-invisible", "al:random"}, door="st-door_a", oxyd="c"},
-[136]={box="st-block", wall={"st-oneway_white-n", "st-oneway_white-s", "st-oneway_white-e", "st-oneway_white-w", "al:random"}, inf="fl-rough",
-       outf={"st-oneway_white-n", "st-oneway_white-s", "st-oneway_white-e", "st-oneway_white-w", "al:random"}, door="st-door_a", oxyd="d"},
+       outf={"fl-white", "st-rock1", "st-invisible:3", "al:random"},
+       door="st-door_a", oxyd="c",
+       endp={goal={"st-glass1_hole", "it-none"}, alg="hide"}},
+[136]={box="st-block", wall={"st-oneway_white-n", "st-oneway_white-s", "st-oneway_white-e", "st-oneway_white-w", "al:random"},
+       inf="fl-rough", oxyd="b",
+       outf={"st-oneway_white-n", "st-oneway_white-s", "st-oneway_white-e", "st-oneway_white-w", "al:random"},
+       endp={alg="circle"}},
 [137]={box={"st-mirror-p-m", "st-mirror-p/m", "st-mirror-p\\m", "st-mirror-p|m", "al:random"},
-       wall={"st-glass3", "fl-abyss"}, inf="fl-metal",
-       outf={"st-mirror-p-", "st-mirror-p/", "st-mirror-p|", "st-mirror-p\\", "al:random"}, door="st-door_a", oxyd="b"},
-[138]={box="st-shogun-s", wall="st-panel", inf="fl-stwood", outf="fl-water", door="st-door_a", oxyd="d"},
-[139]={box="st-shogun-s", wall={"st-white4", "fl-springboard", "fl-abyss_fake"}, inf={"fl-springboard", "fl-abyss_fake"},
-       outf={"st-white1", "st-black1", "fl-springboard", "fl-abyss_fake"}, door="st-door_a", oxyd="b"},
+       wall={"st-glass3", "fl-abyss"}, inf="fl-metal", oxyd="b",
+       outf={"st-mirror-p-", "st-mirror-p/", "st-mirror-p|", "st-mirror-p\\", "al:random"},
+       door="st-glass3",
+       endp={goal={"st-none", "it-none", "fl-darkgray"},
+             open_door="st-glass1_hole", alg="ralf"}},
+[138]={box="st-shogun-s", wall="st-panel", inf="fl-stwood", goal="it-shogun-s",
+       outf="fl-water", oxyd="a",
+       endp={goal="st-none", alg="ralf", open_door="st-none"}},
+[139]={box="st-shogun-s", wall="st-blocker", inf="fl-black",
+       outf={"st-white1", "st-black1", "fl-springboard", "fl-abyss_fake"},
+       door="st-blocker", oxyd="b",
+       endp={goal={"st-none", "it-none"}, inf={"fl-springboard", "fl-abyss_fake"},
+             alg="ralf"}},
 [140]={box="st-brownie", wall={"st-stone1", "fl-leavesb"}, inf={"fl-floor_001", "fr:3.0"},
-       outf={"fl-leavese4", "fl-leavese2", "fl-leavese1", "fl-leavese3", "al:waves"}, door="st-door_a", oxyd="d"},
+       outf={"fl-leavese4", "fl-leavese2", "fl-leavese1", "fl-leavese3", "al:waves"},
+       door="st-door_a", oxyd="d",
+       endp={goal={"st-grate1", "it-none"}, alg="fourswitch"}},
 [141]={box="st-brownie", wall={"st-rock4", "fl-leavesb"}, inf={"fl-bluegreenx", "mf:1.0", "fr:3.0"},
-       outf={"fl-water", "st-rock10", "st-invisible", "st-invisible", "st-invisible", "al:waves"}, door="st-door_a", oxyd="d"},
+       outf={"fl-water", "st-rock10", "st-invisible:3", "al:waves"},
+       door="st-door_a", oxyd="d",
+       endp={goal="st-none", give="it-sword", alg="block:st-knight"}},
 [142]={box="st-glass2_move", wall={"st-glass1", "fl-leavesb"}, inf="fl-leavesb",
-       outf={"fl-leavesc4", "fl-leavesd2", "fl-leavesc2", "fl-leavese3", "al:waves"}, door="st-door_a", oxyd="d"},
+       outf={"fl-leavesc4", "fl-leavesd2", "fl-leavesc2", "fl-leavese3", "al:waves"},
+       door="st-door_a", oxyd="d",
+       endp={goal="st-glass1_hole", alg="hide"}},
 [143]={box="st-block", wall={"st-rock5", "fl-stwood"}, inf="fl-wood",
-       outf={"st-disco-light", "fl-wood1", "fl-wood1", "fl-wood1", "fl-wood2", "al:waves"}, door="st-door_a", oxyd="a"},
+       outf={"st-disco-light", "fl-wood1:3", "fl-wood2", "al:waves"},
+       door="st-door_a", oxyd="a",
+       endp={goal={"fl-abyss", "it-none"}, alg="vortex"}},
 [144]={box="st-wood", wall="st-rock6", inf="fl-bluegreen",
-       outf={"fl-space", "it-squashed", "it-sensor", "it-sensor", "it-sensor", "al:random"}, door="st-door_a", oxyd="d"},
+       outf={"fl-space", "it-squashed", "it-none:3", "al:random"},
+       door="st-door_a", oxyd="d",
+       endp={goal="st-glass2_hole", wall="st-glass1_hole", alg="outside:3"}},
 [145]={box="st-glass1_move", wall={"st-greenbrown", "fl-sand"}, inf="fl-dunes",
-       outf={"fl-sand", "it-landmine", "it-booze-broken", "it-none", "it-none", "it-none", "it-none", "it-none", "it-none", "al:random"},
-       door="st-door_a", oxyd="a"},
+       outf={"fl-sand", "it-landmine:3", "it-booze-broken", "it-none:15", "al:random"},
+       door="st-door_a", oxyd="a",
+       endp={goal="st-glass1_hole", alg="allcrack:1"}},
 [146]={box="st-wood", wall="st-rock1", inf="fl-black",
-       outf={"fl-abyss", "st-grate1", "st-none", "st-none", "st-none", "st-none", "st-none", "st-none",
-       "st-none", "st-none", "st-none", "st-none", "al:random"}, door="st-door_a", oxyd="c", white = true},
+       outf={"fl-abyss", "st-grate1", "st-none:10", "al:random"},
+       door="st-door_a", oxyd="b", white = true,
+       endp={goal={"st-grate1", "it-none"}, alg="magnets"}},
 [147]={box="st-wood", wall="st-whiteballs", inf="fl-gray", white = true,
        outf={"fl-gradient5", "fl-gradient6", "fl-gradient7", "fl-gradient8", "al:waves"},
        door="st-door_a", oxyd="a",
        endp={goal={"st-none", "it-none"}, alg="gradients"}},
 [148]={box="st-shogun-s", wall="st-metal", inf="fl-rough-blue", white = true,
-       outf={"fl-rough-red", "fl-rough-blue", "st-disco-light"}, door="st-door_a", oxyd="a"},
-[149]={box="st-shogun-s", wall="st-yellow", inf="fl-wood", outf="fl-swamp", door="st-door_a",
-       oxyd="c", goal="it-shogun-s", white = true},
+       outf={"fl-rough-red", "fl-rough-blue", "st-disco-light"},
+       door="st-door_a", oxyd="a",
+       endp={goal="st-break_acblack", give="it-hammer", alg="block:st-break_acblack"}},
+[149]={box="st-shogun-s", wall="st-yellow", inf="fl-samba",
+       outf="fl-swamp", door="st-door_a",
+       oxyd="c", goal="it-shogun-s", white = true,
+       endp={goal="st-explosion", wall={"st-explosion", "fl-tigris"}, alg="outside"}},
+
 [150]={box="st-flrock", wall="st-redrock", inf="fl-brick",
-       outf="fl-space", door="st-door_a", oxyd="c", white=true},
+       outf="fl-space", door="st-blocker", oxyd="a", white=true,
+       endp={goal={"fl-abyss", "it-none"}, alg="ralf"}},
 }
 
+-- endp-algs: circle, ralf, hide, outside, allcrack, block, fourswitch
+--            vortex, gradients, magnets
+
+
 -- The 75 first designs use the following boxes:
 --  st-block  ->  st-black, st-blocker, st-brake, st-laser, fl-swamp
 --  st-brownie  ->  st-coinslot, st-pull

Modified: trunk/data/levels/lib/libsoko-endphase.xml
===================================================================
--- trunk/data/levels/lib/libsoko-endphase.xml	2007-11-10 20:10:07 UTC (rev 923)
+++ trunk/data/levels/lib/libsoko-endphase.xml	2007-11-11 01:59:08 UTC (rev 924)
@@ -47,10 +47,10 @@
     enigma.SetAttrib(sender, "_box", 0)
     sokoarea[nr].goals_filled = sokoarea[nr].goals_filled - 1
   end
-  
+
   -- Call goal_hook, e.g. for algorithms "ralf" and "allcrack".
-  if type(goal_hook) == "function" then
-    goal_hook(nr, sender, more_boxes, sokoarea[nr].goals_filled,
+  if type(sokoarea[nr].goal_hook) == "function" then
+    sokoarea[nr].goal_hook(nr, sender, more_boxes, sokoarea[nr].goals_filled,
               sokoarea[nr].number_goals)
   end
   
@@ -66,21 +66,26 @@
 end
 
 function prepare_endphase(sokoarea_number)
+  local nr = sokoarea_number
   -- ensure existence of goals
-  if sokoarea[1].number_goals < 1 then
+  if sokoarea[nr].number_goals < 1 then
     myerror("No goals defined!\n")
   end
   -- ensure a correctly set endphase-attribute
-  local endp = sokoarea[sokoarea_number].design.endp
+  local endp = sokoarea[nr].design.endp
   if not endp then
-    endp = {alg = "circle"}
-    sokoarea[sokoarea_number].design.endp = endp
+    endp = default_design.endp
+    sokoarea[nr].design.endp = endp
   end
   if type(endp) ~= "table" then
     myerror("This design's endphase is given as "..type(endp)
             ..", should be table.")
   end
   local alg = endp.alg
+  if alg == nil then
+    alg = default_design.endp.alg
+    sokoarea[nr].design.endp.alg = alg
+  end
   if type(alg) ~= "string" then
     myerror("This design's endphase algorithm is given as "..type(alg)
             ..", should be string.")
@@ -98,21 +103,26 @@
   if     (alg == "circle")
       or (alg == "hide")
       or (alg == "fourswitch")
-      or (alg == "vortex")
       or (alg == "gradients")
       or (alg == "magnets") then
     -- nothing to prepare
   elseif (alg == "ralf")
-      or (alg == "allcrack") then
-    endphase_set_block_oxyds(sokoarea_number, sokoarea[sokoarea_number].design.door)
-    goal_hook = endphase_goal_hook_ralf
-  elseif alg == "block" then
-    endphase_set_block_oxyds(sokoarea_number, param)
+      or (alg == "allcrack")
+      or (alg == "vortex") then
+    endphase_set_block_oxyds(nr, (sokoarea[nr].design.door or
+        sokoarea[nr].design.wall or "st-none"), param)
+    sokoarea[nr].goal_hook = endphase_goal_hook_ralf
+  elseif (alg == "block") then
+    endphase_set_block_oxyds(nr, param)
   elseif (alg == "outside") then
-    endphase_set_outside_oxyds(sokoarea_number, param)
-  elseif alg == "jumpyoxyds" then
-    endphase_set_block_oxyds(sokoarea_number, "jumpy")
-    goal_hook = endphase_goal_hook_ralf
+    endphase_set_outside_oxyds(nr, param)
+  elseif (alg == "knock") then
+    endphase_set_block_oxyds(nr, sokoarea[nr].design.door, 3)
+    endphase_set_knock_items(nr, param)
+  -- "Jumpyoxyds" deactivated for once
+  --elseif (alg == "jumpyoxyds") then
+  --  endphase_set_block_oxyds(nr, "jumpy")
+  --  goal_hook = endphase_goal_hook_ralf
   else
     mywarning("Endphase algorithm "..alg.." unknown! Will use 'circle' instead.")
   end
@@ -146,10 +156,18 @@
   end
   if type(give) == "table" then
     for k, v in pairs(give) do
-      if is_item(v) then
-        set_item(v, px, py)
+      if is_item(v) or is_stone(v) or is_floor(v) then
+        set_element(px, py, sokoarea_number, "", v)
       elseif is_actor(v) then
         set_actor(v, px + 0.5, py + 0.5)
+      elseif v == "rubberball" then
+        local old_actor = enigma.GetNamedObject("marble_"..sokoarea_number.."_1")
+        local actor_kind = "ac-whiteball"
+        if sokoarea[sokoarea_number].design.white then
+          actor_kind = "ac-blackball"
+        end
+        local new_actor = set_actor(actor_kind, px+0.5, py+0.5, {controllers=0})
+        AddRubberBand(old_actor, new_actor, 50, 0)
       else
         myerror("Can't give "..v..".")
       end
@@ -161,24 +179,29 @@
   if alg == "circle" then
     endphase_circle(sokoarea_number)
   elseif alg == "hide" then
-    endphase_set_hide_oxyds(sokoarea_number)  
+    endphase_set_hide_oxyds(sokoarea_number, param)
   elseif    (alg == "ralf")
          or (alg == "outside")
-         or (alg == "block")
-         or (alg == "jumpyoxyds") then
+         --or (alg == "jumpyoxyds")
+         or (alg == "block") then
     endphase_ralf_open_doors(sokoarea_number)
   elseif alg == "allcrack" then
+    endphase_ralf_open_doors(sokoarea_number)
     endphase_allcrack(sokoarea_number)
   elseif alg == "fourswitch" then
     endphase_fourswitch(sokoarea_number)
   elseif alg == "vortex" then
-    -- ?
+    endphase_ralf_open_doors(sokoarea_number)
+    endphase_vortex(sokoarea_number)
   elseif alg == "gradients" then
     endphase_set_hide_oxyds(sokoarea_number)
     endphase_gradients(sokoarea_number, param)
   elseif alg == "magnets" then
     endphase_set_hide_oxyds(sokoarea_number)
     endphase_magnets(sokoarea_number, param)
+  elseif alg == "knock" then
+    -- don't do anything; endphase_call_knock_item
+    -- queries endphase_started.
   else
     -- use default: "circle"
     endphase_circle(sokoarea_number)
@@ -191,24 +214,45 @@
   local dx = sokoarea[nr].offset.x
   local dy = sokoarea[nr].offset.y
 
+  -- small routine to check the walls and outside
+  local function is_oxyd_or_blocker(x,y)
+    if sokoarea[nr].list_oxyd[x.."/"..y] then
+      return true
+    elseif sokoarea[nr].list_blocker[x.."/"..y] then
+      return true
+    end
+    return false
+  end
+  
   -- redraw outside
   for p, v in pairs(sokoarea[nr].list_outside) do
-    set_element(v.lx, v.ly, nr, k, endp.outf)
+    if not is_oxyd_or_blocker(v.lx, v.ly) then
+      set_element(v.lx, v.ly, nr, k, endp.outf)
+    end
   end
-
+  
   -- redraw the rest inside level_array:
   for y = 0, sokoarea[nr].array_height - 1 do
     for x = 0, sokoarea[nr].array_width - 1 do
-      local ch = sokoarea[nr].level_array[y+1][x+1]
-      for k, v in pairs(endp) do
-        if    ((k == "inf")  and char_is_inf(ch))
-           or ((k == "wall") and char_is_wall(ch))
-           or ((k == "goal") and char_is_goal(ch)) then
-          set_element(x+dx, y+dy, nr, k, v)
+      if not is_oxyd_or_blocker(x+dx, y+dy) then
+        local ch = sokoarea[nr].level_array[y+1][x+1]
+        for k, v in pairs(endp) do
+          if    ((k == "inf")  and char_is_inf(ch))
+             or ((k == "wall") and char_is_wall(ch))
+             or ((k == "goal") and char_is_goal(ch)) then
+            set_element(x+dx, y+dy, nr, k, v)
+          end
         end
       end
     end
   end
+  
+  -- if existent, redraw blocker floors
+  if (sokoarea[nr].list_blocker) and (endp.inf) then
+    for p, v in pairs(sokoarea[nr].list_blocker) do
+      set_element(v.lx, v.ly, nr, "inf", endp.inf)
+    end
+  end 
 end
 
 ------------------------------------------------------------------------
@@ -234,10 +278,10 @@
     y = y - 2
   end
   for j = 0, 2 do
-    oxyd(x+j, y-1, flavor)
-    oxyd(x-1, y+j, flavor)
-    oxyd(x+j, y+3, flavor)
-    oxyd(x+3, y+j, flavor)
+    oxyd(x+j, y-1, flavor, 2*j)
+    oxyd(x-1, y+j, flavor, 2*j)
+    oxyd(x+j, y+3, flavor, 2*j+1)
+    oxyd(x+3, y+j, flavor, 2*j+1)
     for k = 0, 2 do
       kill_stone(x+j, y+k)
       kill_item(x+j, y+k)
@@ -279,14 +323,14 @@
                {lx = dx + mx - 1,  ly = dy},
                {lx = dx,           ly = dy + my - 1},
                {lx = dx + mx - 1,  ly = dy + my - 1} }
-  else
-        if max <  50 then  number_pairs = 3
-    elseif max < 100 then  number_pairs = 4
-    else                   number_pairs = 5  end
+  elseif max <  20 then  number_pairs = 2
+  elseif max <  50 then  number_pairs = 3
+  elseif max < 100 then  number_pairs = 4
+  else                   number_pairs = 5
   end
   if (type(param) ~= "nil") and (param ~= "") then
     local max_pairs = tonumber(param)
-    if max_pairs >= 2 then
+    if max_pairs then
       number_pairs = math.min(max_pairs, number_pairs)
     end    
   end
@@ -294,76 +338,115 @@
   shuffle_table(places)
 
   for j = 1, number_pairs do
-    oxyd(places[2*j-1].lx, places[2*j-1].ly, flavor, j - 1)
-    oxyd(places[2*j].lx, places[2*j].ly, flavor, j - 1)
+    set_oxyd(sokoarea_number, places[2*j-1], flavor, j - 1)
+    set_oxyd(sokoarea_number, places[2*j], flavor, j - 1)
   end
   oxyd_shuffle()
 end
 
-function endphase_set_block_oxyds(sokoarea_number, blocker)
-  local places = {}
+function endphase_set_block_oxyds(sokoarea_number, blocker, max_pairs)
+  local oxyds = {}
   local nr = sokoarea_number or 1
   local flavor = sokoarea[nr].design.oxyd or "b"
 
-  -- add all wall_two-elements with their wall_one.count == 1
-  for p, v in pairs(sokoarea[nr].list_wall_two) do
-    local entry = {lx = v.lx, ly = v.ly, ax = v.ax, ay = v.ay, wall_one = {}}
-    for q, w in pairs(v.wall_one) do
-      if w.count == 1 then
-        table.insert(entry.wall_one, w)
+  -- Add all wall_one-elements with exactly one way near as blocker,
+  -- and the opposite position as oxyd, if it is of type wall_two.
+  -- Make sure that each possible oxyd position is assigned at most once,
+  -- and that no other oxyds or blockers are near.
+  local function opposite_as_oxyd(x, y, dx, dy)
+    if     sokoarea[nr].list_way[(x+dx).."/"..(y+dy)]
+       and sokoarea[nr].list_wall_two[(x-dx).."/"..(y-dy)] then
+      -- Check that no oxyd has been set on this position before
+      -- and no other oxyd or blocker is near the new oxyd or its
+      -- blocker.
+      for j, w in pairs(oxyds) do
+        if    (manhattan_distance(w.blocker.lx, w.blocker.ly, x, y) <= 1)
+           or (manhattan_distance(w.lx, w.ly, x, y) <= 1)
+           or (manhattan_distance(w.blocker.lx, w.blocker.ly, x-dx, y-dy) <= 1)
+           or (manhattan_distance(w.lx, w.ly, x-dx, y-dy) <= 1) then
+          return false
+        end
       end
+      table.insert(oxyds, {lx = x-dx, ly = y-dy,
+          blocker = {lx = x, ly = y, oxyd = {lx = x-dx, ly = y-dy}}})
+      return true
     end
-    if table.getn(entry.wall_one) ~= 0 then
-      table.insert(places, entry)
+    return false
+  end
+  for p, v in pairs(sokoarea[nr].list_wall_one) do
+    if v.count == 1 then
+      opposite_as_oxyd(v.lx, v.ly, -1,  0)
+      opposite_as_oxyd(v.lx, v.ly,  1,  0)
+      opposite_as_oxyd(v.lx, v.ly,  0, -1)
+      opposite_as_oxyd(v.lx, v.ly,  0,  1)
     end
   end
 
   -- Choose some appropriate subset
-  local max = table.getn(places)
+  local max = table.getn(oxyds)
   local number_pairs = 2
-  if max < 2 then
-    -- Not enough places? Then choose corners of level_array.
-    -- They should always be at least wall_two and far enough
-    -- away from each other.
-    places = { {lx = dx,           ly = dy},
-               {lx = dx + mx - 1,  ly = dy},
-               {lx = dx,           ly = dy + my - 1},
-               {lx = dx + mx - 1,  ly = dy + my - 1} }
-  else
-        if max <  50 then  number_pairs = 3
-    elseif max < 100 then  number_pairs = 4
-    else                   number_pairs = 5  end
+  if max < 4 then
+    -- Not enough places? Choose "circle"-algorithm instead.
+    sokoarea[nr].endp.alg = "circle"
+    return
+  elseif max <  8 then  number_pairs = 2
+  elseif max < 16 then  number_pairs = 3
+  elseif max < 28 then  number_pairs = 4
+  else                  number_pairs = 5
   end
-  if (type(param) ~= "nil") and (param ~= "") then
-    local max_pairs = tonumber(param)
-    if max_pairs >= 2 then
-      number_pairs = math.min(max_pairs, number_pairs)
+  if (type(max_pairs) ~= "nil") and (max_pairs ~= "") then
+    if tonumber(max_pairs) >= 1 then
+      number_pairs = math.min(tonumber(max_pairs), number_pairs)
     end    
   end
 
-  shuffle_table(places)
-  sokoarea[sokoarea_number].list_oxyds = {}
+  shuffle_table(oxyds)
 
-  function set_block(p)
-    --for q, w in pairs(places[p].wall_one) do
-    local w = places[p].wall_one[1]
-    set_element(w.lx, w.ly, sokoarea_number, "inf")
-    set_stone(blocker, w.lx, w.ly)
-    --end
+  -- set oxyds and blockers
+  local function set_block(w)
+    local myblocker = blocker
+    -- if there's an entry "st-door", choose between st-door-h and st-door-v.
+    if type(myblocker) == "string" then
+      myblocker = {myblocker}
+    end
+    for j, v in pairs(myblocker) do
+      if v == "st-door" then
+        if w.lx == w.oxyd.lx then
+          myblocker[j] = "st-door-h"
+        else
+          myblocker[j] = "st-door-v"
+        end        
+      end
+    end
+    -- now set in-floor and blocker, and add to list_blocker.
+    set_element(w.lx, w.ly, nr, "inf")
+    set_element(w.lx, w.ly, nr, "", myblocker)
+    sokoarea[nr].list_blocker[(w.lx).."/"..(w.ly)] = w
   end
   for j = 1, number_pairs do   -- Testlevel: 14
-    oxyd(places[2*j-1].lx, places[2*j-1].ly, flavor, j - 1)
-    oxyd(places[2*j].lx, places[2*j].ly, flavor, j - 1)
-    set_block(2*j-1)
-    set_block(2*j)
-    table.insert(sokoarea[sokoarea_number].list_oxyds, places[2*j-1])
-    table.insert(sokoarea[sokoarea_number].list_oxyds, places[2*j])
+    set_oxyd(nr, oxyds[2*j-1], flavor, j - 1)
+    set_oxyd(nr, oxyds[2*j], flavor, j - 1)
+    set_block(oxyds[2*j-1].blocker)
+    set_block(oxyds[2*j].blocker)
   end
   oxyd_shuffle()
+
+  -- assign goals to blockers
+  -- Note: There might be more goals as blockers, and, vice versa,
+  --       there might be more blockers as goals.
+  local goal_table = {}
+  for p, v in pairs(sokoarea[nr].list_goal) do
+    table.insert(goal_table, v)
+  end
+  shuffle_table(goal_table)
+  for j = 2, math.min(table.getn(goal_table), table.getn(oxyds)) do
+    sokoarea[nr].goal_to_blocker[goal_table[j].goal_number] = oxyds[j].blocker
+  end
 end
 
 -- endphase_set_hide_oxyds distributes oxyds over the wall_one-walls.
-function endphase_set_hide_oxyds(sokoarea_number)
+-- PARAM is a maximal number of oxyd pairs.
+function endphase_set_hide_oxyds(sokoarea_number, param)
   local flavor = sokoarea[sokoarea_number].design.oxyd or "b"
   local places = {}
   
@@ -380,15 +463,22 @@
   if max < 2 then
     -- use circle instead
     endphase_circle(sokoarea)
+    return
   elseif max <  6  then  number_pairs = 2
   elseif max < 10  then  number_pairs = 3
   elseif max < 30  then  number_pairs = 4
   else                   number_pairs = 5 end
+  if (type(param) ~= "nil") and (param ~= "") then
+    local max_pairs = tonumber(param)
+    if max_pairs then
+      number_pairs = math.min(max_pairs, number_pairs)
+    end    
+  end
   
   -- set oxyds
   for j = 1, number_pairs do
-    oxyd(places[2*j-1].lx, places[2*j-1].ly, flavor, j - 1)
-    oxyd(places[2*j].lx, places[2*j].ly, flavor, j - 1)
+    set_oxyd(sokoarea_number, places[2*j-1], flavor, j - 1)
+    set_oxyd(sokoarea_number, places[2*j], flavor, j - 1)
   end
   oxyd_shuffle()  
 end
@@ -443,22 +533,33 @@
   if max < 2 then
     -- use circle instead
     endphase_circle(sokoarea)
+    return
   elseif max <  6  then  number_pairs = 2
   elseif max < 10  then  number_pairs = 3
   else                   number_pairs = 4 end
 
   function endphase_call_fourswitch(onoff, sender)
     local j = enigma.GetAttrib(sender, "_number")
+
+    -- When fourswitch is knocked, count it.
     places[j].current = places[j].current + 1
     if places[j].current == 5 then
       places[j].current = 1
     end
+    
+    -- When count is correct, make it "st-likeoxyda-open".
     if places[j].current == places[j].solve then
       places[j].correct = true
       set_stone("st-likeoxyda-open", places[j].lx, places[j].ly,
           {_number=0})
     end
 
+    -- Now the difficult part: If it's the first fourswitch (the one
+    -- fourswitch that doesn't change any other), check all fourswitchs
+    -- and replace them by oxyds if all are correct. Else, recreate the
+    -- next fourswitch in hierarchy, set it to the old number, then
+    -- set the callback function and call it once by triggering another
+    -- time (making it show the new number). This means: Recursion!
     if j ~= 1 then
       -- Trigger all lower fourswitchs
       local x = places[j-1].lx
@@ -483,8 +584,8 @@
       if correct then
         -- replace fourswitchs by oxyds
         for k = 1, number_pairs do
-          oxyd(places[2*k-1].lx, places[2*k-1].ly, flavor, k - 1)
-          oxyd(places[2*k].lx, places[2*k].ly, flavor, k - 1)
+          set_oxyd(sokoarea_number, places[2*k-1], flavor, k - 1)
+          set_oxyd(sokoarea_number, places[2*k], flavor, k - 1)
         end
         oxyd_shuffle()
       end
@@ -499,7 +600,6 @@
     places[j].solve = random(1,4)
     places[j].correct = false
   end
-  oxyd_shuffle()  
 end
 
 function endphase_allcrack(sokoarea_number)
@@ -512,39 +612,192 @@
 
 function endphase_goal_hook_ralf(sokoarea_number, sender, more_boxes,
     goals_filled, number_goals)
-  -- verify correct sokoarea-number and existence of "list_oxyds"
-  if sokoarea_number ~= enigma.GetAttrib(sender, "_sokoarea") then
+  local nr = sokoarea_number or 1
+  -- verify correct sokoarea-number and existence of "goal_to_blocker"
+  if nr ~= enigma.GetAttrib(sender, "_sokoarea") then
     myerror("libsoko: Inconsistent sokoarea numbers in goal hook!")
   end
-  if type(sokoarea[sokoarea_number].list_oxyds) ~= "table" then
-    myerror("libsoko: Oxyd list is missing during goal hook!")
+  if type(sokoarea[nr].goal_to_blocker) ~= "table" then
+    myerror("libsoko: Blocker list is missing during goal hook!")
   end
   -- identify the corresponding door and open it
   local goal_number = enigma.GetAttrib(sender, "_goal_number")
-  local number_oxyds = table.getn(sokoarea[sokoarea_number].list_oxyds)
-  if (goal_number ~= 1) and (goal_number <= number_oxyds) then  
-    local oxyd_entry = sokoarea[sokoarea_number].list_oxyds[goal_number]
-    local door_x = oxyd_entry.wall_one[1].lx
-    local door_y = oxyd_entry.wall_one[1].ly
-    local st = enigma.GetStone(door_x, door_y)
-    if more_boxes then
-      SendMessage(st, "open")
+  local blocker = sokoarea[nr].goal_to_blocker[goal_number]
+  if blocker then
+    endphase_ralf_open_door(nr, more_boxes, blocker.lx, blocker.ly)  
+  end
+end
+
+function endphase_ralf_open_doors(sokoarea_number)
+  for p, v in pairs(sokoarea[sokoarea_number].list_blocker) do
+    endphase_ralf_open_door(sokoarea_number, true, v.lx, v.ly)
+  end
+end
+
+-- endphase_ralf_open_door opens or closes a door at position
+-- (X,Y), dependend on the boolean OPEN.
+function endphase_ralf_open_door(sokoarea_number, open, x, y)
+  local door_kind = sokoarea[sokoarea_number].design.endp.open_door
+  if door_kind then
+    if not open then
+      door_kind =    sokoarea[sokoarea_number].design.door
+                  or sokoarea[sokoarea_number].design.wall or "st-none"
+    end
+    set_element(x, y, sokoarea_number, "", door_kind)
+  else
+    -- use default "open"/"close"-messages instead
+    local st = enigma.GetStone(x, y)
+    local it = enigma.GetItem(x, y)
+    local fl = enigma.GetFloor(x, y)
+    if open then
+      if st then
+        SendMessage(st, "open")
+      end
+      if it then
+        SendMessage(it, "open")
+      end
+      if fl then
+        SendMessage(fl, "close")
+      end
     else
-      SendMessage(st, "close")
+      if st then
+        SendMessage(st, "close")
+      end
+      if it then
+        SendMessage(it, "close")
+      end
+      if fl then
+        SendMessage(fl, "open")
+      end
+    end      
+  end  
+end
+
+function endphase_vortex(sokoarea_number)
+  local nr = sokoarea_number or 1
+  local list_way = combine_tables({sokoarea[nr].list_way, sokoarea[nr].list_blocker})
+  local components = 0
+  local component = {}
+
+  -- Remove old component-entries, in case there are still some left.
+  for p, v in pairs(list_way) do
+    list_way[p].component = nil
+  end
+  -- Analyse connected components of list_way, separated by goals.
+  local function mark_component(lx, ly)
+    if     (list_way[lx.."/"..ly])
+       and (not list_way[lx.."/"..ly].component)
+       and (not sokoarea[nr].list_goal[lx.."/"..ly]) then
+      list_way[lx.."/"..ly].component = components
+      --set_floor(({"fl-leaves", "fl-ice", "fl-red", "fl-black", "fl-white",
+      --    "fl-sahara", "fl-light", "fl-gray", "fl-lightgray", "fl-rough",
+      --    "fl-marble", "fl-tigris"})[components] or "fl-sand", lx, ly)
+      table.insert(component[components], {lx = lx, ly = ly})
+      mark_component(lx+1, ly)
+      mark_component(lx-1, ly)
+      mark_component(lx, ly+1)
+      mark_component(lx, ly-1)
     end
   end
+  for p, v in pairs(list_way) do
+    --mydebug(v.lx.."/"..v.ly..": "..(list_way[p].component or "nil"))
+    if (not list_way[p].component) and (not sokoarea[nr].list_goal[p]) then
+      components = components + 1
+      component[components] = {}
+      mark_component(v.lx, v.ly)      
+    end    
+  end
+  -- If only one component, exit, player will find his way alone.
+  if components < 2 then
+    return
+  end
+  -- From each component, choose one tile and save the {lx,ly}-entry
+  local vortex = {}
+  for j = 1, components do
+    table.insert(vortex, component[j][random(1, table.getn(component[j]))])
+  end
+
+  -- Find a cyclic permutation (i.e. with only one cycle) to connect the
+  -- vortices (each vortex shall be reached by starting from any other).
+  local sequence = {}
+  for j = 1, components do
+    sequence[j] = {nr = j}
+  end
+  shuffle_table(sequence)
+  local connect = {}
+  for j = 1, components - 1 do
+    connect[sequence[j].nr] = sequence[j+1].nr
+  end
+  connect[sequence[components].nr] = sequence[1].nr
+
+  -- Now set and connect the vortices
+  for j, v in pairs(vortex) do
+    local w = vortex[connect[j]]
+    -- Remember: We also allow (we need!) vortices at old blocker-positions.
+    -- There could still be a stone over this. This stone might be st-blocker,
+    -- which turns to it-blocker and has therefore to be removed. Better
+    -- we remove all stones:
+    kill_stone(v.lx, v.ly)
+    set_item("it-vortex-open", v.lx, v.ly, {targetx = w.lx, targety = w.ly})
+  end  
 end
 
-function endphase_ralf_open_doors(sokoarea_number)
-  for j, v in pairs(sokoarea[sokoarea_number].list_oxyds) do
-    local door_x = v.wall_one[1].lx
-    local door_y = v.wall_one[1].ly
-    SendMessage(enigma.GetStone(door_x, door_y), "open")
+function endphase_set_knock_items(sokoarea_number, param)
+  local flavor = sokoarea[sokoarea_number].design.oxyd or "b"
+  local places = {}
+  local itemkind = param
+  if (itemkind == nil) or (itemkind == "") then
+    itemkind = "it-burnable"
   end
+
+  -- add all blockers
+  for p, v in pairs(sokoarea[sokoarea_number].list_blocker) do
+    table.insert(places, v)
+  end
+
+  shuffle_table(places)
+  
+  function endphase_call_knock_item(onoff, sender)
+    local j = enigma.GetAttrib(sender, "_number")
+    local nr = enigma.GetAttrib(sender, "_sokoarea")
+    if (not nr) or (not j) then
+      myerror("libsoko: Knock item has no number or no sokoarea.")
+    end
+    mydebug("Knocked on "..j.."/"..sokoarea[nr].number_oxyds)
+    -- Deactivate the first door until endphase has started.
+    if (j == 1) and (not sokoarea[nr].endphase_started) then
+      return
+    end
+    -- Close the next door in the circle ...
+    j = j + 1
+    if j > sokoarea[nr].number_oxyds then
+      j = 1
+    end
+    local mydoor = enigma.GetStone(places[j].lx, places[j].ly)
+    if mydoor then
+      SendMessage(mydoor, "close")
+    end
+    -- ... and open the door after next.
+    j = j + 1
+    if j > sokoarea[nr].number_oxyds then
+      j = 1
+    end
+    mydoor = enigma.GetStone(places[j].lx, places[j].ly)
+    if mydoor then
+      SendMessage(mydoor, "open")
+    end
+  end
+
+  -- set items
+  for j, v in pairs(places) do
+    set_item(itemkind, v.lx, v.ly, {action="callback",
+        target="endphase_call_knock_item", _number=j, _sokoarea=sokoarea_number})
+  end
 end
-    
+
     ]]></el:luamain>
     <el:i18n>
     </el:i18n>
   </el:protected>
 </el:level>
+

Modified: trunk/data/levels/lib/libsoko.xml
===================================================================
--- trunk/data/levels/lib/libsoko.xml	2007-11-10 20:10:07 UTC (rev 923)
+++ trunk/data/levels/lib/libsoko.xml	2007-11-11 01:59:08 UTC (rev 924)
@@ -67,11 +67,12 @@
 --      list_wall_one - list of outer walls near ways
 --      list_wall_two - list of outer walls or outf one tile away from
 --                      ways, together with a list of neighboring wall_ones.
+--          list_goal - list of all goals
 --
 -- Each list entry is a table: Entries lx and ly are absolute positions
 -- ("level"), ax and ay are positions in the level_array, if existent
--- (nil else). Some endphases also use list_oxyds as additional data
--- structure.
+-- (nil else). Some endphases also use list_oxyd, list_blocker,
+-- goal_to_blocker and/or number_oxyds as additional data structures.
 
 sokoarea = {}
 
@@ -134,6 +135,12 @@
   table.sort(t, function (a, b) return a.sort_field < b.sort_field end)
 end
 
+-- manhattan_distance calculates the Manhattan-distance between
+-- (X1,Y1) and (X2, Y2), which is |X1 - X2| + |Y1 - Y2|
+function manhattan_distance(x1, y1, x2, y2)
+  return math.abs(x1 - x2) + math.abs(y1 - y2)
+end
+
 -- choose_among_multiples selects a number between 1 and COUNT
 -- based on the coordinates X and Y and the algorithm's name ALG.
 function choose_among_multiples(x, y, count, alg)
@@ -148,61 +155,6 @@
   end
 end
 
--- no_way_near returns a boolean whether (x,y) is not
--- reachable by the marble.
-function no_way_near(x, y, sokoarea_number)
-  local la = sokoarea[sokoarea_number].level_array
-  local char_n = (la[y-1] or {})[x] or "-"
-  local char_s = (la[y+1] or {})[x] or "-"
-  local char_w = (la[y] or {})[x-1] or "-"
-  local char_e = (la[y] or {})[x+1] or "-"
-  return     (char_is_outf(char_n) or char_is_wall(char_n))
-         and (char_is_outf(char_s) or char_is_wall(char_s))
-         and (char_is_outf(char_w) or char_is_wall(char_w))
-         and (char_is_outf(char_e) or char_is_wall(char_e))
-end
-
--- one_tile_far_from_way checks whether (x,y) is reachable
--- by the marble through exactly one stone. If not, it returns
--- nil, else the position of this stone.
-function one_tile_far_from_way(x, y, sokoarea_number)
-  -- first of all, make sure there is no direct way 
-  --if not no_way_near(x, y, sokoarea_number) then
-  --  return nil
-  --end
-  -- now analyse the following positions relative to our
-  -- center C = (x,y), marked by stars:
-  --   *
-  --  *.*
-  -- *.C.*
-  --  *.*
-  --   *
-  local la = sokoarea[sokoarea_number].level_array
-  local neighborhood = {          {x= 0, y=-2},
-                    {x=-1, y=-1},               {x= 1, y=-1},
-      {x=-2, y= 0},                                           {x= 2, y= 0},
-                    {x=-1, y= 1},               {x= 1, y= 1},
-                                  {x= 0, y= 2},                            }
-  local char = {}
-  for j, k in pairs(neighborhood) do
-    char[j] = {ch = (la[y+k.y] or {})[x+k.x] or "", nr = j}
-  end
-  -- from this list, remove all empty positions, walls and outf
-  local char_backup = char
-  for j, v in pairs(char_backup) do
-    if char_is_outf(v.ch) or char_is_wall(v.ch) or (v.ch == "") then
-      table.remove(char, j)
-    end
-  end
-  -- return nil or a random element of char
-  if table.getn(char) == 0 then
-    return nil
-  else
-    local n = neighborhood[char[random(1, table.getn(char))].nr]
-    return {x=x+n.x, y=y+n.y}
-  end
-end
-
 -- check_chess returns a boolean whether a chess stone is used
 -- in the sokoarea SOKOAREA_NUMBER.
 function check_chess(sokoarea_number)
@@ -218,6 +170,18 @@
   return false
 end
 
+-- set_oxyd sets an oxyd with given flavor and color and adds
+-- the neccessary entry to list_oxyd.
+function set_oxyd(sokoarea_number, list_entry, flavor, color)
+  local entry = list_entry
+  entry.flavor = flavor
+  entry.color = color
+  oxyd(entry.lx, entry.ly, flavor, color)
+  sokoarea[sokoarea_number].list_oxyd[(entry.lx).."/"..(entry.ly)] = entry
+  sokoarea[sokoarea_number].number_oxyds =
+      sokoarea[sokoarea_number].number_oxyds + 1
+end
+
 -- create_lists creates the special lists list_outside, list_wall,
 -- list_way, list_wall_one and list_wall_two for SOKOAREA_NUMBER.
 function create_lists(sokoarea_number)
@@ -333,7 +297,12 @@
     list_wall = {},
     list_way = {},
     list_wall_one = {},
-    list_wall_two = {}
+    list_wall_two = {},
+    list_goal = {},
+    list_oxyd = {},
+    list_blocker = {},
+    goal_to_blocker = {},
+    number_oxyds = 0
   }
   return sokoarea_number
 end
@@ -356,7 +325,9 @@
     return
   end
 
-  if type(el) == "string"  then  el = {el}  end
+  if type(el) == "string" then
+    el = {el}
+  end
 
   local fl = {}
   local st = {}
@@ -364,17 +335,43 @@
   local multiple_alg = "checkerboard"
   local friction = nil
   local mousefactor = nil
+  local fire = nil
 
   -- Now analyse EL: Decompose its entries into fl,st,it.
-  for j, s in pairs(el) do
-        if is_floor(s)       then  table.insert(fl, s)
-    elseif is_stone(s)       then  table.insert(st, s)
-    elseif is_item(s)        then  table.insert(it, s)
-    elseif is_algorithm(s)   then  multiple_alg = string.sub(s, 4, -1)
-    elseif is_friction(s)    then  friction = tonumber(string.sub(s, 4, -1))
-    elseif is_mousefactor(s) then  mousefactor = tonumber(string.sub(s, 4, -1))
+  -- Each entry might in turn hold a ":NUMBER", which multiplicates it.
+  for j, v in pairs(el or {}) do
+    if type(v) == "string" then
+      -- Separate the multiplicator
+      local s = v
+      local nr = 1
+      local sep = string.find(v, ":")
+      if sep then
+        s = string.sub(v, 1, sep - 1)
+        nr = tonumber(string.sub(v, sep + 1))
+      end
+      if type(nr) ~= "number" then
+        -- Assume it's not a multiplicator, like in "al:ALGORITHM".
+        s = v
+        nr = 1
+      end
+
+      -- Now sort the entry into tables
+      for j = 1, nr do
+            if is_floor(s)       then  table.insert(fl, s)
+        elseif is_stone(s)       then  table.insert(st, s)
+        elseif is_item(s)        then  table.insert(it, s)
+        elseif is_algorithm(s)   then  multiple_alg = string.sub(s, 4, -1)
+        elseif is_friction(s)    then  friction = tonumber(string.sub(s, 4, -1))
+        elseif is_mousefactor(s) then  mousefactor = tonumber(string.sub(s, 4, -1))
+        elseif s == "fire"       then  fire = true
+        elseif s == "nofire"     then  fire = false
+        else
+          mywarning("Unknown entry "..j.."="..s.." in design element.")
+        end
+      end
     else
-      mywarning("Unknown entry "..s.." in design element.")
+      mywarning("In design element, entry "..j.." is of type "
+                ..type(v)..", not string.")      
     end
   end
 
@@ -383,7 +380,16 @@
   ----------- floor --------------
   if table.getn(fl) > 0 then
     local flkind = fl[choose_among_multiples(x, y, table.getn(fl), multiple_alg)]
-    created_objects.fl = set_floor(flkind, x, y)
+    if flkind == "fl-bridge_x" then
+      created_objects.fl = set_floor("fl-bridge", x, y,
+          {type = "x", burnable = false, eternal = true})
+    elseif flkind == "fl-bridge_y" then
+      created_objects.fl = set_floor("fl-bridge", x, y,
+          {type = "y", burnable = false, eternal = true})
+    else
+      created_objects.fl = set_floor(flkind, x, y,
+          {burnable = false, eternal = true})
+    end
     if type(friction) == "number" then
       enigma.SetAttrib(created_objects.fl, "friction", friction)
     end
@@ -419,6 +425,8 @@
     if (el_str == "goal") and not in_endphase then
       local gn = sokoarea[sokoarea_number].number_goals + 1
       sokoarea[sokoarea_number].number_goals = gn
+      sokoarea[sokoarea_number].list_goal[x.."/"..y] = 
+          {lx = x, ly = y, goal_number = gn}
       if created_objects.it and not in_endphase then
         enigma.SetAttrib(created_objects.it, "action", "callback")
         enigma.SetAttrib(created_objects.it, "target", "goal_trigger")
@@ -428,7 +436,23 @@
       end
     end
   end
-  
+
+  ----------- fire ----------------
+  if fire ~= nil then
+    local myfloor = enigma.GetFloor(x,y)
+    if myfloor then
+      if fire then
+        enigma.SetAttrib(myfloor, "burnable", true)
+        enigma.SetAttrib(myfloor, "eternal", true)
+        SendMessage(myfloor, "forcefire")
+      else
+        SendMessage(myfloor, "stopfire")
+        enigma.SetAttrib(myfloor, "burnable", false)
+        enigma.SetAttrib(myfloor, "eternal", true)
+      end
+    end
+  end
+
   return created_objects
 end
 
@@ -447,6 +471,7 @@
   local design = sokoarea[nr].design
   local dx = sokoarea[nr].offset.x
   local dy = sokoarea[nr].offset.y
+  sokoarea[nr].list_goal = {}
 
   -- create level
   for y = 0, sokoarea[nr].array_height - 1 do
@@ -981,12 +1006,18 @@
   sokoarea[nr].number_goals = 0
   sokoarea[nr].goals_filled = 0
   sokoarea[nr].endphase_started = false
-
+  sokoarea[nr].goal_to_blocker = {}
+  sokoarea[nr].goal_hook = nil
+  sokoarea[nr].list_goal = {}
+  sokoarea[nr].list_oxyd = {}
+  sokoarea[nr].list_blocker = {}
+  sokoarea[nr].number_oxyds = 0
+    
   draw_level_array(nr, true, false)
 
   -- prepare oxyds for end phase
   prepare_endphase(nr)
-  mywarning(sokoarea[nr].design.endp.alg)
+  mydebug("Prepared for endphase "..sokoarea[nr].design.endp.alg..".")
 end
 
 -- draw_sokoball draws a sokoball level from argument LEVEL, sublevel
@@ -1039,6 +1070,8 @@
       if alg then
         alglist[alg] = (alglist[alg] or 0) + 1
       end
+    else
+      alglist["default"] = (alglist["default"] or 0) + 1
     end
   end
   for k, v in pairs(alglist) do



From andreasl at mail.berlios.de  Thu Nov 15 21:42:54 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Thu, 15 Nov 2007 21:42:54 +0100
Subject: [Enigma-game-svn] r925 - in trunk: data/levels/enigma_cross
	data/levels/enigma_v doc/reference src
Message-ID: <200711152042.lAFKgsQk009672@sheep.berlios.de>

Author: andreasl
Date: 2007-11-15 21:42:53 +0100 (Thu, 15 Nov 2007)
New Revision: 925

Modified:
   trunk/data/levels/enigma_cross/newlevels.xml
   trunk/data/levels/enigma_v/andreas25_2.xml
   trunk/data/levels/enigma_v/index.xml
   trunk/doc/reference/enigma-ref.texi
   trunk/src/actors.cc
Log:
Trunk:
 - Actors now jump out of swamp and water, instead of keeping at
   the same depth after the jump. Includes Refman-entry.
 - "Acoustic Memory" is renamed to "Acoustic Reminiscence"
   

Modified: trunk/data/levels/enigma_cross/newlevels.xml
===================================================================
--- trunk/data/levels/enigma_cross/newlevels.xml	2007-11-11 01:59:08 UTC (rev 924)
+++ trunk/data/levels/enigma_cross/newlevels.xml	2007-11-15 20:42:53 UTC (rev 925)
@@ -131,7 +131,7 @@
     <level _seq="123" _title="- Meditation -" _xpath="enigma_v/alain14_1" author="Alain Busser" ctrl="force" easy="false" id="alain14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="124" _title="Frogger" _xpath="enigma_v/luc20_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc20" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="125" _title="Fatal Attraction I" _xpath="enigma_v/spaceman01_2" author="Spaceman" ctrl="force" easy="true" id="spaceman1" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="126" _title="Acoustic Memory" _xpath="enigma_v/andreas25_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="2" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="126" _title="Acoustic Reminiscence" _xpath="enigma_v/andreas25_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="127" _title="Fatal Attraction II" _xpath="enigma_v/spaceman02_1" author="Spaceman" ctrl="force" easy="false" id="spaceman2" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="128" _title="Fatal Attraction III" _xpath="enigma_v/spaceman03_1" author="Spaceman" ctrl="force" easy="false" id="spaceman3" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="129" _title="Doors forever" _xpath="enigma_v/just03_1" author="JuSt" ctrl="force" easy="true" id="just03" rel="1" rev="3" score="1" target="time" unit="duration"/>

Modified: trunk/data/levels/enigma_v/andreas25_2.xml
===================================================================
--- trunk/data/levels/enigma_v/andreas25_2.xml	2007-11-11 01:59:08 UTC (rev 924)
+++ trunk/data/levels/enigma_v/andreas25_2.xml	2007-11-15 20:42:53 UTC (rev 925)
@@ -2,8 +2,8 @@
 <el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
   <el:protected>
     <el:info el:type="level">
-      <el:identity el:title="Acoustic Memory" el:subtitle="" el:id="andreas25"/>
-      <el:version el:score="1" el:release="2" el:revision="0" el:status="released"/>
+      <el:identity el:title="Acoustic Reminiscence" el:subtitle="" el:id="andreas25"/>
+      <el:version el:score="1" el:release="2" el:revision="2" el:status="released"/>
       <el:author  el:name="Andreas Lochmann" el:email="" el:homepage=""/>
       <el:copyright>Copyright ? 2006 Andreas Lochmann</el:copyright>
       <el:license el:type="GPL v2.0 or above" el:open="true"/>

Modified: trunk/data/levels/enigma_v/index.xml
===================================================================
--- trunk/data/levels/enigma_v/index.xml	2007-11-11 01:59:08 UTC (rev 924)
+++ trunk/data/levels/enigma_v/index.xml	2007-11-15 20:42:53 UTC (rev 925)
@@ -78,7 +78,7 @@
     <level _seq="70" _title="- Meditation -" _xpath="./alain14_1" author="Alain Busser" ctrl="force" easy="false" id="alain14" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="71" _title="Frogger" _xpath="./luc20_1" author="Lukas Sch?ller" ctrl="force" easy="false" id="luc20" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="72" _title="Fatal Attraction I" _xpath="./spaceman01_2" author="Spaceman" ctrl="force" easy="true" id="spaceman1" rel="2" rev="2" score="2" target="time" unit="duration"/>
-    <level _seq="73" _title="Acoustic Memory" _xpath="./andreas25_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="2" rev="0" score="1" target="time" unit="duration"/>
+    <level _seq="73" _title="Acoustic Reminiscence" _xpath="./andreas25_2" author="Andreas Lochmann" ctrl="force" easy="true" id="andreas25" rel="2" rev="2" score="1" target="time" unit="duration"/>
     <level _seq="74" _title="Fatal Attraction II" _xpath="./spaceman02_1" author="Spaceman" ctrl="force" easy="false" id="spaceman2" rel="1" rev="0" score="1" target="time" unit="duration"/>
     <level _seq="75" _title="Stranded" _xpath="./duffy51_2" author="Jacob Scott" ctrl="force" easy="false" id="duffy51" rel="2" rev="3" score="2" target="time" unit="duration"/>
     <level _seq="76" _title="Fatal Attraction III" _xpath="./spaceman03_1" author="Spaceman" ctrl="force" easy="false" id="spaceman3" rel="1" rev="0" score="1" target="time" unit="duration"/>

Modified: trunk/doc/reference/enigma-ref.texi
===================================================================
--- trunk/doc/reference/enigma-ref.texi	2007-11-11 01:59:08 UTC (rev 924)
+++ trunk/doc/reference/enigma-ref.texi	2007-11-15 20:42:53 UTC (rev 925)
@@ -4112,6 +4112,9 @@
 @code{it-spring2} when using.  @code{it-springboard} is fixed to the
 ground; you can only use it where it is.
 
+When you're already sinking in @code{fl-swamp} or @code{fl-water}, you
+can use springs to jump out of them, sinking then starts anew.
+
 @strong{Variants}
 
 @table @code

Modified: trunk/src/actors.cc
===================================================================
--- trunk/src/actors.cc	2007-11-11 01:59:08 UTC (rev 924)
+++ trunk/src/actors.cc	2007-11-15 20:42:53 UTC (rev 925)
@@ -996,6 +996,11 @@
     string kind     = get_kind();
     State  oldstate = state;
 
+    // Whatever happened to the ball, the sink depth
+    // should be returned to zero.
+    sinkDepth = minSinkDepth;
+    sinkModel = -1;
+
     state = newstate;
     switch (newstate) {
     case NORMAL:



From ral at mail.berlios.de  Sun Nov 18 17:45:14 2007
From: ral at mail.berlios.de (ral at BerliOS)
Date: Sun, 18 Nov 2007 17:45:14 +0100
Subject: [Enigma-game-svn] r926 - in trunk: data data/gfx32 data/gfx40
	data/gfx48 src src/lev src/stones
Message-ID: <200711181645.lAIGjEAv015711@sheep.berlios.de>

Author: ral
Date: 2007-11-18 17:45:12 +0100 (Sun, 18 Nov 2007)
New Revision: 926

Added:
   trunk/data/gfx32/st-oxydbtempl_0096.png
   trunk/data/gfx32/st-oxydbtempl_0097.png
   trunk/data/gfx32/st-oxydbtempl_0101.png
   trunk/data/gfx32/st-oxydbtempl_0102.png
   trunk/data/gfx32/st-oxydbtempl_0103.png
   trunk/data/gfx32/st-oxydbtempl_0104.png
   trunk/data/gfx32/st-oxydbtempl_0111.png
   trunk/data/gfx32/st-oxydbtempl_0112.png
   trunk/data/gfx32/st-oxydbtempl_0113.png
   trunk/data/gfx32/st-oxydbtempl_0114.png
   trunk/data/gfx32/st-oxydbtempl_0115.png
   trunk/data/gfx32/st-oxydbtempl_0116.png
   trunk/data/gfx32/st-oxydbtempl_0117.png
   trunk/data/gfx32/st-oxydbtempl_0118.png
   trunk/data/gfx40/st-oxydbtempl_0096.png
   trunk/data/gfx40/st-oxydbtempl_0097.png
   trunk/data/gfx40/st-oxydbtempl_0101.png
   trunk/data/gfx40/st-oxydbtempl_0102.png
   trunk/data/gfx40/st-oxydbtempl_0103.png
   trunk/data/gfx40/st-oxydbtempl_0104.png
   trunk/data/gfx40/st-oxydbtempl_0111.png
   trunk/data/gfx40/st-oxydbtempl_0112.png
   trunk/data/gfx40/st-oxydbtempl_0113.png
   trunk/data/gfx40/st-oxydbtempl_0114.png
   trunk/data/gfx40/st-oxydbtempl_0115.png
   trunk/data/gfx40/st-oxydbtempl_0116.png
   trunk/data/gfx40/st-oxydbtempl_0117.png
   trunk/data/gfx40/st-oxydbtempl_0118.png
   trunk/data/gfx48/st-oxydbtempl_0096.png
   trunk/data/gfx48/st-oxydbtempl_0097.png
   trunk/data/gfx48/st-oxydbtempl_0101.png
   trunk/data/gfx48/st-oxydbtempl_0102.png
   trunk/data/gfx48/st-oxydbtempl_0103.png
   trunk/data/gfx48/st-oxydbtempl_0104.png
   trunk/data/gfx48/st-oxydbtempl_0111.png
   trunk/data/gfx48/st-oxydbtempl_0112.png
   trunk/data/gfx48/st-oxydbtempl_0113.png
   trunk/data/gfx48/st-oxydbtempl_0114.png
   trunk/data/gfx48/st-oxydbtempl_0115.png
   trunk/data/gfx48/st-oxydbtempl_0116.png
   trunk/data/gfx48/st-oxydbtempl_0117.png
   trunk/data/gfx48/st-oxydbtempl_0118.png
Modified:
   trunk/data/models-2d.lua
   trunk/data/models.lua
   trunk/src/lev/Proxy.cc
   trunk/src/server.cc
   trunk/src/server.hh
   trunk/src/stones/OxydStone.cc
   trunk/src/stones/OxydStone.hh
Log:
Trunk 1.1: Fair Oxyd Distribution
- full support of pseudo oxyds (fair and simple shuffle)
- full support of noshuffle attribute (fair and simple shuffle)
- log limited to test and experimental levels


Added: trunk/data/gfx32/st-oxydbtempl_0096.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0096.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0097.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0097.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0101.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0101.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0102.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0102.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0103.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0103.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0104.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0104.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0111.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0111.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0112.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0112.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0113.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0113.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0114.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0114.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0115.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0115.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0116.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0116.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0117.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0117.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx32/st-oxydbtempl_0118.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx32/st-oxydbtempl_0118.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0096.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0096.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0097.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0097.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0101.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0101.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0102.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0102.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0103.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0103.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0104.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0104.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0111.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0111.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0112.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0112.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0113.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0113.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0114.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0114.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0115.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0115.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0116.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0116.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0117.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0117.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx40/st-oxydbtempl_0118.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx40/st-oxydbtempl_0118.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0096.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0096.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0097.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0097.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0101.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0101.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0102.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0102.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0103.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0103.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0104.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0104.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0111.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0111.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0112.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0112.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0113.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0113.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0114.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0114.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0115.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0115.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0116.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0116.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0117.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0117.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/data/gfx48/st-oxydbtempl_0118.png
===================================================================
(Binary files differ)


Property changes on: trunk/data/gfx48/st-oxydbtempl_0118.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/data/models-2d.lua
===================================================================
--- trunk/data/models-2d.lua	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/data/models-2d.lua	2007-11-18 16:45:12 UTC (rev 926)
@@ -890,8 +890,8 @@
         -- activated laser
         names = {}
         for i=1,table.getn(laseron) do
-	        names[i] = "st-laseron"..dir .. format("_%04d", i)
-	        DefOverlay (names[i], {"st-laser-base", laseron[i]})
+                names[i] = "st-laseron"..dir .. format("_%04d", i)
+                DefOverlay (names[i], {"st-laser-base", laseron[i]})
         end
         frames = BuildFrames(names, 100)
         DefAnim("st-laseron-anim"..dir, frames, 1)
@@ -1066,14 +1066,14 @@
 -- st-switch, st-switch_black, st-switch_white --
 do
     function mkswitch(modelname, basename)
-    	local n = DefSubimages(modelname, {h=3, modelname=basename.."-fg"})
-    	local f = BuildFrames(n, 60)
-    	DefRoundStone(modelname.."-off", n[1])
-    	DefRoundStone(modelname.."-on", n[3])
-      	DefAnim(basename.."-turnon", f)
-	    DefAnim(basename.."-turnoff", ReverseFrames(f))
-	    DefRoundStone(modelname.."-turnon", basename.."-turnon")
-	    DefRoundStone(modelname.."-turnoff", basename.."-turnoff")
+        local n = DefSubimages(modelname, {h=3, modelname=basename.."-fg"})
+        local f = BuildFrames(n, 60)
+        DefRoundStone(modelname.."-off", n[1])
+        DefRoundStone(modelname.."-on", n[3])
+        DefAnim(basename.."-turnon", f)
+            DefAnim(basename.."-turnoff", ReverseFrames(f))
+            DefRoundStone(modelname.."-turnon", basename.."-turnon")
+            DefRoundStone(modelname.."-turnoff", basename.."-turnoff")
     end
     mkswitch("st-switch", "switch")
     mkswitch("st-switch_black", "switch_black")
@@ -1220,8 +1220,13 @@
 
 do
     local colorspots = FrameNames("st-oxydbtempl", 2,9)
+    AddFrameNames(colorspots, "st-oxydbtempl", 96,97)
     local openovls = FrameNames("st-oxydbtempl", 10,14)
+    local pseudospots = {}
+    pseudospots[-3] = FrameNames("st-oxydbtempl", 101,104)
+    pseudospots[-4] = FrameNames("st-oxydbtempl", 111,118)
 
+
 -- Define "fading in" and "fading out" animations for oxyd stones.
 -- These two animations are combined with the stone images to
 -- produce the opening and closing animations for oxyd stones.
@@ -1255,8 +1260,15 @@
         local n = "st-oxyd" .. flavor .. color
         local fadein = "oxyd"..flavor.."-fadein"
         local fadeout= "oxyd"..flavor.."-fadeout"
+        local spotcolor = color
+        
+        if (color >= 0) then
+            spotcolor = color + 1   -- oxyd color 0..7, file 2..9, frames 1..8
+        else
+            spotcolor = 100 + color -- pseudo colors
+        end
 
-        DefOverlay(n.."-base", {baseimg[flavor], colorspots[color+1]})
+        DefOverlay(n.."-base", {baseimg[flavor], colorspots[spotcolor]})
         display.DefineComposite(n.."-opening-fg", n.."-base", fadein)
         display.DefineComposite(n.."-closing-fg", n.."-base", fadeout)
         DefShModel (n.."-opening", n.."-opening-fg", shadow[flavor])
@@ -1290,6 +1302,28 @@
         DefShModel(n, n.."-anim", shadow[flavor])
     end
 
+    function mkpseudo(flavor, color)
+        local n = "st-oxyd" .. flavor .. "-pseudo" .. color
+        local names = {}
+
+        for i=1, table.getn(pseudospots[color]) do
+            local images={baseimg[flavor],pseudospots[color][i]}
+            names[i] = n .. format("_%04d", i)
+            DefOverlay(names[i], images)
+        end
+
+        -- compose these images into an animation
+        if (color == -3) then
+            frames = RepeatAnim(PingPong(BuildFrames(names, 50)),2)
+        elseif (color == -4) then
+            frames = RepeatAnim(BuildFrames(names, 100),2)
+        end
+        DefAnim(n.."-anim", frames, false)
+
+        -- and finally add a shadow to make the model complete
+        DefShModel(n, n.."-anim", shadow[flavor])
+    end
+
     function mkoxyd(flavor)
         DefStone("st-oxyd"..flavor, shadow[flavor])
         DefShModel("st-likeoxyd"..flavor, "st-oxyd"..flavor, shadow[flavor])
@@ -1307,6 +1341,10 @@
             mkblink(flavor, color)
             mkopened(flavor, color)
         end
+        mkopenclose(flavor, -3)
+        mkpseudo(flavor, -3)
+        mkopenclose(flavor, -4)
+        mkpseudo(flavor, -4)
     end
     mkoxyd("a")
     mkoxyd("b")
@@ -1480,7 +1518,7 @@
 --
 -- naming scheme for mirror models:
 --
---	st-{3mirror,pmirror}-{m,s}{o,t}[1234]
+--      st-{3mirror,pmirror}-{m,s}{o,t}[1234]
 --
 -- {m,s} -> movable or static
 -- {o,t} -> opaque or transparent
@@ -1488,16 +1526,16 @@
 -- The numbers map to actual orientations as follows:
 --
 --   NUMBER    TRIANG.M.   PLANE M.
---	1	south	  "v"        "-"
---	2	west	  "<"        "\"
---	3	north	  "^"        "|"
---	4	east	  ">"        "/"
+--      1       south     "v"        "-"
+--      2       west      "<"        "\"
+--      3       north     "^"        "|"
+--      4       east      ">"        "/"
 do
     function make_mirror(basename, baseimg, overlays)
         for i=1,4 do
-	        mname = basename .. i
-	        DefOverlay (mname .. "-ovl", {baseimg, overlays[i]})
-	        DefShModel(mname, mname .. "-ovl", "sh-round2")
+                mname = basename .. i
+                DefOverlay (mname .. "-ovl", {baseimg, overlays[i]})
+                DefShModel(mname, mname .. "-ovl", "sh-round2")
         end
     end
 

Modified: trunk/data/models.lua
===================================================================
--- trunk/data/models.lua	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/data/models.lua	2007-11-18 16:45:12 UTC (rev 926)
@@ -177,6 +177,12 @@
     return fn
 end
 
+function AddFrameNames(fn, prefix, first, last)
+    for i=first,last do
+	    table.insert(fn, i, prefix .. format("_%04d", i))
+    end
+end
+
 -- Build a list of frames from a list of model names and a constant
 -- duration.
 function BuildFrames(names, msec)

Modified: trunk/src/lev/Proxy.cc
===================================================================
--- trunk/src/lev/Proxy.cc	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/src/lev/Proxy.cc	2007-11-18 16:45:12 UTC (rev 926)
@@ -617,6 +617,7 @@
         if (this == currentLevel) {    // just level - no libs
             server::SetCompatibility(this);
             server::EnigmaCompatibility = getEnigmaCompatibility();
+            server::LevelStatus = getLevelStatus();
         }
         processDependencies();
         loadLuaCode();

Modified: trunk/src/server.cc
===================================================================
--- trunk/src/server.cc	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/src/server.cc	2007-11-18 16:45:12 UTC (rev 926)
@@ -95,6 +95,7 @@
 double   server::FrictionFactor;
 double   server::HoleForce;
 double   server::IceFriction;
+lev::levelStatusType   server::LevelStatus; // no Lua access
 double   server::MagnetForce;
 double   server::MagnetRange;
 double   server::SlopeForce;

Modified: trunk/src/server.hh
===================================================================
--- trunk/src/server.hh	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/src/server.hh	2007-11-18 16:45:12 UTC (rev 926)
@@ -74,6 +74,9 @@
     // level compatibility
     extern double   EnigmaCompatibility;
    
+    // level compatibility
+    extern lev::levelStatusType   LevelStatus;
+   
     // Default brittleness of the floor: 0 = stable..1=unstable.
     // Really: probability that a floor tile will crack when an actor
     // enters or leaves it.

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/src/stones/OxydStone.cc	2007-11-18 16:45:12 UTC (rev 926)
@@ -23,10 +23,12 @@
 #include "main.hh"
 #include "server.hh"
 #include "world.hh"
+#include "lev/Proxy.hh"
 
 namespace enigma {
  
     OxydStone::InstanceVector OxydStone::levelOxyds;
+    bool OxydStone::isInit = false;
     std::vector<unsigned short> OxydStone::colorsUsageCount;
     unsigned short OxydStone::shuffledFakeCount;
     unsigned short OxydStone::shuffledFartCount;
@@ -61,6 +63,8 @@
         
         base.rulesLimit.push_back(limit);
         
+        ASSERT(groupsMembers[r.groupId1] != 0, XLevelRuntime, "Oxyd shuffle rule for an empty group");
+        
         switch (type) {
             case RULE_SINGLE_MIN:
                 singleRulesMin.push_back(r);
@@ -69,9 +73,11 @@
                 singleRulesMax.push_back(r);
                 break;
             case RULE_PAIR_MIN:
+                ASSERT(groupsMembers[r.groupId2] != 0, XLevelRuntime, "Oxyd shuffle rule for an empty group");
                 pairRulesMin.push_back(r);
                 break;
             case RULE_PAIR_MAX:
+                ASSERT(groupsMembers[r.groupId2] != 0, XLevelRuntime, "Oxyd shuffle rule for an empty group");
                 pairRulesMax.push_back(r);
                 break;
         }
@@ -102,7 +108,7 @@
     }
     
     void OxydStone::initColors() {
-        if (colorsUsageCount.size() != 0)
+        if (isInit)
             return;  // we are already initialized!
             
         unsigned short numColors = numColorsAvailable();
@@ -118,7 +124,7 @@
         // count color usage
         for (size_t i=0; i<isize; ++i) {
             int color = levelOxyds[i]->getAttr("color");
-            bool declineShuffle = levelOxyds[i]->getAttr("noshuffle");
+            bool declineShuffle = to_bool(levelOxyds[i]->getAttr("noshuffle"));
             if (color >= 0 && color < numColors) {
                 colorsUsageCount[color]++;
                 if (declineShuffle) colorsUsageCountNoShuffle[color]++;
@@ -148,9 +154,11 @@
                     autocoloredOxyds.back()->set_attrib("color", i);
                     autocoloredOxyds.pop_back();
                     colorsUsageCount[i]++;
-                } else {
+                } else if (onlyPairs) {
                     onlyPairs = false;
                     break;
+                } else {
+                    ASSERT(false, XLevelRuntime, "Oxyd init colors - too many unpaired oxyds with given color");
                 }
             }
             if (colorsUsageCountNoShuffle[i] % 2 == 1) {
@@ -179,7 +187,11 @@
             lastObject->set_attrib("color", FAKE);
             colorsUsageCount[lastColor]--;
             shuffledFakeCount++;
+        } else {
+            ASSERT(onlyPairs, XLevelRuntime, "Oxyd init colors - too many unpaired oxyds with given color");
         }
+        
+        isInit = true;
     }
     
     void OxydStone::shuffleColors(LogType logFlag) {
@@ -201,24 +213,24 @@
     }
     
     void OxydStone::simpleShuffleColors() {
-        // TODO support for noshuffle and pseudo
         
-        std::vector<size_t> closed_oxyds;
+        std::vector<size_t> closedOxyds;
         size_t  isize = levelOxyds.size();
         for (size_t i=0; i<isize; ++i) {
-            if (levelOxyds[i]->animState == CLOSED) {
-                closed_oxyds.push_back(i);
+            OxydStone *candidate = levelOxyds[i];
+            if (candidate->iState == CLOSED && !to_bool(candidate->getAttr("noshuffle"))) {
+                closedOxyds.push_back(i);
             }
         }
     
-        unsigned size = closed_oxyds.size();
+        unsigned size = closedOxyds.size();
         if (size>1) {
             for (unsigned i = 0; i<size; ++i) {
                 unsigned a = IntegerRand(0, static_cast<int> (size-2));
                 if (a >= i) ++a;        // make a always different from j
     
-                OxydStone *o1 = levelOxyds[closed_oxyds[i]];
-                OxydStone *o2 = levelOxyds[closed_oxyds[a]];
+                OxydStone *o1 = levelOxyds[closedOxyds[i]];
+                OxydStone *o2 = levelOxyds[closedOxyds[a]];
     
                 Value icolor = o1->getAttr("color"); 
     
@@ -229,8 +241,11 @@
     }
     
     void OxydStone::fairShuffleColors(LogType logFlag) {        
+        unsigned short numOxyds = levelOxyds.size();
+        
         // generate sequence of oxyds for randomness of distribution
-        // TODO exclude noshuffle pseudo oxyds
+        // the sequence contains even noshuffle pseudo oxyds as they are masked out
+        // by the freeOxydMask prior being selected anywhere
         randomOxydIds = std::vector<unsigned short>(levelOxyds.size());
         for (int i = 0; i < randomOxydIds.size(); i++)
             randomOxydIds[i] = i;
@@ -241,12 +256,18 @@
             randomOxydIds[j] = t;
         }
         
-//        log_shuffle_basis();
-        
         if (groupsSharedMembers.size() == 0) {
             // first shuffle call for given rules - initialize base frame
-            // TODO exclude noshuffle pseudo oxyds
             
+            // prepare exclusion of noshuffle pseudo oxyds
+            uint32_t noshufflePseudoMask = 0; 
+            for (int i = 0; i < numOxyds; i++) {
+                OxydStone *candidate = levelOxyds[i];
+                if ((int)candidate->getAttr("color") < AUTO && 
+                        to_bool(candidate->getAttr("noshuffle")))
+                    noshufflePseudoMask |= 1 << i;
+            }
+            
             // evaluate all group members that are shared with another group
             for (int i = 0; i < groupsMembers.size(); i++) {
                 uint32_t shared = 0;
@@ -254,16 +275,17 @@
                     if (i != j)
                         shared |= (groupsMembers[i] & groupsMembers[j]);
                 }
-                groupsSharedMembers.push_back(shared);
+                groupsSharedMembers.push_back(shared & ~noshufflePseudoMask);
             }
             
             // init oxyd pair candidates
-            uint32_t all = (1 << (levelOxyds.size())) - 1;  // a 1 for every oxyd
-            unsigned short numOxyds = levelOxyds.size();
+            uint32_t all = (((uint32_t)1 << (levelOxyds.size())) - 1)   // a 1 for every oxyd
+                                & ~noshufflePseudoMask;
             ShuffleFrame &base = shuffleStack.front();
             for (int i = 0; i < numOxyds; i++) {
-                base.oxydsCandidatesCount.push_back(numOxyds - 1); // all but itself
-                base.oxydsCandidatesMask.push_back(all & ~(1 << i));   // all but itself
+                uint32_t candidates = all & ~(1 << i);   // exclude itself
+                base.oxydsCandidatesMask.push_back(candidates);   
+                base.oxydsCandidatesCount.push_back(countOxyds(candidates));
             }
             base.freeOxydsMask = all;
             base.freePseudoCount = shuffledFakeCount + shuffledFartCount + shuffledBoldCount;
@@ -271,40 +293,68 @@
             for (int i = 0; i < numColorsAvailable(); i++) {
                 base.freePairsCount += colorsUsageCount[i];
             }
+            base.freePairsCount /= 2;
             base.selOxyd1Mask = 0;  // no oxyd assigned in this frame
             base.selOxyd2Mask = 0;
             base.openedOxydIndex = 0;
+            base.fixedcolorOxydIndex = 0;
         }
-        log_shuffle_basis();
-        log_shuffle_stack();
+        
+        // make a copy of the base frame as the base frame should not be modified
+        ShuffleFrame &top = shuffleStack.back();
+        ShuffleFrame second = top;
+                
+        // remove not CLOSED pseudo oxyds
+        uint32_t notClosedPseudoMask = 0; 
+        for (int i = 0; i < numOxyds; i++) {
+            OxydStone *candidate = levelOxyds[i];
+            if ((int)candidate->getAttr("color") < AUTO && candidate->iState != CLOSED)
+                notClosedPseudoMask |= 1 << i;
+        }
+        second.freeOxydsMask &= ~notClosedPseudoMask;
+        for (int i = 0; i < numOxyds; i++) {
+            second.oxydsCandidatesMask[i] &= ~notClosedPseudoMask;   
+            second.oxydsCandidatesCount[i] = countOxyds(second.oxydsCandidatesMask[i]);
+        }
+        
+        shuffleStack.push_back(second);
+        
+//        log_shuffle_basis();
+//        log_shuffle_stack();
         logBadFrameCount = 0;
         
         if (logFlag == NOTHING) logFlag = SOLUTION;
         
         int result = evaluateTopFrame(logFlag);
+        shuffleStack.pop_back();         // remove the copy
+                
+        if (server::LevelStatus >= lev::STATUS_TEST) {
+            if (logFlag >= COUNT)
+                Log << "Fair Shuffle found " << result << " distributions -  bad frames " << logBadFrameCount << "\n";
+            else if (logFlag == SOLUTION)
+                Log << "Fair Shuffle bad frames " << logBadFrameCount << "\n";
+        }
         
-        if (logFlag >= COUNT)
-            Log << "Fair Shuffle found " << result << " solutions -  bad frames " << logBadFrameCount << "\n";
-        else if (logFlag == SOLUTION)
-            Log << "Fair Shuffle bad frames " << logBadFrameCount << "\n";
-        
+        ASSERT(result > 0, XLevelRuntime, "Oxyd shuffle colors - no fair solution exists for given rules");
     }
     
     int OxydStone::evaluateTopFrame(LogType logFlag) {
         unsigned short numOxyds = levelOxyds.size();
         ShuffleFrame &top = shuffleStack.back();
         int solutionsCount = 0;
+//        log_shuffle_stack();
                 
         // postprocess frame for chosen oxyds
         if (top.selOxyd1Mask != 0) {   // skip for base frame
             
-            // check that a chosen oxyd pair with both oxyds of given fixed color do 
-            // not mismatch in color - refuse on mismatch.
+            // check that a chosen oxyd pair with both oxyds of given unchangeable color do 
+            // not mismatch in color - refuse on mismatch. Note that any iState beside
+            // CLOSED shows the color and thus makes a color change impossible
             if (top.selOxyd2Mask != 0) {
                 OxydStone *o1 = levelOxyds[oxydId(top.selOxyd1Mask)];
                 OxydStone *o2 = levelOxyds[oxydId(top.selOxyd2Mask)];
-                if ((to_bool(o1->getAttr("noshuffle")) || blinking_or_opening(o1)) &&
-                        (to_bool(o2->getAttr("noshuffle")) || blinking_or_opening(o2)) &&
+                if ((to_bool(o1->getAttr("noshuffle")) || o1->iState != CLOSED) &&
+                        (to_bool(o2->getAttr("noshuffle")) || o2->iState != CLOSED) &&
                         (int)(o1->getAttr("color")) >= 0 &&  (int)(o2->getAttr("color")) >= 0 &&
                         o1->getAttr("color") != o2->getAttr("color")) {
                     logBadFrameCount++;
@@ -470,7 +520,7 @@
 
         // opened oxyd pairs first
         for (;next.openedOxydIndex < numOxyds; next.openedOxydIndex++) {
-            if (levelOxyds[next.openedOxydIndex]->animState == OPEN) {
+            if (levelOxyds[next.openedOxydIndex]->iState == OPEN_PAIR) {
                 int c = levelOxyds[next.openedOxydIndex]->getAttr("color");
                 for (int i = next.openedOxydIndex+1; i < numOxyds; i++) {
                     if (levelOxyds[i]->getAttr("color") == c) {
@@ -486,8 +536,32 @@
             }
         }
         
-        // pairs of noshuffle standard oxyds including a possible blinking oxyd
-        // TODO - not essential but a speedup to select known pairs first
+        // pairs of noshuffle standard oxyds and other not closed oxyds including a possible blinking oxyd
+        // it is essential to select known pairs first
+        for (;next.fixedcolorOxydIndex < numOxyds; next.fixedcolorOxydIndex++) {
+            OxydStone *candidate1 = levelOxyds[next.fixedcolorOxydIndex];
+            int color1 = candidate1->getAttr("color");
+            if ((int)candidate1->getAttr("color") > AUTO && (
+                    to_bool(candidate1->getAttr("noshuffle")) || candidate1->iState == OPENING ||
+                    candidate1->iState == CLOSING || candidate1->iState == OPEN_SINGLE )) {
+                for (int i = next.fixedcolorOxydIndex+1; i < numOxyds; i++) {
+                    OxydStone *candidate2 = levelOxyds[i];
+                    if (candidate2->getAttr("color") == color1 && (
+                            to_bool(candidate2->getAttr("noshuffle")) || candidate2->iState == OPENING ||
+                            candidate2->iState == CLOSING || candidate2->iState == OPEN_SINGLE)) {
+                        next.selOxyd1Mask = 1 << next.fixedcolorOxydIndex;
+                        next.selOxyd2Mask = 1 << i;
+                        if ((next.selOxyd2Mask & next.oxydsCandidatesMask[next.fixedcolorOxydIndex]) == 0)
+                            return 0;   // Oops - a rule contradiction
+                        next.fixedcolorOxydIndex++;
+                        shuffleStack.push_back(next);    // add copy of next frame
+                        int result = evaluateTopFrame(logFlag);
+                        shuffleStack.pop_back();         // remove the copy
+                        return result;
+                    }
+                }
+            }
+        }
         
         
         // fast handling of oxyd pairs mandatory due to min rules 
@@ -541,7 +615,7 @@
             }
         }
         // try to assign all pair candidates to this oxyd 
-        if (next.oxydsCandidatesCount[minFreeOxydId] > 0) {
+        if (next.freePairsCount > 0 && next.oxydsCandidatesCount[minFreeOxydId] > 0) {
             next.selOxyd1Mask = 1 << minFreeOxydId;
             uint32_t candidates = next.oxydsCandidatesMask[minFreeOxydId];
             // check all candidates in random sequence
@@ -561,7 +635,22 @@
         }
         
         // try to assign a single pseudo oxyd
-        // TODO
+        // check that minFreeOxydId is not a noshuffle standard oxyd that can not
+        // be recolored to a pseudo!
+        OxydStone *pseudocandidate = levelOxyds[minFreeOxydId];
+        if (next.freePseudoCount > 0 && ((int)pseudocandidate->getAttr("color") < AUTO || 
+                (!(to_bool(pseudocandidate->getAttr("noshuffle"))) &&
+                pseudocandidate->iState == CLOSED))) {
+            next.selOxyd1Mask = 1 << minFreeOxydId;
+            next.selOxyd2Mask = 0;
+            shuffleStack.push_back(next);    // add copy of next frame
+            int result = evaluateTopFrame(logFlag);
+            shuffleStack.pop_back();         // remove the copy
+            if (result > 0 && logFlag < COUNT)  // found solution - finish
+                return result;
+            // sum solutions
+            solutionsCount += result;
+        }
         
         return solutionsCount;
     }
@@ -583,17 +672,16 @@
                 if ((*itr).selOxyd2Mask == 0) {
                     // a single oxyd -- it must be a pseudo
                     OxydStone *oxyd = levelOxyds[oxydId((*itr).selOxyd1Mask)];
-                    ASSERT((int)oxyd->getAttr("color") < AUTO, XLevelRuntime, "Oxyd shuffle - pseudo coloring error");
-                    ASSERT(shuffledFakeCount + shuffledFartCount + shuffledBoldCount > 0, XLevelRuntime, "Oxyd shuffle - to few pseudo colors");
-                    int i = IntegerRand(1, shuffledFakeCount + shuffledFartCount + shuffledBoldCount);  // use enigma's internal rand!
-                    if (i <= shuffledFakeCount) {
-                        shuffledFakeCount--;
+                    ASSERT(remainFakeCount + remainFartCount + remainBoldCount > 0, XLevelRuntime, "Oxyd shuffle - to few pseudo colors");
+                    int i = IntegerRand(1, remainFakeCount + remainFartCount + remainBoldCount);  // use enigma's internal rand!
+                    if (i <= remainFakeCount) {
+                        remainFakeCount--;
                         oxyd->set_attrib("color", FAKE);
-                    } else if ( i <= shuffledFakeCount + shuffledFartCount) {
-                        shuffledFartCount--;
+                    } else if ( i <= remainFakeCount + remainFartCount) {
+                        remainFartCount--;
                         oxyd->set_attrib("color", FART);
                     } else {
-                        shuffledBoldCount--;
+                        remainBoldCount--;
                         oxyd->set_attrib("color", BOLD);
                     }
                     (*itr).isColored = true;
@@ -602,20 +690,21 @@
                     OxydStone *oxyd1 = levelOxyds[oxydId((*itr).selOxyd1Mask)];
                     OxydStone *oxyd2 = levelOxyds[oxydId((*itr).selOxyd2Mask)];
                     int c = AUTO;
-                    if (oxyd1->animState == OPEN) {
+                    if (oxyd1->iState == OPEN_PAIR) {
                         // a pair of opened oxyds - we need not to recolor
                         // but we need to register the used color
                         c = oxyd1->getAttr("color");
                         colorsRemainCount[c] -= 2;                        
                         (*itr).isColored = true;
                     }
-                    else if (to_bool(oxyd1->getAttr("noshuffle")) || blinking_or_opening(oxyd1)) {
+                    else if (to_bool(oxyd1->getAttr("noshuffle")) || oxyd1->iState != CLOSED) {
+                        // a standard oxyd (pseudo is impossible) that requires a color
                         c = oxyd1->getAttr("color");
                         oxyd2->set_attrib("color", c);
                         colorsRemainCount[c] -= 2;
                         (*itr).isColored = true;
                     }
-                    else if (to_bool(oxyd2->getAttr("noshuffle")) || blinking_or_opening(oxyd2)) {
+                    else if (to_bool(oxyd2->getAttr("noshuffle")) || oxyd2->iState != CLOSED) {
                         c = oxyd2->getAttr("color");
                         oxyd1->set_attrib("color", c);
                         colorsRemainCount[c] -= 2;
@@ -651,7 +740,7 @@
         }
          
         
-        if (logFlag > NOTHING) {
+        if (logFlag > NOTHING &&  server::LevelStatus >= lev::STATUS_TEST) {
             Log << "Shuffle solution found: ";
             int depth = 0;
             for (std::list<ShuffleFrame>::iterator itr = shuffleStack.begin(); itr != shuffleStack.end(); ++itr, depth++) {
@@ -724,7 +813,7 @@
     void OxydStone::log_shuffle_stack() {
         int depth = 0;
         for (std::list<ShuffleFrame>::iterator itr = shuffleStack.begin(); itr != shuffleStack.end(); ++itr, depth++) {
-            Log << ecl::strf("Stack frame %d -- freeOxydsMask %X\n", depth, (*itr).freeOxydsMask);
+            Log << ecl::strf("Stack frame %d -- freeOxydsMask %X - %X %X - pseudo %d - pair %d\n", depth, (*itr).freeOxydsMask, (*itr).selOxyd1Mask, (*itr).selOxyd2Mask, (*itr).freePseudoCount, (*itr).freePairsCount);
             for (int i=0; i < (*itr).oxydsCandidatesMask.size(); i++)
                  Log << ecl::strf("Oxyd %d - candidates %X - num %d\n", i, 
                         (*itr).oxydsCandidatesMask[i], (*itr).oxydsCandidatesCount[i]);
@@ -742,9 +831,12 @@
         pairRulesMin.clear();
         pairRulesMax.clear();
         colorsUsageCount.clear();
+        isInit = false;
     }
     
-    OxydStone::OxydStone() : PhotoStone("st-oxyd"), animState (CLOSED) {
+    // Instance Methods
+    
+    OxydStone::OxydStone() : PhotoStone("st-oxyd"), iState (CLOSED) {
         set_attrib("flavor", "b");
         set_attrib("color", AUTO);
     }
@@ -764,17 +856,16 @@
     
     Value OxydStone::message(const string &m, const Value &val) {
         if (m=="closeall") {
-            for (unsigned i=0; i<levelOxyds.size(); ++i)
-                levelOxyds[i]->change_state(CLOSING);
+            closeAllStandardOxyds();
         }
         else if (m=="shuffle") {
             shuffleColors();
         }
         else if (m=="trigger" || m=="spitter") {
-            maybe_open_stone();
+            tryOpen();
         }
         else if (m=="signal" && to_int(val) != 0) {
-            maybe_open_stone();
+            tryOpen();
         }
         else if (m=="init") {
             initColors();
@@ -782,84 +873,90 @@
         return Value();
     }
     
-    void OxydStone::change_state(State newstate) {
-        string flavor(getAttr("flavor","a"));
-        string color(getAttr("color", 0));
+    void OxydStone::set_attrib(const string& key, const Value &val) {
+        if (key == "color") 
+            ASSERT(iState == CLOSED, XLevelRuntime, "OxydStone error - recoloring of an not closed stone");
+        else if (key == "flavor") {
+            ASSERT(iState == CLOSED, XLevelRuntime, "OxydStone error - reflavoring of an not closed stone");
+        }
+        
+        Object::set_attrib(key, val);   // do value checking
+        
+        if (key == "flavor" && IsInsideLevel(get_pos()))
+            set_model(string("st-oxyd")+(std::string)val);
+    }
     
-        string modelname = string("st-oxyd") + flavor + color;
+//    Value OxydStone::getAttr(const string &key) const {
+//        // TODO "state" 0=CLOSE || CLOSING; 1 = other iState values
+//        return Object::getAttr(key);
+//    }
     
-        State oldstate = animState;
-        animState = newstate;
+    void OxydStone::actor_hit(const StoneContact &/*sc*/) {
+        tryOpen();
+    }
     
-        switch (newstate) {
-        case CLOSED:
-            set_model(string("st-oxyd")+flavor);
-            break;
+    bool OxydStone::is_removable() const {
+        return !getAttr("static").to_bool();
+    }
     
-        case BLINKING:
-            set_model(modelname + "-blink");
-            break;
+    void OxydStone::animcb() {
+        if (iState == CLOSING)
+            set_iState(CLOSED);
+        else if (iState == OPENING)
+            set_iState(OPEN_SINGLE);
+        else if (iState == OPEN_PAIR)     // end of opening anim for second oxyd in a pair
+            set_iState(OPEN_PAIR);      // set the right model
+        else if (iState == OPEN_SINGLE)   // pseudo animation
+            set_iState(CLOSING);
+    }
     
-        case OPEN:
-            if (oldstate == CLOSED) {
-                sound_event("oxydopen");
-                sound_event("oxydopened");
-                set_anim(modelname+"-opening");
-            } else {
-                set_model(modelname + "-open");
-            }
-            /* If this was the last closed oxyd stone, finish the
-               level */
-            if (find_if(levelOxyds.begin(),levelOxyds.end(),not_open)
-                    == levelOxyds.end()) {
-                server::FinishLevel();
-            }
-            break;
+    void OxydStone::on_creation (GridPos) {
+        string flavor(getAttr("flavor", "a"));
+        set_model(string("st-oxyd") + flavor);
+        photo_activate();
+    }
     
-        case OPENING:
-            sound_event("oxydopen");
-            if (oldstate == CLOSED)
-                set_anim(modelname + "-opening");
-            else if (oldstate == CLOSING)
-                get_model()->reverse();
+    void OxydStone::on_removal(GridPos p) {
+        photo_deactivate();
+        kill_model (p);
+    }
     
-            break;
-    
-        case CLOSING:
-            if (oldstate == CLOSED || oldstate==CLOSING) {
-                animState = oldstate;
+    void OxydStone::tryOpen() {
+        bool isSingleOpened = false;
+        OxydStone *pairCandidate = NULL;
+        
+        initColors();
+        
+        // check for a blocking pseudo
+        for (InstanceVector::iterator itr = levelOxyds.begin(); itr != levelOxyds.end(); ++itr) {
+            if ((*itr)->iState != CLOSED && (int)((*itr)->getAttr("color")) < AUTO) {
+                // a pseudo is blocking any opening of other oxyds
+                // this is necessary as the bold reshuffle can take place only after
+                // finishing its closing animation!
                 return;
             }
-    
-            sound_event("oxydclose");
-            if (oldstate == OPENING)
-                get_model()->reverse();
-            else if (oldstate == BLINKING || oldstate == OPEN) {
-                set_anim(modelname + "-closing");
+            if ((*itr)->iState == OPEN_SINGLE || (*itr)->iState == OPENING) {
+                // remember a standard colored pair candidate
+                isSingleOpened = true;
+                pairCandidate = *itr;
             }
-            break;
         }
-    }
-    
-    void OxydStone::animcb() {
-        if (animState == CLOSING)
-            change_state(CLOSED);
-        else if (animState == OPENING)
-            change_state(BLINKING);
-        else if (animState == OPEN)
-            change_state(OPEN); // set the right model
-    }
-    
-    void OxydStone::maybe_open_stone() {
-        if (animState == CLOSED || animState == CLOSING) {
-            Value mycolor = getAttr("color");
-    
-            // Is another oxyd stone currently blinking?
-            InstanceVector::iterator i;
-            i=find_if(levelOxyds.begin(), levelOxyds.end(), blinking_or_opening);
-    
-            if (i != levelOxyds.end()) {
-    
+        
+        Value mycolor = getAttr("color");    
+        if ((int)mycolor < AUTO) {
+            // pseudo open
+            if (isSingleOpened) {
+                // a standard single oxyd is open - close it
+                pairCandidate->set_iState(CLOSING);
+            }
+            // open FART and BOLD, keep FAKE closed
+            if ((int)mycolor <= FART)
+                set_iState(OPENING);
+        }
+        else if (iState == CLOSED || iState == CLOSING) {
+            // standard colored oxyd open
+            
+            if (isSingleOpened) {
                 bool can_open;
     
                 if (server::GameCompatibility != GAMET_ENIGMA) {
@@ -867,44 +964,100 @@
                     // open both stones. Close one of them otherwise.
                     // (This is the Oxyd behaviour; it doesn't work with
                     // some Enigma levels.)
-                    can_open = (mycolor == (*i)->getAttr("color") && (*i)->animState==BLINKING);
+                    can_open = (mycolor == pairCandidate->getAttr("color") && pairCandidate->iState==OPEN_SINGLE);
                 }
                 else 
-                    can_open = (mycolor == (*i)->getAttr("color"));
+                    can_open = (mycolor == pairCandidate->getAttr("color"));
     
                 if (can_open) {
-                    change_state(OPEN);
-                    (*i)->change_state(OPEN);
+                    set_iState(OPEN_PAIR);
+                    pairCandidate->set_iState(OPEN_PAIR);
                 } else {
-                    (*i)->change_state(CLOSING);
-                    change_state(OPENING);
+                    pairCandidate->set_iState(CLOSING);
+                    set_iState(OPENING);
                 }
             }
             else {
                 // no blinking stone? -> make this one blink
-                change_state(OPENING);
+                set_iState(OPENING);
             }
         }
     }
     
-    void OxydStone::actor_hit(const StoneContact &/*sc*/) {
-        maybe_open_stone();
+    void OxydStone::closeAllStandardOxyds() {
+        for (unsigned i=0; i<levelOxyds.size(); ++i)
+            if ((int)(levelOxyds[i]->getAttr("color")) >= AUTO)
+                levelOxyds[i]->set_iState(CLOSING);
     }
     
-    void OxydStone::on_creation (GridPos) {
-        string flavor(getAttr("flavor", "a"));
-        set_model(string("st-oxyd") + flavor);
-        photo_activate();
-    }
+    void OxydStone::set_iState(State newState) {
+        string flavor(getAttr("flavor","a"));
+        string color(getAttr("color", 0));
     
-    bool OxydStone::is_removable() const {
-        return !getAttr("static").to_bool();
+        string basemodelname = string("st-oxyd") + flavor;
+        string modelname = basemodelname + color;
+    
+        State oldState = iState;
+        iState = newState;
+    
+        switch (newState) {
+            case CLOSED:
+                if ((int)getAttr("color") == BOLD)
+                    shuffleColors();    // shuffle all closed oxyds including itself
+                    
+                set_model(string("st-oxyd")+flavor);
+                break;
+        
+            case OPEN_SINGLE:
+                if ((int)getAttr("color") <= FART) {
+                    set_anim(basemodelname + "-pseudo" + color);
+                    if ((int)getAttr("color") == FART) {
+                        closeAllStandardOxyds();
+                    }
+                } else
+                    set_model(modelname + "-blink");
+                break;
+        
+            case OPEN_PAIR:
+                if (oldState == CLOSED) {
+                    sound_event("oxydopen");
+                    sound_event("oxydopened");
+                    set_anim(modelname+"-opening");
+                } else {
+                    set_model(modelname + "-open");
+                }
+                // If this was the last closed oxyd stone, finish the level
+                if (find_if(levelOxyds.begin(),levelOxyds.end(),not_open)
+                        == levelOxyds.end()) {
+                    server::FinishLevel();
+                }
+                break;
+        
+            case OPENING:
+                sound_event("oxydopen");
+                if (oldState == CLOSED)
+                    set_anim(modelname + "-opening");
+                else if (oldState == CLOSING)
+                    get_model()->reverse();
+        
+                break;
+        
+            case CLOSING:
+                if (oldState == CLOSED || oldState==CLOSING) {
+                    iState = oldState;
+                    return;
+                }
+        
+                sound_event("oxydclose");
+                if (oldState == OPENING)
+                    get_model()->reverse();
+                else if (oldState == OPEN_SINGLE || oldState == OPEN_PAIR) {
+                    set_anim(modelname + "-closing");
+                }
+                break;
+        }
     }
     
-    void OxydStone::on_removal(GridPos p) {
-        photo_deactivate();
-        kill_model (p);
-    }
 
     BOOT_REGISTER_START
         BootRegister(new OxydStone);

Modified: trunk/src/stones/OxydStone.hh
===================================================================
--- trunk/src/stones/OxydStone.hh	2007-11-15 20:42:53 UTC (rev 925)
+++ trunk/src/stones/OxydStone.hh	2007-11-18 16:45:12 UTC (rev 926)
@@ -84,6 +84,8 @@
         virtual OxydStone * clone();
         virtual void dispose();
         virtual Value message(const string &m, const Value &);
+        virtual void set_attrib(const string& key, const Value &val);
+//        virtual Value getAttr(const string &key) const;
 
         // Stone interface
         virtual void actor_hit(const StoneContact &sc);
@@ -91,7 +93,7 @@
         virtual bool is_removable() const;
         
         // PhotoStone interface
-        virtual void notify_laseron() { maybe_open_stone(); }
+        virtual void notify_laseron() { tryOpen(); }
         virtual void notify_laseroff() {}
 
         // ModelCallback interface  - Animation callback
@@ -103,27 +105,44 @@
         void on_removal (GridPos p);
             
     private:
-        enum State { CLOSED, OPEN, OPENING, CLOSING, BLINKING };
+        enum State { CLOSED, OPEN_PAIR, OPENING, CLOSING, OPEN_SINGLE };
+        
         typedef std::vector<OxydStone *> InstanceVector;
+        
         typedef struct {
             unsigned short ruleId;
             unsigned short groupId1;
             unsigned short groupId2;
         } Rule;
+        
+        /**
+         * The data frame of the fair shuffle algorithm that describe the remaining limitations
+         * and degrees of freedom for the distribution of the remaining oxyds. For every oxyd
+         * pair and every pseudo oxyd a new frame is generated which lists the oxyds and the
+         * remaining constraints.
+         */
         typedef struct {
-                uint32_t freeOxydsMask;
-                unsigned short freePseudoCount;
-                unsigned short freePairsCount;
-                std::vector<unsigned short> oxydsCandidatesCount;
-                std::vector<uint32_t> oxydsCandidatesMask;
-                std::vector<short> rulesLimit;  // -1 means rule is fulfilled
-                uint32_t selOxyd1Mask;
-                uint32_t selOxyd2Mask;
-                unsigned short openedOxydIndex;
-                bool isColored;
+            uint32_t freeOxydsMask;              ///< a 1 for every oxyd that needs to be distributed
+            unsigned short freePseudoCount;      ///< number of pseudo oxyds that need to be distributed
+            unsigned short freePairsCount;       ///< number of oxyd pairs that need to be distributed
+            std::vector<unsigned short> oxydsCandidatesCount; ///< number of possible pair partners per oxyd
+            std::vector<uint32_t> oxydsCandidatesMask;        ///< mask of possible pair partners per oxyd
+            std::vector<short> rulesLimit;       ///< remaining number of pairs to reach limit per rule.
+                                                 ///< -1 means rule is fulfilled and needs no further checks
+            uint32_t selOxyd1Mask;               ///< selected first oxyd for this frame coded as bitmask, 
+                                                 ///< 0 = no selection
+            uint32_t selOxyd2Mask;               ///< selected second oxyd for this frame coded as bitmask, 
+                                                 ///< 0 = no selection
+            unsigned short openedOxydIndex;      ///< levelOxyds index for next oxyd that needs to be checked
+                                                 ///< for being a standard colored opened pair oxyd
+            unsigned short fixedcolorOxydIndex;  ///< levelOxyds index for next oxyd that needs to be checked
+                                                 ///< for being a part of a unopend pair with a fixed color 
+            bool isColored;                      ///< flag set and used by the final coloring to mark frames
+                                                 ///< with already colored oxyds
         } ShuffleFrame;
 
         static InstanceVector levelOxyds;
+        static bool isInit;
         static std::vector<unsigned short> colorsUsageCount;
         static unsigned short shuffledFakeCount;
         static unsigned short shuffledFartCount;
@@ -155,21 +174,16 @@
         static void log_shuffle_basis();
         static void log_shuffle_stack();
         
-        static bool blinking(OxydStone *a) {
-            return (a->animState == BLINKING);
-        }
-        static bool blinking_or_opening(OxydStone *a) {
-            return (a->animState == BLINKING || a->animState == OPENING);
-        }
         static bool not_open(OxydStone *a) {
-            return !(a->animState == OPEN || a->animState == OPENING);
+            return !(a->iState == OPEN_PAIR || (int)a->getAttr("color") < AUTO);
         }
 
-        State animState;
+        State iState;
 
         // Private methods
-        void maybe_open_stone();
-        void change_state(State newstate);
+        void tryOpen();
+        void closeAllStandardOxyds();
+        void set_iState(State newState);
     };
 } // namespace enigma
 



From andreasl at mail.berlios.de  Sun Nov 18 20:23:56 2007
From: andreasl at mail.berlios.de (andreasl at BerliOS)
Date: Sun, 18 Nov 2007 20:23:56 +0100
Subject: [Enigma-game-svn] r927 - in homepage: . input input/news
Message-ID: <200711181923.lAIJNuoW011877@sheep.berlios.de>

Author: andreasl
Date: 2007-11-18 20:23:56 +0100 (Sun, 18 Nov 2007)
New Revision: 927

Added:
   homepage/input/news/news_issue25_de.html
   homepage/input/news/news_issue25_en.html
Modified:
   homepage/input/output-files.lua
   homepage/main.lua
Log:
Homepage:
 - Announcement for End of Year Awards (as news article),
   English and German.
 - typo in a main.lua-comment
Todo:
 - Russian translation
Note:
 - To be uploaded on Tuesday, 20th (if php-scripts are
   ready till then.)


Added: homepage/input/news/news_issue25_de.html
===================================================================
--- homepage/input/news/news_issue25_de.html	2007-11-18 16:45:12 UTC (rev 926)
+++ homepage/input/news/news_issue25_de.html	2007-11-18 19:23:56 UTC (rev 927)
@@ -0,0 +1,15 @@
+<h3 class="news">
+    <span class="date">Nov 20 2007: </span> Jahresendauszeichnungen 2007 - Die Wahl
+</h3>
+
+<p>Dieses Jahr pr&auml;sentieren wir ein spezielles Event, die End of Year Awards.
+Es geht nicht nur darum, den Level des Jahres 2007 zu feiern, der derjenige LdM
+mit bester Bewertung von allen ist, sondern wir loben Levels in f&uuml;nf
+weiteren Kategorien: Bester Onescreener, Beste Levelserie, Bestes Design,
+Lustigster Level und Bester Yin-Yang-Level. Die Kandidaten wurden w&auml;hrend
+des letzten Monats auf mag-heut.net nominiert, und stehen jetzt zur Wahl,
+klicken Sie  <a href="http://enigma-game.berlios.de/loty_2007_de.php">hier</a>
+f&uuml;r die deutsche Version und <a
+href="http://enigma-game.berlios.de/loty_2007.php">hier</a> f&uuml;r die
+englische (sorry, keine russische Version). M&ouml;gen die besten Levels
+gewinnen! :-)</p>

Added: homepage/input/news/news_issue25_en.html
===================================================================
--- homepage/input/news/news_issue25_en.html	2007-11-18 16:45:12 UTC (rev 926)
+++ homepage/input/news/news_issue25_en.html	2007-11-18 19:23:56 UTC (rev 927)
@@ -0,0 +1,14 @@
+<h3 class="news">
+    <span class="date">Nov 20 2007: </span> End of Year Awards 2007 - The Poll
+</h3>
+
+<p>This year we feature a special event, the End of Year Awards. It's not only
+the celebration of the Level of the Year 2007, which will be the LotM with
+best ratings of all, but we also praise levels in five more categories: Best
+Onescreener, Best Level Series, Best Design, Funniest Level and Best Yin-Yang
+Level. The candidates have been nominated on mag-heut.net during the last
+month, and now you can vote for them, click
+<a href="http://enigma-game.berlios.de/loty_2007.php">here</a>
+for the English version, and
+<a href="http://enigma-game.berlios.de/loty_2007_de.php">here</a> for the
+German (sorry, no Russian version). May the best levels win! :-)</p>

Modified: homepage/input/output-files.lua
===================================================================
--- homepage/input/output-files.lua	2007-11-18 16:45:12 UTC (rev 926)
+++ homepage/input/output-files.lua	2007-11-18 19:23:56 UTC (rev 927)
@@ -10,7 +10,7 @@
 
 -- The newsfield declares the news (by number) to be shown on the main page.
 
-newsfield = {19, 20, 21, 22, 23, 24}
+newsfield = {21, 22, 23, 24, 25}
 
 -- General $$mystring$$-macros. Strings are taken as-is, tables are
 -- constellations of html input files, functions are executed, with the

Modified: homepage/main.lua
===================================================================
--- homepage/main.lua	2007-11-18 16:45:12 UTC (rev 926)
+++ homepage/main.lua	2007-11-18 19:23:56 UTC (rev 927)
@@ -5,7 +5,7 @@
 --
 --  Enigma Lua Homepage Gluer - main program
 --  (c) 2007 Enigma Team
---  The Enigma Lua Homepage Gluer is licenced under GPL v.2 or above,
+--  The Enigma Lua Homepage Gluer is licensed under GPL v.2 or above,
 --  please find a copy of it here:
 --    http://www.gnu.org/licenses/gpl-2.0.html
 --  This program and some of its input files are loosely based on 



From ged at mail.berlios.de  Thu Nov 22 19:50:05 2007
From: ged at mail.berlios.de (ged at mail.berlios.de)
Date: Thu, 22 Nov 2007 19:50:05 +0100
Subject: [Enigma-game-svn] r928 - homepage/input/news
Message-ID: <200711221850.lAMIo595016085@sheep.berlios.de>

Author: ged
Date: 2007-11-22 19:49:58 +0100 (Thu, 22 Nov 2007)
New Revision: 928

Added:
   homepage/input/news/news_issue25_ru.html
Log:
Homepage: Russian version of news #25

Added: homepage/input/news/news_issue25_ru.html
===================================================================
--- homepage/input/news/news_issue25_ru.html	2007-11-18 19:23:56 UTC (rev 927)
+++ homepage/input/news/news_issue25_ru.html	2007-11-22 18:49:58 UTC (rev 928)
@@ -0,0 +1,14 @@
+<h3 class="news">
+    <span class="date">20 ?????? 2007: </span> ??????? ????? 2007 ???? - ???????????
+</h3>
+
+<p>? ???? ???? ?? ?????? ?????? ??????? - ??????? ????? ????. ??? ??????????? ?? ??????
+?????? ???? 2007, ??????? ?????? ?? ? ????? ?????? ?????????,
+??, ????? ????, ?? ??????? ?????? ??? ? ???? ??????????: ?????? ???????????? ???????,
+?????? ????? ???????, ?????? ??????????, ????? ???????? ??????? ? ?????? ???-??? ???????.
+????????? ???????????? ?? mag-heut.net ? ??????? ?????????? ??????,
+? ?????? ?? ?????? ?? ??? ?????????????, ????????
+<a href="http://enigma-game.berlios.de/loty_2007.php">?????</a>
+????? ??????? ?????????? ?????? ??? 
+<a href="http://enigma-game.berlios.de/loty_2007_de.php">?????</a>, ????? ???????
+???????? (????????, ??????? ?????? ???). ????? ??????? ??????! :-)</p>


Property changes on: homepage/input/news/news_issue25_ru.html
___________________________________________________________________
Name: svn:eol-style
   + native



From ral at mail.berlios.de  Wed Nov 28 00:08:20 2007
From: ral at mail.berlios.de (ral at BerliOS)
Date: Wed, 28 Nov 2007 00:08:20 +0100
Subject: [Enigma-game-svn] r929 - in trunk/src: . stones
Message-ID: <200711272308.lARN8Kse016716@sheep.berlios.de>

Author: ral
Date: 2007-11-28 00:08:19 +0100 (Wed, 28 Nov 2007)
New Revision: 929

Removed:
   trunk/src/objects_decl.hh
Modified:
   trunk/src/Makefile.am
   trunk/src/WorldProxy.hh
   trunk/src/actors.hh
   trunk/src/enigma.cc
   trunk/src/floors.cc
   trunk/src/floors.hh
   trunk/src/items.cc
   trunk/src/items.hh
   trunk/src/laser.hh
   trunk/src/lua.hh
   trunk/src/objects.cc
   trunk/src/objects.hh
   trunk/src/player.hh
   trunk/src/stones.cc
   trunk/src/stones.hh
   trunk/src/stones/OxydStone.cc
   trunk/src/stones/OxydStone.hh
   trunk/src/stones_complex.cc
   trunk/src/stones_simple.cc
   trunk/src/world.hh
Log:
Trunk 1.1:
- rename Object::getAttr(name, value) to getDefaultedAttr(,) to allow
  overriding of single argument method getAttr(name) in subclasses
- remove objects_decl.hh by copying its content to objects.hh


Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/Makefile.am	2007-11-27 23:08:19 UTC (rev 929)
@@ -84,7 +84,6 @@
 	nls.hh			\
 	objects.cc 		\
 	objects.hh 		\
-	objects_decl.hh 	\
 	oxyd.cc			\
 	oxyd.hh 		\
 	oxyd_internal.hh	\

Modified: trunk/src/WorldProxy.hh
===================================================================
--- trunk/src/WorldProxy.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/WorldProxy.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -19,7 +19,7 @@
 #ifndef WORLDPROXY_HH_INCLUDED
 #define WORLDPROXY_HH_INCLUDED
 
-#include "objects_decl.hh"
+#include "objects.hh"
 
 namespace enigma {
 

Modified: trunk/src/actors.hh
===================================================================
--- trunk/src/actors.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/actors.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -19,7 +19,7 @@
 #ifndef ACTORS_HH_INCLUDED
 #define ACTORS_HH_INCLUDED
 
-#include "objects_decl.hh"
+#include "objects.hh"
 
 namespace enigma {
 

Modified: trunk/src/enigma.cc
===================================================================
--- trunk/src/enigma.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/enigma.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -22,7 +22,7 @@
 #include "enigma.hh"
 #include "ecl.hh"
 #include "main.hh"
-#include "objects_decl.hh"
+#include "objects.hh"
 #include "world.hh"
 
 #include <iostream>

Modified: trunk/src/floors.cc
===================================================================
--- trunk/src/floors.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/floors.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -428,19 +428,19 @@
     // In non-Enigma-modes, without items on them, all floors behave the same:
     switch (selector) {
         case flft_burnable :
-            return getAttr("burnable", dflt).to_bool();
+            return getDefaultedAttr("burnable", dflt).to_bool();
         case flft_ignitable :
-            return getAttr("ignitable", dflt).to_bool();
+            return getDefaultedAttr("ignitable", dflt).to_bool();
         case flft_secure :
-            return getAttr("secure", dflt).to_bool();
+            return getDefaultedAttr("secure", dflt).to_bool();
         case flft_eternal :
-            return getAttr("eternal", dflt).to_bool();
+            return getDefaultedAttr("eternal", dflt).to_bool();
         case flft_noash :
-            return getAttr("noash", dflt).to_bool();
+            return getDefaultedAttr("noash", dflt).to_bool();
         case flft_fastfire :
-            return getAttr("fastfire", dflt).to_bool();
+            return getDefaultedAttr("fastfire", dflt).to_bool();
         case flft_initfire :
-            return getAttr("initfire", dflt).to_bool();
+            return getDefaultedAttr("initfire", dflt).to_bool();
     }
     return dflt;
 }

Modified: trunk/src/floors.hh
===================================================================
--- trunk/src/floors.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/floors.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -19,6 +19,8 @@
 #ifndef FLOORS_HH_INCLUDED
 #define FLOORS_HH_INCLUDED
 
+#include "items.hh"
+
 namespace enigma {
 
     class Actor;

Modified: trunk/src/items.cc
===================================================================
--- trunk/src/items.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/items.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -1596,8 +1596,8 @@
         }
     private:
         void on_creation (GridPos p) {
-            double range = getAttr("range", server::MagnetRange);
-            double strength = getAttr("strength", server::MagnetForce);
+            double range = getDefaultedAttr("range", server::MagnetRange);
+            double strength = getDefaultedAttr("strength", server::MagnetForce);
 
             ff.m_active = is_on();
             ff.set_pos (p);
@@ -1703,10 +1703,10 @@
         void set_forcefield() {
             if (is_on()) {
                 ff.set_pos(get_pos());
-                double range = getAttr("range", server::WormholeRange);
+                double range = getDefaultedAttr("range", server::WormholeRange);
                 ff.set_range (range);
 
-                double s = getAttr("strength", server::WormholeForce);
+                double s = getDefaultedAttr("strength", server::WormholeForce);
                 ff.set_strength (s);
 
                 AddForceField(&ff);
@@ -2384,7 +2384,7 @@
 
         bool do_crack() {
             if (!is_fixed()) {
-                double brittleness = getAttr("brittleness", server::Brittleness);
+                double brittleness = getDefaultedAttr("brittleness", server::Brittleness);
                 double rnd = DoubleRand(0, 1);
                 return rnd < brittleness;
     	    } else
@@ -3577,9 +3577,9 @@
 
         ItemAction activate(Actor *a, GridPos p) {
             // Default values for the rubberband:
-            double strength = getAttr("strength", 10.0);
-            double length = getAttr("length", 1.0);
-            double minlength = getAttr("minlength", 0.0);
+            double strength = getDefaultedAttr("strength", 10.0);
+            double length = getDefaultedAttr("length", 1.0);
+            double minlength = getDefaultedAttr("minlength", 0.0);
 
             RubberBandData rbd;
             rbd.strength = strength;

Modified: trunk/src/items.hh
===================================================================
--- trunk/src/items.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/items.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -19,7 +19,7 @@
 #ifndef ITEMS_HH_INCLUDED
 #define ITEMS_HH_INCLUDED
 
-#include "objects_decl.hh"
+#include "objects.hh"
 
 namespace enigma {
     

Modified: trunk/src/laser.hh
===================================================================
--- trunk/src/laser.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/laser.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -23,6 +23,7 @@
    has to do with lasers. */
 
 #include "objects.hh"
+#include "stones.hh"
 
 namespace enigma {
     /**

Modified: trunk/src/lua.hh
===================================================================
--- trunk/src/lua.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/lua.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -21,7 +21,7 @@
 
 #include "enigma.hh"
 #include "ecl_geom.hh"
-#include "objects_decl.hh"
+#include "objects.hh"
 #include <map>
 
 #ifdef CXXLUA

Modified: trunk/src/objects.cc
===================================================================
--- trunk/src/objects.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/objects.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -160,7 +160,7 @@
         return i->second;
 }
 
-Value Object::getAttr(const string& key, Value defaultValue) const {
+Value Object::getDefaultedAttr(const string& key, Value defaultValue) const {
     if (Value v = getAttr(key))
         return v;
     else

Modified: trunk/src/objects.hh
===================================================================
--- trunk/src/objects.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/objects.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -1,5 +1,6 @@
 /*
  * Copyright (C) 2002,2003,2004 Daniel Heck
+ * Copyright (C) 2007 Ronald Lamprecht
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -19,11 +20,273 @@
 #ifndef OBJECTS_HH
 #define OBJECTS_HH
 
-#include "objects_decl.hh"
-#include "items.hh"
-#include "floors.hh"
-#include "stones.hh"
-#include "actors.hh"
+#define BOOT_REGISTER_START        \
+        namespace {                \
+            bool do_boot_register() {
 
+#define BOOT_REGISTER_END          \
+                return true;       \
+            }                      \
+            static bool boot_registered = do_boot_register(); \
+        } 
 
+#include "display.hh"
+#include "ecl_alist.hh"
+#include <map>
+
+namespace enigma { 
+
+    using std::string;
+    
+    struct Message;
+
+/* -------------------- Objects -------------------- */
+
+    /**
+     *  Object is the base class for all ``objects'' in the world.
+     * The most important facilities this class provides are:
+     *
+     * (1) A way to clone() and dispose() objects.  This is mainly used
+     *     in function MakeObject() to create new objects of a given
+     *     type.
+     * 
+     * (2) A way to pass messages between unrelated objects via message().
+     *     This allows us to send messages to objects from Lua and to
+     *     decouple objects types as much as possible.
+     * 
+     * (3) A way to get and set attributes.  These attributes are quite
+     *     similar to instance variables, but they can be easily modified
+     *     from Lua.  This makes it possible to modify certain object
+     *     parameters (such as the text on a piece of paper or the color
+     *     of an oxyd stone) in level descriptions.
+     * 
+     * The various Object subclasses instances need to register a template
+     * instance for each object name. To avoid the inclusion of every
+     * subclass declaration file into the registry for registry driven forward
+     * initialization we make use of the static file based initialization
+     * that occurs prior to the main application startup. To be independent of
+     * the undefined sequence in which the files are initialized we store the
+     * template instances, object names and id's in function local static caches.
+     * These caches are copied to the final runtime data structures on the main
+     * application startup. We call this feature "boot"-initialization. The macros
+     * BOOT_REGISTER_START and BOOT_REGISTER_END will be used once at the end of
+     * every subclass file. They embrace the BootRegister() function calls that
+     * register the templates.
+     */
+    class Object {
+
+    public:
+        enum ObjectType { 
+            OTHER,
+            STONE,
+            FLOOR,
+            ITEM,
+            ACTOR
+        };
+            
+        Object();
+        Object(const char *kind);
+        Object(const Object &src_obj); 
+        virtual ~Object();
+
+        static Object * getObject(int id);
+        int getId() const;
+        
+        /* ---------- Attributes ---------- */
+
+        typedef ecl::AssocList<std::string, Value> AttribMap;
+
+        bool is_kind(const char *kind) const;
+        bool is_kind(const string& kind) const;
+
+        const AttribMap &get_attribs() const { return attribs; }
+        
+        /**
+         * Get an attribute or a special given default value. This method
+         * gets attributes like the simple argumented getAttr method but
+         * returns the given default value instead of a DEFAULT value if
+         * no explicit attribute exists.
+         */
+        Value getDefaultedAttr(const string &key, Value defaultValue) const;
+
+
+        /* ---------- Helper routines ---------- */
+
+        void send_impulse(const GridPos& dest, Direction dir);
+        void send_impulse(const GridPos& dest, Direction dir, double delay);
+
+        /* ---------- Object interface ---------- */
+
+        virtual const char *get_kind() const;
+
+        virtual Value on_message (const Message &m);
+        virtual Value message(const string& msg, const Value &val);
+        virtual void set_attrib(const string& key, const Value &val);
+        
+        /**
+         * Get an attribute that has been set or that stands as a proxy for a
+         * trait or ivar. Object itself will just return attribute values
+         * that are stored in its attribute map. For not existing attributes
+         * a value of type DEFAULT is returned.
+         * 
+         * Subclasses may override this method to supply values of traits or
+         * ivars. This way levels can gain read access to attributes that can
+         * not to be stored in the attribute map due to performance reasons.
+         */
+        virtual Value getAttr(const string &key) const;
+        
+        /**
+         * Get the attribute, traits, ivar or default value for a given key.
+         * This is the main access method for object values that returns
+         * the best available value known for a key. It resolves attributes,
+         * uses proxy values for ivars and traits, uses class defaults,
+         * world defaults or system defaults.
+         * 
+         * This is a template method. Subclass have to override the method
+         * <code>getDefaultValue()</code> to supply proper class defaults.
+         * All other defaults are resolved by this method
+         */
+        Value getValue(const string &key) const;
+
+        virtual Object *clone()=0;
+        virtual void dispose()=0;
+
+        virtual void on_levelinit();
+
+        virtual void warning(const char *format, ...) const;
+        virtual ObjectType getObjectType() const;
+
+    protected:
+        virtual Value getDefaultValue(const string &key) const;
+    private:
+        friend void InitWorld();   // for bootFinished() access
+        
+        static int next_id;
+        static std::map<int, Object *> objects;
+        int id;
+        AttribMap attribs;
+        static int getNextId(Object *obj, bool bootFinished);
+        static void bootFinished();
+        static void freeId(int id);
+        const Value* get_attrib(const string& key) const;
+    };
+
+/* -------------------- GridObject -------------------- */
+    class Actor;
+
+    /** 
+     * GridObject is the base class for everything that can only be
+     * placed on "The Grid", i.e., for floor tiles, items, and
+     * stones. 
+     */
+    class GridObject : public Object, public display::ModelCallback {
+    public:
+        GridObject() : pos (GridPos(-1, -1)) {}
+        GridObject(const char * kind) : Object(kind), pos (GridPos(-1, -1)) {}
+
+        void creation(GridPos p) {
+            pos = p;
+            on_creation (p);
+        }
+        void removal(GridPos p) { 
+            on_removal(p);
+            pos.x = -1;
+            pos.y = -1;
+        }
+        GridPos get_pos() const {return pos;}
+        
+        virtual void setOwner(int player);
+        
+        /**
+         * Get the player number who is owning the object.
+         * @return  integer value of player number or nil if not owned by a player
+         */
+        Value getOwner();
+        
+        /**
+         * Set the location of the GridObject to a given world or mirrored owner
+         * position.
+         */
+        virtual void setOwnerPos(GridPos po);
+         
+        /**
+         * Get the position of object within the world. Only objects owned by
+         * players will return positions outside of the world. 
+         */
+        GridPos getOwnerPos();
+
+        // GridObject interface
+        virtual void on_laserhit (Direction) {}
+        virtual void actor_enter (Actor *) {}
+        virtual void actor_leave (Actor *) {}
+
+
+        void warning(const char *format, ...) const;
+
+        // Helper functions
+        bool sound_event (const char *name, double vol = 1.0);
+        display::Model *set_anim (const std::string &mname);
+
+    protected:
+        // GridObject interface
+        virtual void set_model (const std::string &mname) = 0;
+        virtual display::Model *get_model () = 0;
+        virtual void kill_model (GridPos p) = 0;
+
+        virtual void init_model() {
+            set_model(get_kind());
+        }
+
+        virtual void on_creation (GridPos) {
+            init_model();
+        }
+
+        virtual void on_removal (GridPos p) {
+            kill_model (p);
+        }
+
+    private:
+        // ModelCallback interface.
+        void animcb() {}
+
+
+        /**
+         * The location of the GridObject. An object that is set on one of the world's
+         * layers will store the x and y coordinates with values greater equal 0. An
+         * object that is not a direct part of the world has a pos.x < 0. Objects that
+         * are owned by other objects that are part of a world layer will store the
+         * position of the owner mirrored at point -1, -1. This results in pos.x <= -2.
+         * All other GridObjects will have pos.x = -1. In this case pos.y >= 0 identifies
+         * the player that owns the object in his inventory. Objects that are neiter set
+         * in the world nor owned by anyone have pos.x = pos.y = -1. 
+         */
+        GridPos pos;
+    };
+
+} // namespace enigma
+
+
+#define CLONEOBJ(TYPE)                                  \
+        TYPE* clone() { return new TYPE(*this); }       \
+        void dispose() { delete this; }
+
+#define CLONEACTOR(TYPE)                                                \
+        TYPE* clone() { TYPE *o=new TYPE(*this); o->init(); return o; } \
+        void dispose() { delete this; }
+
+
+// #define SINGLETONOBJ(TYPE)                    \
+//         TYPE* clone() { return this; }        \
+//         void dispose() {}
+
+
+#define INSTANCELISTOBJ(TYPE)                                                   \
+        typedef std::vector<TYPE*> InstanceList;                                \
+        static InstanceList instances;                                          \
+        TYPE *clone() { TYPE *o = new TYPE(*this); instances.push_back(o); return o;}  \
+        void dispose() {                                                        \
+            instances.erase(find(instances.begin(), instances.end(), this));    \
+            delete this;                                                        \
+        }
+
 #endif

Deleted: trunk/src/objects_decl.hh
===================================================================
--- trunk/src/objects_decl.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/objects_decl.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -1,292 +0,0 @@
-/*
- * Copyright (C) 2002,2003,2004 Daniel Heck
- * Copyright (C) 2007 Ronald Lamprecht
- *
- * This program is free software; you can redistribute it and/or
- * modify it under the terms of the GNU General Public License
- * as published by the Free Software Foundation; either version 2
- * of the License, or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License along
- * with this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
- *
- */
-#ifndef OBJECTS_DECL_HH
-#define OBJECTS_DECL_HH
-
-#define BOOT_REGISTER_START        \
-        namespace {                \
-            bool do_boot_register() {
-
-#define BOOT_REGISTER_END          \
-                return true;       \
-            }                      \
-            static bool boot_registered = do_boot_register(); \
-        } 
-
-#include "display.hh"
-#include "ecl_alist.hh"
-#include <map>
-
-namespace enigma { 
-
-    using std::string;
-    
-    struct Message;
-
-/* -------------------- Objects -------------------- */
-
-    /**
-     *  Object is the base class for all ``objects'' in the world.
-     * The most important facilities this class provides are:
-     *
-     * (1) A way to clone() and dispose() objects.  This is mainly used
-     *     in function MakeObject() to create new objects of a given
-     *     type.
-     * 
-     * (2) A way to pass messages between unrelated objects via message().
-     *     This allows us to send messages to objects from Lua and to
-     *     decouple objects types as much as possible.
-     * 
-     * (3) A way to get and set attributes.  These attributes are quite
-     *     similar to instance variables, but they can be easily modified
-     *     from Lua.  This makes it possible to modify certain object
-     *     parameters (such as the text on a piece of paper or the color
-     *     of an oxyd stone) in level descriptions.
-     * 
-     * The various Object subclasses instances need to register a template
-     * instance for each object name. To avoid the inclusion of every
-     * subclass declaration file into the registry for registry driven forward
-     * initialization we make use of the static file based initialization
-     * that occurs prior to the main application startup. To be independent of
-     * the undefined sequence in which the files are initialized we store the
-     * template instances, object names and id's in function local static caches.
-     * These caches are copied to the final runtime data structures on the main
-     * application startup. We call this feature "boot"-initialization. The macros
-     * BOOT_REGISTER_START and BOOT_REGISTER_END will be used once at the end of
-     * every subclass file. They embrace the BootRegister() function calls that
-     * register the templates.
-     */
-    class Object {
-
-    public:
-        enum ObjectType { 
-            OTHER,
-            STONE,
-            FLOOR,
-            ITEM,
-            ACTOR
-        };
-            
-        Object();
-        Object(const char *kind);
-        Object(const Object &src_obj); 
-        virtual ~Object();
-
-        static Object * getObject(int id);
-        int getId() const;
-        
-        /* ---------- Attributes ---------- */
-
-        typedef ecl::AssocList<std::string, Value> AttribMap;
-
-        bool is_kind(const char *kind) const;
-        bool is_kind(const string& kind) const;
-
-        const AttribMap &get_attribs() const { return attribs; }
-        
-        /**
-         * Get an attribute or a special given default value. This method
-         * gets attributes like the simple argumented getAttr method but
-         * returns the given default value instead of a DEFAULT value if
-         * no explicit attribute exists.
-         */
-        Value getAttr(const string &key, Value defaultValue) const;
-
-
-        /* ---------- Helper routines ---------- */
-
-        void send_impulse(const GridPos& dest, Direction dir);
-        void send_impulse(const GridPos& dest, Direction dir, double delay);
-
-        /* ---------- Object interface ---------- */
-
-        virtual const char *get_kind() const;
-
-        virtual Value on_message (const Message &m);
-        virtual Value message(const string& msg, const Value &val);
-        virtual void set_attrib(const string& key, const Value &val);
-        
-        /**
-         * Get an attribute that has been set or that stands as a proxy for a
-         * trait or ivar. Object itself will just return attribute values
-         * that are stored in its attribute map. For not existing attributes
-         * a value of type DEFAULT is returned.
-         * 
-         * Subclasses may override this method to supply values of traits or
-         * ivars. This way levels can gain read access to attributes that can
-         * not to be stored in the attribute map due to performance reasons.
-         */
-        virtual Value getAttr(const string &key) const;
-        
-        /**
-         * Get the attribute, traits, ivar or default value for a given key.
-         * This is the main access method for object values that returns
-         * the best available value known for a key. It resolves attributes,
-         * uses proxy values for ivars and traits, uses class defaults,
-         * world defaults or system defaults.
-         * 
-         * This is a template method. Subclass have to override the method
-         * <code>getDefaultValue()</code> to supply proper class defaults.
-         * All other defaults are resolved by this method
-         */
-        Value getValue(const string &key) const;
-
-        virtual Object *clone()=0;
-        virtual void dispose()=0;
-
-        virtual void on_levelinit();
-
-        virtual void warning(const char *format, ...) const;
-        virtual ObjectType getObjectType() const;
-
-    protected:
-        virtual Value getDefaultValue(const string &key) const;
-    private:
-        friend void InitWorld();   // for bootFinished() access
-        
-        static int next_id;
-        static std::map<int, Object *> objects;
-        int id;
-        AttribMap attribs;
-        static int getNextId(Object *obj, bool bootFinished);
-        static void bootFinished();
-        static void freeId(int id);
-        const Value* get_attrib(const string& key) const;
-    };
-
-/* -------------------- GridObject -------------------- */
-    class Actor;
-
-    /** 
-     * GridObject is the base class for everything that can only be
-     * placed on "The Grid", i.e., for floor tiles, items, and
-     * stones. 
-     */
-    class GridObject : public Object, public display::ModelCallback {
-    public:
-        GridObject() : pos (GridPos(-1, -1)) {}
-        GridObject(const char * kind) : Object(kind), pos (GridPos(-1, -1)) {}
-
-        void creation(GridPos p) {
-            pos = p;
-            on_creation (p);
-        }
-        void removal(GridPos p) { 
-            on_removal(p);
-            pos.x = -1;
-            pos.y = -1;
-        }
-        GridPos get_pos() const {return pos;}
-        
-        virtual void setOwner(int player);
-        
-        /**
-         * Get the player number who is owning the object.
-         * @return  integer value of player number or nil if not owned by a player
-         */
-        Value getOwner();
-        
-        /**
-         * Set the location of the GridObject to a given world or mirrored owner
-         * position.
-         */
-        virtual void setOwnerPos(GridPos po);
-         
-        /**
-         * Get the position of object within the world. Only objects owned by
-         * players will return positions outside of the world. 
-         */
-        GridPos getOwnerPos();
-
-        // GridObject interface
-        virtual void on_laserhit (Direction) {}
-        virtual void actor_enter (Actor *) {}
-        virtual void actor_leave (Actor *) {}
-
-
-        void warning(const char *format, ...) const;
-
-        // Helper functions
-        bool sound_event (const char *name, double vol = 1.0);
-        display::Model *set_anim (const std::string &mname);
-
-    protected:
-        // GridObject interface
-        virtual void set_model (const std::string &mname) = 0;
-        virtual display::Model *get_model () = 0;
-        virtual void kill_model (GridPos p) = 0;
-
-        virtual void init_model() {
-            set_model(get_kind());
-        }
-
-        virtual void on_creation (GridPos) {
-            init_model();
-        }
-
-        virtual void on_removal (GridPos p) {
-            kill_model (p);
-        }
-
-    private:
-        // ModelCallback interface.
-        void animcb() {}
-
-
-        /**
-         * The location of the GridObject. An object that is set on one of the world's
-         * layers will store the x and y coordinates with values greater equal 0. An
-         * object that is not a direct part of the world has a pos.x < 0. Objects that
-         * are owned by other objects that are part of a world layer will store the
-         * position of the owner mirrored at point -1, -1. This results in pos.x <= -2.
-         * All other GridObjects will have pos.x = -1. In this case pos.y >= 0 identifies
-         * the player that owns the object in his inventory. Objects that are neiter set
-         * in the world nor owned by anyone have pos.x = pos.y = -1. 
-         */
-        GridPos pos;
-    };
-
-} // namespace enigma
-
-
-#define CLONEOBJ(TYPE)                                  \
-        TYPE* clone() { return new TYPE(*this); }       \
-        void dispose() { delete this; }
-
-#define CLONEACTOR(TYPE)                                                \
-        TYPE* clone() { TYPE *o=new TYPE(*this); o->init(); return o; } \
-        void dispose() { delete this; }
-
-
-// #define SINGLETONOBJ(TYPE)                    \
-//         TYPE* clone() { return this; }        \
-//         void dispose() {}
-
-
-#define INSTANCELISTOBJ(TYPE)                                                   \
-        typedef std::vector<TYPE*> InstanceList;                                \
-        static InstanceList instances;                                          \
-        TYPE *clone() { TYPE *o = new TYPE(*this); instances.push_back(o); return o;}  \
-        void dispose() {                                                        \
-            instances.erase(find(instances.begin(), instances.end(), this));    \
-            delete this;                                                        \
-        }
-
-#endif

Modified: trunk/src/player.hh
===================================================================
--- trunk/src/player.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/player.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -28,6 +28,8 @@
  */
 
 #include "objects.hh"
+#include "items.hh"
+#include "actors.hh"
 
 namespace enigma
 {

Modified: trunk/src/stones/OxydStone.cc
===================================================================
--- trunk/src/stones/OxydStone.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/stones/OxydStone.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -886,10 +886,10 @@
             set_model(string("st-oxyd")+(std::string)val);
     }
     
-//    Value OxydStone::getAttr(const string &key) const {
-//        // TODO "state" 0=CLOSE || CLOSING; 1 = other iState values
-//        return Object::getAttr(key);
-//    }
+    Value OxydStone::getAttr(const string &key) const {
+        // TODO "state" 0=CLOSE || CLOSING; 1 = other iState values
+        return Object::getAttr(key);
+    }
     
     void OxydStone::actor_hit(const StoneContact &/*sc*/) {
         tryOpen();
@@ -911,7 +911,7 @@
     }
     
     void OxydStone::on_creation (GridPos) {
-        string flavor(getAttr("flavor", "a"));
+        string flavor(getDefaultedAttr("flavor", "a"));
         set_model(string("st-oxyd") + flavor);
         photo_activate();
     }
@@ -991,8 +991,8 @@
     }
     
     void OxydStone::set_iState(State newState) {
-        string flavor(getAttr("flavor","a"));
-        string color(getAttr("color", 0));
+        string flavor(getDefaultedAttr("flavor","a"));
+        string color(getDefaultedAttr("color", 0));
     
         string basemodelname = string("st-oxyd") + flavor;
         string modelname = basemodelname + color;

Modified: trunk/src/stones/OxydStone.hh
===================================================================
--- trunk/src/stones/OxydStone.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/stones/OxydStone.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -85,7 +85,7 @@
         virtual void dispose();
         virtual Value message(const string &m, const Value &);
         virtual void set_attrib(const string& key, const Value &val);
-//        virtual Value getAttr(const string &key) const;
+        virtual Value getAttr(const string &key) const;
 
         // Stone interface
         virtual void actor_hit(const StoneContact &sc);

Modified: trunk/src/stones.cc
===================================================================
--- trunk/src/stones.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/stones.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -194,11 +194,11 @@
    default matrix, resp. defaultfactor as hit_factor. */
 ecl::V2 Stone::distortedVelocity (ecl::V2 vel, double defaultfactor = 1.0) {
     ecl::V2 newvel;
-    double factor = this->getAttr("hit_factor", defaultfactor);
-    newvel[0] = (double)(this->getAttr("hit_distortion_xx", 1)) * vel[0]
+    double factor = this->getDefaultedAttr("hit_factor", defaultfactor);
+    newvel[0] = (double)(this->getDefaultedAttr("hit_distortion_xx", 1)) * vel[0]
                 + (double)(this->getAttr("hit_distortion_xy")) * vel[1];
     newvel[1] = (double)(this->getAttr("hit_distortion_yx")) * vel[0]
-                + (double)(this->getAttr("hit_distortion_yy", 1)) * vel[1];
+                + (double)(this->getDefaultedAttr("hit_distortion_yy", 1)) * vel[1];
     return newvel * factor;
 }
 

Modified: trunk/src/stones.hh
===================================================================
--- trunk/src/stones.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/stones.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -19,7 +19,7 @@
 #ifndef STONES_HH_INCLUDED
 #define STONES_HH_INCLUDED
 
-#include "objects_decl.hh"
+#include "objects.hh"
 
 namespace enigma {
     

Modified: trunk/src/stones_complex.cc
===================================================================
--- trunk/src/stones_complex.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/stones_complex.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -1666,7 +1666,7 @@
         virtual string closing_sound() const { return "doorclose"; }
         virtual const char *collision_sound() { return "electric"; }
         string get_type() const {
-            string type(getAttr("type", "h"));
+            string type(getDefaultedAttr("type", "h"));
             return type;
         }
 
@@ -3057,7 +3057,7 @@
                 the force resulting from floor->add_force. "baseinterval"
                 is 50 ms or the interval given in "interval".
             */
-            double base = getAttr("interval", 0.05);
+            double base = getDefaultedAttr("interval", 0.05);
             if (Value f = getAttr("friction_factor"))
                 base *= 1.0 + (double)f * GetFloor(get_pos())->get_friction();
             if (Value g = getAttr("gradient_factor"))

Modified: trunk/src/stones_simple.cc
===================================================================
--- trunk/src/stones_simple.cc	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/stones_simple.cc	2007-11-27 23:08:19 UTC (rev 929)
@@ -1164,8 +1164,8 @@
         DECL_TRAITS;
 
         void actor_hit(const StoneContact &sc) {
-            double strength = getAttr("strength", 10.0);
-            double length = getAttr("length", 1.0);
+            double strength = getDefaultedAttr("strength", 10.0);
+            double length = getDefaultedAttr("length", 1.0);
             double minlength = getAttr("minlength");
 
             RubberBandData rbd;
@@ -1175,7 +1175,7 @@
 
             // The mode attribute "scissor" defines, if when touching an st-rubberband,
             // other rubberbands to the actor will be cut of or not, true means they will. true is default.
-            bool isScissor = to_bool(getAttr("scissor","true"));
+            bool isScissor = to_bool(getDefaultedAttr("scissor","true"));
 
             if (!HasRubberBand (sc.actor, this)) {
                 sound_event ("rubberband");
@@ -1258,7 +1258,7 @@
         int m_signalvalue;
 
         double get_interval() const {
-            return getAttr("interval", 100);
+            return getDefaultedAttr("interval", 100);
         }
 
         bool get_is_looped() const {
@@ -1450,7 +1450,7 @@
         set_anim("st-thief-emerge");
         state = EMERGING;
         m_affected_actor = sc.actor;
-        affected_player = m_affected_actor->getAttr("player", -1);
+        affected_player = m_affected_actor->getDefaultedAttr("player", -1);
     }
 }
 
@@ -1530,7 +1530,7 @@
                 // actor_hit is called before reflect, but the force added below
                 // is applied to actor after the reflection.
 
-                double forcefac = getAttr("force", server::BumperForce);
+                double forcefac = getDefaultedAttr("force", server::BumperForce);
 
                 V2 vec = normalize(sc.actor->get_pos() - get_pos().center());
                 sc.actor->add_force (distortedVelocity(vec, forcefac));                

Modified: trunk/src/world.hh
===================================================================
--- trunk/src/world.hh	2007-11-22 18:49:58 UTC (rev 928)
+++ trunk/src/world.hh	2007-11-27 23:08:19 UTC (rev 929)
@@ -21,6 +21,10 @@
 
 #include "enigma.hh"
 #include "objects.hh"
+#include "actors.hh"
+#include "floors.hh"
+#include "items.hh"
+#include "stones.hh"
 #include "util.hh"
 
 namespace enigma {



